function Cee(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var cb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function G5(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var pM={exports:{}},sy={},mM={exports:{}},ur={};var T$;function Aee(){if(T$)return ur;T$=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;function h(D){return D===null||typeof D!="object"?null:(D=d&&D[d]||D["@@iterator"],typeof D=="function"?D:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(D,U,te){this.props=D,this.context=U,this.refs=v,this.updater=te||m}y.prototype.isReactComponent={},y.prototype.setState=function(D,U){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,U,"setState")},y.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function x(){}x.prototype=y.prototype;function w(D,U,te){this.props=D,this.context=U,this.refs=v,this.updater=te||m}var S=w.prototype=new x;S.constructor=w,g(S,y.prototype),S.isPureReactComponent=!0;var M=Array.isArray,T=Object.prototype.hasOwnProperty,P={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function A(D,U,te){var ee,pe={},Oe=null,xe=null;if(U!=null)for(ee in U.ref!==void 0&&(xe=U.ref),U.key!==void 0&&(Oe=""+U.key),U)T.call(U,ee)&&!E.hasOwnProperty(ee)&&(pe[ee]=U[ee]);var Ie=arguments.length-2;if(Ie===1)pe.children=te;else if(1<Ie){for(var Pe=Array(Ie),he=0;he<Ie;he++)Pe[he]=arguments[he+2];pe.children=Pe}if(D&&D.defaultProps)for(ee in Ie=D.defaultProps,Ie)pe[ee]===void 0&&(pe[ee]=Ie[ee]);return{$$typeof:e,type:D,key:Oe,ref:xe,props:pe,_owner:P.current}}function L(D,U){return{$$typeof:e,type:D.type,key:U,ref:D.ref,props:D.props,_owner:D._owner}}function B(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function V(D){var U={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(te){return U[te]})}var G=/\/+/g;function z(D,U){return typeof D=="object"&&D!==null&&D.key!=null?V(""+D.key):U.toString(36)}function K(D,U,te,ee,pe){var Oe=typeof D;(Oe==="undefined"||Oe==="boolean")&&(D=null);var xe=!1;if(D===null)xe=!0;else switch(Oe){case"string":case"number":xe=!0;break;case"object":switch(D.$$typeof){case e:case t:xe=!0}}if(xe)return xe=D,pe=pe(xe),D=ee===""?"."+z(xe,0):ee,M(pe)?(te="",D!=null&&(te=D.replace(G,"$&/")+"/"),K(pe,U,te,"",function(he){return he})):pe!=null&&(B(pe)&&(pe=L(pe,te+(!pe.key||xe&&xe.key===pe.key?"":(""+pe.key).replace(G,"$&/")+"/")+D)),U.push(pe)),1;if(xe=0,ee=ee===""?".":ee+":",M(D))for(var Ie=0;Ie<D.length;Ie++){Oe=D[Ie];var Pe=ee+z(Oe,Ie);xe+=K(Oe,U,te,Pe,pe)}else if(Pe=h(D),typeof Pe=="function")for(D=Pe.call(D),Ie=0;!(Oe=D.next()).done;)Oe=Oe.value,Pe=ee+z(Oe,Ie++),xe+=K(Oe,U,te,Pe,pe);else if(Oe==="object")throw U=String(D),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return xe}function J(D,U,te){if(D==null)return D;var ee=[],pe=0;return K(D,ee,"","",function(Oe){return U.call(te,Oe,pe++)}),ee}function X(D){if(D._status===-1){var U=D._result;U=U(),U.then(function(te){(D._status===0||D._status===-1)&&(D._status=1,D._result=te)},function(te){(D._status===0||D._status===-1)&&(D._status=2,D._result=te)}),D._status===-1&&(D._status=0,D._result=U)}if(D._status===1)return D._result.default;throw D._result}var Q={current:null},W={transition:null},oe={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:W,ReactCurrentOwner:P};function ce(){throw Error("act(...) is not supported in production builds of React.")}return ur.Children={map:J,forEach:function(D,U,te){J(D,function(){U.apply(this,arguments)},te)},count:function(D){var U=0;return J(D,function(){U++}),U},toArray:function(D){return J(D,function(U){return U})||[]},only:function(D){if(!B(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},ur.Component=y,ur.Fragment=r,ur.Profiler=i,ur.PureComponent=w,ur.StrictMode=n,ur.Suspense=l,ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,ur.act=ce,ur.cloneElement=function(D,U,te){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var ee=g({},D.props),pe=D.key,Oe=D.ref,xe=D._owner;if(U!=null){if(U.ref!==void 0&&(Oe=U.ref,xe=P.current),U.key!==void 0&&(pe=""+U.key),D.type&&D.type.defaultProps)var Ie=D.type.defaultProps;for(Pe in U)T.call(U,Pe)&&!E.hasOwnProperty(Pe)&&(ee[Pe]=U[Pe]===void 0&&Ie!==void 0?Ie[Pe]:U[Pe])}var Pe=arguments.length-2;if(Pe===1)ee.children=te;else if(1<Pe){Ie=Array(Pe);for(var he=0;he<Pe;he++)Ie[he]=arguments[he+2];ee.children=Ie}return{$$typeof:e,type:D.type,key:pe,ref:Oe,props:ee,_owner:xe}},ur.createContext=function(D){return D={$$typeof:o,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:s,_context:D},D.Consumer=D},ur.createElement=A,ur.createFactory=function(D){var U=A.bind(null,D);return U.type=D,U},ur.createRef=function(){return{current:null}},ur.forwardRef=function(D){return{$$typeof:a,render:D}},ur.isValidElement=B,ur.lazy=function(D){return{$$typeof:c,_payload:{_status:-1,_result:D},_init:X}},ur.memo=function(D,U){return{$$typeof:u,type:D,compare:U===void 0?null:U}},ur.startTransition=function(D){var U=W.transition;W.transition={};try{D()}finally{W.transition=U}},ur.unstable_act=ce,ur.useCallback=function(D,U){return Q.current.useCallback(D,U)},ur.useContext=function(D){return Q.current.useContext(D)},ur.useDebugValue=function(){},ur.useDeferredValue=function(D){return Q.current.useDeferredValue(D)},ur.useEffect=function(D,U){return Q.current.useEffect(D,U)},ur.useId=function(){return Q.current.useId()},ur.useImperativeHandle=function(D,U,te){return Q.current.useImperativeHandle(D,U,te)},ur.useInsertionEffect=function(D,U){return Q.current.useInsertionEffect(D,U)},ur.useLayoutEffect=function(D,U){return Q.current.useLayoutEffect(D,U)},ur.useMemo=function(D,U){return Q.current.useMemo(D,U)},ur.useReducer=function(D,U,te){return Q.current.useReducer(D,U,te)},ur.useRef=function(D){return Q.current.useRef(D)},ur.useState=function(D){return Q.current.useState(D)},ur.useSyncExternalStore=function(D,U,te){return Q.current.useSyncExternalStore(D,U,te)},ur.useTransition=function(){return Q.current.useTransition()},ur.version="18.3.1",ur}var S$;function r2(){return S$||(S$=1,mM.exports=Aee()),mM.exports}var P$;function Oee(){if(P$)return sy;P$=1;var e=r2(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var c,d={},h=null,m=null;u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(m=l.ref);for(c in l)n.call(l,c)&&!s.hasOwnProperty(c)&&(d[c]=l[c]);if(a&&a.defaultProps)for(c in l=a.defaultProps,l)d[c]===void 0&&(d[c]=l[c]);return{$$typeof:t,type:a,key:h,ref:m,props:d,_owner:i.current}}return sy.Fragment=r,sy.jsx=o,sy.jsxs=o,sy}var E$;function kee(){return E$||(E$=1,pM.exports=Oee()),pM.exports}var _=kee(),db={},gM={exports:{}},Es={},vM={exports:{}},yM={};var C$;function Iee(){return C$||(C$=1,(function(e){function t(W,oe){var ce=W.length;W.push(oe);e:for(;0<ce;){var D=ce-1>>>1,U=W[D];if(0<i(U,oe))W[D]=oe,W[ce]=U,ce=D;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var oe=W[0],ce=W.pop();if(ce!==oe){W[0]=ce;e:for(var D=0,U=W.length,te=U>>>1;D<te;){var ee=2*(D+1)-1,pe=W[ee],Oe=ee+1,xe=W[Oe];if(0>i(pe,ce))Oe<U&&0>i(xe,pe)?(W[D]=xe,W[Oe]=ce,D=Oe):(W[D]=pe,W[ee]=ce,D=ee);else if(Oe<U&&0>i(xe,ce))W[D]=xe,W[Oe]=ce,D=Oe;else break e}}return oe}function i(W,oe){var ce=W.sortIndex-oe.sortIndex;return ce!==0?ce:W.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(W){for(var oe=r(u);oe!==null;){if(oe.callback===null)n(u);else if(oe.startTime<=W)n(u),oe.sortIndex=oe.expirationTime,t(l,oe);else break;oe=r(u)}}function M(W){if(v=!1,S(W),!g)if(r(l)!==null)g=!0,X(T);else{var oe=r(u);oe!==null&&Q(M,oe.startTime-W)}}function T(W,oe){g=!1,v&&(v=!1,x(A),A=-1),m=!0;var ce=h;try{for(S(oe),d=r(l);d!==null&&(!(d.expirationTime>oe)||W&&!V());){var D=d.callback;if(typeof D=="function"){d.callback=null,h=d.priorityLevel;var U=D(d.expirationTime<=oe);oe=e.unstable_now(),typeof U=="function"?d.callback=U:d===r(l)&&n(l),S(oe)}else n(l);d=r(l)}if(d!==null)var te=!0;else{var ee=r(u);ee!==null&&Q(M,ee.startTime-oe),te=!1}return te}finally{d=null,h=ce,m=!1}}var P=!1,E=null,A=-1,L=5,B=-1;function V(){return!(e.unstable_now()-B<L)}function G(){if(E!==null){var W=e.unstable_now();B=W;var oe=!0;try{oe=E(!0,W)}finally{oe?z():(P=!1,E=null)}}else P=!1}var z;if(typeof w=="function")z=function(){w(G)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,J=K.port2;K.port1.onmessage=G,z=function(){J.postMessage(null)}}else z=function(){y(G,0)};function X(W){E=W,P||(P=!0,z())}function Q(W,oe){A=y(function(){W(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,X(T))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(W){switch(h){case 1:case 2:case 3:var oe=3;break;default:oe=h}var ce=h;h=oe;try{return W()}finally{h=ce}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,oe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ce=h;h=W;try{return oe()}finally{h=ce}},e.unstable_scheduleCallback=function(W,oe,ce){var D=e.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?D+ce:D):ce=D,W){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ce+U,W={id:c++,callback:oe,priorityLevel:W,startTime:ce,expirationTime:U,sortIndex:-1},ce>D?(W.sortIndex=ce,t(u,W),r(l)===null&&W===r(u)&&(v?(x(A),A=-1):v=!0,Q(M,ce-D))):(W.sortIndex=U,t(l,W),g||m||(g=!0,X(T))),W},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(W){var oe=h;return function(){var ce=h;h=oe;try{return W.apply(this,arguments)}finally{h=ce}}}})(yM)),yM}var A$;function jee(){return A$||(A$=1,vM.exports=Iee()),vM.exports}var O$;function $ee(){if(O$)return Es;O$=1;var e=r2(),t=jee();function r(f){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+f,b=1;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(f,p){o(f,p),o(f+"Capture",p)}function o(f,p){for(i[f]=p,f=0;f<p.length;f++)n.add(p[f])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},d={};function h(f){return l.call(d,f)?!0:l.call(c,f)?!1:u.test(f)?d[f]=!0:(c[f]=!0,!1)}function m(f,p,b,C){if(b!==null&&b.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return C?!1:b!==null?!b.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function g(f,p,b,C){if(p===null||typeof p>"u"||m(f,p,b,C))return!0;if(C)return!1;if(b!==null)switch(b.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function v(f,p,b,C,N,F,ne){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=C,this.attributeNamespace=N,this.mustUseProperty=b,this.propertyName=f,this.type=p,this.sanitizeURL=F,this.removeEmptyString=ne}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){y[f]=new v(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var p=f[0];y[p]=new v(p,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){y[f]=new v(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){y[f]=new v(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){y[f]=new v(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){y[f]=new v(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){y[f]=new v(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){y[f]=new v(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){y[f]=new v(f,5,!1,f.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function w(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var p=f.replace(x,w);y[p]=new v(p,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var p=f.replace(x,w);y[p]=new v(p,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var p=f.replace(x,w);y[p]=new v(p,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){y[f]=new v(f,1,!1,f.toLowerCase(),null,!1,!1)}),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){y[f]=new v(f,1,!1,f.toLowerCase(),null,!0,!0)});function S(f,p,b,C){var N=y.hasOwnProperty(p)?y[p]:null;(N!==null?N.type!==0:C||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(g(p,b,N,C)&&(b=null),C||N===null?h(p)&&(b===null?f.removeAttribute(p):f.setAttribute(p,""+b)):N.mustUseProperty?f[N.propertyName]=b===null?N.type===3?!1:"":b:(p=N.attributeName,C=N.attributeNamespace,b===null?f.removeAttribute(p):(N=N.type,b=N===3||N===4&&b===!0?"":""+b,C?f.setAttributeNS(C,p,b):f.setAttribute(p,b))))}var M=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),P=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),V=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),W=Symbol.iterator;function oe(f){return f===null||typeof f!="object"?null:(f=W&&f[W]||f["@@iterator"],typeof f=="function"?f:null)}var ce=Object.assign,D;function U(f){if(D===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);D=p&&p[1]||""}return`
`+D+f}var te=!1;function ee(f,p){if(!f||te)return"";te=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(H){var C=H}Reflect.construct(f,[],p)}else{try{p.call()}catch(H){C=H}f.call(p.prototype)}else{try{throw Error()}catch(H){C=H}f()}}catch(H){if(H&&C&&typeof H.stack=="string"){for(var N=H.stack.split(`
`),F=C.stack.split(`
`),ne=N.length-1,O=F.length-1;1<=ne&&0<=O&&N[ne]!==F[O];)O--;for(;1<=ne&&0<=O;ne--,O--)if(N[ne]!==F[O]){if(ne!==1||O!==1)do if(ne--,O--,0>O||N[ne]!==F[O]){var k=`
`+N[ne].replace(" at new "," at ");return f.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",f.displayName)),k}while(1<=ne&&0<=O);break}}}finally{te=!1,Error.prepareStackTrace=b}return(f=f?f.displayName||f.name:"")?U(f):""}function pe(f){switch(f.tag){case 5:return U(f.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return f=ee(f.type,!1),f;case 11:return f=ee(f.type.render,!1),f;case 1:return f=ee(f.type,!0),f;default:return""}}function Oe(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case E:return"Fragment";case P:return"Portal";case L:return"Profiler";case A:return"StrictMode";case z:return"Suspense";case K:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case V:return(f.displayName||"Context")+".Consumer";case B:return(f._context.displayName||"Context")+".Provider";case G:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case J:return p=f.displayName||null,p!==null?p:Oe(f.type)||"Memo";case X:p=f._payload,f=f._init;try{return Oe(f(p))}catch{}}return null}function xe(f){var p=f.type;switch(f.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=p.render,f=f.displayName||f.name||"",p.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(p);case 8:return p===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function Ie(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Pe(f){var p=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function he(f){var p=Pe(f)?"checked":"value",b=Object.getOwnPropertyDescriptor(f.constructor.prototype,p),C=""+f[p];if(!f.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var N=b.get,F=b.set;return Object.defineProperty(f,p,{configurable:!0,get:function(){return N.call(this)},set:function(ne){C=""+ne,F.call(this,ne)}}),Object.defineProperty(f,p,{enumerable:b.enumerable}),{getValue:function(){return C},setValue:function(ne){C=""+ne},stopTracking:function(){f._valueTracker=null,delete f[p]}}}}function re(f){f._valueTracker||(f._valueTracker=he(f))}function ue(f){if(!f)return!1;var p=f._valueTracker;if(!p)return!0;var b=p.getValue(),C="";return f&&(C=Pe(f)?f.checked?"true":"false":f.value),f=C,f!==b?(p.setValue(f),!0):!1}function ae(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function Ce(f,p){var b=p.checked;return ce({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??f._wrapperState.initialChecked})}function $e(f,p){var b=p.defaultValue==null?"":p.defaultValue,C=p.checked!=null?p.checked:p.defaultChecked;b=Ie(p.value!=null?p.value:b),f._wrapperState={initialChecked:C,initialValue:b,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function Ne(f,p){p=p.checked,p!=null&&S(f,"checked",p,!1)}function Le(f,p){Ne(f,p);var b=Ie(p.value),C=p.type;if(b!=null)C==="number"?(b===0&&f.value===""||f.value!=b)&&(f.value=""+b):f.value!==""+b&&(f.value=""+b);else if(C==="submit"||C==="reset"){f.removeAttribute("value");return}p.hasOwnProperty("value")?He(f,p.type,b):p.hasOwnProperty("defaultValue")&&He(f,p.type,Ie(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(f.defaultChecked=!!p.defaultChecked)}function Ve(f,p,b){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var C=p.type;if(!(C!=="submit"&&C!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+f._wrapperState.initialValue,b||p===f.value||(f.value=p),f.defaultValue=p}b=f.name,b!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,b!==""&&(f.name=b)}function He(f,p,b){(p!=="number"||ae(f.ownerDocument)!==f)&&(b==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+b&&(f.defaultValue=""+b))}var Qe=Array.isArray;function et(f,p,b,C){if(f=f.options,p){p={};for(var N=0;N<b.length;N++)p["$"+b[N]]=!0;for(b=0;b<f.length;b++)N=p.hasOwnProperty("$"+f[b].value),f[b].selected!==N&&(f[b].selected=N),N&&C&&(f[b].defaultSelected=!0)}else{for(b=""+Ie(b),p=null,N=0;N<f.length;N++){if(f[N].value===b){f[N].selected=!0,C&&(f[N].defaultSelected=!0);return}p!==null||f[N].disabled||(p=f[N])}p!==null&&(p.selected=!0)}}function ot(f,p){if(p.dangerouslySetInnerHTML!=null)throw Error(r(91));return ce({},p,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function Xe(f,p){var b=p.value;if(b==null){if(b=p.children,p=p.defaultValue,b!=null){if(p!=null)throw Error(r(92));if(Qe(b)){if(1<b.length)throw Error(r(93));b=b[0]}p=b}p==null&&(p=""),b=p}f._wrapperState={initialValue:Ie(b)}}function lt(f,p){var b=Ie(p.value),C=Ie(p.defaultValue);b!=null&&(b=""+b,b!==f.value&&(f.value=b),p.defaultValue==null&&f.defaultValue!==b&&(f.defaultValue=b)),C!=null&&(f.defaultValue=""+C)}function _t(f){var p=f.textContent;p===f._wrapperState.initialValue&&p!==""&&p!==null&&(f.value=p)}function dt(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xt(f,p){return f==null||f==="http://www.w3.org/1999/xhtml"?dt(p):f==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var gt,We=(function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,b,C,N){MSApp.execUnsafeLocalFunction(function(){return f(p,b,C,N)})}:f})(function(f,p){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=p;else{for(gt=gt||document.createElement("div"),gt.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=gt.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;p.firstChild;)f.appendChild(p.firstChild)}});function Ze(f,p){if(p){var b=f.firstChild;if(b&&b===f.lastChild&&b.nodeType===3){b.nodeValue=p;return}}f.textContent=p}var Pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zt=["Webkit","ms","Moz","O"];Object.keys(Pt).forEach(function(f){Zt.forEach(function(p){p=p+f.charAt(0).toUpperCase()+f.substring(1),Pt[p]=Pt[f]})});function Rt(f,p,b){return p==null||typeof p=="boolean"||p===""?"":b||typeof p!="number"||p===0||Pt.hasOwnProperty(f)&&Pt[f]?(""+p).trim():p+"px"}function Kr(f,p){f=f.style;for(var b in p)if(p.hasOwnProperty(b)){var C=b.indexOf("--")===0,N=Rt(b,p[b],C);b==="float"&&(b="cssFloat"),C?f.setProperty(b,N):f[b]=N}}var gn=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jt(f,p){if(p){if(gn[f]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(r(137,f));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(r(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(r(61))}if(p.style!=null&&typeof p.style!="object")throw Error(r(62))}}function hi(f,p){if(f.indexOf("-")===-1)return typeof p.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z=null;function be(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var se=null,we=null,je=null;function Je(f){if(f=Xl(f)){if(typeof se!="function")throw Error(r(280));var p=f.stateNode;p&&(p=Cd(p),se(f.stateNode,f.type,p))}}function Be(f){we?je?je.push(f):je=[f]:we=f}function Nt(){if(we){var f=we,p=je;if(je=we=null,Je(f),p)for(f=0;f<p.length;f++)Je(p[f])}}function bt(f,p){return f(p)}function wt(){}var Rr=!1;function sr(f,p,b){if(Rr)return f(p,b);Rr=!0;try{return bt(f,p,b)}finally{Rr=!1,(we!==null||je!==null)&&(wt(),Nt())}}function kr(f,p){var b=f.stateNode;if(b===null)return null;var C=Cd(b);if(C===null)return null;b=C[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(f=f.type,C=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!C;break e;default:f=!1}if(f)return null;if(b&&typeof b!="function")throw Error(r(231,p,typeof b));return b}var Pr=!1;if(a)try{var Rn={};Object.defineProperty(Rn,"passive",{get:function(){Pr=!0}}),window.addEventListener("test",Rn,Rn),window.removeEventListener("test",Rn,Rn)}catch{Pr=!1}function Lr(f,p,b,C,N,F,ne,O,k){var H=Array.prototype.slice.call(arguments,3);try{p.apply(b,H)}catch(fe){this.onError(fe)}}var Tn=!1,Pi=null,Bi=!1,zi=null,no={onError:function(f){Tn=!0,Pi=f}};function Ei(f,p,b,C,N,F,ne,O,k){Tn=!1,Pi=null,Lr.apply(no,arguments)}function io(f,p,b,C,N,F,ne,O,k){if(Ei.apply(this,arguments),Tn){if(Tn){var H=Pi;Tn=!1,Pi=null}else throw Error(r(198));Bi||(Bi=!0,zi=H)}}function Wn(f){var p=f,b=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(b=p.return),f=p.return;while(f)}return p.tag===3?b:null}function vs(f){if(f.tag===13){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function ri(f){if(Wn(f)!==f)throw Error(r(188))}function zo(f){var p=f.alternate;if(!p){if(p=Wn(f),p===null)throw Error(r(188));return p!==f?null:f}for(var b=f,C=p;;){var N=b.return;if(N===null)break;var F=N.alternate;if(F===null){if(C=N.return,C!==null){b=C;continue}break}if(N.child===F.child){for(F=N.child;F;){if(F===b)return ri(N),f;if(F===C)return ri(N),p;F=F.sibling}throw Error(r(188))}if(b.return!==C.return)b=N,C=F;else{for(var ne=!1,O=N.child;O;){if(O===b){ne=!0,b=N,C=F;break}if(O===C){ne=!0,C=N,b=F;break}O=O.sibling}if(!ne){for(O=F.child;O;){if(O===b){ne=!0,b=F,C=N;break}if(O===C){ne=!0,C=F,b=N;break}O=O.sibling}if(!ne)throw Error(r(189))}}if(b.alternate!==C)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?f:p}function Ur(f){return f=zo(f),f!==null?es(f):null}function es(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var p=es(f);if(p!==null)return p;f=f.sibling}return null}var ts=t.unstable_scheduleCallback,Kn=t.unstable_cancelCallback,Ci=t.unstable_shouldYield,it=t.unstable_requestPaint,nt=t.unstable_now,At=t.unstable_getCurrentPriorityLevel,vn=t.unstable_ImmediatePriority,pi=t.unstable_UserBlockingPriority,ys=t.unstable_NormalPriority,dn=t.unstable_LowPriority,Gn=t.unstable_IdlePriority,_s=null,mi=null;function xl(f){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(_s,f,void 0,(f.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:Sl,Ml=Math.log,Tl=Math.LN2;function Sl(f){return f>>>=0,f===0?32:31-(Ml(f)/Tl|0)|0}var so=64,Ns=4194304;function Ui(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function oo(f,p){var b=f.pendingLanes;if(b===0)return 0;var C=0,N=f.suspendedLanes,F=f.pingedLanes,ne=b&268435455;if(ne!==0){var O=ne&~N;O!==0?C=Ui(O):(F&=ne,F!==0&&(C=Ui(F)))}else ne=b&~N,ne!==0?C=Ui(ne):F!==0&&(C=Ui(F));if(C===0)return 0;if(p!==0&&p!==C&&(p&N)===0&&(N=C&-C,F=p&-p,N>=F||N===16&&(F&4194240)!==0))return p;if((C&4)!==0&&(C|=b&16),p=f.entangledLanes,p!==0)for(f=f.entanglements,p&=C;0<p;)b=31-Sn(p),N=1<<b,C|=f[b],p&=~N;return C}function Pl(f,p){switch(f){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function El(f,p){for(var b=f.suspendedLanes,C=f.pingedLanes,N=f.expirationTimes,F=f.pendingLanes;0<F;){var ne=31-Sn(F),O=1<<ne,k=N[ne];k===-1?((O&b)===0||(O&C)!==0)&&(N[ne]=Pl(O,p)):k<=p&&(f.expiredLanes|=O),F&=~O}}function Uo(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function ao(){var f=so;return so<<=1,(so&4194240)===0&&(so=64),f}function ke(f){for(var p=[],b=0;31>b;b++)p.push(f);return p}function q(f,p,b){f.pendingLanes|=p,p!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,p=31-Sn(p),f[p]=b}function de(f,p){var b=f.pendingLanes&~p;f.pendingLanes=p,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=p,f.mutableReadLanes&=p,f.entangledLanes&=p,p=f.entanglements;var C=f.eventTimes;for(f=f.expirationTimes;0<b;){var N=31-Sn(b),F=1<<N;p[N]=0,C[N]=-1,f[N]=-1,b&=~F}}function _e(f,p){var b=f.entangledLanes|=p;for(f=f.entanglements;b;){var C=31-Sn(b),N=1<<C;N&p|f[C]&p&&(f[C]|=p),b&=~N}}var ve=0;function Re(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var Ke,ft,mt,vt,ut,tr=!1,Lt=[],dr=null,Fr=null,wr=null,Xr=new Map,pr=new Map,Ar=[],lo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pn(f,p){switch(f){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":Xr.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":pr.delete(p.pointerId)}}function Ai(f,p,b,C,N,F){return f===null||f.nativeEvent!==F?(f={blockedOn:p,domEventName:b,eventSystemFlags:C,nativeEvent:F,targetContainers:[N]},p!==null&&(p=Xl(p),p!==null&&ft(p)),f):(f.eventSystemFlags|=C,p=f.targetContainers,N!==null&&p.indexOf(N)===-1&&p.push(N),f)}function Ir(f,p,b,C,N){switch(p){case"focusin":return dr=Ai(dr,f,p,b,C,N),!0;case"dragenter":return Fr=Ai(Fr,f,p,b,C,N),!0;case"mouseover":return wr=Ai(wr,f,p,b,C,N),!0;case"pointerover":var F=N.pointerId;return Xr.set(F,Ai(Xr.get(F)||null,f,p,b,C,N)),!0;case"gotpointercapture":return F=N.pointerId,pr.set(F,Ai(pr.get(F)||null,f,p,b,C,N)),!0}return!1}function En(f){var p=za(f.target);if(p!==null){var b=Wn(p);if(b!==null){if(p=b.tag,p===13){if(p=vs(b),p!==null){f.blockedOn=p,ut(f.priority,function(){mt(b)});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){f.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}f.blockedOn=null}function Cn(f){if(f.blockedOn!==null)return!1;for(var p=f.targetContainers;0<p.length;){var b=$a(f.domEventName,f.eventSystemFlags,p[0],f.nativeEvent);if(b===null){b=f.nativeEvent;var C=new b.constructor(b.type,b);Z=C,b.target.dispatchEvent(C),Z=null}else return p=Xl(b),p!==null&&ft(p),f.blockedOn=b,!1;p.shift()}return!0}function Vi(f,p,b){Cn(f)&&b.delete(p)}function bs(){tr=!1,dr!==null&&Cn(dr)&&(dr=null),Fr!==null&&Cn(Fr)&&(Fr=null),wr!==null&&Cn(wr)&&(wr=null),Xr.forEach(Vi),pr.forEach(Vi)}function yn(f,p){f.blockedOn===p&&(f.blockedOn=null,tr||(tr=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,bs)))}function fn(f){function p(N){return yn(N,f)}if(0<Lt.length){yn(Lt[0],f);for(var b=1;b<Lt.length;b++){var C=Lt[b];C.blockedOn===f&&(C.blockedOn=null)}}for(dr!==null&&yn(dr,f),Fr!==null&&yn(Fr,f),wr!==null&&yn(wr,f),Xr.forEach(p),pr.forEach(p),b=0;b<Ar.length;b++)C=Ar[b],C.blockedOn===f&&(C.blockedOn=null);for(;0<Ar.length&&(b=Ar[0],b.blockedOn===null);)En(b),b.blockedOn===null&&Ar.shift()}var Yr=M.ReactCurrentBatchConfig,Vr=!0;function Qr(f,p,b,C){var N=ve,F=Yr.transition;Yr.transition=null;try{ve=1,Xn(f,p,b,C)}finally{ve=N,Yr.transition=F}}function _n(f,p,b,C){var N=ve,F=Yr.transition;Yr.transition=null;try{ve=4,Xn(f,p,b,C)}finally{ve=N,Yr.transition=F}}function Xn(f,p,b,C){if(Vr){var N=$a(f,p,b,C);if(N===null)Md(f,p,C,Oi,b),Pn(f,C);else if(Ir(N,f,p,b,C))C.stopPropagation();else if(Pn(f,C),p&4&&-1<lo.indexOf(f)){for(;N!==null;){var F=Xl(N);if(F!==null&&Ke(F),F=$a(f,p,b,C),F===null&&Md(f,p,C,Oi,b),F===N)break;N=F}N!==null&&C.stopPropagation()}else Md(f,p,C,null,b)}}var Oi=null;function $a(f,p,b,C){if(Oi=null,f=be(C),f=za(f),f!==null)if(p=Wn(f),p===null)f=null;else if(b=p.tag,b===13){if(f=vs(p),f!==null)return f;f=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;f=null}else p!==f&&(f=null);return Oi=f,null}function ud(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(At()){case vn:return 1;case pi:return 4;case ys:case dn:return 16;case Gn:return 536870912;default:return 16}default:return 16}}var ws=null,zu=null,Cl=null;function Vo(){if(Cl)return Cl;var f,p=zu,b=p.length,C,N="value"in ws?ws.value:ws.textContent,F=N.length;for(f=0;f<b&&p[f]===N[f];f++);var ne=b-f;for(C=1;C<=ne&&p[b-C]===N[F-C];C++);return Cl=N.slice(f,1<C?1-C:void 0)}function Al(f){var p=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&p===13&&(f=13)):f=p,f===10&&(f=13),32<=f||f===13?f:0}function Ol(){return!0}function cd(){return!1}function gi(f){function p(b,C,N,F,ne){this._reactName=b,this._targetInst=N,this.type=C,this.nativeEvent=F,this.target=ne,this.currentTarget=null;for(var O in f)f.hasOwnProperty(O)&&(b=f[O],this[O]=b?b(F):F[O]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?Ol:cd,this.isPropagationStopped=cd,this}return ce(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Ol)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Ol)},persist:function(){},isPersistent:Ol}),p}var Wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kl=gi(Wo),Na=ce({},Wo,{view:0,detail:0}),gh=gi(Na),Il,jl,uo,Da=ce({},Na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gu,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==uo&&(uo&&f.type==="mousemove"?(Il=f.screenX-uo.screenX,jl=f.screenY-uo.screenY):jl=Il=0,uo=f),Il)},movementY:function(f){return"movementY"in f?f.movementY:jl}}),Uu=gi(Da),wg=ce({},Da,{dataTransfer:0}),dd=gi(wg),Vu=ce({},Na,{relatedTarget:0}),Ds=gi(Vu),Wu=ce({},Wo,{animationName:0,elapsedTime:0,pseudoElement:0}),fd=gi(Wu),vh=ce({},Wo,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),yh=gi(vh),_h=ce({},Wo,{data:0}),$l=gi(_h),hd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pd(f){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(f):(f=wh[f])?!!p[f]:!1}function Gu(){return pd}var qu=ce({},Na,{key:function(f){if(f.key){var p=hd[f.key]||f.key;if(p!=="Unidentified")return p}return f.type==="keypress"?(f=Al(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?bh[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gu,charCode:function(f){return f.type==="keypress"?Al(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?Al(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),md=gi(qu),xh=ce({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hu=gi(xh),Go=ce({},Na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gu}),Nl=gi(Go),Dl=ce({},Wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),gd=gi(Dl),xg=ce({},Da,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Mh=gi(xg),Rl=[9,13,27,32],Ra=a&&"CompositionEvent"in window,qo=null;a&&"documentMode"in document&&(qo=document.documentMode);var vd=a&&"TextEvent"in window&&!qo,Ku=a&&(!Ra||qo&&8<qo&&11>=qo),Xu=" ",La=!1;function Yu(f,p){switch(f){case"keyup":return Rl.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yd(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var co=!1;function Qu(f,p){switch(f){case"compositionend":return yd(p);case"keypress":return p.which!==32?null:(La=!0,Xu);case"textInput":return f=p.data,f===Xu&&La?null:f;default:return null}}function Ll(f,p){if(co)return f==="compositionend"||!Ra&&Yu(f,p)?(f=Vo(),Cl=zu=ws=null,co=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Ku&&p.locale!=="ko"?null:p.data;default:return null}}var kt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ju(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p==="input"?!!kt[f.type]:p==="textarea"}function Zu(f,p,b,C){Be(C),p=Td(p,"onChange"),0<p.length&&(b=new kl("onChange","change",null,b,C),f.push({event:b,listeners:p}))}var Ho=null,xs=null;function rs(f){Eh(f,0)}function fo(f){var p=Yl(f);if(ue(p))return f}function Fl(f,p){if(f==="change")return p}var ec=!1;if(a){var Bl;if(a){var Fa="oninput"in document;if(!Fa){var zl=document.createElement("div");zl.setAttribute("oninput","return;"),Fa=typeof zl.oninput=="function"}Bl=Fa}else Bl=!1;ec=Bl&&(!document.documentMode||9<document.documentMode)}function tc(){Ho&&(Ho.detachEvent("onpropertychange",Ul),xs=Ho=null)}function Ul(f){if(f.propertyName==="value"&&fo(xs)){var p=[];Zu(p,xs,f,be(f)),sr(rs,p)}}function _d(f,p,b){f==="focusin"?(tc(),Ho=p,xs=b,Ho.attachEvent("onpropertychange",Ul)):f==="focusout"&&tc()}function Vl(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return fo(xs)}function Wl(f,p){if(f==="click")return fo(p)}function rc(f,p){if(f==="input"||f==="change")return fo(p)}function bd(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var vi=typeof Object.is=="function"?Object.is:bd;function Ko(f,p){if(vi(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var b=Object.keys(f),C=Object.keys(p);if(b.length!==C.length)return!1;for(C=0;C<b.length;C++){var N=b[C];if(!l.call(p,N)||!vi(f[N],p[N]))return!1}return!0}function nc(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function Gl(f,p){var b=nc(f);f=0;for(var C;b;){if(b.nodeType===3){if(C=f+b.textContent.length,f<=p&&C>=p)return{node:b,offset:p-f};f=C}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=nc(b)}}function I(f,p){return f&&p?f===p?!0:f&&f.nodeType===3?!1:p&&p.nodeType===3?I(f,p.parentNode):"contains"in f?f.contains(p):f.compareDocumentPosition?!!(f.compareDocumentPosition(p)&16):!1:!1}function R(){for(var f=window,p=ae();p instanceof f.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)f=p.contentWindow;else break;p=ae(f.document)}return p}function Y(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p&&(p==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||p==="textarea"||f.contentEditable==="true")}function ie(f){var p=R(),b=f.focusedElem,C=f.selectionRange;if(p!==b&&b&&b.ownerDocument&&I(b.ownerDocument.documentElement,b)){if(C!==null&&Y(b)){if(p=C.start,f=C.end,f===void 0&&(f=p),"selectionStart"in b)b.selectionStart=p,b.selectionEnd=Math.min(f,b.value.length);else if(f=(p=b.ownerDocument||document)&&p.defaultView||window,f.getSelection){f=f.getSelection();var N=b.textContent.length,F=Math.min(C.start,N);C=C.end===void 0?F:Math.min(C.end,N),!f.extend&&F>C&&(N=C,C=F,F=N),N=Gl(b,F);var ne=Gl(b,C);N&&ne&&(f.rangeCount!==1||f.anchorNode!==N.node||f.anchorOffset!==N.offset||f.focusNode!==ne.node||f.focusOffset!==ne.offset)&&(p=p.createRange(),p.setStart(N.node,N.offset),f.removeAllRanges(),F>C?(f.addRange(p),f.extend(ne.node,ne.offset)):(p.setEnd(ne.node,ne.offset),f.addRange(p)))}}for(p=[],f=b;f=f.parentNode;)f.nodeType===1&&p.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<p.length;b++)f=p[b],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var le=a&&"documentMode"in document&&11>=document.documentMode,Se=null,Ge=null,rt=null,pt=!1;function Tt(f,p,b){var C=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;pt||Se==null||Se!==ae(C)||(C=Se,"selectionStart"in C&&Y(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),rt&&Ko(rt,C)||(rt=C,C=Td(Ge,"onSelect"),0<C.length&&(p=new kl("onSelect","select",null,p,b),f.push({event:p,listeners:C}),p.target=Se)))}function Ft(f,p){var b={};return b[f.toLowerCase()]=p.toLowerCase(),b["Webkit"+f]="webkit"+p,b["Moz"+f]="moz"+p,b}var rr={animationend:Ft("Animation","AnimationEnd"),animationiteration:Ft("Animation","AnimationIteration"),animationstart:Ft("Animation","AnimationStart"),transitionend:Ft("Transition","TransitionEnd")},mr={},An={};a&&(An=document.createElement("div").style,"AnimationEvent"in window||(delete rr.animationend.animation,delete rr.animationiteration.animation,delete rr.animationstart.animation),"TransitionEvent"in window||delete rr.transitionend.transition);function ns(f){if(mr[f])return mr[f];if(!rr[f])return f;var p=rr[f],b;for(b in p)if(p.hasOwnProperty(b)&&b in An)return mr[f]=p[b];return f}var wd=ns("animationend"),Mg=ns("animationiteration"),Th=ns("animationstart"),Tg=ns("transitionend"),Sg=new Map,Sh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xo(f,p){Sg.set(f,p),s(p,[f])}for(var Ph=0;Ph<Sh.length;Ph++){var xd=Sh[Ph],C0=xd.toLowerCase(),A0=xd[0].toUpperCase()+xd.slice(1);Xo(C0,"on"+A0)}Xo(wd,"onAnimationEnd"),Xo(Mg,"onAnimationIteration"),Xo(Th,"onAnimationStart"),Xo("dblclick","onDoubleClick"),Xo("focusin","onFocus"),Xo("focusout","onBlur"),Xo(Tg,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ql));function Pg(f,p,b){var C=f.type||"unknown-event";f.currentTarget=b,io(C,p,void 0,f),f.currentTarget=null}function Eh(f,p){p=(p&4)!==0;for(var b=0;b<f.length;b++){var C=f[b],N=C.event;C=C.listeners;e:{var F=void 0;if(p)for(var ne=C.length-1;0<=ne;ne--){var O=C[ne],k=O.instance,H=O.currentTarget;if(O=O.listener,k!==F&&N.isPropagationStopped())break e;Pg(N,O,H),F=k}else for(ne=0;ne<C.length;ne++){if(O=C[ne],k=O.instance,H=O.currentTarget,O=O.listener,k!==F&&N.isPropagationStopped())break e;Pg(N,O,H),F=k}}}if(Bi)throw f=zi,Bi=!1,zi=null,f}function Wr(f,p){var b=p[$h];b===void 0&&(b=p[$h]=new Set);var C=f+"__bubble";b.has(C)||(Eg(p,f,2,!1),b.add(C))}function Ch(f,p,b){var C=0;p&&(C|=4),Eg(b,f,C,p)}var ic="_reactListening"+Math.random().toString(36).slice(2);function sc(f){if(!f[ic]){f[ic]=!0,n.forEach(function(b){b!=="selectionchange"&&(O0.has(b)||Ch(b,!1,f),Ch(b,!0,f))});var p=f.nodeType===9?f:f.ownerDocument;p===null||p[ic]||(p[ic]=!0,Ch("selectionchange",!1,p))}}function Eg(f,p,b,C){switch(ud(p)){case 1:var N=Qr;break;case 4:N=_n;break;default:N=Xn}b=N.bind(null,p,b,f),N=void 0,!Pr||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(N=!0),C?N!==void 0?f.addEventListener(p,b,{capture:!0,passive:N}):f.addEventListener(p,b,!0):N!==void 0?f.addEventListener(p,b,{passive:N}):f.addEventListener(p,b,!1)}function Md(f,p,b,C,N){var F=C;if((p&1)===0&&(p&2)===0&&C!==null)e:for(;;){if(C===null)return;var ne=C.tag;if(ne===3||ne===4){var O=C.stateNode.containerInfo;if(O===N||O.nodeType===8&&O.parentNode===N)break;if(ne===4)for(ne=C.return;ne!==null;){var k=ne.tag;if((k===3||k===4)&&(k=ne.stateNode.containerInfo,k===N||k.nodeType===8&&k.parentNode===N))return;ne=ne.return}for(;O!==null;){if(ne=za(O),ne===null)return;if(k=ne.tag,k===5||k===6){C=F=ne;continue e}O=O.parentNode}}C=C.return}sr(function(){var H=F,fe=be(b),me=[];e:{var ge=Sg.get(f);if(ge!==void 0){var Ae=kl,De=f;switch(f){case"keypress":if(Al(b)===0)break e;case"keydown":case"keyup":Ae=md;break;case"focusin":De="focus",Ae=Ds;break;case"focusout":De="blur",Ae=Ds;break;case"beforeblur":case"afterblur":Ae=Ds;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=Uu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=Nl;break;case wd:case Mg:case Th:Ae=fd;break;case Tg:Ae=gd;break;case"scroll":Ae=gh;break;case"wheel":Ae=Mh;break;case"copy":case"cut":case"paste":Ae=yh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=Hu}var Fe=(p&4)!==0,ht=!Fe&&f==="scroll",Te=Fe?ge!==null?ge+"Capture":null:ge;Fe=[];for(var Me=H,Ee;Me!==null;){Ee=Me;var ze=Ee.stateNode;if(Ee.tag===5&&ze!==null&&(Ee=ze,Te!==null&&(ze=kr(Me,Te),ze!=null&&Fe.push(oc(Me,ze,Ee)))),ht)break;Me=Me.return}0<Fe.length&&(ge=new Ae(ge,De,null,b,fe),me.push({event:ge,listeners:Fe}))}}if((p&7)===0){e:{if(ge=f==="mouseover"||f==="pointerover",Ae=f==="mouseout"||f==="pointerout",ge&&b!==Z&&(De=b.relatedTarget||b.fromElement)&&(za(De)||De[ho]))break e;if((Ae||ge)&&(ge=fe.window===fe?fe:(ge=fe.ownerDocument)?ge.defaultView||ge.parentWindow:window,Ae?(De=b.relatedTarget||b.toElement,Ae=H,De=De?za(De):null,De!==null&&(ht=Wn(De),De!==ht||De.tag!==5&&De.tag!==6)&&(De=null)):(Ae=null,De=H),Ae!==De)){if(Fe=Uu,ze="onMouseLeave",Te="onMouseEnter",Me="mouse",(f==="pointerout"||f==="pointerover")&&(Fe=Hu,ze="onPointerLeave",Te="onPointerEnter",Me="pointer"),ht=Ae==null?ge:Yl(Ae),Ee=De==null?ge:Yl(De),ge=new Fe(ze,Me+"leave",Ae,b,fe),ge.target=ht,ge.relatedTarget=Ee,ze=null,za(fe)===H&&(Fe=new Fe(Te,Me+"enter",De,b,fe),Fe.target=Ee,Fe.relatedTarget=ht,ze=Fe),ht=ze,Ae&&De)t:{for(Fe=Ae,Te=De,Me=0,Ee=Fe;Ee;Ee=Ba(Ee))Me++;for(Ee=0,ze=Te;ze;ze=Ba(ze))Ee++;for(;0<Me-Ee;)Fe=Ba(Fe),Me--;for(;0<Ee-Me;)Te=Ba(Te),Ee--;for(;Me--;){if(Fe===Te||Te!==null&&Fe===Te.alternate)break t;Fe=Ba(Fe),Te=Ba(Te)}Fe=null}else Fe=null;Ae!==null&&Cg(me,ge,Ae,Fe,!1),De!==null&&ht!==null&&Cg(me,ht,De,Fe,!0)}}e:{if(ge=H?Yl(H):window,Ae=ge.nodeName&&ge.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&ge.type==="file")var ct=Fl;else if(Ju(ge))if(ec)ct=rc;else{ct=Vl;var st=_d}else(Ae=ge.nodeName)&&Ae.toLowerCase()==="input"&&(ge.type==="checkbox"||ge.type==="radio")&&(ct=Wl);if(ct&&(ct=ct(f,H))){Zu(me,ct,b,fe);break e}st&&st(f,ge,H),f==="focusout"&&(st=ge._wrapperState)&&st.controlled&&ge.type==="number"&&He(ge,"number",ge.value)}switch(st=H?Yl(H):window,f){case"focusin":(Ju(st)||st.contentEditable==="true")&&(Se=st,Ge=H,rt=null);break;case"focusout":rt=Ge=Se=null;break;case"mousedown":pt=!0;break;case"contextmenu":case"mouseup":case"dragend":pt=!1,Tt(me,b,fe);break;case"selectionchange":if(le)break;case"keydown":case"keyup":Tt(me,b,fe)}var tt;if(Ra)e:{switch(f){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else co?Yu(f,b)&&(yt="onCompositionEnd"):f==="keydown"&&b.keyCode===229&&(yt="onCompositionStart");yt&&(Ku&&b.locale!=="ko"&&(co||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&co&&(tt=Vo()):(ws=fe,zu="value"in ws?ws.value:ws.textContent,co=!0)),st=Td(H,yt),0<st.length&&(yt=new $l(yt,f,null,b,fe),me.push({event:yt,listeners:st}),tt?yt.data=tt:(tt=yd(b),tt!==null&&(yt.data=tt)))),(tt=vd?Qu(f,b):Ll(f,b))&&(H=Td(H,"onBeforeInput"),0<H.length&&(fe=new $l("onBeforeInput","beforeinput",null,b,fe),me.push({event:fe,listeners:H}),fe.data=tt))}Eh(me,p)})}function oc(f,p,b){return{instance:f,listener:p,currentTarget:b}}function Td(f,p){for(var b=p+"Capture",C=[];f!==null;){var N=f,F=N.stateNode;N.tag===5&&F!==null&&(N=F,F=kr(f,b),F!=null&&C.unshift(oc(f,F,N)),F=kr(f,p),F!=null&&C.push(oc(f,F,N))),f=f.return}return C}function Ba(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function Cg(f,p,b,C,N){for(var F=p._reactName,ne=[];b!==null&&b!==C;){var O=b,k=O.alternate,H=O.stateNode;if(k!==null&&k===C)break;O.tag===5&&H!==null&&(O=H,N?(k=kr(b,F),k!=null&&ne.unshift(oc(b,k,O))):N||(k=kr(b,F),k!=null&&ne.push(oc(b,k,O)))),b=b.return}ne.length!==0&&f.push({event:p,listeners:ne})}var k0=/\r\n?/g,Ag=/\u0000|\uFFFD/g;function Og(f){return(typeof f=="string"?f:""+f).replace(k0,`
`).replace(Ag,"")}function Sd(f,p,b){if(p=Og(p),Og(f)!==p&&b)throw Error(r(425))}function Pd(){}var Ah=null,Ed=null;function Oh(f,p){return f==="textarea"||f==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var kh=typeof setTimeout=="function"?setTimeout:void 0,kg=typeof clearTimeout=="function"?clearTimeout:void 0,Ig=typeof Promise=="function"?Promise:void 0,I0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ig<"u"?function(f){return Ig.resolve(null).then(f).catch(jg)}:kh;function jg(f){setTimeout(function(){throw f})}function Ih(f,p){var b=p,C=0;do{var N=b.nextSibling;if(f.removeChild(b),N&&N.nodeType===8)if(b=N.data,b==="/$"){if(C===0){f.removeChild(N),fn(p);return}C--}else b!=="$"&&b!=="$?"&&b!=="$!"||C++;b=N}while(b);fn(p)}function Yo(f){for(;f!=null;f=f.nextSibling){var p=f.nodeType;if(p===1||p===3)break;if(p===8){if(p=f.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return f}function jh(f){f=f.previousSibling;for(var p=0;f;){if(f.nodeType===8){var b=f.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return f;p--}else b==="/$"&&p++}f=f.previousSibling}return null}var Hl=Math.random().toString(36).slice(2),Rs="__reactFiber$"+Hl,Kl="__reactProps$"+Hl,ho="__reactContainer$"+Hl,$h="__reactEvents$"+Hl,$g="__reactListeners$"+Hl,j0="__reactHandles$"+Hl;function za(f){var p=f[Rs];if(p)return p;for(var b=f.parentNode;b;){if(p=b[ho]||b[Rs]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(f=jh(f);f!==null;){if(b=f[Rs])return b;f=jh(f)}return p}f=b,b=f.parentNode}return null}function Xl(f){return f=f[Rs]||f[ho],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function Yl(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(r(33))}function Cd(f){return f[Kl]||null}var Nh=[],Ql=-1;function po(f){return{current:f}}function Gr(f){0>Ql||(f.current=Nh[Ql],Nh[Ql]=null,Ql--)}function Br(f,p){Ql++,Nh[Ql]=f.current,f.current=p}var Qo={},ni=po(Qo),yi=po(!1),Ua=Qo;function Jl(f,p){var b=f.type.contextTypes;if(!b)return Qo;var C=f.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===p)return C.__reactInternalMemoizedMaskedChildContext;var N={},F;for(F in b)N[F]=p[F];return C&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=p,f.__reactInternalMemoizedMaskedChildContext=N),N}function ki(f){return f=f.childContextTypes,f!=null}function Ad(){Gr(yi),Gr(ni)}function Dh(f,p,b){if(ni.current!==Qo)throw Error(r(168));Br(ni,p),Br(yi,b)}function Ng(f,p,b){var C=f.stateNode;if(p=p.childContextTypes,typeof C.getChildContext!="function")return b;C=C.getChildContext();for(var N in C)if(!(N in p))throw Error(r(108,xe(f)||"Unknown",N));return ce({},b,C)}function Od(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Qo,Ua=ni.current,Br(ni,f),Br(yi,yi.current),!0}function Dg(f,p,b){var C=f.stateNode;if(!C)throw Error(r(169));b?(f=Ng(f,p,Ua),C.__reactInternalMemoizedMergedChildContext=f,Gr(yi),Gr(ni),Br(ni,f)):Gr(yi),Br(yi,b)}var mo=null,ac=!1,Rh=!1;function Rg(f){mo===null?mo=[f]:mo.push(f)}function Lg(f){ac=!0,Rg(f)}function Jo(){if(!Rh&&mo!==null){Rh=!0;var f=0,p=ve;try{var b=mo;for(ve=1;f<b.length;f++){var C=b[f];do C=C(!0);while(C!==null)}mo=null,ac=!1}catch(N){throw mo!==null&&(mo=mo.slice(f+1)),ts(vn,Jo),N}finally{ve=p,Rh=!1}}return null}var Zl=[],Va=0,kd=null,Id=0,Wi=[],is=0,Wa=null,Ls=1,go="";function Ga(f,p){Zl[Va++]=Id,Zl[Va++]=kd,kd=f,Id=p}function jd(f,p,b){Wi[is++]=Ls,Wi[is++]=go,Wi[is++]=Wa,Wa=f;var C=Ls;f=go;var N=32-Sn(C)-1;C&=~(1<<N),b+=1;var F=32-Sn(p)+N;if(30<F){var ne=N-N%5;F=(C&(1<<ne)-1).toString(32),C>>=ne,N-=ne,Ls=1<<32-Sn(p)+N|b<<N|C,go=F+f}else Ls=1<<F|b<<N|C,go=f}function Lh(f){f.return!==null&&(Ga(f,1),jd(f,1,0))}function Fh(f){for(;f===kd;)kd=Zl[--Va],Zl[Va]=null,Id=Zl[--Va],Zl[Va]=null;for(;f===Wa;)Wa=Wi[--is],Wi[is]=null,go=Wi[--is],Wi[is]=null,Ls=Wi[--is],Wi[is]=null}var Ii=null,ji=null,Jr=!1,ss=null;function Fg(f,p){var b=Ps(5,null,null,0);b.elementType="DELETED",b.stateNode=p,b.return=f,p=f.deletions,p===null?(f.deletions=[b],f.flags|=16):p.push(b)}function Bg(f,p){switch(f.tag){case 5:var b=f.type;return p=p.nodeType!==1||b.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(f.stateNode=p,Ii=f,ji=Yo(p.firstChild),!0):!1;case 6:return p=f.pendingProps===""||p.nodeType!==3?null:p,p!==null?(f.stateNode=p,Ii=f,ji=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(b=Wa!==null?{id:Ls,overflow:go}:null,f.memoizedState={dehydrated:p,treeContext:b,retryLane:1073741824},b=Ps(18,null,null,0),b.stateNode=p,b.return=f,f.child=b,Ii=f,ji=null,!0):!1;default:return!1}}function eu(f){return(f.mode&1)!==0&&(f.flags&128)===0}function $d(f){if(Jr){var p=ji;if(p){var b=p;if(!Bg(f,p)){if(eu(f))throw Error(r(418));p=Yo(b.nextSibling);var C=Ii;p&&Bg(f,p)?Fg(C,b):(f.flags=f.flags&-4097|2,Jr=!1,Ii=f)}}else{if(eu(f))throw Error(r(418));f.flags=f.flags&-4097|2,Jr=!1,Ii=f}}}function zg(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Ii=f}function Nd(f){if(f!==Ii)return!1;if(!Jr)return zg(f),Jr=!0,!1;var p;if((p=f.tag!==3)&&!(p=f.tag!==5)&&(p=f.type,p=p!=="head"&&p!=="body"&&!Oh(f.type,f.memoizedProps)),p&&(p=ji)){if(eu(f))throw Ug(),Error(r(418));for(;p;)Fg(f,p),p=Yo(p.nextSibling)}if(zg(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));e:{for(f=f.nextSibling,p=0;f;){if(f.nodeType===8){var b=f.data;if(b==="/$"){if(p===0){ji=Yo(f.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++}f=f.nextSibling}ji=null}}else ji=Ii?Yo(f.stateNode.nextSibling):null;return!0}function Ug(){for(var f=ji;f;)f=Yo(f.nextSibling)}function qa(){ji=Ii=null,Jr=!1}function Bh(f){ss===null?ss=[f]:ss.push(f)}var $0=M.ReactCurrentBatchConfig;function lc(f,p,b){if(f=b.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(r(309));var C=b.stateNode}if(!C)throw Error(r(147,f));var N=C,F=""+f;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===F?p.ref:(p=function(ne){var O=N.refs;ne===null?delete O[F]:O[F]=ne},p._stringRef=F,p)}if(typeof f!="string")throw Error(r(284));if(!b._owner)throw Error(r(290,f))}return f}function uc(f,p){throw f=Object.prototype.toString.call(p),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f))}function Vg(f){var p=f._init;return p(f._payload)}function Wg(f){function p(Te,Me){if(f){var Ee=Te.deletions;Ee===null?(Te.deletions=[Me],Te.flags|=16):Ee.push(Me)}}function b(Te,Me){if(!f)return null;for(;Me!==null;)p(Te,Me),Me=Me.sibling;return null}function C(Te,Me){for(Te=new Map;Me!==null;)Me.key!==null?Te.set(Me.key,Me):Te.set(Me.index,Me),Me=Me.sibling;return Te}function N(Te,Me){return Te=il(Te,Me),Te.index=0,Te.sibling=null,Te}function F(Te,Me,Ee){return Te.index=Ee,f?(Ee=Te.alternate,Ee!==null?(Ee=Ee.index,Ee<Me?(Te.flags|=2,Me):Ee):(Te.flags|=2,Me)):(Te.flags|=1048576,Me)}function ne(Te){return f&&Te.alternate===null&&(Te.flags|=2),Te}function O(Te,Me,Ee,ze){return Me===null||Me.tag!==6?(Me=Jv(Ee,Te.mode,ze),Me.return=Te,Me):(Me=N(Me,Ee),Me.return=Te,Me)}function k(Te,Me,Ee,ze){var ct=Ee.type;return ct===E?fe(Te,Me,Ee.props.children,ze,Ee.key):Me!==null&&(Me.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===X&&Vg(ct)===Me.type)?(ze=N(Me,Ee.props),ze.ref=lc(Te,Me,Ee),ze.return=Te,ze):(ze=Ap(Ee.type,Ee.key,Ee.props,null,Te.mode,ze),ze.ref=lc(Te,Me,Ee),ze.return=Te,ze)}function H(Te,Me,Ee,ze){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==Ee.containerInfo||Me.stateNode.implementation!==Ee.implementation?(Me=Zv(Ee,Te.mode,ze),Me.return=Te,Me):(Me=N(Me,Ee.children||[]),Me.return=Te,Me)}function fe(Te,Me,Ee,ze,ct){return Me===null||Me.tag!==7?(Me=hu(Ee,Te.mode,ze,ct),Me.return=Te,Me):(Me=N(Me,Ee),Me.return=Te,Me)}function me(Te,Me,Ee){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Me=Jv(""+Me,Te.mode,Ee),Me.return=Te,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case T:return Ee=Ap(Me.type,Me.key,Me.props,null,Te.mode,Ee),Ee.ref=lc(Te,null,Me),Ee.return=Te,Ee;case P:return Me=Zv(Me,Te.mode,Ee),Me.return=Te,Me;case X:var ze=Me._init;return me(Te,ze(Me._payload),Ee)}if(Qe(Me)||oe(Me))return Me=hu(Me,Te.mode,Ee,null),Me.return=Te,Me;uc(Te,Me)}return null}function ge(Te,Me,Ee,ze){var ct=Me!==null?Me.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return ct!==null?null:O(Te,Me,""+Ee,ze);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case T:return Ee.key===ct?k(Te,Me,Ee,ze):null;case P:return Ee.key===ct?H(Te,Me,Ee,ze):null;case X:return ct=Ee._init,ge(Te,Me,ct(Ee._payload),ze)}if(Qe(Ee)||oe(Ee))return ct!==null?null:fe(Te,Me,Ee,ze,null);uc(Te,Ee)}return null}function Ae(Te,Me,Ee,ze,ct){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return Te=Te.get(Ee)||null,O(Me,Te,""+ze,ct);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case T:return Te=Te.get(ze.key===null?Ee:ze.key)||null,k(Me,Te,ze,ct);case P:return Te=Te.get(ze.key===null?Ee:ze.key)||null,H(Me,Te,ze,ct);case X:var st=ze._init;return Ae(Te,Me,Ee,st(ze._payload),ct)}if(Qe(ze)||oe(ze))return Te=Te.get(Ee)||null,fe(Me,Te,ze,ct,null);uc(Me,ze)}return null}function De(Te,Me,Ee,ze){for(var ct=null,st=null,tt=Me,yt=Me=0,Xt=null;tt!==null&&yt<Ee.length;yt++){tt.index>yt?(Xt=tt,tt=null):Xt=tt.sibling;var Dt=ge(Te,tt,Ee[yt],ze);if(Dt===null){tt===null&&(tt=Xt);break}f&&tt&&Dt.alternate===null&&p(Te,tt),Me=F(Dt,Me,yt),st===null?ct=Dt:st.sibling=Dt,st=Dt,tt=Xt}if(yt===Ee.length)return b(Te,tt),Jr&&Ga(Te,yt),ct;if(tt===null){for(;yt<Ee.length;yt++)tt=me(Te,Ee[yt],ze),tt!==null&&(Me=F(tt,Me,yt),st===null?ct=tt:st.sibling=tt,st=tt);return Jr&&Ga(Te,yt),ct}for(tt=C(Te,tt);yt<Ee.length;yt++)Xt=Ae(tt,Te,yt,Ee[yt],ze),Xt!==null&&(f&&Xt.alternate!==null&&tt.delete(Xt.key===null?yt:Xt.key),Me=F(Xt,Me,yt),st===null?ct=Xt:st.sibling=Xt,st=Xt);return f&&tt.forEach(function(jr){return p(Te,jr)}),Jr&&Ga(Te,yt),ct}function Fe(Te,Me,Ee,ze){var ct=oe(Ee);if(typeof ct!="function")throw Error(r(150));if(Ee=ct.call(Ee),Ee==null)throw Error(r(151));for(var st=ct=null,tt=Me,yt=Me=0,Xt=null,Dt=Ee.next();tt!==null&&!Dt.done;yt++,Dt=Ee.next()){tt.index>yt?(Xt=tt,tt=null):Xt=tt.sibling;var jr=ge(Te,tt,Dt.value,ze);if(jr===null){tt===null&&(tt=Xt);break}f&&tt&&jr.alternate===null&&p(Te,tt),Me=F(jr,Me,yt),st===null?ct=jr:st.sibling=jr,st=jr,tt=Xt}if(Dt.done)return b(Te,tt),Jr&&Ga(Te,yt),ct;if(tt===null){for(;!Dt.done;yt++,Dt=Ee.next())Dt=me(Te,Dt.value,ze),Dt!==null&&(Me=F(Dt,Me,yt),st===null?ct=Dt:st.sibling=Dt,st=Dt);return Jr&&Ga(Te,yt),ct}for(tt=C(Te,tt);!Dt.done;yt++,Dt=Ee.next())Dt=Ae(tt,Te,yt,Dt.value,ze),Dt!==null&&(f&&Dt.alternate!==null&&tt.delete(Dt.key===null?yt:Dt.key),Me=F(Dt,Me,yt),st===null?ct=Dt:st.sibling=Dt,st=Dt);return f&&tt.forEach(function(In){return p(Te,In)}),Jr&&Ga(Te,yt),ct}function ht(Te,Me,Ee,ze){if(typeof Ee=="object"&&Ee!==null&&Ee.type===E&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case T:e:{for(var ct=Ee.key,st=Me;st!==null;){if(st.key===ct){if(ct=Ee.type,ct===E){if(st.tag===7){b(Te,st.sibling),Me=N(st,Ee.props.children),Me.return=Te,Te=Me;break e}}else if(st.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===X&&Vg(ct)===st.type){b(Te,st.sibling),Me=N(st,Ee.props),Me.ref=lc(Te,st,Ee),Me.return=Te,Te=Me;break e}b(Te,st);break}else p(Te,st);st=st.sibling}Ee.type===E?(Me=hu(Ee.props.children,Te.mode,ze,Ee.key),Me.return=Te,Te=Me):(ze=Ap(Ee.type,Ee.key,Ee.props,null,Te.mode,ze),ze.ref=lc(Te,Me,Ee),ze.return=Te,Te=ze)}return ne(Te);case P:e:{for(st=Ee.key;Me!==null;){if(Me.key===st)if(Me.tag===4&&Me.stateNode.containerInfo===Ee.containerInfo&&Me.stateNode.implementation===Ee.implementation){b(Te,Me.sibling),Me=N(Me,Ee.children||[]),Me.return=Te,Te=Me;break e}else{b(Te,Me);break}else p(Te,Me);Me=Me.sibling}Me=Zv(Ee,Te.mode,ze),Me.return=Te,Te=Me}return ne(Te);case X:return st=Ee._init,ht(Te,Me,st(Ee._payload),ze)}if(Qe(Ee))return De(Te,Me,Ee,ze);if(oe(Ee))return Fe(Te,Me,Ee,ze);uc(Te,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,Me!==null&&Me.tag===6?(b(Te,Me.sibling),Me=N(Me,Ee),Me.return=Te,Te=Me):(b(Te,Me),Me=Jv(Ee,Te.mode,ze),Me.return=Te,Te=Me),ne(Te)):b(Te,Me)}return ht}var Ha=Wg(!0),Gg=Wg(!1),Dd=po(null),Rd=null,Ka=null,zh=null;function Uh(){zh=Ka=Rd=null}function Ld(f){var p=Dd.current;Gr(Dd),f._currentValue=p}function Vh(f,p,b){for(;f!==null;){var C=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,C!==null&&(C.childLanes|=p)):C!==null&&(C.childLanes&p)!==p&&(C.childLanes|=p),f===b)break;f=f.return}}function tu(f,p){Rd=f,zh=Ka=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&p)!==0&&(Ki=!0),f.firstContext=null)}function Gi(f){var p=f._currentValue;if(zh!==f)if(f={context:f,memoizedValue:p,next:null},Ka===null){if(Rd===null)throw Error(r(308));Ka=f,Rd.dependencies={lanes:0,firstContext:f}}else Ka=Ka.next=f;return p}var Xa=null;function Wh(f){Xa===null?Xa=[f]:Xa.push(f)}function Fd(f,p,b,C){var N=p.interleaved;return N===null?(b.next=b,Wh(p)):(b.next=N.next,N.next=b),p.interleaved=b,vo(f,C)}function vo(f,p){f.lanes|=p;var b=f.alternate;for(b!==null&&(b.lanes|=p),b=f,f=f.return;f!==null;)f.childLanes|=p,b=f.alternate,b!==null&&(b.childLanes|=p),b=f,f=f.return;return b.tag===3?b.stateNode:null}var Zo=!1;function Gh(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qh(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function yo(f,p){return{eventTime:f,lane:p,tag:0,payload:null,callback:null,next:null}}function ea(f,p,b){var C=f.updateQueue;if(C===null)return null;if(C=C.shared,(gr&2)!==0){var N=C.pending;return N===null?p.next=p:(p.next=N.next,N.next=p),C.pending=p,vo(f,b)}return N=C.interleaved,N===null?(p.next=p,Wh(C)):(p.next=N.next,N.next=p),C.interleaved=p,vo(f,b)}function cc(f,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194240)!==0)){var C=p.lanes;C&=f.pendingLanes,b|=C,p.lanes=b,_e(f,b)}}function qg(f,p){var b=f.updateQueue,C=f.alternate;if(C!==null&&(C=C.updateQueue,b===C)){var N=null,F=null;if(b=b.firstBaseUpdate,b!==null){do{var ne={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};F===null?N=F=ne:F=F.next=ne,b=b.next}while(b!==null);F===null?N=F=p:F=F.next=p}else N=F=p;b={baseState:C.baseState,firstBaseUpdate:N,lastBaseUpdate:F,shared:C.shared,effects:C.effects},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=p:f.next=p,b.lastBaseUpdate=p}function Bd(f,p,b,C){var N=f.updateQueue;Zo=!1;var F=N.firstBaseUpdate,ne=N.lastBaseUpdate,O=N.shared.pending;if(O!==null){N.shared.pending=null;var k=O,H=k.next;k.next=null,ne===null?F=H:ne.next=H,ne=k;var fe=f.alternate;fe!==null&&(fe=fe.updateQueue,O=fe.lastBaseUpdate,O!==ne&&(O===null?fe.firstBaseUpdate=H:O.next=H,fe.lastBaseUpdate=k))}if(F!==null){var me=N.baseState;ne=0,fe=H=k=null,O=F;do{var ge=O.lane,Ae=O.eventTime;if((C&ge)===ge){fe!==null&&(fe=fe.next={eventTime:Ae,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var De=f,Fe=O;switch(ge=p,Ae=b,Fe.tag){case 1:if(De=Fe.payload,typeof De=="function"){me=De.call(Ae,me,ge);break e}me=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Fe.payload,ge=typeof De=="function"?De.call(Ae,me,ge):De,ge==null)break e;me=ce({},me,ge);break e;case 2:Zo=!0}}O.callback!==null&&O.lane!==0&&(f.flags|=64,ge=N.effects,ge===null?N.effects=[O]:ge.push(O))}else Ae={eventTime:Ae,lane:ge,tag:O.tag,payload:O.payload,callback:O.callback,next:null},fe===null?(H=fe=Ae,k=me):fe=fe.next=Ae,ne|=ge;if(O=O.next,O===null){if(O=N.shared.pending,O===null)break;ge=O,O=ge.next,ge.next=null,N.lastBaseUpdate=ge,N.shared.pending=null}}while(!0);if(fe===null&&(k=me),N.baseState=k,N.firstBaseUpdate=H,N.lastBaseUpdate=fe,p=N.shared.interleaved,p!==null){N=p;do ne|=N.lane,N=N.next;while(N!==p)}else F===null&&(N.shared.lanes=0);el|=ne,f.lanes=ne,f.memoizedState=me}}function Hg(f,p,b){if(f=p.effects,p.effects=null,f!==null)for(p=0;p<f.length;p++){var C=f[p],N=C.callback;if(N!==null){if(C.callback=null,C=b,typeof N!="function")throw Error(r(191,N));N.call(C)}}}var dc={},os=po(dc),fc=po(dc),hc=po(dc);function Ya(f){if(f===dc)throw Error(r(174));return f}function Hh(f,p){switch(Br(hc,p),Br(fc,f),Br(os,dc),f=p.nodeType,f){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:xt(null,"");break;default:f=f===8?p.parentNode:p,p=f.namespaceURI||null,f=f.tagName,p=xt(p,f)}Gr(os),Br(os,p)}function ru(){Gr(os),Gr(fc),Gr(hc)}function Kg(f){Ya(hc.current);var p=Ya(os.current),b=xt(p,f.type);p!==b&&(Br(fc,f),Br(os,b))}function Kh(f){fc.current===f&&(Gr(os),Gr(fc))}var rn=po(0);function zd(f){for(var p=f;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Ud=[];function Xh(){for(var f=0;f<Ud.length;f++)Ud[f]._workInProgressVersionPrimary=null;Ud.length=0}var Vd=M.ReactCurrentDispatcher,Wd=M.ReactCurrentBatchConfig,Qa=0,nn=null,Ln=null,qn=null,pc=!1,mc=!1,gc=0,Xg=0;function ii(){throw Error(r(321))}function Yh(f,p){if(p===null)return!1;for(var b=0;b<p.length&&b<f.length;b++)if(!vi(f[b],p[b]))return!1;return!0}function Gd(f,p,b,C,N,F){if(Qa=F,nn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Vd.current=f===null||f.memoizedState===null?R0:L0,f=b(C,N),mc){F=0;do{if(mc=!1,gc=0,25<=F)throw Error(r(301));F+=1,qn=Ln=null,p.updateQueue=null,Vd.current=F0,f=b(C,N)}while(mc)}if(Vd.current=Hd,p=Ln!==null&&Ln.next!==null,Qa=0,qn=Ln=nn=null,pc=!1,p)throw Error(r(300));return f}function Qh(){var f=gc!==0;return gc=0,f}function Fs(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?nn.memoizedState=qn=f:qn=qn.next=f,qn}function qi(){if(Ln===null){var f=nn.alternate;f=f!==null?f.memoizedState:null}else f=Ln.next;var p=qn===null?nn.memoizedState:qn.next;if(p!==null)qn=p,Ln=f;else{if(f===null)throw Error(r(310));Ln=f,f={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},qn===null?nn.memoizedState=qn=f:qn=qn.next=f}return qn}function vc(f,p){return typeof p=="function"?p(f):p}function Jh(f){var p=qi(),b=p.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=f;var C=Ln,N=C.baseQueue,F=b.pending;if(F!==null){if(N!==null){var ne=N.next;N.next=F.next,F.next=ne}C.baseQueue=N=F,b.pending=null}if(N!==null){F=N.next,C=C.baseState;var O=ne=null,k=null,H=F;do{var fe=H.lane;if((Qa&fe)===fe)k!==null&&(k=k.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),C=H.hasEagerState?H.eagerState:f(C,H.action);else{var me={lane:fe,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};k===null?(O=k=me,ne=C):k=k.next=me,nn.lanes|=fe,el|=fe}H=H.next}while(H!==null&&H!==F);k===null?ne=C:k.next=O,vi(C,p.memoizedState)||(Ki=!0),p.memoizedState=C,p.baseState=ne,p.baseQueue=k,b.lastRenderedState=C}if(f=b.interleaved,f!==null){N=f;do F=N.lane,nn.lanes|=F,el|=F,N=N.next;while(N!==f)}else N===null&&(b.lanes=0);return[p.memoizedState,b.dispatch]}function Zh(f){var p=qi(),b=p.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=f;var C=b.dispatch,N=b.pending,F=p.memoizedState;if(N!==null){b.pending=null;var ne=N=N.next;do F=f(F,ne.action),ne=ne.next;while(ne!==N);vi(F,p.memoizedState)||(Ki=!0),p.memoizedState=F,p.baseQueue===null&&(p.baseState=F),b.lastRenderedState=F}return[F,C]}function Yg(){}function ep(f,p){var b=nn,C=qi(),N=p(),F=!vi(C.memoizedState,N);if(F&&(C.memoizedState=N,Ki=!0),C=C.queue,tp(Zg.bind(null,b,C,f),[f]),C.getSnapshot!==p||F||qn!==null&&qn.memoizedState.tag&1){if(b.flags|=2048,nu(9,Jg.bind(null,b,C,N,p),void 0,null),On===null)throw Error(r(349));(Qa&30)!==0||Qg(b,p,N)}return N}function Qg(f,p,b){f.flags|=16384,f={getSnapshot:p,value:b},p=nn.updateQueue,p===null?(p={lastEffect:null,stores:null},nn.updateQueue=p,p.stores=[f]):(b=p.stores,b===null?p.stores=[f]:b.push(f))}function Jg(f,p,b,C){p.value=b,p.getSnapshot=C,ev(p)&&tv(f)}function Zg(f,p,b){return b(function(){ev(p)&&tv(f)})}function ev(f){var p=f.getSnapshot;f=f.value;try{var b=p();return!vi(f,b)}catch{return!0}}function tv(f){var p=vo(f,1);p!==null&&ls(p,f,1,-1)}function rv(f){var p=Fs();return typeof f=="function"&&(f=f()),p.memoizedState=p.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vc,lastRenderedState:f},p.queue=f,f=f.dispatch=D0.bind(null,nn,f),[p.memoizedState,f]}function nu(f,p,b,C){return f={tag:f,create:p,destroy:b,deps:C,next:null},p=nn.updateQueue,p===null?(p={lastEffect:null,stores:null},nn.updateQueue=p,p.lastEffect=f.next=f):(b=p.lastEffect,b===null?p.lastEffect=f.next=f:(C=b.next,b.next=f,f.next=C,p.lastEffect=f)),f}function nv(){return qi().memoizedState}function qd(f,p,b,C){var N=Fs();nn.flags|=f,N.memoizedState=nu(1|p,b,void 0,C===void 0?null:C)}function yc(f,p,b,C){var N=qi();C=C===void 0?null:C;var F=void 0;if(Ln!==null){var ne=Ln.memoizedState;if(F=ne.destroy,C!==null&&Yh(C,ne.deps)){N.memoizedState=nu(p,b,F,C);return}}nn.flags|=f,N.memoizedState=nu(1|p,b,F,C)}function iv(f,p){return qd(8390656,8,f,p)}function tp(f,p){return yc(2048,8,f,p)}function ta(f,p){return yc(4,2,f,p)}function sv(f,p){return yc(4,4,f,p)}function ov(f,p){if(typeof p=="function")return f=f(),p(f),function(){p(null)};if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function av(f,p,b){return b=b!=null?b.concat([f]):null,yc(4,4,ov.bind(null,p,f),b)}function rp(){}function np(f,p){var b=qi();p=p===void 0?null:p;var C=b.memoizedState;return C!==null&&p!==null&&Yh(p,C[1])?C[0]:(b.memoizedState=[f,p],f)}function lv(f,p){var b=qi();p=p===void 0?null:p;var C=b.memoizedState;return C!==null&&p!==null&&Yh(p,C[1])?C[0]:(f=f(),b.memoizedState=[f,p],f)}function uv(f,p,b){return(Qa&21)===0?(f.baseState&&(f.baseState=!1,Ki=!0),f.memoizedState=b):(vi(b,p)||(b=ao(),nn.lanes|=b,el|=b,f.baseState=!0),p)}function N0(f,p){var b=ve;ve=b!==0&&4>b?b:4,f(!0);var C=Wd.transition;Wd.transition={};try{f(!1),p()}finally{ve=b,Wd.transition=C}}function cv(){return qi().memoizedState}function ip(f,p,b){var C=bo(f);if(b={lane:C,action:b,hasEagerState:!1,eagerState:null,next:null},dv(f))fv(p,b);else if(b=Fd(f,p,b,C),b!==null){var N=wi();ls(b,f,C,N),_c(b,p,C)}}function D0(f,p,b){var C=bo(f),N={lane:C,action:b,hasEagerState:!1,eagerState:null,next:null};if(dv(f))fv(p,N);else{var F=f.alternate;if(f.lanes===0&&(F===null||F.lanes===0)&&(F=p.lastRenderedReducer,F!==null))try{var ne=p.lastRenderedState,O=F(ne,b);if(N.hasEagerState=!0,N.eagerState=O,vi(O,ne)){var k=p.interleaved;k===null?(N.next=N,Wh(p)):(N.next=k.next,k.next=N),p.interleaved=N;return}}catch{}finally{}b=Fd(f,p,N,C),b!==null&&(N=wi(),ls(b,f,C,N),_c(b,p,C))}}function dv(f){var p=f.alternate;return f===nn||p!==null&&p===nn}function fv(f,p){mc=pc=!0;var b=f.pending;b===null?p.next=p:(p.next=b.next,b.next=p),f.pending=p}function _c(f,p,b){if((b&4194240)!==0){var C=p.lanes;C&=f.pendingLanes,b|=C,p.lanes=b,_e(f,b)}}var Hd={readContext:Gi,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useInsertionEffect:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useSyncExternalStore:ii,useId:ii,unstable_isNewReconciler:!1},R0={readContext:Gi,useCallback:function(f,p){return Fs().memoizedState=[f,p===void 0?null:p],f},useContext:Gi,useEffect:iv,useImperativeHandle:function(f,p,b){return b=b!=null?b.concat([f]):null,qd(4194308,4,ov.bind(null,p,f),b)},useLayoutEffect:function(f,p){return qd(4194308,4,f,p)},useInsertionEffect:function(f,p){return qd(4,2,f,p)},useMemo:function(f,p){var b=Fs();return p=p===void 0?null:p,f=f(),b.memoizedState=[f,p],f},useReducer:function(f,p,b){var C=Fs();return p=b!==void 0?b(p):p,C.memoizedState=C.baseState=p,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:p},C.queue=f,f=f.dispatch=ip.bind(null,nn,f),[C.memoizedState,f]},useRef:function(f){var p=Fs();return f={current:f},p.memoizedState=f},useState:rv,useDebugValue:rp,useDeferredValue:function(f){return Fs().memoizedState=f},useTransition:function(){var f=rv(!1),p=f[0];return f=N0.bind(null,f[1]),Fs().memoizedState=f,[p,f]},useMutableSource:function(){},useSyncExternalStore:function(f,p,b){var C=nn,N=Fs();if(Jr){if(b===void 0)throw Error(r(407));b=b()}else{if(b=p(),On===null)throw Error(r(349));(Qa&30)!==0||Qg(C,p,b)}N.memoizedState=b;var F={value:b,getSnapshot:p};return N.queue=F,iv(Zg.bind(null,C,F,f),[f]),C.flags|=2048,nu(9,Jg.bind(null,C,F,b,p),void 0,null),b},useId:function(){var f=Fs(),p=On.identifierPrefix;if(Jr){var b=go,C=Ls;b=(C&~(1<<32-Sn(C)-1)).toString(32)+b,p=":"+p+"R"+b,b=gc++,0<b&&(p+="H"+b.toString(32)),p+=":"}else b=Xg++,p=":"+p+"r"+b.toString(32)+":";return f.memoizedState=p},unstable_isNewReconciler:!1},L0={readContext:Gi,useCallback:np,useContext:Gi,useEffect:tp,useImperativeHandle:av,useInsertionEffect:ta,useLayoutEffect:sv,useMemo:lv,useReducer:Jh,useRef:nv,useState:function(){return Jh(vc)},useDebugValue:rp,useDeferredValue:function(f){var p=qi();return uv(p,Ln.memoizedState,f)},useTransition:function(){var f=Jh(vc)[0],p=qi().memoizedState;return[f,p]},useMutableSource:Yg,useSyncExternalStore:ep,useId:cv,unstable_isNewReconciler:!1},F0={readContext:Gi,useCallback:np,useContext:Gi,useEffect:tp,useImperativeHandle:av,useInsertionEffect:ta,useLayoutEffect:sv,useMemo:lv,useReducer:Zh,useRef:nv,useState:function(){return Zh(vc)},useDebugValue:rp,useDeferredValue:function(f){var p=qi();return Ln===null?p.memoizedState=f:uv(p,Ln.memoizedState,f)},useTransition:function(){var f=Zh(vc)[0],p=qi().memoizedState;return[f,p]},useMutableSource:Yg,useSyncExternalStore:ep,useId:cv,unstable_isNewReconciler:!1};function Hi(f,p){if(f&&f.defaultProps){p=ce({},p),f=f.defaultProps;for(var b in f)p[b]===void 0&&(p[b]=f[b]);return p}return p}function sp(f,p,b,C){p=f.memoizedState,b=b(C,p),b=b==null?p:ce({},p,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var Kd={isMounted:function(f){return(f=f._reactInternals)?Wn(f)===f:!1},enqueueSetState:function(f,p,b){f=f._reactInternals;var C=wi(),N=bo(f),F=yo(C,N);F.payload=p,b!=null&&(F.callback=b),p=ea(f,F,N),p!==null&&(ls(p,f,N,C),cc(p,f,N))},enqueueReplaceState:function(f,p,b){f=f._reactInternals;var C=wi(),N=bo(f),F=yo(C,N);F.tag=1,F.payload=p,b!=null&&(F.callback=b),p=ea(f,F,N),p!==null&&(ls(p,f,N,C),cc(p,f,N))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var b=wi(),C=bo(f),N=yo(b,C);N.tag=2,p!=null&&(N.callback=p),p=ea(f,N,C),p!==null&&(ls(p,f,C,b),cc(p,f,C))}};function hv(f,p,b,C,N,F,ne){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(C,F,ne):p.prototype&&p.prototype.isPureReactComponent?!Ko(b,C)||!Ko(N,F):!0}function B0(f,p,b){var C=!1,N=Qo,F=p.contextType;return typeof F=="object"&&F!==null?F=Gi(F):(N=ki(p)?Ua:ni.current,C=p.contextTypes,F=(C=C!=null)?Jl(f,N):Qo),p=new p(b,F),f.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Kd,f.stateNode=p,p._reactInternals=f,C&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=N,f.__reactInternalMemoizedMaskedChildContext=F),p}function pv(f,p,b,C){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,C),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,C),p.state!==f&&Kd.enqueueReplaceState(p,p.state,null)}function op(f,p,b,C){var N=f.stateNode;N.props=b,N.state=f.memoizedState,N.refs={},Gh(f);var F=p.contextType;typeof F=="object"&&F!==null?N.context=Gi(F):(F=ki(p)?Ua:ni.current,N.context=Jl(f,F)),N.state=f.memoizedState,F=p.getDerivedStateFromProps,typeof F=="function"&&(sp(f,p,F,b),N.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(p=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),p!==N.state&&Kd.enqueueReplaceState(N,N.state,null),Bd(f,b,N,C),N.state=f.memoizedState),typeof N.componentDidMount=="function"&&(f.flags|=4194308)}function iu(f,p){try{var b="",C=p;do b+=pe(C),C=C.return;while(C);var N=b}catch(F){N=`
Error generating stack: `+F.message+`
`+F.stack}return{value:f,source:p,stack:N,digest:null}}function Ja(f,p,b){return{value:f,source:null,stack:b??null,digest:p??null}}function ap(f,p){try{console.error(p.value)}catch(b){setTimeout(function(){throw b})}}var z0=typeof WeakMap=="function"?WeakMap:Map;function mv(f,p,b){b=yo(-1,b),b.tag=3,b.payload={element:null};var C=p.value;return b.callback=function(){nf||(nf=!0,vr=C),ap(f,p)},b}function gv(f,p,b){b=yo(-1,b),b.tag=3;var C=f.type.getDerivedStateFromError;if(typeof C=="function"){var N=p.value;b.payload=function(){return C(N)},b.callback=function(){ap(f,p)}}var F=f.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(b.callback=function(){ap(f,p),typeof C!="function"&&(tl===null?tl=new Set([this]):tl.add(this));var ne=p.stack;this.componentDidCatch(p.value,{componentStack:ne!==null?ne:""})}),b}function vv(f,p,b){var C=f.pingCache;if(C===null){C=f.pingCache=new z0;var N=new Set;C.set(p,N)}else N=C.get(p),N===void 0&&(N=new Set,C.set(p,N));N.has(b)||(N.add(b),f=Q0.bind(null,f,p,b),p.then(f,f))}function yv(f){do{var p;if((p=f.tag===13)&&(p=f.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return f;f=f.return}while(f!==null);return null}function _v(f,p,b,C,N){return(f.mode&1)===0?(f===p?f.flags|=65536:(f.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(p=yo(-1,1),p.tag=2,ea(b,p,1))),b.lanes|=1),f):(f.flags|=65536,f.lanes=N,f)}var lp=M.ReactCurrentOwner,Ki=!1;function _i(f,p,b,C){p.child=f===null?Gg(p,null,b,C):Ha(p,f.child,b,C)}function bv(f,p,b,C,N){b=b.render;var F=p.ref;return tu(p,N),C=Gd(f,p,b,C,F,N),b=Qh(),f!==null&&!Ki?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~N,ra(f,p,N)):(Jr&&b&&Lh(p),p.flags|=1,_i(f,p,C,N),p.child)}function wv(f,p,b,C,N){if(f===null){var F=b.type;return typeof F=="function"&&!Qv(F)&&F.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(p.tag=15,p.type=F,xv(f,p,F,C,N)):(f=Ap(b.type,null,C,p,p.mode,N),f.ref=p.ref,f.return=p,p.child=f)}if(F=f.child,(f.lanes&N)===0){var ne=F.memoizedProps;if(b=b.compare,b=b!==null?b:Ko,b(ne,C)&&f.ref===p.ref)return ra(f,p,N)}return p.flags|=1,f=il(F,C),f.ref=p.ref,f.return=p,p.child=f}function xv(f,p,b,C,N){if(f!==null){var F=f.memoizedProps;if(Ko(F,C)&&f.ref===p.ref)if(Ki=!1,p.pendingProps=C=F,(f.lanes&N)!==0)(f.flags&131072)!==0&&(Ki=!0);else return p.lanes=f.lanes,ra(f,p,N)}return cp(f,p,b,C,N)}function Mv(f,p,b){var C=p.pendingProps,N=C.children,F=f!==null?f.memoizedState:null;if(C.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},Br(lu,Xi),Xi|=b;else{if((b&1073741824)===0)return f=F!==null?F.baseLanes|b:b,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:f,cachePool:null,transitions:null},p.updateQueue=null,Br(lu,Xi),Xi|=f,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=F!==null?F.baseLanes:b,Br(lu,Xi),Xi|=C}else F!==null?(C=F.baseLanes|b,p.memoizedState=null):C=b,Br(lu,Xi),Xi|=C;return _i(f,p,N,b),p.child}function up(f,p){var b=p.ref;(f===null&&b!==null||f!==null&&f.ref!==b)&&(p.flags|=512,p.flags|=2097152)}function cp(f,p,b,C,N){var F=ki(b)?Ua:ni.current;return F=Jl(p,F),tu(p,N),b=Gd(f,p,b,C,F,N),C=Qh(),f!==null&&!Ki?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~N,ra(f,p,N)):(Jr&&C&&Lh(p),p.flags|=1,_i(f,p,b,N),p.child)}function Tv(f,p,b,C,N){if(ki(b)){var F=!0;Od(p)}else F=!1;if(tu(p,N),p.stateNode===null)su(f,p),B0(p,b,C),op(p,b,C,N),C=!0;else if(f===null){var ne=p.stateNode,O=p.memoizedProps;ne.props=O;var k=ne.context,H=b.contextType;typeof H=="object"&&H!==null?H=Gi(H):(H=ki(b)?Ua:ni.current,H=Jl(p,H));var fe=b.getDerivedStateFromProps,me=typeof fe=="function"||typeof ne.getSnapshotBeforeUpdate=="function";me||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(O!==C||k!==H)&&pv(p,ne,C,H),Zo=!1;var ge=p.memoizedState;ne.state=ge,Bd(p,C,ne,N),k=p.memoizedState,O!==C||ge!==k||yi.current||Zo?(typeof fe=="function"&&(sp(p,b,fe,C),k=p.memoizedState),(O=Zo||hv(p,b,O,C,ge,k,H))?(me||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount()),typeof ne.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ne.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=C,p.memoizedState=k),ne.props=C,ne.state=k,ne.context=H,C=O):(typeof ne.componentDidMount=="function"&&(p.flags|=4194308),C=!1)}else{ne=p.stateNode,qh(f,p),O=p.memoizedProps,H=p.type===p.elementType?O:Hi(p.type,O),ne.props=H,me=p.pendingProps,ge=ne.context,k=b.contextType,typeof k=="object"&&k!==null?k=Gi(k):(k=ki(b)?Ua:ni.current,k=Jl(p,k));var Ae=b.getDerivedStateFromProps;(fe=typeof Ae=="function"||typeof ne.getSnapshotBeforeUpdate=="function")||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(O!==me||ge!==k)&&pv(p,ne,C,k),Zo=!1,ge=p.memoizedState,ne.state=ge,Bd(p,C,ne,N);var De=p.memoizedState;O!==me||ge!==De||yi.current||Zo?(typeof Ae=="function"&&(sp(p,b,Ae,C),De=p.memoizedState),(H=Zo||hv(p,b,H,C,ge,De,k)||!1)?(fe||typeof ne.UNSAFE_componentWillUpdate!="function"&&typeof ne.componentWillUpdate!="function"||(typeof ne.componentWillUpdate=="function"&&ne.componentWillUpdate(C,De,k),typeof ne.UNSAFE_componentWillUpdate=="function"&&ne.UNSAFE_componentWillUpdate(C,De,k)),typeof ne.componentDidUpdate=="function"&&(p.flags|=4),typeof ne.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ne.componentDidUpdate!="function"||O===f.memoizedProps&&ge===f.memoizedState||(p.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||O===f.memoizedProps&&ge===f.memoizedState||(p.flags|=1024),p.memoizedProps=C,p.memoizedState=De),ne.props=C,ne.state=De,ne.context=k,C=H):(typeof ne.componentDidUpdate!="function"||O===f.memoizedProps&&ge===f.memoizedState||(p.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||O===f.memoizedProps&&ge===f.memoizedState||(p.flags|=1024),C=!1)}return Xd(f,p,b,C,F,N)}function Xd(f,p,b,C,N,F){up(f,p);var ne=(p.flags&128)!==0;if(!C&&!ne)return N&&Dg(p,b,!1),ra(f,p,F);C=p.stateNode,lp.current=p;var O=ne&&typeof b.getDerivedStateFromError!="function"?null:C.render();return p.flags|=1,f!==null&&ne?(p.child=Ha(p,f.child,null,F),p.child=Ha(p,null,O,F)):_i(f,p,O,F),p.memoizedState=C.state,N&&Dg(p,b,!0),p.child}function Sv(f){var p=f.stateNode;p.pendingContext?Dh(f,p.pendingContext,p.pendingContext!==p.context):p.context&&Dh(f,p.context,!1),Hh(f,p.containerInfo)}function Pv(f,p,b,C,N){return qa(),Bh(N),p.flags|=256,_i(f,p,b,C),p.child}var Yd={dehydrated:null,treeContext:null,retryLane:0};function dp(f){return{baseLanes:f,cachePool:null,transitions:null}}function Ev(f,p,b){var C=p.pendingProps,N=rn.current,F=!1,ne=(p.flags&128)!==0,O;if((O=ne)||(O=f!==null&&f.memoizedState===null?!1:(N&2)!==0),O?(F=!0,p.flags&=-129):(f===null||f.memoizedState!==null)&&(N|=1),Br(rn,N&1),f===null)return $d(p),f=p.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((p.mode&1)===0?p.lanes=1:f.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(ne=C.children,f=C.fallback,F?(C=p.mode,F=p.child,ne={mode:"hidden",children:ne},(C&1)===0&&F!==null?(F.childLanes=0,F.pendingProps=ne):F=Op(ne,C,0,null),f=hu(f,C,b,null),F.return=p,f.return=p,F.sibling=f,p.child=F,p.child.memoizedState=dp(b),p.memoizedState=Yd,f):bc(p,ne));if(N=f.memoizedState,N!==null&&(O=N.dehydrated,O!==null))return U0(f,p,ne,C,O,N,b);if(F){F=C.fallback,ne=p.mode,N=f.child,O=N.sibling;var k={mode:"hidden",children:C.children};return(ne&1)===0&&p.child!==N?(C=p.child,C.childLanes=0,C.pendingProps=k,p.deletions=null):(C=il(N,k),C.subtreeFlags=N.subtreeFlags&14680064),O!==null?F=il(O,F):(F=hu(F,ne,b,null),F.flags|=2),F.return=p,C.return=p,C.sibling=F,p.child=C,C=F,F=p.child,ne=f.child.memoizedState,ne=ne===null?dp(b):{baseLanes:ne.baseLanes|b,cachePool:null,transitions:ne.transitions},F.memoizedState=ne,F.childLanes=f.childLanes&~b,p.memoizedState=Yd,C}return F=f.child,f=F.sibling,C=il(F,{mode:"visible",children:C.children}),(p.mode&1)===0&&(C.lanes=b),C.return=p,C.sibling=null,f!==null&&(b=p.deletions,b===null?(p.deletions=[f],p.flags|=16):b.push(f)),p.child=C,p.memoizedState=null,C}function bc(f,p){return p=Op({mode:"visible",children:p},f.mode,0,null),p.return=f,f.child=p}function Qd(f,p,b,C){return C!==null&&Bh(C),Ha(p,f.child,null,b),f=bc(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function U0(f,p,b,C,N,F,ne){if(b)return p.flags&256?(p.flags&=-257,C=Ja(Error(r(422))),Qd(f,p,ne,C)):p.memoizedState!==null?(p.child=f.child,p.flags|=128,null):(F=C.fallback,N=p.mode,C=Op({mode:"visible",children:C.children},N,0,null),F=hu(F,N,ne,null),F.flags|=2,C.return=p,F.return=p,C.sibling=F,p.child=C,(p.mode&1)!==0&&Ha(p,f.child,null,ne),p.child.memoizedState=dp(ne),p.memoizedState=Yd,F);if((p.mode&1)===0)return Qd(f,p,ne,null);if(N.data==="$!"){if(C=N.nextSibling&&N.nextSibling.dataset,C)var O=C.dgst;return C=O,F=Error(r(419)),C=Ja(F,C,void 0),Qd(f,p,ne,C)}if(O=(ne&f.childLanes)!==0,Ki||O){if(C=On,C!==null){switch(ne&-ne){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(C.suspendedLanes|ne))!==0?0:N,N!==0&&N!==F.retryLane&&(F.retryLane=N,vo(f,N),ls(C,f,N,-1))}return Cp(),C=Ja(Error(r(421))),Qd(f,p,ne,C)}return N.data==="$?"?(p.flags|=128,p.child=f.child,p=eM.bind(null,f),N._reactRetry=p,null):(f=F.treeContext,ji=Yo(N.nextSibling),Ii=p,Jr=!0,ss=null,f!==null&&(Wi[is++]=Ls,Wi[is++]=go,Wi[is++]=Wa,Ls=f.id,go=f.overflow,Wa=p),p=bc(p,C.children),p.flags|=4096,p)}function Cv(f,p,b){f.lanes|=p;var C=f.alternate;C!==null&&(C.lanes|=p),Vh(f.return,p,b)}function fp(f,p,b,C,N){var F=f.memoizedState;F===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:C,tail:b,tailMode:N}:(F.isBackwards=p,F.rendering=null,F.renderingStartTime=0,F.last=C,F.tail=b,F.tailMode=N)}function hp(f,p,b){var C=p.pendingProps,N=C.revealOrder,F=C.tail;if(_i(f,p,C.children,b),C=rn.current,(C&2)!==0)C=C&1|2,p.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&Cv(f,b,p);else if(f.tag===19)Cv(f,b,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}C&=1}if(Br(rn,C),(p.mode&1)===0)p.memoizedState=null;else switch(N){case"forwards":for(b=p.child,N=null;b!==null;)f=b.alternate,f!==null&&zd(f)===null&&(N=b),b=b.sibling;b=N,b===null?(N=p.child,p.child=null):(N=b.sibling,b.sibling=null),fp(p,!1,N,b,F);break;case"backwards":for(b=null,N=p.child,p.child=null;N!==null;){if(f=N.alternate,f!==null&&zd(f)===null){p.child=N;break}f=N.sibling,N.sibling=b,b=N,N=f}fp(p,!0,b,null,F);break;case"together":fp(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function su(f,p){(p.mode&1)===0&&f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2)}function ra(f,p,b){if(f!==null&&(p.dependencies=f.dependencies),el|=p.lanes,(b&p.childLanes)===0)return null;if(f!==null&&p.child!==f.child)throw Error(r(153));if(p.child!==null){for(f=p.child,b=il(f,f.pendingProps),p.child=b,b.return=p;f.sibling!==null;)f=f.sibling,b=b.sibling=il(f,f.pendingProps),b.return=p;b.sibling=null}return p.child}function V0(f,p,b){switch(p.tag){case 3:Sv(p),qa();break;case 5:Kg(p);break;case 1:ki(p.type)&&Od(p);break;case 4:Hh(p,p.stateNode.containerInfo);break;case 10:var C=p.type._context,N=p.memoizedProps.value;Br(Dd,C._currentValue),C._currentValue=N;break;case 13:if(C=p.memoizedState,C!==null)return C.dehydrated!==null?(Br(rn,rn.current&1),p.flags|=128,null):(b&p.child.childLanes)!==0?Ev(f,p,b):(Br(rn,rn.current&1),f=ra(f,p,b),f!==null?f.sibling:null);Br(rn,rn.current&1);break;case 19:if(C=(b&p.childLanes)!==0,(f.flags&128)!==0){if(C)return hp(f,p,b);p.flags|=128}if(N=p.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Br(rn,rn.current),C)break;return null;case 22:case 23:return p.lanes=0,Mv(f,p,b)}return ra(f,p,b)}var Av,Jd,Ov,kv;Av=function(f,p){for(var b=p.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},Jd=function(){},Ov=function(f,p,b,C){var N=f.memoizedProps;if(N!==C){f=p.stateNode,Ya(os.current);var F=null;switch(b){case"input":N=Ce(f,N),C=Ce(f,C),F=[];break;case"select":N=ce({},N,{value:void 0}),C=ce({},C,{value:void 0}),F=[];break;case"textarea":N=ot(f,N),C=ot(f,C),F=[];break;default:typeof N.onClick!="function"&&typeof C.onClick=="function"&&(f.onclick=Pd)}jt(b,C);var ne;b=null;for(H in N)if(!C.hasOwnProperty(H)&&N.hasOwnProperty(H)&&N[H]!=null)if(H==="style"){var O=N[H];for(ne in O)O.hasOwnProperty(ne)&&(b||(b={}),b[ne]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(i.hasOwnProperty(H)?F||(F=[]):(F=F||[]).push(H,null));for(H in C){var k=C[H];if(O=N?.[H],C.hasOwnProperty(H)&&k!==O&&(k!=null||O!=null))if(H==="style")if(O){for(ne in O)!O.hasOwnProperty(ne)||k&&k.hasOwnProperty(ne)||(b||(b={}),b[ne]="");for(ne in k)k.hasOwnProperty(ne)&&O[ne]!==k[ne]&&(b||(b={}),b[ne]=k[ne])}else b||(F||(F=[]),F.push(H,b)),b=k;else H==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,O=O?O.__html:void 0,k!=null&&O!==k&&(F=F||[]).push(H,k)):H==="children"?typeof k!="string"&&typeof k!="number"||(F=F||[]).push(H,""+k):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(i.hasOwnProperty(H)?(k!=null&&H==="onScroll"&&Wr("scroll",f),F||O===k||(F=[])):(F=F||[]).push(H,k))}b&&(F=F||[]).push("style",b);var H=F;(p.updateQueue=H)&&(p.flags|=4)}},kv=function(f,p,b,C){b!==C&&(p.flags|=4)};function ou(f,p){if(!Jr)switch(f.tailMode){case"hidden":p=f.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var C=null;b!==null;)b.alternate!==null&&(C=b),b=b.sibling;C===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:C.sibling=null}}function si(f){var p=f.alternate!==null&&f.alternate.child===f.child,b=0,C=0;if(p)for(var N=f.child;N!==null;)b|=N.lanes|N.childLanes,C|=N.subtreeFlags&14680064,C|=N.flags&14680064,N.return=f,N=N.sibling;else for(N=f.child;N!==null;)b|=N.lanes|N.childLanes,C|=N.subtreeFlags,C|=N.flags,N.return=f,N=N.sibling;return f.subtreeFlags|=C,f.childLanes=b,p}function W0(f,p,b){var C=p.pendingProps;switch(Fh(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return si(p),null;case 1:return ki(p.type)&&Ad(),si(p),null;case 3:return C=p.stateNode,ru(),Gr(yi),Gr(ni),Xh(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(f===null||f.child===null)&&(Nd(p)?p.flags|=4:f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,ss!==null&&(af(ss),ss=null))),Jd(f,p),si(p),null;case 5:Kh(p);var N=Ya(hc.current);if(b=p.type,f!==null&&p.stateNode!=null)Ov(f,p,b,C,N),f.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!C){if(p.stateNode===null)throw Error(r(166));return si(p),null}if(f=Ya(os.current),Nd(p)){C=p.stateNode,b=p.type;var F=p.memoizedProps;switch(C[Rs]=p,C[Kl]=F,f=(p.mode&1)!==0,b){case"dialog":Wr("cancel",C),Wr("close",C);break;case"iframe":case"object":case"embed":Wr("load",C);break;case"video":case"audio":for(N=0;N<ql.length;N++)Wr(ql[N],C);break;case"source":Wr("error",C);break;case"img":case"image":case"link":Wr("error",C),Wr("load",C);break;case"details":Wr("toggle",C);break;case"input":$e(C,F),Wr("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!F.multiple},Wr("invalid",C);break;case"textarea":Xe(C,F),Wr("invalid",C)}jt(b,F),N=null;for(var ne in F)if(F.hasOwnProperty(ne)){var O=F[ne];ne==="children"?typeof O=="string"?C.textContent!==O&&(F.suppressHydrationWarning!==!0&&Sd(C.textContent,O,f),N=["children",O]):typeof O=="number"&&C.textContent!==""+O&&(F.suppressHydrationWarning!==!0&&Sd(C.textContent,O,f),N=["children",""+O]):i.hasOwnProperty(ne)&&O!=null&&ne==="onScroll"&&Wr("scroll",C)}switch(b){case"input":re(C),Ve(C,F,!0);break;case"textarea":re(C),_t(C);break;case"select":case"option":break;default:typeof F.onClick=="function"&&(C.onclick=Pd)}C=N,p.updateQueue=C,C!==null&&(p.flags|=4)}else{ne=N.nodeType===9?N:N.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=dt(b)),f==="http://www.w3.org/1999/xhtml"?b==="script"?(f=ne.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof C.is=="string"?f=ne.createElement(b,{is:C.is}):(f=ne.createElement(b),b==="select"&&(ne=f,C.multiple?ne.multiple=!0:C.size&&(ne.size=C.size))):f=ne.createElementNS(f,b),f[Rs]=p,f[Kl]=C,Av(f,p,!1,!1),p.stateNode=f;e:{switch(ne=hi(b,C),b){case"dialog":Wr("cancel",f),Wr("close",f),N=C;break;case"iframe":case"object":case"embed":Wr("load",f),N=C;break;case"video":case"audio":for(N=0;N<ql.length;N++)Wr(ql[N],f);N=C;break;case"source":Wr("error",f),N=C;break;case"img":case"image":case"link":Wr("error",f),Wr("load",f),N=C;break;case"details":Wr("toggle",f),N=C;break;case"input":$e(f,C),N=Ce(f,C),Wr("invalid",f);break;case"option":N=C;break;case"select":f._wrapperState={wasMultiple:!!C.multiple},N=ce({},C,{value:void 0}),Wr("invalid",f);break;case"textarea":Xe(f,C),N=ot(f,C),Wr("invalid",f);break;default:N=C}jt(b,N),O=N;for(F in O)if(O.hasOwnProperty(F)){var k=O[F];F==="style"?Kr(f,k):F==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&We(f,k)):F==="children"?typeof k=="string"?(b!=="textarea"||k!=="")&&Ze(f,k):typeof k=="number"&&Ze(f,""+k):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(i.hasOwnProperty(F)?k!=null&&F==="onScroll"&&Wr("scroll",f):k!=null&&S(f,F,k,ne))}switch(b){case"input":re(f),Ve(f,C,!1);break;case"textarea":re(f),_t(f);break;case"option":C.value!=null&&f.setAttribute("value",""+Ie(C.value));break;case"select":f.multiple=!!C.multiple,F=C.value,F!=null?et(f,!!C.multiple,F,!1):C.defaultValue!=null&&et(f,!!C.multiple,C.defaultValue,!0);break;default:typeof N.onClick=="function"&&(f.onclick=Pd)}switch(b){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return si(p),null;case 6:if(f&&p.stateNode!=null)kv(f,p,f.memoizedProps,C);else{if(typeof C!="string"&&p.stateNode===null)throw Error(r(166));if(b=Ya(hc.current),Ya(os.current),Nd(p)){if(C=p.stateNode,b=p.memoizedProps,C[Rs]=p,(F=C.nodeValue!==b)&&(f=Ii,f!==null))switch(f.tag){case 3:Sd(C.nodeValue,b,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&Sd(C.nodeValue,b,(f.mode&1)!==0)}F&&(p.flags|=4)}else C=(b.nodeType===9?b:b.ownerDocument).createTextNode(C),C[Rs]=p,p.stateNode=C}return si(p),null;case 13:if(Gr(rn),C=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(Jr&&ji!==null&&(p.mode&1)!==0&&(p.flags&128)===0)Ug(),qa(),p.flags|=98560,F=!1;else if(F=Nd(p),C!==null&&C.dehydrated!==null){if(f===null){if(!F)throw Error(r(318));if(F=p.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(r(317));F[Rs]=p}else qa(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;si(p),F=!1}else ss!==null&&(af(ss),ss=null),F=!0;if(!F)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=b,p):(C=C!==null,C!==(f!==null&&f.memoizedState!==null)&&C&&(p.child.flags|=8192,(p.mode&1)!==0&&(f===null||(rn.current&1)!==0?Fn===0&&(Fn=3):Cp())),p.updateQueue!==null&&(p.flags|=4),si(p),null);case 4:return ru(),Jd(f,p),f===null&&sc(p.stateNode.containerInfo),si(p),null;case 10:return Ld(p.type._context),si(p),null;case 17:return ki(p.type)&&Ad(),si(p),null;case 19:if(Gr(rn),F=p.memoizedState,F===null)return si(p),null;if(C=(p.flags&128)!==0,ne=F.rendering,ne===null)if(C)ou(F,!1);else{if(Fn!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(ne=zd(f),ne!==null){for(p.flags|=128,ou(F,!1),C=ne.updateQueue,C!==null&&(p.updateQueue=C,p.flags|=4),p.subtreeFlags=0,C=b,b=p.child;b!==null;)F=b,f=C,F.flags&=14680066,ne=F.alternate,ne===null?(F.childLanes=0,F.lanes=f,F.child=null,F.subtreeFlags=0,F.memoizedProps=null,F.memoizedState=null,F.updateQueue=null,F.dependencies=null,F.stateNode=null):(F.childLanes=ne.childLanes,F.lanes=ne.lanes,F.child=ne.child,F.subtreeFlags=0,F.deletions=null,F.memoizedProps=ne.memoizedProps,F.memoizedState=ne.memoizedState,F.updateQueue=ne.updateQueue,F.type=ne.type,f=ne.dependencies,F.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),b=b.sibling;return Br(rn,rn.current&1|2),p.child}f=f.sibling}F.tail!==null&&nt()>uu&&(p.flags|=128,C=!0,ou(F,!1),p.lanes=4194304)}else{if(!C)if(f=zd(ne),f!==null){if(p.flags|=128,C=!0,b=f.updateQueue,b!==null&&(p.updateQueue=b,p.flags|=4),ou(F,!0),F.tail===null&&F.tailMode==="hidden"&&!ne.alternate&&!Jr)return si(p),null}else 2*nt()-F.renderingStartTime>uu&&b!==1073741824&&(p.flags|=128,C=!0,ou(F,!1),p.lanes=4194304);F.isBackwards?(ne.sibling=p.child,p.child=ne):(b=F.last,b!==null?b.sibling=ne:p.child=ne,F.last=ne)}return F.tail!==null?(p=F.tail,F.rendering=p,F.tail=p.sibling,F.renderingStartTime=nt(),p.sibling=null,b=rn.current,Br(rn,C?b&1|2:b&1),p):(si(p),null);case 22:case 23:return Ep(),C=p.memoizedState!==null,f!==null&&f.memoizedState!==null!==C&&(p.flags|=8192),C&&(p.mode&1)!==0?(Xi&1073741824)!==0&&(si(p),p.subtreeFlags&6&&(p.flags|=8192)):si(p),null;case 24:return null;case 25:return null}throw Error(r(156,p.tag))}function Iv(f,p){switch(Fh(p),p.tag){case 1:return ki(p.type)&&Ad(),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return ru(),Gr(yi),Gr(ni),Xh(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 5:return Kh(p),null;case 13:if(Gr(rn),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(r(340));qa()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return Gr(rn),null;case 4:return ru(),null;case 10:return Ld(p.type._context),null;case 22:case 23:return Ep(),null;case 24:return null;default:return null}}var pp=!1,bi=!1,jv=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function au(f,p){var b=f.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(C){hn(f,p,C)}else b.current=null}function mp(f,p,b){try{b()}catch(C){hn(f,p,C)}}var $v=!1;function gp(f,p){if(Ah=Vr,f=R(),Y(f)){if("selectionStart"in f)var b={start:f.selectionStart,end:f.selectionEnd};else e:{b=(b=f.ownerDocument)&&b.defaultView||window;var C=b.getSelection&&b.getSelection();if(C&&C.rangeCount!==0){b=C.anchorNode;var N=C.anchorOffset,F=C.focusNode;C=C.focusOffset;try{b.nodeType,F.nodeType}catch{b=null;break e}var ne=0,O=-1,k=-1,H=0,fe=0,me=f,ge=null;t:for(;;){for(var Ae;me!==b||N!==0&&me.nodeType!==3||(O=ne+N),me!==F||C!==0&&me.nodeType!==3||(k=ne+C),me.nodeType===3&&(ne+=me.nodeValue.length),(Ae=me.firstChild)!==null;)ge=me,me=Ae;for(;;){if(me===f)break t;if(ge===b&&++H===N&&(O=ne),ge===F&&++fe===C&&(k=ne),(Ae=me.nextSibling)!==null)break;me=ge,ge=me.parentNode}me=Ae}b=O===-1||k===-1?null:{start:O,end:k}}else b=null}b=b||{start:0,end:0}}else b=null;for(Ed={focusedElem:f,selectionRange:b},Vr=!1,Mt=p;Mt!==null;)if(p=Mt,f=p.child,(p.subtreeFlags&1028)!==0&&f!==null)f.return=p,Mt=f;else for(;Mt!==null;){p=Mt;try{var De=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(De!==null){var Fe=De.memoizedProps,ht=De.memoizedState,Te=p.stateNode,Me=Te.getSnapshotBeforeUpdate(p.elementType===p.type?Fe:Hi(p.type,Fe),ht);Te.__reactInternalSnapshotBeforeUpdate=Me}break;case 3:var Ee=p.stateNode.containerInfo;Ee.nodeType===1?Ee.textContent="":Ee.nodeType===9&&Ee.documentElement&&Ee.removeChild(Ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ze){hn(p,p.return,ze)}if(f=p.sibling,f!==null){f.return=p.return,Mt=f;break}Mt=p.return}return De=$v,$v=!1,De}function wc(f,p,b){var C=p.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var N=C=C.next;do{if((N.tag&f)===f){var F=N.destroy;N.destroy=void 0,F!==void 0&&mp(p,b,F)}N=N.next}while(N!==C)}}function Zd(f,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var b=p=p.next;do{if((b.tag&f)===f){var C=b.create;b.destroy=C()}b=b.next}while(b!==p)}}function vp(f){var p=f.ref;if(p!==null){var b=f.stateNode;switch(f.tag){case 5:f=b;break;default:f=b}typeof p=="function"?p(f):p.current=f}}function ef(f){var p=f.alternate;p!==null&&(f.alternate=null,ef(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&(delete p[Rs],delete p[Kl],delete p[$h],delete p[$g],delete p[j0])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function Nv(f){return f.tag===5||f.tag===3||f.tag===4}function Dv(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||Nv(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function yp(f,p,b){var C=f.tag;if(C===5||C===6)f=f.stateNode,p?b.nodeType===8?b.parentNode.insertBefore(f,p):b.insertBefore(f,p):(b.nodeType===8?(p=b.parentNode,p.insertBefore(f,b)):(p=b,p.appendChild(f)),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=Pd));else if(C!==4&&(f=f.child,f!==null))for(yp(f,p,b),f=f.sibling;f!==null;)yp(f,p,b),f=f.sibling}function xc(f,p,b){var C=f.tag;if(C===5||C===6)f=f.stateNode,p?b.insertBefore(f,p):b.appendChild(f);else if(C!==4&&(f=f.child,f!==null))for(xc(f,p,b),f=f.sibling;f!==null;)xc(f,p,b),f=f.sibling}var Yn=null,Ms=!1;function na(f,p,b){for(b=b.child;b!==null;)Rv(f,p,b),b=b.sibling}function Rv(f,p,b){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(_s,b)}catch{}switch(b.tag){case 5:bi||au(b,p);case 6:var C=Yn,N=Ms;Yn=null,na(f,p,b),Yn=C,Ms=N,Yn!==null&&(Ms?(f=Yn,b=b.stateNode,f.nodeType===8?f.parentNode.removeChild(b):f.removeChild(b)):Yn.removeChild(b.stateNode));break;case 18:Yn!==null&&(Ms?(f=Yn,b=b.stateNode,f.nodeType===8?Ih(f.parentNode,b):f.nodeType===1&&Ih(f,b),fn(f)):Ih(Yn,b.stateNode));break;case 4:C=Yn,N=Ms,Yn=b.stateNode.containerInfo,Ms=!0,na(f,p,b),Yn=C,Ms=N;break;case 0:case 11:case 14:case 15:if(!bi&&(C=b.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){N=C=C.next;do{var F=N,ne=F.destroy;F=F.tag,ne!==void 0&&((F&2)!==0||(F&4)!==0)&&mp(b,p,ne),N=N.next}while(N!==C)}na(f,p,b);break;case 1:if(!bi&&(au(b,p),C=b.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=b.memoizedProps,C.state=b.memoizedState,C.componentWillUnmount()}catch(O){hn(b,p,O)}na(f,p,b);break;case 21:na(f,p,b);break;case 22:b.mode&1?(bi=(C=bi)||b.memoizedState!==null,na(f,p,b),bi=C):na(f,p,b);break;default:na(f,p,b)}}function Lv(f){var p=f.updateQueue;if(p!==null){f.updateQueue=null;var b=f.stateNode;b===null&&(b=f.stateNode=new jv),p.forEach(function(C){var N=J0.bind(null,f,C);b.has(C)||(b.add(C),C.then(N,N))})}}function Ts(f,p){var b=p.deletions;if(b!==null)for(var C=0;C<b.length;C++){var N=b[C];try{var F=f,ne=p,O=ne;e:for(;O!==null;){switch(O.tag){case 5:Yn=O.stateNode,Ms=!1;break e;case 3:Yn=O.stateNode.containerInfo,Ms=!0;break e;case 4:Yn=O.stateNode.containerInfo,Ms=!0;break e}O=O.return}if(Yn===null)throw Error(r(160));Rv(F,ne,N),Yn=null,Ms=!1;var k=N.alternate;k!==null&&(k.return=null),N.return=null}catch(H){hn(N,p,H)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)Fv(p,f),p=p.sibling}function Fv(f,p){var b=f.alternate,C=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(Ts(p,f),Bs(f),C&4){try{wc(3,f,f.return),Zd(3,f)}catch(Fe){hn(f,f.return,Fe)}try{wc(5,f,f.return)}catch(Fe){hn(f,f.return,Fe)}}break;case 1:Ts(p,f),Bs(f),C&512&&b!==null&&au(b,b.return);break;case 5:if(Ts(p,f),Bs(f),C&512&&b!==null&&au(b,b.return),f.flags&32){var N=f.stateNode;try{Ze(N,"")}catch(Fe){hn(f,f.return,Fe)}}if(C&4&&(N=f.stateNode,N!=null)){var F=f.memoizedProps,ne=b!==null?b.memoizedProps:F,O=f.type,k=f.updateQueue;if(f.updateQueue=null,k!==null)try{O==="input"&&F.type==="radio"&&F.name!=null&&Ne(N,F),hi(O,ne);var H=hi(O,F);for(ne=0;ne<k.length;ne+=2){var fe=k[ne],me=k[ne+1];fe==="style"?Kr(N,me):fe==="dangerouslySetInnerHTML"?We(N,me):fe==="children"?Ze(N,me):S(N,fe,me,H)}switch(O){case"input":Le(N,F);break;case"textarea":lt(N,F);break;case"select":var ge=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!F.multiple;var Ae=F.value;Ae!=null?et(N,!!F.multiple,Ae,!1):ge!==!!F.multiple&&(F.defaultValue!=null?et(N,!!F.multiple,F.defaultValue,!0):et(N,!!F.multiple,F.multiple?[]:"",!1))}N[Kl]=F}catch(Fe){hn(f,f.return,Fe)}}break;case 6:if(Ts(p,f),Bs(f),C&4){if(f.stateNode===null)throw Error(r(162));N=f.stateNode,F=f.memoizedProps;try{N.nodeValue=F}catch(Fe){hn(f,f.return,Fe)}}break;case 3:if(Ts(p,f),Bs(f),C&4&&b!==null&&b.memoizedState.isDehydrated)try{fn(p.containerInfo)}catch(Fe){hn(f,f.return,Fe)}break;case 4:Ts(p,f),Bs(f);break;case 13:Ts(p,f),Bs(f),N=f.child,N.flags&8192&&(F=N.memoizedState!==null,N.stateNode.isHidden=F,!F||N.alternate!==null&&N.alternate.memoizedState!==null||(Tc=nt())),C&4&&Lv(f);break;case 22:if(fe=b!==null&&b.memoizedState!==null,f.mode&1?(bi=(H=bi)||fe,Ts(p,f),bi=H):Ts(p,f),Bs(f),C&8192){if(H=f.memoizedState!==null,(f.stateNode.isHidden=H)&&!fe&&(f.mode&1)!==0)for(Mt=f,fe=f.child;fe!==null;){for(me=Mt=fe;Mt!==null;){switch(ge=Mt,Ae=ge.child,ge.tag){case 0:case 11:case 14:case 15:wc(4,ge,ge.return);break;case 1:au(ge,ge.return);var De=ge.stateNode;if(typeof De.componentWillUnmount=="function"){C=ge,b=ge.return;try{p=C,De.props=p.memoizedProps,De.state=p.memoizedState,De.componentWillUnmount()}catch(Fe){hn(C,b,Fe)}}break;case 5:au(ge,ge.return);break;case 22:if(ge.memoizedState!==null){zv(me);continue}}Ae!==null?(Ae.return=ge,Mt=Ae):zv(me)}fe=fe.sibling}e:for(fe=null,me=f;;){if(me.tag===5){if(fe===null){fe=me;try{N=me.stateNode,H?(F=N.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none"):(O=me.stateNode,k=me.memoizedProps.style,ne=k!=null&&k.hasOwnProperty("display")?k.display:null,O.style.display=Rt("display",ne))}catch(Fe){hn(f,f.return,Fe)}}}else if(me.tag===6){if(fe===null)try{me.stateNode.nodeValue=H?"":me.memoizedProps}catch(Fe){hn(f,f.return,Fe)}}else if((me.tag!==22&&me.tag!==23||me.memoizedState===null||me===f)&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===f)break e;for(;me.sibling===null;){if(me.return===null||me.return===f)break e;fe===me&&(fe=null),me=me.return}fe===me&&(fe=null),me.sibling.return=me.return,me=me.sibling}}break;case 19:Ts(p,f),Bs(f),C&4&&Lv(f);break;case 21:break;default:Ts(p,f),Bs(f)}}function Bs(f){var p=f.flags;if(p&2){try{e:{for(var b=f.return;b!==null;){if(Nv(b)){var C=b;break e}b=b.return}throw Error(r(160))}switch(C.tag){case 5:var N=C.stateNode;C.flags&32&&(Ze(N,""),C.flags&=-33);var F=Dv(f);xc(f,F,N);break;case 3:case 4:var ne=C.stateNode.containerInfo,O=Dv(f);yp(f,O,ne);break;default:throw Error(r(161))}}catch(k){hn(f,f.return,k)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function G0(f,p,b){Mt=f,Bv(f)}function Bv(f,p,b){for(var C=(f.mode&1)!==0;Mt!==null;){var N=Mt,F=N.child;if(N.tag===22&&C){var ne=N.memoizedState!==null||pp;if(!ne){var O=N.alternate,k=O!==null&&O.memoizedState!==null||bi;O=pp;var H=bi;if(pp=ne,(bi=k)&&!H)for(Mt=N;Mt!==null;)ne=Mt,k=ne.child,ne.tag===22&&ne.memoizedState!==null?Uv(N):k!==null?(k.return=ne,Mt=k):Uv(N);for(;F!==null;)Mt=F,Bv(F),F=F.sibling;Mt=N,pp=O,bi=H}_p(f)}else(N.subtreeFlags&8772)!==0&&F!==null?(F.return=N,Mt=F):_p(f)}}function _p(f){for(;Mt!==null;){var p=Mt;if((p.flags&8772)!==0){var b=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:bi||Zd(5,p);break;case 1:var C=p.stateNode;if(p.flags&4&&!bi)if(b===null)C.componentDidMount();else{var N=p.elementType===p.type?b.memoizedProps:Hi(p.type,b.memoizedProps);C.componentDidUpdate(N,b.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var F=p.updateQueue;F!==null&&Hg(p,F,C);break;case 3:var ne=p.updateQueue;if(ne!==null){if(b=null,p.child!==null)switch(p.child.tag){case 5:b=p.child.stateNode;break;case 1:b=p.child.stateNode}Hg(p,ne,b)}break;case 5:var O=p.stateNode;if(b===null&&p.flags&4){b=O;var k=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&b.focus();break;case"img":k.src&&(b.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var H=p.alternate;if(H!==null){var fe=H.memoizedState;if(fe!==null){var me=fe.dehydrated;me!==null&&fn(me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}bi||p.flags&512&&vp(p)}catch(ge){hn(p,p.return,ge)}}if(p===f){Mt=null;break}if(b=p.sibling,b!==null){b.return=p.return,Mt=b;break}Mt=p.return}}function zv(f){for(;Mt!==null;){var p=Mt;if(p===f){Mt=null;break}var b=p.sibling;if(b!==null){b.return=p.return,Mt=b;break}Mt=p.return}}function Uv(f){for(;Mt!==null;){var p=Mt;try{switch(p.tag){case 0:case 11:case 15:var b=p.return;try{Zd(4,p)}catch(k){hn(p,b,k)}break;case 1:var C=p.stateNode;if(typeof C.componentDidMount=="function"){var N=p.return;try{C.componentDidMount()}catch(k){hn(p,N,k)}}var F=p.return;try{vp(p)}catch(k){hn(p,F,k)}break;case 5:var ne=p.return;try{vp(p)}catch(k){hn(p,ne,k)}}}catch(k){hn(p,p.return,k)}if(p===f){Mt=null;break}var O=p.sibling;if(O!==null){O.return=p.return,Mt=O;break}Mt=p.return}}var Vv=Math.ceil,tf=M.ReactCurrentDispatcher,bp=M.ReactCurrentOwner,as=M.ReactCurrentBatchConfig,gr=0,On=null,kn=null,Qn=0,Xi=0,lu=po(0),Fn=0,Za=null,el=0,rf=0,wp=0,Mc=null,$i=null,Tc=0,uu=1/0,_o=null,nf=!1,vr=null,tl=null,xp=!1,rl=null,Mp=0,cu=0,Tp=null,sf=-1,of=0;function wi(){return(gr&6)!==0?nt():sf!==-1?sf:sf=nt()}function bo(f){return(f.mode&1)===0?1:(gr&2)!==0&&Qn!==0?Qn&-Qn:$0.transition!==null?(of===0&&(of=ao()),of):(f=ve,f!==0||(f=window.event,f=f===void 0?16:ud(f.type)),f)}function ls(f,p,b,C){if(50<cu)throw cu=0,Tp=null,Error(r(185));q(f,b,C),((gr&2)===0||f!==On)&&(f===On&&((gr&2)===0&&(rf|=b),Fn===4&&ia(f,Qn)),Yi(f,C),b===1&&gr===0&&(p.mode&1)===0&&(uu=nt()+500,ac&&Jo()))}function Yi(f,p){var b=f.callbackNode;El(f,p);var C=oo(f,f===On?Qn:0);if(C===0)b!==null&&Kn(b),f.callbackNode=null,f.callbackPriority=0;else if(p=C&-C,f.callbackPriority!==p){if(b!=null&&Kn(b),p===1)f.tag===0?Lg(H0.bind(null,f)):Rg(H0.bind(null,f)),I0(function(){(gr&6)===0&&Jo()}),b=null;else{switch(Re(C)){case 1:b=vn;break;case 4:b=pi;break;case 16:b=ys;break;case 536870912:b=Gn;break;default:b=ys}b=eb(b,Wv.bind(null,f))}f.callbackPriority=p,f.callbackNode=b}}function Wv(f,p){if(sf=-1,of=0,(gr&6)!==0)throw Error(r(327));var b=f.callbackNode;if(fu()&&f.callbackNode!==b)return null;var C=oo(f,f===On?Qn:0);if(C===0)return null;if((C&30)!==0||(C&f.expiredLanes)!==0||p)p=lf(f,C);else{p=C;var N=gr;gr|=2;var F=qv();(On!==f||Qn!==p)&&(_o=null,uu=nt()+500,Ss(f,p));do try{X0();break}catch(O){Gv(f,O)}while(!0);Uh(),tf.current=F,gr=N,kn!==null?p=0:(On=null,Qn=0,p=Fn)}if(p!==0){if(p===2&&(N=Uo(f),N!==0&&(C=N,p=Sp(f,N))),p===1)throw b=Za,Ss(f,0),ia(f,C),Yi(f,nt()),b;if(p===6)ia(f,C);else{if(N=f.current.alternate,(C&30)===0&&!q0(N)&&(p=lf(f,C),p===2&&(F=Uo(f),F!==0&&(C=F,p=Sp(f,F))),p===1))throw b=Za,Ss(f,0),ia(f,C),Yi(f,nt()),b;switch(f.finishedWork=N,f.finishedLanes=C,p){case 0:case 1:throw Error(r(345));case 2:du(f,$i,_o);break;case 3:if(ia(f,C),(C&130023424)===C&&(p=Tc+500-nt(),10<p)){if(oo(f,0)!==0)break;if(N=f.suspendedLanes,(N&C)!==C){wi(),f.pingedLanes|=f.suspendedLanes&N;break}f.timeoutHandle=kh(du.bind(null,f,$i,_o),p);break}du(f,$i,_o);break;case 4:if(ia(f,C),(C&4194240)===C)break;for(p=f.eventTimes,N=-1;0<C;){var ne=31-Sn(C);F=1<<ne,ne=p[ne],ne>N&&(N=ne),C&=~F}if(C=N,C=nt()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*Vv(C/1960))-C,10<C){f.timeoutHandle=kh(du.bind(null,f,$i,_o),C);break}du(f,$i,_o);break;case 5:du(f,$i,_o);break;default:throw Error(r(329))}}}return Yi(f,nt()),f.callbackNode===b?Wv.bind(null,f):null}function Sp(f,p){var b=Mc;return f.current.memoizedState.isDehydrated&&(Ss(f,p).flags|=256),f=lf(f,p),f!==2&&(p=$i,$i=b,p!==null&&af(p)),f}function af(f){$i===null?$i=f:$i.push.apply($i,f)}function q0(f){for(var p=f;;){if(p.flags&16384){var b=p.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var C=0;C<b.length;C++){var N=b[C],F=N.getSnapshot;N=N.value;try{if(!vi(F(),N))return!1}catch{return!1}}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function ia(f,p){for(p&=~wp,p&=~rf,f.suspendedLanes|=p,f.pingedLanes&=~p,f=f.expirationTimes;0<p;){var b=31-Sn(p),C=1<<b;f[b]=-1,p&=~C}}function H0(f){if((gr&6)!==0)throw Error(r(327));fu();var p=oo(f,0);if((p&1)===0)return Yi(f,nt()),null;var b=lf(f,p);if(f.tag!==0&&b===2){var C=Uo(f);C!==0&&(p=C,b=Sp(f,C))}if(b===1)throw b=Za,Ss(f,0),ia(f,p),Yi(f,nt()),b;if(b===6)throw Error(r(345));return f.finishedWork=f.current.alternate,f.finishedLanes=p,du(f,$i,_o),Yi(f,nt()),null}function Pp(f,p){var b=gr;gr|=1;try{return f(p)}finally{gr=b,gr===0&&(uu=nt()+500,ac&&Jo())}}function nl(f){rl!==null&&rl.tag===0&&(gr&6)===0&&fu();var p=gr;gr|=1;var b=as.transition,C=ve;try{if(as.transition=null,ve=1,f)return f()}finally{ve=C,as.transition=b,gr=p,(gr&6)===0&&Jo()}}function Ep(){Xi=lu.current,Gr(lu)}function Ss(f,p){f.finishedWork=null,f.finishedLanes=0;var b=f.timeoutHandle;if(b!==-1&&(f.timeoutHandle=-1,kg(b)),kn!==null)for(b=kn.return;b!==null;){var C=b;switch(Fh(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&Ad();break;case 3:ru(),Gr(yi),Gr(ni),Xh();break;case 5:Kh(C);break;case 4:ru();break;case 13:Gr(rn);break;case 19:Gr(rn);break;case 10:Ld(C.type._context);break;case 22:case 23:Ep()}b=b.return}if(On=f,kn=f=il(f.current,null),Qn=Xi=p,Fn=0,Za=null,wp=rf=el=0,$i=Mc=null,Xa!==null){for(p=0;p<Xa.length;p++)if(b=Xa[p],C=b.interleaved,C!==null){b.interleaved=null;var N=C.next,F=b.pending;if(F!==null){var ne=F.next;F.next=N,C.next=ne}b.pending=C}Xa=null}return f}function Gv(f,p){do{var b=kn;try{if(Uh(),Vd.current=Hd,pc){for(var C=nn.memoizedState;C!==null;){var N=C.queue;N!==null&&(N.pending=null),C=C.next}pc=!1}if(Qa=0,qn=Ln=nn=null,mc=!1,gc=0,bp.current=null,b===null||b.return===null){Fn=1,Za=p,kn=null;break}e:{var F=f,ne=b.return,O=b,k=p;if(p=Qn,O.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var H=k,fe=O,me=fe.tag;if((fe.mode&1)===0&&(me===0||me===11||me===15)){var ge=fe.alternate;ge?(fe.updateQueue=ge.updateQueue,fe.memoizedState=ge.memoizedState,fe.lanes=ge.lanes):(fe.updateQueue=null,fe.memoizedState=null)}var Ae=yv(ne);if(Ae!==null){Ae.flags&=-257,_v(Ae,ne,O,F,p),Ae.mode&1&&vv(F,H,p),p=Ae,k=H;var De=p.updateQueue;if(De===null){var Fe=new Set;Fe.add(k),p.updateQueue=Fe}else De.add(k);break e}else{if((p&1)===0){vv(F,H,p),Cp();break e}k=Error(r(426))}}else if(Jr&&O.mode&1){var ht=yv(ne);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),_v(ht,ne,O,F,p),Bh(iu(k,O));break e}}F=k=iu(k,O),Fn!==4&&(Fn=2),Mc===null?Mc=[F]:Mc.push(F),F=ne;do{switch(F.tag){case 3:F.flags|=65536,p&=-p,F.lanes|=p;var Te=mv(F,k,p);qg(F,Te);break e;case 1:O=k;var Me=F.type,Ee=F.stateNode;if((F.flags&128)===0&&(typeof Me.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(tl===null||!tl.has(Ee)))){F.flags|=65536,p&=-p,F.lanes|=p;var ze=gv(F,O,p);qg(F,ze);break e}}F=F.return}while(F!==null)}Kv(b)}catch(ct){p=ct,kn===b&&b!==null&&(kn=b=b.return);continue}break}while(!0)}function qv(){var f=tf.current;return tf.current=Hd,f===null?Hd:f}function Cp(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),On===null||(el&268435455)===0&&(rf&268435455)===0||ia(On,Qn)}function lf(f,p){var b=gr;gr|=2;var C=qv();(On!==f||Qn!==p)&&(_o=null,Ss(f,p));do try{K0();break}catch(N){Gv(f,N)}while(!0);if(Uh(),gr=b,tf.current=C,kn!==null)throw Error(r(261));return On=null,Qn=0,Fn}function K0(){for(;kn!==null;)Hv(kn)}function X0(){for(;kn!==null&&!Ci();)Hv(kn)}function Hv(f){var p=Z0(f.alternate,f,Xi);f.memoizedProps=f.pendingProps,p===null?Kv(f):kn=p,bp.current=null}function Kv(f){var p=f;do{var b=p.alternate;if(f=p.return,(p.flags&32768)===0){if(b=W0(b,p,Xi),b!==null){kn=b;return}}else{if(b=Iv(b,p),b!==null){b.flags&=32767,kn=b;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Fn=6,kn=null;return}}if(p=p.sibling,p!==null){kn=p;return}kn=p=f}while(p!==null);Fn===0&&(Fn=5)}function du(f,p,b){var C=ve,N=as.transition;try{as.transition=null,ve=1,Y0(f,p,b,C)}finally{as.transition=N,ve=C}return null}function Y0(f,p,b,C){do fu();while(rl!==null);if((gr&6)!==0)throw Error(r(327));b=f.finishedWork;var N=f.finishedLanes;if(b===null)return null;if(f.finishedWork=null,f.finishedLanes=0,b===f.current)throw Error(r(177));f.callbackNode=null,f.callbackPriority=0;var F=b.lanes|b.childLanes;if(de(f,F),f===On&&(kn=On=null,Qn=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||xp||(xp=!0,eb(ys,function(){return fu(),null})),F=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||F){F=as.transition,as.transition=null;var ne=ve;ve=1;var O=gr;gr|=4,bp.current=null,gp(f,b),Fv(b,f),ie(Ed),Vr=!!Ah,Ed=Ah=null,f.current=b,G0(b),it(),gr=O,ve=ne,as.transition=F}else f.current=b;if(xp&&(xp=!1,rl=f,Mp=N),F=f.pendingLanes,F===0&&(tl=null),xl(b.stateNode),Yi(f,nt()),p!==null)for(C=f.onRecoverableError,b=0;b<p.length;b++)N=p[b],C(N.value,{componentStack:N.stack,digest:N.digest});if(nf)throw nf=!1,f=vr,vr=null,f;return(Mp&1)!==0&&f.tag!==0&&fu(),F=f.pendingLanes,(F&1)!==0?f===Tp?cu++:(cu=0,Tp=f):cu=0,Jo(),null}function fu(){if(rl!==null){var f=Re(Mp),p=as.transition,b=ve;try{if(as.transition=null,ve=16>f?16:f,rl===null)var C=!1;else{if(f=rl,rl=null,Mp=0,(gr&6)!==0)throw Error(r(331));var N=gr;for(gr|=4,Mt=f.current;Mt!==null;){var F=Mt,ne=F.child;if((Mt.flags&16)!==0){var O=F.deletions;if(O!==null){for(var k=0;k<O.length;k++){var H=O[k];for(Mt=H;Mt!==null;){var fe=Mt;switch(fe.tag){case 0:case 11:case 15:wc(8,fe,F)}var me=fe.child;if(me!==null)me.return=fe,Mt=me;else for(;Mt!==null;){fe=Mt;var ge=fe.sibling,Ae=fe.return;if(ef(fe),fe===H){Mt=null;break}if(ge!==null){ge.return=Ae,Mt=ge;break}Mt=Ae}}}var De=F.alternate;if(De!==null){var Fe=De.child;if(Fe!==null){De.child=null;do{var ht=Fe.sibling;Fe.sibling=null,Fe=ht}while(Fe!==null)}}Mt=F}}if((F.subtreeFlags&2064)!==0&&ne!==null)ne.return=F,Mt=ne;else e:for(;Mt!==null;){if(F=Mt,(F.flags&2048)!==0)switch(F.tag){case 0:case 11:case 15:wc(9,F,F.return)}var Te=F.sibling;if(Te!==null){Te.return=F.return,Mt=Te;break e}Mt=F.return}}var Me=f.current;for(Mt=Me;Mt!==null;){ne=Mt;var Ee=ne.child;if((ne.subtreeFlags&2064)!==0&&Ee!==null)Ee.return=ne,Mt=Ee;else e:for(ne=Me;Mt!==null;){if(O=Mt,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Zd(9,O)}}catch(ct){hn(O,O.return,ct)}if(O===ne){Mt=null;break e}var ze=O.sibling;if(ze!==null){ze.return=O.return,Mt=ze;break e}Mt=O.return}}if(gr=N,Jo(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(_s,f)}catch{}C=!0}return C}finally{ve=b,as.transition=p}}return!1}function Xv(f,p,b){p=iu(b,p),p=mv(f,p,1),f=ea(f,p,1),p=wi(),f!==null&&(q(f,1,p),Yi(f,p))}function hn(f,p,b){if(f.tag===3)Xv(f,f,b);else for(;p!==null;){if(p.tag===3){Xv(p,f,b);break}else if(p.tag===1){var C=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(tl===null||!tl.has(C))){f=iu(b,f),f=gv(p,f,1),p=ea(p,f,1),f=wi(),p!==null&&(q(p,1,f),Yi(p,f));break}}p=p.return}}function Q0(f,p,b){var C=f.pingCache;C!==null&&C.delete(p),p=wi(),f.pingedLanes|=f.suspendedLanes&b,On===f&&(Qn&b)===b&&(Fn===4||Fn===3&&(Qn&130023424)===Qn&&500>nt()-Tc?Ss(f,0):wp|=b),Yi(f,p)}function Yv(f,p){p===0&&((f.mode&1)===0?p=1:(p=Ns,Ns<<=1,(Ns&130023424)===0&&(Ns=4194304)));var b=wi();f=vo(f,p),f!==null&&(q(f,p,b),Yi(f,b))}function eM(f){var p=f.memoizedState,b=0;p!==null&&(b=p.retryLane),Yv(f,b)}function J0(f,p){var b=0;switch(f.tag){case 13:var C=f.stateNode,N=f.memoizedState;N!==null&&(b=N.retryLane);break;case 19:C=f.stateNode;break;default:throw Error(r(314))}C!==null&&C.delete(p),Yv(f,b)}var Z0;Z0=function(f,p,b){if(f!==null)if(f.memoizedProps!==p.pendingProps||yi.current)Ki=!0;else{if((f.lanes&b)===0&&(p.flags&128)===0)return Ki=!1,V0(f,p,b);Ki=(f.flags&131072)!==0}else Ki=!1,Jr&&(p.flags&1048576)!==0&&jd(p,Id,p.index);switch(p.lanes=0,p.tag){case 2:var C=p.type;su(f,p),f=p.pendingProps;var N=Jl(p,ni.current);tu(p,b),N=Gd(null,p,C,f,N,b);var F=Qh();return p.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,ki(C)?(F=!0,Od(p)):F=!1,p.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Gh(p),N.updater=Kd,p.stateNode=N,N._reactInternals=p,op(p,C,f,b),p=Xd(null,p,C,!0,F,b)):(p.tag=0,Jr&&F&&Lh(p),_i(null,p,N,b),p=p.child),p;case 16:C=p.elementType;e:{switch(su(f,p),f=p.pendingProps,N=C._init,C=N(C._payload),p.type=C,N=p.tag=rM(C),f=Hi(C,f),N){case 0:p=cp(null,p,C,f,b);break e;case 1:p=Tv(null,p,C,f,b);break e;case 11:p=bv(null,p,C,f,b);break e;case 14:p=wv(null,p,C,Hi(C.type,f),b);break e}throw Error(r(306,C,""))}return p;case 0:return C=p.type,N=p.pendingProps,N=p.elementType===C?N:Hi(C,N),cp(f,p,C,N,b);case 1:return C=p.type,N=p.pendingProps,N=p.elementType===C?N:Hi(C,N),Tv(f,p,C,N,b);case 3:e:{if(Sv(p),f===null)throw Error(r(387));C=p.pendingProps,F=p.memoizedState,N=F.element,qh(f,p),Bd(p,C,null,b);var ne=p.memoizedState;if(C=ne.element,F.isDehydrated)if(F={element:C,isDehydrated:!1,cache:ne.cache,pendingSuspenseBoundaries:ne.pendingSuspenseBoundaries,transitions:ne.transitions},p.updateQueue.baseState=F,p.memoizedState=F,p.flags&256){N=iu(Error(r(423)),p),p=Pv(f,p,C,b,N);break e}else if(C!==N){N=iu(Error(r(424)),p),p=Pv(f,p,C,b,N);break e}else for(ji=Yo(p.stateNode.containerInfo.firstChild),Ii=p,Jr=!0,ss=null,b=Gg(p,null,C,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(qa(),C===N){p=ra(f,p,b);break e}_i(f,p,C,b)}p=p.child}return p;case 5:return Kg(p),f===null&&$d(p),C=p.type,N=p.pendingProps,F=f!==null?f.memoizedProps:null,ne=N.children,Oh(C,N)?ne=null:F!==null&&Oh(C,F)&&(p.flags|=32),up(f,p),_i(f,p,ne,b),p.child;case 6:return f===null&&$d(p),null;case 13:return Ev(f,p,b);case 4:return Hh(p,p.stateNode.containerInfo),C=p.pendingProps,f===null?p.child=Ha(p,null,C,b):_i(f,p,C,b),p.child;case 11:return C=p.type,N=p.pendingProps,N=p.elementType===C?N:Hi(C,N),bv(f,p,C,N,b);case 7:return _i(f,p,p.pendingProps,b),p.child;case 8:return _i(f,p,p.pendingProps.children,b),p.child;case 12:return _i(f,p,p.pendingProps.children,b),p.child;case 10:e:{if(C=p.type._context,N=p.pendingProps,F=p.memoizedProps,ne=N.value,Br(Dd,C._currentValue),C._currentValue=ne,F!==null)if(vi(F.value,ne)){if(F.children===N.children&&!yi.current){p=ra(f,p,b);break e}}else for(F=p.child,F!==null&&(F.return=p);F!==null;){var O=F.dependencies;if(O!==null){ne=F.child;for(var k=O.firstContext;k!==null;){if(k.context===C){if(F.tag===1){k=yo(-1,b&-b),k.tag=2;var H=F.updateQueue;if(H!==null){H=H.shared;var fe=H.pending;fe===null?k.next=k:(k.next=fe.next,fe.next=k),H.pending=k}}F.lanes|=b,k=F.alternate,k!==null&&(k.lanes|=b),Vh(F.return,b,p),O.lanes|=b;break}k=k.next}}else if(F.tag===10)ne=F.type===p.type?null:F.child;else if(F.tag===18){if(ne=F.return,ne===null)throw Error(r(341));ne.lanes|=b,O=ne.alternate,O!==null&&(O.lanes|=b),Vh(ne,b,p),ne=F.sibling}else ne=F.child;if(ne!==null)ne.return=F;else for(ne=F;ne!==null;){if(ne===p){ne=null;break}if(F=ne.sibling,F!==null){F.return=ne.return,ne=F;break}ne=ne.return}F=ne}_i(f,p,N.children,b),p=p.child}return p;case 9:return N=p.type,C=p.pendingProps.children,tu(p,b),N=Gi(N),C=C(N),p.flags|=1,_i(f,p,C,b),p.child;case 14:return C=p.type,N=Hi(C,p.pendingProps),N=Hi(C.type,N),wv(f,p,C,N,b);case 15:return xv(f,p,p.type,p.pendingProps,b);case 17:return C=p.type,N=p.pendingProps,N=p.elementType===C?N:Hi(C,N),su(f,p),p.tag=1,ki(C)?(f=!0,Od(p)):f=!1,tu(p,b),B0(p,C,N),op(p,C,N,b),Xd(null,p,C,!0,f,b);case 19:return hp(f,p,b);case 22:return Mv(f,p,b)}throw Error(r(156,p.tag))};function eb(f,p){return ts(f,p)}function tM(f,p,b,C){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(f,p,b,C){return new tM(f,p,b,C)}function Qv(f){return f=f.prototype,!(!f||!f.isReactComponent)}function rM(f){if(typeof f=="function")return Qv(f)?1:0;if(f!=null){if(f=f.$$typeof,f===G)return 11;if(f===J)return 14}return 2}function il(f,p){var b=f.alternate;return b===null?(b=Ps(f.tag,p,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=p,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&14680064,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,p=f.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b}function Ap(f,p,b,C,N,F){var ne=2;if(C=f,typeof f=="function")Qv(f)&&(ne=1);else if(typeof f=="string")ne=5;else e:switch(f){case E:return hu(b.children,N,F,p);case A:ne=8,N|=8;break;case L:return f=Ps(12,b,p,N|2),f.elementType=L,f.lanes=F,f;case z:return f=Ps(13,b,p,N),f.elementType=z,f.lanes=F,f;case K:return f=Ps(19,b,p,N),f.elementType=K,f.lanes=F,f;case Q:return Op(b,N,F,p);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case B:ne=10;break e;case V:ne=9;break e;case G:ne=11;break e;case J:ne=14;break e;case X:ne=16,C=null;break e}throw Error(r(130,f==null?f:typeof f,""))}return p=Ps(ne,b,p,N),p.elementType=f,p.type=C,p.lanes=F,p}function hu(f,p,b,C){return f=Ps(7,f,C,p),f.lanes=b,f}function Op(f,p,b,C){return f=Ps(22,f,C,p),f.elementType=Q,f.lanes=b,f.stateNode={isHidden:!1},f}function Jv(f,p,b){return f=Ps(6,f,null,p),f.lanes=b,f}function Zv(f,p,b){return p=Ps(4,f.children!==null?f.children:[],f.key,p),p.lanes=b,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}function nM(f,p,b,C,N){this.tag=p,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ke(0),this.expirationTimes=ke(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.identifierPrefix=C,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function ey(f,p,b,C,N,F,ne,O,k){return f=new nM(f,p,b,O,k),p===1?(p=1,F===!0&&(p|=8)):p=0,F=Ps(3,null,null,p),f.current=F,F.stateNode=f,F.memoizedState={element:C,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gh(F),f}function iM(f,p,b){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:C==null?null:""+C,children:f,containerInfo:p,implementation:b}}function tb(f){if(!f)return Qo;f=f._reactInternals;e:{if(Wn(f)!==f||f.tag!==1)throw Error(r(170));var p=f;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(ki(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(r(171))}if(f.tag===1){var b=f.type;if(ki(b))return Ng(f,b,p)}return p}function rb(f,p,b,C,N,F,ne,O,k){return f=ey(b,C,!0,f,N,F,ne,O,k),f.context=tb(null),b=f.current,C=wi(),N=bo(b),F=yo(C,N),F.callback=p??null,ea(b,F,N),f.current.lanes=N,q(f,N,C),Yi(f,C),f}function kp(f,p,b,C){var N=p.current,F=wi(),ne=bo(N);return b=tb(b),p.context===null?p.context=b:p.pendingContext=b,p=yo(F,ne),p.payload={element:f},C=C===void 0?null:C,C!==null&&(p.callback=C),f=ea(N,p,ne),f!==null&&(ls(f,N,ne,F),cc(f,N,ne)),ne}function Ip(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function nb(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<p?b:p}}function ty(f,p){nb(f,p),(f=f.alternate)&&nb(f,p)}function sM(){return null}var ib=typeof reportError=="function"?reportError:function(f){console.error(f)};function ry(f){this._internalRoot=f}jp.prototype.render=ry.prototype.render=function(f){var p=this._internalRoot;if(p===null)throw Error(r(409));kp(f,p,null,null)},jp.prototype.unmount=ry.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var p=f.containerInfo;nl(function(){kp(null,f,null,null)}),p[ho]=null}};function jp(f){this._internalRoot=f}jp.prototype.unstable_scheduleHydration=function(f){if(f){var p=vt();f={blockedOn:null,target:f,priority:p};for(var b=0;b<Ar.length&&p!==0&&p<Ar[b].priority;b++);Ar.splice(b,0,f),b===0&&En(f)}};function ny(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function $p(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function sb(){}function oM(f,p,b,C,N){if(N){if(typeof C=="function"){var F=C;C=function(){var H=Ip(ne);F.call(H)}}var ne=rb(p,C,f,0,null,!1,!1,"",sb);return f._reactRootContainer=ne,f[ho]=ne.current,sc(f.nodeType===8?f.parentNode:f),nl(),ne}for(;N=f.lastChild;)f.removeChild(N);if(typeof C=="function"){var O=C;C=function(){var H=Ip(k);O.call(H)}}var k=ey(f,0,!1,null,null,!1,!1,"",sb);return f._reactRootContainer=k,f[ho]=k.current,sc(f.nodeType===8?f.parentNode:f),nl(function(){kp(p,k,b,C)}),k}function Np(f,p,b,C,N){var F=b._reactRootContainer;if(F){var ne=F;if(typeof N=="function"){var O=N;N=function(){var k=Ip(ne);O.call(k)}}kp(p,ne,f,N)}else ne=oM(b,p,f,N,C);return Ip(ne)}Ke=function(f){switch(f.tag){case 3:var p=f.stateNode;if(p.current.memoizedState.isDehydrated){var b=Ui(p.pendingLanes);b!==0&&(_e(p,b|1),Yi(p,nt()),(gr&6)===0&&(uu=nt()+500,Jo()))}break;case 13:nl(function(){var C=vo(f,1);if(C!==null){var N=wi();ls(C,f,1,N)}}),ty(f,1)}},ft=function(f){if(f.tag===13){var p=vo(f,134217728);if(p!==null){var b=wi();ls(p,f,134217728,b)}ty(f,134217728)}},mt=function(f){if(f.tag===13){var p=bo(f),b=vo(f,p);if(b!==null){var C=wi();ls(b,f,p,C)}ty(f,p)}},vt=function(){return ve},ut=function(f,p){var b=ve;try{return ve=f,p()}finally{ve=b}},se=function(f,p,b){switch(p){case"input":if(Le(f,b),p=b.name,b.type==="radio"&&p!=null){for(b=f;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<b.length;p++){var C=b[p];if(C!==f&&C.form===f.form){var N=Cd(C);if(!N)throw Error(r(90));ue(C),Le(C,N)}}}break;case"textarea":lt(f,b);break;case"select":p=b.value,p!=null&&et(f,!!b.multiple,p,!1)}},bt=Pp,wt=nl;var aM={usingClientEntryPoint:!1,Events:[Xl,Yl,Cd,Be,Nt,Pp]},uf={findFiberByHostInstance:za,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wt={bundleType:uf.bundleType,version:uf.version,rendererPackageName:uf.rendererPackageName,rendererConfig:uf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=Ur(f),f===null?null:f.stateNode},findFiberByHostInstance:uf.findFiberByHostInstance||sM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{_s=cf.inject(Wt),mi=cf}catch{}}return Es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aM,Es.createPortal=function(f,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ny(p))throw Error(r(200));return iM(f,p,null,b)},Es.createRoot=function(f,p){if(!ny(f))throw Error(r(299));var b=!1,C="",N=ib;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onRecoverableError!==void 0&&(N=p.onRecoverableError)),p=ey(f,1,!1,null,null,b,!1,C,N),f[ho]=p.current,sc(f.nodeType===8?f.parentNode:f),new ry(p)},Es.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=Ur(p),f=f===null?null:f.stateNode,f},Es.flushSync=function(f){return nl(f)},Es.hydrate=function(f,p,b){if(!$p(p))throw Error(r(200));return Np(null,f,p,!0,b)},Es.hydrateRoot=function(f,p,b){if(!ny(f))throw Error(r(405));var C=b!=null&&b.hydratedSources||null,N=!1,F="",ne=ib;if(b!=null&&(b.unstable_strictMode===!0&&(N=!0),b.identifierPrefix!==void 0&&(F=b.identifierPrefix),b.onRecoverableError!==void 0&&(ne=b.onRecoverableError)),p=rb(p,null,f,1,b??null,N,!1,F,ne),f[ho]=p.current,sc(f),C)for(f=0;f<C.length;f++)b=C[f],N=b._getVersion,N=N(b._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[b,N]:p.mutableSourceEagerHydrationData.push(b,N);return new jp(p)},Es.render=function(f,p,b){if(!$p(p))throw Error(r(200));return Np(null,f,p,!1,b)},Es.unmountComponentAtNode=function(f){if(!$p(f))throw Error(r(40));return f._reactRootContainer?(nl(function(){Np(null,null,f,!1,function(){f._reactRootContainer=null,f[ho]=null})}),!0):!1},Es.unstable_batchedUpdates=Pp,Es.unstable_renderSubtreeIntoContainer=function(f,p,b,C){if(!$p(b))throw Error(r(200));if(f==null||f._reactInternals===void 0)throw Error(r(38));return Np(f,p,b,!1,C)},Es.version="18.3.1-next-f1338f8080-20240426",Es}var k$;function q5(){if(k$)return gM.exports;k$=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),gM.exports=$ee(),gM.exports}var I$;function Nee(){if(I$)return db;I$=1;var e=q5();return db.createRoot=e.createRoot,db.hydrateRoot=e.hydrateRoot,db}var Dee=Nee(),$=r2();const ye=Dr($),H5=Cee({__proto__:null,default:ye},[$]),Ree=1,Lee=1e6;let _M=0;function Fee(){return _M=(_M+1)%Number.MAX_SAFE_INTEGER,_M.toString()}const bM=new Map,j$=e=>{if(bM.has(e))return;const t=setTimeout(()=>{bM.delete(e),zy({type:"REMOVE_TOAST",toastId:e})},Lee);bM.set(e,t)},Bee=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Ree)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?j$(r):e.toasts.forEach(n=>{j$(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},lw=[];let uw={toasts:[]};function zy(e){uw=Bee(uw,e),lw.forEach(t=>{t(uw)})}function zee({...e}){const t=Fee(),r=i=>zy({type:"UPDATE_TOAST",toast:{...i,id:t}}),n=()=>zy({type:"DISMISS_TOAST",toastId:t});return zy({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||n()}}}),{id:t,dismiss:n,update:r}}function ro(){const[e,t]=$.useState(uw);return $.useEffect(()=>(lw.push(t),()=>{const r=lw.indexOf(t);r>-1&&lw.splice(r,1)}),[e]),{...e,toast:zee,dismiss:r=>zy({type:"DISMISS_TOAST",toastId:r})}}var tg=q5();const K5=Dr(tg);function Ut(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e?.(i),r===!1||!i.defaultPrevented)return t?.(i)}}function Uee(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function X5(...e){return t=>e.forEach(r=>Uee(r,t))}function tn(...e){return $.useCallback(X5(...e),e)}function Vee(e,t=[]){let r=[];function n(s,o){const a=$.createContext(o),l=r.length;r=[...r,o];function u(d){const{scope:h,children:m,...g}=d,v=h?.[e][l]||a,y=$.useMemo(()=>g,Object.values(g));return _.jsx(v.Provider,{value:y,children:m})}function c(d,h){const m=h?.[e][l]||a,g=$.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const i=()=>{const s=r.map(o=>$.createContext(o));return function(a){const l=a?.[e]||s;return $.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[n,Wee(i,...t)]}function Wee(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=n.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return $.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var Kf=$.forwardRef((e,t)=>{const{children:r,...n}=e,i=$.Children.toArray(r),s=i.find(Gee);if(s){const o=s.props.children,a=i.map(l=>l===s?$.Children.count(o)>1?$.Children.only(null):$.isValidElement(o)?o.props.children:null:l);return _.jsx(pA,{...n,ref:t,children:$.isValidElement(o)?$.cloneElement(o,void 0,a):null})}return _.jsx(pA,{...n,ref:t,children:r})});Kf.displayName="Slot";var pA=$.forwardRef((e,t)=>{const{children:r,...n}=e;if($.isValidElement(r)){const i=Hee(r);return $.cloneElement(r,{...qee(n,r.props),ref:t?X5(t,i):i})}return $.Children.count(r)>1?$.Children.only(null):null});pA.displayName="SlotClone";var Y5=({children:e})=>_.jsx(_.Fragment,{children:e});function Gee(e){return $.isValidElement(e)&&e.type===Y5}function qee(e,t){const r={...t};for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...a)=>{s(...a),i(...a)}:i&&(r[n]=i):n==="style"?r[n]={...i,...s}:n==="className"&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}function Hee(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function n2(e){const t=e+"CollectionProvider",[r,n]=Vee(t),[i,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:g,children:v}=m,y=ye.useRef(null),x=ye.useRef(new Map).current;return _.jsx(i,{scope:g,itemMap:x,collectionRef:y,children:v})};o.displayName=t;const a=e+"CollectionSlot",l=ye.forwardRef((m,g)=>{const{scope:v,children:y}=m,x=s(a,v),w=tn(g,x.collectionRef);return _.jsx(Kf,{ref:w,children:y})});l.displayName=a;const u=e+"CollectionItemSlot",c="data-radix-collection-item",d=ye.forwardRef((m,g)=>{const{scope:v,children:y,...x}=m,w=ye.useRef(null),S=tn(g,w),M=s(u,v);return ye.useEffect(()=>(M.itemMap.set(w,{ref:w,...x}),()=>void M.itemMap.delete(w))),_.jsx(Kf,{[c]:"",ref:S,children:y})});d.displayName=u;function h(m){const g=s(e+"CollectionConsumer",m);return ye.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const x=Array.from(y.querySelectorAll(`[${c}]`));return Array.from(g.itemMap.values()).sort((M,T)=>x.indexOf(M.ref.current)-x.indexOf(T.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,n]}function Kee(e,t){const r=$.createContext(t),n=s=>{const{children:o,...a}=s,l=$.useMemo(()=>a,Object.values(a));return _.jsx(r.Provider,{value:l,children:o})};n.displayName=e+"Provider";function i(s){const o=$.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[n,i]}function oh(e,t=[]){let r=[];function n(s,o){const a=$.createContext(o),l=r.length;r=[...r,o];const u=d=>{const{scope:h,children:m,...g}=d,v=h?.[e]?.[l]||a,y=$.useMemo(()=>g,Object.values(g));return _.jsx(v.Provider,{value:y,children:m})};u.displayName=s+"Provider";function c(d,h){const m=h?.[e]?.[l]||a,g=$.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[u,c]}const i=()=>{const s=r.map(o=>$.createContext(o));return function(a){const l=a?.[e]||s;return $.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[n,Xee(i,...t)]}function Xee(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=n.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return $.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var Yee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Qt=Yee.reduce((e,t)=>{const r=$.forwardRef((n,i)=>{const{asChild:s,...o}=n,a=s?Kf:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(a,{...o,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Q5(e,t){e&&tg.flushSync(()=>e.dispatchEvent(t))}function gs(e){const t=$.useRef(e);return $.useEffect(()=>{t.current=e}),$.useMemo(()=>(...r)=>t.current?.(...r),[])}function Qee(e,t=globalThis?.document){const r=gs(e);$.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Jee="DismissableLayer",mA="dismissableLayer.update",Zee="dismissableLayer.pointerDownOutside",ete="dismissableLayer.focusOutside",$$,J5=$.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),i0=$.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=e,u=$.useContext(J5),[c,d]=$.useState(null),h=c?.ownerDocument??globalThis?.document,[,m]=$.useState({}),g=tn(t,E=>d(E)),v=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(y),w=c?v.indexOf(c):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,M=w>=x,T=rte(E=>{const A=E.target,L=[...u.branches].some(B=>B.contains(A));!M||L||(i?.(E),o?.(E),E.defaultPrevented||a?.())},h),P=nte(E=>{const A=E.target;[...u.branches].some(B=>B.contains(A))||(s?.(E),o?.(E),E.defaultPrevented||a?.())},h);return Qee(E=>{w===u.layers.size-1&&(n?.(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},h),$.useEffect(()=>{if(c)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&($$=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),N$(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=$$)}},[c,h,r,u]),$.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),N$())},[c,u]),$.useEffect(()=>{const E=()=>m({});return document.addEventListener(mA,E),()=>document.removeEventListener(mA,E)},[]),_.jsx(Qt.div,{...l,ref:g,style:{pointerEvents:S?M?"auto":"none":void 0,...e.style},onFocusCapture:Ut(e.onFocusCapture,P.onFocusCapture),onBlurCapture:Ut(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Ut(e.onPointerDownCapture,T.onPointerDownCapture)})});i0.displayName=Jee;var tte="DismissableLayerBranch",Z5=$.forwardRef((e,t)=>{const r=$.useContext(J5),n=$.useRef(null),i=tn(t,n);return $.useEffect(()=>{const s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),_.jsx(Qt.div,{...e,ref:i})});Z5.displayName=tte;function rte(e,t=globalThis?.document){const r=gs(e),n=$.useRef(!1),i=$.useRef(()=>{});return $.useEffect(()=>{const s=a=>{if(a.target&&!n.current){let l=function(){e8(Zee,r,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function nte(e,t=globalThis?.document){const r=gs(e),n=$.useRef(!1);return $.useEffect(()=>{const i=s=>{s.target&&!n.current&&e8(ete,r,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function N$(){const e=new CustomEvent(mA);document.dispatchEvent(e)}function e8(e,t,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?Q5(i,s):i.dispatchEvent(s)}var ite=i0,ste=Z5,Ti=globalThis?.document?$.useLayoutEffect:()=>{},ote="Portal",Vx=$.forwardRef((e,t)=>{const{container:r,...n}=e,[i,s]=$.useState(!1);Ti(()=>s(!0),[]);const o=r||i&&globalThis?.document?.body;return o?K5.createPortal(_.jsx(Qt.div,{...n,ref:t}),o):null});Vx.displayName=ote;function ate(e,t){return $.useReducer((r,n)=>t[r][n]??r,e)}var Qc=e=>{const{present:t,children:r}=e,n=lte(t),i=typeof r=="function"?r({present:n.isPresent}):$.Children.only(r),s=tn(n.ref,ute(i));return typeof r=="function"||n.isPresent?$.cloneElement(i,{ref:s}):null};Qc.displayName="Presence";function lte(e){const[t,r]=$.useState(),n=$.useRef({}),i=$.useRef(e),s=$.useRef("none"),o=e?"mounted":"unmounted",[a,l]=ate(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return $.useEffect(()=>{const u=fb(n.current);s.current=a==="mounted"?u:"none"},[a]),Ti(()=>{const u=n.current,c=i.current;if(c!==e){const h=s.current,m=fb(u);e?l("MOUNT"):m==="none"||u?.display==="none"?l("UNMOUNT"):l(c&&h!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),Ti(()=>{if(t){let u;const c=t.ownerDocument.defaultView??window,d=m=>{const v=fb(n.current).includes(m.animationName);if(m.target===t&&v&&(l("ANIMATION_END"),!i.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=c.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=m=>{m.target===t&&(s.current=fb(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{c.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:$.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function fb(e){return e?.animationName||"none"}function ute(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Xf({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,i]=cte({defaultProp:t,onChange:r}),s=e!==void 0,o=s?e:n,a=gs(r),l=$.useCallback(u=>{if(s){const d=typeof u=="function"?u(e):u;d!==e&&a(d)}else i(u)},[s,e,i,a]);return[o,l]}function cte({defaultProp:e,onChange:t}){const r=$.useState(e),[n]=r,i=$.useRef(n),s=gs(t);return $.useEffect(()=>{i.current!==n&&(s(n),i.current=n)},[n,i,s]),r}var dte="VisuallyHidden",s0=$.forwardRef((e,t)=>_.jsx(Qt.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));s0.displayName=dte;var fte=s0,i2="ToastProvider",[s2,hte,pte]=n2("Toast"),[t8]=oh("Toast",[pte]),[mte,Wx]=t8(i2),r8=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=e,[a,l]=$.useState(null),[u,c]=$.useState(0),d=$.useRef(!1),h=$.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${i2}\`. Expected non-empty \`string\`.`),_.jsx(s2.Provider,{scope:t,children:_.jsx(mte,{scope:t,label:r,duration:n,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:$.useCallback(()=>c(m=>m+1),[]),onToastRemove:$.useCallback(()=>c(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};r8.displayName=i2;var n8="ToastViewport",gte=["F8"],gA="toast.viewportPause",vA="toast.viewportResume",i8=$.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=gte,label:i="Notifications ({hotkey})",...s}=e,o=Wx(n8,r),a=hte(r),l=$.useRef(null),u=$.useRef(null),c=$.useRef(null),d=$.useRef(null),h=tn(t,d,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;$.useEffect(()=>{const y=x=>{n.length!==0&&n.every(S=>x[S]||x.code===S)&&d.current?.focus()};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),$.useEffect(()=>{const y=l.current,x=d.current;if(g&&y&&x){const w=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(gA);x.dispatchEvent(P),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(vA);x.dispatchEvent(P),o.isClosePausedRef.current=!1}},M=P=>{!y.contains(P.relatedTarget)&&S()},T=()=>{y.contains(document.activeElement)||S()};return y.addEventListener("focusin",w),y.addEventListener("focusout",M),y.addEventListener("pointermove",w),y.addEventListener("pointerleave",T),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{y.removeEventListener("focusin",w),y.removeEventListener("focusout",M),y.removeEventListener("pointermove",w),y.removeEventListener("pointerleave",T),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[g,o.isClosePausedRef]);const v=$.useCallback(({tabbingDirection:y})=>{const w=a().map(S=>{const M=S.ref.current,T=[M,...Ate(M)];return y==="forwards"?T:T.reverse()});return(y==="forwards"?w.reverse():w).flat()},[a]);return $.useEffect(()=>{const y=d.current;if(y){const x=w=>{const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const T=document.activeElement,P=w.shiftKey;if(w.target===y&&P){u.current?.focus();return}const L=v({tabbingDirection:P?"backwards":"forwards"}),B=L.findIndex(V=>V===T);wM(L.slice(B+1))?w.preventDefault():P?u.current?.focus():c.current?.focus()}};return y.addEventListener("keydown",x),()=>y.removeEventListener("keydown",x)}},[a,v]),_.jsxs(ste,{ref:l,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&_.jsx(yA,{ref:u,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"forwards"});wM(y)}}),_.jsx(s2.Slot,{scope:r,children:_.jsx(Qt.ol,{tabIndex:-1,...s,ref:h})}),g&&_.jsx(yA,{ref:c,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"backwards"});wM(y)}})]})});i8.displayName=n8;var s8="ToastFocusProxy",yA=$.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=e,s=Wx(s8,r);return _.jsx(s0,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{const a=o.relatedTarget;!s.viewport?.contains(a)&&n()}})});yA.displayName=s8;var Gx="Toast",vte="toast.swipeStart",yte="toast.swipeMove",_te="toast.swipeCancel",bte="toast.swipeEnd",o8=$.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:s,...o}=e,[a=!0,l]=Xf({prop:n,defaultProp:i,onChange:s});return _.jsx(Qc,{present:r||a,children:_.jsx(Mte,{open:a,...o,ref:t,onClose:()=>l(!1),onPause:gs(e.onPause),onResume:gs(e.onResume),onSwipeStart:Ut(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ut(e.onSwipeMove,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Ut(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ut(e.onSwipeEnd,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});o8.displayName=Gx;var[wte,xte]=t8(Gx,{onClose(){}}),Mte=$.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:m,...g}=e,v=Wx(Gx,r),[y,x]=$.useState(null),w=tn(t,K=>x(K)),S=$.useRef(null),M=$.useRef(null),T=i||v.duration,P=$.useRef(0),E=$.useRef(T),A=$.useRef(0),{onToastAdd:L,onToastRemove:B}=v,V=gs(()=>{y?.contains(document.activeElement)&&v.viewport?.focus(),o()}),G=$.useCallback(K=>{!K||K===1/0||(window.clearTimeout(A.current),P.current=new Date().getTime(),A.current=window.setTimeout(V,K))},[V]);$.useEffect(()=>{const K=v.viewport;if(K){const J=()=>{G(E.current),u?.()},X=()=>{const Q=new Date().getTime()-P.current;E.current=E.current-Q,window.clearTimeout(A.current),l?.()};return K.addEventListener(gA,X),K.addEventListener(vA,J),()=>{K.removeEventListener(gA,X),K.removeEventListener(vA,J)}}},[v.viewport,T,l,u,G]),$.useEffect(()=>{s&&!v.isClosePausedRef.current&&G(T)},[s,T,v.isClosePausedRef,G]),$.useEffect(()=>(L(),()=>B()),[L,B]);const z=$.useMemo(()=>y?h8(y):null,[y]);return v.viewport?_.jsxs(_.Fragment,{children:[z&&_.jsx(Tte,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),_.jsx(wte,{scope:r,onClose:V,children:tg.createPortal(_.jsx(s2.ItemSlot,{scope:r,children:_.jsx(ite,{asChild:!0,onEscapeKeyDown:Ut(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||V(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:_.jsx(Qt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ut(e.onKeyDown,K=>{K.key==="Escape"&&(a?.(K.nativeEvent),K.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,V()))}),onPointerDown:Ut(e.onPointerDown,K=>{K.button===0&&(S.current={x:K.clientX,y:K.clientY})}),onPointerMove:Ut(e.onPointerMove,K=>{if(!S.current)return;const J=K.clientX-S.current.x,X=K.clientY-S.current.y,Q=!!M.current,W=["left","right"].includes(v.swipeDirection),oe=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,ce=W?oe(0,J):0,D=W?0:oe(0,X),U=K.pointerType==="touch"?10:2,te={x:ce,y:D},ee={originalEvent:K,delta:te};Q?(M.current=te,hb(yte,d,ee,{discrete:!1})):D$(te,v.swipeDirection,U)?(M.current=te,hb(vte,c,ee,{discrete:!1}),K.target.setPointerCapture(K.pointerId)):(Math.abs(J)>U||Math.abs(X)>U)&&(S.current=null)}),onPointerUp:Ut(e.onPointerUp,K=>{const J=M.current,X=K.target;if(X.hasPointerCapture(K.pointerId)&&X.releasePointerCapture(K.pointerId),M.current=null,S.current=null,J){const Q=K.currentTarget,W={originalEvent:K,delta:J};D$(J,v.swipeDirection,v.swipeThreshold)?hb(bte,m,W,{discrete:!0}):hb(_te,h,W,{discrete:!0}),Q.addEventListener("click",oe=>oe.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),Tte=e=>{const{__scopeToast:t,children:r,...n}=e,i=Wx(Gx,t),[s,o]=$.useState(!1),[a,l]=$.useState(!1);return Ete(()=>o(!0)),$.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:_.jsx(Vx,{asChild:!0,children:_.jsx(s0,{...n,children:s&&_.jsxs(_.Fragment,{children:[i.label," ",r]})})})},Ste="ToastTitle",a8=$.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return _.jsx(Qt.div,{...n,ref:t})});a8.displayName=Ste;var Pte="ToastDescription",l8=$.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return _.jsx(Qt.div,{...n,ref:t})});l8.displayName=Pte;var u8="ToastAction",c8=$.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?_.jsx(f8,{altText:r,asChild:!0,children:_.jsx(o2,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${u8}\`. Expected non-empty \`string\`.`),null)});c8.displayName=u8;var d8="ToastClose",o2=$.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,i=xte(d8,r);return _.jsx(f8,{asChild:!0,children:_.jsx(Qt.button,{type:"button",...n,ref:t,onClick:Ut(e.onClick,i.onClose)})})});o2.displayName=d8;var f8=$.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...i}=e;return _.jsx(Qt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:t})});function h8(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),Cte(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",s=n.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...h8(n))}}),t}function hb(e,t,r,{discrete:n}){const i=r.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?Q5(i,s):i.dispatchEvent(s)}var D$=(e,t,r=0)=>{const n=Math.abs(e.x),i=Math.abs(e.y),s=n>i;return t==="left"||t==="right"?s&&n>r:!s&&i>r};function Ete(e=()=>{}){const t=gs(e);Ti(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function Cte(e){return e.nodeType===e.ELEMENT_NODE}function Ate(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function wM(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var Ote=r8,p8=i8,m8=o8,g8=a8,v8=l8,y8=c8,_8=o2;function b8(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=b8(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function br(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=b8(e))&&(n&&(n+=" "),n+=t);return n}const R$=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,L$=br,o0=(e,t)=>r=>{var n;if(t?.variants==null)return L$(e,r?.class,r?.className);const{variants:i,defaultVariants:s}=t,o=Object.keys(i).map(u=>{const c=r?.[u],d=s?.[u];if(c===null)return null;const h=R$(c)||R$(d);return i[u][h]}),a=r&&Object.entries(r).reduce((u,c)=>{let[d,h]=c;return h===void 0||(u[d]=h),u},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,c)=>{let{class:d,className:h,...m}=c;return Object.entries(m).every(g=>{let[v,y]=g;return Array.isArray(y)?y.includes({...s,...a}[v]):{...s,...a}[v]===y})?[...u,d,h]:u},[]);return L$(e,o,l,r?.class,r?.className)};const kte=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),w8=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();var Ite={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const jte=$.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:o,...a},l)=>$.createElement("svg",{ref:l,...Ite,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:w8("lucide",i),...a},[...o.map(([u,c])=>$.createElement(u,c)),...Array.isArray(s)?s:[s]]));const cr=(e,t)=>{const r=$.forwardRef(({className:n,...i},s)=>$.createElement(jte,{ref:s,iconNode:t,className:w8(`lucide-${kte(e)}`,n),...i}));return r.displayName=`${e}`,r};const Eu=cr("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const a2=cr("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const $te=cr("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const qx=cr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const x8=cr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Nte=cr("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const M8=cr("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Dte=cr("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const xM=cr("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);const Rte=cr("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const Lte=cr("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const i_=cr("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const Fte=cr("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const Bte=cr("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const T8=cr("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const F$=cr("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const zte=cr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Ute=cr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Vte=cr("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Sw=cr("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const Wte=cr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const cw=cr("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const l2=cr("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const S8=cr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const B$=cr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Gte=cr("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);const qte=cr("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);const Hte=cr("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);const Do=cr("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const P8=cr("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);const Pw=cr("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const Kte=cr("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Xte=cr("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);const E8=cr("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);const s_=cr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Yte=cr("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const u2=cr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const C8=cr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),c2="-",Qte=e=>{const t=Zte(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const a=o.split(c2);return a[0]===""&&a.length!==1&&a.shift(),A8(a,t)||Jte(o)},getConflictingClassGroupIds:(o,a)=>{const l=r[o]||[];return a&&n[o]?[...l,...n[o]]:l}}},A8=(e,t)=>{if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?A8(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(c2);return t.validators.find(({validator:o})=>o(s))?.classGroupId},z$=/^\[(.+)\]$/,Jte=e=>{if(z$.test(e)){const t=z$.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Zte=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return tre(Object.entries(e.classGroups),r).forEach(([s,o])=>{_A(o,n,s,t)}),n},_A=(e,t,r,n)=>{e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:U$(t,i);s.classGroupId=r;return}if(typeof i=="function"){if(ere(i)){_A(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([s,o])=>{_A(o,U$(t,s),r,n)})})},U$=(e,t)=>{let r=e;return t.split(c2).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},ere=e=>e.isThemeGetter,tre=(e,t)=>t?e.map(([r,n])=>{const i=n.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[t+o,a])):s);return[r,i]}):e,rre=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(s,o)=>{r.set(s,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(s){let o=r.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return i(s,o),o},set(s,o){r.has(s)?r.set(s,o):i(s,o)}}},O8="!",nre=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],s=t.length,o=a=>{const l=[];let u=0,c=0,d;for(let y=0;y<a.length;y++){let x=a[y];if(u===0){if(x===i&&(n||a.slice(y,y+s)===t)){l.push(a.slice(c,y)),c=y+s;continue}if(x==="/"){d=y;continue}}x==="["?u++:x==="]"&&u--}const h=l.length===0?a:a.substring(c),m=h.startsWith(O8),g=m?h.substring(1):h,v=d&&d>c?d-c:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}};return r?a=>r({className:a,parseClassName:o}):o},ire=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},sre=e=>({cache:rre(e.cacheSize),parseClassName:nre(e),...Qte(e)}),ore=/\s+/,are=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,s=[],o=e.trim().split(ore);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:c,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:m}=r(u);let g=!!m,v=n(g?h.substring(0,m):h);if(!v){if(!g){a=u+(a.length>0?" "+a:a);continue}if(v=n(h),!v){a=u+(a.length>0?" "+a:a);continue}g=!1}const y=ire(c).join(":"),x=d?y+O8:y,w=x+v;if(s.includes(w))continue;s.push(w);const S=i(v,g);for(let M=0;M<S.length;++M){const T=S[M];s.push(x+T)}a=u+(a.length>0?" "+a:a)}return a};function lre(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=k8(t))&&(n&&(n+=" "),n+=r);return n}const k8=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=k8(e[n]))&&(r&&(r+=" "),r+=t);return r};function ure(e,...t){let r,n,i,s=o;function o(l){const u=t.reduce((c,d)=>d(c),e());return r=sre(u),n=r.cache.get,i=r.cache.set,s=a,a(l)}function a(l){const u=n(l);if(u)return u;const c=are(l,r);return i(l,c),c}return function(){return s(lre.apply(null,arguments))}}const pn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},I8=/^\[(?:([a-z-]+):)?(.+)\]$/i,cre=/^\d+\/\d+$/,dre=new Set(["px","full","screen"]),fre=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hre=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,pre=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mre=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gre=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,pu=e=>hm(e)||dre.has(e)||cre.test(e),Pc=e=>rg(e,"length",Tre),hm=e=>!!e&&!Number.isNaN(Number(e)),MM=e=>rg(e,"number",hm),oy=e=>!!e&&Number.isInteger(Number(e)),vre=e=>e.endsWith("%")&&hm(e.slice(0,-1)),or=e=>I8.test(e),Ec=e=>fre.test(e),yre=new Set(["length","size","percentage"]),_re=e=>rg(e,yre,j8),bre=e=>rg(e,"position",j8),wre=new Set(["image","url"]),xre=e=>rg(e,wre,Pre),Mre=e=>rg(e,"",Sre),ay=()=>!0,rg=(e,t,r)=>{const n=I8.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},Tre=e=>hre.test(e)&&!pre.test(e),j8=()=>!1,Sre=e=>mre.test(e),Pre=e=>gre.test(e),Ere=()=>{const e=pn("colors"),t=pn("spacing"),r=pn("blur"),n=pn("brightness"),i=pn("borderColor"),s=pn("borderRadius"),o=pn("borderSpacing"),a=pn("borderWidth"),l=pn("contrast"),u=pn("grayscale"),c=pn("hueRotate"),d=pn("invert"),h=pn("gap"),m=pn("gradientColorStops"),g=pn("gradientColorStopPositions"),v=pn("inset"),y=pn("margin"),x=pn("opacity"),w=pn("padding"),S=pn("saturate"),M=pn("scale"),T=pn("sepia"),P=pn("skew"),E=pn("space"),A=pn("translate"),L=()=>["auto","contain","none"],B=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",or,t],G=()=>[or,t],z=()=>["",pu,Pc],K=()=>["auto",hm,or],J=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>["start","end","center","between","around","evenly","stretch"],oe=()=>["","0",or],ce=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>[hm,or];return{cacheSize:500,separator:":",theme:{colors:[ay],spacing:[pu,Pc],blur:["none","",Ec,or],brightness:D(),borderColor:[e],borderRadius:["none","","full",Ec,or],borderSpacing:G(),borderWidth:z(),contrast:D(),grayscale:oe(),hueRotate:D(),invert:oe(),gap:G(),gradientColorStops:[e],gradientColorStopPositions:[vre,Pc],inset:V(),margin:V(),opacity:D(),padding:G(),saturate:D(),scale:D(),sepia:oe(),skew:D(),space:G(),translate:G()},classGroups:{aspect:[{aspect:["auto","square","video",or]}],container:["container"],columns:[{columns:[Ec]}],"break-after":[{"break-after":ce()}],"break-before":[{"break-before":ce()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...J(),or]}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",oy,or]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",or]}],grow:[{grow:oe()}],shrink:[{shrink:oe()}],order:[{order:["first","last","none",oy,or]}],"grid-cols":[{"grid-cols":[ay]}],"col-start-end":[{col:["auto",{span:["full",oy,or]},or]}],"col-start":[{"col-start":K()}],"col-end":[{"col-end":K()}],"grid-rows":[{"grid-rows":[ay]}],"row-start-end":[{row:["auto",{span:[oy,or]},or]}],"row-start":[{"row-start":K()}],"row-end":[{"row-end":K()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",or]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",or]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...W()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...W(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...W(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",or,t]}],"min-w":[{"min-w":[or,t,"min","max","fit"]}],"max-w":[{"max-w":[or,t,"none","full","min","max","fit","prose",{screen:[Ec]},Ec]}],h:[{h:[or,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[or,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[or,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[or,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ec,Pc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",MM]}],"font-family":[{font:[ay]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",or]}],"line-clamp":[{"line-clamp":["none",hm,MM]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",pu,or]}],"list-image":[{"list-image":["none",or]}],"list-style-type":[{list:["none","disc","decimal",or]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",pu,Pc]}],"underline-offset":[{"underline-offset":["auto",pu,or]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:G()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",or]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",or]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...J(),bre]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_re]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},xre]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:X()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[pu,or]}],"outline-w":[{outline:[pu,Pc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[pu,Pc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ec,Mre]}],"shadow-color":[{shadow:[ay]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ec,or]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[S]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",or]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",or]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",or]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[oy,or]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",or]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",or]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":G()}],"scroll-mx":[{"scroll-mx":G()}],"scroll-my":[{"scroll-my":G()}],"scroll-ms":[{"scroll-ms":G()}],"scroll-me":[{"scroll-me":G()}],"scroll-mt":[{"scroll-mt":G()}],"scroll-mr":[{"scroll-mr":G()}],"scroll-mb":[{"scroll-mb":G()}],"scroll-ml":[{"scroll-ml":G()}],"scroll-p":[{"scroll-p":G()}],"scroll-px":[{"scroll-px":G()}],"scroll-py":[{"scroll-py":G()}],"scroll-ps":[{"scroll-ps":G()}],"scroll-pe":[{"scroll-pe":G()}],"scroll-pt":[{"scroll-pt":G()}],"scroll-pr":[{"scroll-pr":G()}],"scroll-pb":[{"scroll-pb":G()}],"scroll-pl":[{"scroll-pl":G()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",or]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[pu,Pc,MM]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Cre=ure(Ere);function Kt(...e){return Cre(br(e))}const Are=Ote,$8=$.forwardRef(({className:e,...t},r)=>_.jsx(p8,{ref:r,className:Kt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));$8.displayName=p8.displayName;const Ore=o0("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),N8=$.forwardRef(({className:e,variant:t,...r},n)=>_.jsx(m8,{ref:n,className:Kt(Ore({variant:t}),e),...r}));N8.displayName=m8.displayName;const kre=$.forwardRef(({className:e,...t},r)=>_.jsx(y8,{ref:r,className:Kt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));kre.displayName=y8.displayName;const D8=$.forwardRef(({className:e,...t},r)=>_.jsx(_8,{ref:r,className:Kt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:_.jsx(C8,{className:"h-4 w-4"})}));D8.displayName=_8.displayName;const R8=$.forwardRef(({className:e,...t},r)=>_.jsx(g8,{ref:r,className:Kt("text-sm font-semibold",e),...t}));R8.displayName=g8.displayName;const L8=$.forwardRef(({className:e,...t},r)=>_.jsx(v8,{ref:r,className:Kt("text-sm opacity-90",e),...t}));L8.displayName=v8.displayName;function Ire(){const{toasts:e}=ro();return _.jsxs(Are,{children:[e.map(function({id:t,title:r,description:n,action:i,...s}){return _.jsxs(N8,{...s,children:[_.jsxs("div",{className:"grid gap-1",children:[r&&_.jsx(R8,{children:r}),n&&_.jsx(L8,{children:n})]}),i,_.jsx(D8,{})]},t)}),_.jsx($8,{})]})}var V$=["light","dark"],jre="(prefers-color-scheme: dark)",$re=$.createContext(void 0),Nre={setTheme:e=>{},themes:[]},Dre=()=>{var e;return(e=$.useContext($re))!=null?e:Nre};$.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let u=s==="system",c=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,d=i?V$.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,v=!1,y=!0)=>{let x=o?o[g]:g,w=v?g+"|| ''":`'${x}'`,S="";return i&&y&&!v&&V$.includes(g)&&(S+=`d.style.colorScheme = '${g}';`),r==="class"?v||x?S+=`c.add(${w})`:S+="null":x&&(S+=`d[s](n,${w})`),S},m=e?`!function(){${c}${h(e)}}()`:n?`!function(){try{${c}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${jre}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${u?"":"else{"+h(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${c}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${d}}catch(t){}}();`;return $.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var Rre=e=>{switch(e){case"success":return Bre;case"info":return Ure;case"warning":return zre;case"error":return Vre;default:return null}},Lre=Array(12).fill(0),Fre=({visible:e})=>ye.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},ye.createElement("div",{className:"sonner-spinner"},Lre.map((t,r)=>ye.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Bre=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),zre=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Ure=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Vre=ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ye.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Wre=()=>{let[e,t]=ye.useState(document.hidden);return ye.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},bA=1,Gre=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let{message:n,...i}=t,s=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:bA++,o=this.toasts.find(l=>l.id===s),a=t.dismissible===void 0?!0:t.dismissible;return o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:n}),{...l,...t,id:s,dismissible:a,title:n}):l):this.addToast({title:n,...i,dismissible:a,id:s}),s},this.dismiss=t=>(t||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let i=t instanceof Promise?t:t(),s=n!==void 0;return i.then(async o=>{if(Hre(o)&&!o.ok){s=!1;let a=typeof r.error=="function"?await r.error(`HTTP error! status: ${o.status}`):r.error,l=typeof r.description=="function"?await r.description(`HTTP error! status: ${o.status}`):r.description;this.create({id:n,type:"error",message:a,description:l})}else if(r.success!==void 0){s=!1;let a=typeof r.success=="function"?await r.success(o):r.success,l=typeof r.description=="function"?await r.description(o):r.description;this.create({id:n,type:"success",message:a,description:l})}}).catch(async o=>{if(r.error!==void 0){s=!1;let a=typeof r.error=="function"?await r.error(o):r.error,l=typeof r.description=="function"?await r.description(o):r.description;this.create({id:n,type:"error",message:a,description:l})}}).finally(()=>{var o;s&&(this.dismiss(n),n=void 0),(o=r.finally)==null||o.call(r)}),n},this.custom=(t,r)=>{let n=r?.id||bA++;return this.create({jsx:t(n),id:n,...r}),n},this.subscribers=[],this.toasts=[]}},Ws=new Gre,qre=(e,t)=>{let r=t?.id||bA++;return Ws.addToast({title:e,...t,id:r}),r},Hre=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Kre=qre,Xre=()=>Ws.toasts;Object.assign(Kre,{success:Ws.success,info:Ws.info,warning:Ws.warning,error:Ws.error,custom:Ws.custom,message:Ws.message,promise:Ws.promise,dismiss:Ws.dismiss,loading:Ws.loading},{getHistory:Xre});function Yre(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Yre(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function pb(e){return e.label!==void 0}var Qre=3,Jre="32px",Zre=4e3,ene=356,tne=14,rne=20,nne=200;function ine(...e){return e.filter(Boolean).join(" ")}var sne=e=>{var t,r,n,i,s,o,a,l,u,c;let{invert:d,toast:h,unstyled:m,interacting:g,setHeights:v,visibleToasts:y,heights:x,index:w,toasts:S,expanded:M,removeToast:T,defaultRichColors:P,closeButton:E,style:A,cancelButtonStyle:L,actionButtonStyle:B,className:V="",descriptionClassName:G="",duration:z,position:K,gap:J,loadingIcon:X,expandByDefault:Q,classNames:W,icons:oe,closeButtonAriaLabel:ce="Close toast",pauseWhenPageIsHidden:D,cn:U}=e,[te,ee]=ye.useState(!1),[pe,Oe]=ye.useState(!1),[xe,Ie]=ye.useState(!1),[Pe,he]=ye.useState(!1),[re,ue]=ye.useState(0),[ae,Ce]=ye.useState(0),$e=ye.useRef(null),Ne=ye.useRef(null),Le=w===0,Ve=w+1<=y,He=h.type,Qe=h.dismissible!==!1,et=h.className||"",ot=h.descriptionClassName||"",Xe=ye.useMemo(()=>x.findIndex(Z=>Z.toastId===h.id)||0,[x,h.id]),lt=ye.useMemo(()=>{var Z;return(Z=h.closeButton)!=null?Z:E},[h.closeButton,E]),_t=ye.useMemo(()=>h.duration||z||Zre,[h.duration,z]),dt=ye.useRef(0),xt=ye.useRef(0),gt=ye.useRef(0),We=ye.useRef(null),[Ze,Pt]=K.split("-"),Zt=ye.useMemo(()=>x.reduce((Z,be,se)=>se>=Xe?Z:Z+be.height,0),[x,Xe]),Rt=Wre(),Kr=h.invert||d,gn=He==="loading";xt.current=ye.useMemo(()=>Xe*J+Zt,[Xe,Zt]),ye.useEffect(()=>{ee(!0)},[]),ye.useLayoutEffect(()=>{if(!te)return;let Z=Ne.current,be=Z.style.height;Z.style.height="auto";let se=Z.getBoundingClientRect().height;Z.style.height=be,Ce(se),v(we=>we.find(je=>je.toastId===h.id)?we.map(je=>je.toastId===h.id?{...je,height:se}:je):[{toastId:h.id,height:se,position:h.position},...we])},[te,h.title,h.description,v,h.id]);let jt=ye.useCallback(()=>{Oe(!0),ue(xt.current),v(Z=>Z.filter(be=>be.toastId!==h.id)),setTimeout(()=>{T(h)},nne)},[h,T,v,xt]);ye.useEffect(()=>{if(h.promise&&He==="loading"||h.duration===1/0||h.type==="loading")return;let Z,be=_t;return M||g||D&&Rt?(()=>{if(gt.current<dt.current){let se=new Date().getTime()-dt.current;be=be-se}gt.current=new Date().getTime()})():be!==1/0&&(dt.current=new Date().getTime(),Z=setTimeout(()=>{var se;(se=h.onAutoClose)==null||se.call(h,h),jt()},be)),()=>clearTimeout(Z)},[M,g,Q,h,_t,jt,h.promise,He,D,Rt]),ye.useEffect(()=>{let Z=Ne.current;if(Z){let be=Z.getBoundingClientRect().height;return Ce(be),v(se=>[{toastId:h.id,height:be,position:h.position},...se]),()=>v(se=>se.filter(we=>we.toastId!==h.id))}},[v,h.id]),ye.useEffect(()=>{h.delete&&jt()},[jt,h.delete]);function hi(){return oe!=null&&oe.loading?ye.createElement("div",{className:"sonner-loader","data-visible":He==="loading"},oe.loading):X?ye.createElement("div",{className:"sonner-loader","data-visible":He==="loading"},X):ye.createElement(Fre,{visible:He==="loading"})}return ye.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ne,className:U(V,et,W?.toast,(t=h?.classNames)==null?void 0:t.toast,W?.default,W?.[He],(r=h?.classNames)==null?void 0:r[He]),"data-sonner-toast":"","data-rich-colors":(n=h.richColors)!=null?n:P,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":te,"data-promise":!!h.promise,"data-removed":pe,"data-visible":Ve,"data-y-position":Ze,"data-x-position":Pt,"data-index":w,"data-front":Le,"data-swiping":xe,"data-dismissible":Qe,"data-type":He,"data-invert":Kr,"data-swipe-out":Pe,"data-expanded":!!(M||Q&&te),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${pe?re:xt.current}px`,"--initial-height":Q?"auto":`${ae}px`,...A,...h.style},onPointerDown:Z=>{gn||!Qe||($e.current=new Date,ue(xt.current),Z.target.setPointerCapture(Z.pointerId),Z.target.tagName!=="BUTTON"&&(Ie(!0),We.current={x:Z.clientX,y:Z.clientY}))},onPointerUp:()=>{var Z,be,se,we;if(Pe||!Qe)return;We.current=null;let je=Number(((Z=Ne.current)==null?void 0:Z.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Je=new Date().getTime()-((be=$e.current)==null?void 0:be.getTime()),Be=Math.abs(je)/Je;if(Math.abs(je)>=rne||Be>.11){ue(xt.current),(se=h.onDismiss)==null||se.call(h,h),jt(),he(!0);return}(we=Ne.current)==null||we.style.setProperty("--swipe-amount","0px"),Ie(!1)},onPointerMove:Z=>{var be;if(!We.current||!Qe)return;let se=Z.clientY-We.current.y,we=Z.clientX-We.current.x,je=(Ze==="top"?Math.min:Math.max)(0,se),Je=Z.pointerType==="touch"?10:2;Math.abs(je)>Je?(be=Ne.current)==null||be.style.setProperty("--swipe-amount",`${se}px`):Math.abs(we)>Je&&(We.current=null)}},lt&&!h.jsx?ye.createElement("button",{"aria-label":ce,"data-disabled":gn,"data-close-button":!0,onClick:gn||!Qe?()=>{}:()=>{var Z;jt(),(Z=h.onDismiss)==null||Z.call(h,h)},className:U(W?.closeButton,(i=h?.classNames)==null?void 0:i.closeButton)},ye.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ye.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ye.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||ye.isValidElement(h.title)?h.jsx||h.title:ye.createElement(ye.Fragment,null,He||h.icon||h.promise?ye.createElement("div",{"data-icon":"",className:U(W?.icon,(s=h?.classNames)==null?void 0:s.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||hi():null,h.type!=="loading"?h.icon||oe?.[He]||Rre(He):null):null,ye.createElement("div",{"data-content":"",className:U(W?.content,(o=h?.classNames)==null?void 0:o.content)},ye.createElement("div",{"data-title":"",className:U(W?.title,(a=h?.classNames)==null?void 0:a.title)},h.title),h.description?ye.createElement("div",{"data-description":"",className:U(G,ot,W?.description,(l=h?.classNames)==null?void 0:l.description)},h.description):null),ye.isValidElement(h.cancel)?h.cancel:h.cancel&&pb(h.cancel)?ye.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||L,onClick:Z=>{var be,se;pb(h.cancel)&&Qe&&((se=(be=h.cancel).onClick)==null||se.call(be,Z),jt())},className:U(W?.cancelButton,(u=h?.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,ye.isValidElement(h.action)?h.action:h.action&&pb(h.action)?ye.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||B,onClick:Z=>{var be,se;pb(h.action)&&(Z.defaultPrevented||((se=(be=h.action).onClick)==null||se.call(be,Z),jt()))},className:U(W?.actionButton,(c=h?.classNames)==null?void 0:c.actionButton)},h.action.label):null))};function W$(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var one=e=>{let{invert:t,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:i,closeButton:s,className:o,offset:a,theme:l="light",richColors:u,duration:c,style:d,visibleToasts:h=Qre,toastOptions:m,dir:g=W$(),gap:v=tne,loadingIcon:y,icons:x,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:S,cn:M=ine}=e,[T,P]=ye.useState([]),E=ye.useMemo(()=>Array.from(new Set([r].concat(T.filter(D=>D.position).map(D=>D.position)))),[T,r]),[A,L]=ye.useState([]),[B,V]=ye.useState(!1),[G,z]=ye.useState(!1),[K,J]=ye.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),X=ye.useRef(null),Q=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),W=ye.useRef(null),oe=ye.useRef(!1),ce=ye.useCallback(D=>{var U;(U=T.find(te=>te.id===D.id))!=null&&U.delete||Ws.dismiss(D.id),P(te=>te.filter(({id:ee})=>ee!==D.id))},[T]);return ye.useEffect(()=>Ws.subscribe(D=>{if(D.dismiss){P(U=>U.map(te=>te.id===D.id?{...te,delete:!0}:te));return}setTimeout(()=>{K5.flushSync(()=>{P(U=>{let te=U.findIndex(ee=>ee.id===D.id);return te!==-1?[...U.slice(0,te),{...U[te],...D},...U.slice(te+1)]:[D,...U]})})})}),[]),ye.useEffect(()=>{if(l!=="system"){J(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?J("dark"):J("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:D})=>{J(D?"dark":"light")})},[l]),ye.useEffect(()=>{T.length<=1&&V(!1)},[T]),ye.useEffect(()=>{let D=U=>{var te,ee;n.every(pe=>U[pe]||U.code===pe)&&(V(!0),(te=X.current)==null||te.focus()),U.code==="Escape"&&(document.activeElement===X.current||(ee=X.current)!=null&&ee.contains(document.activeElement))&&V(!1)};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[n]),ye.useEffect(()=>{if(X.current)return()=>{W.current&&(W.current.focus({preventScroll:!0}),W.current=null,oe.current=!1)}},[X.current]),T.length?ye.createElement("section",{"aria-label":`${w} ${Q}`,tabIndex:-1},E.map((D,U)=>{var te;let[ee,pe]=D.split("-");return ye.createElement("ol",{key:D,dir:g==="auto"?W$():g,tabIndex:-1,ref:X,className:o,"data-sonner-toaster":!0,"data-theme":K,"data-y-position":ee,"data-x-position":pe,style:{"--front-toast-height":`${((te=A[0])==null?void 0:te.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||Jre,"--width":`${ene}px`,"--gap":`${v}px`,...d},onBlur:Oe=>{oe.current&&!Oe.currentTarget.contains(Oe.relatedTarget)&&(oe.current=!1,W.current&&(W.current.focus({preventScroll:!0}),W.current=null))},onFocus:Oe=>{Oe.target instanceof HTMLElement&&Oe.target.dataset.dismissible==="false"||oe.current||(oe.current=!0,W.current=Oe.relatedTarget)},onMouseEnter:()=>V(!0),onMouseMove:()=>V(!0),onMouseLeave:()=>{G||V(!1)},onPointerDown:Oe=>{Oe.target instanceof HTMLElement&&Oe.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},T.filter(Oe=>!Oe.position&&U===0||Oe.position===D).map((Oe,xe)=>{var Ie,Pe;return ye.createElement(sne,{key:Oe.id,icons:x,index:xe,toast:Oe,defaultRichColors:u,duration:(Ie=m?.duration)!=null?Ie:c,className:m?.className,descriptionClassName:m?.descriptionClassName,invert:t,visibleToasts:h,closeButton:(Pe=m?.closeButton)!=null?Pe:s,interacting:G,position:D,style:m?.style,unstyled:m?.unstyled,classNames:m?.classNames,cancelButtonStyle:m?.cancelButtonStyle,actionButtonStyle:m?.actionButtonStyle,removeToast:ce,toasts:T.filter(he=>he.position==Oe.position),heights:A.filter(he=>he.position==Oe.position),setHeights:L,expandByDefault:i,gap:v,loadingIcon:y,expanded:B,pauseWhenPageIsHidden:S,cn:M})}))})):null};const ane=({...e})=>{const{theme:t="system"}=Dre();return _.jsx(one,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var lne=H5.useId||(()=>{}),une=0;function Fc(e){const[t,r]=$.useState(lne());return Ti(()=>{r(n=>n??String(une++))},[e]),t?`radix-${t}`:""}const cne=["top","right","bottom","left"],Vc=Math.min,Gs=Math.max,Ew=Math.round,mb=Math.floor,Wc=e=>({x:e,y:e}),dne={left:"right",right:"left",bottom:"top",top:"bottom"},fne={start:"end",end:"start"};function wA(e,t,r){return Gs(e,Vc(t,r))}function Cu(e,t){return typeof e=="function"?e(t):e}function Au(e){return e.split("-")[0]}function ng(e){return e.split("-")[1]}function d2(e){return e==="x"?"y":"x"}function f2(e){return e==="y"?"height":"width"}function Gc(e){return["top","bottom"].includes(Au(e))?"y":"x"}function h2(e){return d2(Gc(e))}function hne(e,t,r){r===void 0&&(r=!1);const n=ng(e),i=h2(e),s=f2(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Cw(o)),[o,Cw(o)]}function pne(e){const t=Cw(e);return[xA(e),t,xA(t)]}function xA(e){return e.replace(/start|end/g,t=>fne[t])}function mne(e,t,r){const n=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?s:o;default:return[]}}function gne(e,t,r,n){const i=ng(e);let s=mne(Au(e),r==="start",n);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(xA)))),s}function Cw(e){return e.replace(/left|right|bottom|top/g,t=>dne[t])}function vne(e){return{top:0,right:0,bottom:0,left:0,...e}}function F8(e){return typeof e!="number"?vne(e):{top:e,right:e,bottom:e,left:e}}function Aw(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function G$(e,t,r){let{reference:n,floating:i}=e;const s=Gc(t),o=h2(t),a=f2(o),l=Au(t),u=s==="y",c=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,h=n[a]/2-i[a]/2;let m;switch(l){case"top":m={x:c,y:n.y-i.height};break;case"bottom":m={x:c,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:d};break;case"left":m={x:n.x-i.width,y:d};break;default:m={x:n.x,y:n.y}}switch(ng(t)){case"start":m[o]-=h*(r&&u?-1:1);break;case"end":m[o]+=h*(r&&u?-1:1);break}return m}const yne=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=G$(u,n,l),h=n,m={},g=0;for(let v=0;v<a.length;v++){const{name:y,fn:x}=a[v],{x:w,y:S,data:M,reset:T}=await x({x:c,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});c=w??c,d=S??d,m={...m,[y]:{...m[y],...M}},T&&g<=50&&(g++,typeof T=="object"&&(T.placement&&(h=T.placement),T.rects&&(u=T.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):T.rects),{x:c,y:d}=G$(u,h,l)),v=-1)}return{x:c,y:d,placement:h,strategy:i,middlewareData:m}};async function o_(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=Cu(t,e),g=F8(m),y=a[h?d==="floating"?"reference":"floating":d],x=Aw(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(y)))==null||r?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),w=d==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),M=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},T=Aw(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:l}):w);return{top:(x.top-T.top+g.top)/M.y,bottom:(T.bottom-x.bottom+g.bottom)/M.y,left:(x.left-T.left+g.left)/M.x,right:(T.right-x.right+g.right)/M.x}}const _ne=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=Cu(e,t)||{};if(u==null)return{};const d=F8(c),h={x:r,y:n},m=h2(i),g=f2(m),v=await o.getDimensions(u),y=m==="y",x=y?"top":"left",w=y?"bottom":"right",S=y?"clientHeight":"clientWidth",M=s.reference[g]+s.reference[m]-h[m]-s.floating[g],T=h[m]-s.reference[m],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=P?P[S]:0;(!E||!await(o.isElement==null?void 0:o.isElement(P)))&&(E=a.floating[S]||s.floating[g]);const A=M/2-T/2,L=E/2-v[g]/2-1,B=Vc(d[x],L),V=Vc(d[w],L),G=B,z=E-v[g]-V,K=E/2-v[g]/2+A,J=wA(G,K,z),X=!l.arrow&&ng(i)!=null&&K!==J&&s.reference[g]/2-(K<G?B:V)-v[g]/2<0,Q=X?K<G?K-G:K-z:0;return{[m]:h[m]+Q,data:{[m]:J,centerOffset:K-J-Q,...X&&{alignmentOffset:Q}},reset:X}}}),bne=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...y}=Cu(e,t);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const x=Au(i),w=Gc(a),S=Au(a)===a,M=await(l.isRTL==null?void 0:l.isRTL(u.floating)),T=h||(S||!v?[Cw(a)]:pne(a)),P=g!=="none";!h&&P&&T.push(...gne(a,v,g,M));const E=[a,...T],A=await o_(t,y),L=[];let B=((n=s.flip)==null?void 0:n.overflows)||[];if(c&&L.push(A[x]),d){const K=hne(i,o,M);L.push(A[K[0]],A[K[1]])}if(B=[...B,{placement:i,overflows:L}],!L.every(K=>K<=0)){var V,G;const K=(((V=s.flip)==null?void 0:V.index)||0)+1,J=E[K];if(J)return{data:{index:K,overflows:B},reset:{placement:J}};let X=(G=B.filter(Q=>Q.overflows[0]<=0).sort((Q,W)=>Q.overflows[1]-W.overflows[1])[0])==null?void 0:G.placement;if(!X)switch(m){case"bestFit":{var z;const Q=(z=B.filter(W=>{if(P){const oe=Gc(W.placement);return oe===w||oe==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(oe=>oe>0).reduce((oe,ce)=>oe+ce,0)]).sort((W,oe)=>W[1]-oe[1])[0])==null?void 0:z[0];Q&&(X=Q);break}case"initialPlacement":X=a;break}if(i!==X)return{reset:{placement:X}}}return{}}}};function q$(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function H$(e){return cne.some(t=>e[t]>=0)}const wne=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=Cu(e,t);switch(n){case"referenceHidden":{const s=await o_(t,{...i,elementContext:"reference"}),o=q$(s,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:H$(o)}}}case"escaped":{const s=await o_(t,{...i,altBoundary:!0}),o=q$(s,r.floating);return{data:{escapedOffsets:o,escaped:H$(o)}}}default:return{}}}}};async function xne(e,t){const{placement:r,platform:n,elements:i}=e,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=Au(r),a=ng(r),l=Gc(r)==="y",u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,d=Cu(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*c,y:h*u}:{x:h*u,y:m*c}}const Mne=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await xne(t,e);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},Tne=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x,y:w}=y;return{x,y:w}}},...l}=Cu(e,t),u={x:r,y:n},c=await o_(t,l),d=Gc(Au(i)),h=d2(d);let m=u[h],g=u[d];if(s){const y=h==="y"?"top":"left",x=h==="y"?"bottom":"right",w=m+c[y],S=m-c[x];m=wA(w,m,S)}if(o){const y=d==="y"?"top":"left",x=d==="y"?"bottom":"right",w=g+c[y],S=g-c[x];g=wA(w,g,S)}const v=a.fn({...t,[h]:m,[d]:g});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[h]:s,[d]:o}}}}}},Sne=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Cu(e,t),c={x:r,y:n},d=Gc(i),h=d2(d);let m=c[h],g=c[d];const v=Cu(a,t),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const S=h==="y"?"height":"width",M=s.reference[h]-s.floating[S]+y.mainAxis,T=s.reference[h]+s.reference[S]-y.mainAxis;m<M?m=M:m>T&&(m=T)}if(u){var x,w;const S=h==="y"?"width":"height",M=["top","left"].includes(Au(i)),T=s.reference[d]-s.floating[S]+(M&&((x=o.offset)==null?void 0:x[d])||0)+(M?0:y.crossAxis),P=s.reference[d]+s.reference[S]+(M?0:((w=o.offset)==null?void 0:w[d])||0)-(M?y.crossAxis:0);g<T?g=T:g>P&&(g=P)}return{[h]:m,[d]:g}}}},Pne=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...u}=Cu(e,t),c=await o_(t,u),d=Au(i),h=ng(i),m=Gc(i)==="y",{width:g,height:v}=s.floating;let y,x;d==="top"||d==="bottom"?(y=d,x=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=d,y=h==="end"?"top":"bottom");const w=v-c.top-c.bottom,S=g-c.left-c.right,M=Vc(v-c[y],w),T=Vc(g-c[x],S),P=!t.middlewareData.shift;let E=M,A=T;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(A=S),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(E=w),P&&!h){const B=Gs(c.left,0),V=Gs(c.right,0),G=Gs(c.top,0),z=Gs(c.bottom,0);m?A=g-2*(B!==0||V!==0?B+V:Gs(c.left,c.right)):E=v-2*(G!==0||z!==0?G+z:Gs(c.top,c.bottom))}await l({...t,availableWidth:A,availableHeight:E});const L=await o.getDimensions(a.floating);return g!==L.width||v!==L.height?{reset:{rects:!0}}:{}}}};function Hx(){return typeof window<"u"}function ig(e){return B8(e)?(e.nodeName||"").toLowerCase():"#document"}function Zs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function yl(e){var t;return(t=(B8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function B8(e){return Hx()?e instanceof Node||e instanceof Zs(e).Node:!1}function Sa(e){return Hx()?e instanceof Element||e instanceof Zs(e).Element:!1}function ml(e){return Hx()?e instanceof HTMLElement||e instanceof Zs(e).HTMLElement:!1}function K$(e){return!Hx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Zs(e).ShadowRoot}function a0(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=Pa(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function Ene(e){return["table","td","th"].includes(ig(e))}function Kx(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function p2(e){const t=m2(),r=Sa(e)?Pa(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function Cne(e){let t=qc(e);for(;ml(t)&&!Mm(t);){if(p2(t))return t;if(Kx(t))return null;t=qc(t)}return null}function m2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Mm(e){return["html","body","#document"].includes(ig(e))}function Pa(e){return Zs(e).getComputedStyle(e)}function Xx(e){return Sa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function qc(e){if(ig(e)==="html")return e;const t=e.assignedSlot||e.parentNode||K$(e)&&e.host||yl(e);return K$(t)?t.host:t}function z8(e){const t=qc(e);return Mm(t)?e.ownerDocument?e.ownerDocument.body:e.body:ml(t)&&a0(t)?t:z8(t)}function a_(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=z8(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),o=Zs(i);if(s){const a=MA(o);return t.concat(o,o.visualViewport||[],a0(i)?i:[],a&&r?a_(a):[])}return t.concat(i,a_(i,[],r))}function MA(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function U8(e){const t=Pa(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=ml(e),s=i?e.offsetWidth:r,o=i?e.offsetHeight:n,a=Ew(r)!==s||Ew(n)!==o;return a&&(r=s,n=o),{width:r,height:n,$:a}}function g2(e){return Sa(e)?e:e.contextElement}function pm(e){const t=g2(e);if(!ml(t))return Wc(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:s}=U8(t);let o=(s?Ew(r.width):r.width)/n,a=(s?Ew(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Ane=Wc(0);function V8(e){const t=Zs(e);return!m2()||!t.visualViewport?Ane:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function One(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Zs(e)?!1:t}function Yf(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),s=g2(e);let o=Wc(1);t&&(n?Sa(n)&&(o=pm(n)):o=pm(e));const a=One(s,r,n)?V8(s):Wc(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const h=Zs(s),m=n&&Sa(n)?Zs(n):n;let g=h,v=MA(g);for(;v&&n&&m!==g;){const y=pm(v),x=v.getBoundingClientRect(),w=Pa(v),S=x.left+(v.clientLeft+parseFloat(w.paddingLeft))*y.x,M=x.top+(v.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,u*=y.y,c*=y.x,d*=y.y,l+=S,u+=M,g=Zs(v),v=MA(g)}}return Aw({width:c,height:d,x:l,y:u})}function kne(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const s=i==="fixed",o=yl(n),a=t?Kx(t.floating):!1;if(n===o||a&&s)return r;let l={scrollLeft:0,scrollTop:0},u=Wc(1);const c=Wc(0),d=ml(n);if((d||!d&&!s)&&((ig(n)!=="body"||a0(o))&&(l=Xx(n)),ml(n))){const h=Yf(n);u=pm(n),c.x=h.x+n.clientLeft,c.y=h.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+c.x,y:r.y*u.y-l.scrollTop*u.y+c.y}}function Ine(e){return Array.from(e.getClientRects())}function TA(e,t){const r=Xx(e).scrollLeft;return t?t.left+r:Yf(yl(e)).left+r}function jne(e){const t=yl(e),r=Xx(e),n=e.ownerDocument.body,i=Gs(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=Gs(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+TA(e);const a=-r.scrollTop;return Pa(n).direction==="rtl"&&(o+=Gs(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}function $ne(e,t){const r=Zs(e),n=yl(e),i=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=m2();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function Nne(e,t){const r=Yf(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=ml(e)?pm(e):Wc(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,u=n*s.y;return{width:o,height:a,x:l,y:u}}function X$(e,t,r){let n;if(t==="viewport")n=$ne(e,r);else if(t==="document")n=jne(yl(e));else if(Sa(t))n=Nne(t,r);else{const i=V8(e);n={...t,x:t.x-i.x,y:t.y-i.y}}return Aw(n)}function W8(e,t){const r=qc(e);return r===t||!Sa(r)||Mm(r)?!1:Pa(r).position==="fixed"||W8(r,t)}function Dne(e,t){const r=t.get(e);if(r)return r;let n=a_(e,[],!1).filter(a=>Sa(a)&&ig(a)!=="body"),i=null;const s=Pa(e).position==="fixed";let o=s?qc(e):e;for(;Sa(o)&&!Mm(o);){const a=Pa(o),l=p2(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||a0(o)&&!l&&W8(e,o))?n=n.filter(c=>c!==o):i=a,o=qc(o)}return t.set(e,n),n}function Rne(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const o=[...r==="clippingAncestors"?Kx(t)?[]:Dne(t,this._c):[].concat(r),n],a=o[0],l=o.reduce((u,c)=>{const d=X$(t,c,i);return u.top=Gs(d.top,u.top),u.right=Vc(d.right,u.right),u.bottom=Vc(d.bottom,u.bottom),u.left=Gs(d.left,u.left),u},X$(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Lne(e){const{width:t,height:r}=U8(e);return{width:t,height:r}}function Fne(e,t,r){const n=ml(t),i=yl(t),s=r==="fixed",o=Yf(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Wc(0);if(n||!n&&!s)if((ig(t)!=="body"||a0(i))&&(a=Xx(t)),n){const m=Yf(t,!0,s,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else i&&(l.x=TA(i));let u=0,c=0;if(i&&!n&&!s){const m=i.getBoundingClientRect();c=m.top+a.scrollTop,u=m.left+a.scrollLeft-TA(i,m)}const d=o.left+a.scrollLeft-l.x-u,h=o.top+a.scrollTop-l.y-c;return{x:d,y:h,width:o.width,height:o.height}}function TM(e){return Pa(e).position==="static"}function Y$(e,t){if(!ml(e)||Pa(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return yl(e)===r&&(r=r.ownerDocument.body),r}function G8(e,t){const r=Zs(e);if(Kx(e))return r;if(!ml(e)){let i=qc(e);for(;i&&!Mm(i);){if(Sa(i)&&!TM(i))return i;i=qc(i)}return r}let n=Y$(e,t);for(;n&&Ene(n)&&TM(n);)n=Y$(n,t);return n&&Mm(n)&&TM(n)&&!p2(n)?r:n||Cne(e)||r}const Bne=async function(e){const t=this.getOffsetParent||G8,r=this.getDimensions,n=await r(e.floating);return{reference:Fne(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function zne(e){return Pa(e).direction==="rtl"}const Une={convertOffsetParentRelativeRectToViewportRelativeRect:kne,getDocumentElement:yl,getClippingRect:Rne,getOffsetParent:G8,getElementRects:Bne,getClientRects:Ine,getDimensions:Lne,getScale:pm,isElement:Sa,isRTL:zne};function Vne(e,t){let r=null,n;const i=yl(e);function s(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:d,height:h}=e.getBoundingClientRect();if(a||t(),!d||!h)return;const m=mb(c),g=mb(i.clientWidth-(u+d)),v=mb(i.clientHeight-(c+h)),y=mb(u),w={rootMargin:-m+"px "+-g+"px "+-v+"px "+-y+"px",threshold:Gs(0,Vc(1,l))||1};let S=!0;function M(T){const P=T[0].intersectionRatio;if(P!==l){if(!S)return o();P?o(!1,P):n=setTimeout(()=>{o(!1,1e-7)},1e3)}S=!1}try{r=new IntersectionObserver(M,{...w,root:i.ownerDocument})}catch{r=new IntersectionObserver(M,w)}r.observe(e)}return o(!0),s}function Wne(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=g2(e),c=i||s?[...u?a_(u):[],...a_(t)]:[];c.forEach(x=>{i&&x.addEventListener("scroll",r,{passive:!0}),s&&x.addEventListener("resize",r)});const d=u&&a?Vne(u,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(x=>{let[w]=x;w&&w.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(t)})),r()}),u&&!l&&m.observe(u),m.observe(t));let g,v=l?Yf(e):null;l&&y();function y(){const x=Yf(e);v&&(x.x!==v.x||x.y!==v.y||x.width!==v.width||x.height!==v.height)&&r(),v=x,g=requestAnimationFrame(y)}return r(),()=>{var x;c.forEach(w=>{i&&w.removeEventListener("scroll",r),s&&w.removeEventListener("resize",r)}),d?.(),(x=m)==null||x.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const Gne=Mne,qne=Tne,Hne=bne,Kne=Pne,Xne=wne,Q$=_ne,Yne=Sne,Qne=(e,t,r)=>{const n=new Map,i={platform:Une,...r},s={...i.platform,_c:n};return yne(e,t,{...i,platform:s})};var dw=typeof document<"u"?$.useLayoutEffect:$.useEffect;function Ow(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Ow(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&e.$$typeof)&&!Ow(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function q8(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function J$(e,t){const r=q8(e);return Math.round(t*r)/r}function SM(e){const t=$.useRef(e);return dw(()=>{t.current=e}),t}function Jne(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[c,d]=$.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=$.useState(n);Ow(h,n)||m(n);const[g,v]=$.useState(null),[y,x]=$.useState(null),w=$.useCallback(W=>{W!==P.current&&(P.current=W,v(W))},[]),S=$.useCallback(W=>{W!==E.current&&(E.current=W,x(W))},[]),M=s||g,T=o||y,P=$.useRef(null),E=$.useRef(null),A=$.useRef(c),L=l!=null,B=SM(l),V=SM(i),G=SM(u),z=$.useCallback(()=>{if(!P.current||!E.current)return;const W={placement:t,strategy:r,middleware:h};V.current&&(W.platform=V.current),Qne(P.current,E.current,W).then(oe=>{const ce={...oe,isPositioned:G.current!==!1};K.current&&!Ow(A.current,ce)&&(A.current=ce,tg.flushSync(()=>{d(ce)}))})},[h,t,r,V,G]);dw(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,d(W=>({...W,isPositioned:!1})))},[u]);const K=$.useRef(!1);dw(()=>(K.current=!0,()=>{K.current=!1}),[]),dw(()=>{if(M&&(P.current=M),T&&(E.current=T),M&&T){if(B.current)return B.current(M,T,z);z()}},[M,T,z,B,L]);const J=$.useMemo(()=>({reference:P,floating:E,setReference:w,setFloating:S}),[w,S]),X=$.useMemo(()=>({reference:M,floating:T}),[M,T]),Q=$.useMemo(()=>{const W={position:r,left:0,top:0};if(!X.floating)return W;const oe=J$(X.floating,c.x),ce=J$(X.floating,c.y);return a?{...W,transform:"translate("+oe+"px, "+ce+"px)",...q8(X.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:oe,top:ce}},[r,a,X.floating,c.x,c.y]);return $.useMemo(()=>({...c,update:z,refs:J,elements:X,floatingStyles:Q}),[c,z,J,X,Q])}const Zne=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Q$({element:n.current,padding:i}).fn(r):{}:n?Q$({element:n,padding:i}).fn(r):{}}}},eie=(e,t)=>({...Gne(e),options:[e,t]}),tie=(e,t)=>({...qne(e),options:[e,t]}),rie=(e,t)=>({...Yne(e),options:[e,t]}),nie=(e,t)=>({...Hne(e),options:[e,t]}),iie=(e,t)=>({...Kne(e),options:[e,t]}),sie=(e,t)=>({...Xne(e),options:[e,t]}),oie=(e,t)=>({...Zne(e),options:[e,t]});var aie="Arrow",H8=$.forwardRef((e,t)=>{const{children:r,width:n=10,height:i=5,...s}=e;return _.jsx(Qt.svg,{...s,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:_.jsx("polygon",{points:"0,0 30,0 15,10"})})});H8.displayName=aie;var lie=H8;function uie(e,t=[]){let r=[];function n(s,o){const a=$.createContext(o),l=r.length;r=[...r,o];function u(d){const{scope:h,children:m,...g}=d,v=h?.[e][l]||a,y=$.useMemo(()=>g,Object.values(g));return _.jsx(v.Provider,{value:y,children:m})}function c(d,h){const m=h?.[e][l]||a,g=$.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const i=()=>{const s=r.map(o=>$.createContext(o));return function(a){const l=a?.[e]||s;return $.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[n,cie(i,...t)]}function cie(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=n.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return $.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function K8(e){const[t,r]=$.useState(void 0);return Ti(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=e.offsetWidth,a=e.offsetHeight;r({width:o,height:a})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var v2="Popper",[X8,Yx]=uie(v2),[die,Y8]=X8(v2),Q8=e=>{const{__scopePopper:t,children:r}=e,[n,i]=$.useState(null);return _.jsx(die,{scope:t,anchor:n,onAnchorChange:i,children:r})};Q8.displayName=v2;var J8="PopperAnchor",Z8=$.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,s=Y8(J8,r),o=$.useRef(null),a=tn(t,o);return $.useEffect(()=>{s.onAnchorChange(n?.current||o.current)}),n?null:_.jsx(Qt.div,{...i,ref:a})});Z8.displayName=J8;var y2="PopperContent",[fie,hie]=X8(y2),e6=$.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=e,y=Y8(y2,r),[x,w]=$.useState(null),S=tn(t,xe=>w(xe)),[M,T]=$.useState(null),P=K8(M),E=P?.width??0,A=P?.height??0,L=n+(s!=="center"?"-"+s:""),B=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},V=Array.isArray(u)?u:[u],G=V.length>0,z={padding:B,boundary:V.filter(mie),altBoundary:G},{refs:K,floatingStyles:J,placement:X,isPositioned:Q,middlewareData:W}=Jne({strategy:"fixed",placement:L,whileElementsMounted:(...xe)=>Wne(...xe,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[eie({mainAxis:i+A,alignmentAxis:o}),l&&tie({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?rie():void 0,...z}),l&&nie({...z}),iie({...z,apply:({elements:xe,rects:Ie,availableWidth:Pe,availableHeight:he})=>{const{width:re,height:ue}=Ie.reference,ae=xe.floating.style;ae.setProperty("--radix-popper-available-width",`${Pe}px`),ae.setProperty("--radix-popper-available-height",`${he}px`),ae.setProperty("--radix-popper-anchor-width",`${re}px`),ae.setProperty("--radix-popper-anchor-height",`${ue}px`)}}),M&&oie({element:M,padding:a}),gie({arrowWidth:E,arrowHeight:A}),h&&sie({strategy:"referenceHidden",...z})]}),[oe,ce]=n6(X),D=gs(g);Ti(()=>{Q&&D?.()},[Q,D]);const U=W.arrow?.x,te=W.arrow?.y,ee=W.arrow?.centerOffset!==0,[pe,Oe]=$.useState();return Ti(()=>{x&&Oe(window.getComputedStyle(x).zIndex)},[x]),_.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:Q?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pe,"--radix-popper-transform-origin":[W.transformOrigin?.x,W.transformOrigin?.y].join(" "),...W.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:_.jsx(fie,{scope:r,placedSide:oe,onArrowChange:T,arrowX:U,arrowY:te,shouldHideArrow:ee,children:_.jsx(Qt.div,{"data-side":oe,"data-align":ce,...v,ref:S,style:{...v.style,animation:Q?void 0:"none"}})})})});e6.displayName=y2;var t6="PopperArrow",pie={top:"bottom",right:"left",bottom:"top",left:"right"},r6=$.forwardRef(function(t,r){const{__scopePopper:n,...i}=t,s=hie(t6,n),o=pie[s.placedSide];return _.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:_.jsx(lie,{...i,ref:r,style:{...i.style,display:"block"}})})});r6.displayName=t6;function mie(e){return e!==null}var gie=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:i}=t,o=i.arrow?.centerOffset!==0,a=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[u,c]=n6(r),d={start:"0%",center:"50%",end:"100%"}[c],h=(i.arrow?.x??0)+a/2,m=(i.arrow?.y??0)+l/2;let g="",v="";return u==="bottom"?(g=o?d:`${h}px`,v=`${-l}px`):u==="top"?(g=o?d:`${h}px`,v=`${n.floating.height+l}px`):u==="right"?(g=`${-l}px`,v=o?d:`${m}px`):u==="left"&&(g=`${n.floating.width+l}px`,v=o?d:`${m}px`),{data:{x:g,y:v}}}});function n6(e){const[t,r="center"]=e.split("-");return[t,r]}var vie=Q8,i6=Z8,s6=e6,o6=r6,[Qx]=oh("Tooltip",[Yx]),_2=Yx(),a6="TooltipProvider",yie=700,Z$="tooltip.open",[_ie,l6]=Qx(a6),u6=e=>{const{__scopeTooltip:t,delayDuration:r=yie,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:s}=e,[o,a]=$.useState(!0),l=$.useRef(!1),u=$.useRef(0);return $.useEffect(()=>{const c=u.current;return()=>window.clearTimeout(c)},[]),_.jsx(_ie,{scope:t,isOpenDelayed:o,delayDuration:r,onOpen:$.useCallback(()=>{window.clearTimeout(u.current),a(!1)},[]),onClose:$.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a(!0),n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:$.useCallback(c=>{l.current=c},[]),disableHoverableContent:i,children:s})};u6.displayName=a6;var c6="Tooltip",[Gje,Jx]=Qx(c6),SA="TooltipTrigger",bie=$.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=Jx(SA,r),s=l6(SA,r),o=_2(r),a=$.useRef(null),l=tn(t,a,i.onTriggerChange),u=$.useRef(!1),c=$.useRef(!1),d=$.useCallback(()=>u.current=!1,[]);return $.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),_.jsx(i6,{asChild:!0,...o,children:_.jsx(Qt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:l,onPointerMove:Ut(e.onPointerMove,h=>{h.pointerType!=="touch"&&!c.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),c.current=!0)}),onPointerLeave:Ut(e.onPointerLeave,()=>{i.onTriggerLeave(),c.current=!1}),onPointerDown:Ut(e.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ut(e.onFocus,()=>{u.current||i.onOpen()}),onBlur:Ut(e.onBlur,i.onClose),onClick:Ut(e.onClick,i.onClose)})})});bie.displayName=SA;var wie="TooltipPortal",[qje,xie]=Qx(wie,{forceMount:void 0}),Tm="TooltipContent",d6=$.forwardRef((e,t)=>{const r=xie(Tm,e.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...s}=e,o=Jx(Tm,e.__scopeTooltip);return _.jsx(Qc,{present:n||o.open,children:o.disableHoverableContent?_.jsx(f6,{side:i,...s,ref:t}):_.jsx(Mie,{side:i,...s,ref:t})})}),Mie=$.forwardRef((e,t)=>{const r=Jx(Tm,e.__scopeTooltip),n=l6(Tm,e.__scopeTooltip),i=$.useRef(null),s=tn(t,i),[o,a]=$.useState(null),{trigger:l,onClose:u}=r,c=i.current,{onPointerInTransitChange:d}=n,h=$.useCallback(()=>{a(null),d(!1)},[d]),m=$.useCallback((g,v)=>{const y=g.currentTarget,x={x:g.clientX,y:g.clientY},w=Eie(x,y.getBoundingClientRect()),S=Cie(x,w),M=Aie(v.getBoundingClientRect()),T=kie([...S,...M]);a(T),d(!0)},[d]);return $.useEffect(()=>()=>h(),[h]),$.useEffect(()=>{if(l&&c){const g=y=>m(y,c),v=y=>m(y,l);return l.addEventListener("pointerleave",g),c.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",g),c.removeEventListener("pointerleave",v)}}},[l,c,m,h]),$.useEffect(()=>{if(o){const g=v=>{const y=v.target,x={x:v.clientX,y:v.clientY},w=l?.contains(y)||c?.contains(y),S=!Oie(x,o);w?h():S&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,c,o,u,h]),_.jsx(f6,{...e,ref:s})}),[Tie,Sie]=Qx(c6,{isInside:!1}),f6=$.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=e,l=Jx(Tm,r),u=_2(r),{onClose:c}=l;return $.useEffect(()=>(document.addEventListener(Z$,c),()=>document.removeEventListener(Z$,c)),[c]),$.useEffect(()=>{if(l.trigger){const d=h=>{h.target?.contains(l.trigger)&&c()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,c]),_.jsx(i0,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:c,children:_.jsxs(s6,{"data-state":l.stateAttribute,...u,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[_.jsx(Y5,{children:n}),_.jsx(Tie,{scope:r,isInside:!0,children:_.jsx(fte,{id:l.contentId,role:"tooltip",children:i||n})})]})})});d6.displayName=Tm;var h6="TooltipArrow",Pie=$.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=_2(r);return Sie(h6,r).isInside?null:_.jsx(o6,{...i,...n,ref:t})});Pie.displayName=h6;function Eie(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,n,i,s)){case s:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Cie(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function Aie(e){const{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}function Oie(e,t){const{x:r,y:n}=e;let i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const a=t[s].x,l=t[s].y,u=t[o].x,c=t[o].y;l>n!=c>n&&r<(u-a)*(n-l)/(c-l)+a&&(i=!i)}return i}function kie(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Iie(t)}function Iie(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const i=e[n];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const i=e[n];for(;r.length>=2;){const s=r[r.length-1],o=r[r.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))r.pop();else break}r.push(i)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var jie=u6,p6=d6;const $ie=jie,Nie=$.forwardRef(({className:e,sideOffset:t=4,...r},n)=>_.jsx(p6,{ref:n,sideOffset:t,className:Kt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));Nie.displayName=p6.displayName;var Zx=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},e1=typeof window>"u"||"Deno"in globalThis;function ga(){}function Die(e,t){return typeof e=="function"?e(t):e}function Rie(e){return typeof e=="number"&&e>=0&&e!==1/0}function Lie(e,t){return Math.max(e+(t||0)-Date.now(),0)}function eN(e,t){return typeof e=="function"?e(t):e}function Fie(e,t){return typeof e=="function"?e(t):e}function tN(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=e;if(o){if(n){if(t.queryHash!==b2(o,t.options))return!1}else if(!u_(t.queryKey,o))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||s&&!s(t))}function rN(e,t){const{exact:r,status:n,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(l_(t.options.mutationKey)!==l_(s))return!1}else if(!u_(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function b2(e,t){return(t?.queryKeyHashFn||l_)(e)}function l_(e){return JSON.stringify(e,(t,r)=>PA(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function u_(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!u_(e[r],t[r])):!1}function m6(e,t){if(e===t)return e;const r=nN(e)&&nN(t);if(r||PA(e)&&PA(t)){const n=r?e:Object.keys(e),i=n.length,s=r?t:Object.keys(t),o=s.length,a=r?[]:{};let l=0;for(let u=0;u<o;u++){const c=r?u:s[u];(!r&&n.includes(c)||r)&&e[c]===void 0&&t[c]===void 0?(a[c]=void 0,l++):(a[c]=m6(e[c],t[c]),a[c]===e[c]&&e[c]!==void 0&&l++)}return i===o&&l===i?e:a}return t}function nN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function PA(e){if(!iN(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!iN(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function iN(e){return Object.prototype.toString.call(e)==="[object Object]"}function Bie(e){return new Promise(t=>{setTimeout(t,e)})}function zie(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?m6(e,t):t}function Uie(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Vie(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var w2=Symbol();function g6(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===w2?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Wie=class extends Zx{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!e1&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},v6=new Wie,Gie=class extends Zx{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!e1&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},kw=new Gie;function qie(){let e,t;const r=new Promise((i,s)=>{e=i,t=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}function Hie(e){return Math.min(1e3*2**e,3e4)}function y6(e){return(e??"online")==="online"?kw.isOnline():!0}var _6=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function PM(e){return e instanceof _6}function b6(e){let t=!1,r=0,n=!1,i;const s=qie(),o=v=>{n||(h(new _6(v)),e.abort?.())},a=()=>{t=!0},l=()=>{t=!1},u=()=>v6.isFocused()&&(e.networkMode==="always"||kw.isOnline())&&e.canRun(),c=()=>y6(e.networkMode)&&e.canRun(),d=v=>{n||(n=!0,e.onSuccess?.(v),i?.(),s.resolve(v))},h=v=>{n||(n=!0,e.onError?.(v),i?.(),s.reject(v))},m=()=>new Promise(v=>{i=y=>{(n||u())&&v(y)},e.onPause?.()}).then(()=>{i=void 0,n||e.onContinue?.()}),g=()=>{if(n)return;let v;const y=r===0?e.initialPromise:void 0;try{v=y??e.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(d).catch(x=>{if(n)return;const w=e.retry??(e1?0:3),S=e.retryDelay??Hie,M=typeof S=="function"?S(r,x):S,T=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,x);if(t||!T){h(x);return}r++,e.onFail?.(r,x),Bie(M).then(()=>u()?void 0:m()).then(()=>{t?h(x):g()})})};return{promise:s,cancel:o,continue:()=>(i?.(),s),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?g():m().then(g),s)}}function Kie(){let e=[],t=0,r=a=>{a()},n=a=>{a()},i=a=>setTimeout(a,0);const s=a=>{t?e.push(a):i(()=>{r(a)})},o=()=>{const a=e;e=[],a.length&&i(()=>{n(()=>{a.forEach(l=>{r(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var fs=Kie(),w6=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rie(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(e1?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},Xie=class extends w6{#e;#t;#r;#n;#o;#s;constructor(e){super(),this.#s=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Qie(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=zie(this.state.data,e,this.options);return this.#i({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(ga).catch(ga):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Fie(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===w2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Lie(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#s?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const a=this.observers.find(l=>l.options.queryFn);a&&this.setOptions(a.options)}const r=new AbortController,n=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#s=!0,r.signal)})},i=()=>{const a=g6(this.options,t),l={queryKey:this.queryKey,meta:this.meta};return n(l),this.#s=!1,this.options.persister?this.options.persister(a,l,this):a(l)},s={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};n(s),this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#i({type:"fetch",meta:s.fetchOptions?.meta});const o=a=>{PM(a)&&a.silent||this.#i({type:"error",error:a}),PM(a)||(this.#r.config.onError?.(a,this),this.#r.config.onSettled?.(this.state.data,a,this)),this.scheduleGc()};return this.#n=b6({initialPromise:t?.initialPromise,fn:s.fetchFn,abort:r.abort.bind(r),onSuccess:a=>{if(a===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(a)}catch(l){o(l);return}this.#r.config.onSuccess?.(a,this),this.#r.config.onSettled?.(a,this.state.error,this),this.scheduleGc()},onError:o,onFail:(a,l)=>{this.#i({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}),this.#n.start()}#i(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Yie(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return PM(n)&&n.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),fs.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function Yie(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:y6(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Qie(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Jie=class extends Zx{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,i=t.queryHash??b2(n,t);let s=this.get(i);return s||(s=new Xie({cache:this,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(s)),s}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){fs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>tN(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>tN(e,r)):t}notify(e){fs.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){fs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){fs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Zie=class extends w6{#e;#t;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||ese(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){this.#r=b6({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(n,i)=>{this.#n({type:"failed",failureCount:n,error:i})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const t=this.state.status==="pending",r=!this.#r.canStart();try{if(!t){this.#n({type:"pending",variables:e,isPaused:r}),await this.#t.config.onMutate?.(e,this);const i=await this.options.onMutate?.(e);i!==this.state.context&&this.#n({type:"pending",context:i,variables:e,isPaused:r})}const n=await this.#r.start();return await this.#t.config.onSuccess?.(n,e,this.state.context,this),await this.options.onSuccess?.(n,e,this.state.context),await this.#t.config.onSettled?.(n,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(n,null,e,this.state.context),this.#n({type:"success",data:n}),n}catch(n){try{throw await this.#t.config.onError?.(n,e,this.state.context,this),await this.options.onError?.(n,e,this.state.context),await this.#t.config.onSettled?.(void 0,n,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,n,e,this.state.context),n}finally{this.#n({type:"error",error:n})}}finally{this.#t.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),fs.batch(()=>{this.#e.forEach(r=>{r.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function ese(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var tse=class extends Zx{constructor(e={}){super(),this.config=e,this.#e=new Map,this.#t=Date.now()}#e;#t;build(e,t,r){const n=new Zie({mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){const t=gb(e),r=this.#e.get(t)??[];r.push(e),this.#e.set(t,r),this.notify({type:"added",mutation:e})}remove(e){const t=gb(e);if(this.#e.has(t)){const r=this.#e.get(t)?.filter(n=>n!==e);r&&(r.length===0?this.#e.delete(t):this.#e.set(t,r))}this.notify({type:"removed",mutation:e})}canRun(e){const t=this.#e.get(gb(e))?.find(r=>r.state.status==="pending");return!t||t===e}runNext(e){return this.#e.get(gb(e))?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve()}clear(){fs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...this.#e.values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(r=>rN(t,r))}findAll(e={}){return this.getAll().filter(t=>rN(e,t))}notify(e){fs.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return fs.batch(()=>Promise.all(e.map(t=>t.continue().catch(ga))))}};function gb(e){return e.options.scope?.id??String(e.mutationId)}function sN(e){return{onFetch:(t,r)=>{const n=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,s=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let c=!1;const d=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(t.signal.aborted?c=!0:t.signal.addEventListener("abort",()=>{c=!0}),t.signal)})},h=g6(t.options,t.fetchOptions),m=async(g,v,y)=>{if(c)return Promise.reject();if(v==null&&g.pages.length)return Promise.resolve(g);const x={queryKey:t.queryKey,pageParam:v,direction:y?"backward":"forward",meta:t.options.meta};d(x);const w=await h(x),{maxPages:S}=t.options,M=y?Vie:Uie;return{pages:M(g.pages,w,S),pageParams:M(g.pageParams,v,S)}};if(i&&s.length){const g=i==="backward",v=g?rse:oN,y={pages:s,pageParams:o},x=v(n,y);a=await m(y,x,g)}else{const g=e??s.length;do{const v=l===0?o[0]??n.initialPageParam:oN(n,a);if(l>0&&v==null)break;a=await m(a,v),l++}while(l<g)}return a};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=u}}}function oN(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function rse(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var nse=class{#e;#t;#r;#n;#o;#s;#i;#a;constructor(e={}){this.#e=e.queryCache||new Jie,this.#t=e.mutationCache||new tse,this.#r=e.defaultOptions||{},this.#n=new Map,this.#o=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#i=v6.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=kw.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=this.#e.build(this,r);return e.revalidateIfStale&&n.isStaleByTime(eN(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=this.#e.get(n.queryHash)?.state.data,o=Die(t,s);if(o!==void 0)return this.#e.build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return fs.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;fs.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e,n={type:"active",...e};return fs.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=fs.batch(()=>this.#e.findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(ga).catch(ga)}invalidateQueries(e={},t={}){return fs.batch(()=>{if(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:t?.cancelRefetch??!0},n=fs.batch(()=>this.#e.findAll(e).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(ga)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(ga)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(eN(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ga).catch(ga)}fetchInfiniteQuery(e){return e.behavior=sN(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ga).catch(ga)}ensureInfiniteQueryData(e){return e.behavior=sN(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return kw.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(l_(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()];let r={};return t.forEach(n=>{u_(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){this.#o.set(l_(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#o.values()];let r={};return t.forEach(n=>{u_(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=b2(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===w2&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},ise=$.createContext(void 0),sse=({client:e,children:t})=>($.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),_.jsx(ise.Provider,{value:e,children:t}));function c_(){return c_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c_.apply(this,arguments)}var Lc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Lc||(Lc={}));const aN="popstate";function ose(e){e===void 0&&(e={});function t(n,i){let{pathname:s,search:o,hash:a}=n.location;return EA("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Iw(i)}return lse(t,r,null,e)}function Nn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function x6(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ase(){return Math.random().toString(36).substr(2,8)}function lN(e,t){return{usr:e.state,key:e.key,idx:t}}function EA(e,t,r,n){return r===void 0&&(r=null),c_({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?sg(t):t,{state:r,key:t&&t.key||n||ase()})}function Iw(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function sg(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function lse(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Lc.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(c_({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=Lc.Pop;let y=c(),x=y==null?null:y-u;u=y,l&&l({action:a,location:v.location,delta:x})}function h(y,x){a=Lc.Push;let w=EA(v.location,y,x);u=c()+1;let S=lN(w,u),M=v.createHref(w);try{o.pushState(S,"",M)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(M)}s&&l&&l({action:a,location:v.location,delta:1})}function m(y,x){a=Lc.Replace;let w=EA(v.location,y,x);u=c();let S=lN(w,u),M=v.createHref(w);o.replaceState(S,"",M),s&&l&&l({action:a,location:v.location,delta:0})}function g(y){let x=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof y=="string"?y:Iw(y);return w=w.replace(/ $/,"%20"),Nn(x,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,x)}let v={get action(){return a},get location(){return e(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(aN,d),l=y,()=>{i.removeEventListener(aN,d),l=null}},createHref(y){return t(i,y)},createURL:g,encodeLocation(y){let x=g(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:m,go(y){return o.go(y)}};return v}var uN;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(uN||(uN={}));function use(e,t,r){return r===void 0&&(r="/"),cse(e,t,r)}function cse(e,t,r,n){let i=typeof t=="string"?sg(t):t,s=Sm(i.pathname||"/",r);if(s==null)return null;let o=M6(e);dse(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=xse(s);a=bse(o[l],u)}return a}function M6(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Nn(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=Bc([n,l.relativePath]),c=r.concat(l);s.children&&s.children.length>0&&(Nn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),M6(s.children,t,c,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:yse(u,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of T6(s.path))i(s,o,l)}),t}function T6(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=T6(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function dse(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:_se(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const fse=/^:[\w-]+$/,hse=3,pse=2,mse=1,gse=10,vse=-2,cN=e=>e==="*";function yse(e,t){let r=e.split("/"),n=r.length;return r.some(cN)&&(n+=vse),t&&(n+=pse),r.filter(i=>!cN(i)).reduce((i,s)=>i+(fse.test(s)?hse:s===""?mse:gse),n)}function _se(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function bse(e,t,r){let{routesMeta:n}=e,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,c=s==="/"?t:t.slice(s.length)||"/",d=CA({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Bc([s,d.pathname]),pathnameBase:Pse(Bc([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Bc([s,d.pathnameBase]))}return o}function CA(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=wse(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((u,c,d)=>{let{paramName:h,isOptional:m}=c;if(h==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[d];return m&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function wse(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),x6(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function xse(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return x6(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Sm(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Mse(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?sg(e):e;return{pathname:r?r.startsWith("/")?r:Tse(r,t):t,search:Ese(n),hash:Cse(i)}}function Tse(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function EM(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Sse(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function x2(e,t){let r=Sse(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function M2(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=sg(e):(i=c_({},e),Nn(!i.pathname||!i.pathname.includes("?"),EM("?","pathname","search",i)),Nn(!i.pathname||!i.pathname.includes("#"),EM("#","pathname","hash",i)),Nn(!i.search||!i.search.includes("#"),EM("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let d=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?t[d]:"/"}let l=Mse(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Bc=e=>e.join("/").replace(/\/\/+/g,"/"),Pse=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ese=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Cse=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ase(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const S6=["post","put","patch","delete"];new Set(S6);const Ose=["get",...S6];new Set(Ose);function d_(){return d_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d_.apply(this,arguments)}const t1=$.createContext(null),P6=$.createContext(null),Nu=$.createContext(null),r1=$.createContext(null),_l=$.createContext({outlet:null,matches:[],isDataRoute:!1}),E6=$.createContext(null);function kse(e,t){let{relative:r}=t===void 0?{}:t;og()||Nn(!1);let{basename:n,navigator:i}=$.useContext(Nu),{hash:s,pathname:o,search:a}=n1(e,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:Bc([n,o])),i.createHref({pathname:l,search:a,hash:s})}function og(){return $.useContext(r1)!=null}function ah(){return og()||Nn(!1),$.useContext(r1).location}function C6(e){$.useContext(Nu).static||$.useLayoutEffect(e)}function js(){let{isDataRoute:e}=$.useContext(_l);return e?qse():Ise()}function Ise(){og()||Nn(!1);let e=$.useContext(t1),{basename:t,future:r,navigator:n}=$.useContext(Nu),{matches:i}=$.useContext(_l),{pathname:s}=ah(),o=JSON.stringify(x2(i,r.v7_relativeSplatPath)),a=$.useRef(!1);return C6(()=>{a.current=!0}),$.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){n.go(u);return}let d=M2(u,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Bc([t,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[t,n,o,s,e])}const jse=$.createContext(null);function $se(e){let t=$.useContext(_l).outlet;return t&&$.createElement(jse.Provider,{value:e},t)}function A6(){let{matches:e}=$.useContext(_l),t=e[e.length-1];return t?t.params:{}}function n1(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=$.useContext(Nu),{matches:i}=$.useContext(_l),{pathname:s}=ah(),o=JSON.stringify(x2(i,n.v7_relativeSplatPath));return $.useMemo(()=>M2(e,JSON.parse(o),s,r==="path"),[e,o,s,r])}function Nse(e,t){return Dse(e,t)}function Dse(e,t,r,n){og()||Nn(!1);let{navigator:i}=$.useContext(Nu),{matches:s}=$.useContext(_l),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=ah(),c;if(t){var d;let y=typeof t=="string"?sg(t):t;l==="/"||(d=y.pathname)!=null&&d.startsWith(l)||Nn(!1),c=y}else c=u;let h=c.pathname||"/",m=h;if(l!=="/"){let y=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=use(e,{pathname:m}),v=zse(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Bc([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Bc([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return t&&v?$.createElement(r1.Provider,{value:{location:d_({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Lc.Pop}},v):v}function Rse(){let e=Gse(),t=Ase(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),r?$.createElement("pre",{style:i},r):null,null)}const Lse=$.createElement(Rse,null);class Fse extends $.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?$.createElement(_l.Provider,{value:this.props.routeContext},$.createElement(E6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Bse(e){let{routeContext:t,match:r,children:n}=e,i=$.useContext(t1);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),$.createElement(_l.Provider,{value:t},n)}function zse(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var s;if(!r)return null;if(r.errors)e=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,a=(i=r)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&a?.[d.route.id]!==void 0);c>=0||Nn(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:m}=r,g=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,h)=>{let m,g=!1,v=null,y=null;r&&(m=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||Lse,l&&(u<0&&h===0?(Hse("route-fallback"),g=!0,y=null):u===h&&(g=!0,y=d.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,h+1)),w=()=>{let S;return m?S=v:g?S=y:d.route.Component?S=$.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=c,$.createElement(Bse,{match:d,routeContext:{outlet:c,matches:x,isDataRoute:r!=null},children:S})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?$.createElement(Fse,{location:r.location,revalidation:r.revalidation,component:v,error:m,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}var O6=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(O6||{}),k6=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(k6||{});function Use(e){let t=$.useContext(t1);return t||Nn(!1),t}function Vse(e){let t=$.useContext(P6);return t||Nn(!1),t}function Wse(e){let t=$.useContext(_l);return t||Nn(!1),t}function I6(e){let t=Wse(),r=t.matches[t.matches.length-1];return r.route.id||Nn(!1),r.route.id}function Gse(){var e;let t=$.useContext(E6),r=Vse(),n=I6();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function qse(){let{router:e}=Use(O6.UseNavigateStable),t=I6(k6.UseNavigateStable),r=$.useRef(!1);return C6(()=>{r.current=!0}),$.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,d_({fromRouteId:t},s)))},[e,t])}const dN={};function Hse(e,t,r){dN[e]||(dN[e]=!0)}function Kse(e){let{to:t,replace:r,state:n,relative:i}=e;og()||Nn(!1);let{future:s,static:o}=$.useContext(Nu),{matches:a}=$.useContext(_l),{pathname:l}=ah(),u=js(),c=M2(t,x2(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(c);return $.useEffect(()=>u(JSON.parse(d),{replace:r,state:n,relative:i}),[u,d,i,r,n]),null}function Xse(e){return $se(e.context)}function Ni(e){Nn(!1)}function Yse(e){let{basename:t="/",children:r=null,location:n,navigationType:i=Lc.Pop,navigator:s,static:o=!1,future:a}=e;og()&&Nn(!1);let l=t.replace(/^\/*/,"/"),u=$.useMemo(()=>({basename:l,navigator:s,static:o,future:d_({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=sg(n));let{pathname:c="/",search:d="",hash:h="",state:m=null,key:g="default"}=n,v=$.useMemo(()=>{let y=Sm(c,l);return y==null?null:{location:{pathname:y,search:d,hash:h,state:m,key:g},navigationType:i}},[l,c,d,h,m,g,i]);return v==null?null:$.createElement(Nu.Provider,{value:u},$.createElement(r1.Provider,{children:r,value:v}))}function Qse(e){let{children:t,location:r}=e;return Nse(AA(t),r)}new Promise(()=>{});function AA(e,t){t===void 0&&(t=[]);let r=[];return $.Children.forEach(e,(n,i)=>{if(!$.isValidElement(n))return;let s=[...t,i];if(n.type===$.Fragment){r.push.apply(r,AA(n.props.children,s));return}n.type!==Ni&&Nn(!1),!n.props.index||!n.props.children||Nn(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=AA(n.props.children,s)),r.push(o)}),r}function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jw.apply(this,arguments)}function j6(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Jse(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Zse(e,t){return e.button===0&&(!t||t==="_self")&&!Jse(e)}const eoe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],toe=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],roe="6";try{window.__reactRouterVersion=roe}catch{}const noe=$.createContext({isTransitioning:!1}),ioe="startTransition",fN=H5[ioe];function soe(e){let{basename:t,children:r,future:n,window:i}=e,s=$.useRef();s.current==null&&(s.current=ose({window:i,v5Compat:!0}));let o=s.current,[a,l]=$.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},c=$.useCallback(d=>{u&&fN?fN(()=>l(d)):l(d)},[l,u]);return $.useLayoutEffect(()=>o.listen(c),[o,c]),$.createElement(Yse,{basename:t,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const ooe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aoe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,loe=$.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d}=t,h=j6(t,eoe),{basename:m}=$.useContext(Nu),g,v=!1;if(typeof u=="string"&&aoe.test(u)&&(g=u,ooe))try{let S=new URL(window.location.href),M=u.startsWith("//")?new URL(S.protocol+u):new URL(u),T=Sm(M.pathname,m);M.origin===S.origin&&T!=null?u=T+M.search+M.hash:v=!0}catch{}let y=kse(u,{relative:i}),x=coe(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d});function w(S){n&&n(S),S.defaultPrevented||x(S)}return $.createElement("a",jw({},h,{href:g||y,onClick:v||s?n:w,ref:r,target:l}))}),ly=$.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:c}=t,d=j6(t,toe),h=n1(l,{relative:d.relative}),m=ah(),g=$.useContext(P6),{navigator:v,basename:y}=$.useContext(Nu),x=g!=null&&doe(h)&&u===!0,w=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,S=m.pathname,M=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;i||(S=S.toLowerCase(),M=M?M.toLowerCase():null,w=w.toLowerCase()),M&&y&&(M=Sm(M,y)||M);const T=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let P=S===w||!o&&S.startsWith(w)&&S.charAt(T)==="/",E=M!=null&&(M===w||!o&&M.startsWith(w)&&M.charAt(w.length)==="/"),A={isActive:P,isPending:E,isTransitioning:x},L=P?n:void 0,B;typeof s=="function"?B=s(A):B=[s,P?"active":null,E?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let V=typeof a=="function"?a(A):a;return $.createElement(loe,jw({},d,{"aria-current":L,className:B,ref:r,style:V,to:l,viewTransition:u}),typeof c=="function"?c(A):c)});var OA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(OA||(OA={}));var hN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(hN||(hN={}));function uoe(e){let t=$.useContext(t1);return t||Nn(!1),t}function coe(e,t){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=t===void 0?{}:t,l=js(),u=ah(),c=n1(e,{relative:o});return $.useCallback(d=>{if(Zse(d,r)){d.preventDefault();let h=n!==void 0?n:Iw(u)===Iw(c);l(e,{replace:h,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,n,i,r,e,s,o,a])}function doe(e,t){t===void 0&&(t={});let r=$.useContext(noe);r==null&&Nn(!1);let{basename:n}=uoe(OA.useViewTransitionState),i=n1(e,{relative:t.relative});if(!r.isTransitioning)return!1;let s=Sm(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Sm(r.nextLocation.pathname,n)||r.nextLocation.pathname;return CA(i.pathname,o)!=null||CA(i.pathname,s)!=null}var kA=function(e,t){return kA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},kA(e,t)};function $6(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");kA(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ao=function(){return Ao=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ao.apply(this,arguments)};function Jc(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function N6(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function D6(e,t){return function(r,n){t(r,n,e)}}function R6(e,t,r,n,i,s){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,c=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,h=!1,m=r.length-1;m>=0;m--){var g={};for(var v in n)g[v]=v==="access"?{}:n[v];for(var v in n.access)g.access[v]=n.access[v];g.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(x||null))};var y=(0,r[m])(a==="accessor"?{get:c.get,set:c.set}:c[l],g);if(a==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(d=o(y.get))&&(c.get=d),(d=o(y.set))&&(c.set=d),(d=o(y.init))&&i.unshift(d)}else(d=o(y))&&(a==="field"?i.unshift(d):c[l]=d)}u&&Object.defineProperty(u,n.name,c),h=!0}function L6(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function F6(e){return typeof e=="symbol"?e:"".concat(e)}function B6(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function z6(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function $t(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(e,t||[])).next())})}function U6(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(c){u=[6,c],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var i1=Object.create?(function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]});function V6(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&i1(t,e,r)}function $w(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function T2(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function W6(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(T2(arguments[t]));return e}function G6(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function S2(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function Pm(e){return this instanceof Pm?(this.v=e,this):new Pm(e)}function q6(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(g){return Promise.resolve(g).then(m,d)}}function a(m,g){n[m]&&(i[m]=function(v){return new Promise(function(y,x){s.push([m,v,y,x])>1||l(m,v)})},g&&(i[m]=g(i[m])))}function l(m,g){try{u(n[m](g))}catch(v){h(s[0][3],v)}}function u(m){m.value instanceof Pm?Promise.resolve(m.value.v).then(c,d):h(s[0][2],m)}function c(m){l("next",m)}function d(m){l("throw",m)}function h(m,g){m(g),s.shift(),s.length&&l(s[0][0],s[0][1])}}function H6(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,s){t[i]=e[i]?function(o){return(r=!r)?{value:Pm(e[i](o)),done:!1}:s?s(o):o}:s}}function K6(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof $w=="function"?$w(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(o){return new Promise(function(a,l){o=e[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}function X6(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var foe=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},IA=function(e){return IA=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},IA(e)};function Y6(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=IA(e),n=0;n<r.length;n++)r[n]!=="default"&&i1(t,e,r[n]);return foe(t,e),t}function Q6(e){return e&&e.__esModule?e:{default:e}}function J6(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function Z6(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function eG(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function tG(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var hoe=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function rG(e){function t(s){e.error=e.hasError?new hoe(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var r,n=0;function i(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(o){return t(o),i()})}else n|=1}catch(o){t(o)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function nG(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,s,o){return n?t?".jsx":".js":i&&(!s||!o)?r:i+s+"."+o.toLowerCase()+"js"}):e}const poe={__extends:$6,__assign:Ao,__rest:Jc,__decorate:N6,__param:D6,__esDecorate:R6,__runInitializers:L6,__propKey:F6,__setFunctionName:B6,__metadata:z6,__awaiter:$t,__generator:U6,__createBinding:i1,__exportStar:V6,__values:$w,__read:T2,__spread:W6,__spreadArrays:G6,__spreadArray:S2,__await:Pm,__asyncGenerator:q6,__asyncDelegator:H6,__asyncValues:K6,__makeTemplateObject:X6,__importStar:Y6,__importDefault:Q6,__classPrivateFieldGet:J6,__classPrivateFieldSet:Z6,__classPrivateFieldIn:eG,__addDisposableResource:tG,__disposeResources:rG,__rewriteRelativeImportExtension:nG},moe=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:tG,get __assign(){return Ao},__asyncDelegator:H6,__asyncGenerator:q6,__asyncValues:K6,__await:Pm,__awaiter:$t,__classPrivateFieldGet:J6,__classPrivateFieldIn:eG,__classPrivateFieldSet:Z6,__createBinding:i1,__decorate:N6,__disposeResources:rG,__esDecorate:R6,__exportStar:V6,__extends:$6,__generator:U6,__importDefault:Q6,__importStar:Y6,__makeTemplateObject:X6,__metadata:z6,__param:D6,__propKey:F6,__read:T2,__rest:Jc,__rewriteRelativeImportExtension:nG,__runInitializers:L6,__setFunctionName:B6,__spread:W6,__spreadArray:S2,__spreadArrays:G6,__values:$w,default:poe},Symbol.toStringTag,{value:"Module"})),goe="modulepreload",voe=function(e){return"/"+e},pN={},ag=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){let l=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=l(r.map(u=>{if(u=voe(u),u in pN)return;pN[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":goe,c||(h.as="script"),h.crossOrigin="",h.href=u,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},yoe=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ag(async()=>{const{default:n}=await Promise.resolve().then(()=>lh);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class P2 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class mN extends P2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class gN extends P2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class vN extends P2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var jA;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(jA||(jA={}));class _oe{constructor(t,{headers:r={},customFetch:n,region:i=jA.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=yoe(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return $t(this,arguments,void 0,function*(r,n={}){var i;try{const{headers:s,method:o,body:a,signal:l}=n;let u={},{region:c}=n;c||(c=this.region);const d=new URL(`${this.url}/${r}`);c&&c!=="any"&&(u["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(u["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(u["Content-Type"]="application/json",h=JSON.stringify(a)):h=a;const m=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:h,signal:l}).catch(x=>{throw x.name==="AbortError"?x:new mN(x)}),g=m.headers.get("x-relay-error");if(g&&g==="true")throw new gN(m);if(!m.ok)throw new vN(m);let v=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),y;return v==="application/json"?y=yield m.json():v==="application/octet-stream"||v==="application/pdf"?y=yield m.blob():v==="text/event-stream"?y=m:v==="multipart/form-data"?y=yield m.formData():y=yield m.text(),{data:y,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new mN(s)}:{data:null,error:s,response:s instanceof vN||s instanceof gN?s.context:void 0}}})}}var Qi={};const lg=G5(moe);var vb={},yb={},_b={},bb={},wb={},boe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Em=boe();const woe=Em.fetch,iG=Em.fetch.bind(Em),sG=Em.Headers,xoe=Em.Request,Moe=Em.Response,lh=Object.freeze(Object.defineProperty({__proto__:null,Headers:sG,Request:xoe,Response:Moe,default:iG,fetch:woe},Symbol.toStringTag,{value:"Module"})),Toe=G5(lh);var xb={},yN;function oG(){if(yN)return xb;yN=1,Object.defineProperty(xb,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return xb.default=e,xb}var _N;function aG(){if(_N)return wb;_N=1,Object.defineProperty(wb,"__esModule",{value:!0});const e=lg,t=e.__importDefault(Toe),r=e.__importDefault(oG());class n{constructor(s){var o,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(o=s.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=new Headers(this.headers),this.headers.set(s,o),this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,d,h,m;let g=null,v=null,y=null,x=u.status,w=u.statusText;if(u.ok){if(this.method!=="HEAD"){const P=await u.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?v=P:v=JSON.parse(P))}const M=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),T=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");M&&T&&T.length>1&&(y=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(g={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,y=null,x=406,w="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const M=await u.text();try{g=JSON.parse(M),Array.isArray(g)&&u.status===404&&(v=[],g=null,x=200,w="OK")}catch{u.status===404&&M===""?(x=204,w="No Content"):g={message:M}}if(g&&this.isMaybeSingle&&(!((m=g?.details)===null||m===void 0)&&m.includes("0 rows"))&&(g=null,x=200,w="OK"),g&&this.shouldThrowOnError)throw new r.default(g)}return{error:g,data:v,count:y,status:x,statusText:w}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,d,h;return{error:{message:`${(c=u?.name)!==null&&c!==void 0?c:"FetchError"}: ${u?.message}`,details:`${(d=u?.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=u?.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return wb.default=n,wb}var bN;function lG(){if(bN)return bb;bN=1,Object.defineProperty(bb,"__esModule",{value:!0});const t=lg.__importDefault(aG());class r extends t.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const d=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return bb.default=r,bb}var wN;function E2(){if(wN)return _b;wN=1,Object.defineProperty(_b,"__esModule",{value:!0});const t=lg.__importDefault(lG());class r extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${u}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return _b.default=r,_b}var xN;function uG(){if(xN)return yb;xN=1,Object.defineProperty(yb,"__esModule",{value:!0});const t=lg.__importDefault(E2());class r{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=a}select(i,s){const{head:o=!1,count:a}=s??{},l=o?"HEAD":"GET";let u=!1;const c=(i??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",c),a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var u;const c="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(d.length>0){const h=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:s}={}){var o;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return yb.default=r,yb}var MN;function Soe(){if(MN)return vb;MN=1,Object.defineProperty(vb,"__esModule",{value:!0});const e=lg,t=e.__importDefault(uG()),r=e.__importDefault(E2());class n{constructor(s,{headers:o={},schema:a,fetch:l}={}){this.url=s,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(s){const o=new URL(`${this.url}/${s}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new n(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:a=!1,get:l=!1,count:u}={}){var c;let d;const h=new URL(`${this.url}/rpc/${s}`);let m;a||l?(d=a?"HEAD":"GET",Object.entries(o).filter(([v,y])=>y!==void 0).map(([v,y])=>[v,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([v,y])=>{h.searchParams.append(v,y)})):(d="POST",m=o);const g=new Headers(this.headers);return u&&g.set("Prefer",`count=${u}`),new r.default({method:d,url:h,headers:g,schema:this.schemaName,body:m,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return vb.default=n,vb}var TN;function Poe(){if(TN)return Qi;TN=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.PostgrestError=Qi.PostgrestBuilder=Qi.PostgrestTransformBuilder=Qi.PostgrestFilterBuilder=Qi.PostgrestQueryBuilder=Qi.PostgrestClient=void 0;const e=lg,t=e.__importDefault(Soe());Qi.PostgrestClient=t.default;const r=e.__importDefault(uG());Qi.PostgrestQueryBuilder=r.default;const n=e.__importDefault(E2());Qi.PostgrestFilterBuilder=n.default;const i=e.__importDefault(lG());Qi.PostgrestTransformBuilder=i.default;const s=e.__importDefault(aG());Qi.PostgrestBuilder=s.default;const o=e.__importDefault(oG());return Qi.PostgrestError=o.default,Qi.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},Qi}var Eoe=Poe();const Coe=Dr(Eoe),{PostgrestClient:Aoe,PostgrestQueryBuilder:Hje,PostgrestFilterBuilder:Kje,PostgrestTransformBuilder:Xje,PostgrestBuilder:Yje,PostgrestError:Qje}=Coe;class Ooe{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const koe="2.76.1",Ioe=`realtime-js/${koe}`,joe="1.0.0",$A=1e4,$oe=1e3,Noe=100;var Uy;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Uy||(Uy={}));var li;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(li||(li={}));var ya;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ya||(ya={}));var NA;(function(e){e.websocket="websocket"})(NA||(NA={}));var Of;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Of||(Of={}));class Doe{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const i=r.getUint8(1),s=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(t.slice(o,o+i));o=o+i;const l=n.decode(t.slice(o,o+s));o=o+s;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class cG{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var on;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(on||(on={}));const SN=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((s,o)=>(s[o]=Roe(o,e,t,i),s),{}):{}},Roe=(e,t,r,n)=>{const i=t.find(a=>a.name===e),s=i?.type,o=r[e];return s&&!n.includes(s)?dG(s,o):DA(o)},dG=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return zoe(t,r)}switch(e){case on.bool:return Loe(t);case on.float4:case on.float8:case on.int2:case on.int4:case on.int8:case on.numeric:case on.oid:return Foe(t);case on.json:case on.jsonb:return Boe(t);case on.timestamp:return Uoe(t);case on.abstime:case on.date:case on.daterange:case on.int4range:case on.int8range:case on.money:case on.reltime:case on.text:case on.time:case on.timestamptz:case on.timetz:case on.tsrange:case on.tstzrange:return DA(t);default:return DA(t)}},DA=e=>e,Loe=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Foe=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Boe=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},zoe=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const o=e.slice(1,r);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>dG(t,a))}return e},Uoe=e=>typeof e=="string"?e.replace(" ","T"):e,fG=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class CM{constructor(t,r,n={},i=$A){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var PN;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(PN||(PN={}));class Vy{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vy.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Vy.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Vy.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const s=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=s[u];if(d){const h=c.map(y=>y.presence_ref),m=d.map(y=>y.presence_ref),g=c.filter(y=>m.indexOf(y.presence_ref)<0),v=d.filter(y=>h.indexOf(y.presence_ref)<0);g.length>0&&(a[u]=g),v.length>0&&(l[u]=v)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},n,i)}static syncDiff(t,r,n,i){const{joins:s,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const d=t[a].map(m=>m.presence_ref),h=c.filter(m=>d.indexOf(m.presence_ref)<0);t[a].unshift(...h)}n(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),t[a]=u,i(a,u,l),u.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var EN;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(EN||(EN={}));var Wy;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Wy||(Wy={}));var yu;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yu||(yu={}));class C2{constructor(t,r={config:{}},n){var i,s;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=li.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new CM(this,ya.join,this.params,this.timeout),this.rejoinTimer=new cG(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=li.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=li.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=li.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=li.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=li.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ya.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Vy(this),this.broadcastEndpointURL=fG(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==li.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[Wy.PRESENCE]&&this.bindings[Wy.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,d={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>t?.(yu.CHANNEL_ERROR,m)),this._onClose(()=>t?.(yu.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){t?.(yu.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,y=(g=v?.length)!==null&&g!==void 0?g:0,x=[];for(let w=0;w<y;w++){const S=v[w],{filter:{event:M,schema:T,table:P,filter:E}}=S,A=m&&m[w];if(A&&A.event===M&&A.schema===T&&A.table===P&&A.filter===E)x.push(Object.assign(Object.assign({},S),{id:A.id}));else{this.unsubscribe(),this.state=li.errored,t?.(yu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(yu.SUBSCRIBED);return}}).receive("error",m=>{this.state=li.errored,t?.(yu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t?.(yu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===li.joined&&t===Wy.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=li.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ya.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new CM(this,ya.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=li.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new CM(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Noe){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,s;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=ya;if(n&&[a,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var g,v,y;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(v=m.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var g,v,y,x,w,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const M=m.id,T=(g=m.filter)===null||g===void 0?void 0:g.event;return M&&((v=r.ids)===null||v===void 0?void 0:v.includes(M))&&(T==="*"||T?.toLocaleLowerCase()===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const M=(w=(x=m?.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return M==="*"||M===((S=r?.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:y,commit_timestamp:x,type:w,errors:S}=g;h=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:x,eventType:w,new:{},old:{},errors:S}),this._getPayloadRecords(g))}m.callback(h,n)})}_isClosed(){return this.state===li.closed}_isJoined(){return this.state===li.joined}_isJoining(){return this.state===li.joining}_isLeaving(){return this.state===li.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&C2.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ya.close,{},t)}_onError(t){this._on(ya.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=li.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=SN(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=SN(t.columns,t.old_record)),r}}const AM=()=>{},Mb={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Voe=[1e3,2e3,5e3,1e4],Woe=1e4,Goe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qoe{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=$A,this.transport=null,this.heartbeatIntervalMs=Mb.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=AM,this.ref=0,this.reconnectTimer=null,this.logger=AM,this.conn=null,this.sendBuffer=[],this.serializer=new Doe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>ag(async()=>{const{default:a}=await Promise.resolve().then(()=>lh);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${NA.websocket}`,this.httpEndpoint=fG(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ooe.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:joe}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Uy.connecting:return Of.Connecting;case Uy.open:return Of.Open;case Uy.closing:return Of.Closing;default:return Of.Closed}}isConnected(){return this.connectionState()===Of.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new C2(`realtime:${t}`,r,this);return this.channels.push(s),s}}push(t){const{topic:r,event:n,payload:i,ref:s}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close($oe,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Mb.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:s,ref:o}=r,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${n} ${i} ${a}`.trim(),s),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ya.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Goe],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:Ioe};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(ya.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new cG(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Mb.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,s,o,a,l,u,c;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:$A,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:Mb.HEARTBEAT_INTERVAL,this.worker=(s=t?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:AM,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t?.reconnectAfterMs)!==null&&l!==void 0?l:(d=>Voe[d-1]||Woe),this.encode=(u=t?.encode)!==null&&u!==void 0?u:((d,h)=>h(JSON.stringify(d))),this.decode=(c=t?.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class A2 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function jn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Hoe extends A2{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class RA extends A2{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const O2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ag(async()=>{const{default:n}=await Promise.resolve().then(()=>lh);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Koe=()=>$t(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ag(()=>Promise.resolve().then(()=>lh),void 0)).Response:Response}),LA=e=>{if(Array.isArray(e))return e.map(r=>LA(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=LA(n)}),t},Xoe=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},OM=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Yoe=(e,t,r)=>$t(void 0,void 0,void 0,function*(){const n=yield Koe();e instanceof n&&!r?.noResolveJson?e.json().then(i=>{const s=e.status||500,o=i?.statusCode||s+"";t(new Hoe(OM(i),s,o))}).catch(i=>{t(new RA(OM(i),i))}):t(new RA(OM(e),e))}),Qoe=(e,t,r,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!n?i:(Xoe(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(n)):i.body=n,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r))};function l0(e,t,r,n,i,s){return $t(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,Qoe(t,n,i,s)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Yoe(l,a,n))})})}function f_(e,t,r,n){return $t(this,void 0,void 0,function*(){return l0(e,"GET",t,r,n)})}function va(e,t,r,n,i){return $t(this,void 0,void 0,function*(){return l0(e,"POST",t,n,i,r)})}function FA(e,t,r,n,i){return $t(this,void 0,void 0,function*(){return l0(e,"PUT",t,n,i,r)})}function Joe(e,t,r,n){return $t(this,void 0,void 0,function*(){return l0(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function k2(e,t,r,n,i){return $t(this,void 0,void 0,function*(){return l0(e,"DELETE",t,n,i,r)})}class Zoe{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return $t(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(jn(t))return{data:null,error:t};throw t}})}}var hG;class eae{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[hG]="BlobDownloadBuilder",this.promise=null}asStream(){return new Zoe(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return $t(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(jn(t))return{data:null,error:t};throw t}})}}hG=Symbol.toStringTag;const tae={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},CN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class rae{constructor(t,r={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=O2(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,i){return $t(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},CN),i);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(r),c=this._getFinalPath(u),d=yield(t=="PUT"?FA:va)(this.fetch,`${this.url}/object/${c}`,s,Object.assign({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jn(s))return{data:null,error:s};throw s}})}upload(t,r,n){return $t(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return $t(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:CN.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield FA(this.fetch,a.toString(),l,{headers:c});return{data:{path:s,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(jn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return $t(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r?.upsert&&(i["x-upsert"]="true");const s=yield va(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new A2("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}update(t,r,n){return $t(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return $t(this,void 0,void 0,function*(){try{return{data:yield va(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}copy(t,r,n){return $t(this,void 0,void 0,function*(){try{return{data:{path:(yield va(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return $t(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield va(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return $t(this,void 0,void 0,function*(){try{const i=yield va(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}download(t,r){const i=typeof r?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(r?.transform||{}),o=s?`?${s}`:"",a=this._getFinalPath(t),l=()=>f_(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new eae(l,this.shouldThrowOnError)}info(t){return $t(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield f_(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:LA(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}exists(t){return $t(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Joe(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n)&&n instanceof RA){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],s=r?.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const a=typeof r?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(r?.transform||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(t){return $t(this,void 0,void 0,function*(){try{return{data:yield k2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}list(t,r,n){return $t(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},tae),r),{prefix:t||""});return{data:yield va(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}listV2(t,r){return $t(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield va(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const pG="2.76.1",mG={"X-Client-Info":`storage-js/${pG}`};class nae{constructor(t,r={},n,i){this.shouldThrowOnError=!1;const s=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mG),r),this.fetch=O2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return $t(this,void 0,void 0,function*(){try{return{data:yield f_(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(jn(t))return{data:null,error:t};throw t}})}getBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:yield f_(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}createBucket(t){return $t(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield va(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}updateBucket(t,r){return $t(this,void 0,void 0,function*(){try{return{data:yield FA(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}emptyBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:yield va(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:yield k2(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}}class iae{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mG),r),this.fetch=O2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:yield va(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}listBuckets(t){return $t(this,void 0,void 0,function*(){try{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`,s=yield f_(this.fetch,i,{headers:this.headers});return{data:Array.isArray(s)?s.filter(a=>a.type==="ANALYTICS"):[],error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:yield k2(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}}const I2={"X-Client-Info":`storage-js/${pG}`,"Content-Type":"application/json"};class gG extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Hs(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class kM extends gG{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class sae extends gG{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var AN;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(AN||(AN={}));const j2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ag(async()=>{const{default:n}=await Promise.resolve().then(()=>lh);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},oae=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ON=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),aae=(e,t,r)=>$t(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const i=e.status||500,s=e;if(typeof s.json=="function")s.json().then(o=>{const a=o?.statusCode||o?.code||i+"";t(new kM(ON(o),i,a))}).catch(()=>{const o=i+"",a=s.statusText||`HTTP ${i} error`;t(new kM(a,i,o))});else{const o=i+"",a=s.statusText||`HTTP ${i} error`;t(new kM(a,i,o))}}else t(new sae(ON(e),e))}),lae=(e,t,r,n)=>{const i={method:e,headers:t?.headers||{}};return n?(oae(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function uae(e,t,r,n,i,s){return $t(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,lae(t,n,i,s)).then(l=>{if(!l.ok)throw l;if(n?.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>aae(l,a,n))})})}function Ks(e,t,r,n,i){return $t(this,void 0,void 0,function*(){return uae(e,"POST",t,n,i,r)})}class cae{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},I2),r),this.fetch=j2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return $t(this,void 0,void 0,function*(){try{return{data:(yield Ks(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hs(r))return{data:null,error:r};throw r}})}getIndex(t,r){return $t(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hs(n))return{data:null,error:n};throw n}})}listIndexes(t){return $t(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hs(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return $t(this,void 0,void 0,function*(){try{return{data:(yield Ks(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hs(n))return{data:null,error:n};throw n}})}}class dae{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},I2),r),this.fetch=j2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return $t(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ks(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hs(r))return{data:null,error:r};throw r}})}getVectors(t){return $t(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hs(r))return{data:null,error:r};throw r}})}listVectors(t){return $t(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Ks(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hs(r))return{data:null,error:r};throw r}})}queryVectors(t){return $t(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hs(r))return{data:null,error:r};throw r}})}deleteVectors(t){return $t(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ks(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hs(r))return{data:null,error:r};throw r}})}}class fae{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},I2),r),this.fetch=j2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:(yield Ks(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hs(r))return{data:null,error:r};throw r}})}getBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hs(r))return{data:null,error:r};throw r}})}listBuckets(){return $t(this,arguments,void 0,function*(t={}){try{return{data:yield Ks(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hs(r))return{data:null,error:r};throw r}})}deleteBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:(yield Ks(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hs(r))return{data:null,error:r};throw r}})}}class hae extends fae{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new pae(this.url,this.headers,t,this.fetch)}}class pae extends cae{constructor(t,r,n,i){super(t,r,i),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return $t(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return $t(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return $t(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return $t(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new mae(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class mae extends dae{constructor(t,r,n,i,s){super(t,r,s),this.vectorBucketName=n,this.indexName=i}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return $t(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return $t(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return $t(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return $t(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return $t(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class gae extends nae{constructor(t,r={},n,i){super(t,r,n,i)}from(t){return new rae(this.url,this.headers,t,this.fetch)}get vectors(){return new hae(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new iae(this.url+"/iceberg",this.headers,this.fetch)}}const vae="2.76.1";let Oy="";typeof Deno<"u"?Oy="deno":typeof document<"u"?Oy="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Oy="react-native":Oy="node";const yae={"X-Client-Info":`supabase-js-${Oy}/${vae}`},_ae={headers:yae},bae={schema:"public"},wae={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xae={},Mae=e=>{let t;return e?t=e:typeof fetch>"u"?t=iG:t=fetch,(...r)=>t(...r)},Tae=()=>typeof Headers>"u"?sG:Headers,Sae=(e,t,r)=>{const n=Mae(r),i=Tae();return async(s,o)=>{var a;const l=(a=await t())!==null&&a!==void 0?a:e;let u=new i(o?.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},o),{headers:u}))}};function Pae(e){return e.endsWith("/")?e:e+"/"}function Eae(e,t){var r,n;const{db:i,auth:s,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:d}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(r=d?.headers)!==null&&r!==void 0?r:{}),(n=a?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function Cae(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Pae(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const vG="2.76.1",Jp=30*1e3,BA=3,IM=BA*Jp,Aae="http://localhost:9999",Oae="supabase.auth.token",kae={"X-Client-Info":`gotrue-js/${vG}`},zA="X-Supabase-Api-Version",yG={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Iae=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jae=600*1e3;class h_ extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function zt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class $ae extends h_{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Nae(e){return zt(e)&&e.name==="AuthApiError"}class kf extends h_{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Zc extends h_{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class jc extends Zc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Dae(e){return zt(e)&&e.name==="AuthSessionMissingError"}class Fp extends Zc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Tb extends Zc{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Sb extends Zc{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Rae(e){return zt(e)&&e.name==="AuthImplicitGrantRedirectError"}class kN extends Zc{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class UA extends Zc{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function jM(e){return zt(e)&&e.name==="AuthRetryableFetchError"}class IN extends Zc{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class VA extends Zc{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Nw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jN=` 	
\r=`.split(""),Lae=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<jN.length;t+=1)e[jN[t].charCodeAt(0)]=-2;for(let t=0;t<Nw.length;t+=1)e[Nw[t].charCodeAt(0)]=t;return e})();function $N(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Nw[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Nw[n]),t.queuedBits-=6}}function _G(e,t,r){const n=Lae[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function NN(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{zae(o,n,r)};for(let o=0;o<e.length;o+=1)_G(e.charCodeAt(o),i,s);return t.join("")}function Fae(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Bae(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}Fae(n,t)}}function zae(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function mm(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)_G(e.charCodeAt(i),r,n);return new Uint8Array(t)}function Uae(e){const t=[];return Bae(e,r=>t.push(r)),new Uint8Array(t)}function Nf(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>$N(i,r,n)),$N(null,r,n),t.join("")}function Vae(e){return Math.round(Date.now()/1e3)+e}function Wae(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Us=()=>typeof window<"u"&&typeof document<"u",pf={tested:!1,writable:!1},bG=()=>{if(!Us())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pf.tested)return pf.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),pf.tested=!0,pf.writable=!0}catch{pf.tested=!0,pf.writable=!1}return pf.writable};function Gae(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const wG=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ag(async()=>{const{default:n}=await Promise.resolve().then(()=>lh);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},qae=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Zp=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},mf=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Cc=async(e,t)=>{await e.removeItem(t)};class s1{constructor(){this.promise=new s1.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}s1.promiseConstructor=Promise;function $M(e){const t=e.split(".");if(t.length!==3)throw new VA("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Iae.test(t[n]))throw new VA("JWT not in base64url format");return{header:JSON.parse(NN(t[0])),payload:JSON.parse(NN(t[1])),signature:mm(t[2]),raw:{header:t[0],payload:t[1]}}}async function Hae(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Kae(e,t){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){n(o);return}}catch(o){if(!t(s,o)){i(o);return}}})()})}function Xae(e){return("0"+e.toString(16)).substr(-2)}function Yae(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,Xae).join("")}async function Qae(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Jae(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Qae(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bp(e,t,r=!1){const n=Yae();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Zp(e,`${t}-code-verifier`,i);const s=await Jae(n);return[s,n===s?"plain":"s256"]}const Zae=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ele(e){const t=e.headers.get(zA);if(!t||!t.match(Zae))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function tle(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function rle(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nle=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zp(e){if(!nle.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function NM(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function DN(e){return JSON.parse(JSON.stringify(e))}const Tf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ile=[502,503,504];async function RN(e){var t;if(!qae(e))throw new UA(Tf(e),0);if(ile.includes(e.status))throw new UA(Tf(e),e.status);let r;try{r=await e.json()}catch(s){throw new kf(Tf(s),s)}let n;const i=ele(e);if(i&&i.getTime()>=yG["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new IN(Tf(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new jc}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new IN(Tf(r),e.status,r.weak_password.reasons);throw new $ae(Tf(r),e.status||500,n)}const sle=(e,t,r,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function nr(e,t,r,n){var i;const s=Object.assign({},n?.headers);s[zA]||(s[zA]=yG["2024-01-01"].name),n?.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await ole(e,t,r+a,{headers:s,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function ole(e,t,r,n,i,s){const o=sle(t,n,i,s);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new UA(Tf(l),0)}if(a.ok||await RN(a),n?.noResolveJson)return a;try{return await a.json()}catch(l){await RN(l)}}function ha(e){var t;let r=null;ule(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Vae(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function LN(e){const t=ha(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Rc(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function ale(e){return{data:e,error:null}}function lle(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=e,o=Jc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function FN(e){return e}function ule(e){return e.access_token&&e.refresh_token&&e.expires_in}const DM=["global","local","others"];class cle{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=wG(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=DM[0]){if(DM.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${DM.join(", ")}`);try{return await nr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(zt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await nr(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Rc})}catch(n){if(zt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Jc(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await nr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:lle,redirectTo:r?.redirectTo})}catch(r){if(zt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await nr(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Rc})}catch(r){if(zt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await nr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:FN});if(c.error)throw c.error;const d=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);u[`${y}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(zt(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){zp(t);try{return await nr(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Rc})}catch(r){if(zt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){zp(t);try{return await nr(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Rc})}catch(n){if(zt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){zp(t);try{return await nr(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Rc})}catch(n){if(zt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){zp(t.userId);try{const{data:r,error:n}=await nr(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(zt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){zp(t.userId),zp(t.id);try{return{data:await nr(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(zt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await nr(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:FN});if(c.error)throw c.error;const d=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);u[`${y}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(zt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await nr(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(zt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await nr(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(zt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await nr(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(zt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await nr(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(zt(r))return{data:null,error:r};throw r}}}function BN(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Up={debug:!!(globalThis&&bG()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class xG extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class dle extends xG{}async function fle(e,t,r){Up.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Up.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Up.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{Up.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Up.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new dle(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Up.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function hle(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function MG(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function ple(e){return parseInt(e,16)}function mle(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function gle(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:d,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=MG(e.address),g=c?`${c}://${n}`:n,v=e.statement?`${e.statement}
`:"",y=`${g} wants you to sign in with your Ethereum account:
${m}

${v}`;let x=`URI: ${d}
Version: ${h}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),a&&(x+=`
Not Before: ${a.toISOString()}`),l&&(x+=`
Request ID: ${l}`),u){let w=`
Resources:`;for(const S of u){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);w+=`
- ${S}`}x+=w}return`${y}
${x}`}class Zn extends Error{constructor({message:t,code:r,cause:n,name:i}){var s;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=i??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class Dw extends Zn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function vle({error:e,options:t}){var r,n,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Zn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Zn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Zn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Zn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Zn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Zn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Zn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Zn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(TG(o)){if(s.rp.id!==o)return new Zn({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Zn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Zn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Zn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Zn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function yle({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Zn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Zn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(TG(n)){if(r.rpId!==n)return new Zn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Zn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Zn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Zn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class _le{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const ble=new _le;function wle(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=Jc(e,["challenge","user","excludeCredentials"]),s=mm(t).buffer,o=Object.assign(Object.assign({},r),{id:mm(r.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:mm(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function xle(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Jc(e,["challenge","allowCredentials"]),i=mm(t).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:mm(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function Mle(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Nf(new Uint8Array(e.response.attestationObject)),clientDataJSON:Nf(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Tle(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Nf(new Uint8Array(i.authenticatorData)),clientDataJSON:Nf(new Uint8Array(i.clientDataJSON)),signature:Nf(new Uint8Array(i.signature)),userHandle:i.userHandle?Nf(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function TG(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function zN(){var e,t;return!!(Us()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Sle(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Dw("Browser returned unexpected credential type",t)}:{data:null,error:new Dw("Empty credential response",t)}}catch(t){return{data:null,error:vle({error:t,options:e})}}}async function Ple(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Dw("Browser returned unexpected credential type",t)}:{data:null,error:new Dw("Empty credential response",t)}}catch(t){return{data:null,error:yle({error:t,options:e})}}}const Ele={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Cle={userVerification:"preferred",hints:["security-key"]};function Rw(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of e)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))n[s]=o;else if(r(o))n[s]=o;else if(t(o)){const a=n[s];t(a)?n[s]=Rw(a,o):n[s]=Rw(o)}else n[s]=o}return n}function Ale(e,t){return Rw(Ele,e,t||{})}function Ole(e,t){return Rw(Cle,e,t||{})}class kle{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:a};const l=i??ble.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Ale(o.webauthn.credential_options.publicKey,s?.create),{data:c,error:d}=await Sle({publicKey:u,signal:l});return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}case"request":{const u=Ole(o.webauthn.credential_options.publicKey,s?.request),{data:c,error:d}=await Ple(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}}}catch(o){return zt(o)?{data:null,error:o}:{data:null,error:new kf("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!r)return{data:null,error:new h_("rpId is required for WebAuthn authentication")};try{if(!zN())return{data:null,error:new kf("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return zt(o)?{data:null,error:o}:{data:null,error:new kf("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!r)return{data:null,error:new h_("rpId is required for WebAuthn registration")};try{if(!zN())return{data:null,error:new kf("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c?.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return zt(o)?{data:null,error:o}:{data:null,error:new kf("Unexpected error in register",o)}}}}hle();const Ile={url:Aae,storageKey:Oae,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:kae,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function UN(e,t,r){return await r()}const Vp={};class p_{get jwks(){var t,r;return(r=(t=Vp[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Vp[this.storageKey]=Object.assign(Object.assign({},Vp[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Vp[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Vp[this.storageKey]=Object.assign(Object.assign({},Vp[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=p_.nextInstanceID,p_.nextInstanceID+=1,this.instanceID>0&&Us()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Ile),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new cle({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=wG(i.fetch),this.lock=i.lock||UN,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Us()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=fle:this.lock=UN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new kle(this)},this.persistSession?(i.storage?this.storage=i.storage:bG()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=BN(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=BN(this.memoryStorage)),Us()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${vG}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Gae(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Us()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Rae(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return zt(r)?{error:r}:{error:new kf("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const s=await nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:ha}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(zt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var r,n,i;try{let s;if("email"in t){const{email:c,password:d,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Bp(this.storage,this.storageKey)),s=await nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:c,password:d,data:(r=h?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:m,code_challenge_method:g},xform:ha})}else if("phone"in t){const{phone:c,password:d,options:h}=t;s=await nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=h?.data)!==null&&n!==void 0?n:{},channel:(i=h?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:ha})}else throw new Tb("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(zt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let r;if("email"in t){const{email:s,password:o,options:a}=t;r=await nr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:LN})}else if("phone"in t){const{phone:s,password:o,options:a}=t;r=await nr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:LN})}else throw new Tb("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Fp}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(zt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,i,s,o,a,l,u,c,d,h;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:v,wallet:y,statement:x,options:w}=t;let S;if(Us())if(typeof y=="object")S=y;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")S=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const M=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href),T=await S.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=MG(T[0]);let E=(n=w?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!E){const L=await S.request({method:"eth_chainId"});E=ple(L)}const A={domain:M.host,address:P,statement:x,uri:M.href,version:"1",chainId:E,nonce:(i=w?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=w?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=w?.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=w?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=w?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=w?.signInWithEthereum)===null||c===void 0?void 0:c.resources};m=gle(A),g=await S.request({method:"personal_sign",params:[mle(m),P]})}try{const{data:v,error:y}=await nr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:ha});if(y)throw y;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Fp}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:y})}catch(v){if(zt(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var r,n,i,s,o,a,l,u,c,d,h,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:y,wallet:x,statement:w,options:S}=t;let M;if(Us())if(typeof x=="object")M=x;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))M=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!S?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=x}const T=new URL((r=S?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in M&&M.signIn){const P=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S?.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),w?{statement:w}:null));let E;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")E=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)E=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)g=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),v=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${T.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(i=(n=S?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=S?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((a=S?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((l=S?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((u=S?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((d=(c=S?.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...S.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const P=await M.signMessage(new TextEncoder().encode(g),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=P}}try{const{data:y,error:x}=await nr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Nf(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ha});if(x)throw x;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Fp}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:x})}catch(y){if(zt(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const r=await mf(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:s,error:o}=await nr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ha});if(await Cc(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Fp}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(zt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:s,nonce:o}=t,a=await nr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:ha}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Fp}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(zt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,i,s,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Bp(this.storage,this.storageKey));const{error:d}=await nr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await nr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:c}}throw new Tb("You must provide either an email or phone number.")}catch(a){if(zt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var r,n;try{let i,s;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await nr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ha});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(zt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var r,n,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Bp(this.storage,this.storageKey)),await nr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:ale})}catch(s){if(zt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new jc;const{error:i}=await nr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(zt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:s}=t,{error:o}=await nr(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:i,options:s}=t,{data:o,error:a}=await nr(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:a}}throw new Tb("You must provide either an email or phone number and a type")}catch(r){if(zt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await mf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<IM:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await mf(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=NM()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await nr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Rc}):await this._useSession(async r=>{var n,i,s;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jc}:await nr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Rc})})}catch(r){if(zt(r))return Dae(r)&&(await this._removeSession(),await Cc(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new jc;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Bp(this.storage,this.storageKey));const{data:u,error:c}=await nr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Rc});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(zt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new jc;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:o}=$M(t.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;s={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(zt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new jc;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(zt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Us())throw new Sb("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Sb(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new kN("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Sb("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new kN("No code detected.");const{data:w,error:S}=await this._exchangeCodeForSession(t.code);if(S)throw S;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!s||!a||!o||!u)throw new Sb("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let h=c+d;l&&(h=parseInt(l));const m=h-c;m*1e3<=Jp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const g=h-d;c-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,c):c-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,c);const{data:v,error:y}=await this._getUser(s);if(y)throw y;const x={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:h,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(zt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await mf(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{error:s};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(Nae(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Cc(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Wae(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Bp(this.storage,this.storageKey,!0));try{return await nr(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(zt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(zt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:d,error:h}=s;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await nr(this.fetch,"GET",m,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Us()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(zt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:s}}=r;if(i)throw i;const{options:o,provider:a,token:l,access_token:u,nonce:c}=t,d=await nr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:ha}),{data:h,error:m}=d;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Fp}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:m})}catch(i){if(zt(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)throw o;return await nr(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(zt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Kae(async i=>(i>0&&await Hae(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await nr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ha})),(i,s)=>{const o=200*Math.pow(2,i);return s&&jM(s)&&Date.now()+o-n<Jp})}catch(n){if(this._debug(r,"error",n),zt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Us()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await mf(this.storage,this.storageKey);if(i&&this.userStorage){let o=await mf(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Zp(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o?.user)!==null&&t!==void 0?t:NM()}else if(i&&!i.user&&!i.user){const o=await mf(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await Cc(this.storage,this.storageKey+"-user"),await Zp(this.storage,this.storageKey,i)):i.user=NM()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<IM;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${IM}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),jM(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new jc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new s1;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new jc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),zt(s)){const o={data:null,error:s};return jM(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Zp(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=DN(i);await Zp(this.storage,this.storageKey,s)}else{const i=DN(r);await Zp(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Cc(this.storage,this.storageKey),await Cc(this.storage,this.storageKey+"-code-verifier"),await Cc(this.storage,this.storageKey+"-user"),this.userStorage&&await Cc(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Us()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Jp);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/Jp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Jp}ms, refresh threshold is ${BA} ticks`),i<=BA&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof xG)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Us()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await Bp(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n?.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?{data:null,error:s}:await nr(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(zt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=await nr(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&l.type==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(zt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{data:null,error:s};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Mle(t.webauthn.credential_response):Tle(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await nr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(zt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return{data:null,error:s};const o=await nr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:wle(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:xle(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(zt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=r?.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=$M(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+jae>i)return n;const{data:s,error:o}=await nr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};n=m.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=$M(n);r?.allowExpired||tle(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:s,header:i,signature:o},error:null}}const c=rle(i.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,Uae(`${a}.${l}`)))throw new VA("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(zt(n))return{data:null,error:n};throw n}}}p_.nextInstanceID=0;const jle=p_;class $le extends jle{constructor(t){super(t)}}class Nle{constructor(t,r,n){var i,s,o;this.supabaseUrl=t,this.supabaseKey=r;const a=Cae(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:bae,realtime:xae,auth:Object.assign(Object.assign({},wae),{storageKey:l}),global:_ae},c=Eae(n??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=Sae(r,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new Aoe(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new gae(this.storageUrl.href,this.headers,this.fetch,n?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new _oe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:u},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $le({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,flowType:a,lock:l,debug:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new qoe(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Dle=(e,t,r)=>new Nle(e,t,r);function Rle(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Rle()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Lle="https://cjexzkadgrslxsjphhpb.supabase.co",Fle="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNqZXh6a2FkZ3JzbHhzanBoaHBiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEzOTc1NjcsImV4cCI6MjA3Njk3MzU2N30.5_2Nt309ugNce_CH8eXsOi60zXvxoiEk08e5nfJGQmE",Mr=Dle(Lle,Fle,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),SG=$.createContext(void 0),Oa=()=>{const e=$.useContext(SG);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},Ble=({children:e})=>{const[t,r]=$.useState(null),[n,i]=$.useState(null),[s,o]=$.useState(!0);$.useEffect(()=>{const{data:{subscription:d}}=Mr.auth.onAuthStateChange((h,m)=>{i(m),r(m?.user??null),o(!1)});return Mr.auth.getSession().then(({data:{session:h}})=>{i(h),r(h?.user??null),o(!1)}),()=>d.unsubscribe()},[]);const c={user:t,session:n,signUp:async(d,h,m,g,v,y)=>{const x=`${window.location.origin}/`,{error:w}=await Mr.auth.signUp({email:d,password:h,options:{emailRedirectTo:x,data:{full_name:m||"",age_group:g||null,gender:v||null,region:y||null}}});return{error:w}},signIn:async(d,h)=>{const{error:m}=await Mr.auth.signInWithPassword({email:d,password:h});return{error:m}},signOut:async()=>{await Mr.auth.signOut()},loading:s};return _.jsx(SG.Provider,{value:c,children:e})},zle=({children:e})=>{const{user:t,loading:r}=Oa();return r?_.jsx("div",{className:"min-h-screen flex items-center justify-center",children:_.jsx(T8,{className:"h-8 w-8 animate-spin text-outfit-primary"})}):t?_.jsx(_.Fragment,{children:e}):_.jsx(Kse,{to:"/auth",replace:!0})},Ule=()=>_.jsxs("nav",{className:"bottom-nav",children:[_.jsxs(ly,{to:"/",className:({isActive:e})=>`bottom-nav-item ${e?"active":""}`,end:!0,children:[_.jsx(Fte,{className:"bottom-nav-icon"}),_.jsx("span",{children:"Home"})]}),_.jsxs(ly,{to:"/wardrobe",className:({isActive:e})=>`bottom-nav-item ${e?"active":""}`,children:[_.jsx(S8,{className:"bottom-nav-icon"}),_.jsx("span",{children:"Wardrobe"})]}),_.jsxs(ly,{to:"/analytics",className:({isActive:e})=>`bottom-nav-item ${e?"active":""}`,children:[_.jsx(s_,{className:"bottom-nav-icon"}),_.jsx("span",{children:"Analytics"})]}),_.jsxs(ly,{to:"/outfits",className:({isActive:e})=>`bottom-nav-item ${e?"active":""}`,children:[_.jsx(Do,{className:"bottom-nav-icon"}),_.jsx("span",{children:"Outfits"})]}),_.jsxs(ly,{to:"/profile",className:({isActive:e})=>`bottom-nav-item ${e?"active":""}`,children:[_.jsx(u2,{className:"bottom-nav-icon"}),_.jsx("span",{children:"Profile"})]})]}),Vle=()=>_.jsxs("div",{className:"mobile-container",children:[_.jsx("div",{className:"content-area pt-safe",children:_.jsx(Xse,{})}),_.jsx(Ule,{})]}),$2=$.createContext({});function N2(e){const t=$.useRef(null);return t.current===null&&(t.current=e()),t.current}const D2=typeof window<"u",PG=D2?$.useLayoutEffect:$.useEffect,o1=$.createContext(null);function R2(e,t){e.indexOf(t)===-1&&e.push(t)}function L2(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const Ou=(e,t,r)=>r>t?t:r<e?e:r;let F2=()=>{};const ku={},EG=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function CG(e){return typeof e=="object"&&e!==null}const AG=e=>/^0[^.\s]+$/u.test(e);function B2(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ro=e=>e,Wle=(e,t)=>r=>t(e(r)),u0=(...e)=>e.reduce(Wle),m_=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class z2{constructor(){this.subscriptions=[]}add(t){return R2(this.subscriptions,t),()=>L2(this.subscriptions,t)}notify(t,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,n);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ul=e=>e*1e3,cl=e=>e/1e3;function OG(e,t){return t?e*(1e3/t):0}const kG=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,Gle=1e-7,qle=12;function Hle(e,t,r,n,i){let s,o,a=0;do o=t+(r-t)/2,s=kG(o,n,i)-e,s>0?r=o:t=o;while(Math.abs(s)>Gle&&++a<qle);return o}function c0(e,t,r,n){if(e===t&&r===n)return Ro;const i=s=>Hle(s,0,1,e,r);return s=>s===0||s===1?s:kG(i(s),t,n)}const IG=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,jG=e=>t=>1-e(1-t),$G=c0(.33,1.53,.69,.99),U2=jG($G),NG=IG(U2),DG=e=>(e*=2)<1?.5*U2(e):.5*(2-Math.pow(2,-10*(e-1))),V2=e=>1-Math.sin(Math.acos(e)),RG=jG(V2),LG=IG(V2),Kle=c0(.42,0,1,1),Xle=c0(0,0,.58,1),FG=c0(.42,0,.58,1),Yle=e=>Array.isArray(e)&&typeof e[0]!="number",BG=e=>Array.isArray(e)&&typeof e[0]=="number",Qle={linear:Ro,easeIn:Kle,easeInOut:FG,easeOut:Xle,circIn:V2,circInOut:LG,circOut:RG,backIn:U2,backInOut:NG,backOut:$G,anticipate:DG},Jle=e=>typeof e=="string",VN=e=>{if(BG(e)){F2(e.length===4);const[t,r,n,i]=e;return c0(t,r,n,i)}else if(Jle(e))return Qle[e];return e},Pb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Zle(e,t){let r=new Set,n=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),e()),c(a)}const u={schedule:(c,d=!1,h=!1)=>{const g=h&&i?r:n;return d&&o.add(c),g.has(c)||g.add(c),c},cancel:c=>{n.delete(c),o.delete(c)},process:c=>{if(a=c,i){s=!0;return}i=!0,[r,n]=[n,r],r.forEach(l),r.clear(),i=!1,s&&(s=!1,u.process(c))}};return u}const eue=40;function zG(e,t){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,o=Pb.reduce((S,M)=>(S[M]=Zle(s),S),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:h,render:m,postRender:g}=o,v=()=>{const S=ku.useManualTiming?i.timestamp:performance.now();r=!1,ku.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(S-i.timestamp,eue),1)),i.timestamp=S,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),d.process(i),h.process(i),m.process(i),g.process(i),i.isProcessing=!1,r&&t&&(n=!1,e(v))},y=()=>{r=!0,n=!0,i.isProcessing||e(v)};return{schedule:Pb.reduce((S,M)=>{const T=o[M];return S[M]=(P,E=!1,A=!1)=>(r||y(),T.schedule(P,E,A)),S},{}),cancel:S=>{for(let M=0;M<Pb.length;M++)o[Pb[M]].cancel(S)},state:i,steps:o}}const{schedule:xn,cancel:Hc,state:Ri,steps:RM}=zG(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ro,!0);let fw;function tue(){fw=void 0}const Cs={now:()=>(fw===void 0&&Cs.set(Ri.isProcessing||ku.useManualTiming?Ri.timestamp:performance.now()),fw),set:e=>{fw=e,queueMicrotask(tue)}},UG=e=>t=>typeof t=="string"&&t.startsWith(e),W2=UG("--"),rue=UG("var(--"),G2=e=>rue(e)?nue.test(e.split("/*")[0].trim()):!1,nue=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ug={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},g_={...ug,transform:e=>Ou(0,1,e)},Eb={...ug,default:1},Gy=e=>Math.round(e*1e5)/1e5,q2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function iue(e){return e==null}const sue=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,H2=(e,t)=>r=>!!(typeof r=="string"&&sue.test(r)&&r.startsWith(e)||t&&!iue(r)&&Object.prototype.hasOwnProperty.call(r,t)),VG=(e,t,r)=>n=>{if(typeof n!="string")return n;const[i,s,o,a]=n.match(q2);return{[e]:parseFloat(i),[t]:parseFloat(s),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},oue=e=>Ou(0,255,e),LM={...ug,transform:e=>Math.round(oue(e))},Df={test:H2("rgb","red"),parse:VG("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+LM.transform(e)+", "+LM.transform(t)+", "+LM.transform(r)+", "+Gy(g_.transform(n))+")"};function aue(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const WA={test:H2("#"),parse:aue,transform:Df.transform},d0=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),$c=d0("deg"),dl=d0("%"),qt=d0("px"),lue=d0("vh"),uue=d0("vw"),WN={...dl,parse:e=>dl.parse(e)/100,transform:e=>dl.transform(e*100)},nm={test:H2("hsl","hue"),parse:VG("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+dl.transform(Gy(t))+", "+dl.transform(Gy(r))+", "+Gy(g_.transform(n))+")"},ei={test:e=>Df.test(e)||WA.test(e)||nm.test(e),parse:e=>Df.test(e)?Df.parse(e):nm.test(e)?nm.parse(e):WA.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Df.transform(e):nm.transform(e),getAnimatableNone:e=>{const t=ei.parse(e);return t.alpha=0,ei.transform(t)}},cue=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function due(e){return isNaN(e)&&typeof e=="string"&&(e.match(q2)?.length||0)+(e.match(cue)?.length||0)>0}const WG="number",GG="color",fue="var",hue="var(",GN="${}",pue=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function v_(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},i=[];let s=0;const a=t.replace(pue,l=>(ei.test(l)?(n.color.push(s),i.push(GG),r.push(ei.parse(l))):l.startsWith(hue)?(n.var.push(s),i.push(fue),r.push(l)):(n.number.push(s),i.push(WG),r.push(parseFloat(l))),++s,GN)).split(GN);return{values:r,split:a,indexes:n,types:i}}function qG(e){return v_(e).values}function HG(e){const{split:t,types:r}=v_(e),n=t.length;return i=>{let s="";for(let o=0;o<n;o++)if(s+=t[o],i[o]!==void 0){const a=r[o];a===WG?s+=Gy(i[o]):a===GG?s+=ei.transform(i[o]):s+=i[o]}return s}}const mue=e=>typeof e=="number"?0:ei.test(e)?ei.getAnimatableNone(e):e;function gue(e){const t=qG(e);return HG(e)(t.map(mue))}const Kc={test:due,parse:qG,createTransformer:HG,getAnimatableNone:gue};function FM(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function vue({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let i=0,s=0,o=0;if(!t)i=s=o=r;else{const a=r<.5?r*(1+t):r+t-r*t,l=2*r-a;i=FM(l,a,e+1/3),s=FM(l,a,e),o=FM(l,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function Lw(e,t){return r=>r>0?t:e}const $n=(e,t,r)=>e+(t-e)*r,BM=(e,t,r)=>{const n=e*e,i=r*(t*t-n)+n;return i<0?0:Math.sqrt(i)},yue=[WA,Df,nm],_ue=e=>yue.find(t=>t.test(e));function qN(e){const t=_ue(e);if(!t)return!1;let r=t.parse(e);return t===nm&&(r=vue(r)),r}const HN=(e,t)=>{const r=qN(e),n=qN(t);if(!r||!n)return Lw(e,t);const i={...r};return s=>(i.red=BM(r.red,n.red,s),i.green=BM(r.green,n.green,s),i.blue=BM(r.blue,n.blue,s),i.alpha=$n(r.alpha,n.alpha,s),Df.transform(i))},GA=new Set(["none","hidden"]);function bue(e,t){return GA.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function wue(e,t){return r=>$n(e,t,r)}function K2(e){return typeof e=="number"?wue:typeof e=="string"?G2(e)?Lw:ei.test(e)?HN:Tue:Array.isArray(e)?KG:typeof e=="object"?ei.test(e)?HN:xue:Lw}function KG(e,t){const r=[...e],n=r.length,i=e.map((s,o)=>K2(s)(s,t[o]));return s=>{for(let o=0;o<n;o++)r[o]=i[o](s);return r}}function xue(e,t){const r={...e,...t},n={};for(const i in r)e[i]!==void 0&&t[i]!==void 0&&(n[i]=K2(e[i])(e[i],t[i]));return i=>{for(const s in n)r[s]=n[s](i);return r}}function Mue(e,t){const r=[],n={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],o=e.indexes[s][n[s]],a=e.values[o]??0;r[i]=a,n[s]++}return r}const Tue=(e,t)=>{const r=Kc.createTransformer(t),n=v_(e),i=v_(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?GA.has(e)&&!i.values.length||GA.has(t)&&!n.values.length?bue(e,t):u0(KG(Mue(n,i),i.values),r):Lw(e,t)};function XG(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?$n(e,t,r):K2(e)(e,t)}const Sue=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>xn.update(t,r),stop:()=>Hc(t),now:()=>Ri.isProcessing?Ri.timestamp:Cs.now()}},YG=(e,t,r=10)=>{let n="";const i=Math.max(Math.round(t/r),2);for(let s=0;s<i;s++)n+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Fw=2e4;function X2(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Fw;)t+=r,n=e.next(t);return t>=Fw?1/0:t}function Pue(e,t=100,r){const n=r({...e,keyframes:[0,t]}),i=Math.min(X2(n),Fw);return{type:"keyframes",ease:s=>n.next(i*s).value/t,duration:cl(i)}}const Eue=5;function QG(e,t,r){const n=Math.max(t-Eue,0);return OG(r-e(n),t-n)}const zn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zM=.001;function Cue({duration:e=zn.duration,bounce:t=zn.bounce,velocity:r=zn.velocity,mass:n=zn.mass}){let i,s,o=1-t;o=Ou(zn.minDamping,zn.maxDamping,o),e=Ou(zn.minDuration,zn.maxDuration,cl(e)),o<1?(i=u=>{const c=u*o,d=c*e,h=c-r,m=qA(u,o),g=Math.exp(-d);return zM-h/m*g},s=u=>{const d=u*o*e,h=d*r+r,m=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-d),v=qA(Math.pow(u,2),o);return(-i(u)+zM>0?-1:1)*((h-m)*g)/v}):(i=u=>{const c=Math.exp(-u*e),d=(u-r)*e+1;return-zM+c*d},s=u=>{const c=Math.exp(-u*e),d=(r-u)*(e*e);return c*d});const a=5/e,l=Oue(i,s,a);if(e=ul(e),isNaN(l))return{stiffness:zn.stiffness,damping:zn.damping,duration:e};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const Aue=12;function Oue(e,t,r){let n=r;for(let i=1;i<Aue;i++)n=n-e(n)/t(n);return n}function qA(e,t){return e*Math.sqrt(1-t*t)}const kue=["duration","bounce"],Iue=["stiffness","damping","mass"];function KN(e,t){return t.some(r=>e[r]!==void 0)}function jue(e){let t={velocity:zn.velocity,stiffness:zn.stiffness,damping:zn.damping,mass:zn.mass,isResolvedFromDuration:!1,...e};if(!KN(e,Iue)&&KN(e,kue))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),i=n*n,s=2*Ou(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:zn.mass,stiffness:i,damping:s}}else{const r=Cue(e);t={...t,...r,mass:zn.mass},t.isResolvedFromDuration=!0}return t}function Bw(e=zn.visualDuration,t=zn.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:i}=r;const s=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:h,isResolvedFromDuration:m}=jue({...r,velocity:-cl(r.velocity||0)}),g=h||0,v=u/(2*Math.sqrt(l*c)),y=o-s,x=cl(Math.sqrt(l/c)),w=Math.abs(y)<5;n||(n=w?zn.restSpeed.granular:zn.restSpeed.default),i||(i=w?zn.restDelta.granular:zn.restDelta.default);let S;if(v<1){const T=qA(x,v);S=P=>{const E=Math.exp(-v*x*P);return o-E*((g+v*x*y)/T*Math.sin(T*P)+y*Math.cos(T*P))}}else if(v===1)S=T=>o-Math.exp(-x*T)*(y+(g+x*y)*T);else{const T=x*Math.sqrt(v*v-1);S=P=>{const E=Math.exp(-v*x*P),A=Math.min(T*P,300);return o-E*((g+v*x*y)*Math.sinh(A)+T*y*Math.cosh(A))/T}}const M={calculatedDuration:m&&d||null,next:T=>{const P=S(T);if(m)a.done=T>=d;else{let E=T===0?g:0;v<1&&(E=T===0?ul(g):QG(S,T,P));const A=Math.abs(E)<=n,L=Math.abs(o-P)<=i;a.done=A&&L}return a.value=a.done?o:P,a},toString:()=>{const T=Math.min(X2(M),Fw),P=YG(E=>M.next(T*E).value,T,30);return T+"ms "+P},toTransition:()=>{}};return M}Bw.applyToOptions=e=>{const t=Pue(e,100,Bw);return e.ease=t.ease,e.duration=ul(t.duration),e.type="keyframes",e};function HA({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],h={done:!1,value:d},m=A=>a!==void 0&&A<a||l!==void 0&&A>l,g=A=>a===void 0?l:l===void 0||Math.abs(a-A)<Math.abs(l-A)?a:l;let v=r*t;const y=d+v,x=o===void 0?y:o(y);x!==y&&(v=x-d);const w=A=>-v*Math.exp(-A/n),S=A=>x+w(A),M=A=>{const L=w(A),B=S(A);h.done=Math.abs(L)<=u,h.value=h.done?x:B};let T,P;const E=A=>{m(h.value)&&(T=A,P=Bw({keyframes:[h.value,g(h.value)],velocity:QG(S,A,h.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return E(0),{calculatedDuration:null,next:A=>{let L=!1;return!P&&T===void 0&&(L=!0,M(A),E(A)),T!==void 0&&A>=T?P.next(A-T):(!L&&M(A),h)}}}function $ue(e,t,r){const n=[],i=r||ku.mix||XG,s=e.length-1;for(let o=0;o<s;o++){let a=i(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||Ro:t;a=u0(l,a)}n.push(a)}return n}function Nue(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const s=e.length;if(F2(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=$ue(t,n,i),l=a.length,u=c=>{if(o&&c<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const h=m_(e[d],e[d+1],c);return a[d](h)};return r?c=>u(Ou(e[0],e[s-1],c)):u}function Due(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const i=m_(0,t,n);e.push($n(r,1,i))}}function Rue(e){const t=[0];return Due(t,e.length-1),t}function Lue(e,t){return e.map(r=>r*t)}function Fue(e,t){return e.map(()=>t||FG).splice(0,e.length-1)}function qy({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const i=Yle(n)?n.map(VN):VN(n),s={done:!1,value:t[0]},o=Lue(r&&r.length===t.length?r:Rue(t),e),a=Nue(o,t,{ease:Array.isArray(i)?i:Fue(t,i)});return{calculatedDuration:e,next:l=>(s.value=a(l),s.done=l>=e,s)}}const Bue=e=>e!==null;function Y2(e,{repeat:t,repeatType:r="loop"},n,i=1){const s=e.filter(Bue),a=i<0||t&&r!=="loop"&&t%2===1?0:s.length-1;return!a||n===void 0?s[a]:n}const zue={decay:HA,inertia:HA,tween:qy,keyframes:qy,spring:Bw};function JG(e){typeof e.type=="string"&&(e.type=zue[e.type])}class Q2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const Uue=e=>e/100;class J2 extends Q2{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==Cs.now()&&this.tick(Cs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;JG(t);const{type:r=qy,repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=t;let{keyframes:a}=t;const l=r||qy;l!==qy&&typeof a[0]!="number"&&(this.mixKeyframes=u0(Uue,XG(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=X2(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:c,repeat:d,repeatType:h,repeatDelay:m,type:g,onUpdate:v,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const x=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?x<0:x>i;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let S=this.currentTime,M=n;if(d){const A=Math.min(this.currentTime,i)/a;let L=Math.floor(A),B=A%1;!B&&A>=1&&(B=1),B===1&&L--,L=Math.min(L,d+1),!!(L%2)&&(h==="reverse"?(B=1-B,m&&(B-=m/a)):h==="mirror"&&(M=o)),S=Ou(0,1,B)*a}const T=w?{done:!1,value:c[0]}:M.next(S);s&&(T.value=s(T.value));let{done:P}=T;!w&&l!==null&&(P=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return E&&g!==HA&&(T.value=Y2(c,this.options,y,this.speed)),v&&v(T.value),E&&this.finish(),T}then(t,r){return this.finished.then(t,r)}get duration(){return cl(this.calculatedDuration)}get time(){return cl(this.currentTime)}set time(t){t=ul(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Cs.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=cl(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=Sue,startTime:r}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Cs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function Vue(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Rf=e=>e*180/Math.PI,KA=e=>{const t=Rf(Math.atan2(e[1],e[0]));return XA(t)},Wue={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:KA,rotateZ:KA,skewX:e=>Rf(Math.atan(e[1])),skewY:e=>Rf(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},XA=e=>(e=e%360,e<0&&(e+=360),e),XN=KA,YN=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),QN=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Gue={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:YN,scaleY:QN,scale:e=>(YN(e)+QN(e))/2,rotateX:e=>XA(Rf(Math.atan2(e[6],e[5]))),rotateY:e=>XA(Rf(Math.atan2(-e[2],e[0]))),rotateZ:XN,rotate:XN,skewX:e=>Rf(Math.atan(e[4])),skewY:e=>Rf(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function YA(e){return e.includes("scale")?1:0}function QA(e,t){if(!e||e==="none")return YA(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(r)n=Gue,i=r;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Wue,i=a}if(!i)return YA(t);const s=n[t],o=i[1].split(",").map(Hue);return typeof s=="function"?s(o):o[s]}const que=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return QA(r,t)};function Hue(e){return parseFloat(e.trim())}const cg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],dg=new Set(cg),JN=e=>e===ug||e===qt,Kue=new Set(["x","y","z"]),Xue=cg.filter(e=>!Kue.has(e));function Yue(e){const t=[];return Xue.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const Uf={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>QA(t,"x"),y:(e,{transform:t})=>QA(t,"y")};Uf.translateX=Uf.x;Uf.translateY=Uf.y;const Vf=new Set;let JA=!1,ZA=!1,eO=!1;function ZG(){if(ZA){const e=Array.from(Vf).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const i=Yue(n);i.length&&(r.set(n,i),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([s,o])=>{n.getValue(s)?.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}ZA=!1,JA=!1,Vf.forEach(e=>e.complete(eO)),Vf.clear()}function eq(){Vf.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ZA=!0)})}function Que(){eO=!0,eq(),ZG(),eO=!1}class Z2{constructor(t,r,n,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Vf.add(this),JA||(JA=!0,xn.read(eq),xn.resolveKeyframes(ZG))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:i}=this;if(t[0]===null){const s=i?.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(n&&r){const a=n.readValue(r,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}Vue(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Vf.delete(this)}cancel(){this.state==="scheduled"&&(Vf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Jue=e=>e.startsWith("--");function Zue(e,t,r){Jue(t)?e.style.setProperty(t,r):e.style[t]=r}const ece=B2(()=>window.ScrollTimeline!==void 0),tce={};function rce(e,t){const r=B2(e);return()=>tce[t]??r()}const tq=rce(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ky=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,ZN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ky([0,.65,.55,1]),circOut:ky([.55,0,1,.45]),backIn:ky([.31,.01,.66,-.59]),backOut:ky([.33,1.53,.69,.99])};function rq(e,t){if(e)return typeof e=="function"?tq()?YG(e,t):"ease-out":BG(e)?ky(e):Array.isArray(e)?e.map(r=>rq(r,t)||ZN.easeOut):ZN[e]}function nce(e,t,r,{delay:n=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[t]:r};l&&(c.offset=l);const d=rq(a,i);Array.isArray(d)&&(c.easing=d);const h={delay:n,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),e.animate(c,h)}function nq(e){return typeof e=="function"&&"applyToOptions"in e}function ice({type:e,...t}){return nq(e)&&tq()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class sce extends Q2{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,F2(typeof t.type!="string");const u=ice(t);this.animation=nce(r,n,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=Y2(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):Zue(r,n,c),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return cl(Number(t))}get time(){return cl(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ul(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&ece()?(this.animation.timeline=t,Ro):r(this)}}const iq={anticipate:DG,backInOut:NG,circInOut:LG};function oce(e){return e in iq}function ace(e){typeof e.ease=="string"&&oce(e.ease)&&(e.ease=iq[e.ease])}const eD=10;class lce extends sce{constructor(t){ace(t),JG(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:i,element:s,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const a=new J2({...o,autoplay:!1}),l=ul(this.finishedTime??this.time);r.setWithVelocity(a.sample(l-eD).value,a.sample(l).value,eD),a.stop()}}const tD=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Kc.test(e)||e==="0")&&!e.startsWith("url("));function uce(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function cce(e,t,r,n){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=tD(i,t),a=tD(s,t);return!o||!a?!1:uce(e)||(r==="spring"||nq(r))&&n}function tO(e){e.duration=0,e.type}const dce=new Set(["opacity","clipPath","filter","transform"]),fce=B2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hce(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:i,damping:s,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return fce()&&r&&dce.has(r)&&(r!=="transform"||!u)&&!l&&!n&&i!=="mirror"&&s!==0&&o!=="inertia"}const pce=40;class mce extends Q2{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...d}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Cs.now();const h={autoplay:t,delay:r,type:n,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:c,...d},m=c?.KeyframeResolver||Z2;this.keyframeResolver=new m(a,(g,v,y)=>this.onKeyframesResolved(g,v,h,!y),l,u,c),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,n,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=n;this.resolvedAt=Cs.now(),cce(t,s,o,a)||((ku.instantAnimations||!l)&&c?.(Y2(t,n,r)),t[0]=t[t.length-1],tO(n),n.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>pce?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},m=!u&&hce(h)?new lce({...h,element:h.motionValue.owner.current}):new J2(h);m.finished.then(()=>this.notifyFinished()).catch(Ro),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Que()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const gce=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function vce(e){const t=gce.exec(e);if(!t)return[,];const[,r,n,i]=t;return[`--${r??n}`,i]}function sq(e,t,r=1){const[n,i]=vce(e);if(!n)return;const s=window.getComputedStyle(t).getPropertyValue(n);if(s){const o=s.trim();return EG(o)?parseFloat(o):o}return G2(i)?sq(i,t,r+1):i}function eI(e,t){return e?.[t]??e?.default??e}const oq=new Set(["width","height","top","left","right","bottom",...cg]),yce={test:e=>e==="auto",parse:e=>e},aq=e=>t=>t.test(e),lq=[ug,qt,dl,$c,uue,lue,yce],rD=e=>lq.find(aq(e));function _ce(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||AG(e):!0}const bce=new Set(["brightness","contrast","saturate","opacity"]);function wce(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(q2)||[];if(!n)return e;const i=r.replace(n,"");let s=bce.has(t)?1:0;return n!==r&&(s*=100),t+"("+s+i+")"}const xce=/\b([a-z-]*)\(.*?\)/gu,rO={...Kc,getAnimatableNone:e=>{const t=e.match(xce);return t?t.map(wce).join(" "):e}},nD={...ug,transform:Math.round},Mce={rotate:$c,rotateX:$c,rotateY:$c,rotateZ:$c,scale:Eb,scaleX:Eb,scaleY:Eb,scaleZ:Eb,skew:$c,skewX:$c,skewY:$c,distance:qt,translateX:qt,translateY:qt,translateZ:qt,x:qt,y:qt,z:qt,perspective:qt,transformPerspective:qt,opacity:g_,originX:WN,originY:WN,originZ:qt},tI={borderWidth:qt,borderTopWidth:qt,borderRightWidth:qt,borderBottomWidth:qt,borderLeftWidth:qt,borderRadius:qt,radius:qt,borderTopLeftRadius:qt,borderTopRightRadius:qt,borderBottomRightRadius:qt,borderBottomLeftRadius:qt,width:qt,maxWidth:qt,height:qt,maxHeight:qt,top:qt,right:qt,bottom:qt,left:qt,padding:qt,paddingTop:qt,paddingRight:qt,paddingBottom:qt,paddingLeft:qt,margin:qt,marginTop:qt,marginRight:qt,marginBottom:qt,marginLeft:qt,backgroundPositionX:qt,backgroundPositionY:qt,...Mce,zIndex:nD,fillOpacity:g_,strokeOpacity:g_,numOctaves:nD},Tce={...tI,color:ei,backgroundColor:ei,outlineColor:ei,fill:ei,stroke:ei,borderColor:ei,borderTopColor:ei,borderRightColor:ei,borderBottomColor:ei,borderLeftColor:ei,filter:rO,WebkitFilter:rO},uq=e=>Tce[e];function cq(e,t){let r=uq(e);return r!==rO&&(r=Kc),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Sce=new Set(["auto","none","0"]);function Pce(e,t,r){let n=0,i;for(;n<e.length&&!i;){const s=e[n];typeof s=="string"&&!Sce.has(s)&&v_(s).values.length&&(i=e[n]),n++}if(i&&r)for(const s of t)e[s]=cq(r,i)}class Ece extends Z2{constructor(t,r,n,i,s){super(t,r,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),G2(u))){const c=sq(u,r.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!oq.has(n)||t.length!==2)return;const[i,s]=t,o=rD(i),a=rD(s);if(o!==a)if(JN(o)&&JN(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else Uf[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let i=0;i<t.length;i++)(t[i]===null||_ce(t[i]))&&n.push(i);n.length&&Pce(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Uf[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const i=t.getValue(r);i&&i.jump(this.measuredOrigin,!1);const s=n.length-1,o=n[s];n[s]=Uf[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,l])=>{t.getValue(a).set(l)}),this.resolveNoneKeyframes()}}function Cce(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const i=r?.[e]??n.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const dq=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function fq(e){return CG(e)&&"offsetHeight"in e}const iD=30,Ace=e=>!isNaN(parseFloat(e));class Oce{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const i=Cs.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Cs.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Ace(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new z2);const n=this.events[t].add(r);return t==="change"?()=>{n(),xn.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Cs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>iD)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,iD);return OG(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Cm(e,t){return new Oce(e,t)}const{schedule:rI}=zG(queueMicrotask,!1),pa={x:!1,y:!1};function hq(){return pa.x||pa.y}function kce(e){return e==="x"||e==="y"?pa[e]?null:(pa[e]=!0,()=>{pa[e]=!1}):pa.x||pa.y?null:(pa.x=pa.y=!0,()=>{pa.x=pa.y=!1})}function pq(e,t){const r=Cce(e),n=new AbortController,i={passive:!0,...t,signal:n.signal};return[r,i,()=>n.abort()]}function sD(e){return!(e.pointerType==="touch"||hq())}function Ice(e,t,r={}){const[n,i,s]=pq(e,r),o=a=>{if(!sD(a))return;const{target:l}=a,u=t(l,a);if(typeof u!="function"||!l)return;const c=d=>{sD(d)&&(u(d),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return n.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const mq=(e,t)=>t?e===t?!0:mq(e,t.parentElement):!1,nI=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,jce=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function $ce(e){return jce.has(e.tagName)||e.tabIndex!==-1}const hw=new WeakSet;function oD(e){return t=>{t.key==="Enter"&&e(t)}}function UM(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Nce=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=oD(()=>{if(hw.has(r))return;UM(r,"down");const i=oD(()=>{UM(r,"up")}),s=()=>UM(r,"cancel");r.addEventListener("keyup",i,t),r.addEventListener("blur",s,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function aD(e){return nI(e)&&!hq()}function Dce(e,t,r={}){const[n,i,s]=pq(e,r),o=a=>{const l=a.currentTarget;if(!aD(a))return;hw.add(l);const u=t(l,a),c=(m,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),hw.has(l)&&hw.delete(l),aD(m)&&typeof u=="function"&&u(m,{success:g})},d=m=>{c(m,l===window||l===document||r.useGlobalTarget||mq(l,m.target))},h=m=>{c(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return n.forEach(a=>{(r.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),fq(a)&&(a.addEventListener("focus",u=>Nce(u,i)),!$ce(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function gq(e){return CG(e)&&"ownerSVGElement"in e}function Rce(e){return gq(e)&&e.tagName==="svg"}const Zi=e=>!!(e&&e.getVelocity),Lce=[...lq,ei,Kc],Fce=e=>Lce.find(aq(e)),iI=$.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Bce extends $.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,i=fq(n)&&n.offsetWidth||0,s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function zce({children:e,isPresent:t,anchorX:r,root:n}){const i=$.useId(),s=$.useRef(null),o=$.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=$.useContext(iI);return $.useInsertionEffect(()=>{const{width:l,height:u,top:c,left:d,right:h}=o.current;if(t||!s.current||!l||!u)return;const m=r==="left"?`left: ${d}`:`right: ${h}`;s.current.dataset.motionPopId=i;const g=document.createElement("style");a&&(g.nonce=a);const v=n??document.head;return v.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${m}px !important;
            top: ${c}px !important;
          }
        `),()=>{v.contains(g)&&v.removeChild(g)}},[t]),_.jsx(Bce,{isPresent:t,childRef:s,sizeRef:o,children:$.cloneElement(e,{ref:s})})}const Uce=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const u=N2(Vce),c=$.useId();let d=!0,h=$.useMemo(()=>(d=!1,{id:c,initial:t,isPresent:r,custom:i,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;n&&n()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[r,u,n]);return s&&d&&(h={...h}),$.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[r]),$.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),o==="popLayout"&&(e=_.jsx(zce,{isPresent:r,anchorX:a,root:l,children:e})),_.jsx(o1.Provider,{value:h,children:e})};function Vce(){return new Map}function vq(e=!0){const t=$.useContext(o1);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:i}=t,s=$.useId();$.useEffect(()=>{if(e)return i(s)},[e]);const o=$.useCallback(()=>e&&n&&n(s),[s,n,e]);return!r&&n?[!1,o]:[!0]}const Cb=e=>e.key||"";function lD(e){const t=[];return $.Children.forEach(e,r=>{$.isValidElement(r)&&t.push(r)}),t}const nO=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=vq(o),d=$.useMemo(()=>lD(e),[e]),h=o&&!u?[]:d.map(Cb),m=$.useRef(!0),g=$.useRef(d),v=N2(()=>new Map),[y,x]=$.useState(d),[w,S]=$.useState(d);PG(()=>{m.current=!1,g.current=d;for(let P=0;P<w.length;P++){const E=Cb(w[P]);h.includes(E)?v.delete(E):v.get(E)!==!0&&v.set(E,!1)}},[w,h.length,h.join("-")]);const M=[];if(d!==y){let P=[...d];for(let E=0;E<w.length;E++){const A=w[E],L=Cb(A);h.includes(L)||(P.splice(E,0,A),M.push(A))}return s==="wait"&&M.length&&(P=M),S(lD(P)),x(d),null}const{forceRender:T}=$.useContext($2);return _.jsx(_.Fragment,{children:w.map(P=>{const E=Cb(P),A=o&&!u?!1:d===w||h.includes(E),L=()=>{if(v.has(E))v.set(E,!0);else return;let B=!0;v.forEach(V=>{V||(B=!1)}),B&&(T?.(),S(g.current),o&&c?.(),n&&n())};return _.jsx(Uce,{isPresent:A,initial:!m.current||r?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:A?void 0:L,anchorX:a,children:P},E)})})},yq=$.createContext({strict:!1}),uD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Am={};for(const e in uD)Am[e]={isEnabled:t=>uD[e].some(r=>!!t[r])};function Wce(e){for(const t in e)Am[t]={...Am[t],...e[t]}}const Gce=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zw(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Gce.has(e)}let _q=e=>!zw(e);function qce(e){typeof e=="function"&&(_q=t=>t.startsWith("on")?!zw(t):e(t))}try{qce(require("@emotion/is-prop-valid").default)}catch{}function Hce(e,t,r){const n={};for(const i in e)i==="values"&&typeof e.values=="object"||(_q(i)||r===!0&&zw(i)||!t&&!zw(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}const a1=$.createContext({});function l1(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function y_(e){return typeof e=="string"||Array.isArray(e)}const sI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],oI=["initial",...sI];function u1(e){return l1(e.animate)||oI.some(t=>y_(e[t]))}function bq(e){return!!(u1(e)||e.variants)}function Kce(e,t){if(u1(e)){const{initial:r,animate:n}=e;return{initial:r===!1||y_(r)?r:void 0,animate:y_(n)?n:void 0}}return e.inherit!==!1?t:{}}function Xce(e){const{initial:t,animate:r}=Kce(e,$.useContext(a1));return $.useMemo(()=>({initial:t,animate:r}),[cD(t),cD(r)])}function cD(e){return Array.isArray(e)?e.join(" "):e}const __={};function Yce(e){for(const t in e)__[t]=e[t],W2(t)&&(__[t].isCSSVariable=!0)}function wq(e,{layout:t,layoutId:r}){return dg.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!__[e]||e==="opacity")}const Qce={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Jce=cg.length;function Zce(e,t,r){let n="",i=!0;for(let s=0;s<Jce;s++){const o=cg[s],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||r){const u=dq(a,tI[o]);if(!l){i=!1;const c=Qce[o]||o;n+=`${c}(${u}) `}r&&(t[o]=u)}}return n=n.trim(),r?n=r(t,i?"":n):i&&(n="none"),n}function aI(e,t,r){const{style:n,vars:i,transformOrigin:s}=e;let o=!1,a=!1;for(const l in t){const u=t[l];if(dg.has(l)){o=!0;continue}else if(W2(l)){i[l]=u;continue}else{const c=dq(u,tI[l]);l.startsWith("origin")?(a=!0,s[l]=c):n[l]=c}}if(t.transform||(o||r?n.transform=Zce(t,e.transform,r):n.transform&&(n.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;n.transformOrigin=`${l} ${u} ${c}`}}const lI=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xq(e,t,r){for(const n in t)!Zi(t[n])&&!wq(n,r)&&(e[n]=t[n])}function ede({transformTemplate:e},t){return $.useMemo(()=>{const r=lI();return aI(r,t,e),Object.assign({},r.vars,r.style)},[t])}function tde(e,t){const r=e.style||{},n={};return xq(n,r,e),Object.assign(n,ede(e,t)),n}function rde(e,t){const r={},n=tde(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const nde={offset:"stroke-dashoffset",array:"stroke-dasharray"},ide={offset:"strokeDashoffset",array:"strokeDasharray"};function sde(e,t,r=1,n=0,i=!0){e.pathLength=1;const s=i?nde:ide;e[s.offset]=qt.transform(-n);const o=qt.transform(t),a=qt.transform(r);e[s.array]=`${o} ${a}`}function Mq(e,{attrX:t,attrY:r,attrScale:n,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,u,c){if(aI(e,a,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:h}=e;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=c?.transformBox??"fill-box",delete d.transformBox),t!==void 0&&(d.x=t),r!==void 0&&(d.y=r),n!==void 0&&(d.scale=n),i!==void 0&&sde(d,i,s,o,!1)}const Tq=()=>({...lI(),attrs:{}}),Sq=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ode(e,t,r,n){const i=$.useMemo(()=>{const s=Tq();return Mq(s,t,Sq(n),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};xq(s,e.style,e),i.style={...s,...i.style}}return i}const ade=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function uI(e){return typeof e!="string"||e.includes("-")?!1:!!(ade.indexOf(e)>-1||/[A-Z]/u.test(e))}function lde(e,t,r,{latestValues:n},i,s=!1){const a=(uI(e)?ode:rde)(t,n,i,e),l=Hce(t,typeof e=="string",s),u=e!==$.Fragment?{...l,...a,ref:r}:{},{children:c}=t,d=$.useMemo(()=>Zi(c)?c.get():c,[c]);return $.createElement(e,{...u,children:d})}function dD(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function cI(e,t,r,n){if(typeof t=="function"){const[i,s]=dD(n);t=t(r!==void 0?r:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=dD(n);t=t(r!==void 0?r:e.custom,i,s)}return t}function pw(e){return Zi(e)?e.get():e}function ude({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,i){return{latestValues:cde(r,n,i,e),renderState:t()}}function cde(e,t,r,n){const i={},s=n(e,{});for(const h in s)i[h]=pw(s[h]);let{initial:o,animate:a}=e;const l=u1(e),u=bq(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=r?r.initial===!1:!1;c=c||o===!1;const d=c?a:o;if(d&&typeof d!="boolean"&&!l1(d)){const h=Array.isArray(d)?d:[d];for(let m=0;m<h.length;m++){const g=cI(e,h[m]);if(g){const{transitionEnd:v,transition:y,...x}=g;for(const w in x){let S=x[w];if(Array.isArray(S)){const M=c?S.length-1:0;S=S[M]}S!==null&&(i[w]=S)}for(const w in v)i[w]=v[w]}}}return i}const Pq=e=>(t,r)=>{const n=$.useContext(a1),i=$.useContext(o1),s=()=>ude(e,t,n,i);return r?s():N2(s)};function dI(e,t,r){const{style:n}=e,i={};for(const s in n)(Zi(n[s])||t.style&&Zi(t.style[s])||wq(s,e)||r?.getValue(s)?.liveStyle!==void 0)&&(i[s]=n[s]);return i}const dde=Pq({scrapeMotionValuesFromProps:dI,createRenderState:lI});function Eq(e,t,r){const n=dI(e,t,r);for(const i in e)if(Zi(e[i])||Zi(t[i])){const s=cg.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=e[i]}return n}const fde=Pq({scrapeMotionValuesFromProps:Eq,createRenderState:Tq}),hde=Symbol.for("motionComponentSymbol");function im(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function pde(e,t,r){return $.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):im(r)&&(r.current=n))},[t])}const fI=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mde="framerAppearId",Cq="data-"+fI(mde),Aq=$.createContext({});function gde(e,t,r,n,i){const{visualElement:s}=$.useContext(a1),o=$.useContext(yq),a=$.useContext(o1),l=$.useContext(iI).reducedMotion,u=$.useRef(null);n=n||o.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:s,props:r,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,d=$.useContext(Aq);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&vde(u.current,r,i,d);const h=$.useRef(!1);$.useInsertionEffect(()=>{c&&h.current&&c.update(r,a)});const m=r[Cq],g=$.useRef(!!m&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return PG(()=>{c&&(h.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),g.current&&c.animationState&&c.animationState.animateChanges())}),$.useEffect(()=>{c&&(!g.current&&c.animationState&&c.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(m)}),g.current=!1),c.enteringChildren=void 0)}),c}function vde(e,t,r,n){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Oq(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&im(a),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,crossfade:c,layoutScroll:l,layoutRoot:u})}function Oq(e){if(e)return e.options.allowProjection!==!1?e.projection:Oq(e.parent)}function VM(e,{forwardMotionProps:t=!1}={},r,n){r&&Wce(r);const i=uI(e)?fde:dde;function s(a,l){let u;const c={...$.useContext(iI),...a,layoutId:yde(a)},{isStatic:d}=c,h=Xce(a),m=i(a,d);if(!d&&D2){_de();const g=bde(c);u=g.MeasureLayout,h.visualElement=gde(e,m,c,n,g.ProjectionNode)}return _.jsxs(a1.Provider,{value:h,children:[u&&h.visualElement?_.jsx(u,{visualElement:h.visualElement,...c}):null,lde(e,a,pde(m,h.visualElement,l),m,d,t)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=$.forwardRef(s);return o[hde]=e,o}function yde({layoutId:e}){const t=$.useContext($2).id;return t&&e!==void 0?t+"-"+e:e}function _de(e,t){$.useContext(yq).strict}function bde(e){const{drag:t,layout:r}=Am;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function wde(e,t){if(typeof Proxy>"u")return VM;const r=new Map,n=(s,o)=>VM(s,o,e,t),i=(s,o)=>n(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?n:(r.has(o)||r.set(o,VM(o,void 0,e,t)),r.get(o))})}function kq({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function xde({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Mde(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function WM(e){return e===void 0||e===1}function iO({scale:e,scaleX:t,scaleY:r}){return!WM(e)||!WM(t)||!WM(r)}function Sf(e){return iO(e)||Iq(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Iq(e){return fD(e.x)||fD(e.y)}function fD(e){return e&&e!=="0%"}function Uw(e,t,r){const n=e-r,i=t*n;return r+i}function hD(e,t,r,n,i){return i!==void 0&&(e=Uw(e,i,n)),Uw(e,r,n)+t}function sO(e,t=0,r=1,n,i){e.min=hD(e.min,t,r,n,i),e.max=hD(e.max,t,r,n,i)}function jq(e,{x:t,y:r}){sO(e.x,t.translate,t.scale,t.originPoint),sO(e.y,r.translate,r.scale,r.originPoint)}const pD=.999999999999,mD=1.0000000000001;function Tde(e,t,r,n=!1){const i=r.length;if(!i)return;t.x=t.y=1;let s,o;for(let a=0;a<i;a++){s=r[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&om(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,jq(e,o)),n&&Sf(s.latestValues)&&om(e,s.latestValues))}t.x<mD&&t.x>pD&&(t.x=1),t.y<mD&&t.y>pD&&(t.y=1)}function sm(e,t){e.min=e.min+t,e.max=e.max+t}function gD(e,t,r,n,i=.5){const s=$n(e.min,e.max,i);sO(e,t,r,s,n)}function om(e,t){gD(e.x,t.x,t.scaleX,t.scale,t.originX),gD(e.y,t.y,t.scaleY,t.scale,t.originY)}function $q(e,t){return kq(Mde(e.getBoundingClientRect(),t))}function Sde(e,t,r){const n=$q(e,r),{scroll:i}=t;return i&&(sm(n.x,i.offset.x),sm(n.y,i.offset.y)),n}const vD=()=>({translate:0,scale:1,origin:0,originPoint:0}),am=()=>({x:vD(),y:vD()}),yD=()=>({min:0,max:0}),Hn=()=>({x:yD(),y:yD()}),oO={current:null},Nq={current:!1};function Pde(){if(Nq.current=!0,!!D2)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>oO.current=e.matches;e.addEventListener("change",t),t()}else oO.current=!1}const Ede=new WeakMap;function Cde(e,t,r){for(const n in t){const i=t[n],s=r[n];if(Zi(i))e.addValue(n,i);else if(Zi(s))e.addValue(n,Cm(i,{owner:e}));else if(s!==i)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(n);e.addValue(n,Cm(o!==void 0?o:i,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const _D=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Ade{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Z2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Cs.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,xn.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=u1(r),this.isVariantNode=bq(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in d){const m=d[h];l[h]!==void 0&&Zi(m)&&m.set(l[h])}}mount(t){this.current=t,Ede.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),Nq.current||Pde(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:oO.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Hc(this.notifyUpdate),Hc(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=dg.has(t);n&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&xn.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Am){const r=Am[t];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Hn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<_D.length;n++){const i=_D[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Cde(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Cm(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(EG(n)||AG(n))?n=parseFloat(n):!Fce(n)&&Kc.test(r)&&(n=cq(t,r)),this.setBaseTarget(t,Zi(n)?n.get():n)),Zi(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const s=cI(this.props,r,this.presenceContext?.custom);s&&(n=s[t])}if(r&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Zi(i)?i:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new z2),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){rI.render(this.render)}}class Dq extends Ade{constructor(){super(...arguments),this.KeyframeResolver=Ece}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Zi(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Rq(e,{style:t,vars:r},n,i){const s=e.style;let o;for(o in t)s[o]=t[o];i?.applyProjectionStyles(s,n);for(o in r)s.setProperty(o,r[o])}function Ode(e){return window.getComputedStyle(e)}class kde extends Dq{constructor(){super(...arguments),this.type="html",this.renderInstance=Rq}readValueFromInstance(t,r){if(dg.has(r))return this.projection?.isProjecting?YA(r):que(t,r);{const n=Ode(t),i=(W2(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return $q(t,r)}build(t,r,n){aI(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return dI(t,r,n)}}const Lq=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ide(e,t,r,n){Rq(e,t,void 0,n);for(const i in t.attrs)e.setAttribute(Lq.has(i)?i:fI(i),t.attrs[i])}class jde extends Dq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Hn}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(dg.has(r)){const n=uq(r);return n&&n.default||0}return r=Lq.has(r)?r:fI(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return Eq(t,r,n)}build(t,r,n){Mq(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,i){Ide(t,r,n,i)}mount(t){this.isSVGTag=Sq(t.tagName),super.mount(t)}}const $de=(e,t)=>uI(e)?new jde(t):new kde(t,{allowProjection:e!==$.Fragment});function gm(e,t,r){const n=e.getProps();return cI(n,t,r!==void 0?r:n.custom,e)}const aO=e=>Array.isArray(e);function Nde(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Cm(r))}function Dde(e){return aO(e)?e[e.length-1]||0:e}function Rde(e,t){const r=gm(e,t);let{transitionEnd:n={},transition:i={},...s}=r||{};s={...s,...n};for(const o in s){const a=Dde(s[o]);Nde(e,o,a)}}function Lde(e){return!!(Zi(e)&&e.add)}function lO(e,t){const r=e.getValue("willChange");if(Lde(r))return r.add(t);if(!r&&ku.WillChange){const n=new ku.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function Fq(e){return e.props[Cq]}const Fde=e=>e!==null;function Bde(e,{repeat:t,repeatType:r="loop"},n){const i=e.filter(Fde),s=t&&r!=="loop"&&t%2===1?0:i.length-1;return i[s]}const zde={type:"spring",stiffness:500,damping:25,restSpeed:10},Ude=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Vde={type:"keyframes",duration:.8},Wde={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Gde=(e,{keyframes:t})=>t.length>2?Vde:dg.has(e)?e.startsWith("scale")?Ude(t[1]):zde:Wde;function qde({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const hI=(e,t,r,n={},i,s)=>o=>{const a=eI(n,e)||{},l=a.delay||n.delay||0;let{elapsed:u=0}=n;u=u-ul(l);const c={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:h=>{t.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:i};qde(a)||Object.assign(c,Gde(e,c)),c.duration&&(c.duration=ul(c.duration)),c.repeatDelay&&(c.repeatDelay=ul(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(tO(c),c.delay===0&&(d=!0)),(ku.instantAnimations||ku.skipAnimations)&&(d=!0,tO(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,d&&!s&&t.get()!==void 0){const h=Bde(c.keyframes,a);if(h!==void 0){xn.update(()=>{c.onUpdate(h),c.onComplete()});return}}return a.isSync?new J2(c):new mce(c)};function Hde({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function Bq(e,t,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...a}=t;n&&(s=n);const l=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const c in a){const d=e.getValue(c,e.latestValues[c]??null),h=a[c];if(h===void 0||u&&Hde(u,c))continue;const m={delay:r,...eI(s||{},c)},g=d.get();if(g!==void 0&&!d.isAnimating&&!Array.isArray(h)&&h===g&&!m.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const x=Fq(e);if(x){const w=window.MotionHandoffAnimation(x,c,xn);w!==null&&(m.startTime=w,v=!0)}}lO(e,c),d.start(hI(c,d,h,e.shouldReduceMotion&&oq.has(c)?{type:!1}:m,e,v));const y=d.animation;y&&l.push(y)}return o&&Promise.all(l).then(()=>{xn.update(()=>{o&&Rde(e,o)})}),l}function zq(e,t,r,n=0,i=1){const s=Array.from(e).sort((u,c)=>u.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*n;return typeof r=="function"?r(s,o):i===1?s*n:a-s*n}function uO(e,t,r={}){const n=gm(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);const s=n?()=>Promise.all(Bq(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:c,staggerDirection:d}=i;return Kde(e,t,l,u,c,d,r)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(r.delay)])}function Kde(e,t,r=0,n=0,i=0,s=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(uO(l,t,{...o,delay:r+(typeof n=="function"?0:n)+zq(e.variantChildren,l,n,i,s)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function Xde(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(s=>uO(e,s,r));n=Promise.all(i)}else if(typeof t=="string")n=uO(e,t,r);else{const i=typeof t=="function"?gm(e,t,r.custom):t;n=Promise.all(Bq(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function Uq(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const Yde=oI.length;function Vq(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?Vq(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<Yde;r++){const n=oI[r],i=e.props[n];(y_(i)||i===!1)&&(t[n]=i)}return t}const Qde=[...sI].reverse(),Jde=sI.length;function Zde(e){return t=>Promise.all(t.map(({animation:r,options:n})=>Xde(e,r,n)))}function efe(e){let t=Zde(e),r=bD(),n=!0;const i=l=>(u,c)=>{const d=gm(e,c,l==="exit"?e.presenceContext?.custom:void 0);if(d){const{transition:h,transitionEnd:m,...g}=d;u={...u,...g,...m}}return u};function s(l){t=l(e)}function o(l){const{props:u}=e,c=Vq(e.parent)||{},d=[],h=new Set;let m={},g=1/0;for(let y=0;y<Jde;y++){const x=Qde[y],w=r[x],S=u[x]!==void 0?u[x]:c[x],M=y_(S),T=x===l?w.isActive:null;T===!1&&(g=y);let P=S===c[x]&&S!==u[x]&&M;if(P&&n&&e.manuallyAnimateOnMount&&(P=!1),w.protectedKeys={...m},!w.isActive&&T===null||!S&&!w.prevProp||l1(S)||typeof S=="boolean")continue;const E=tfe(w.prevProp,S);let A=E||x===l&&w.isActive&&!P&&M||y>g&&M,L=!1;const B=Array.isArray(S)?S:[S];let V=B.reduce(i(x),{});T===!1&&(V={});const{prevResolvedValues:G={}}=w,z={...G,...V},K=Q=>{A=!0,h.has(Q)&&(L=!0,h.delete(Q)),w.needsAnimating[Q]=!0;const W=e.getValue(Q);W&&(W.liveStyle=!1)};for(const Q in z){const W=V[Q],oe=G[Q];if(m.hasOwnProperty(Q))continue;let ce=!1;aO(W)&&aO(oe)?ce=!Uq(W,oe):ce=W!==oe,ce?W!=null?K(Q):h.add(Q):W!==void 0&&h.has(Q)?K(Q):w.protectedKeys[Q]=!0}w.prevProp=S,w.prevResolvedValues=V,w.isActive&&(m={...m,...V}),n&&e.blockInitialAnimation&&(A=!1);const J=P&&E;A&&(!J||L)&&d.push(...B.map(Q=>{const W={type:x};if(typeof Q=="string"&&n&&!J&&e.manuallyAnimateOnMount&&e.parent){const{parent:oe}=e,ce=gm(oe,Q);if(oe.enteringChildren&&ce){const{delayChildren:D}=ce.transition||{};W.delay=zq(oe.enteringChildren,e,D)}}return{animation:Q,options:W}}))}if(h.size){const y={};if(typeof u.initial!="boolean"){const x=gm(e,Array.isArray(u.initial)?u.initial[0]:u.initial);x&&x.transition&&(y.transition=x.transition)}h.forEach(x=>{const w=e.getBaseTarget(x),S=e.getValue(x);S&&(S.liveStyle=!0),y[x]=w??null}),d.push({animation:y})}let v=!!d.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),n=!1,v?t(d):Promise.resolve()}function a(l,u){if(r[l].isActive===u)return Promise.resolve();e.variantChildren?.forEach(d=>d.animationState?.setActive(l,u)),r[l].isActive=u;const c=o(l);for(const d in r)r[d].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>r,reset:()=>{r=bD(),n=!0}}}function tfe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Uq(t,e):!1}function gf(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bD(){return{animate:gf(!0),whileInView:gf(),whileHover:gf(),whileTap:gf(),whileDrag:gf(),whileFocus:gf(),exit:gf()}}class ed{constructor(t){this.isMounted=!1,this.node=t}update(){}}class rfe extends ed{constructor(t){super(t),t.animationState||(t.animationState=efe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();l1(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let nfe=0;class ife extends ed{constructor(){super(...arguments),this.id=nfe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);r&&!t&&i.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const sfe={animation:{Feature:rfe},exit:{Feature:ife}};function b_(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function f0(e){return{point:{x:e.pageX,y:e.pageY}}}const ofe=e=>t=>nI(t)&&e(t,f0(t));function Hy(e,t,r,n){return b_(e,t,ofe(r),n)}const Wq=1e-4,afe=1-Wq,lfe=1+Wq,Gq=.01,ufe=0-Gq,cfe=0+Gq;function ps(e){return e.max-e.min}function dfe(e,t,r){return Math.abs(e-t)<=r}function wD(e,t,r,n=.5){e.origin=n,e.originPoint=$n(t.min,t.max,e.origin),e.scale=ps(r)/ps(t),e.translate=$n(r.min,r.max,e.origin)-e.originPoint,(e.scale>=afe&&e.scale<=lfe||isNaN(e.scale))&&(e.scale=1),(e.translate>=ufe&&e.translate<=cfe||isNaN(e.translate))&&(e.translate=0)}function Ky(e,t,r,n){wD(e.x,t.x,r.x,n?n.originX:void 0),wD(e.y,t.y,r.y,n?n.originY:void 0)}function xD(e,t,r){e.min=r.min+t.min,e.max=e.min+ps(t)}function ffe(e,t,r){xD(e.x,t.x,r.x),xD(e.y,t.y,r.y)}function MD(e,t,r){e.min=t.min-r.min,e.max=e.min+ps(t)}function Xy(e,t,r){MD(e.x,t.x,r.x),MD(e.y,t.y,r.y)}function Po(e){return[e("x"),e("y")]}const qq=({current:e})=>e?e.ownerDocument.defaultView:null,TD=(e,t)=>Math.abs(e-t);function hfe(e,t){const r=TD(e.x,t.x),n=TD(e.y,t.y);return Math.sqrt(r**2+n**2)}class Hq{constructor(t,r,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=qM(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=hfe(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!g)return;const{point:v}=h,{timestamp:y}=Ri;this.history.push({...v,timestamp:y});const{onStart:x,onMove:w}=this.handlers;m||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=GM(m,this.transformPagePoint),xn.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=qM(h.type==="pointercancel"?this.lastMoveEventInfo:GM(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,x),v&&v(h,x)},!nI(t))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=i||window;const a=f0(t),l=GM(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=Ri;this.history=[{...u,timestamp:c}];const{onSessionStart:d}=r;d&&d(t,qM(l,this.history)),this.removeListeners=u0(Hy(this.contextWindow,"pointermove",this.handlePointerMove),Hy(this.contextWindow,"pointerup",this.handlePointerUp),Hy(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Hc(this.updatePoint)}}function GM(e,t){return t?{point:t(e.point)}:e}function SD(e,t){return{x:e.x-t.x,y:e.y-t.y}}function qM({point:e},t){return{point:e,delta:SD(e,Kq(t)),offset:SD(e,pfe(t)),velocity:mfe(t,.1)}}function pfe(e){return e[0]}function Kq(e){return e[e.length-1]}function mfe(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const i=Kq(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>ul(t)));)r--;if(!n)return{x:0,y:0};const s=cl(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function gfe(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?$n(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?$n(r,e,n.max):Math.min(e,r)),e}function PD(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function vfe(e,{top:t,left:r,bottom:n,right:i}){return{x:PD(e.x,r,i),y:PD(e.y,t,n)}}function ED(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function yfe(e,t){return{x:ED(e.x,t.x),y:ED(e.y,t.y)}}function _fe(e,t){let r=.5;const n=ps(e),i=ps(t);return i>n?r=m_(t.min,t.max-n,e.min):n>i&&(r=m_(e.min,e.max-i,t.min)),Ou(0,1,r)}function bfe(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const cO=.35;function wfe(e=cO){return e===!1?e=0:e===!0&&(e=cO),{x:CD(e,"left","right"),y:CD(e,"top","bottom")}}function CD(e,t,r){return{min:AD(e,t),max:AD(e,r)}}function AD(e,t){return typeof e=="number"?e:e[t]||0}const xfe=new WeakMap;class Mfe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Hn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(f0(d).point)},o=(d,h)=>{const{drag:m,dragPropagation:g,onDragStart:v}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kce(m),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Po(x=>{let w=this.getAxisMotionValue(x).get()||0;if(dl.test(w)){const{projection:S}=this.visualElement;if(S&&S.layout){const M=S.layout.layoutBox[x];M&&(w=ps(M)*(parseFloat(w)/100))}}this.originPoint[x]=w}),v&&xn.postRender(()=>v(d,h)),lO(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},a=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h;const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:v,onDrag:y}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:x}=h;if(g&&this.currentDirection===null){this.currentDirection=Tfe(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),y&&y(d,h)},l=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h,this.stop(d,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Po(d=>this.getAnimationState(d)==="paused"&&this.getAxisMotionValue(d).animation?.play()),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Hq(t,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:n,contextWindow:qq(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,i=r||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!n)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&xn.postRender(()=>a(n,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:i}=this.getProps();if(!n||!Ab(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=gfe(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&im(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=vfe(n.layoutBox,t):this.constraints=!1,this.elastic=wfe(r),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Po(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=bfe(n.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!im(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Sde(n,i.root,this.visualElement.getTransformPagePoint());let o=yfe(i.layout.layoutBox,s);if(r){const a=r(xde(o));this.hasMutatedConstraints=!!a,a&&(o=kq(a))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Po(c=>{if(!Ab(c,r,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const h=i?200:1e6,m=i?40:1e7,g={type:"inertia",velocity:n?t[c]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(a)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return lO(this.visualElement,t),n.start(hI(t,n,0,r,this.visualElement,!1))}stopAnimation(){Po(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Po(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Po(r=>{const{drag:n}=this.getProps();if(!Ab(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[r];s.set(t[r]-$n(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!im(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Po(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=_fe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Po(o=>{if(!Ab(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set($n(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;xfe.set(this.visualElement,this);const t=this.visualElement.current,r=Hy(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();im(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),xn.read(n);const o=b_(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Po(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())}));return()=>{o(),r(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=cO,dragMomentum:a=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Ab(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function Tfe(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class Sfe extends ed{constructor(t){super(t),this.removeGroupControls=Ro,this.removeListeners=Ro,this.controls=new Mfe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ro}unmount(){this.removeGroupControls(),this.removeListeners()}}const OD=e=>(t,r)=>{e&&xn.postRender(()=>e(t,r))};class Pfe extends ed{constructor(){super(...arguments),this.removePointerDownListener=Ro}onPointerDown(t){this.session=new Hq(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qq(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:OD(t),onStart:OD(r),onMove:n,onEnd:(s,o)=>{delete this.session,i&&xn.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Hy(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const mw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kD(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const uy={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(qt.test(e))e=parseFloat(e);else return e;const r=kD(e,t.target.x),n=kD(e,t.target.y);return`${r}% ${n}%`}},Efe={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,i=Kc.parse(e);if(i.length>5)return n;const s=Kc.createTransformer(e),o=typeof i[0]!="number"?1:0,a=r.x.scale*t.x,l=r.y.scale*t.y;i[0+o]/=a,i[1+o]/=l;const u=$n(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};let HM=!1;class Cfe extends $.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=t;Yce(Afe),s&&(r.group&&r.group.add(s),n&&n.register&&i&&n.register(s),HM&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),mw.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:i,isPresent:s}=this.props,{projection:o}=n;return o&&(o.isPresent=s,HM=!0,i||t.layoutDependency!==r||r===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||xn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),rI.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=t;HM=!0,i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Xq(e){const[t,r]=vq(),n=$.useContext($2);return _.jsx(Cfe,{...e,layoutGroup:n,switchLayoutGroup:$.useContext(Aq),isPresent:t,safeToRemove:r})}const Afe={borderRadius:{...uy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:uy,borderTopRightRadius:uy,borderBottomLeftRadius:uy,borderBottomRightRadius:uy,boxShadow:Efe};function Ofe(e,t,r){const n=Zi(e)?e:Cm(e);return n.start(hI("",n,t,r)),n.animation}const kfe=(e,t)=>e.depth-t.depth;class Ife{constructor(){this.children=[],this.isDirty=!1}add(t){R2(this.children,t),this.isDirty=!0}remove(t){L2(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(kfe),this.isDirty=!1,this.children.forEach(t)}}function jfe(e,t){const r=Cs.now(),n=({timestamp:i})=>{const s=i-r;s>=t&&(Hc(n),e(s-t))};return xn.setup(n,!0),()=>Hc(n)}const Yq=["TopLeft","TopRight","BottomLeft","BottomRight"],$fe=Yq.length,ID=e=>typeof e=="string"?parseFloat(e):e,jD=e=>typeof e=="number"||qt.test(e);function Nfe(e,t,r,n,i,s){i?(e.opacity=$n(0,r.opacity??1,Dfe(n)),e.opacityExit=$n(t.opacity??1,0,Rfe(n))):s&&(e.opacity=$n(t.opacity??1,r.opacity??1,n));for(let o=0;o<$fe;o++){const a=`border${Yq[o]}Radius`;let l=$D(t,a),u=$D(r,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||jD(l)===jD(u)?(e[a]=Math.max($n(ID(l),ID(u),n),0),(dl.test(u)||dl.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||r.rotate)&&(e.rotate=$n(t.rotate||0,r.rotate||0,n))}function $D(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Dfe=Qq(0,.5,RG),Rfe=Qq(.5,.95,Ro);function Qq(e,t,r){return n=>n<e?0:n>t?1:r(m_(e,t,n))}function ND(e,t){e.min=t.min,e.max=t.max}function wo(e,t){ND(e.x,t.x),ND(e.y,t.y)}function DD(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function RD(e,t,r,n,i){return e-=t,e=Uw(e,1/r,n),i!==void 0&&(e=Uw(e,1/i,n)),e}function Lfe(e,t=0,r=1,n=.5,i,s=e,o=e){if(dl.test(t)&&(t=parseFloat(t),t=$n(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=$n(s.min,s.max,n);e===s&&(a-=t),e.min=RD(e.min,t,r,a,i),e.max=RD(e.max,t,r,a,i)}function LD(e,t,[r,n,i],s,o){Lfe(e,t[r],t[n],t[i],t.scale,s,o)}const Ffe=["x","scaleX","originX"],Bfe=["y","scaleY","originY"];function FD(e,t,r,n){LD(e.x,t,Ffe,r?r.x:void 0,n?n.x:void 0),LD(e.y,t,Bfe,r?r.y:void 0,n?n.y:void 0)}function BD(e){return e.translate===0&&e.scale===1}function Jq(e){return BD(e.x)&&BD(e.y)}function zD(e,t){return e.min===t.min&&e.max===t.max}function zfe(e,t){return zD(e.x,t.x)&&zD(e.y,t.y)}function UD(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Zq(e,t){return UD(e.x,t.x)&&UD(e.y,t.y)}function VD(e){return ps(e.x)/ps(e.y)}function WD(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Ufe{constructor(){this.members=[]}add(t){R2(this.members,t),t.scheduleRender()}remove(t){if(L2(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Vfe(e,t,r){let n="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=r?.z||0;if((i||s||o)&&(n=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:h,skewX:m,skewY:g}=r;u&&(n=`perspective(${u}px) ${n}`),c&&(n+=`rotate(${c}deg) `),d&&(n+=`rotateX(${d}deg) `),h&&(n+=`rotateY(${h}deg) `),m&&(n+=`skewX(${m}deg) `),g&&(n+=`skewY(${g}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const KM=["","X","Y","Z"],Wfe=1e3;let Gfe=0;function XM(e,t,r,n){const{latestValues:i}=t;i[e]&&(r[e]=i[e],t.setStaticValue(e,0),n&&(n[e]=0))}function eH(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=Fq(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",xn,!(i||s))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&eH(n)}function tH({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},a=t?.()){this.id=Gfe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Kfe),this.nodes.forEach(Jfe),this.nodes.forEach(Zfe),this.nodes.forEach(Xfe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ife)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new z2),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=gq(o)&&!Rce(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let c,d=0;const h=()=>this.root.updateBlockedByResize=!1;xn.read(()=>{d=window.innerWidth}),e(o,()=>{const m=window.innerWidth;m!==d&&(d=m,this.root.updateBlockedByResize=!0,c&&c(),c=jfe(h,250),mw.hasAnimatedSinceResize&&(mw.hasAnimatedSinceResize=!1,this.nodes.forEach(HD)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:h,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||ihe,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=u.getProps(),x=!this.targetLayout||!Zq(this.targetLayout,m),w=!d&&h;if(this.options.layoutRoot||this.resumeFrom||w||d&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...eI(g,"layout"),onPlay:v,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(c,w)}else d||HD(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Hc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ehe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&eH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(GD);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(qD);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Qfe),this.nodes.forEach(qfe),this.nodes.forEach(Hfe)):this.nodes.forEach(qD),this.clearAllSnapshots();const a=Cs.now();Ri.delta=Ou(0,1e3/60,a-Ri.timestamp),Ri.timestamp=a,Ri.isProcessing=!0,RM.update.process(Ri),RM.preRender.process(Ri),RM.render.process(Ri),Ri.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,rI.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Yfe),this.sharedNodes.forEach(the)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ps(this.snapshot.measuredBox.x)&&!ps(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Hn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Jq(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Sf(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),she(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Hn();const a=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(ohe))){const{scroll:u}=this.root;u&&(sm(a.x,u.offset.x),sm(a.y,u.offset.y))}return a}removeElementScroll(o){const a=Hn();if(wo(a,o),this.scroll?.wasRoot)return a;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:c,options:d}=u;u!==this.root&&c&&d.layoutScroll&&(c.wasRoot&&wo(a,o),sm(a.x,c.offset.x),sm(a.y,c.offset.y))}return a}applyTransform(o,a=!1){const l=Hn();wo(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&om(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Sf(c.latestValues)&&om(l,c.latestValues)}return Sf(this.latestValues)&&om(l,this.latestValues),l}removeTransform(o){const a=Hn();wo(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Sf(u.latestValues))continue;iO(u.latestValues)&&u.updateSnapshot();const c=Hn(),d=u.measurePageBox();wo(c,d),FD(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Sf(this.latestValues)&&FD(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ri.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!(!this.layout||!(c||d))){if(this.resolvedRelativeTargetAt=Ri.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Hn(),this.relativeTargetOrigin=Hn(),Xy(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),wo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Hn(),this.targetWithTransforms=Hn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ffe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wo(this.target,this.layout.layoutBox),jq(this.target,this.targetDelta)):wo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Hn(),this.relativeTargetOrigin=Hn(),Xy(this.relativeTargetOrigin,this.target,h.target),wo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||iO(this.parent.latestValues)||Iq(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ri.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;wo(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;Tde(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Hn());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(DD(this.prevProjectionDelta.x,this.projectionDelta.x),DD(this.prevProjectionDelta.y,this.projectionDelta.y)),Ky(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!WD(this.projectionDelta.x,this.prevProjectionDelta.x)||!WD(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=am(),this.projectionDelta=am(),this.projectionDeltaWithTransform=am()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=am();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Hn(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,v=m!==g,y=this.getStack(),x=!y||y.members.length<=1,w=!!(v&&!x&&this.options.crossfade===!0&&!this.path.some(nhe));this.animationProgress=0;let S;this.mixTargetDelta=M=>{const T=M/1e3;KD(d.x,o.x,T),KD(d.y,o.y,T),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xy(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rhe(this.relativeTarget,this.relativeTargetOrigin,h,T),S&&zfe(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Hn()),wo(S,this.relativeTarget)),v&&(this.animationValues=c,Nfe(c,u,this.latestValues,T,w,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Hc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xn.update(()=>{mw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Cm(0)),this.currentAnimation=Ofe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Wfe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&rH(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Hn();const d=ps(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const h=ps(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}wo(a,l),om(a,c),Ky(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Ufe),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&XM("z",o,u,this.animationValues);for(let c=0;c<KM.length;c++)XM(`rotate${KM[c]}`,o,u,this.animationValues),XM(`skew${KM[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=pw(a?.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=pw(a?.pointerEvents)||""),this.hasProjected&&!Sf(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=Vfe(this.projectionDeltaWithTransform,this.treeScale,c);l&&(d=l(c,d)),o.transform=d;const{x:h,y:m}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const g in __){if(c[g]===void 0)continue;const{correct:v,applyTo:y,isCSSVariable:x}=__[g],w=d==="none"?c[g]:v(c[g],u);if(y){const S=y.length;for(let M=0;M<S;M++)o[y[M]]=w}else x?this.options.visualElement.renderState.vars[g]=w:o[g]=w}this.options.layoutId&&(o.pointerEvents=u===this?pw(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(GD),this.root.sharedNodes.clear()}}}function qfe(e){e.updateLayout()}function Hfe(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?Po(c=>{const d=s?t.measuredBox[c]:t.layoutBox[c],h=ps(d);d.min=r[c].min,d.max=d.min+h}):rH(i,t.layoutBox,r)&&Po(c=>{const d=s?t.measuredBox[c]:t.layoutBox[c],h=ps(r[c]);d.max=d.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[c].max=e.relativeTarget[c].min+h)});const o=am();Ky(o,r,t.layoutBox);const a=am();s?Ky(a,e.applyTransform(n,!0),t.measuredBox):Ky(a,r,t.layoutBox);const l=!Jq(o);let u=!1;if(!e.resumeFrom){const c=e.getClosestProjectingParent();if(c&&!c.resumeFrom){const{snapshot:d,layout:h}=c;if(d&&h){const m=Hn();Xy(m,t.layoutBox,d.layoutBox);const g=Hn();Xy(g,r,h.layoutBox),Zq(m,g)||(u=!0),c.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=m,e.relativeParent=c)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Kfe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Xfe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Yfe(e){e.clearSnapshot()}function GD(e){e.clearMeasurements()}function qD(e){e.isLayoutDirty=!1}function Qfe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function HD(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Jfe(e){e.resolveTargetDelta()}function Zfe(e){e.calcProjection()}function ehe(e){e.resetSkewAndRotation()}function the(e){e.removeLeadSnapshot()}function KD(e,t,r){e.translate=$n(t.translate,0,r),e.scale=$n(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function XD(e,t,r,n){e.min=$n(t.min,r.min,n),e.max=$n(t.max,r.max,n)}function rhe(e,t,r,n){XD(e.x,t.x,r.x,n),XD(e.y,t.y,r.y,n)}function nhe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const ihe={duration:.45,ease:[.4,0,.1,1]},YD=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),QD=YD("applewebkit/")&&!YD("chrome/")?Math.round:Ro;function JD(e){e.min=QD(e.min),e.max=QD(e.max)}function she(e){JD(e.x),JD(e.y)}function rH(e,t,r){return e==="position"||e==="preserve-aspect"&&!dfe(VD(t),VD(r),.2)}function ohe(e){return e!==e.root&&e.scroll?.wasRoot}const ahe=tH({attachResizeListener:(e,t)=>b_(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),YM={current:void 0},nH=tH({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!YM.current){const e=new ahe({});e.mount(window),e.setOptions({layoutScroll:!0}),YM.current=e}return YM.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),lhe={pan:{Feature:Pfe},drag:{Feature:Sfe,ProjectionNode:nH,MeasureLayout:Xq}};function ZD(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,s=n[i];s&&xn.postRender(()=>s(t,f0(t)))}class uhe extends ed{mount(){const{current:t}=this.node;t&&(this.unmount=Ice(t,(r,n)=>(ZD(this.node,n,"Start"),i=>ZD(this.node,i,"End"))))}unmount(){}}class che extends ed{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=u0(b_(this.node.current,"focus",()=>this.onFocus()),b_(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function eR(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),s=n[i];s&&xn.postRender(()=>s(t,f0(t)))}class dhe extends ed{mount(){const{current:t}=this.node;t&&(this.unmount=Dce(t,(r,n)=>(eR(this.node,n,"Start"),(i,{success:s})=>eR(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const dO=new WeakMap,QM=new WeakMap,fhe=e=>{const t=dO.get(e.target);t&&t(e)},hhe=e=>{e.forEach(fhe)};function phe({root:e,...t}){const r=e||document;QM.has(r)||QM.set(r,{});const n=QM.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(hhe,{root:e,...t})),n[i]}function mhe(e,t,r){const n=phe(t);return dO.set(e,r),n.observe(e),()=>{dO.delete(e),n.unobserve(e)}}const ghe={some:0,all:1};class vhe extends ed{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:s}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:ghe[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),h=u?c:d;h&&h(l)};return mhe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(yhe(t,r))&&this.startObserver()}unmount(){}}function yhe({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const _he={inView:{Feature:vhe},tap:{Feature:dhe},focus:{Feature:che},hover:{Feature:uhe}},bhe={layout:{ProjectionNode:nH,MeasureLayout:Xq}},whe={...sfe,..._he,...lhe,...bhe},ui=wde(whe,$de),fO=o0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Yt=$.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},s)=>{const o=n?Kf:"button";return _.jsx(o,{className:Kt(fO({variant:t,size:r,className:e})),ref:s,...i})});Yt.displayName="Button";const Er=$.forwardRef(({className:e,...t},r)=>_.jsx("div",{ref:r,className:Kt("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Er.displayName="Card";const Qf=$.forwardRef(({className:e,...t},r)=>_.jsx("div",{ref:r,className:Kt("flex flex-col space-y-1.5 p-6",e),...t}));Qf.displayName="CardHeader";const Jf=$.forwardRef(({className:e,...t},r)=>_.jsx("h3",{ref:r,className:Kt("text-2xl font-semibold leading-none tracking-tight",e),...t}));Jf.displayName="CardTitle";const xhe=$.forwardRef(({className:e,...t},r)=>_.jsx("p",{ref:r,className:Kt("text-sm text-muted-foreground",e),...t}));xhe.displayName="CardDescription";const Nr=$.forwardRef(({className:e,...t},r)=>_.jsx("div",{ref:r,className:Kt("p-6 pt-0",e),...t}));Nr.displayName="CardContent";const iH=$.forwardRef(({className:e,...t},r)=>_.jsx("div",{ref:r,className:Kt("flex items-center p-6 pt-0",e),...t}));iH.displayName="CardFooter";const gw="/assets/logo-CM8P8ze5.png",Mhe=({onComplete:e})=>{const[t,r]=$.useState("welcome"),[n,i]=$.useState(!1),s=()=>{r("transition"),setTimeout(()=>{r("message"),i(!0)},800)},o=()=>{i(!1),r("complete"),setTimeout(()=>{e()},500)};return $.useEffect(()=>{if(t==="message"){const a=setTimeout(()=>{o()},3e3);return()=>clearTimeout(a)}},[t]),_.jsx(nO,{children:t!=="complete"&&_.jsxs(ui.div,{initial:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50",children:[t==="welcome"&&_.jsxs(ui.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-full h-full bg-white flex flex-col items-center justify-center p-8",children:[_.jsx(ui.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:1,ease:"easeOut"},className:"mb-16",children:_.jsx("img",{src:gw,alt:"Fashion App Logo",className:"w-32 h-32 object-contain"})}),_.jsx(ui.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5,duration:.8},children:_.jsx(Yt,{onClick:s,size:"lg",className:"px-12 py-4 text-lg font-semibold bg-gradient-primary hover:scale-105 transform transition-all duration-300 shadow-glow",children:"Get Started"})})]}),t==="transition"&&_.jsx(ui.div,{initial:{opacity:1},animate:{opacity:1},className:"w-full h-full bg-white flex items-center justify-center",children:_.jsx(ui.img,{src:gw,alt:"Fashion App Logo",initial:{scale:1,x:0,y:0},animate:{scale:.3,x:-150,y:-200},transition:{duration:.8,ease:"easeInOut"},className:"w-32 h-32 object-contain"})}),t==="message"&&_.jsxs(ui.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-full relative",children:[_.jsx(ui.div,{initial:{backdropFilter:"blur(0px)"},animate:{backdropFilter:"blur(10px)"},transition:{duration:.5},className:"absolute inset-0 bg-gradient-to-br from-outfit-primary/20 via-transparent to-outfit-secondary/20"}),_.jsx(ui.img,{src:gw,alt:"Fashion App Logo",initial:{scale:.3,x:-150,y:-200},animate:{scale:.2,x:-180,y:-250},className:"absolute top-8 left-8 w-32 h-32 object-contain opacity-60"}),_.jsx(nO,{children:n&&_.jsx(ui.div,{initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-50},transition:{duration:.6,type:"spring",stiffness:200},className:"absolute inset-0 flex items-center justify-center p-8",children:_.jsx(Er,{className:"relative p-6 bg-gradient-card shadow-glow border-0 max-w-sm w-full",children:_.jsxs("div",{className:"flex items-center space-x-4",children:[_.jsxs("div",{className:"relative flex-shrink-0",children:[_.jsx("div",{className:"w-12 h-12 bg-gradient-primary rounded-full flex items-center justify-center",children:_.jsx(ui.div,{animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},className:"text-white text-xl",children:""})}),_.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-primary rounded-full animate-pulse"})]}),_.jsx("div",{className:"flex-1 min-w-0",children:_.jsx(ui.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-lg font-medium bg-gradient-primary bg-clip-text text-transparent",children:"Let's create some outfits for you! "})})]})})})})]})]})})},The="/assets/onboarding-wardrobe-CU79QhAD.png",She="/assets/onboarding-ai-styling-Dr1WDoBV.png",Phe="/assets/onboarding-calendar-Cqicmulz.png",Ehe=({onComplete:e})=>{const[t,r]=$.useState(0),n=[{title:"Unlock Your Virtual Wardrobe",description:"Digitize your clothes & see everything you own",image:The,buttonText:"Next: Smart Styling"},{title:"AI-Powered Styling",description:"Get personalized outfit suggestions based on weather, occasion, and your style",image:She,buttonText:"Next: Plan Outfits"},{title:"Plan & Track Outfits",description:"Schedule your weekly looks and discover your most-loved pieces",image:Phe,buttonText:"Get Started"}],i=()=>{t<n.length-1?r(t+1):e()},s=n[t];return _.jsx("div",{className:"fixed inset-0 z-50 bg-background",children:_.jsxs("div",{className:"h-full w-full flex flex-col",children:[_.jsx("div",{className:"flex justify-center pt-8 pb-4",children:_.jsx(ui.img,{src:gw,alt:"OutfitFlex",className:"h-16 w-16",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:.6,type:"spring"}})}),_.jsx(ui.h2,{className:"text-center text-2xl font-bold text-foreground mb-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"OutfitFlex"}),_.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6 pb-4",children:_.jsx(nO,{mode:"wait",children:_.jsxs(ui.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.4},className:"w-full max-w-md flex flex-col items-center text-center space-y-6",children:[_.jsx(ui.div,{className:"w-full max-w-sm aspect-square rounded-3xl overflow-hidden shadow-lg",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5},children:_.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover"})}),_.jsxs("div",{className:"space-y-3 px-4",children:[_.jsx(ui.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-3xl font-bold text-foreground",children:s.title}),_.jsx(ui.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-base text-muted-foreground leading-relaxed",children:s.description})]})]},t)})}),_.jsxs("div",{className:"pb-8 px-6 space-y-6",children:[_.jsxs(Yt,{onClick:i,className:"w-full h-14 text-lg font-semibold rounded-full bg-gradient-to-r from-[hsl(20,70%,65%)] to-[hsl(25,75%,70%)] hover:opacity-90 transition-opacity shadow-lg text-white",children:[s.buttonText,_.jsx(M8,{className:"ml-2 h-5 w-5"})]}),_.jsx("div",{className:"flex justify-center gap-2",children:n.map((o,a)=>_.jsx(ui.div,{className:`h-2 rounded-full transition-all duration-300 ${a===t?"w-8 bg-[hsl(20,70%,65%)]":"w-2 bg-muted"}`,animate:{scale:1}},a))})]})]})})},td=()=>{const[e,t]=$.useState([]),[r,n]=$.useState(!0),{user:i}=Oa(),s=async()=>{if(!i)return;n(!0);const{data:u,error:c}=await Mr.from("clothing_items").select("*").order("created_at",{ascending:!1});c?console.error("Error fetching clothing items:",c):t(u||[]),n(!1)},o=async u=>{if(!i)return;const{data:c,error:d}=await Mr.from("clothing_items").insert([{...u,user_id:i.id}]).select().single();if(d)throw console.error("Error adding clothing item:",d),d;return t(h=>[c,...h]),c},a=async(u,c)=>{const{data:d,error:h}=await Mr.from("clothing_items").update(c).eq("id",u).select().single();if(h)throw console.error("Error updating clothing item:",h),h;return t(m=>m.map(g=>g.id===u?d:g)),d},l=async u=>{const{error:c}=await Mr.from("clothing_items").delete().eq("id",u);if(c)throw console.error("Error deleting clothing item:",c),c;t(d=>d.filter(h=>h.id!==u))};return $.useEffect(()=>{s()},[i]),{items:e,loading:r,addItem:o,updateItem:a,deleteItem:l,refetch:s}},uh=()=>{const[e,t]=$.useState([]),[r,n]=$.useState(!0),{user:i}=Oa(),s=async()=>{if(!i)return;n(!0);const{data:c,error:d}=await Mr.from("outfits").select(`
        *,
        outfit_items (
          id,
          clothing_item_id,
          clothing_items (
            id,
            name,
            image_url,
            color,
            category
          )
        )
      `).order("created_at",{ascending:!1});if(d)console.error("Error fetching outfits:",d);else{const h=c?.map(m=>({...m,items:m.outfit_items?.map(g=>({id:g.id,clothing_item_id:g.clothing_item_id,clothing_item:g.clothing_items}))}))||[];t(h)}n(!1)},o=async c=>{if(!i)return;const{data:d,error:h}=await Mr.from("outfits").insert([{name:c.name,description:c.description,season:c.season,occasion:c.occasion,weather:c.weather,user_id:i.id}]).select().single();if(h)throw console.error("Error creating outfit:",h),h;if(c.itemIds.length>0){const{error:m}=await Mr.from("outfit_items").insert(c.itemIds.map(g=>({outfit_id:d.id,clothing_item_id:g})));if(m)throw console.error("Error adding items to outfit:",m),m}return await s(),d},a=async(c,d)=>{const{data:h,error:m}=await Mr.from("outfits").update(d).eq("id",c).select().single();if(m)throw console.error("Error updating outfit:",m),m;return t(g=>g.map(v=>v.id===c?{...v,...h}:v)),h},l=async c=>{const{error:d}=await Mr.from("outfits").delete().eq("id",c);if(d)throw console.error("Error deleting outfit:",d),d;t(h=>h.filter(m=>m.id!==c))},u=async c=>{const d=e.find(h=>h.id===c);d&&await a(c,{is_favorite:!d.is_favorite})};return $.useEffect(()=>{s()},[i]),{outfits:e,loading:r,createOutfit:o,updateOutfit:a,deleteOutfit:l,toggleFavorite:u,refetch:s}},h0=()=>{const{user:e}=Oa(),{toast:t}=ro(),[r,n]=$.useState(null),[i,s]=$.useState(!0);$.useEffect(()=>{e?o():(n(null),s(!1))},[e]);const o=async()=>{try{const{data:c,error:d}=await Mr.from("profiles").select("*").eq("id",e?.id).single();if(d&&d.code!=="PGRST116")throw d;if(c)n(c);else{const h={id:e?.id,email:e?.email,full_name:null,avatar_url:null,age_group:null,gender:null,region:null},{error:m}=await Mr.from("profiles").insert([h]);m?console.error("Error creating profile:",m):n(h)}}catch(c){console.error("Error fetching profile:",c)}finally{s(!1)}};return{profile:r,loading:i,updateProfile:async c=>{try{const{error:d}=await Mr.from("profiles").update(c).eq("id",e?.id);if(d)throw d;return n(h=>h?{...h,...c}:null),t({title:"Profile updated",description:"Your profile has been updated successfully."}),{success:!0}}catch(d){return console.error("Error updating profile:",d),t({title:"Error updating profile",description:"Please try again.",variant:"destructive"}),{success:!1,error:d}}},getDisplayName:()=>r?.full_name?r.full_name:r?.email?r.email.split("@")[0]:"Fashion Enthusiast",getFirstName:()=>r?.full_name?r.full_name.split(" ")[0]:r?.email?r.email.split("@")[0]:"there",refetch:o}},Che=()=>{const e=js(),{items:t}=td(),{outfits:r}=uh(),{getFirstName:n}=h0(),i=t.slice(0,4);return _.jsxs("div",{className:"w-full min-h-screen bg-white pb-24",children:[_.jsxs("div",{className:"px-5 pt-10",children:[_.jsx("h1",{className:"text-center text-[22px] font-semibold",children:"OutfitFlex"}),_.jsxs("p",{className:"mt-3 text-sm text-gray-500",children:["Hello, ",_.jsxs("span",{className:"font-semibold",children:[n(),"."]})," Your Style Journey Awaits."]})]}),_.jsx("div",{className:"px-1",children:_.jsxs(Er,{className:"overflow-hidden bg-[url('https://images.pexels.com/photos/20243301/pexels-photo-20243301.jpeg')] bg-cover bg-center relative rounded-xl",children:[_.jsx("div",{className:"absolute inset-0 bg-black/40"}),_.jsxs(Nr,{className:"relative z-10 text-white p-6 space-y-2",children:[_.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:"YOUR DAILY STYLE INSPIRATION"}),_.jsx("p",{className:"text-sm opacity-90",children:"Tap to unveil bespoke outfits curated for your unique presence."}),_.jsxs(Yt,{onClick:()=>e("/outfits/suggestions"),className:"mt-3 bg-gradient-to-r from-purple-600 to-pink-500 hover:opacity-90 text-white font-semibold rounded-lg",children:[_.jsx(Do,{className:"w-4 h-4 mr-2"}),"Discover My Outfit"]})]})]})}),_.jsx("div",{className:"px-5 mt-6",children:_.jsxs("div",{className:"w-full bg-white rounded-xl border border-gray-200 p-4",children:[_.jsx("h3",{className:"text-[15px] font-semibold mb-4",children:"YOUR STYLE UNIVERSE"}),_.jsxs("div",{className:"flex items-center justify-between text-center",children:[_.jsxs("div",{className:"flex-1",children:[_.jsx("p",{className:"text-[22px] font-bold",children:t.length}),_.jsx("p",{className:"text-xs text-gray-500",children:"ITEMS CURATED"})]}),_.jsx("div",{className:"h-10 w-px bg-gray-200"}),_.jsxs("div",{className:"flex-1",children:[_.jsx("p",{className:"text-[22px] font-bold",children:r.length}),_.jsx("p",{className:"text-xs text-gray-500",children:"ENSEMBLES CREATED"})]})]}),_.jsx(Yt,{onClick:()=>e("/wardrobe"),className:"mt-4 w-full border rounded-full text-gray-700 bg-white hover:bg-gray-100 shadow-sm",children:"EXPLORE YOUR COLLECTION"})]})}),_.jsxs("div",{className:"px-5 mt-6",children:[_.jsx("h3",{className:"text-[15px] font-semibold mb-3",children:"NEWLY UNVEILED PIECES"}),_.jsxs("div",{className:"flex overflow-x-auto gap-4 pb-2 no-scrollbar",children:[i.map(s=>_.jsxs("div",{className:"w-[120px] flex-shrink-0 cursor-pointer",onClick:()=>e(`/wardrobe/item/${s.id}`),children:[_.jsx("div",{className:"w-full h-[140px] bg-gray-100 rounded-xl overflow-hidden shadow-sm",children:s.image_url?_.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:_.jsx("div",{className:"w-10 h-10 rounded-full",style:{backgroundColor:s.hex_color||s.color}})})}),_.jsx("p",{className:"mt-2 font-semibold text-sm truncate",children:s.name}),_.jsx("p",{className:"text-xs text-gray-500 capitalize",children:s.category})]},s.id)),_.jsxs("div",{onClick:()=>e("/wardrobe/add"),className:"w-[120px] flex-shrink-0 cursor-pointer",children:[_.jsx("div",{className:"w-full h-[140px] bg-gray-100 rounded-xl flex items-center justify-center border border-gray-300",children:_.jsx("span",{className:"text-3xl text-gray-500",children:"+"})}),_.jsx("p",{className:"mt-2 font-semibold text-sm",children:"Add New"})]})]})]})]})},Ahe=()=>{const e=js(),{items:t}=td();return _.jsxs("div",{className:"w-full min-h-screen bg-white pb-32",children:[_.jsxs("div",{className:`
        sticky top-0 z-20 
        backdrop-blur-xl bg-white/70 
        border-b border-gray-200/40 
        px-5 py-6
        shadow-[0_4px_20px_-8px_rgba(0,0,0,0.1)]
        flex items-start gap-3
      `,children:[_.jsx("div",{className:"w-1 h-8 rounded-full bg-gradient-to-b from-pink-500 to-purple-600"}),_.jsxs("div",{children:[_.jsx("h1",{className:"text-[24px] font-semibold tracking-tight text-gray-900",children:"My Fashion Collection"}),_.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Discover your curated wardrobe."})]})]}),_.jsxs("div",{className:"px-5 mt-6",children:[_.jsx("h2",{className:"text-[15px] font-semibold mb-3",children:"Your Items"}),_.jsx("div",{className:"grid grid-cols-2 gap-5",children:t.map(r=>_.jsxs("div",{className:"w-full cursor-pointer",onClick:()=>e(`/wardrobe/item/${r.id}`),children:[_.jsx("div",{className:"w-full h-40 bg-gray-100 rounded-xl overflow-hidden shadow-sm",children:r.image_url?_.jsx("img",{src:r.image_url,alt:r.name,className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:_.jsx("div",{className:"w-10 h-10 rounded-full",style:{backgroundColor:r.hex_color||r.color}})})}),_.jsx("p",{className:"mt-2 font-semibold text-sm truncate",children:r.name}),_.jsx("p",{className:"text-xs text-gray-500 capitalize",children:r.category})]},r.id))})]}),_.jsx("button",{onClick:()=>e("/wardrobe/add"),className:`
          fixed bottom-24 right-6 z-50
          w-16 h-16 rounded-full
          bg-gradient-to-br from-pink-500 to-purple-600
          shadow-xl shadow-pink-400/40
          flex items-center justify-center
          text-white text-4xl font-light
          transition-transform active:scale-95
        `,children:"+"})]})};function Ohe(e,t=[]){let r=[];function n(s,o){const a=$.createContext(o),l=r.length;r=[...r,o];function u(d){const{scope:h,children:m,...g}=d,v=h?.[e][l]||a,y=$.useMemo(()=>g,Object.values(g));return _.jsx(v.Provider,{value:y,children:m})}function c(d,h){const m=h?.[e][l]||a,g=$.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const i=()=>{const s=r.map(o=>$.createContext(o));return function(a){const l=a?.[e]||s;return $.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[n,khe(i,...t)]}function khe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=n.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return $.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var Ihe=$.createContext(void 0);function pI(e){const t=$.useContext(Ihe);return e||t||"ltr"}var JM="rovingFocusGroup.onEntryFocus",jhe={bubbles:!1,cancelable:!0},c1="RovingFocusGroup",[hO,sH,$he]=n2(c1),[Nhe,oH]=Ohe(c1,[$he]),[Dhe,Rhe]=Nhe(c1),aH=$.forwardRef((e,t)=>_.jsx(hO.Provider,{scope:e.__scopeRovingFocusGroup,children:_.jsx(hO.Slot,{scope:e.__scopeRovingFocusGroup,children:_.jsx(Lhe,{...e,ref:t})})}));aH.displayName=c1;var Lhe=$.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:c=!1,...d}=e,h=$.useRef(null),m=tn(t,h),g=pI(s),[v=null,y]=Xf({prop:o,defaultProp:a,onChange:l}),[x,w]=$.useState(!1),S=gs(u),M=sH(r),T=$.useRef(!1),[P,E]=$.useState(0);return $.useEffect(()=>{const A=h.current;if(A)return A.addEventListener(JM,S),()=>A.removeEventListener(JM,S)},[S]),_.jsx(Dhe,{scope:r,orientation:n,dir:g,loop:i,currentTabStopId:v,onItemFocus:$.useCallback(A=>y(A),[y]),onItemShiftTab:$.useCallback(()=>w(!0),[]),onFocusableItemAdd:$.useCallback(()=>E(A=>A+1),[]),onFocusableItemRemove:$.useCallback(()=>E(A=>A-1),[]),children:_.jsx(Qt.div,{tabIndex:x||P===0?-1:0,"data-orientation":n,...d,ref:m,style:{outline:"none",...e.style},onMouseDown:Ut(e.onMouseDown,()=>{T.current=!0}),onFocus:Ut(e.onFocus,A=>{const L=!T.current;if(A.target===A.currentTarget&&L&&!x){const B=new CustomEvent(JM,jhe);if(A.currentTarget.dispatchEvent(B),!B.defaultPrevented){const V=M().filter(X=>X.focusable),G=V.find(X=>X.active),z=V.find(X=>X.id===v),J=[G,z,...V].filter(Boolean).map(X=>X.ref.current);cH(J,c)}}T.current=!1}),onBlur:Ut(e.onBlur,()=>w(!1))})})}),lH="RovingFocusGroupItem",uH=$.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:s,...o}=e,a=Fc(),l=s||a,u=Rhe(lH,r),c=u.currentTabStopId===l,d=sH(r),{onFocusableItemAdd:h,onFocusableItemRemove:m}=u;return $.useEffect(()=>{if(n)return h(),()=>m()},[n,h,m]),_.jsx(hO.ItemSlot,{scope:r,id:l,focusable:n,active:i,children:_.jsx(Qt.span,{tabIndex:c?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:Ut(e.onMouseDown,g=>{n?u.onItemFocus(l):g.preventDefault()}),onFocus:Ut(e.onFocus,()=>u.onItemFocus(l)),onKeyDown:Ut(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=zhe(g,u.orientation,u.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let x=d().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")x.reverse();else if(v==="prev"||v==="next"){v==="prev"&&x.reverse();const w=x.indexOf(g.currentTarget);x=u.loop?Uhe(x,w+1):x.slice(w+1)}setTimeout(()=>cH(x))}})})})});uH.displayName=lH;var Fhe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Bhe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function zhe(e,t,r){const n=Bhe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Fhe[n]}function cH(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function Uhe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Vhe=aH,Whe=uH,mI="Tabs",[Ghe]=oh(mI,[oH]),dH=oH(),[qhe,gI]=Ghe(mI),fH=$.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=e,c=pI(a),[d,h]=Xf({prop:n,onChange:i,defaultProp:s});return _.jsx(qhe,{scope:r,baseId:Fc(),value:d,onValueChange:h,orientation:o,dir:c,activationMode:l,children:_.jsx(Qt.div,{dir:c,"data-orientation":o,...u,ref:t})})});fH.displayName=mI;var hH="TabsList",pH=$.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,s=gI(hH,r),o=dH(r);return _.jsx(Vhe,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:n,children:_.jsx(Qt.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})});pH.displayName=hH;var mH="TabsTrigger",gH=$.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...s}=e,o=gI(mH,r),a=dH(r),l=_H(o.baseId,n),u=bH(o.baseId,n),c=n===o.value;return _.jsx(Whe,{asChild:!0,...a,focusable:!i,active:c,children:_.jsx(Qt.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":u,"data-state":c?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:t,onMouseDown:Ut(e.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(n):d.preventDefault()}),onKeyDown:Ut(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(n)}),onFocus:Ut(e.onFocus,()=>{const d=o.activationMode!=="manual";!c&&!i&&d&&o.onValueChange(n)})})})});gH.displayName=mH;var vH="TabsContent",yH=$.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:i,children:s,...o}=e,a=gI(vH,r),l=_H(a.baseId,n),u=bH(a.baseId,n),c=n===a.value,d=$.useRef(c);return $.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),_.jsx(Qc,{present:i||c,children:({present:h})=>_.jsx(Qt.div,{"data-state":c?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});yH.displayName=vH;function _H(e,t){return`${e}-trigger-${t}`}function bH(e,t){return`${e}-content-${t}`}var Hhe=fH,wH=pH,xH=gH,MH=yH;const TH=Hhe,vI=$.forwardRef(({className:e,...t},r)=>_.jsx(wH,{ref:r,className:Kt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));vI.displayName=wH.displayName;const vm=$.forwardRef(({className:e,...t},r)=>_.jsx(xH,{ref:r,className:Kt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));vm.displayName=xH.displayName;const ym=$.forwardRef(({className:e,...t},r)=>_.jsx(MH,{ref:r,className:Kt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ym.displayName=MH.displayName;function ol({className:e,...t}){return _.jsx("div",{className:Kt("animate-pulse rounded-md bg-muted",e),...t})}const Khe="/assets/fashion-character-DR9pR-V0.png",Xhe=["Yass queen! ","You're absolutely slaying! ","That outfit is giving main character energy! ","Obsessed with this look! ","Serving looks and I'm here for it! ","You understood the assignment! ","This fit is chef's kiss! ","Bestie, you look amazing! ","That style is everything! ","You're absolutely stunning! "],d1=({message:e,compliments:t=Xhe,isVisible:r=!0,onClose:n,autoHide:i=!0,duration:s=4e3})=>{const[o,a]=$.useState(r),[l,u]=$.useState(e||t[0]);return $.useEffect(()=>{a(r)},[r]),$.useEffect(()=>{if(o&&!e){const c=t[Math.floor(Math.random()*t.length)];u(c)}else e&&u(e)},[o,e,t]),$.useEffect(()=>{if(o&&i){const c=setTimeout(()=>{a(!1),n?.()},s);return()=>clearTimeout(c)}},[o,i,s,n]),o?_.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 animate-bounce-in w-[calc(100vw-2rem)] max-w-sm",children:_.jsx(Er,{className:"relative p-3 bg-gradient-card shadow-glow border-0",children:_.jsxs("div",{className:"flex items-start space-x-3",children:[_.jsxs("div",{className:"relative flex-shrink-0",children:[_.jsx("img",{src:Khe,alt:"Fashion Stylist",className:"w-12 h-12 animate-float"}),_.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-primary rounded-full animate-pulse-glow"})]}),_.jsx("div",{className:"flex-1 min-w-0",children:_.jsx("p",{className:"text-sm font-medium bg-gradient-primary bg-clip-text text-transparent",children:l})}),n&&_.jsx("button",{onClick:()=>{a(!1),n()},className:"flex-shrink-0 w-6 h-6 rounded-full bg-muted hover:bg-accent flex items-center justify-center text-muted-foreground hover:text-foreground transition-colors text-xs",children:""})]})})}):null},Yhe=()=>{const e=js(),{outfits:t,loading:r}=uh(),{getFirstName:n}=h0(),[i,s]=ye.useState(!1);ye.useEffect(()=>{!r&&t.length>0&&s(!0)},[r,t.length]);const o=t.filter(u=>u.is_favorite),a=t.slice(0,5);if(r)return _.jsxs("div",{className:"space-y-6 pb-6 animate-fade-in",children:[_.jsx("div",{className:"relative px-4 pt-8 pb-6 bg-gradient-hero rounded-b-[2rem] shadow-elegant",children:_.jsxs("div",{className:"text-center text-white space-y-3",children:[_.jsxs("div",{className:"flex justify-center items-center gap-2 mb-2",children:[_.jsx(Do,{className:"h-6 w-6 text-pink-200 animate-pulse"}),_.jsxs("h1",{className:"text-3xl font-bold",children:[n(),"'s Outfits"]}),_.jsx(Pw,{className:"h-6 w-6 text-yellow-200 animate-pulse"})]}),_.jsx("p",{className:"text-purple-100 text-lg font-medium",children:"Your Style Combinations"})]})}),_.jsx("div",{className:"px-4",children:_.jsx("div",{className:"grid gap-4",children:Array.from({length:3}).map((u,c)=>_.jsx(ol,{className:"h-32 rounded-xl"},c))})})]});const l=({outfit:u})=>_.jsx(Er,{className:"group cursor-pointer hover:shadow-card transition-all duration-300 bg-gradient-card border-0 hover:scale-105",onClick:()=>e(`/outfits/detail/${u.id}`),children:_.jsxs(Nr,{className:"p-4",children:[_.jsxs("div",{className:"flex justify-between items-start mb-2",children:[_.jsxs("div",{className:"flex-1",children:[_.jsx("h3",{className:"font-semibold",children:u.name}),u.description&&_.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:u.description})]}),u.is_favorite&&_.jsx(i_,{className:"h-4 w-4 fill-red-500 text-red-500 ml-2"})]}),_.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsxs("span",{children:[u.items?.length||0," items"]}),_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx(Lte,{className:"h-3 w-3"}),u.times_worn]})]}),_.jsx("span",{children:new Date(u.created_at).toLocaleDateString()})]}),u.items&&u.items.length>0&&_.jsxs("div",{className:"flex -space-x-2 mt-3",children:[u.items.slice(0,4).map((c,d)=>_.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-muted overflow-hidden",style:{zIndex:10-d},children:c.clothing_item?.image_url?_.jsx("img",{src:c.clothing_item.image_url,alt:c.clothing_item.name,className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full",style:{backgroundColor:c.clothing_item?.color||"#ccc"}})},c.id)),u.items.length>4&&_.jsxs("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-muted flex items-center justify-center text-xs font-medium",children:["+",u.items.length-4]})]})]})});return _.jsxs("div",{className:"space-y-6 pb-6 animate-fade-in",children:[_.jsxs("div",{className:"relative px-4 pt-8 pb-6 bg-gradient-hero rounded-b-[2rem] shadow-elegant",children:[_.jsxs("div",{className:"text-center text-white space-y-3",children:[_.jsxs("div",{className:"flex justify-center items-center gap-2 mb-2",children:[_.jsx(Do,{className:"h-6 w-6 text-pink-200 animate-pulse"}),_.jsxs("h1",{className:"text-3xl font-bold",children:[n(),"'s Outfits"]}),_.jsx(Pw,{className:"h-6 w-6 text-yellow-200 animate-pulse"})]}),_.jsx("p",{className:"text-purple-100 text-lg font-medium",children:"Your Style Combinations"}),_.jsxs("p",{className:"text-purple-200 text-sm max-w-xs mx-auto",children:[t.length," amazing outfits created with style "]})]}),_.jsx("div",{className:"absolute top-4 left-4 w-4 h-4 bg-white/20 rounded-full animate-float"}),_.jsx("div",{className:"absolute top-8 right-6 w-3 h-3 bg-pink-300/30 rounded-full animate-float",style:{animationDelay:"1s"}}),_.jsx("div",{className:"absolute bottom-4 left-8 w-2 h-2 bg-yellow-300/40 rounded-full animate-float",style:{animationDelay:"2s"}})]}),_.jsx("div",{className:"px-4 space-y-6",children:_.jsxs(TH,{defaultValue:"all",children:[_.jsxs(vI,{className:"w-full bg-gradient-card border-0 shadow-sm h-auto p-1",children:[_.jsxs(vm,{value:"all",className:"flex-1 data-[state=active]:bg-gradient-primary data-[state=active]:text-white rounded-lg transition-all duration-300",children:["All (",t.length,")"]}),_.jsxs(vm,{value:"saved",className:"flex-1 data-[state=active]:bg-gradient-primary data-[state=active]:text-white rounded-lg transition-all duration-300",children:["Saved (",o.length,")"]}),_.jsx(vm,{value:"recent",className:"flex-1 data-[state=active]:bg-gradient-primary data-[state=active]:text-white rounded-lg transition-all duration-300",children:"Recent"})]}),_.jsx(ym,{value:"all",className:"mt-6 space-y-4",children:t.length===0?_.jsxs("div",{className:"text-center py-12",children:[_.jsx("div",{className:"w-20 h-20 bg-gradient-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:_.jsx(s_,{className:"h-10 w-10 text-primary"})}),_.jsx("p",{className:"text-muted-foreground text-lg font-medium",children:"Ready to create your first outfit?"}),_.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"Combine your wardrobe items into stunning outfits"})]}):_.jsx("div",{className:"space-y-4",children:t.map((u,c)=>_.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${c*100}ms`},children:_.jsx(l,{outfit:u})},u.id))})}),_.jsx(ym,{value:"saved",className:"mt-6 space-y-4",children:o.length===0?_.jsxs("div",{className:"text-center py-12",children:[_.jsx("div",{className:"w-20 h-20 bg-gradient-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:_.jsx(i_,{className:"h-10 w-10 text-primary"})}),_.jsx("p",{className:"text-muted-foreground text-lg font-medium",children:"No saved outfits yet"}),_.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"Mark your favorite outfits with a heart"})]}):_.jsx("div",{className:"space-y-4",children:o.map((u,c)=>_.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${c*100}ms`},children:_.jsx(l,{outfit:u})},u.id))})}),_.jsx(ym,{value:"recent",className:"mt-6 space-y-4",children:a.length===0?_.jsxs("div",{className:"text-center py-12",children:[_.jsx("div",{className:"w-20 h-20 bg-gradient-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:_.jsx(Do,{className:"h-10 w-10 text-primary"})}),_.jsx("p",{className:"text-muted-foreground text-lg font-medium",children:"No recent outfits to show"}),_.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:"Create some outfits to see them here"})]}):_.jsx("div",{className:"space-y-4",children:a.map((u,c)=>_.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${c*100}ms`},children:_.jsx(l,{outfit:u})},u.id))})})]})}),_.jsx("div",{className:"flex justify-center pt-4 px-4",children:_.jsxs(Yt,{onClick:()=>e("/outfits/create"),className:"w-full max-w-xs bg-gradient-primary hover:shadow-elegant transition-all duration-300 border-0 shadow-lg",children:[_.jsx(s_,{className:"h-4 w-4 mr-2"}),"Create New Outfit"]})}),i&&_.jsx(d1,{message:`Your ${t.length} outfits are looking fire! `,isVisible:i,onClose:()=>s(!1),autoHide:!0,duration:3e3})]})};var yI="Avatar",[Qhe]=oh(yI),[Jhe,SH]=Qhe(yI),PH=$.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[i,s]=$.useState("idle");return _.jsx(Jhe,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:_.jsx(Qt.span,{...n,ref:t})})});PH.displayName=yI;var EH="AvatarImage",CH=$.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:i=()=>{},...s}=e,o=SH(EH,r),a=Zhe(n,s.referrerPolicy),l=gs(u=>{i(u),o.onImageLoadingStatusChange(u)});return Ti(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?_.jsx(Qt.img,{...s,ref:t,src:n}):null});CH.displayName=EH;var AH="AvatarFallback",OH=$.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...i}=e,s=SH(AH,r),[o,a]=$.useState(n===void 0);return $.useEffect(()=>{if(n!==void 0){const l=window.setTimeout(()=>a(!0),n);return()=>window.clearTimeout(l)}},[n]),o&&s.imageLoadingStatus!=="loaded"?_.jsx(Qt.span,{...i,ref:t}):null});OH.displayName=AH;function Zhe(e,t){const[r,n]=$.useState("idle");return Ti(()=>{if(!e){n("error");return}let i=!0;const s=new window.Image,o=a=>()=>{i&&n(a)};return n("loading"),s.onload=o("loaded"),s.onerror=o("error"),s.src=e,t&&(s.referrerPolicy=t),()=>{i=!1}},[e,t]),r}var kH=PH,IH=CH,jH=OH;const $H=$.forwardRef(({className:e,...t},r)=>_.jsx(kH,{ref:r,className:Kt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));$H.displayName=kH.displayName;const NH=$.forwardRef(({className:e,...t},r)=>_.jsx(IH,{ref:r,className:Kt("aspect-square h-full w-full",e),...t}));NH.displayName=IH.displayName;const DH=$.forwardRef(({className:e,...t},r)=>_.jsx(jH,{ref:r,className:Kt("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));DH.displayName=jH.displayName;const hs=$.forwardRef(({className:e,type:t,...r},n)=>_.jsx("input",{type:t,className:Kt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));hs.displayName="Input";var epe="Label",RH=$.forwardRef((e,t)=>_.jsx(Qt.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));RH.displayName=epe;var LH=RH;const tpe=o0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ba=$.forwardRef(({className:e,...t},r)=>_.jsx(LH,{ref:r,className:Kt(tpe(),e),...t}));ba.displayName=LH.displayName;const p0=$.forwardRef(({className:e,...t},r)=>_.jsx("textarea",{className:Kt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));p0.displayName="Textarea";var ZM="focusScope.autoFocusOnMount",eT="focusScope.autoFocusOnUnmount",tR={bubbles:!1,cancelable:!0},rpe="FocusScope",_I=$.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=e,[a,l]=$.useState(null),u=gs(i),c=gs(s),d=$.useRef(null),h=tn(t,v=>l(v)),m=$.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;$.useEffect(()=>{if(n){let v=function(S){if(m.paused||!a)return;const M=S.target;a.contains(M)?d.current=M:Nc(d.current,{select:!0})},y=function(S){if(m.paused||!a)return;const M=S.relatedTarget;M!==null&&(a.contains(M)||Nc(d.current,{select:!0}))},x=function(S){if(document.activeElement===document.body)for(const T of S)T.removedNodes.length>0&&Nc(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),w.disconnect()}}},[n,a,m.paused]),$.useEffect(()=>{if(a){nR.add(m);const v=document.activeElement;if(!a.contains(v)){const x=new CustomEvent(ZM,tR);a.addEventListener(ZM,u),a.dispatchEvent(x),x.defaultPrevented||(npe(lpe(FH(a)),{select:!0}),document.activeElement===v&&Nc(a))}return()=>{a.removeEventListener(ZM,u),setTimeout(()=>{const x=new CustomEvent(eT,tR);a.addEventListener(eT,c),a.dispatchEvent(x),x.defaultPrevented||Nc(v??document.body,{select:!0}),a.removeEventListener(eT,c),nR.remove(m)},0)}}},[a,u,c,m]);const g=$.useCallback(v=>{if(!r&&!n||m.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(y&&x){const w=v.currentTarget,[S,M]=ipe(w);S&&M?!v.shiftKey&&x===M?(v.preventDefault(),r&&Nc(S,{select:!0})):v.shiftKey&&x===S&&(v.preventDefault(),r&&Nc(M,{select:!0})):x===w&&v.preventDefault()}},[r,n,m.paused]);return _.jsx(Qt.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});_I.displayName=rpe;function npe(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Nc(n,{select:t}),document.activeElement!==r)return}function ipe(e){const t=FH(e),r=rR(t,e),n=rR(t.reverse(),e);return[r,n]}function FH(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function rR(e,t){for(const r of e)if(!spe(r,{upTo:t}))return r}function spe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ope(e){return e instanceof HTMLInputElement&&"select"in e}function Nc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&ope(e)&&t&&e.select()}}var nR=ape();function ape(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=iR(e,t),e.unshift(t)},remove(t){e=iR(e,t),e[0]?.resume()}}}function iR(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function lpe(e){return e.filter(t=>t.tagName!=="A")}var tT=0;function BH(){$.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??sR()),document.body.insertAdjacentElement("beforeend",e[1]??sR()),tT++,()=>{tT===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),tT--}},[])}function sR(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var vw="right-scroll-bar-position",yw="width-before-scroll-bar",upe="with-scroll-bars-hidden",cpe="--removed-body-scroll-bar-size";function rT(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function dpe(e,t){var r=$.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var fpe=typeof window<"u"?$.useLayoutEffect:$.useEffect,oR=new WeakMap;function hpe(e,t){var r=dpe(null,function(n){return e.forEach(function(i){return rT(i,n)})});return fpe(function(){var n=oR.get(r);if(n){var i=new Set(n),s=new Set(e),o=r.current;i.forEach(function(a){s.has(a)||rT(a,null)}),s.forEach(function(a){i.has(a)||rT(a,o)})}oR.set(r,e)},[e]),r}function ppe(e){return e}function mpe(e,t){t===void 0&&(t=ppe);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(s){var o=t(s,n);return r.push(o),function(){r=r.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(n=!0;r.length;){var o=r;r=[],o.forEach(s)}r={push:function(a){return s(a)},filter:function(){return r}}},assignMedium:function(s){n=!0;var o=[];if(r.length){var a=r;r=[],a.forEach(s),o=r}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),r={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),r}}}};return i}function gpe(e){e===void 0&&(e={});var t=mpe(null);return t.options=Ao({async:!0,ssr:!1},e),t}var zH=function(e){var t=e.sideCar,r=Jc(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return $.createElement(n,Ao({},r))};zH.isSideCarExport=!0;function vpe(e,t){return e.useMedium(t),zH}var UH=gpe(),nT=function(){},f1=$.forwardRef(function(e,t){var r=$.useRef(null),n=$.useState({onScrollCapture:nT,onWheelCapture:nT,onTouchMoveCapture:nT}),i=n[0],s=n[1],o=e.forwardProps,a=e.children,l=e.className,u=e.removeScrollBar,c=e.enabled,d=e.shards,h=e.sideCar,m=e.noIsolation,g=e.inert,v=e.allowPinchZoom,y=e.as,x=y===void 0?"div":y,w=e.gapMode,S=Jc(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=h,T=hpe([r,t]),P=Ao(Ao({},S),i);return $.createElement($.Fragment,null,c&&$.createElement(M,{sideCar:UH,removeScrollBar:u,shards:d,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:r,gapMode:w}),o?$.cloneElement($.Children.only(a),Ao(Ao({},P),{ref:T})):$.createElement(x,Ao({},P,{className:l,ref:T}),a))});f1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};f1.classNames={fullWidth:yw,zeroRight:vw};var ype=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _pe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ype();return t&&e.setAttribute("nonce",t),e}function bpe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function wpe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var xpe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=_pe())&&(bpe(t,r),wpe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Mpe=function(){var e=xpe();return function(t,r){$.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},VH=function(){var e=Mpe(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},Tpe={left:0,top:0,right:0,gap:0},iT=function(e){return parseInt(e||"",10)||0},Spe=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[iT(r),iT(n),iT(i)]},Ppe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Tpe;var t=Spe(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Epe=VH(),_m="data-scroll-locked",Cpe=function(e,t,r,n){var i=e.left,s=e.top,o=e.right,a=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(upe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(_m,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vw,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(yw,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(vw," .").concat(vw,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(yw," .").concat(yw,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(_m,`] {
    `).concat(cpe,": ").concat(a,`px;
  }
`)},aR=function(){var e=parseInt(document.body.getAttribute(_m)||"0",10);return isFinite(e)?e:0},Ape=function(){$.useEffect(function(){return document.body.setAttribute(_m,(aR()+1).toString()),function(){var e=aR()-1;e<=0?document.body.removeAttribute(_m):document.body.setAttribute(_m,e.toString())}},[])},Ope=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;Ape();var s=$.useMemo(function(){return Ppe(i)},[i]);return $.createElement(Epe,{styles:Cpe(s,!t,i,r?"":"!important")})},pO=!1;if(typeof window<"u")try{var Ob=Object.defineProperty({},"passive",{get:function(){return pO=!0,!0}});window.addEventListener("test",Ob,Ob),window.removeEventListener("test",Ob,Ob)}catch{pO=!1}var Wp=pO?{passive:!1}:!1,kpe=function(e){return e.tagName==="TEXTAREA"},WH=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!kpe(e)&&r[t]==="visible")},Ipe=function(e){return WH(e,"overflowY")},jpe=function(e){return WH(e,"overflowX")},lR=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=GH(e,n);if(i){var s=qH(e,n),o=s[1],a=s[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},$pe=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Npe=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},GH=function(e,t){return e==="v"?Ipe(t):jpe(t)},qH=function(e,t){return e==="v"?$pe(t):Npe(t)},Dpe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Rpe=function(e,t,r,n,i){var s=Dpe(e,window.getComputedStyle(t).direction),o=s*n,a=r.target,l=t.contains(a),u=!1,c=o>0,d=0,h=0;do{var m=qH(e,a),g=m[0],v=m[1],y=m[2],x=v-y-s*g;(g||x)&&GH(e,a)&&(d+=x,h+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(c&&Math.abs(d)<1||!c&&Math.abs(h)<1)&&(u=!0),u},kb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},uR=function(e){return[e.deltaX,e.deltaY]},cR=function(e){return e&&"current"in e?e.current:e},Lpe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Fpe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Bpe=0,Gp=[];function zpe(e){var t=$.useRef([]),r=$.useRef([0,0]),n=$.useRef(),i=$.useState(Bpe++)[0],s=$.useState(VH)[0],o=$.useRef(e);$.useEffect(function(){o.current=e},[e]),$.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var v=S2([e.lockRef.current],(e.shards||[]).map(cR),!0).filter(Boolean);return v.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=$.useCallback(function(v,y){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var x=kb(v),w=r.current,S="deltaX"in v?v.deltaX:w[0]-x[0],M="deltaY"in v?v.deltaY:w[1]-x[1],T,P=v.target,E=Math.abs(S)>Math.abs(M)?"h":"v";if("touches"in v&&E==="h"&&P.type==="range")return!1;var A=lR(E,P);if(!A)return!0;if(A?T=E:(T=E==="v"?"h":"v",A=lR(E,P)),!A)return!1;if(!n.current&&"changedTouches"in v&&(S||M)&&(n.current=T),!T)return!0;var L=n.current||T;return Rpe(L,y,v,L==="h"?S:M)},[]),l=$.useCallback(function(v){var y=v;if(!(!Gp.length||Gp[Gp.length-1]!==s)){var x="deltaY"in y?uR(y):kb(y),w=t.current.filter(function(T){return T.name===y.type&&(T.target===y.target||y.target===T.shadowParent)&&Lpe(T.delta,x)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var S=(o.current.shards||[]).map(cR).filter(Boolean).filter(function(T){return T.contains(y.target)}),M=S.length>0?a(y,S[0]):!o.current.noIsolation;M&&y.cancelable&&y.preventDefault()}}},[]),u=$.useCallback(function(v,y,x,w){var S={name:v,delta:y,target:x,should:w,shadowParent:Upe(x)};t.current.push(S),setTimeout(function(){t.current=t.current.filter(function(M){return M!==S})},1)},[]),c=$.useCallback(function(v){r.current=kb(v),n.current=void 0},[]),d=$.useCallback(function(v){u(v.type,uR(v),v.target,a(v,e.lockRef.current))},[]),h=$.useCallback(function(v){u(v.type,kb(v),v.target,a(v,e.lockRef.current))},[]);$.useEffect(function(){return Gp.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Wp),document.addEventListener("touchmove",l,Wp),document.addEventListener("touchstart",c,Wp),function(){Gp=Gp.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,Wp),document.removeEventListener("touchmove",l,Wp),document.removeEventListener("touchstart",c,Wp)}},[]);var m=e.removeScrollBar,g=e.inert;return $.createElement($.Fragment,null,g?$.createElement(s,{styles:Fpe(i)}):null,m?$.createElement(Ope,{gapMode:e.gapMode}):null)}function Upe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Vpe=vpe(UH,zpe);var bI=$.forwardRef(function(e,t){return $.createElement(f1,Ao({},e,{ref:t,sideCar:Vpe}))});bI.classNames=f1.classNames;var Wpe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},qp=new WeakMap,Ib=new WeakMap,jb={},sT=0,HH=function(e){return e&&(e.host||HH(e.parentNode))},Gpe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=HH(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},qpe=function(e,t,r,n){var i=Gpe(t,Array.isArray(e)?e:[e]);jb[r]||(jb[r]=new WeakMap);var s=jb[r],o=[],a=new Set,l=new Set(i),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};i.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))c(h);else try{var m=h.getAttribute(n),g=m!==null&&m!=="false",v=(qp.get(h)||0)+1,y=(s.get(h)||0)+1;qp.set(h,v),s.set(h,y),o.push(h),v===1&&g&&Ib.set(h,!0),y===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return c(t),a.clear(),sT++,function(){o.forEach(function(d){var h=qp.get(d)-1,m=s.get(d)-1;qp.set(d,h),s.set(d,m),h||(Ib.has(d)||d.removeAttribute(n),Ib.delete(d)),m||d.removeAttribute(r)}),sT--,sT||(qp=new WeakMap,qp=new WeakMap,Ib=new WeakMap,jb={})}},KH=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=Wpe(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),qpe(n,i,r,"aria-hidden")):function(){return null}},wI="Dialog",[XH]=oh(wI),[Hpe,ka]=XH(wI),YH=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,a=$.useRef(null),l=$.useRef(null),[u=!1,c]=Xf({prop:n,defaultProp:i,onChange:s});return _.jsx(Hpe,{scope:t,triggerRef:a,contentRef:l,contentId:Fc(),titleId:Fc(),descriptionId:Fc(),open:u,onOpenChange:c,onOpenToggle:$.useCallback(()=>c(d=>!d),[c]),modal:o,children:r})};YH.displayName=wI;var QH="DialogTrigger",JH=$.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=ka(QH,r),s=tn(t,i.triggerRef);return _.jsx(Qt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":TI(i.open),...n,ref:s,onClick:Ut(e.onClick,i.onOpenToggle)})});JH.displayName=QH;var xI="DialogPortal",[Kpe,ZH]=XH(xI,{forceMount:void 0}),eK=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,s=ka(xI,t);return _.jsx(Kpe,{scope:t,forceMount:r,children:$.Children.map(n,o=>_.jsx(Qc,{present:r||s.open,children:_.jsx(Vx,{asChild:!0,container:i,children:o})}))})};eK.displayName=xI;var Vw="DialogOverlay",tK=$.forwardRef((e,t)=>{const r=ZH(Vw,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=ka(Vw,e.__scopeDialog);return s.modal?_.jsx(Qc,{present:n||s.open,children:_.jsx(Xpe,{...i,ref:t})}):null});tK.displayName=Vw;var Xpe=$.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=ka(Vw,r);return _.jsx(bI,{as:Kf,allowPinchZoom:!0,shards:[i.contentRef],children:_.jsx(Qt.div,{"data-state":TI(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Zf="DialogContent",rK=$.forwardRef((e,t)=>{const r=ZH(Zf,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=ka(Zf,e.__scopeDialog);return _.jsx(Qc,{present:n||s.open,children:s.modal?_.jsx(Ype,{...i,ref:t}):_.jsx(Qpe,{...i,ref:t})})});rK.displayName=Zf;var Ype=$.forwardRef((e,t)=>{const r=ka(Zf,e.__scopeDialog),n=$.useRef(null),i=tn(t,r.contentRef,n);return $.useEffect(()=>{const s=n.current;if(s)return KH(s)},[]),_.jsx(nK,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ut(e.onCloseAutoFocus,s=>{s.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:Ut(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Ut(e.onFocusOutside,s=>s.preventDefault())})}),Qpe=$.forwardRef((e,t)=>{const r=ka(Zf,e.__scopeDialog),n=$.useRef(!1),i=$.useRef(!1);return _.jsx(nK,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(n.current||r.triggerRef.current?.focus(),s.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;r.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),nK=$.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=e,a=ka(Zf,r),l=$.useRef(null),u=tn(t,l);return BH(),_.jsxs(_.Fragment,{children:[_.jsx(_I,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:_.jsx(i0,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":TI(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),_.jsxs(_.Fragment,{children:[_.jsx(Jpe,{titleId:a.titleId}),_.jsx(eme,{contentRef:l,descriptionId:a.descriptionId})]})]})}),MI="DialogTitle",iK=$.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=ka(MI,r);return _.jsx(Qt.h2,{id:i.titleId,...n,ref:t})});iK.displayName=MI;var sK="DialogDescription",oK=$.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=ka(sK,r);return _.jsx(Qt.p,{id:i.descriptionId,...n,ref:t})});oK.displayName=sK;var aK="DialogClose",lK=$.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=ka(aK,r);return _.jsx(Qt.button,{type:"button",...n,ref:t,onClick:Ut(e.onClick,()=>i.onOpenChange(!1))})});lK.displayName=aK;function TI(e){return e?"open":"closed"}var uK="DialogTitleWarning",[Zje,cK]=Kee(uK,{contentName:Zf,titleName:MI,docsSlug:"dialog"}),Jpe=({titleId:e})=>{const t=cK(uK),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return $.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Zpe="DialogDescriptionWarning",eme=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${cK(Zpe).contentName}}.`;return $.useEffect(()=>{const i=e.current?.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},tme=YH,rme=JH,nme=eK,dK=tK,fK=rK,hK=iK,pK=oK,ime=lK;const mK=tme,gK=rme,sme=nme,vK=$.forwardRef(({className:e,...t},r)=>_.jsx(dK,{ref:r,className:Kt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));vK.displayName=dK.displayName;const SI=$.forwardRef(({className:e,children:t,...r},n)=>_.jsxs(sme,{children:[_.jsx(vK,{}),_.jsxs(fK,{ref:n,className:Kt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,_.jsxs(ime,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[_.jsx(C8,{className:"h-4 w-4"}),_.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));SI.displayName=fK.displayName;const PI=({className:e,...t})=>_.jsx("div",{className:Kt("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});PI.displayName="DialogHeader";const EI=$.forwardRef(({className:e,...t},r)=>_.jsx(hK,{ref:r,className:Kt("text-lg font-semibold leading-none tracking-tight",e),...t}));EI.displayName=hK.displayName;const ome=$.forwardRef(({className:e,...t},r)=>_.jsx(pK,{ref:r,className:Kt("text-sm text-muted-foreground",e),...t}));ome.displayName=pK.displayName;const ame=({children:e})=>{const{profile:t,updateProfile:r}=h0(),[n,i]=$.useState(t?.full_name||""),[s,o]=$.useState(t?.age_group||""),[a,l]=$.useState(t?.gender||""),[u,c]=$.useState(t?.region||""),[d,h]=$.useState(!1),[m,g]=$.useState(!1),v=async()=>{g(!0),(await r({full_name:n,age_group:s||null,gender:a||null,region:u||null})).success&&h(!1),g(!1)};return _.jsxs(mK,{open:d,onOpenChange:h,children:[_.jsx(gK,{asChild:!0,children:e}),_.jsxs(SI,{className:"sm:max-w-md bg-gradient-card border-0 shadow-elegant",children:[_.jsx(PI,{children:_.jsx(EI,{className:"text-center text-lg font-semibold bg-gradient-primary bg-clip-text text-transparent",children:"Edit Your Profile"})}),_.jsxs("div",{className:"space-y-4 py-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(ba,{htmlFor:"fullName",className:"text-sm font-medium",children:"Full Name"}),_.jsx(hs,{id:"fullName",placeholder:"Enter your full name",value:n,onChange:y=>i(y.target.value),className:"border-primary/20 focus:border-primary transition-colors"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(ba,{htmlFor:"email",className:"text-sm font-medium",children:"Email (read-only)"}),_.jsx(hs,{id:"email",value:t?.email||"",disabled:!0,className:"bg-muted text-muted-foreground"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(ba,{htmlFor:"ageGroup",className:"text-sm font-medium",children:"Age Group"}),_.jsxs("select",{id:"ageGroup",value:s,onChange:y=>o(y.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm",children:[_.jsx("option",{value:"",children:"Not specified"}),_.jsx("option",{value:"child",children:"Child (5-12)"}),_.jsx("option",{value:"teen",children:"Teen (13-19)"}),_.jsx("option",{value:"young_adult",children:"Young Adult (20-35)"}),_.jsx("option",{value:"adult",children:"Adult (36-55)"}),_.jsx("option",{value:"senior",children:"Senior (55+)"})]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(ba,{htmlFor:"gender",className:"text-sm font-medium",children:"Gender"}),_.jsxs("select",{id:"gender",value:a,onChange:y=>l(y.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background text-sm",children:[_.jsx("option",{value:"",children:"Not specified"}),_.jsx("option",{value:"male",children:"Male"}),_.jsx("option",{value:"female",children:"Female"}),_.jsx("option",{value:"non_binary",children:"Non-Binary"}),_.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(ba,{htmlFor:"region",className:"text-sm font-medium",children:"Region"}),_.jsx(hs,{id:"region",placeholder:"e.g., India, USA, UK",value:u,onChange:y=>c(y.target.value),className:"border-primary/20 focus:border-primary transition-colors"})]})]}),_.jsxs("div",{className:"flex gap-2 pt-4",children:[_.jsx(Yt,{variant:"outline",onClick:()=>h(!1),className:"flex-1",disabled:m,children:"Cancel"}),_.jsx(Yt,{onClick:v,className:"flex-1 bg-gradient-primary hover:shadow-elegant transition-all duration-300",disabled:m,children:m?"Saving...":"Save Changes"})]})]})]})};function yK(e){const t=$.useRef({value:e,previous:e});return $.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var CI="Checkbox",[lme]=oh(CI),[ume,cme]=lme(CI),_K=$.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:u,form:c,...d}=e,[h,m]=$.useState(null),g=tn(t,M=>m(M)),v=$.useRef(!1),y=h?c||!!h.closest("form"):!0,[x=!1,w]=Xf({prop:i,defaultProp:s,onChange:u}),S=$.useRef(x);return $.useEffect(()=>{const M=h?.form;if(M){const T=()=>w(S.current);return M.addEventListener("reset",T),()=>M.removeEventListener("reset",T)}},[h,w]),_.jsxs(ume,{scope:r,state:x,disabled:a,children:[_.jsx(Qt.button,{type:"button",role:"checkbox","aria-checked":zc(x)?"mixed":x,"aria-required":o,"data-state":xK(x),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onKeyDown:Ut(e.onKeyDown,M=>{M.key==="Enter"&&M.preventDefault()}),onClick:Ut(e.onClick,M=>{w(T=>zc(T)?!0:!T),y&&(v.current=M.isPropagationStopped(),v.current||M.stopPropagation())})}),y&&_.jsx(dme,{control:h,bubbles:!v.current,name:n,value:l,checked:x,required:o,disabled:a,form:c,style:{transform:"translateX(-100%)"},defaultChecked:zc(s)?!1:s})]})});_K.displayName=CI;var bK="CheckboxIndicator",wK=$.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...i}=e,s=cme(bK,r);return _.jsx(Qc,{present:n||zc(s.state)||s.state===!0,children:_.jsx(Qt.span,{"data-state":xK(s.state),"data-disabled":s.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});wK.displayName=bK;var dme=e=>{const{control:t,checked:r,bubbles:n=!0,defaultChecked:i,...s}=e,o=$.useRef(null),a=yK(r),l=K8(t);$.useEffect(()=>{const c=o.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(a!==r&&m){const g=new Event("click",{bubbles:n});c.indeterminate=zc(r),m.call(c,zc(r)?!1:r),c.dispatchEvent(g)}},[a,r,n]);const u=$.useRef(zc(r)?!1:r);return _.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...s,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function zc(e){return e==="indeterminate"}function xK(e){return zc(e)?"indeterminate":e?"checked":"unchecked"}var MK=_K,fme=wK;const TK=$.forwardRef(({className:e,...t},r)=>_.jsx(MK,{ref:r,className:Kt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:_.jsx(fme,{className:Kt("flex items-center justify-center text-current"),children:_.jsx(qx,{className:"h-4 w-4"})})}));TK.displayName=MK.displayName;const Yy=({options:e,selected:t,onChange:r,placeholder:n,className:i})=>{const s=o=>{const a=t.includes(o)?t.filter(l=>l!==o):[...t,o];r(a)};return _.jsxs("div",{className:i,children:[n&&t.length===0&&_.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:n}),_.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.map(o=>_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx(TK,{id:o,checked:t.includes(o),onCheckedChange:()=>s(o)}),_.jsx("label",{htmlFor:o,className:"text-sm cursor-pointer",children:o})]},o))})]})},hme=()=>{const{user:e,signOut:t}=Oa(),{items:r}=td(),{outfits:n}=uh(),{profile:i,getDisplayName:s,getFirstName:o}=h0(),{toast:a}=ro(),[l,u]=$.useState({favorite_colors:[],favorite_styles:[],occasions:[],body_type:"",style_goals:""}),[c,d]=$.useState(!1),[h,m]=$.useState(!1);$.useEffect(()=>{e&&g()},[e]);const g=async()=>{try{const{data:T,error:P}=await Mr.from("profiles").select("style_preferences").eq("id",e?.id).single();if(T?.style_preferences&&typeof T.style_preferences=="object"){const E=T.style_preferences;u({favorite_colors:Array.isArray(E.favorite_colors)?E.favorite_colors:[],favorite_styles:Array.isArray(E.favorite_styles)?E.favorite_styles:[],occasions:Array.isArray(E.occasions)?E.occasions:[],body_type:typeof E.body_type=="string"?E.body_type:"",style_goals:typeof E.style_goals=="string"?E.style_goals:""})}}catch(T){console.error("Error loading style preferences:",T)}},v=async()=>{m(!0);try{const{error:T}=await Mr.from("profiles").update({style_preferences:l}).eq("id",e?.id);if(T)throw T;a({title:"Preferences saved",description:"Your style preferences have been updated successfully."}),d(!1)}catch(T){console.error("Error saving preferences:",T),a({title:"Error saving preferences",description:"Please try again.",variant:"destructive"})}finally{m(!1)}},y=async()=>{try{await t(),a({title:"Signed out successfully",description:"You have been logged out of your account."})}catch{a({title:"Error signing out",description:"Please try again.",variant:"destructive"})}},x=r.filter(T=>T.is_favorite).length,w=["Black","White","Navy","Gray","Beige","Brown","Red","Pink","Purple","Blue","Green","Yellow","Orange"],S=["Casual","Formal","Business","Sporty","Bohemian","Minimalist","Vintage","Streetwear","Elegant","Trendy"],M=["Work","Casual Outings","Date Night","Gym/Sports","Parties","Formal Events","Travel","Home/Relaxing"];return _.jsxs("div",{className:"space-y-6 pb-6 animate-fade-in",children:[_.jsxs("div",{className:"relative px-4 pt-8 pb-6 bg-gradient-hero rounded-b-[2rem] shadow-elegant",children:[_.jsxs("div",{className:"text-center text-white space-y-3",children:[_.jsxs("div",{className:"flex justify-center items-center gap-2 mb-4",children:[_.jsx(Pw,{className:"h-6 w-6 text-yellow-200 animate-pulse"}),_.jsxs("h1",{className:"text-3xl font-bold",children:["Hey ",o(),"!"]}),_.jsx(i_,{className:"h-6 w-6 text-pink-200 animate-pulse"})]}),_.jsx("p",{className:"text-purple-100 text-lg font-medium",children:"Your Style Profile"})]}),_.jsx("div",{className:"absolute top-4 left-4 w-4 h-4 bg-white/20 rounded-full animate-float"}),_.jsx("div",{className:"absolute top-8 right-6 w-3 h-3 bg-pink-300/30 rounded-full animate-float",style:{animationDelay:"1s"}}),_.jsx("div",{className:"absolute bottom-4 left-8 w-2 h-2 bg-yellow-300/40 rounded-full animate-float",style:{animationDelay:"2s"}})]}),_.jsxs("div",{className:"px-4 space-y-6",children:[_.jsx(Er,{className:"bg-gradient-card border-0 shadow-card",children:_.jsxs(Nr,{className:"p-6 flex items-center space-x-4",children:[_.jsxs("div",{className:"relative",children:[_.jsxs($H,{className:"h-20 w-20 ring-4 ring-primary/20",children:[_.jsx(NH,{src:i?.avatar_url||"",alt:"User"}),_.jsx(DH,{className:"bg-gradient-primary text-white text-lg font-bold",children:s().split(" ").map(T=>T[0]).join("").toUpperCase().slice(0,2)})]}),_.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-gradient-primary rounded-full flex items-center justify-center",children:_.jsx(Do,{className:"h-3 w-3 text-white"})})]}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h2",{className:"font-bold text-xl text-foreground",children:s()}),_.jsx("p",{className:"text-sm text-muted-foreground",children:e?.email}),_.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[_.jsx("span",{className:"text-xs bg-gradient-primary text-white px-2 py-1 rounded-full",children:"Style Enthusiast"}),i?.age_group&&_.jsx("span",{className:"text-xs bg-secondary/50 text-secondary-foreground px-2 py-1 rounded-full",children:i.age_group.replace("_"," ")}),i?.region&&_.jsx("span",{className:"text-xs bg-accent/50 text-accent-foreground px-2 py-1 rounded-full",children:i.region})]})]})]})}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[_.jsx("div",{className:"w-2 h-2 bg-gradient-primary rounded-full animate-pulse"}),"Your Fashion Stats"]}),_.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[_.jsx(Er,{className:"group hover:shadow-card transition-all duration-300 bg-gradient-card border-0 hover:scale-105",children:_.jsxs(Nr,{className:"p-4 text-center space-y-2",children:[_.jsx("h4",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:r.length}),_.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Fashion Items"}),_.jsx("div",{className:"h-1 w-full bg-gradient-primary rounded-full opacity-30"})]})}),_.jsx(Er,{className:"group hover:shadow-card transition-all duration-300 bg-gradient-card border-0 hover:scale-105",children:_.jsxs(Nr,{className:"p-4 text-center space-y-2",children:[_.jsx("h4",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:n.length}),_.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Style Combos"}),_.jsx("div",{className:"h-1 w-full bg-gradient-secondary rounded-full opacity-30"})]})}),_.jsx(Er,{className:"group hover:shadow-card transition-all duration-300 bg-gradient-card border-0 hover:scale-105",children:_.jsxs(Nr,{className:"p-4 text-center space-y-2",children:[_.jsx("h4",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:x}),_.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Favorites"}),_.jsx("div",{className:"h-1 w-full bg-gradient-accent rounded-full opacity-30"})]})})]})]}),_.jsxs(Er,{className:"bg-gradient-card border-0 shadow-card",children:[_.jsx(Qf,{children:_.jsxs(Jf,{className:"flex items-center justify-between",children:[_.jsxs("span",{className:"flex items-center gap-2",children:[_.jsx(Sw,{className:"h-5 w-5 text-primary"}),"Style Preferences"]}),!c&&_.jsx(Yt,{variant:"ghost",size:"sm",onClick:()=>d(!0),children:_.jsx(B$,{className:"h-4 w-4"})})]})}),_.jsx(Nr,{className:"space-y-4",children:c?_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"space-y-2",children:[_.jsxs(ba,{className:"flex items-center gap-2",children:[_.jsx(Sw,{className:"h-4 w-4"}),"Favorite Colors"]}),_.jsx(Yy,{options:w,selected:l.favorite_colors,onChange:T=>u({...l,favorite_colors:T}),placeholder:"Select your favorite colors"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs(ba,{className:"flex items-center gap-2",children:[_.jsx(Do,{className:"h-4 w-4"}),"Preferred Styles"]}),_.jsx(Yy,{options:S,selected:l.favorite_styles,onChange:T=>u({...l,favorite_styles:T}),placeholder:"Select your style preferences"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs(ba,{className:"flex items-center gap-2",children:[_.jsx(a2,{className:"h-4 w-4"}),"Common Occasions"]}),_.jsx(Yy,{options:M,selected:l.occasions,onChange:T=>u({...l,occasions:T}),placeholder:"Select occasions you dress for"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs(ba,{className:"flex items-center gap-2",children:[_.jsx(u2,{className:"h-4 w-4"}),"Body Type"]}),_.jsx(hs,{placeholder:"e.g., Petite, Athletic, Curvy...",value:l.body_type,onChange:T=>u({...l,body_type:T.target.value})})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs(ba,{className:"flex items-center gap-2",children:[_.jsx(Kte,{className:"h-4 w-4"}),"Style Goals"]}),_.jsx(p0,{placeholder:"What are your fashion goals? e.g., Build a capsule wardrobe, dress more professionally...",value:l.style_goals,onChange:T=>u({...l,style_goals:T.target.value}),rows:3})]}),_.jsxs("div",{className:"flex gap-2 pt-2",children:[_.jsxs(Yt,{onClick:v,disabled:h,className:"flex-1",children:[_.jsx(l2,{className:"h-4 w-4 mr-2"}),"Save Preferences"]}),_.jsx(Yt,{variant:"outline",onClick:()=>{d(!1),g()},children:"Cancel"})]})]}):_.jsxs("div",{className:"space-y-3",children:[l.favorite_colors.length>0&&_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Favorite Colors"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:l.favorite_colors.map(T=>_.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded-full",children:T},T))})]}),l.favorite_styles.length>0&&_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Style Preferences"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:l.favorite_styles.map(T=>_.jsx("span",{className:"text-xs bg-secondary/50 text-secondary-foreground px-2 py-1 rounded-full",children:T},T))})]}),l.occasions.length>0&&_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Common Occasions"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:l.occasions.map(T=>_.jsx("span",{className:"text-xs bg-accent/50 text-accent-foreground px-2 py-1 rounded-full",children:T},T))})]}),l.body_type&&_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Body Type"}),_.jsx("p",{className:"text-sm",children:l.body_type})]}),l.style_goals&&_.jsxs("div",{children:[_.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Style Goals"}),_.jsx("p",{className:"text-sm",children:l.style_goals})]}),!l.favorite_colors.length&&!l.favorite_styles.length&&_.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Add your style preferences to get more personalized outfit suggestions"})]})})]}),_.jsxs("div",{className:"space-y-3",children:[_.jsx(ame,{children:_.jsxs(Yt,{variant:"outline",className:"w-full justify-start gap-2",children:[_.jsx(B$,{className:"h-4 w-4"}),"Edit Profile"]})}),_.jsxs(Yt,{variant:"outline",className:"w-full justify-start gap-2",onClick:y,children:[_.jsx(zte,{className:"h-4 w-4"}),"Sign Out"]})]})]})]})},pme=()=>_.jsx(hme,{}),mme=()=>{const e=ah();return $.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),_.jsx("div",{className:"mobile-container flex items-center justify-center p-4",children:_.jsxs("div",{className:"text-center space-y-4",children:[_.jsx("div",{className:"bg-outfit-primary/10 w-24 h-24 rounded-full flex items-center justify-center mx-auto",children:_.jsx("span",{className:"text-4xl font-bold text-outfit-primary",children:"404"})}),_.jsx("h1",{className:"text-2xl font-bold",children:"Page not found"}),_.jsx("p",{className:"text-muted-foreground",children:"We couldn't find the page you're looking for."}),_.jsx(Yt,{asChild:!0,className:"mt-4",children:_.jsx("a",{href:"/",children:"Return to Home"})})]})})};function dR(e,[t,r]){return Math.min(r,Math.max(t,e))}var gme=[" ","Enter","ArrowUp","ArrowDown"],vme=[" ","Enter"],m0="Select",[h1,p1,yme]=n2(m0),[fg]=oh(m0,[yme,Yx]),m1=Yx(),[_me,rd]=fg(m0),[bme,wme]=fg(m0),SK=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:h,required:m,form:g}=e,v=m1(t),[y,x]=$.useState(null),[w,S]=$.useState(null),[M,T]=$.useState(!1),P=pI(u),[E=!1,A]=Xf({prop:n,defaultProp:i,onChange:s}),[L,B]=Xf({prop:o,defaultProp:a,onChange:l}),V=$.useRef(null),G=y?g||!!y.closest("form"):!0,[z,K]=$.useState(new Set),J=Array.from(z).map(X=>X.props.value).join(";");return _.jsx(vie,{...v,children:_.jsxs(_me,{required:m,scope:t,trigger:y,onTriggerChange:x,valueNode:w,onValueNodeChange:S,valueNodeHasChildren:M,onValueNodeHasChildrenChange:T,contentId:Fc(),value:L,onValueChange:B,open:E,onOpenChange:A,dir:P,triggerPointerDownPosRef:V,disabled:h,children:[_.jsx(h1.Provider,{scope:t,children:_.jsx(bme,{scope:e.__scopeSelect,onNativeOptionAdd:$.useCallback(X=>{K(Q=>new Set(Q).add(X))},[]),onNativeOptionRemove:$.useCallback(X=>{K(Q=>{const W=new Set(Q);return W.delete(X),W})},[]),children:r})}),G?_.jsxs(YK,{"aria-hidden":!0,required:m,tabIndex:-1,name:c,autoComplete:d,value:L,onChange:X=>B(X.target.value),disabled:h,form:g,children:[L===void 0?_.jsx("option",{value:""}):null,Array.from(z)]},J):null]})})};SK.displayName=m0;var PK="SelectTrigger",EK=$.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...i}=e,s=m1(r),o=rd(PK,r),a=o.disabled||n,l=tn(t,o.onTriggerChange),u=p1(r),c=$.useRef("touch"),[d,h,m]=QK(v=>{const y=u().filter(S=>!S.disabled),x=y.find(S=>S.value===o.value),w=JK(y,v,x);w!==void 0&&o.onValueChange(w.value)}),g=v=>{a||(o.onOpenChange(!0),m()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return _.jsx(i6,{asChild:!0,...s,children:_.jsx(Qt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":XK(o.value)?"":void 0,...i,ref:l,onClick:Ut(i.onClick,v=>{v.currentTarget.focus(),c.current!=="mouse"&&g(v)}),onPointerDown:Ut(i.onPointerDown,v=>{c.current=v.pointerType;const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:Ut(i.onKeyDown,v=>{const y=d.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(y&&v.key===" ")&&gme.includes(v.key)&&(g(),v.preventDefault())})})})});EK.displayName=PK;var CK="SelectValue",AK=$.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,children:s,placeholder:o="",...a}=e,l=rd(CK,r),{onValueNodeHasChildrenChange:u}=l,c=s!==void 0,d=tn(t,l.onValueNodeChange);return Ti(()=>{u(c)},[u,c]),_.jsx(Qt.span,{...a,ref:d,style:{pointerEvents:"none"},children:XK(l.value)?_.jsx(_.Fragment,{children:o}):s})});AK.displayName=CK;var xme="SelectIcon",OK=$.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...i}=e;return _.jsx(Qt.span,{"aria-hidden":!0,...i,ref:t,children:n||""})});OK.displayName=xme;var Mme="SelectPortal",kK=e=>_.jsx(Vx,{asChild:!0,...e});kK.displayName=Mme;var eh="SelectContent",IK=$.forwardRef((e,t)=>{const r=rd(eh,e.__scopeSelect),[n,i]=$.useState();if(Ti(()=>{i(new DocumentFragment)},[]),!r.open){const s=n;return s?tg.createPortal(_.jsx(jK,{scope:e.__scopeSelect,children:_.jsx(h1.Slot,{scope:e.__scopeSelect,children:_.jsx("div",{children:e.children})})}),s):null}return _.jsx($K,{...e,ref:t})});IK.displayName=eh;var ma=10,[jK,nd]=fg(eh),Tme="SelectContentImpl",$K=$.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:y,...x}=e,w=rd(eh,r),[S,M]=$.useState(null),[T,P]=$.useState(null),E=tn(t,xe=>M(xe)),[A,L]=$.useState(null),[B,V]=$.useState(null),G=p1(r),[z,K]=$.useState(!1),J=$.useRef(!1);$.useEffect(()=>{if(S)return KH(S)},[S]),BH();const X=$.useCallback(xe=>{const[Ie,...Pe]=G().map(ue=>ue.ref.current),[he]=Pe.slice(-1),re=document.activeElement;for(const ue of xe)if(ue===re||(ue?.scrollIntoView({block:"nearest"}),ue===Ie&&T&&(T.scrollTop=0),ue===he&&T&&(T.scrollTop=T.scrollHeight),ue?.focus(),document.activeElement!==re))return},[G,T]),Q=$.useCallback(()=>X([A,S]),[X,A,S]);$.useEffect(()=>{z&&Q()},[z,Q]);const{onOpenChange:W,triggerPointerDownPosRef:oe}=w;$.useEffect(()=>{if(S){let xe={x:0,y:0};const Ie=he=>{xe={x:Math.abs(Math.round(he.pageX)-(oe.current?.x??0)),y:Math.abs(Math.round(he.pageY)-(oe.current?.y??0))}},Pe=he=>{xe.x<=10&&xe.y<=10?he.preventDefault():S.contains(he.target)||W(!1),document.removeEventListener("pointermove",Ie),oe.current=null};return oe.current!==null&&(document.addEventListener("pointermove",Ie),document.addEventListener("pointerup",Pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ie),document.removeEventListener("pointerup",Pe,{capture:!0})}}},[S,W,oe]),$.useEffect(()=>{const xe=()=>W(!1);return window.addEventListener("blur",xe),window.addEventListener("resize",xe),()=>{window.removeEventListener("blur",xe),window.removeEventListener("resize",xe)}},[W]);const[ce,D]=QK(xe=>{const Ie=G().filter(re=>!re.disabled),Pe=Ie.find(re=>re.ref.current===document.activeElement),he=JK(Ie,xe,Pe);he&&setTimeout(()=>he.ref.current.focus())}),U=$.useCallback((xe,Ie,Pe)=>{const he=!J.current&&!Pe;(w.value!==void 0&&w.value===Ie||he)&&(L(xe),he&&(J.current=!0))},[w.value]),te=$.useCallback(()=>S?.focus(),[S]),ee=$.useCallback((xe,Ie,Pe)=>{const he=!J.current&&!Pe;(w.value!==void 0&&w.value===Ie||he)&&V(xe)},[w.value]),pe=n==="popper"?mO:NK,Oe=pe===mO?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:y}:{};return _.jsx(jK,{scope:r,content:S,viewport:T,onViewportChange:P,itemRefCallback:U,selectedItem:A,onItemLeave:te,itemTextRefCallback:ee,focusSelectedItem:Q,selectedItemText:B,position:n,isPositioned:z,searchRef:ce,children:_.jsx(bI,{as:Kf,allowPinchZoom:!0,children:_.jsx(_I,{asChild:!0,trapped:w.open,onMountAutoFocus:xe=>{xe.preventDefault()},onUnmountAutoFocus:Ut(i,xe=>{w.trigger?.focus({preventScroll:!0}),xe.preventDefault()}),children:_.jsx(i0,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:xe=>xe.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:_.jsx(pe,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:xe=>xe.preventDefault(),...x,...Oe,onPlaced:()=>K(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Ut(x.onKeyDown,xe=>{const Ie=xe.ctrlKey||xe.altKey||xe.metaKey;if(xe.key==="Tab"&&xe.preventDefault(),!Ie&&xe.key.length===1&&D(xe.key),["ArrowUp","ArrowDown","Home","End"].includes(xe.key)){let he=G().filter(re=>!re.disabled).map(re=>re.ref.current);if(["ArrowUp","End"].includes(xe.key)&&(he=he.slice().reverse()),["ArrowUp","ArrowDown"].includes(xe.key)){const re=xe.target,ue=he.indexOf(re);he=he.slice(ue+1)}setTimeout(()=>X(he)),xe.preventDefault()}})})})})})})});$K.displayName=Tme;var Sme="SelectItemAlignedPosition",NK=$.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...i}=e,s=rd(eh,r),o=nd(eh,r),[a,l]=$.useState(null),[u,c]=$.useState(null),d=tn(t,E=>c(E)),h=p1(r),m=$.useRef(!1),g=$.useRef(!0),{viewport:v,selectedItem:y,selectedItemText:x,focusSelectedItem:w}=o,S=$.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&v&&y&&x){const E=s.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),L=s.valueNode.getBoundingClientRect(),B=x.getBoundingClientRect();if(s.dir!=="rtl"){const re=B.left-A.left,ue=L.left-re,ae=E.left-ue,Ce=E.width+ae,$e=Math.max(Ce,A.width),Ne=window.innerWidth-ma,Le=dR(ue,[ma,Math.max(ma,Ne-$e)]);a.style.minWidth=Ce+"px",a.style.left=Le+"px"}else{const re=A.right-B.right,ue=window.innerWidth-L.right-re,ae=window.innerWidth-E.right-ue,Ce=E.width+ae,$e=Math.max(Ce,A.width),Ne=window.innerWidth-ma,Le=dR(ue,[ma,Math.max(ma,Ne-$e)]);a.style.minWidth=Ce+"px",a.style.right=Le+"px"}const V=h(),G=window.innerHeight-ma*2,z=v.scrollHeight,K=window.getComputedStyle(u),J=parseInt(K.borderTopWidth,10),X=parseInt(K.paddingTop,10),Q=parseInt(K.borderBottomWidth,10),W=parseInt(K.paddingBottom,10),oe=J+X+z+W+Q,ce=Math.min(y.offsetHeight*5,oe),D=window.getComputedStyle(v),U=parseInt(D.paddingTop,10),te=parseInt(D.paddingBottom,10),ee=E.top+E.height/2-ma,pe=G-ee,Oe=y.offsetHeight/2,xe=y.offsetTop+Oe,Ie=J+X+xe,Pe=oe-Ie;if(Ie<=ee){const re=V.length>0&&y===V[V.length-1].ref.current;a.style.bottom="0px";const ue=u.clientHeight-v.offsetTop-v.offsetHeight,ae=Math.max(pe,Oe+(re?te:0)+ue+Q),Ce=Ie+ae;a.style.height=Ce+"px"}else{const re=V.length>0&&y===V[0].ref.current;a.style.top="0px";const ae=Math.max(ee,J+v.offsetTop+(re?U:0)+Oe)+Pe;a.style.height=ae+"px",v.scrollTop=Ie-ee+v.offsetTop}a.style.margin=`${ma}px 0`,a.style.minHeight=ce+"px",a.style.maxHeight=G+"px",n?.(),requestAnimationFrame(()=>m.current=!0)}},[h,s.trigger,s.valueNode,a,u,v,y,x,s.dir,n]);Ti(()=>S(),[S]);const[M,T]=$.useState();Ti(()=>{u&&T(window.getComputedStyle(u).zIndex)},[u]);const P=$.useCallback(E=>{E&&g.current===!0&&(S(),w?.(),g.current=!1)},[S,w]);return _.jsx(Eme,{scope:r,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:P,children:_.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:_.jsx(Qt.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});NK.displayName=Sme;var Pme="SelectPopperPosition",mO=$.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=ma,...s}=e,o=m1(r);return _.jsx(s6,{...o,...s,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});mO.displayName=Pme;var[Eme,AI]=fg(eh,{}),gO="SelectViewport",DK=$.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...i}=e,s=nd(gO,r),o=AI(gO,r),a=tn(t,s.onViewportChange),l=$.useRef(0);return _.jsxs(_.Fragment,{children:[_.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),_.jsx(h1.Slot,{scope:r,children:_.jsx(Qt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ut(i.onScroll,u=>{const c=u.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h?.current&&d){const m=Math.abs(l.current-c.scrollTop);if(m>0){const g=window.innerHeight-ma*2,v=parseFloat(d.style.minHeight),y=parseFloat(d.style.height),x=Math.max(v,y);if(x<g){const w=x+m,S=Math.min(g,w),M=w-S;d.style.height=S+"px",d.style.bottom==="0px"&&(c.scrollTop=M>0?M:0,d.style.justifyContent="flex-end")}}}l.current=c.scrollTop})})})]})});DK.displayName=gO;var RK="SelectGroup",[Cme,Ame]=fg(RK),Ome=$.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=Fc();return _.jsx(Cme,{scope:r,id:i,children:_.jsx(Qt.div,{role:"group","aria-labelledby":i,...n,ref:t})})});Ome.displayName=RK;var LK="SelectLabel",FK=$.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=Ame(LK,r);return _.jsx(Qt.div,{id:i.id,...n,ref:t})});FK.displayName=LK;var Ww="SelectItem",[kme,BK]=fg(Ww),zK=$.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:s,...o}=e,a=rd(Ww,r),l=nd(Ww,r),u=a.value===n,[c,d]=$.useState(s??""),[h,m]=$.useState(!1),g=tn(t,w=>l.itemRefCallback?.(w,n,i)),v=Fc(),y=$.useRef("touch"),x=()=>{i||(a.onValueChange(n),a.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return _.jsx(kme,{scope:r,value:n,disabled:i,textId:v,isSelected:u,onItemTextChange:$.useCallback(w=>{d(S=>S||(w?.textContent??"").trim())},[]),children:_.jsx(h1.ItemSlot,{scope:r,value:n,disabled:i,textValue:c,children:_.jsx(Qt.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:g,onFocus:Ut(o.onFocus,()=>m(!0)),onBlur:Ut(o.onBlur,()=>m(!1)),onClick:Ut(o.onClick,()=>{y.current!=="mouse"&&x()}),onPointerUp:Ut(o.onPointerUp,()=>{y.current==="mouse"&&x()}),onPointerDown:Ut(o.onPointerDown,w=>{y.current=w.pointerType}),onPointerMove:Ut(o.onPointerMove,w=>{y.current=w.pointerType,i?l.onItemLeave?.():y.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ut(o.onPointerLeave,w=>{w.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:Ut(o.onKeyDown,w=>{l.searchRef?.current!==""&&w.key===" "||(vme.includes(w.key)&&x(),w.key===" "&&w.preventDefault())})})})})});zK.displayName=Ww;var Iy="SelectItemText",UK=$.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,...s}=e,o=rd(Iy,r),a=nd(Iy,r),l=BK(Iy,r),u=wme(Iy,r),[c,d]=$.useState(null),h=tn(t,x=>d(x),l.onItemTextChange,x=>a.itemTextRefCallback?.(x,l.value,l.disabled)),m=c?.textContent,g=$.useMemo(()=>_.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:y}=u;return Ti(()=>(v(g),()=>y(g)),[v,y,g]),_.jsxs(_.Fragment,{children:[_.jsx(Qt.span,{id:l.textId,...s,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?tg.createPortal(s.children,o.valueNode):null]})});UK.displayName=Iy;var VK="SelectItemIndicator",WK=$.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return BK(VK,r).isSelected?_.jsx(Qt.span,{"aria-hidden":!0,...n,ref:t}):null});WK.displayName=VK;var vO="SelectScrollUpButton",GK=$.forwardRef((e,t)=>{const r=nd(vO,e.__scopeSelect),n=AI(vO,e.__scopeSelect),[i,s]=$.useState(!1),o=tn(t,n.onScrollButtonChange);return Ti(()=>{if(r.viewport&&r.isPositioned){let a=function(){const u=l.scrollTop>0;s(u)};const l=r.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[r.viewport,r.isPositioned]),i?_.jsx(HK,{...e,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=r;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});GK.displayName=vO;var yO="SelectScrollDownButton",qK=$.forwardRef((e,t)=>{const r=nd(yO,e.__scopeSelect),n=AI(yO,e.__scopeSelect),[i,s]=$.useState(!1),o=tn(t,n.onScrollButtonChange);return Ti(()=>{if(r.viewport&&r.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,c=Math.ceil(l.scrollTop)<u;s(c)};const l=r.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[r.viewport,r.isPositioned]),i?_.jsx(HK,{...e,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=r;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});qK.displayName=yO;var HK=$.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=e,s=nd("SelectScrollButton",r),o=$.useRef(null),a=p1(r),l=$.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return $.useEffect(()=>()=>l(),[l]),Ti(()=>{a().find(c=>c.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[a]),_.jsx(Qt.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Ut(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Ut(i.onPointerMove,()=>{s.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Ut(i.onPointerLeave,()=>{l()})})}),Ime="SelectSeparator",KK=$.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return _.jsx(Qt.div,{"aria-hidden":!0,...n,ref:t})});KK.displayName=Ime;var _O="SelectArrow",jme=$.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=m1(r),s=rd(_O,r),o=nd(_O,r);return s.open&&o.position==="popper"?_.jsx(o6,{...i,...n,ref:t}):null});jme.displayName=_O;function XK(e){return e===""||e===void 0}var YK=$.forwardRef((e,t)=>{const{value:r,...n}=e,i=$.useRef(null),s=tn(t,i),o=yK(r);return $.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==r&&c){const d=new Event("change",{bubbles:!0});c.call(a,r),a.dispatchEvent(d)}},[o,r]),_.jsx(s0,{asChild:!0,children:_.jsx("select",{...n,ref:s,defaultValue:r})})});YK.displayName="BubbleSelect";function QK(e){const t=gs(e),r=$.useRef(""),n=$.useRef(0),i=$.useCallback(o=>{const a=r.current+o;t(a),(function l(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>l(""),1e3))})(a)},[t]),s=$.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return $.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,s]}function JK(e,t,r){const i=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let o=$me(e,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==r));const l=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==r?l:void 0}function $me(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Nme=SK,ZK=EK,Dme=AK,Rme=OK,Lme=kK,e9=IK,Fme=DK,t9=FK,r9=zK,Bme=UK,zme=WK,n9=GK,i9=qK,s9=KK;const Io=Nme,jo=Dme,Qs=$.forwardRef(({className:e,children:t,...r},n)=>_.jsxs(ZK,{ref:n,className:Kt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,_.jsx(Rme,{asChild:!0,children:_.jsx(x8,{className:"h-4 w-4 opacity-50"})})]}));Qs.displayName=ZK.displayName;const o9=$.forwardRef(({className:e,...t},r)=>_.jsx(n9,{ref:r,className:Kt("flex cursor-default items-center justify-center py-1",e),...t,children:_.jsx(Dte,{className:"h-4 w-4"})}));o9.displayName=n9.displayName;const a9=$.forwardRef(({className:e,...t},r)=>_.jsx(i9,{ref:r,className:Kt("flex cursor-default items-center justify-center py-1",e),...t,children:_.jsx(x8,{className:"h-4 w-4"})}));a9.displayName=i9.displayName;const Js=$.forwardRef(({className:e,children:t,position:r="popper",...n},i)=>_.jsx(Lme,{children:_.jsxs(e9,{ref:i,className:Kt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[_.jsx(o9,{}),_.jsx(Fme,{className:Kt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),_.jsx(a9,{})]})}));Js.displayName=e9.displayName;const Ume=$.forwardRef(({className:e,...t},r)=>_.jsx(t9,{ref:r,className:Kt("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Ume.displayName=t9.displayName;const Vt=$.forwardRef(({className:e,children:t,...r},n)=>_.jsxs(r9,{ref:n,className:Kt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[_.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:_.jsx(zme,{children:_.jsx(qx,{className:"h-4 w-4"})})}),_.jsx(Bme,{children:t})]}));Vt.displayName=r9.displayName;const Vme=$.forwardRef(({className:e,...t},r)=>_.jsx(s9,{ref:r,className:Kt("-mx-1 my-1 h-px bg-muted",e),...t}));Vme.displayName=s9.displayName;function Wme(e,t=[]){let r=[];function n(s,o){const a=$.createContext(o),l=r.length;r=[...r,o];function u(d){const{scope:h,children:m,...g}=d,v=h?.[e][l]||a,y=$.useMemo(()=>g,Object.values(g));return _.jsx(v.Provider,{value:y,children:m})}function c(d,h){const m=h?.[e][l]||a,g=$.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const i=()=>{const s=r.map(o=>$.createContext(o));return function(a){const l=a?.[e]||s;return $.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[n,Gme(i,...t)]}function Gme(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=n.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return $.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var OI="Progress",kI=100,[qme]=Wme(OI),[Hme,Kme]=qme(OI),l9=$.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:i,getValueLabel:s=Xme,...o}=e;(i||i===0)&&!fR(i)&&console.error(Yme(`${i}`,"Progress"));const a=fR(i)?i:kI;n!==null&&!hR(n,a)&&console.error(Qme(`${n}`,"Progress"));const l=hR(n,a)?n:null,u=Gw(l)?s(l,a):void 0;return _.jsx(Hme,{scope:r,value:l,max:a,children:_.jsx(Qt.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Gw(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":d9(l,a),"data-value":l??void 0,"data-max":a,...o,ref:t})})});l9.displayName=OI;var u9="ProgressIndicator",c9=$.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,i=Kme(u9,r);return _.jsx(Qt.div,{"data-state":d9(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:t})});c9.displayName=u9;function Xme(e,t){return`${Math.round(e/t*100)}%`}function d9(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Gw(e){return typeof e=="number"}function fR(e){return Gw(e)&&!isNaN(e)&&e>0}function hR(e,t){return Gw(e)&&!isNaN(e)&&e<=t&&e>=0}function Yme(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${kI}\`.`}function Qme(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${kI} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var f9=l9,Jme=c9;const h9=$.forwardRef(({className:e,value:t,...r},n)=>_.jsx(f9,{ref:n,className:Kt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:_.jsx(Jme,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));h9.displayName=f9.displayName;const _w=new Map,Pf=[],Zme=(e,t,r)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){const n=_w.get(e);if(n===void 0)_w.set(e,{backend:t,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${r}`)}if(r>=0){const i=Pf.indexOf(e);i!==-1&&Pf.splice(i,1);for(let s=0;s<Pf.length;s++)if(_w.get(Pf[s]).priority<=r){Pf.splice(s,0,e);return}Pf.push(e)}return}throw new TypeError("not a valid backend")},ege=async e=>{const t=_w.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{const r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(n){return r||(t.error=`${n}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},tge=async e=>{const t=e.executionProviders||[],r=t.map(l=>typeof l=="string"?l:l.name),n=r.length===0?Pf:r;let i;const s=[],o=new Set;for(const l of n){const u=await ege(l);typeof u=="string"?s.push({name:l,err:u}):(i||(i=u),i===u&&o.add(l))}if(!i)throw new Error(`no available backend found. ERR: ${s.map(l=>`[${l.name}] ${l.err}`).join(", ")}`);for(const{name:l,err:u}of s)r.includes(l)&&console.warn(`removing requested execution provider "${l}" from session options because it is not available: ${u}`);const a=t.filter(l=>o.has(typeof l=="string"?l:l.name));return[i,new Proxy(e,{get:(l,u)=>u==="executionProviders"?a:Reflect.get(l,u)})]},rge="1.21.0";let pR="warning";const Ma={wasm:{},webgl:{},webgpu:{},versions:{common:rge},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);pR=e}},get logLevel(){return pR}};Object.defineProperty(Ma,"logLevel",{enumerable:!0});const nge=Ma,ige=(e,t)=>{const r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];const n=r.getContext("2d");if(n!=null){let i,s;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],s=e.dims[3]):(i=e.dims[3],s=e.dims[2]);const o=t?.format!==void 0?t.format:"RGB",a=t?.norm;let l,u;a===void 0||a.mean===void 0?l=[255,255,255,255]:typeof a.mean=="number"?l=[a.mean,a.mean,a.mean,a.mean]:(l=[a.mean[0],a.mean[1],a.mean[2],0],a.mean[3]!==void 0&&(l[3]=a.mean[3])),a===void 0||a.bias===void 0?u=[0,0,0,0]:typeof a.bias=="number"?u=[a.bias,a.bias,a.bias,a.bias]:(u=[a.bias[0],a.bias[1],a.bias[2],0],a.bias[3]!==void 0&&(u[3]=a.bias[3]));const c=s*i;let d=0,h=c,m=c*2,g=-1;o==="RGBA"?(d=0,h=c,m=c*2,g=c*3):o==="RGB"?(d=0,h=c,m=c*2):o==="RBG"&&(d=0,m=c,h=c*2);for(let v=0;v<s;v++)for(let y=0;y<i;y++){const x=(e.data[d++]-u[0])*l[0],w=(e.data[h++]-u[1])*l[1],S=(e.data[m++]-u[2])*l[2],M=g===-1?255:(e.data[g++]-u[3])*l[3];n.fillStyle="rgba("+x+","+w+","+S+","+M+")",n.fillRect(y,v,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},sge=(e,t)=>{const r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");let n;if(r!=null){let i,s,o;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],s=e.dims[1],o=e.dims[3]):(i=e.dims[3],s=e.dims[2],o=e.dims[1]);const a=t!==void 0&&t.format!==void 0?t.format:"RGB",l=t?.norm;let u,c;l===void 0||l.mean===void 0?u=[255,255,255,255]:typeof l.mean=="number"?u=[l.mean,l.mean,l.mean,l.mean]:(u=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(u[3]=l.mean[3])),l===void 0||l.bias===void 0?c=[0,0,0,0]:typeof l.bias=="number"?c=[l.bias,l.bias,l.bias,l.bias]:(c=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(c[3]=l.bias[3]));const d=s*i;if(t!==void 0&&(t.format!==void 0&&o===4&&t.format!=="RGBA"||o===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");const h=4;let m=0,g=1,v=2,y=3,x=0,w=d,S=d*2,M=-1;a==="RGBA"?(x=0,w=d,S=d*2,M=d*3):a==="RGB"?(x=0,w=d,S=d*2):a==="RBG"&&(x=0,S=d,w=d*2),n=r.createImageData(i,s);for(let T=0;T<s*i;m+=h,g+=h,v+=h,y+=h,T++)n.data[m]=(e.data[x++]-c[0])*u[0],n.data[g]=(e.data[w++]-c[1])*u[1],n.data[v]=(e.data[S++]-c[2])*u[2],n.data[y]=M===-1?255:(e.data[M++]-c[3])*u[3]}else throw new Error("Can not access image data");return n},oT=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");const{height:r,width:n}=t,i=t.norm??{mean:255,bias:0};let s,o;typeof i.mean=="number"?s=[i.mean,i.mean,i.mean,i.mean]:s=[i.mean[0],i.mean[1],i.mean[2],i.mean[3]??255],typeof i.bias=="number"?o=[i.bias,i.bias,i.bias,i.bias]:o=[i.bias[0],i.bias[1],i.bias[2],i.bias[3]??0];const a=t.format!==void 0?t.format:"RGBA",l=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",u=r*n,c=l==="RGBA"?new Float32Array(u*4):new Float32Array(u*3);let d=4,h=0,m=1,g=2,v=3,y=0,x=u,w=u*2,S=-1;a==="RGB"&&(d=3,h=0,m=1,g=2,v=-1),l==="RGBA"?S=u*3:l==="RBG"?(y=0,w=u,x=u*2):l==="BGR"&&(w=0,x=u,y=u*2);for(let T=0;T<u;T++,h+=d,g+=d,m+=d,v+=d)c[y++]=(e[h]+o[0])/s[0],c[x++]=(e[m]+o[1])/s[1],c[w++]=(e[g]+o[2])/s[2],S!==-1&&v!==-1&&(c[S++]=(e[v]+o[3])/s[3]);return l==="RGBA"?new Oo("float32",c,[1,4,r,n]):new Oo("float32",c,[1,3,r,n])},oge=async(e,t)=>{const r=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,n=typeof ImageData<"u"&&e instanceof ImageData,i=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,s=typeof e=="string";let o,a=t??{};const l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},u=c=>typeof HTMLCanvasElement<"u"&&c instanceof HTMLCanvasElement||c instanceof OffscreenCanvas?c.getContext("2d"):null;if(r){const c=l();c.width=e.width,c.height=e.height;const d=u(c);if(d!=null){let h=e.height,m=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(h=t.resizedHeight,m=t.resizedWidth),t!==void 0){if(a=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");a.tensorFormat="RGBA",a.height=h,a.width=m}else a.tensorFormat="RGBA",a.height=h,a.width=m;d.drawImage(e,0,0),o=d.getImageData(0,0,m,h).data}else throw new Error("Can not access image data")}else if(n){let c,d;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(c=t.resizedHeight,d=t.resizedWidth):(c=e.height,d=e.width),t!==void 0&&(a=t),a.format="RGBA",a.height=c,a.width=d,t!==void 0){const h=l();h.width=d,h.height=c;const m=u(h);if(m!=null)m.putImageData(e,0,0),o=m.getImageData(0,0,d,c).data;else throw new Error("Can not access image data")}else o=e.data}else if(i){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");const c=l();c.width=e.width,c.height=e.height;const d=u(c);if(d!=null){const h=e.height,m=e.width;return d.drawImage(e,0,0,m,h),o=d.getImageData(0,0,m,h).data,a.height=h,a.width=m,oT(o,a)}else throw new Error("Can not access image data")}else{if(s)return new Promise((c,d)=>{const h=l(),m=u(h);if(!e||!m)return d();const g=new Image;g.crossOrigin="Anonymous",g.src=e,g.onload=()=>{h.width=g.width,h.height=g.height,m.drawImage(g,0,0,h.width,h.height);const v=m.getImageData(0,0,h.width,h.height);a.height=h.height,a.width=h.width,c(oT(v.data,a))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(o!==void 0)return oT(o,a);throw new Error("Input data provided is not supported - aborted tensor creation")},age=(e,t)=>{const{width:r,height:n,download:i,dispose:s}=t,o=[1,n,r,4];return new Oo({location:"texture",type:"float32",texture:e,dims:o,download:i,dispose:s})},lge=(e,t)=>{const{dataType:r,dims:n,download:i,dispose:s}=t;return new Oo({location:"gpu-buffer",type:r??"float32",gpuBuffer:e,dims:n,download:i,dispose:s})},uge=(e,t)=>{const{dataType:r,dims:n,download:i,dispose:s}=t;return new Oo({location:"ml-tensor",type:r??"float32",mlTensor:e,dims:n,download:i,dispose:s})},cge=(e,t,r)=>new Oo({location:"cpu-pinned",type:e,data:t,dims:r??[t.length]}),lm=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),bw=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let mR=!1;const dge=()=>{if(!mR){mR=!0;const e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,r=globalThis.Float16Array,n=typeof r<"u"&&r.from;e&&(lm.set("int64",BigInt64Array),bw.set(BigInt64Array,"int64")),t&&(lm.set("uint64",BigUint64Array),bw.set(BigUint64Array,"uint64")),n?(lm.set("float16",r),bw.set(r,"float16")):lm.set("float16",Uint16Array)}},fge=e=>{let t=1;for(let r=0;r<e.length;r++){const n=e[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);t*=n}return t},hge=(e,t)=>{switch(e.location){case"cpu":return new Oo(e.type,e.data,t);case"cpu-pinned":return new Oo({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new Oo({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new Oo({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new Oo({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}};let Oo=class{constructor(t,r,n){dge();let i,s;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,i=t.type,s=t.dims,t.location){case"cpu-pinned":{const a=lm.get(i);if(!a)throw new TypeError(`unsupported type "${i}" to create tensor from pinned buffer`);if(!(t.data instanceof a))throw new TypeError(`buffer should be of type ${a.name}`);this.cpuData=t.data;break}case"texture":{if(i!=="float32")throw new TypeError(`unsupported type "${i}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(i!=="float32"&&i!=="float16"&&i!=="int32"&&i!=="int64"&&i!=="uint32"&&i!=="uint8"&&i!=="bool"&&i!=="uint4"&&i!=="int4")throw new TypeError(`unsupported type "${i}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}case"ml-tensor":{if(i!=="float32"&&i!=="float16"&&i!=="int32"&&i!=="int64"&&i!=="uint32"&&i!=="uint64"&&i!=="int8"&&i!=="uint8"&&i!=="bool"&&i!=="uint4"&&i!=="int4")throw new TypeError(`unsupported type "${i}" to create tensor from MLTensor`);this.mlTensorData=t.mlTensor,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let a,l;if(typeof t=="string")if(i=t,l=n,t==="string"){if(!Array.isArray(r))throw new TypeError("A string tensor's data must be a string array.");a=r}else{const u=lm.get(t);if(u===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(r)){if(t==="float16"&&u===Uint16Array||t==="uint4"||t==="int4")throw new TypeError(`Creating a ${t} tensor from number array is not supported. Please use ${u.name} as data.`);t==="uint64"||t==="int64"?a=u.from(r,BigInt):a=u.from(r)}else if(r instanceof u)a=r;else if(r instanceof Uint8ClampedArray)if(t==="uint8")a=Uint8Array.from(r);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(t==="float16"&&r instanceof Uint16Array&&u!==Uint16Array)a=new globalThis.Float16Array(r.buffer,r.byteOffset,r.length);else throw new TypeError(`A ${i} tensor's data must be type of ${u}`)}else if(l=r,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const u=typeof t[0];if(u==="string")i="string",a=t;else if(u==="boolean")i="bool",a=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${u}.`)}else if(t instanceof Uint8ClampedArray)i="uint8",a=Uint8Array.from(t);else{const u=bw.get(t.constructor);if(u===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);i=u,a=t}if(l===void 0)l=[a.length];else if(!Array.isArray(l))throw new TypeError("A tensor's dims must be a number array");s=l,this.cpuData=a,this.dataLocation="cpu"}const o=fge(s);if(this.cpuData&&o!==this.cpuData.length&&!((i==="uint4"||i==="int4")&&Math.ceil(o/2)===this.cpuData.length))throw new Error(`Tensor's size(${o}) does not match data length(${this.cpuData.length}).`);this.type=i,this.dims=s,this.size=o}static async fromImage(t,r){return oge(t,r)}static fromTexture(t,r){return age(t,r)}static fromGpuBuffer(t,r){return lge(t,r)}static fromMLTensor(t,r){return uge(t,r)}static fromPinnedBuffer(t,r,n){return cge(t,r,n)}toDataURL(t){return ige(this,t)}toImageData(t){return sge(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;const r=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=r,t&&this.disposer&&(this.disposer(),this.disposer=void 0),r}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return hge(this,t)}};const em=Oo,p9=(e,t)=>{(typeof Ma.trace>"u"?!Ma.wasm.trace:!Ma.trace)||console.timeStamp(`${e}::ORT::${t}`)},m9=(e,t)=>{const r=new Error().stack?.split(/\r\n|\r|\n/g)||[];let n=!1;for(let i=0;i<r.length;i++){if(n&&!r[i].includes("TRACE_FUNC")){let s=`FUNC_${e}::${r[i].trim().split(" ")[1]}`;t&&(s+=`::${t}`),p9("CPU",s);return}r[i].includes("TRACE_FUNC")&&(n=!0)}},bO=e=>{(typeof Ma.trace>"u"?!Ma.wasm.trace:!Ma.trace)||m9("BEGIN",e)},wO=e=>{(typeof Ma.trace>"u"?!Ma.wasm.trace:!Ma.trace)||m9("END",e)};let pge=class g9{constructor(t){this.handler=t}async run(t,r,n){bO();const i={};let s={};if(typeof t!="object"||t===null||t instanceof em||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let o=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof em)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");o=!1;for(const u of r){if(typeof u!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(u)===-1)throw new RangeError(`'fetches' contains invalid output name: ${u}.`);i[u]=null}if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let u=!1;const c=Object.getOwnPropertyNames(r);for(const d of this.outputNames)if(c.indexOf(d)!==-1){const h=r[d];(h===null||h instanceof em)&&(u=!0,o=!1,i[d]=h)}if(u){if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else s=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const u of this.inputNames)if(typeof t[u]>"u")throw new Error(`input '${u}' is missing in 'feeds'.`);if(o)for(const u of this.outputNames)i[u]=null;const a=await this.handler.run(t,i,s),l={};for(const u in a)if(Object.hasOwnProperty.call(a,u)){const c=a[u];c instanceof em?l[u]=c:l[u]=new em(c.type,c.data,c.dims)}return wO(),l}async release(){return this.handler.dispose()}static async create(t,r,n,i){bO();let s,o={};if(typeof t=="string"){if(s=t,typeof r=="object"&&r!==null)o=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(s=t,typeof r=="object"&&r!==null)o=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){const c=t;let d=0,h=t.byteLength;if(typeof r=="object"&&r!==null)o=r;else if(typeof r=="number"){if(d=r,!Number.isSafeInteger(d))throw new RangeError("'byteOffset' must be an integer.");if(d<0||d>=c.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${c.byteLength}).`);if(h=t.byteLength-d,typeof n=="number"){if(h=n,!Number.isSafeInteger(h))throw new RangeError("'byteLength' must be an integer.");if(h<=0||d+h>c.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${c.byteLength-d}].`);if(typeof i=="object"&&i!==null)o=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");s=new Uint8Array(c,d,h)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const[a,l]=await tge(o),u=await a.createInferenceSessionHandler(s,l);return wO(),new g9(u)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const mge=pge,gge=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:mge,TRACE:p9,TRACE_FUNC_BEGIN:bO,TRACE_FUNC_END:wO,Tensor:em,env:nge,registerBackend:Zme},Symbol.toStringTag,{value:"Module"}));var II=Object.defineProperty,vge=Object.getOwnPropertyDescriptor,yge=Object.getOwnPropertyNames,_ge=Object.prototype.hasOwnProperty,bge=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),at=(e,t)=>()=>(e&&(t=e(e=0)),t),hg=(e,t)=>{for(var r in t)II(e,r,{get:t[r],enumerable:!0})},wge=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of yge(t))!_ge.call(e,i)&&i!==r&&II(e,i,{get:()=>t[i],enumerable:!(n=vge(t,i))||n.enumerable});return e},w_=e=>wge(II({},"__esModule",{value:!0}),e),cy,Ac,Lf,gR,v9,y9=at(()=>{cy=new Map,Ac=[],Lf=(e,t,r)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let n=cy.get(e);if(n===void 0)cy.set(e,{backend:t,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${r}`)}if(r>=0){let i=Ac.indexOf(e);i!==-1&&Ac.splice(i,1);for(let s=0;s<Ac.length;s++)if(cy.get(Ac[s]).priority<=r){Ac.splice(s,0,e);return}Ac.push(e)}return}throw new TypeError("not a valid backend")},gR=async e=>{let t=cy.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(n){return r||(t.error=`${n}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},v9=async e=>{let t=e.executionProviders||[],r=t.map(l=>typeof l=="string"?l:l.name),n=r.length===0?Ac:r,i,s=[],o=new Set;for(let l of n){let u=await gR(l);typeof u=="string"?s.push({name:l,err:u}):(i||(i=u),i===u&&o.add(l))}if(!i)throw new Error(`no available backend found. ERR: ${s.map(l=>`[${l.name}] ${l.err}`).join(", ")}`);for(let{name:l,err:u}of s)r.includes(l)&&console.warn(`removing requested execution provider "${l}" from session options because it is not available: ${u}`);let a=t.filter(l=>o.has(typeof l=="string"?l:l.name));return[i,new Proxy(e,{get:(l,u)=>u==="executionProviders"?a:Reflect.get(l,u)})]}}),xge=at(()=>{y9()}),_9,Mge=at(()=>{_9="1.22.0-dev.20250409-89f8206ba4"}),aT,Eo,b9=at(()=>{Mge(),aT="warning",Eo={wasm:{},webgl:{},webgpu:{},versions:{common:_9},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);aT=e}},get logLevel(){return aT}},Object.defineProperty(Eo,"logLevel",{enumerable:!0})}),Zr,Tge=at(()=>{b9(),Zr=Eo}),w9,x9,Sge=at(()=>{w9=(e,t)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];let n=r.getContext("2d");if(n!=null){let i,s;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],s=e.dims[3]):(i=e.dims[3],s=e.dims[2]);let o=t?.format!==void 0?t.format:"RGB",a=t?.norm,l,u;a===void 0||a.mean===void 0?l=[255,255,255,255]:typeof a.mean=="number"?l=[a.mean,a.mean,a.mean,a.mean]:(l=[a.mean[0],a.mean[1],a.mean[2],0],a.mean[3]!==void 0&&(l[3]=a.mean[3])),a===void 0||a.bias===void 0?u=[0,0,0,0]:typeof a.bias=="number"?u=[a.bias,a.bias,a.bias,a.bias]:(u=[a.bias[0],a.bias[1],a.bias[2],0],a.bias[3]!==void 0&&(u[3]=a.bias[3]));let c=s*i,d=0,h=c,m=c*2,g=-1;o==="RGBA"?(d=0,h=c,m=c*2,g=c*3):o==="RGB"?(d=0,h=c,m=c*2):o==="RBG"&&(d=0,m=c,h=c*2);for(let v=0;v<s;v++)for(let y=0;y<i;y++){let x=(e.data[d++]-u[0])*l[0],w=(e.data[h++]-u[1])*l[1],S=(e.data[m++]-u[2])*l[2],M=g===-1?255:(e.data[g++]-u[3])*l[3];n.fillStyle="rgba("+x+","+w+","+S+","+M+")",n.fillRect(y,v,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},x9=(e,t)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),n;if(r!=null){let i,s,o;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],s=e.dims[1],o=e.dims[3]):(i=e.dims[3],s=e.dims[2],o=e.dims[1]);let a=t!==void 0&&t.format!==void 0?t.format:"RGB",l=t?.norm,u,c;l===void 0||l.mean===void 0?u=[255,255,255,255]:typeof l.mean=="number"?u=[l.mean,l.mean,l.mean,l.mean]:(u=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(u[3]=l.mean[3])),l===void 0||l.bias===void 0?c=[0,0,0,0]:typeof l.bias=="number"?c=[l.bias,l.bias,l.bias,l.bias]:(c=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(c[3]=l.bias[3]));let d=s*i;if(t!==void 0&&(t.format!==void 0&&o===4&&t.format!=="RGBA"||o===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let h=4,m=0,g=1,v=2,y=3,x=0,w=d,S=d*2,M=-1;a==="RGBA"?(x=0,w=d,S=d*2,M=d*3):a==="RGB"?(x=0,w=d,S=d*2):a==="RBG"&&(x=0,S=d,w=d*2),n=r.createImageData(i,s);for(let T=0;T<s*i;m+=h,g+=h,v+=h,y+=h,T++)n.data[m]=(e.data[x++]-c[0])*u[0],n.data[g]=(e.data[w++]-c[1])*u[1],n.data[v]=(e.data[S++]-c[2])*u[2],n.data[y]=M===-1?255:(e.data[M++]-c[3])*u[3]}else throw new Error("Can not access image data");return n}}),$b,M9,T9,S9,P9,E9,Pge=at(()=>{jI(),$b=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:n}=t,i=t.norm??{mean:255,bias:0},s,o;typeof i.mean=="number"?s=[i.mean,i.mean,i.mean,i.mean]:s=[i.mean[0],i.mean[1],i.mean[2],i.mean[3]??255],typeof i.bias=="number"?o=[i.bias,i.bias,i.bias,i.bias]:o=[i.bias[0],i.bias[1],i.bias[2],i.bias[3]??0];let a=t.format!==void 0?t.format:"RGBA",l=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",u=r*n,c=l==="RGBA"?new Float32Array(u*4):new Float32Array(u*3),d=4,h=0,m=1,g=2,v=3,y=0,x=u,w=u*2,S=-1;a==="RGB"&&(d=3,h=0,m=1,g=2,v=-1),l==="RGBA"?S=u*3:l==="RBG"?(y=0,w=u,x=u*2):l==="BGR"&&(w=0,x=u,y=u*2);for(let M=0;M<u;M++,h+=d,g+=d,m+=d,v+=d)c[y++]=(e[h]+o[0])/s[0],c[x++]=(e[m]+o[1])/s[1],c[w++]=(e[g]+o[2])/s[2],S!==-1&&v!==-1&&(c[S++]=(e[v]+o[3])/s[3]);return l==="RGBA"?new qs("float32",c,[1,4,r,n]):new qs("float32",c,[1,3,r,n])},M9=async(e,t)=>{let r=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,n=typeof ImageData<"u"&&e instanceof ImageData,i=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,s=typeof e=="string",o,a=t??{},l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},u=c=>typeof HTMLCanvasElement<"u"&&c instanceof HTMLCanvasElement||c instanceof OffscreenCanvas?c.getContext("2d"):null;if(r){let c=l();c.width=e.width,c.height=e.height;let d=u(c);if(d!=null){let h=e.height,m=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(h=t.resizedHeight,m=t.resizedWidth),t!==void 0){if(a=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");a.tensorFormat="RGBA",a.height=h,a.width=m}else a.tensorFormat="RGBA",a.height=h,a.width=m;d.drawImage(e,0,0),o=d.getImageData(0,0,m,h).data}else throw new Error("Can not access image data")}else if(n){let c,d;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(c=t.resizedHeight,d=t.resizedWidth):(c=e.height,d=e.width),t!==void 0&&(a=t),a.format="RGBA",a.height=c,a.width=d,t!==void 0){let h=l();h.width=d,h.height=c;let m=u(h);if(m!=null)m.putImageData(e,0,0),o=m.getImageData(0,0,d,c).data;else throw new Error("Can not access image data")}else o=e.data}else if(i){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let c=l();c.width=e.width,c.height=e.height;let d=u(c);if(d!=null){let h=e.height,m=e.width;return d.drawImage(e,0,0,m,h),o=d.getImageData(0,0,m,h).data,a.height=h,a.width=m,$b(o,a)}else throw new Error("Can not access image data")}else{if(s)return new Promise((c,d)=>{let h=l(),m=u(h);if(!e||!m)return d();let g=new Image;g.crossOrigin="Anonymous",g.src=e,g.onload=()=>{h.width=g.width,h.height=g.height,m.drawImage(g,0,0,h.width,h.height);let v=m.getImageData(0,0,h.width,h.height);a.height=h.height,a.width=h.width,c($b(v.data,a))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(o!==void 0)return $b(o,a);throw new Error("Input data provided is not supported - aborted tensor creation")},T9=(e,t)=>{let{width:r,height:n,download:i,dispose:s}=t,o=[1,n,r,4];return new qs({location:"texture",type:"float32",texture:e,dims:o,download:i,dispose:s})},S9=(e,t)=>{let{dataType:r,dims:n,download:i,dispose:s}=t;return new qs({location:"gpu-buffer",type:r??"float32",gpuBuffer:e,dims:n,download:i,dispose:s})},P9=(e,t)=>{let{dataType:r,dims:n,download:i,dispose:s}=t;return new qs({location:"ml-tensor",type:r??"float32",mlTensor:e,dims:n,download:i,dispose:s})},E9=(e,t,r)=>new qs({location:"cpu-pinned",type:e,data:t,dims:r??[t.length]})}),If,jy,lT,C9,Ege=at(()=>{If=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),jy=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),lT=!1,C9=()=>{if(!lT){lT=!0;let e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,r=globalThis.Float16Array,n=typeof r<"u"&&r.from;e&&(If.set("int64",BigInt64Array),jy.set(BigInt64Array,"int64")),t&&(If.set("uint64",BigUint64Array),jy.set(BigUint64Array,"uint64")),n?(If.set("float16",r),jy.set(r,"float16")):If.set("float16",Uint16Array)}}}),A9,O9,Cge=at(()=>{jI(),A9=e=>{let t=1;for(let r=0;r<e.length;r++){let n=e[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);t*=n}return t},O9=(e,t)=>{switch(e.location){case"cpu":return new qs(e.type,e.data,t);case"cpu-pinned":return new qs({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new qs({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new qs({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new qs({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}}),qs,jI=at(()=>{Sge(),Pge(),Ege(),Cge(),qs=class{constructor(e,t,r){C9();let n,i;if(typeof e=="object"&&"location"in e)switch(this.dataLocation=e.location,n=e.type,i=e.dims,e.location){case"cpu-pinned":{let o=If.get(n);if(!o)throw new TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(e.data instanceof o))throw new TypeError(`buffer should be of type ${o.name}`);this.cpuData=e.data;break}case"texture":{if(n!=="float32")throw new TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break}case"gpu-buffer":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="uint8"&&n!=="bool"&&n!=="uint4"&&n!=="int4")throw new TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break}case"ml-tensor":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="uint64"&&n!=="int8"&&n!=="uint8"&&n!=="bool"&&n!=="uint4"&&n!=="int4")throw new TypeError(`unsupported type "${n}" to create tensor from MLTensor`);this.mlTensorData=e.mlTensor,this.downloader=e.download,this.disposer=e.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let o,a;if(typeof e=="string")if(n=e,a=r,e==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");o=t}else{let l=If.get(e);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if(e==="float16"&&l===Uint16Array||e==="uint4"||e==="int4")throw new TypeError(`Creating a ${e} tensor from number array is not supported. Please use ${l.name} as data.`);e==="uint64"||e==="int64"?o=l.from(t,BigInt):o=l.from(t)}else if(t instanceof l)o=t;else if(t instanceof Uint8ClampedArray)if(e==="uint8")o=Uint8Array.from(t);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(e==="float16"&&t instanceof Uint16Array&&l!==Uint16Array)o=new globalThis.Float16Array(t.buffer,t.byteOffset,t.length);else throw new TypeError(`A ${n} tensor's data must be type of ${l}`)}else if(a=t,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof e[0];if(l==="string")n="string",o=e;else if(l==="boolean")n="bool",o=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else if(e instanceof Uint8ClampedArray)n="uint8",o=Uint8Array.from(e);else{let l=jy.get(e.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);n=l,o=e}if(a===void 0)a=[o.length];else if(!Array.isArray(a))throw new TypeError("A tensor's dims must be a number array");i=a,this.cpuData=o,this.dataLocation="cpu"}let s=A9(i);if(this.cpuData&&s!==this.cpuData.length&&!((n==="uint4"||n==="int4")&&Math.ceil(s/2)===this.cpuData.length))throw new Error(`Tensor's size(${s}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=i,this.size=s}static async fromImage(e,t){return M9(e,t)}static fromTexture(e,t){return T9(e,t)}static fromGpuBuffer(e,t){return S9(e,t)}static fromMLTensor(e,t){return P9(e,t)}static fromPinnedBuffer(e,t,r){return E9(e,t,r)}toDataURL(e){return w9(this,e)}toImageData(e){return x9(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return O9(this,e)}}}),wa,k9=at(()=>{jI(),wa=qs}),x_,uT,Ea,Lo,I9=at(()=>{b9(),x_=(e,t)=>{(typeof Eo.trace>"u"?!Eo.wasm.trace:!Eo.trace)||console.timeStamp(`${e}::ORT::${t}`)},uT=(e,t)=>{let r=new Error().stack?.split(/\r\n|\r|\n/g)||[],n=!1;for(let i=0;i<r.length;i++){if(n&&!r[i].includes("TRACE_FUNC")){let s=`FUNC_${e}::${r[i].trim().split(" ")[1]}`;t&&(s+=`::${t}`),x_("CPU",s);return}r[i].includes("TRACE_FUNC")&&(n=!0)}},Ea=e=>{(typeof Eo.trace>"u"?!Eo.wasm.trace:!Eo.trace)||uT("BEGIN",e)},Lo=e=>{(typeof Eo.trace>"u"?!Eo.wasm.trace:!Eo.trace)||uT("END",e)}}),j9,Age=at(()=>{y9(),k9(),I9(),j9=class $9{constructor(t){this.handler=t}async run(t,r,n){Ea();let i={},s={};if(typeof t!="object"||t===null||t instanceof wa||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let o=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof wa)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");o=!1;for(let u of r){if(typeof u!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(u)===-1)throw new RangeError(`'fetches' contains invalid output name: ${u}.`);i[u]=null}if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let u=!1,c=Object.getOwnPropertyNames(r);for(let d of this.outputNames)if(c.indexOf(d)!==-1){let h=r[d];(h===null||h instanceof wa)&&(u=!0,o=!1,i[d]=h)}if(u){if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else s=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let u of this.inputNames)if(typeof t[u]>"u")throw new Error(`input '${u}' is missing in 'feeds'.`);if(o)for(let u of this.outputNames)i[u]=null;let a=await this.handler.run(t,i,s),l={};for(let u in a)if(Object.hasOwnProperty.call(a,u)){let c=a[u];c instanceof wa?l[u]=c:l[u]=new wa(c.type,c.data,c.dims)}return Lo(),l}async release(){return this.handler.dispose()}static async create(t,r,n,i){Ea();let s,o={};if(typeof t=="string"){if(s=t,typeof r=="object"&&r!==null)o=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(s=t,typeof r=="object"&&r!==null)o=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let c=t,d=0,h=t.byteLength;if(typeof r=="object"&&r!==null)o=r;else if(typeof r=="number"){if(d=r,!Number.isSafeInteger(d))throw new RangeError("'byteOffset' must be an integer.");if(d<0||d>=c.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${c.byteLength}).`);if(h=t.byteLength-d,typeof n=="number"){if(h=n,!Number.isSafeInteger(h))throw new RangeError("'byteLength' must be an integer.");if(h<=0||d+h>c.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${c.byteLength-d}].`);if(typeof i=="object"&&i!==null)o=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");s=new Uint8Array(c,d,h)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[a,l]=await v9(o),u=await a.createInferenceSessionHandler(s,l);return Lo(),new $9(u)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}get inputMetadata(){return this.handler.inputMetadata}get outputMetadata(){return this.handler.outputMetadata}}}),$I,Oge=at(()=>{Age(),$I=j9}),kge=at(()=>{}),Ige=at(()=>{}),jge=at(()=>{}),$ge=at(()=>{}),N9={};hg(N9,{InferenceSession:()=>$I,TRACE:()=>x_,TRACE_FUNC_BEGIN:()=>Ea,TRACE_FUNC_END:()=>Lo,Tensor:()=>wa,env:()=>Zr,registerBackend:()=>Lf});var Ia=at(()=>{xge(),Tge(),Oge(),k9(),kge(),Ige(),I9(),jge(),$ge()}),NI=at(()=>{}),D9={};hg(D9,{default:()=>R9});var cT,dT,R9,Nge=at(()=>{UY(),ch(),DI(),cT="ort-wasm-proxy-worker",dT=globalThis.self?.name===cT,dT&&(self.onmessage=e=>{let{type:t,in:r}=e.data;try{switch(t){case"init-wasm":RI(r.wasm).then(()=>{tj(r).then(()=>{postMessage({type:t})},n=>{postMessage({type:t,err:n})})},n=>{postMessage({type:t,err:n})});break;case"init-ep":{let{epName:n,env:i}=r;rj(i,n).then(()=>{postMessage({type:t})},s=>{postMessage({type:t,err:s})});break}case"copy-from":{let{buffer:n}=r,i=Jw(n);postMessage({type:t,out:i});break}case"create":{let{model:n,options:i}=r;nj(n,i).then(s=>{postMessage({type:t,out:s})},s=>{postMessage({type:t,err:s})});break}case"release":ij(r),postMessage({type:t});break;case"run":{let{sessionId:n,inputIndices:i,inputs:s,outputIndices:o,options:a}=r;sj(n,i,s,o,new Array(o.length).fill(null),a).then(l=>{l.some(u=>u[3]!=="cpu")?postMessage({type:t,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:t,out:l},aj([...s,...l]))},l=>{postMessage({type:t,err:l})});break}case"end-profiling":oj(r),postMessage({type:t});break;default:}}catch(n){postMessage({type:t,err:n})}}),R9=dT?null:e=>new Worker(e??zs,{type:"module",name:cT})}),L9={};hg(L9,{default:()=>F9});var fT,hT,F9,vR,Dge=at(()=>{hT=(fT=import.meta.url,async function(e={}){var t,r,n=e,i=new Promise((I,R)=>{t=I,r=R}),s=typeof window=="object",o=typeof WorkerGlobalScope<"u",a=o&&self.name?.startsWith("em-pthread");n.mountExternalData=(I,R)=>{I.startsWith("./")&&(I=I.substring(2)),(n.Eb||(n.Eb=new Map)).set(I,R)},n.unmountExternalData=()=>{delete n.Eb};var l=globalThis.SharedArrayBuffer??new WebAssembly.Memory({initial:0,maximum:0,pc:!0}).buffer.constructor;let u=I=>async(...R)=>{try{if(n.Fb)throw Error("Session already started");let Y=n.Fb={dc:R[0],errors:[]},ie=await I(...R);if(n.Fb!==Y)throw Error("Session mismatch");n.Jb?.flush();let le=Y.errors;if(0<le.length){let Se=await Promise.all(le);if(Se=Se.filter(Ge=>Ge),0<Se.length)throw Error(Se.join(`
`))}return ie}finally{n.Fb=null}};n.jsepInit=(I,R)=>{if(I==="webgpu"){[n.Jb,n.Ub,n.Yb,n.Kb,n.Xb,n.jb,n.Zb,n.ac,n.Vb,n.Wb,n.$b]=R;let Y=n.Jb;n.jsepRegisterBuffer=(ie,le,Se,Ge)=>Y.registerBuffer(ie,le,Se,Ge),n.jsepGetBuffer=ie=>Y.getBuffer(ie),n.jsepCreateDownloader=(ie,le,Se)=>Y.createDownloader(ie,le,Se),n.jsepOnCreateSession=ie=>{Y.onCreateSession(ie)},n.jsepOnReleaseSession=ie=>{Y.onReleaseSession(ie)},n.jsepOnRunStart=ie=>Y.onRunStart(ie),n.bc=(ie,le)=>{Y.upload(ie,le)}}else if(I==="webnn"){let Y=R[0];[n.nc,n.Nb,n.webnnEnsureTensor,n.Ob,n.webnnDownloadTensor]=R.slice(1),n.webnnReleaseTensorId=n.Nb,n.webnnUploadTensor=n.Ob,n.webnnOnRunStart=ie=>Y.onRunStart(ie),n.webnnOnRunEnd=Y.onRunEnd.bind(Y),n.webnnRegisterMLContext=(ie,le)=>{Y.registerMLContext(ie,le)},n.webnnOnReleaseSession=ie=>{Y.onReleaseSession(ie)},n.webnnCreateMLTensorDownloader=(ie,le)=>Y.createMLTensorDownloader(ie,le),n.webnnRegisterMLTensor=(ie,le,Se,Ge)=>Y.registerMLTensor(ie,le,Se,Ge),n.webnnCreateMLContext=ie=>Y.createMLContext(ie),n.webnnRegisterMLConstant=(ie,le,Se,Ge,rt,pt)=>Y.registerMLConstant(ie,le,Se,Ge,rt,n.Eb,pt),n.webnnRegisterGraphInput=Y.registerGraphInput.bind(Y),n.webnnIsGraphInput=Y.isGraphInput.bind(Y),n.webnnCreateTemporaryTensor=Y.createTemporaryTensor.bind(Y),n.webnnIsInt64Supported=Y.isInt64Supported.bind(Y)}};let c=()=>{let I=(R,Y,ie)=>(...le)=>{let Se=Ar,Ge=Y?.();le=R(...le);let rt=Y?.();return Ge!==rt&&(R=rt,ie(Ge),Y=ie=null),Ar!=Se?new Promise((pt,Tt)=>{Cn={resolve:pt,reject:Tt}}):le};(()=>{for(let R of["_OrtAppendExecutionProvider","_OrtCreateSession","_OrtRun","_OrtRunWithBinding","_OrtBindInput"])n[R]=I(n[R],()=>n[R],Y=>n[R]=Y)})(),u!==void 0&&(n._OrtRun=u(n._OrtRun),n._OrtRunWithBinding=u(n._OrtRunWithBinding)),c=void 0};n.asyncInit=()=>{c?.()};var d,h,m=Object.assign({},n),g=(I,R)=>{throw R},v="";(s||o)&&(o?v=self.location.href:typeof document<"u"&&document.currentScript&&(v=document.currentScript.src),fT&&(v=fT),v=v.startsWith("blob:")?"":v.slice(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1),o&&(h=I=>{var R=new XMLHttpRequest;return R.open("GET",I,!1),R.responseType="arraybuffer",R.send(null),new Uint8Array(R.response)}),d=async I=>{if(oe(I))return new Promise((Y,ie)=>{var le=new XMLHttpRequest;le.open("GET",I,!0),le.responseType="arraybuffer",le.onload=()=>{le.status==200||le.status==0&&le.response?Y(le.response):ie(le.status)},le.onerror=ie,le.send(null)});var R=await fetch(I,{credentials:"same-origin"});if(R.ok)return R.arrayBuffer();throw Error(R.status+" : "+R.url)});var y=console.log.bind(console),x=console.error.bind(console),w=y,S=x;Object.assign(n,m),m=null;var M,T,P,E,A,L,B,V,G,z,K,J,X,Q=n.wasmBinary,W=!1,oe=I=>I.startsWith("file://");function ce(){return M.buffer!=E.buffer&&he(),E}function D(){return M.buffer!=E.buffer&&he(),A}function U(){return M.buffer!=E.buffer&&he(),L}function te(){return M.buffer!=E.buffer&&he(),B}function ee(){return M.buffer!=E.buffer&&he(),V}function pe(){return M.buffer!=E.buffer&&he(),G}function Oe(){return M.buffer!=E.buffer&&he(),z}function xe(){return M.buffer!=E.buffer&&he(),X}if(a){let I=function(R){try{var Y=R.data,ie=Y.Bb;if(ie==="load"){let le=[];self.onmessage=Se=>le.push(Se),self.startWorker=()=>{postMessage({Bb:"loaded"});for(let Se of le)I(Se);self.onmessage=I};for(let Se of Y.Rb)n[Se]&&!n[Se].proxy||(n[Se]=(...Ge)=>{postMessage({Bb:"callHandler",Qb:Se,args:Ge})},Se=="print"&&(w=n[Se]),Se=="printErr"&&(S=n[Se]));M=Y.kc,he(),Ie(Y.lc)}else if(ie==="run"){Z(Y.Ab),Fl(Y.Ab,0,0,1,0,0),gn(),ve(Y.Ab),Pe||(Ho(),Pe=!0);try{be(Y.fc,Y.Hb)}catch(le){if(le!="unwind")throw le}}else Y.target!=="setimmediate"&&(ie==="checkMailbox"?Pe&&Re():ie&&(S(`worker: received unknown command ${ie}`),S(Y)))}catch(le){throw ec(),le}};var Ie,Pe=!1;S=function(...R){R=R.join(" "),console.error(R)},self.alert=function(...R){postMessage({Bb:"alert",text:R.join(" "),ic:xs()})},self.onunhandledrejection=R=>{throw R.reason||R},self.onmessage=I}function he(){var I=M.buffer;n.HEAP8=E=new Int8Array(I),n.HEAP16=L=new Int16Array(I),n.HEAPU8=A=new Uint8Array(I),n.HEAPU16=B=new Uint16Array(I),n.HEAP32=V=new Int32Array(I),n.HEAPU32=G=new Uint32Array(I),n.HEAPF32=z=new Float32Array(I),n.HEAPF64=X=new Float64Array(I),n.HEAP64=K=new BigInt64Array(I),n.HEAPU64=J=new BigUint64Array(I)}function re(){a?startWorker(n):kt.Ca()}a||(M=new WebAssembly.Memory({initial:256,maximum:65536,shared:!0}),he());var ue,ae=0,Ce=null;function $e(){if(--ae==0&&Ce){var I=Ce;Ce=null,I()}}function Ne(I){throw S(I="Aborted("+I+")"),W=!0,I=new WebAssembly.RuntimeError(I+". Build with -sASSERTIONS for more info."),r(I),I}function Le(){return{a:{L:Qe,Aa:He,b:we,$:Je,A:wt,pa:Rr,X:Pr,Z:Rn,qa:Lr,na:Tn,ga:Pi,ma:Bi,J:zi,Y:no,V:Ei,oa:io,W:Wn,va:zo,E:it,Q:At,O:xl,D:Ml,u:Tl,r:Sl,P:so,z:ke,R:q,ja:de,T:Ke,aa:mt,M:vt,F:ut,ia:ve,sa:tr,t:Fr,Ba:wr,w:yn,o:Yr,l:_n,c:ys,n:Oi,j:zu,v:Cl,p:Vo,f:Al,s:Ol,m:cd,e:gi,k:Wo,i:kl,g:Na,d:gh,da:Il,ea:Uu,fa:wg,ba:dd,ca:Vu,N:fd,xa:vh,ua:_h,h:bh,C:wh,G:pd,ta:yh,x:Gu,ra:qu,U:md,q:Wu,y:xh,K:Hu,S:Go,za:xg,ya:Mh,ka:vd,la:Ku,_:We,B:Xu,I:La,ha:Yu,H:co,a:M,wa:xt}}}var Ve={829644:(I,R,Y,ie,le)=>{if(n===void 0||!n.Eb)return 1;if((I=bt(Number(I>>>0))).startsWith("./")&&(I=I.substring(2)),!(I=n.Eb.get(I)))return 2;if(R=Number(R>>>0),Y=Number(Y>>>0),ie=Number(ie>>>0),R+Y>I.byteLength)return 3;try{let Se=I.subarray(R,R+Y);switch(le){case 0:D().set(Se,ie>>>0);break;case 1:n.mc?n.mc(ie,Se):n.bc(ie,Se);break;default:return 4}return 0}catch{return 4}},830468:(I,R,Y)=>{n.Ob(I,D().subarray(R>>>0,R+Y>>>0))},830532:()=>n.nc(),830574:I=>{n.Nb(I)},830611:()=>{n.Vb()},830642:()=>{n.Wb()},830671:()=>{n.$b()},830696:I=>n.Ub(I),830729:I=>n.Yb(I),830761:(I,R,Y)=>{n.Kb(Number(I),Number(R),Number(Y),!0)},830824:(I,R,Y)=>{n.Kb(Number(I),Number(R),Number(Y))},830881:()=>typeof wasmOffsetConverter<"u",830938:I=>{n.jb("Abs",I,void 0)},830989:I=>{n.jb("Neg",I,void 0)},831040:I=>{n.jb("Floor",I,void 0)},831093:I=>{n.jb("Ceil",I,void 0)},831145:I=>{n.jb("Reciprocal",I,void 0)},831203:I=>{n.jb("Sqrt",I,void 0)},831255:I=>{n.jb("Exp",I,void 0)},831306:I=>{n.jb("Erf",I,void 0)},831357:I=>{n.jb("Sigmoid",I,void 0)},831412:(I,R,Y)=>{n.jb("HardSigmoid",I,{alpha:R,beta:Y})},831491:I=>{n.jb("Log",I,void 0)},831542:I=>{n.jb("Sin",I,void 0)},831593:I=>{n.jb("Cos",I,void 0)},831644:I=>{n.jb("Tan",I,void 0)},831695:I=>{n.jb("Asin",I,void 0)},831747:I=>{n.jb("Acos",I,void 0)},831799:I=>{n.jb("Atan",I,void 0)},831851:I=>{n.jb("Sinh",I,void 0)},831903:I=>{n.jb("Cosh",I,void 0)},831955:I=>{n.jb("Asinh",I,void 0)},832008:I=>{n.jb("Acosh",I,void 0)},832061:I=>{n.jb("Atanh",I,void 0)},832114:I=>{n.jb("Tanh",I,void 0)},832166:I=>{n.jb("Not",I,void 0)},832217:(I,R,Y)=>{n.jb("Clip",I,{min:R,max:Y})},832286:I=>{n.jb("Clip",I,void 0)},832338:(I,R)=>{n.jb("Elu",I,{alpha:R})},832396:I=>{n.jb("Gelu",I,void 0)},832448:I=>{n.jb("Relu",I,void 0)},832500:(I,R)=>{n.jb("LeakyRelu",I,{alpha:R})},832564:(I,R)=>{n.jb("ThresholdedRelu",I,{alpha:R})},832634:(I,R)=>{n.jb("Cast",I,{to:R})},832692:I=>{n.jb("Add",I,void 0)},832743:I=>{n.jb("Sub",I,void 0)},832794:I=>{n.jb("Mul",I,void 0)},832845:I=>{n.jb("Div",I,void 0)},832896:I=>{n.jb("Pow",I,void 0)},832947:I=>{n.jb("Equal",I,void 0)},833e3:I=>{n.jb("Greater",I,void 0)},833055:I=>{n.jb("GreaterOrEqual",I,void 0)},833117:I=>{n.jb("Less",I,void 0)},833169:I=>{n.jb("LessOrEqual",I,void 0)},833228:(I,R,Y,ie,le)=>{n.jb("ReduceMean",I,{keepDims:!!R,noopWithEmptyAxes:!!Y,axes:ie?Array.from(ee().subarray(Number(ie)>>>0,Number(le)>>>0)):[]})},833403:(I,R,Y,ie,le)=>{n.jb("ReduceMax",I,{keepDims:!!R,noopWithEmptyAxes:!!Y,axes:ie?Array.from(ee().subarray(Number(ie)>>>0,Number(le)>>>0)):[]})},833577:(I,R,Y,ie,le)=>{n.jb("ReduceMin",I,{keepDims:!!R,noopWithEmptyAxes:!!Y,axes:ie?Array.from(ee().subarray(Number(ie)>>>0,Number(le)>>>0)):[]})},833751:(I,R,Y,ie,le)=>{n.jb("ReduceProd",I,{keepDims:!!R,noopWithEmptyAxes:!!Y,axes:ie?Array.from(ee().subarray(Number(ie)>>>0,Number(le)>>>0)):[]})},833926:(I,R,Y,ie,le)=>{n.jb("ReduceSum",I,{keepDims:!!R,noopWithEmptyAxes:!!Y,axes:ie?Array.from(ee().subarray(Number(ie)>>>0,Number(le)>>>0)):[]})},834100:(I,R,Y,ie,le)=>{n.jb("ReduceL1",I,{keepDims:!!R,noopWithEmptyAxes:!!Y,axes:ie?Array.from(ee().subarray(Number(ie)>>>0,Number(le)>>>0)):[]})},834273:(I,R,Y,ie,le)=>{n.jb("ReduceL2",I,{keepDims:!!R,noopWithEmptyAxes:!!Y,axes:ie?Array.from(ee().subarray(Number(ie)>>>0,Number(le)>>>0)):[]})},834446:(I,R,Y,ie,le)=>{n.jb("ReduceLogSum",I,{keepDims:!!R,noopWithEmptyAxes:!!Y,axes:ie?Array.from(ee().subarray(Number(ie)>>>0,Number(le)>>>0)):[]})},834623:(I,R,Y,ie,le)=>{n.jb("ReduceSumSquare",I,{keepDims:!!R,noopWithEmptyAxes:!!Y,axes:ie?Array.from(ee().subarray(Number(ie)>>>0,Number(le)>>>0)):[]})},834803:(I,R,Y,ie,le)=>{n.jb("ReduceLogSumExp",I,{keepDims:!!R,noopWithEmptyAxes:!!Y,axes:ie?Array.from(ee().subarray(Number(ie)>>>0,Number(le)>>>0)):[]})},834983:I=>{n.jb("Where",I,void 0)},835036:(I,R,Y)=>{n.jb("Transpose",I,{perm:R?Array.from(ee().subarray(Number(R)>>>0,Number(Y)>>>0)):[]})},835160:(I,R,Y,ie)=>{n.jb("DepthToSpace",I,{blocksize:R,mode:bt(Y),format:ie?"NHWC":"NCHW"})},835293:(I,R,Y,ie)=>{n.jb("DepthToSpace",I,{blocksize:R,mode:bt(Y),format:ie?"NHWC":"NCHW"})},835426:(I,R,Y,ie,le,Se,Ge,rt,pt,Tt,Ft,rr,mr,An,ns)=>{n.jb("ConvTranspose",I,{format:pt?"NHWC":"NCHW",autoPad:R,dilations:[Y],group:ie,kernelShape:[le],pads:[Se,Ge],strides:[rt],wIsConst:()=>!!ce()[Tt>>>0],outputPadding:Ft?Array.from(ee().subarray(Number(Ft)>>>0,Number(rr)>>>0)):[],outputShape:mr?Array.from(ee().subarray(Number(mr)>>>0,Number(An)>>>0)):[],activation:bt(ns)})},835859:(I,R,Y,ie,le,Se,Ge,rt,pt,Tt,Ft,rr,mr,An)=>{n.jb("ConvTranspose",I,{format:rt?"NHWC":"NCHW",autoPad:R,dilations:Array.from(ee().subarray(Number(Y)>>>0,2+(Number(Y)>>>0)>>>0)),group:ie,kernelShape:Array.from(ee().subarray(Number(le)>>>0,2+(Number(le)>>>0)>>>0)),pads:Array.from(ee().subarray(Number(Se)>>>0,4+(Number(Se)>>>0)>>>0)),strides:Array.from(ee().subarray(Number(Ge)>>>0,2+(Number(Ge)>>>0)>>>0)),wIsConst:()=>!!ce()[pt>>>0],outputPadding:Tt?Array.from(ee().subarray(Number(Tt)>>>0,Number(Ft)>>>0)):[],outputShape:rr?Array.from(ee().subarray(Number(rr)>>>0,Number(mr)>>>0)):[],activation:bt(An)})},836520:(I,R,Y,ie,le,Se,Ge,rt,pt,Tt,Ft,rr,mr,An,ns)=>{n.jb("ConvTranspose",I,{format:pt?"NHWC":"NCHW",autoPad:R,dilations:[Y],group:ie,kernelShape:[le],pads:[Se,Ge],strides:[rt],wIsConst:()=>!!ce()[Tt>>>0],outputPadding:Ft?Array.from(ee().subarray(Number(Ft)>>>0,Number(rr)>>>0)):[],outputShape:mr?Array.from(ee().subarray(Number(mr)>>>0,Number(An)>>>0)):[],activation:bt(ns)})},836953:(I,R,Y,ie,le,Se,Ge,rt,pt,Tt,Ft,rr,mr,An)=>{n.jb("ConvTranspose",I,{format:rt?"NHWC":"NCHW",autoPad:R,dilations:Array.from(ee().subarray(Number(Y)>>>0,2+(Number(Y)>>>0)>>>0)),group:ie,kernelShape:Array.from(ee().subarray(Number(le)>>>0,2+(Number(le)>>>0)>>>0)),pads:Array.from(ee().subarray(Number(Se)>>>0,4+(Number(Se)>>>0)>>>0)),strides:Array.from(ee().subarray(Number(Ge)>>>0,2+(Number(Ge)>>>0)>>>0)),wIsConst:()=>!!ce()[pt>>>0],outputPadding:Tt?Array.from(ee().subarray(Number(Tt)>>>0,Number(Ft)>>>0)):[],outputShape:rr?Array.from(ee().subarray(Number(rr)>>>0,Number(mr)>>>0)):[],activation:bt(An)})},837614:(I,R)=>{n.jb("GlobalAveragePool",I,{format:R?"NHWC":"NCHW"})},837705:(I,R,Y,ie,le,Se,Ge,rt,pt,Tt,Ft,rr,mr,An)=>{n.jb("AveragePool",I,{format:An?"NHWC":"NCHW",auto_pad:R,ceil_mode:Y,count_include_pad:ie,storage_order:le,dilations:Se?Array.from(ee().subarray(Number(Se)>>>0,Number(Ge)>>>0)):[],kernel_shape:rt?Array.from(ee().subarray(Number(rt)>>>0,Number(pt)>>>0)):[],pads:Tt?Array.from(ee().subarray(Number(Tt)>>>0,Number(Ft)>>>0)):[],strides:rr?Array.from(ee().subarray(Number(rr)>>>0,Number(mr)>>>0)):[]})},838184:(I,R)=>{n.jb("GlobalAveragePool",I,{format:R?"NHWC":"NCHW"})},838275:(I,R,Y,ie,le,Se,Ge,rt,pt,Tt,Ft,rr,mr,An)=>{n.jb("AveragePool",I,{format:An?"NHWC":"NCHW",auto_pad:R,ceil_mode:Y,count_include_pad:ie,storage_order:le,dilations:Se?Array.from(ee().subarray(Number(Se)>>>0,Number(Ge)>>>0)):[],kernel_shape:rt?Array.from(ee().subarray(Number(rt)>>>0,Number(pt)>>>0)):[],pads:Tt?Array.from(ee().subarray(Number(Tt)>>>0,Number(Ft)>>>0)):[],strides:rr?Array.from(ee().subarray(Number(rr)>>>0,Number(mr)>>>0)):[]})},838754:(I,R)=>{n.jb("GlobalMaxPool",I,{format:R?"NHWC":"NCHW"})},838841:(I,R,Y,ie,le,Se,Ge,rt,pt,Tt,Ft,rr,mr,An)=>{n.jb("MaxPool",I,{format:An?"NHWC":"NCHW",auto_pad:R,ceil_mode:Y,count_include_pad:ie,storage_order:le,dilations:Se?Array.from(ee().subarray(Number(Se)>>>0,Number(Ge)>>>0)):[],kernel_shape:rt?Array.from(ee().subarray(Number(rt)>>>0,Number(pt)>>>0)):[],pads:Tt?Array.from(ee().subarray(Number(Tt)>>>0,Number(Ft)>>>0)):[],strides:rr?Array.from(ee().subarray(Number(rr)>>>0,Number(mr)>>>0)):[]})},839316:(I,R)=>{n.jb("GlobalMaxPool",I,{format:R?"NHWC":"NCHW"})},839403:(I,R,Y,ie,le,Se,Ge,rt,pt,Tt,Ft,rr,mr,An)=>{n.jb("MaxPool",I,{format:An?"NHWC":"NCHW",auto_pad:R,ceil_mode:Y,count_include_pad:ie,storage_order:le,dilations:Se?Array.from(ee().subarray(Number(Se)>>>0,Number(Ge)>>>0)):[],kernel_shape:rt?Array.from(ee().subarray(Number(rt)>>>0,Number(pt)>>>0)):[],pads:Tt?Array.from(ee().subarray(Number(Tt)>>>0,Number(Ft)>>>0)):[],strides:rr?Array.from(ee().subarray(Number(rr)>>>0,Number(mr)>>>0)):[]})},839878:(I,R,Y,ie,le)=>{n.jb("Gemm",I,{alpha:R,beta:Y,transA:ie,transB:le})},839982:I=>{n.jb("MatMul",I,void 0)},840036:(I,R,Y,ie)=>{n.jb("ArgMax",I,{keepDims:!!R,selectLastIndex:!!Y,axis:ie})},840144:(I,R,Y,ie)=>{n.jb("ArgMin",I,{keepDims:!!R,selectLastIndex:!!Y,axis:ie})},840252:(I,R)=>{n.jb("Softmax",I,{axis:R})},840315:(I,R)=>{n.jb("Concat",I,{axis:R})},840375:(I,R,Y,ie,le)=>{n.jb("Split",I,{axis:R,numOutputs:Y,splitSizes:ie?Array.from(ee().subarray(Number(ie)>>>0,Number(le)>>>0)):[]})},840531:I=>{n.jb("Expand",I,void 0)},840585:(I,R)=>{n.jb("Gather",I,{axis:Number(R)})},840656:(I,R)=>{n.jb("GatherElements",I,{axis:Number(R)})},840735:(I,R)=>{n.jb("GatherND",I,{batch_dims:Number(R)})},840814:(I,R,Y,ie,le,Se,Ge,rt,pt,Tt,Ft)=>{n.jb("Resize",I,{antialias:R,axes:Y?Array.from(ee().subarray(Number(Y)>>>0,Number(ie)>>>0)):[],coordinateTransformMode:bt(le),cubicCoeffA:Se,excludeOutside:Ge,extrapolationValue:rt,keepAspectRatioPolicy:bt(pt),mode:bt(Tt),nearestMode:bt(Ft)})},841176:(I,R,Y,ie,le,Se,Ge)=>{n.jb("Slice",I,{starts:R?Array.from(ee().subarray(Number(R)>>>0,Number(Y)>>>0)):[],ends:ie?Array.from(ee().subarray(Number(ie)>>>0,Number(le)>>>0)):[],axes:Se?Array.from(ee().subarray(Number(Se)>>>0,Number(Ge)>>>0)):[]})},841440:I=>{n.jb("Tile",I,void 0)},841492:(I,R,Y)=>{n.jb("InstanceNormalization",I,{epsilon:R,format:Y?"NHWC":"NCHW"})},841606:(I,R,Y)=>{n.jb("InstanceNormalization",I,{epsilon:R,format:Y?"NHWC":"NCHW"})},841720:I=>{n.jb("Range",I,void 0)},841773:(I,R)=>{n.jb("Einsum",I,{equation:bt(R)})},841854:(I,R,Y,ie,le)=>{n.jb("Pad",I,{mode:R,value:Y,pads:ie?Array.from(ee().subarray(Number(ie)>>>0,Number(le)>>>0)):[]})},841997:(I,R,Y,ie,le,Se)=>{n.jb("BatchNormalization",I,{epsilon:R,momentum:Y,spatial:!!le,trainingMode:!!ie,format:Se?"NHWC":"NCHW"})},842166:(I,R,Y,ie,le,Se)=>{n.jb("BatchNormalization",I,{epsilon:R,momentum:Y,spatial:!!le,trainingMode:!!ie,format:Se?"NHWC":"NCHW"})},842335:(I,R,Y)=>{n.jb("CumSum",I,{exclusive:Number(R),reverse:Number(Y)})},842432:(I,R,Y)=>{n.jb("DequantizeLinear",I,{axis:R,blockSize:Y})},842522:(I,R,Y,ie,le)=>{n.jb("GridSample",I,{align_corners:R,mode:bt(Y),padding_mode:bt(ie),format:le?"NHWC":"NCHW"})},842692:(I,R,Y,ie,le)=>{n.jb("GridSample",I,{align_corners:R,mode:bt(Y),padding_mode:bt(ie),format:le?"NHWC":"NCHW"})},842862:(I,R)=>{n.jb("ScatterND",I,{reduction:bt(R)})},842947:(I,R,Y,ie,le,Se,Ge,rt,pt)=>{n.jb("Attention",I,{numHeads:R,isUnidirectional:Y,maskFilterValue:ie,scale:le,doRotary:Se,qkvHiddenSizes:Ge?Array.from(ee().subarray(Number(rt)>>>0,Number(rt)+Ge>>>0)):[],pastPresentShareBuffer:!!pt})},843219:I=>{n.jb("BiasAdd",I,void 0)},843274:I=>{n.jb("BiasSplitGelu",I,void 0)},843335:I=>{n.jb("FastGelu",I,void 0)},843391:(I,R,Y,ie,le,Se,Ge,rt,pt,Tt,Ft,rr,mr,An,ns,wd)=>{n.jb("Conv",I,{format:rr?"NHWC":"NCHW",auto_pad:R,dilations:Y?Array.from(ee().subarray(Number(Y)>>>0,Number(ie)>>>0)):[],group:le,kernel_shape:Se?Array.from(ee().subarray(Number(Se)>>>0,Number(Ge)>>>0)):[],pads:rt?Array.from(ee().subarray(Number(rt)>>>0,Number(pt)>>>0)):[],strides:Tt?Array.from(ee().subarray(Number(Tt)>>>0,Number(Ft)>>>0)):[],w_is_const:()=>!!ce()[Number(mr)>>>0],activation:bt(An),activation_params:ns?Array.from(Oe().subarray(Number(ns)>>>0,Number(wd)>>>0)):[]})},843975:I=>{n.jb("Gelu",I,void 0)},844027:(I,R,Y,ie,le,Se,Ge,rt,pt)=>{n.jb("GroupQueryAttention",I,{numHeads:R,kvNumHeads:Y,scale:ie,softcap:le,doRotary:Se,rotaryInterleaved:Ge,smoothSoftmax:rt,localWindowSize:pt})},844244:(I,R,Y,ie)=>{n.jb("LayerNormalization",I,{axis:R,epsilon:Y,simplified:!!ie})},844355:(I,R,Y,ie)=>{n.jb("LayerNormalization",I,{axis:R,epsilon:Y,simplified:!!ie})},844466:(I,R,Y,ie,le,Se)=>{n.jb("MatMulNBits",I,{k:R,n:Y,accuracyLevel:ie,bits:le,blockSize:Se})},844593:(I,R,Y,ie,le,Se)=>{n.jb("MultiHeadAttention",I,{numHeads:R,isUnidirectional:Y,maskFilterValue:ie,scale:le,doRotary:Se})},844752:(I,R)=>{n.jb("QuickGelu",I,{alpha:R})},844816:(I,R,Y,ie,le)=>{n.jb("RotaryEmbedding",I,{interleaved:!!R,numHeads:Y,rotaryEmbeddingDim:ie,scale:le})},844955:(I,R,Y)=>{n.jb("SkipLayerNormalization",I,{epsilon:R,simplified:!!Y})},845057:(I,R,Y)=>{n.jb("SkipLayerNormalization",I,{epsilon:R,simplified:!!Y})},845159:(I,R,Y,ie)=>{n.jb("GatherBlockQuantized",I,{gatherAxis:R,quantizeAxis:Y,blockSize:ie})},845280:I=>{n.Zb(I)},845314:(I,R)=>n.ac(Number(I),Number(R),n.Fb.dc,n.Fb.errors)};function He(I,R,Y){return bs(async()=>{await n.Xb(Number(I),Number(R),Number(Y))})}function Qe(){return typeof wasmOffsetConverter<"u"}class et{name="ExitStatus";constructor(R){this.message=`Program terminated with exit(${R})`,this.status=R}}var ot=I=>{I.terminate(),I.onmessage=()=>{}},Xe=[],lt=I=>{Ze.length==0&&(hi(),jt(Ze[0]));var R=Ze.pop();if(!R)return 6;Pt.push(R),Rt[I.Ab]=R,R.Ab=I.Ab;var Y={Bb:"run",fc:I.ec,Hb:I.Hb,Ab:I.Ab};return R.postMessage(Y,I.Mb),0},_t=0,dt=(I,R,...Y)=>{for(var ie=2*Y.length,le=rc(),Se=Wl(8*ie),Ge=Se>>>3,rt=0;rt<Y.length;rt++){var pt=Y[rt];typeof pt=="bigint"?(K[Ge+2*rt]=1n,K[Ge+2*rt+1]=pt):(K[Ge+2*rt]=0n,xe()[Ge+2*rt+1>>>0]=pt)}return I=Bl(I,0,ie,Se,R),Vl(le),I};function xt(I){if(a)return dt(0,1,I);if(P=I,!(0<_t)){for(var R of Pt)ot(R);for(R of Ze)ot(R);Ze=[],Pt=[],Rt={},W=!0}g(0,new et(I))}function gt(I){if(a)return dt(1,0,I);We(I)}var We=I=>{if(P=I,a)throw gt(I),"unwind";xt(I)},Ze=[],Pt=[],Zt=[],Rt={},Kr=I=>{var R=I.Ab;delete Rt[R],Ze.push(I),Pt.splice(Pt.indexOf(I),1),I.Ab=0,Fa(R)};function gn(){Zt.forEach(I=>I())}var jt=I=>new Promise(R=>{I.onmessage=le=>{var Se=(le=le.data).Bb;if(le.Gb&&le.Gb!=xs()){var Ge=Rt[le.Gb];Ge?Ge.postMessage(le,le.Mb):S(`Internal error! Worker sent a message "${Se}" to target pthread ${le.Gb}, but that thread no longer exists!`)}else Se==="checkMailbox"?Re():Se==="spawnThread"?lt(le):Se==="cleanupThread"?Kr(Rt[le.hc]):Se==="loaded"?(I.loaded=!0,R(I)):Se==="alert"?alert(`Thread ${le.ic}: ${le.text}`):le.target==="setimmediate"?I.postMessage(le):Se==="callHandler"?n[le.Qb](...le.args):Se&&S(`worker sent an unknown command ${Se}`)},I.onerror=le=>{throw S(`worker sent an error! ${le.filename}:${le.lineno}: ${le.message}`),le};var Y,ie=[];for(Y of[])n.propertyIsEnumerable(Y)&&ie.push(Y);I.postMessage({Bb:"load",Rb:ie,kc:M,lc:T})});function hi(){var I=new Worker((()=>{let R=URL;return import.meta.url>"file:"&&import.meta.url<"file;"?new R("ort.bundle.min.mjs",import.meta.url):new URL(import.meta.url)})(),{type:"module",workerData:"em-pthread",name:"em-pthread"});Ze.push(I)}var Z=I=>{he();var R=pe()[I+52>>>2>>>0];I=pe()[I+56>>>2>>>0],_d(R,R-I),Vl(R)},be=(I,R)=>{_t=0,I=bd(I,R),0<_t?P=I:zl(I)};class se{constructor(R){this.Ib=R-24}}function we(I,R,Y){var ie=new se(I>>>=0);throw R>>>=0,Y>>>=0,pe()[ie.Ib+16>>>2>>>0]=0,pe()[ie.Ib+4>>>2>>>0]=R,pe()[ie.Ib+8>>>2>>>0]=Y,I}function je(I,R,Y,ie){return a?dt(2,1,I,R,Y,ie):Je(I,R,Y,ie)}function Je(I,R,Y,ie){if(I>>>=0,Y>>>=0,ie>>>=0,l===void 0)return 6;var le=[];return a&&le.length===0?je(I,R>>>=0,Y,ie):(I={ec:Y,Ab:I,Hb:ie,Mb:le},a?(I.Bb="spawnThread",postMessage(I,le),0):lt(I))}var Be=typeof TextDecoder<"u"?new TextDecoder:void 0,Nt=(I,R=0,Y=NaN)=>{var ie=(R>>>=0)+Y;for(Y=R;I[Y]&&!(Y>=ie);)++Y;if(16<Y-R&&I.buffer&&Be)return Be.decode(I.buffer instanceof ArrayBuffer?I.subarray(R,Y):I.slice(R,Y));for(ie="";R<Y;){var le=I[R++];if(128&le){var Se=63&I[R++];if((224&le)==192)ie+=String.fromCharCode((31&le)<<6|Se);else{var Ge=63&I[R++];65536>(le=(240&le)==224?(15&le)<<12|Se<<6|Ge:(7&le)<<18|Se<<12|Ge<<6|63&I[R++])?ie+=String.fromCharCode(le):(le-=65536,ie+=String.fromCharCode(55296|le>>10,56320|1023&le))}}else ie+=String.fromCharCode(le)}return ie},bt=(I,R)=>(I>>>=0)?Nt(D(),I,R):"";function wt(I,R,Y){return a?dt(3,1,I,R,Y):0}function Rr(I,R){if(a)return dt(4,1,I,R)}var sr=I=>{for(var R=0,Y=0;Y<I.length;++Y){var ie=I.charCodeAt(Y);127>=ie?R++:2047>=ie?R+=2:55296<=ie&&57343>=ie?(R+=4,++Y):R+=3}return R},kr=(I,R,Y)=>{var ie=D();if(R>>>=0,0<Y){var le=R;Y=R+Y-1;for(var Se=0;Se<I.length;++Se){var Ge=I.charCodeAt(Se);if(55296<=Ge&&57343>=Ge&&(Ge=65536+((1023&Ge)<<10)|1023&I.charCodeAt(++Se)),127>=Ge){if(R>=Y)break;ie[R++>>>0]=Ge}else{if(2047>=Ge){if(R+1>=Y)break;ie[R++>>>0]=192|Ge>>6}else{if(65535>=Ge){if(R+2>=Y)break;ie[R++>>>0]=224|Ge>>12}else{if(R+3>=Y)break;ie[R++>>>0]=240|Ge>>18,ie[R++>>>0]=128|Ge>>12&63}ie[R++>>>0]=128|Ge>>6&63}ie[R++>>>0]=128|63&Ge}}ie[R>>>0]=0,I=R-le}else I=0;return I};function Pr(I,R){if(a)return dt(5,1,I,R)}function Rn(I,R,Y){if(a)return dt(6,1,I,R,Y)}function Lr(I,R,Y){return a?dt(7,1,I,R,Y):0}function Tn(I,R){if(a)return dt(8,1,I,R)}function Pi(I,R,Y){if(a)return dt(9,1,I,R,Y)}function Bi(I,R,Y,ie){if(a)return dt(10,1,I,R,Y,ie)}function zi(I,R,Y,ie){if(a)return dt(11,1,I,R,Y,ie)}function no(I,R,Y,ie){if(a)return dt(12,1,I,R,Y,ie)}function Ei(I){if(a)return dt(13,1,I)}function io(I,R){if(a)return dt(14,1,I,R)}function Wn(I,R,Y){if(a)return dt(15,1,I,R,Y)}var vs,ri,zo=()=>Ne(""),Ur=I=>{for(var R="";D()[I>>>0];)R+=vs[D()[I++>>>0]];return R},es={},ts={};function Kn(I,R,Y={}){return(function(ie,le,Se={}){var Ge=le.name;if(!ie)throw new ri(`type "${Ge}" must have a positive integer typeid pointer`);if(ts.hasOwnProperty(ie)){if(Se.Sb)return;throw new ri(`Cannot register type '${Ge}' twice`)}ts[ie]=le,es.hasOwnProperty(ie)&&(le=es[ie],delete es[ie],le.forEach(rt=>rt()))})(I,R,Y)}var Ci=(I,R,Y)=>{switch(R){case 1:return Y?ie=>ce()[ie>>>0]:ie=>D()[ie>>>0];case 2:return Y?ie=>U()[ie>>>1>>>0]:ie=>te()[ie>>>1>>>0];case 4:return Y?ie=>ee()[ie>>>2>>>0]:ie=>pe()[ie>>>2>>>0];case 8:return Y?ie=>K[ie>>>3]:ie=>J[ie>>>3];default:throw new TypeError(`invalid integer width (${R}): ${I}`)}};function it(I,R,Y){Y>>>=0,Kn(I>>>=0,{name:R=Ur(R>>>0),fromWireType:ie=>ie,toWireType:function(ie,le){if(typeof le!="bigint"&&typeof le!="number")throw le=le===null?"null":(ie=typeof le)=="object"||ie==="array"||ie==="function"?le.toString():""+le,new TypeError(`Cannot convert "${le}" to ${this.name}`);return typeof le=="number"&&(le=BigInt(le)),le},Cb:nt,readValueFromPointer:Ci(R,Y,R.indexOf("u")==-1),Db:null})}var nt=8;function At(I,R,Y,ie){Kn(I>>>=0,{name:R=Ur(R>>>0),fromWireType:function(le){return!!le},toWireType:function(le,Se){return Se?Y:ie},Cb:nt,readValueFromPointer:function(le){return this.fromWireType(D()[le>>>0])},Db:null})}var vn=[],pi=[];function ys(I){9<(I>>>=0)&&--pi[I+1]==0&&(pi[I]=void 0,vn.push(I))}var dn=I=>{if(!I)throw new ri("Cannot use deleted val. handle = "+I);return pi[I]},Gn=I=>{switch(I){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let R=vn.pop()||pi.length;return pi[R]=I,pi[R+1]=1,R}};function _s(I){return this.fromWireType(pe()[I>>>2>>>0])}var mi={name:"emscripten::val",fromWireType:I=>{var R=dn(I);return ys(I),R},toWireType:(I,R)=>Gn(R),Cb:nt,readValueFromPointer:_s,Db:null};function xl(I){return Kn(I>>>0,mi)}var Sn=(I,R)=>{switch(R){case 4:return function(Y){return this.fromWireType(Oe()[Y>>>2>>>0])};case 8:return function(Y){return this.fromWireType(xe()[Y>>>3>>>0])};default:throw new TypeError(`invalid float width (${R}): ${I}`)}};function Ml(I,R,Y){Y>>>=0,Kn(I>>>=0,{name:R=Ur(R>>>0),fromWireType:ie=>ie,toWireType:(ie,le)=>le,Cb:nt,readValueFromPointer:Sn(R,Y),Db:null})}function Tl(I,R,Y,ie,le){if(I>>>=0,Y>>>=0,R=Ur(R>>>0),le===-1&&(le=4294967295),le=rt=>rt,ie===0){var Se=32-8*Y;le=rt=>rt<<Se>>>Se}var Ge=R.includes("unsigned")?function(rt,pt){return pt>>>0}:function(rt,pt){return pt};Kn(I,{name:R,fromWireType:le,toWireType:Ge,Cb:nt,readValueFromPointer:Ci(R,Y,ie!==0),Db:null})}function Sl(I,R,Y){function ie(Se){var Ge=pe()[Se>>>2>>>0];return Se=pe()[Se+4>>>2>>>0],new le(ce().buffer,Se,Ge)}var le=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][R];Kn(I>>>=0,{name:Y=Ur(Y>>>0),fromWireType:ie,Cb:nt,readValueFromPointer:ie},{Sb:!0})}function so(I,R){Kn(I>>>=0,{name:R=Ur(R>>>0),fromWireType:function(Y){for(var ie,le=pe()[Y>>>2>>>0],Se=Y+4,Ge=Se,rt=0;rt<=le;++rt){var pt=Se+rt;rt!=le&&D()[pt>>>0]!=0||(Ge=bt(Ge,pt-Ge),ie===void 0?ie=Ge:(ie+="\0",ie+=Ge),Ge=pt+1)}return rs(Y),ie},toWireType:function(Y,ie){ie instanceof ArrayBuffer&&(ie=new Uint8Array(ie));var le=typeof ie=="string";if(!(le||ie instanceof Uint8Array||ie instanceof Uint8ClampedArray||ie instanceof Int8Array))throw new ri("Cannot pass non-string to std::string");var Se=le?sr(ie):ie.length,Ge=fo(4+Se+1),rt=Ge+4;if(pe()[Ge>>>2>>>0]=Se,le)kr(ie,rt,Se+1);else if(le)for(le=0;le<Se;++le){var pt=ie.charCodeAt(le);if(255<pt)throw rs(Ge),new ri("String has UTF-16 code units that do not fit in 8 bits");D()[rt+le>>>0]=pt}else for(le=0;le<Se;++le)D()[rt+le>>>0]=ie[le];return Y!==null&&Y.push(rs,Ge),Ge},Cb:nt,readValueFromPointer:_s,Db(Y){rs(Y)}})}var Ns=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Ui=(I,R)=>{for(var Y=I>>1,ie=Y+R/2;!(Y>=ie)&&te()[Y>>>0];)++Y;if(32<(Y<<=1)-I&&Ns)return Ns.decode(D().slice(I,Y));for(Y="",ie=0;!(ie>=R/2);++ie){var le=U()[I+2*ie>>>1>>>0];if(le==0)break;Y+=String.fromCharCode(le)}return Y},oo=(I,R,Y)=>{if(Y??=2147483647,2>Y)return 0;var ie=R;Y=(Y-=2)<2*I.length?Y/2:I.length;for(var le=0;le<Y;++le){var Se=I.charCodeAt(le);U()[R>>>1>>>0]=Se,R+=2}return U()[R>>>1>>>0]=0,R-ie},Pl=I=>2*I.length,El=(I,R)=>{for(var Y=0,ie="";!(Y>=R/4);){var le=ee()[I+4*Y>>>2>>>0];if(le==0)break;++Y,65536<=le?(le-=65536,ie+=String.fromCharCode(55296|le>>10,56320|1023&le)):ie+=String.fromCharCode(le)}return ie},Uo=(I,R,Y)=>{if(R>>>=0,Y??=2147483647,4>Y)return 0;var ie=R;Y=ie+Y-4;for(var le=0;le<I.length;++le){var Se=I.charCodeAt(le);if(55296<=Se&&57343>=Se&&(Se=65536+((1023&Se)<<10)|1023&I.charCodeAt(++le)),ee()[R>>>2>>>0]=Se,(R+=4)+4>Y)break}return ee()[R>>>2>>>0]=0,R-ie},ao=I=>{for(var R=0,Y=0;Y<I.length;++Y){var ie=I.charCodeAt(Y);55296<=ie&&57343>=ie&&++Y,R+=4}return R};function ke(I,R,Y){if(I>>>=0,R>>>=0,Y=Ur(Y>>>=0),R===2)var ie=Ui,le=oo,Se=Pl,Ge=rt=>te()[rt>>>1>>>0];else R===4&&(ie=El,le=Uo,Se=ao,Ge=rt=>pe()[rt>>>2>>>0]);Kn(I,{name:Y,fromWireType:rt=>{for(var pt,Tt=pe()[rt>>>2>>>0],Ft=rt+4,rr=0;rr<=Tt;++rr){var mr=rt+4+rr*R;rr!=Tt&&Ge(mr)!=0||(Ft=ie(Ft,mr-Ft),pt===void 0?pt=Ft:(pt+="\0",pt+=Ft),Ft=mr+R)}return rs(rt),pt},toWireType:(rt,pt)=>{if(typeof pt!="string")throw new ri(`Cannot pass non-string to C++ string type ${Y}`);var Tt=Se(pt),Ft=fo(4+Tt+R);return pe()[Ft>>>2>>>0]=Tt/R,le(pt,Ft+4,Tt+R),rt!==null&&rt.push(rs,Ft),Ft},Cb:nt,readValueFromPointer:_s,Db(rt){rs(rt)}})}function q(I,R){Kn(I>>>=0,{Tb:!0,name:R=Ur(R>>>0),Cb:0,fromWireType:()=>{},toWireType:()=>{}})}function de(I){Fl(I>>>0,!o,1,!s,131072,!1),gn()}var _e=I=>{if(!W)try{if(I(),!(0<_t))try{a?zl(P):We(P)}catch(R){R instanceof et||R=="unwind"||g(0,R)}}catch(R){R instanceof et||R=="unwind"||g(0,R)}};function ve(I){I>>>=0,typeof Atomics.jc=="function"&&(Atomics.jc(ee(),I>>>2,I).value.then(Re),I+=128,Atomics.store(ee(),I>>>2,1))}var Re=()=>{var I=xs();I&&(ve(I),_e(Ul))};function Ke(I,R){(I>>>=0)==R>>>0?setTimeout(Re):a?postMessage({Gb:I,Bb:"checkMailbox"}):(I=Rt[I])&&I.postMessage({Bb:"checkMailbox"})}var ft=[];function mt(I,R,Y,ie,le){for(R>>>=0,ie/=2,ft.length=ie,Y=le>>>0>>>3,le=0;le<ie;le++)ft[le]=K[Y+2*le]?K[Y+2*le+1]:xe()[Y+2*le+1>>>0];return(R?Ve[R]:Ju[I])(...ft)}var vt=()=>{_t=0};function ut(I){I>>>=0,a?postMessage({Bb:"cleanupThread",hc:I}):Kr(Rt[I])}function tr(I){}var Lt=(I,R)=>{var Y=ts[I];if(Y===void 0)throw I=Zu(I),Y=Ur(I),rs(I),new ri(`${R} has unknown type ${Y}`);return Y},dr=(I,R,Y)=>{var ie=[];return I=I.toWireType(ie,Y),ie.length&&(pe()[R>>>2>>>0]=Gn(ie)),I};function Fr(I,R,Y){return R>>>=0,Y>>>=0,I=dn(I>>>0),R=Lt(R,"emval::as"),dr(R,Y,I)}function wr(I,R){return R>>>=0,I=dn(I>>>0),(R=Lt(R,"emval::as")).toWireType(null,I)}var Xr=I=>{try{I()}catch(R){Ne(R)}},pr=0,Ar=null,lo=0,Pn=[],Ai={},Ir={},En=0,Cn=null,Vi=[];function bs(I){return(function(R){if(!W){if(pr===0){var Y=!1,ie=!1;R((le=0)=>{if(!W&&(lo=le,Y=!0,ie)){pr=2,Xr(()=>nc(Ar)),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.resume(),le=!1;try{var Se=(function(){var pt=ee()[Ar+8>>>2>>>0];return pt=kt[Ir[pt]],--_t,pt()})()}catch(pt){Se=pt,le=!0}var Ge=!1;if(!Ar){var rt=Cn;rt&&(Cn=null,(le?rt.reject:rt.resolve)(Se),Ge=!0)}if(le&&!Ge)throw Se}}),ie=!0,Y||(pr=1,Ar=(function(){var le=fo(65548),Se=le+12;pe()[le>>>2>>>0]=Se,pe()[le+4>>>2>>>0]=Se+65536,Se=Pn[0];var Ge=Ai[Se];return Ge===void 0&&(Ge=En++,Ai[Se]=Ge,Ir[Ge]=Se),Se=Ge,ee()[le+8>>>2>>>0]=Se,le})(),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.pause(),Xr(()=>vi(Ar)))}else pr===2?(pr=0,Xr(Gl),rs(Ar),Ar=null,Vi.forEach(_e)):Ne(`invalid state: ${pr}`);return lo}})(R=>{I().then(R)})}function yn(I){return I>>>=0,bs(async()=>{var R=await dn(I);return Gn(R)})}var fn=[];function Yr(I,R,Y,ie){return Y>>>=0,ie>>>=0,(I=fn[I>>>0])(null,R=dn(R>>>0),Y,ie)}var Vr={},Qr=I=>{var R=Vr[I];return R===void 0?Ur(I):R};function _n(I,R,Y,ie,le){return Y>>>=0,ie>>>=0,le>>>=0,(I=fn[I>>>0])(R=dn(R>>>0),R[Y=Qr(Y)],ie,le)}var Xn=()=>typeof globalThis=="object"?globalThis:Function("return this")();function Oi(I){return(I>>>=0)==0?Gn(Xn()):(I=Qr(I),Gn(Xn()[I]))}var $a=I=>{var R=fn.length;return fn.push(I),R},ud=(I,R)=>{for(var Y=Array(I),ie=0;ie<I;++ie)Y[ie]=Lt(pe()[R+4*ie>>>2>>>0],"parameter "+ie);return Y},ws=(I,R)=>Object.defineProperty(R,"name",{value:I});function zu(I,R,Y){var ie=(R=ud(I,R>>>0)).shift();I--;var le=`return function (obj, func, destructorsRef, args) {
`,Se=0,Ge=[];Y===0&&Ge.push("obj");for(var rt=["retType"],pt=[ie],Tt=0;Tt<I;++Tt)Ge.push("arg"+Tt),rt.push("argType"+Tt),pt.push(R[Tt]),le+=`  var arg${Tt} = argType${Tt}.readValueFromPointer(args${Se?"+"+Se:""});
`,Se+=R[Tt].Cb;return le+=`  var rv = ${Y===1?"new func":"func.call"}(${Ge.join(", ")});
`,ie.Tb||(rt.push("emval_returnValue"),pt.push(dr),le+=`  return emval_returnValue(retType, destructorsRef, rv);
`),rt.push(le+`};
`),I=(function(Ft){var rr=Function;if(!(rr instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof rr} which is not a function`);var mr=ws(rr.name||"unknownFunctionName",function(){});return mr.prototype=rr.prototype,mr=new mr,(Ft=rr.apply(mr,Ft))instanceof Object?Ft:mr})(rt)(...pt),Y=`methodCaller<(${R.map(Ft=>Ft.name).join(", ")}) => ${ie.name}>`,$a(ws(Y,I))}function Cl(I){return I=Qr(I>>>0),Gn(n[I])}function Vo(I,R){return R>>>=0,I=dn(I>>>0),R=dn(R),Gn(I[R])}function Al(I){9<(I>>>=0)&&(pi[I+1]+=1)}function Ol(){return Gn([])}function cd(I){I=dn(I>>>0);for(var R=Array(I.length),Y=0;Y<I.length;Y++)R[Y]=I[Y];return Gn(R)}function gi(I){return Gn(Qr(I>>>0))}function Wo(){return Gn({})}function kl(I){for(var R=dn(I>>>=0);R.length;){var Y=R.pop();R.pop()(Y)}ys(I)}function Na(I,R,Y){R>>>=0,Y>>>=0,I=dn(I>>>0),R=dn(R),Y=dn(Y),I[R]=Y}function gh(I,R){return R>>>=0,I=(I=Lt(I>>>0,"_emval_take_value")).readValueFromPointer(R),Gn(I)}function Il(I,R){I=-9007199254740992>I||9007199254740992<I?NaN:Number(I),R>>>=0,I=new Date(1e3*I),ee()[R>>>2>>>0]=I.getUTCSeconds(),ee()[R+4>>>2>>>0]=I.getUTCMinutes(),ee()[R+8>>>2>>>0]=I.getUTCHours(),ee()[R+12>>>2>>>0]=I.getUTCDate(),ee()[R+16>>>2>>>0]=I.getUTCMonth(),ee()[R+20>>>2>>>0]=I.getUTCFullYear()-1900,ee()[R+24>>>2>>>0]=I.getUTCDay(),I=(I.getTime()-Date.UTC(I.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,ee()[R+28>>>2>>>0]=I}var jl=I=>I%4==0&&(I%100!=0||I%400==0),uo=[0,31,60,91,121,152,182,213,244,274,305,335],Da=[0,31,59,90,120,151,181,212,243,273,304,334];function Uu(I,R){I=-9007199254740992>I||9007199254740992<I?NaN:Number(I),R>>>=0,I=new Date(1e3*I),ee()[R>>>2>>>0]=I.getSeconds(),ee()[R+4>>>2>>>0]=I.getMinutes(),ee()[R+8>>>2>>>0]=I.getHours(),ee()[R+12>>>2>>>0]=I.getDate(),ee()[R+16>>>2>>>0]=I.getMonth(),ee()[R+20>>>2>>>0]=I.getFullYear()-1900,ee()[R+24>>>2>>>0]=I.getDay();var Y=(jl(I.getFullYear())?uo:Da)[I.getMonth()]+I.getDate()-1|0;ee()[R+28>>>2>>>0]=Y,ee()[R+36>>>2>>>0]=-60*I.getTimezoneOffset(),Y=new Date(I.getFullYear(),6,1).getTimezoneOffset();var ie=new Date(I.getFullYear(),0,1).getTimezoneOffset();I=0|(Y!=ie&&I.getTimezoneOffset()==Math.min(ie,Y)),ee()[R+32>>>2>>>0]=I}function wg(I){I>>>=0;var R=new Date(ee()[I+20>>>2>>>0]+1900,ee()[I+16>>>2>>>0],ee()[I+12>>>2>>>0],ee()[I+8>>>2>>>0],ee()[I+4>>>2>>>0],ee()[I>>>2>>>0],0),Y=ee()[I+32>>>2>>>0],ie=R.getTimezoneOffset(),le=new Date(R.getFullYear(),6,1).getTimezoneOffset(),Se=new Date(R.getFullYear(),0,1).getTimezoneOffset(),Ge=Math.min(Se,le);return 0>Y?ee()[I+32>>>2>>>0]=+(le!=Se&&Ge==ie):0<Y!=(Ge==ie)&&(le=Math.max(Se,le),R.setTime(R.getTime()+6e4*((0<Y?Ge:le)-ie))),ee()[I+24>>>2>>>0]=R.getDay(),Y=(jl(R.getFullYear())?uo:Da)[R.getMonth()]+R.getDate()-1|0,ee()[I+28>>>2>>>0]=Y,ee()[I>>>2>>>0]=R.getSeconds(),ee()[I+4>>>2>>>0]=R.getMinutes(),ee()[I+8>>>2>>>0]=R.getHours(),ee()[I+12>>>2>>>0]=R.getDate(),ee()[I+16>>>2>>>0]=R.getMonth(),ee()[I+20>>>2>>>0]=R.getYear(),I=R.getTime(),BigInt(isNaN(I)?-1:I/1e3)}function dd(I,R,Y,ie,le,Se,Ge){return a?dt(16,1,I,R,Y,ie,le,Se,Ge):-52}function Vu(I,R,Y,ie,le,Se){if(a)return dt(17,1,I,R,Y,ie,le,Se)}var Ds={},Wu=()=>performance.timeOrigin+performance.now();function fd(I,R){if(a)return dt(18,1,I,R);if(Ds[I]&&(clearTimeout(Ds[I].id),delete Ds[I]),!R)return 0;var Y=setTimeout(()=>{delete Ds[I],_e(()=>tc(I,performance.timeOrigin+performance.now()))},R);return Ds[I]={id:Y,qc:R},0}function vh(I,R,Y,ie){I>>>=0,R>>>=0,Y>>>=0,ie>>>=0;var le=new Date().getFullYear(),Se=new Date(le,0,1).getTimezoneOffset();le=new Date(le,6,1).getTimezoneOffset();var Ge=Math.max(Se,le);pe()[I>>>2>>>0]=60*Ge,ee()[R>>>2>>>0]=+(Se!=le),I=(R=rt=>{var pt=Math.abs(rt);return`UTC${0<=rt?"-":"+"}${String(Math.floor(pt/60)).padStart(2,"0")}${String(pt%60).padStart(2,"0")}`})(Se),R=R(le),le<Se?(kr(I,Y,17),kr(R,ie,17)):(kr(I,ie,17),kr(R,Y,17))}var yh=()=>Date.now();function _h(I,R,Y){return 0<=I&&3>=I?(I===0?I=Date.now():I=performance.timeOrigin+performance.now(),K[Y>>>0>>>3]=BigInt(Math.round(1e6*I)),0):28}var $l=[],hd=(I,R)=>{$l.length=0;for(var Y;Y=D()[I++>>>0];){var ie=Y!=105;R+=(ie&=Y!=112)&&R%8?4:0,$l.push(Y==112?pe()[R>>>2>>>0]:Y==106?K[R>>>3]:Y==105?ee()[R>>>2>>>0]:xe()[R>>>3>>>0]),R+=ie?8:4}return $l};function bh(I,R,Y){return I>>>=0,R=hd(R>>>0,Y>>>0),Ve[I](...R)}function wh(I,R,Y){return I>>>=0,R=hd(R>>>0,Y>>>0),Ve[I](...R)}var pd=()=>{};function Gu(I,R){return S(bt(I>>>0,R>>>0))}var qu=()=>{throw _t+=1,"unwind"};function md(){return 4294901760}var xh=()=>navigator.hardwareConcurrency;function Hu(){return Ne("Cannot use emscripten_pc_get_function without -sUSE_OFFSET_CONVERTER"),0}function Go(I){I>>>=0;var R=D().length;if(I<=R||4294901760<I)return!1;for(var Y=1;4>=Y;Y*=2){var ie=R*(1+.2/Y);ie=Math.min(ie,I+100663296);e:{ie=(Math.min(4294901760,65536*Math.ceil(Math.max(I,ie)/65536))-M.buffer.byteLength+65535)/65536|0;try{M.grow(ie),he();var le=1;break e}catch{}le=void 0}if(le)return!0}return!1}var Nl=()=>(Ne("Cannot use convertFrameToPC (needed by __builtin_return_address) without -sUSE_OFFSET_CONVERTER"),0),Dl={},gd=I=>{I.forEach(R=>{Nl()})};function xg(){var I=Error().stack.toString().split(`
`);return I[0]=="Error"&&I.shift(),gd(I),Dl.Lb=Nl(),Dl.cc=I,Dl.Lb}function Mh(I,R,Y){if(I>>>=0,R>>>=0,Dl.Lb==I)var ie=Dl.cc;else(ie=Error().stack.toString().split(`
`))[0]=="Error"&&ie.shift(),gd(ie);for(var le=3;ie[le]&&Nl()!=I;)++le;for(I=0;I<Y&&ie[I+le];++I)ee()[R+4*I>>>2>>>0]=Nl();return I}var Rl,Ra={},qo=()=>{if(!Rl){var I,R={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(I in Ra)Ra[I]===void 0?delete R[I]:R[I]=Ra[I];var Y=[];for(I in R)Y.push(`${I}=${R[I]}`);Rl=Y}return Rl};function vd(I,R){if(a)return dt(19,1,I,R);I>>>=0,R>>>=0;var Y=0;return qo().forEach((ie,le)=>{var Se=R+Y;for(le=pe()[I+4*le>>>2>>>0]=Se,Se=0;Se<ie.length;++Se)ce()[le++>>>0]=ie.charCodeAt(Se);ce()[le>>>0]=0,Y+=ie.length+1}),0}function Ku(I,R){if(a)return dt(20,1,I,R);I>>>=0,R>>>=0;var Y=qo();pe()[I>>>2>>>0]=Y.length;var ie=0;return Y.forEach(le=>ie+=le.length+1),pe()[R>>>2>>>0]=ie,0}function Xu(I){return a?dt(21,1,I):52}function La(I,R,Y,ie){return a?dt(22,1,I,R,Y,ie):52}function Yu(I,R,Y,ie){return a?dt(23,1,I,R,Y,ie):70}var yd=[null,[],[]];function co(I,R,Y,ie){if(a)return dt(24,1,I,R,Y,ie);R>>>=0,Y>>>=0,ie>>>=0;for(var le=0,Se=0;Se<Y;Se++){var Ge=pe()[R>>>2>>>0],rt=pe()[R+4>>>2>>>0];R+=8;for(var pt=0;pt<rt;pt++){var Tt=D()[Ge+pt>>>0],Ft=yd[I];Tt===0||Tt===10?((I===1?w:S)(Nt(Ft)),Ft.length=0):Ft.push(Tt)}le+=rt}return pe()[ie>>>2>>>0]=le,0}a||(function(){for(var I=n.numThreads-1;I--;)hi();Xe.unshift(()=>{ae++,(function(R){a?R():Promise.all(Ze.map(jt)).then(R)})(()=>$e())})})();for(var Qu=Array(256),Ll=0;256>Ll;++Ll)Qu[Ll]=String.fromCharCode(Ll);vs=Qu,ri=n.BindingError=class extends Error{constructor(I){super(I),this.name="BindingError"}},n.InternalError=class extends Error{constructor(I){super(I),this.name="InternalError"}},pi.push(0,1,void 0,1,null,1,!0,1,!1,1),n.count_emval_handles=()=>pi.length/2-5-vn.length;var kt,Ju=[xt,gt,je,wt,Rr,Pr,Rn,Lr,Tn,Pi,Bi,zi,no,Ei,io,Wn,dd,Vu,fd,vd,Ku,Xu,La,Yu,co];(async function(){function I(ie,le){return kt=ie.exports,kt=(function(){var Se=kt,Ge={};for(let[rt,pt]of Object.entries(Se))Ge[rt]=typeof pt=="function"?(...Tt)=>{Pn.push(rt);try{return pt(...Tt)}finally{W||(Pn.pop(),Ar&&pr===1&&Pn.length===0&&(pr=0,_t+=1,Xr(Ko),typeof Fibers<"u"&&Fibers.rc()))}}:pt;return Ge})(),kt=(function(){var Se=kt,Ge=pt=>Tt=>pt(Tt)>>>0,rt=pt=>()=>pt()>>>0;return(Se=Object.assign({},Se)).Da=Ge(Se.Da),Se.fb=rt(Se.fb),Se.hb=Ge(Se.hb),Se.tb=Ge(Se.tb),Se.ub=rt(Se.ub),Se.__cxa_get_exception_ptr=Ge(Se.__cxa_get_exception_ptr),Se})(),Zt.push(kt.ib),T=le,$e(),kt}ae++;var R=Le();if(n.instantiateWasm)return new Promise(ie=>{n.instantiateWasm(R,(le,Se)=>{I(le,Se),ie(le.exports)})});if(a)return new Promise(ie=>{Ie=le=>{var Se=new WebAssembly.Instance(le,Le());ie(I(Se,le))}});ue??=n.locateFile?n.locateFile?n.locateFile("ort-wasm-simd-threaded.jsep.wasm",v):v+"ort-wasm-simd-threaded.jsep.wasm":new URL("/assets/ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href;try{var Y=await(async function(ie){var le=ue;if(!Q&&typeof WebAssembly.instantiateStreaming=="function"&&!oe(le))try{var Se=fetch(le,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(Se,ie)}catch(Ge){S(`wasm streaming compile failed: ${Ge}`),S("falling back to ArrayBuffer instantiation")}return(async function(Ge,rt){try{var pt=await(async function(Tt){if(!Q)try{var Ft=await d(Tt);return new Uint8Array(Ft)}catch{}if(Tt==ue&&Q)Tt=new Uint8Array(Q);else{if(!h)throw"both async and sync fetching of the wasm failed";Tt=h(Tt)}return Tt})(Ge);return await WebAssembly.instantiate(pt,rt)}catch(Tt){S(`failed to asynchronously prepare wasm: ${Tt}`),Ne(Tt)}})(le,ie)})(R);return I(Y.instance,Y.module)}catch(ie){return r(ie),Promise.reject(ie)}})();var Zu=I=>(Zu=kt.Da)(I),Ho=()=>(Ho=kt.Ea)();n._OrtInit=(I,R)=>(n._OrtInit=kt.Fa)(I,R),n._OrtGetLastError=(I,R)=>(n._OrtGetLastError=kt.Ga)(I,R),n._OrtCreateSessionOptions=(I,R,Y,ie,le,Se,Ge,rt,pt,Tt)=>(n._OrtCreateSessionOptions=kt.Ha)(I,R,Y,ie,le,Se,Ge,rt,pt,Tt),n._OrtAppendExecutionProvider=(I,R,Y,ie,le)=>(n._OrtAppendExecutionProvider=kt.Ia)(I,R,Y,ie,le),n._OrtAddFreeDimensionOverride=(I,R,Y)=>(n._OrtAddFreeDimensionOverride=kt.Ja)(I,R,Y),n._OrtAddSessionConfigEntry=(I,R,Y)=>(n._OrtAddSessionConfigEntry=kt.Ka)(I,R,Y),n._OrtReleaseSessionOptions=I=>(n._OrtReleaseSessionOptions=kt.La)(I),n._OrtCreateSession=(I,R,Y)=>(n._OrtCreateSession=kt.Ma)(I,R,Y),n._OrtReleaseSession=I=>(n._OrtReleaseSession=kt.Na)(I),n._OrtGetInputOutputCount=(I,R,Y)=>(n._OrtGetInputOutputCount=kt.Oa)(I,R,Y),n._OrtGetInputOutputMetadata=(I,R,Y,ie)=>(n._OrtGetInputOutputMetadata=kt.Pa)(I,R,Y,ie),n._OrtFree=I=>(n._OrtFree=kt.Qa)(I),n._OrtCreateTensor=(I,R,Y,ie,le,Se)=>(n._OrtCreateTensor=kt.Ra)(I,R,Y,ie,le,Se),n._OrtGetTensorData=(I,R,Y,ie,le)=>(n._OrtGetTensorData=kt.Sa)(I,R,Y,ie,le),n._OrtReleaseTensor=I=>(n._OrtReleaseTensor=kt.Ta)(I),n._OrtCreateRunOptions=(I,R,Y,ie)=>(n._OrtCreateRunOptions=kt.Ua)(I,R,Y,ie),n._OrtAddRunConfigEntry=(I,R,Y)=>(n._OrtAddRunConfigEntry=kt.Va)(I,R,Y),n._OrtReleaseRunOptions=I=>(n._OrtReleaseRunOptions=kt.Wa)(I),n._OrtCreateBinding=I=>(n._OrtCreateBinding=kt.Xa)(I),n._OrtBindInput=(I,R,Y)=>(n._OrtBindInput=kt.Ya)(I,R,Y),n._OrtBindOutput=(I,R,Y,ie)=>(n._OrtBindOutput=kt.Za)(I,R,Y,ie),n._OrtClearBoundOutputs=I=>(n._OrtClearBoundOutputs=kt._a)(I),n._OrtReleaseBinding=I=>(n._OrtReleaseBinding=kt.$a)(I),n._OrtRunWithBinding=(I,R,Y,ie,le)=>(n._OrtRunWithBinding=kt.ab)(I,R,Y,ie,le),n._OrtRun=(I,R,Y,ie,le,Se,Ge,rt)=>(n._OrtRun=kt.bb)(I,R,Y,ie,le,Se,Ge,rt),n._OrtEndProfiling=I=>(n._OrtEndProfiling=kt.cb)(I),n._JsepOutput=(I,R,Y)=>(n._JsepOutput=kt.db)(I,R,Y),n._JsepGetNodeName=I=>(n._JsepGetNodeName=kt.eb)(I);var xs=()=>(xs=kt.fb)(),rs=n._free=I=>(rs=n._free=kt.gb)(I),fo=n._malloc=I=>(fo=n._malloc=kt.hb)(I),Fl=(I,R,Y,ie,le,Se)=>(Fl=kt.kb)(I,R,Y,ie,le,Se),ec=()=>(ec=kt.lb)(),Bl=(I,R,Y,ie,le)=>(Bl=kt.mb)(I,R,Y,ie,le),Fa=I=>(Fa=kt.nb)(I),zl=I=>(zl=kt.ob)(I),tc=(I,R)=>(tc=kt.pb)(I,R),Ul=()=>(Ul=kt.qb)(),_d=(I,R)=>(_d=kt.rb)(I,R),Vl=I=>(Vl=kt.sb)(I),Wl=I=>(Wl=kt.tb)(I),rc=()=>(rc=kt.ub)(),bd=n.dynCall_ii=(I,R)=>(bd=n.dynCall_ii=kt.vb)(I,R),vi=I=>(vi=kt.wb)(I),Ko=()=>(Ko=kt.xb)(),nc=I=>(nc=kt.yb)(I),Gl=()=>(Gl=kt.zb)();return n.stackSave=()=>rc(),n.stackRestore=I=>Vl(I),n.stackAlloc=I=>Wl(I),n.setValue=function(I,R,Y="i8"){switch(Y.endsWith("*")&&(Y="*"),Y){case"i1":case"i8":ce()[I>>>0]=R;break;case"i16":U()[I>>>1>>>0]=R;break;case"i32":ee()[I>>>2>>>0]=R;break;case"i64":K[I>>>3]=BigInt(R);break;case"float":Oe()[I>>>2>>>0]=R;break;case"double":xe()[I>>>3>>>0]=R;break;case"*":pe()[I>>>2>>>0]=R;break;default:Ne(`invalid type for setValue: ${Y}`)}},n.getValue=function(I,R="i8"){switch(R.endsWith("*")&&(R="*"),R){case"i1":case"i8":return ce()[I>>>0];case"i16":return U()[I>>>1>>>0];case"i32":return ee()[I>>>2>>>0];case"i64":return K[I>>>3];case"float":return Oe()[I>>>2>>>0];case"double":return xe()[I>>>3>>>0];case"*":return pe()[I>>>2>>>0];default:Ne(`invalid type for getValue: ${R}`)}},n.UTF8ToString=bt,n.stringToUTF8=kr,n.lengthBytesUTF8=sr,(function I(){if(0<ae)Ce=I;else if(a)t(n),re();else{for(;0<Xe.length;)Xe.shift()(n);0<ae?Ce=I:(n.calledRun=!0,W||(re(),t(n)))}})(),n.PTR_SIZE=4,i}),F9=hT,vR=globalThis.self?.name?.startsWith("em-pthread"),vR&&hT()}),pT,xO,yR,zs,B9,Nb,_R,bR,mT,wR,gT,z9,vT,U9,DI=at(()=>{NI(),pT=typeof location>"u"?void 0:location.origin,xO=import.meta.url>"file:"&&import.meta.url<"file;",yR=()=>{{if(xO){let e=URL;return new URL(new e("ort.bundle.min.mjs",import.meta.url).href,pT).href}return import.meta.url}},zs=yR(),B9=()=>{if(zs&&!zs.startsWith("blob:"))return zs.substring(0,zs.lastIndexOf("/")+1)},Nb=(e,t)=>{try{let r=t??zs;return(r?new URL(e,r):new URL(e)).origin===pT}catch{return!1}},_R=(e,t)=>{let r=t??zs;try{return(r?new URL(e,r):new URL(e)).href}catch{return}},bR=(e,t)=>`${t??"./"}${e}`,mT=async e=>{let t=await(await fetch(e,{credentials:"same-origin"})).blob();return URL.createObjectURL(t)},wR=async e=>(await import(e)).default,gT=(Nge(),w_(D9)).default,z9=async()=>{if(!zs)throw new Error("Failed to load proxy worker: cannot determine the script source URL.");if(Nb(zs))return[void 0,gT()];let e=await mT(zs);return[e,gT(e)]},vT=(Dge(),w_(L9)).default,U9=async(e,t,r)=>{if(!e&&!t&&vT&&zs&&Nb(zs))return[void 0,vT];{let n="ort-wasm-simd-threaded.jsep.mjs",i=e??_R(n,t),s=r&&i&&!Nb(i,t),o=s?await mT(i):i??bR(n,t);return[s?o:void 0,await wR(o)]}}}),yT,Db,dy,_T,xR,MR,TR,RI,qr,ch=at(()=>{DI(),Db=!1,dy=!1,_T=!1,xR=()=>{if(typeof SharedArrayBuffer>"u")return!1;try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},MR=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},TR=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,19,1,17,0,65,1,253,15,65,2,253,15,65,3,253,15,253,147,2,11]))}catch{return!1}},RI=async e=>{if(Db)return Promise.resolve();if(dy)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(_T)throw new Error("previous call to 'initializeWebAssembly()' failed.");dy=!0;let t=e.initTimeout,r=e.numThreads;if(e.simd!==!1){if(e.simd==="relaxed"){if(!TR())throw new Error("Relaxed WebAssembly SIMD is not supported in the current environment.")}else if(!MR())throw new Error("WebAssembly SIMD is not supported in the current environment.")}let n=xR();r>1&&!n&&(typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+r+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),console.warn("WebAssembly multi-threading is not supported in the current environment. Falling back to single-threading."),e.numThreads=r=1);let i=e.wasmPaths,s=typeof i=="string"?i:void 0,o=i?.mjs,a=o?.href??o,l=i?.wasm,u=l?.href??l,c=e.wasmBinary,[d,h]=await U9(a,s,r>1),m=!1,g=[];if(t>0&&g.push(new Promise(v=>{setTimeout(()=>{m=!0,v()},t)})),g.push(new Promise((v,y)=>{let x={numThreads:r};if(c)x.wasmBinary=c;else if(u||s)x.locateFile=w=>u??s+w;else if(a&&a.indexOf("blob:")!==0)x.locateFile=w=>new URL(w,a).href;else if(d){let w=B9();w&&(x.locateFile=S=>w+S)}h(x).then(w=>{dy=!1,Db=!0,yT=w,v(),d&&URL.revokeObjectURL(d)},w=>{dy=!1,_T=!0,y(w)})})),await Promise.race(g),m)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},qr=()=>{if(Db&&yT)return yT;throw new Error("WebAssembly is not initialized yet.")}}),_a,qw,Or,LI=at(()=>{ch(),_a=(e,t)=>{let r=qr(),n=r.lengthBytesUTF8(e)+1,i=r._malloc(n);return r.stringToUTF8(e,i,n),t.push(i),i},qw=(e,t,r,n)=>{if(typeof e=="object"&&e!==null){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach(([i,s])=>{let o=t?t+i:i;if(typeof s=="object")qw(s,o+".",r,n);else if(typeof s=="string"||typeof s=="number")n(o,s.toString());else if(typeof s=="boolean")n(o,s?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof s}`)})},Or=e=>{let t=qr(),r=t.stackSave();try{let n=t.PTR_SIZE,i=t.stackAlloc(2*n);t._OrtGetLastError(i,i+n);let s=Number(t.getValue(i,n===4?"i32":"i64")),o=t.getValue(i+n,"*"),a=o?t.UTF8ToString(o):"";throw new Error(`${e} ERROR_CODE: ${s}, ERROR_MESSAGE: ${a}`)}finally{t.stackRestore(r)}}}),V9,Rge=at(()=>{ch(),LI(),V9=e=>{let t=qr(),r=0,n=[],i=e||{};try{if(e?.logSeverityLevel===void 0)i.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(e?.logVerbosityLevel===void 0)i.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);e?.terminate===void 0&&(i.terminate=!1);let s=0;return e?.tag!==void 0&&(s=_a(e.tag,n)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,s),r===0&&Or("Can't create run options."),e?.extra!==void 0&&qw(e.extra,"",new WeakSet,(o,a)=>{let l=_a(o,n),u=_a(a,n);t._OrtAddRunConfigEntry(r,l,u)!==0&&Or(`Can't set a run config entry: ${o} - ${a}.`)}),[r,n]}catch(s){throw r!==0&&t._OrtReleaseRunOptions(r),n.forEach(o=>t._free(o)),s}}}),SR,PR,ER,fy,CR,W9,Lge=at(()=>{ch(),LI(),SR=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},PR=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},ER=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(e.enableMemPattern=!1)},fy=(e,t,r,n)=>{let i=_a(t,n),s=_a(r,n);qr()._OrtAddSessionConfigEntry(e,i,s)!==0&&Or(`Can't set a session config entry: ${t} - ${r}.`)},CR=async(e,t,r)=>{for(let n of t){let i=typeof n=="string"?n:n.name,s=[];switch(i){case"webnn":if(i="WEBNN",typeof n!="string"){let c=n?.deviceType;c&&fy(e,"deviceType",c,r)}break;case"webgpu":if(i="JS",typeof n!="string"){let c=n;if(c?.preferredLayout){if(c.preferredLayout!=="NCHW"&&c.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${c.preferredLayout}`);fy(e,"preferredLayout",c.preferredLayout,r)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${i}`)}let o=_a(i,r),a=s.length,l=0,u=0;if(a>0){l=qr()._malloc(a*qr().PTR_SIZE),r.push(l),u=qr()._malloc(a*qr().PTR_SIZE),r.push(u);for(let c=0;c<a;c++)qr().setValue(l+c*qr().PTR_SIZE,s[c][0],"*"),qr().setValue(u+c*qr().PTR_SIZE,s[c][1],"*")}await qr()._OrtAppendExecutionProvider(e,o,l,u,a)!==0&&Or(`Can't append execution provider: ${i}.`)}},W9=async e=>{let t=qr(),r=0,n=[],i=e||{};ER(i);try{let s=SR(i.graphOptimizationLevel??"all"),o=PR(i.executionMode??"sequential"),a=typeof i.logId=="string"?_a(i.logId,n):0,l=i.logSeverityLevel??2;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log serverity level is not valid: ${l}`);let u=i.logVerbosityLevel??0;if(!Number.isInteger(u)||u<0||u>4)throw new Error(`log verbosity level is not valid: ${u}`);let c=typeof i.optimizedModelFilePath=="string"?_a(i.optimizedModelFilePath,n):0;if(r=t._OrtCreateSessionOptions(s,!!i.enableCpuMemArena,!!i.enableMemPattern,o,!!i.enableProfiling,0,a,l,u,c),r===0&&Or("Can't create session options."),i.executionProviders&&await CR(r,i.executionProviders,n),i.enableGraphCapture!==void 0){if(typeof i.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${i.enableGraphCapture}`);fy(r,"enableGraphCapture",i.enableGraphCapture.toString(),n)}if(i.freeDimensionOverrides)for(let[d,h]of Object.entries(i.freeDimensionOverrides)){if(typeof d!="string")throw new Error(`free dimension override name must be a string: ${d}`);if(typeof h!="number"||!Number.isInteger(h)||h<0)throw new Error(`free dimension override value must be a non-negative integer: ${h}`);let m=_a(d,n);t._OrtAddFreeDimensionOverride(r,m,h)!==0&&Or(`Can't set a free dimension override: ${d} - ${h}.`)}return i.extra!==void 0&&qw(i.extra,"",new WeakSet,(d,h)=>{fy(r,d,h,n)}),[r,n]}catch(s){throw r!==0&&t._OrtReleaseSessionOptions(r)!==0&&Or("Can't release session options."),n.forEach(o=>t._free(o)),s}}}),tm,wu,jf,FI,Hw,BI,zI,MO,Bt=at(()=>{tm=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;case"int4":return 22;case"uint4":return 21;default:throw new Error(`unsupported data type: ${e}`)}},wu=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";case 22:return"int4";case 21:return"uint4";default:throw new Error(`unsupported data type: ${e}`)}},jf=(e,t)=>{let r=[-1,4,1,1,2,2,4,8,-1,1,2,8,4,8,-1,-1,-1,-1,-1,-1,-1,.5,.5][e],n=typeof t=="number"?t:t.reduce((i,s)=>i*s,1);return r>0?Math.ceil(n*r):void 0},FI=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},Hw=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},BI=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",zI=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint64"||e==="int8"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",MO=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;case"ml-tensor":return 5;default:throw new Error(`unsupported data location: ${e}`)}}}),UI,G9=at(()=>{NI(),UI=async e=>{if(typeof e=="string"){let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let r=t.headers.get("Content-Length"),n=r?parseInt(r,10):0;if(n<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let i=t.body.getReader(),s;try{s=new ArrayBuffer(n)}catch(a){if(a instanceof RangeError){let l=Math.ceil(n/65536);s=new WebAssembly.Memory({initial:l,maximum:l}).buffer}else throw a}let o=0;for(;;){let{done:a,value:l}=await i.read();if(a)break;let u=l.byteLength;new Uint8Array(s,o,u).set(l),o+=u}return new Uint8Array(s,0,n)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)}}),AR,OR,kR,IR,VI,jR,fr,Du=at(()=>{Bt(),AR=["V","I","W","E","F"],OR=(e,t)=>{console.log(`[${AR[e]},${new Date().toISOString()}]${t}`)},VI=(e,t)=>{kR=e,IR=t},jR=(e,t)=>{let r=Hw(e),n=Hw(kR);r>=n&&OR(r,typeof t=="function"?t():t)},fr=(...e)=>{IR&&jR(...e)}}),$R,Om,Ue,Kw,q9,H9,K9,Jt=at(()=>{$R=class{static calcMatMulShape(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]}},Om=class{static calcShape(e,t,r=!1){let n=e.length,i=t.length;if(n===0)return t;if(i===0)return e;let s=Math.max(e.length,t.length),o=new Array(s);if(r){if(n<2||i<2)return;let a=$R.calcMatMulShape([e[n-2],e[n-1]],[t[i-2],t[i-1]]);if(a===void 0)return;[o[s-2],o[s-1]]=a}for(let a=r?3:1;a<=s;a++){let l=n-a<0?1:e[n-a],u=i-a<0?1:t[i-a];if(l!==u&&l>1&&u>1)return;let c=Math.max(l,u);if(l&&u)o[s-a]=Math.max(l,u);else{if(c>1)return;o[s-a]=0}}return o}static isValidBroadcast(e,t){let r=e.length,n=t.length;if(r>n)return!1;for(let i=1;i<=r;i++)if(e[r-i]!==1&&e[r-i]!==t[n-i])return!1;return!0}},Ue=class ww{static size(t){return ww.getSizeFromDimensionRange(t,0,t.length)}static convertShape(t,r=4){let n=t.length;if(n===0)return[];let i=new Array(n),s=n-1;for(;s>=0;){if(t[s]%r===0){i[s]=t[s]/r;break}if(r%t[s]!==0)throw new Error("cannot convert shape");i[s]=1,r/=t[s],s--}for(s--;s>=0;s--)i[s]=t[s];return i}static sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return ww.getSizeFromDimensionRange(t,r,t.length)}static sizeToDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${t.length} dimensions.`);return ww.getSizeFromDimensionRange(t,0,r)}static getSizeFromDimensionRange(t,r,n){let i=1;for(let s=r;s<n;s++){if(t[s]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");i*=Number(t[s])}return i}static computeStrides(t){let r=t.length;if(r===0)return[];if(r===1)return[1];let n=new Array(r);n[r-1]=1,n[r-2]=t[r-1];for(let i=r-3;i>=0;--i)n[i]=n[i+1]*t[i+1];return n}static normalizeAxis(t,r){if(t<-r&&t>=r)throw new Error("unsupported axis for this operation.");return t<0?t+r:t}static normalizeAxes(t,r){return t.map(n=>this.normalizeAxis(n,r??t.length))}static sortBasedOnPerm(t,r){return r?r.map(n=>t[n]):t.slice().reverse()}static padShape(t,r){let n=t.length;return t.map((i,s)=>i+r[s]+r[s+n])}static areEqual(t,r){return t.length!==r.length?!1:t.every((n,i)=>n===r[i])}},Kw=class $y{static adjustPoolAttributes(t,r,n,i,s,o){if(!t&&n.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let a=0;a<r.length-2;a++)a>=n.length?n.push(r[a+2]):n[a]=r[a+2];for(let a=0;a<n.length;a++)if(a<i.length){if(i[a]<0)throw new Error("strides should be greater than or equal to 1")}else i.push(1);for(let a=0;a<n.length;a++)if(a<s.length){if(s[a]<0)throw new Error("dilations should be greater than or equal to 1")}else s.push(1);for(let a=0;a<n.length*2;a++)if(a<o.length){if(o[a]<0)throw new Error("pad should be greater than or equal to 1")}else o.push(0);for(let a=0;a<n.length;a++){if(n[a]<=0)throw new Error("kernel shapes need to be greater than 0");if(o[a]>=n[a]||o[a+n.length]>=n[a])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,r,n,i,s,o,a){if(a){if(s.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let l=0;l<t.length-2;l++)$y.adjustPadAndReturnShape(t[l+(o?1:2)],r[l],n[l],i[l],s,l,l+t.length-2,a)}}static computePoolOutputShape(t,r,n,i,s,o,a){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let l=[r[0],r[1]];return $y.computeShapeHelper(t,r,l,n,i,s,o,a),l}static computeConvOutputShape(t,r,n,i,s,o,a){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let l=[t[0],r[0]];return $y.computeShapeHelper(!1,t,l,n,i,s,o,a),l}static computeShapeHelper(t,r,n,i,s,o,a,l){if(t)for(let u=0;u<r.length-2;u++)n.push(1);else for(let u=0;u<r.length-2;u++)n.push($y.adjustPadAndReturnShape(r[u+2],i[u],s[u],o[u],a,u,u+r.length-2,l))}static adjustPadAndReturnShape(t,r,n,i,s,o,a,l){let u=n*(i-1)+1;if(l&&l!=="NOTSET")switch(l){case"VALID":return s[o]=0,s[a]=0,Math.floor((t-u)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(n!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let c=((t+r-1)/r-1)*r+i-t;return s[o]=Math.floor(l==="SAME_LOWER"?(c+1)/2:c/2),s[a]=c-s[o],Math.floor((t+c-i)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+s[o]+s[a]-u)/r+1)}},q9=class{static getShapeOfGemmResult(e,t,r,n,i){if(e.length!==2||r.length!==2)throw new Error("shape need to be of size 2");let s,o,a;t?(s=e[1],o=e[0]):(s=e[0],o=e[1]);let l=-1;if(n?(a=r[0],l=1):(a=r[1],l=0),r[l]!==o)throw new Error("dimension mismatch");if(s<=0||a<=0||o<=0)throw new Error("invalid shape specified");if(i&&!Om.isValidBroadcast(i,[s,a]))throw new Error("gemm: invalid bias shape for broadcast");return[s,a,o]}},H9=-34028234663852886e22,K9=34028234663852886e22}),WI,X9=at(()=>{Bt(),WI=(e,t)=>new(FI(t))(e)}),TO,bT,NR,wT,DR,xT,MT,TT,RR,Y9,Fge=at(()=>{Du(),TO=(e,t=!0)=>{if(e.byteLength%8!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 8 (BigInt).");let r=e.byteLength/8,n=new BigInt64Array(e.buffer,e.byteOffset,r),i=new Int32Array(r);for(let s=0;s<r;s++){let o=n[s];if(o>2147483647n||o<-2147483648n)throw new Error(`Overflow occurred when converting BigInt to Int32 at index ${s}: ${o}`);i[s]=Number(o)}return t?new Uint8Array(i.buffer):i},bT=(e,t=!0)=>{if(e.byteLength%4!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 4 (Int32).");let r=e.byteLength/4,n=new Int32Array(e.buffer,e.byteOffset,r),i=BigInt64Array.from(n,BigInt);return t?new Uint8Array(i.buffer):i},NR=1,wT=()=>NR++,DR=new Map([["float32",32],["float16",16],["int32",32],["uint32",32],["int64",64],["uint64",64],["int8",8],["uint8",8],["int4",4],["uint4",4]]),xT=(e,t)=>{let r=DR.get(e);if(!r)throw new Error("Unsupported data type.");return t.length>0?Math.ceil(t.reduce((n,i)=>n*i)*r/8):0},MT=class{constructor(e){this.shouldConvertInt64toInt32=!1,this.isInt64ToInt32Converted=!1;let{sessionId:t,context:r,tensor:n,dataType:i,shape:s,shouldConvertInt64toInt32:o=!1}=e;this.sessionId=t,this.mlContext=r,this.mlTensor=n,this.dataType=i,this.tensorShape=s,this.shouldConvertInt64toInt32=o}get tensor(){return this.mlTensor}get type(){return this.dataType}get shape(){return this.tensorShape}get byteLength(){return xT(this.dataType,this.tensorShape)}destroy(){fr("verbose",()=>"[WebNN] TensorWrapper.destroy"),this.mlTensor.destroy()}write(e){this.mlContext.writeTensor(this.mlTensor,e)}async read(e,t){if(e){let r=await this.mlContext.readTensor(this.mlTensor),n=bT(new Uint8Array(r));if(t){(t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).set(n);return}else return n.buffer}else return t?this.mlContext.readTensor(this.mlTensor,t):this.mlContext.readTensor(this.mlTensor)}canReuseTensor(e,t,r){return this.mlContext===e&&this.dataType===t&&this.tensorShape.length===r.length&&this.tensorShape.every((n,i)=>n===r[i])}setIsInt64ToInt32Converted(e){this.isInt64ToInt32Converted=e}},TT=class{constructor(e,t){this.tensorManager=e,this.wrapper=t}get tensorWrapper(){return this.wrapper}releaseTensor(){this.tensorWrapper&&(this.tensorManager.releaseTensor(this.tensorWrapper),this.wrapper=void 0)}async ensureTensor(e,t,r,n){let i=t,s=this.tensorManager.getMLContext(e),o=i==="int64"&&!s.opSupportLimits().input.dataTypes.includes("int64");if(o&&(i="int32",fr("verbose",()=>"[WebNN] TensorIdTracker.ensureTensor: convert dataType from int64 to int32")),this.wrapper){if(this.wrapper.canReuseTensor(s,i,r))return this.wrapper.tensor;if(n){if(this.wrapper.byteLength!==xT(i,r))throw new Error("Unable to copy data to tensor with different size.");this.activeUpload=new Uint8Array(await this.wrapper.read())}this.tensorManager.releaseTensor(this.wrapper)}let a=typeof MLTensorUsage>"u"?void 0:MLTensorUsage.READ|MLTensorUsage.WRITE;return this.wrapper=await this.tensorManager.getCachedTensor(e,i,r,a,!0,!0,o),n&&this.activeUpload&&(this.wrapper.write(this.activeUpload),this.activeUpload=void 0),this.wrapper.tensor}upload(e){let t=e;if(this.wrapper)if(this.wrapper.shouldConvertInt64toInt32&&(t=TO(e,!0),this.wrapper.setIsInt64ToInt32Converted(!0)),t.byteLength===this.wrapper.byteLength){this.wrapper.write(t);return}else fr("verbose",()=>"Data size does not match tensor size. Releasing tensor."),this.releaseTensor();this.activeUpload?this.activeUpload.set(t):this.activeUpload=new Uint8Array(t)}async download(e){if(this.activeUpload){let t=this.wrapper?.isInt64ToInt32Converted?bT(this.activeUpload):this.activeUpload;if(e){e instanceof ArrayBuffer?new Uint8Array(e).set(t):new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(t);return}else return t.buffer}if(!this.wrapper)throw new Error("Tensor has not been created.");return e?this.wrapper.read(this.wrapper?.shouldConvertInt64toInt32,e):this.wrapper.read(this.wrapper?.shouldConvertInt64toInt32)}},RR=class{constructor(e){this.backend=e,this.tensorTrackersById=new Map,this.freeTensors=[],this.externalTensors=new Set}getMLContext(e){let t=this.backend.getMLContext(e);if(!t)throw new Error("MLContext not found for session.");return t}reserveTensorId(){let e=wT();return this.tensorTrackersById.set(e,new TT(this)),e}releaseTensorId(e){let t=this.tensorTrackersById.get(e);t&&(this.tensorTrackersById.delete(e),t.tensorWrapper&&this.releaseTensor(t.tensorWrapper))}async ensureTensor(e,t,r,n,i){fr("verbose",()=>`[WebNN] TensorManager.ensureTensor {tensorId: ${t}, dataType: ${r}, shape: ${n}, copyOld: ${i}}`);let s=this.tensorTrackersById.get(t);if(!s)throw new Error("Tensor not found.");return s.ensureTensor(e,r,n,i)}upload(e,t){let r=this.tensorTrackersById.get(e);if(!r)throw new Error("Tensor not found.");r.upload(t)}async download(e,t){fr("verbose",()=>`[WebNN] TensorManager.download {tensorId: ${e}, dstBuffer: ${t?.byteLength}}`);let r=this.tensorTrackersById.get(e);if(!r)throw new Error("Tensor not found.");return r.download(t)}releaseTensorsForSession(e){for(let t of this.freeTensors)t.sessionId===e&&t.destroy();this.freeTensors=this.freeTensors.filter(t=>t.sessionId!==e)}registerTensor(e,t,r,n){let i=this.getMLContext(e),s=wT(),o=new MT({sessionId:e,context:i,tensor:t,dataType:r,shape:n});return this.tensorTrackersById.set(s,new TT(this,o)),this.externalTensors.add(o),s}async getCachedTensor(e,t,r,n,i,s,o=!1){let a=this.getMLContext(e);for(let[u,c]of this.freeTensors.entries())if(c.canReuseTensor(a,t,r)){fr("verbose",()=>`[WebNN] Reusing tensor {dataType: ${t}, shape: ${r}}`);let d=this.freeTensors.splice(u,1)[0];return d.sessionId=e,d}fr("verbose",()=>`[WebNN] MLContext.createTensor {dataType: ${t}, shape: ${r}}`);let l=await a.createTensor({dataType:t,shape:r,dimensions:r,usage:n,writable:i,readable:s});return new MT({sessionId:e,context:a,tensor:l,dataType:t,shape:r,shouldConvertInt64toInt32:o})}releaseTensor(e){this.externalTensors.has(e)&&this.externalTensors.delete(e),this.freeTensors.push(e)}},Y9=(...e)=>new RR(...e)}),Rb,LR,Q9,Bge=at(()=>{Bt(),ch(),X9(),Fge(),Du(),Rb=new Map([[1,"float32"],[10,"float16"],[6,"int32"],[12,"uint32"],[7,"int64"],[13,"uint64"],[22,"int4"],[21,"uint4"],[3,"int8"],[2,"uint8"],[9,"uint8"]]),LR=(e,t)=>{if(e===t)return!0;if(e===void 0||t===void 0)return!1;let r=Object.keys(e).sort(),n=Object.keys(t).sort();return r.length===n.length&&r.every((i,s)=>i===n[s]&&e[i]===t[i])},Q9=class{constructor(e){this.tensorManager=Y9(this),this.mlContextBySessionId=new Map,this.sessionIdsByMLContext=new Map,this.mlContextCache=[],this.sessionGraphInputs=new Map,this.temporaryGraphInputs=[],this.temporarySessionTensorIds=new Map,VI(e.logLevel,!!e.debug)}get currentSessionId(){if(this.activeSessionId===void 0)throw new Error("No active session");return this.activeSessionId}onRunStart(e){fr("verbose",()=>`[WebNN] onRunStart {sessionId: ${e}}`),this.activeSessionId=e}onRunEnd(e){fr("verbose",()=>`[WebNN] onRunEnd {sessionId: ${e}}`);let t=this.temporarySessionTensorIds.get(e);if(t){for(let r of t)fr("verbose",()=>`[WebNN] releasing temporary tensor {tensorId: ${r}}`),this.tensorManager.releaseTensorId(r);this.temporarySessionTensorIds.delete(e),this.activeSessionId=void 0}}async createMLContext(e){if(e instanceof GPUDevice){let r=this.mlContextCache.findIndex(n=>n.gpuDevice===e);if(r!==-1)return this.mlContextCache[r].mlContext;{let n=await navigator.ml.createContext(e);return this.mlContextCache.push({gpuDevice:e,mlContext:n}),n}}else if(e===void 0){let r=this.mlContextCache.findIndex(n=>n.options===void 0&&n.gpuDevice===void 0);if(r!==-1)return this.mlContextCache[r].mlContext;{let n=await navigator.ml.createContext();return this.mlContextCache.push({mlContext:n}),n}}let t=this.mlContextCache.findIndex(r=>LR(r.options,e));if(t!==-1)return this.mlContextCache[t].mlContext;{let r=await navigator.ml.createContext(e);return this.mlContextCache.push({options:e,mlContext:r}),r}}registerMLContext(e,t){this.mlContextBySessionId.set(e,t);let r=this.sessionIdsByMLContext.get(t);r||(r=new Set,this.sessionIdsByMLContext.set(t,r)),r.add(e),this.temporaryGraphInputs.length>0&&(this.sessionGraphInputs.set(e,this.temporaryGraphInputs),this.temporaryGraphInputs=[])}onReleaseSession(e){this.sessionGraphInputs.delete(e);let t=this.mlContextBySessionId.get(e);if(!t)return;this.tensorManager.releaseTensorsForSession(e),this.mlContextBySessionId.delete(e);let r=this.sessionIdsByMLContext.get(t);if(r.delete(e),r.size===0){this.sessionIdsByMLContext.delete(t);let n=this.mlContextCache.findIndex(i=>i.mlContext===t);n!==-1&&this.mlContextCache.splice(n,1)}}getMLContext(e){return this.mlContextBySessionId.get(e)}reserveTensorId(){return this.tensorManager.reserveTensorId()}releaseTensorId(e){fr("verbose",()=>`[WebNN] releaseTensorId {tensorId: ${e}}`),this.tensorManager.releaseTensorId(e)}async ensureTensor(e,t,r,n,i){let s=Rb.get(r);if(!s)throw new Error(`Unsupported ONNX data type: ${r}`);return this.tensorManager.ensureTensor(e??this.currentSessionId,t,s,n,i)}async createTemporaryTensor(e,t,r){fr("verbose",()=>`[WebNN] createTemporaryTensor {onnxDataType: ${t}, shape: ${r}}`);let n=Rb.get(t);if(!n)throw new Error(`Unsupported ONNX data type: ${t}`);let i=this.tensorManager.reserveTensorId();await this.tensorManager.ensureTensor(e,i,n,r,!1);let s=this.temporarySessionTensorIds.get(e);return s?s.push(i):this.temporarySessionTensorIds.set(e,[i]),i}uploadTensor(e,t){if(!qr().shouldTransferToMLTensor)throw new Error("Trying to upload to a MLTensor while shouldTransferToMLTensor is false");fr("verbose",()=>`[WebNN] uploadTensor {tensorId: ${e}, data: ${t.byteLength}}`),this.tensorManager.upload(e,t)}async downloadTensor(e,t){return this.tensorManager.download(e,t)}createMLTensorDownloader(e,t){return async()=>{let r=await this.tensorManager.download(e);return WI(r,t)}}registerMLTensor(e,t,r,n){let i=Rb.get(r);if(!i)throw new Error(`Unsupported ONNX data type: ${r}`);let s=this.tensorManager.registerTensor(e,t,i,n);return fr("verbose",()=>`[WebNN] registerMLTensor {tensor: ${t}, dataType: ${i}, dimensions: ${n}} -> {tensorId: ${s}}`),s}registerMLConstant(e,t,r,n,i,s,o=!1){if(!s)throw new Error("External mounted files are not available.");let a=e;e.startsWith("./")&&(a=e.substring(2));let l=s.get(a);if(!l)throw new Error(`File with name ${a} not found in preloaded files.`);if(t+r>l.byteLength)throw new Error("Out of bounds: data offset and length exceed the external file data size.");let u=l.slice(t,t+r).buffer,c;switch(i.dataType){case"float32":c=new Float32Array(u);break;case"float16":c=typeof Float16Array<"u"&&Float16Array.from?new Float16Array(u):new Uint16Array(u);break;case"int32":c=new Int32Array(u);break;case"uint32":c=new Uint32Array(u);break;case"int64":o?(c=TO(new Uint8Array(u),!1),i.dataType="int32"):c=new BigInt64Array(u);break;case"uint64":c=new BigUint64Array(u);break;case"int8":c=new Int8Array(u);break;case"int4":case"uint4":case"uint8":c=new Uint8Array(u);break;default:throw new Error(`Unsupported data type: ${i.dataType} in creating WebNN Constant from external data.`)}return fr("verbose",()=>`[WebNN] registerMLConstant {dataType: ${i.dataType}, shape: ${i.shape}}} ${o?"(Note: it was int64 data type and registered to int32 as workaround)":""}`),n.constant(i,c)}registerGraphInput(e){this.temporaryGraphInputs.push(e)}isGraphInput(e,t){let r=this.sessionGraphInputs.get(e);return r?r.includes(t):!1}isInt64Supported(e){return!!this.mlContextBySessionId.get(e)?.opSupportLimits().input.dataTypes.includes("int64")}flush(){}}}),GI=at(()=>{}),ST,Lb,Fb,FR,BR,PT,SO,zR,J9,zge=at(()=>{Du(),GI(),ST=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),Lb=[],Fb=e=>Math.ceil(Number(e)/16)*16,FR=e=>{for(let t=0;t<Lb.length;t++){let r=Lb[t];if(e<=r)return r}return Math.ceil(e/16)*16},BR=1,PT=()=>BR++,SO=async(e,t,r,n)=>{let i=Fb(r),s=e.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let o=e.getCommandEncoder();e.endComputePass(),o.copyBufferToBuffer(t,0,s,0,i),e.flush(),await s.mapAsync(GPUMapMode.READ);let a=s.getMappedRange();if(n){let l=n();return l.set(new Uint8Array(a,0,r)),l}else return new Uint8Array(a.slice(0,r))}finally{s.destroy()}},zR=class{constructor(e){this.backend=e,this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersPending=[],this.capturedPendingBuffers=new Map;for(let[t]of ST)Lb.push(t),this.freeBuffers.set(t,[]),this.freeUniformBuffers.set(t,[]);this.sessionCount=0}upload(e,t){let r=t.buffer,n=t.byteOffset,i=t.byteLength,s=Fb(i),o=this.storageCache.get(e);if(!o)throw new Error("gpu data for uploading does not exist");if(Number(o.originalSize)!==i)throw new Error(`inconsistent data size. gpu data size=${o.originalSize}, data size=${i}`);let a=this.backend.device.createBuffer({mappedAtCreation:!0,size:s,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),l=a.getMappedRange();new Uint8Array(l).set(new Uint8Array(r,n,i)),a.unmap();let u=this.backend.device.createCommandEncoder();u.copyBufferToBuffer(a,0,o.gpuData.buffer,0,s),this.backend.device.queue.submit([u.finish()]),a.destroy(),fr("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${e})`)}memcpy(e,t){let r=this.storageCache.get(e);if(!r)throw new Error("source gpu data for memcpy does not exist");let n=this.storageCache.get(t);if(!n)throw new Error("destination gpu data for memcpy does not exist");if(r.originalSize!==n.originalSize)throw new Error("inconsistent source and destination gpu data size");let i=Fb(r.originalSize),s=this.backend.getCommandEncoder();this.backend.endComputePass(),s.copyBufferToBuffer(r.gpuData.buffer,0,n.gpuData.buffer,0,i)}registerExternalBuffer(e,t,r){let n;if(r){if(n=r[0],e===r[1])return fr("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${n}, buffer is the same, skip.`),n;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.
             Please use the previous external buffer!`)}else n=PT();return this.storageCache.set(n,{gpuData:{id:n,type:0,buffer:e},originalSize:t}),fr("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${n}, registered.`),n}unregisterExternalBuffer(e){e!==void 0&&(this.storageCache.delete(e),fr("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${e}`))}create(e,t=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let r=FR(e),n,i=(t&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,s=(t&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(i||s){let a=(i?this.freeBuffers:this.freeUniformBuffers).get(r);a?a.length>0?n=a.pop():n=this.backend.device.createBuffer({size:r,usage:t}):n=this.backend.device.createBuffer({size:r,usage:t})}else n=this.backend.device.createBuffer({size:r,usage:t});let o={id:PT(),type:0,buffer:n};return this.storageCache.set(o.id,{gpuData:o,originalSize:Number(e)}),fr("verbose",()=>`[WebGPU] GpuDataManager.create(size=${e}) => id=${o.id}`),o}get(e){return this.storageCache.get(e)?.gpuData}release(e){let t=typeof e=="bigint"?Number(e):e,r=this.storageCache.get(t);if(!r){if(this.storageCache.size===0)return 0;throw new Error("releasing data does not exist")}return fr("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${r.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(r.gpuData.buffer),r.originalSize}async download(e,t){let r=this.storageCache.get(Number(e));if(!r)throw new Error("data does not exist");await SO(this.backend,r.gpuData.buffer,r.originalSize,t)}refreshPendingBuffers(){if(this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let e of this.buffersPending){let t=ST.get(e.size);if((e.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let r=this.freeBuffers.get(e.size)||[];t===void 0||r.length>=t?e.destroy():r.push(e)}else if((e.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let r=this.freeUniformBuffers.get(e.size)||[];t===void 0||r.length>=t?e.destroy():r.push(e)}else e.destroy()}this.buffersPending=[]}else{let e=this.capturedPendingBuffers.get(this.backend.currentSessionId);e||(e=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,e));for(let t of this.buffersPending)e.push(t);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.freeUniformBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache.forEach(e=>{e.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onCreateSession(){this.sessionCount+=1}onReleaseSession(e){let t=this.capturedPendingBuffers.get(e);t&&(t.forEach(r=>{r.destroy()}),this.capturedPendingBuffers.delete(e)),this.sessionCount-=1,this.sessionCount===0&&(fr("warning",()=>"[WebGPU] Clearing webgpu buffer cache"),this.storageCache.forEach(r=>{r.gpuData.buffer.destroy()}),this.storageCache=new Map)}},J9=(...e)=>new zR(...e)}),UR,Tr,Dn=at(()=>{UR=class{constructor(e){Object.assign(this,e)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e=>`${this[e]}`).join(";")),this.key}},Tr=e=>new UR(e)}),km,Bb,di,Ji,It,wn,PO,um,Xc,Ot,hy,qe,Et,Z9,qI,VR,e7,er=at(()=>{Bt(),Jt(),km=64,Bb=(e,t)=>{if(t===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(Number(e)){case 10:return t>1?`vec${t}<f16>`:"f16";case 1:return t>1?`vec${t}<f32>`:"f32";case 6:return t>1?`vec${t}<i32>`:"i32";case 12:return t>1?`vec${t}<u32>`:"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(t!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];case 22:return"i32";case 21:return"u32";default:throw new Error(`Unknown data type: ${e}`)}},di=(e,t=1)=>{let r=Bb(e,t);return typeof r=="string"?r:r[0]},Ji=(e,t=1)=>{let r=Bb(e,t);return typeof r=="string"?r:r[1]},It=(...e)=>{let t=[];return e.forEach(r=>{r.length!==0&&t.push({type:12,data:r},{type:12,data:Ue.computeStrides(r)})}),t},wn=e=>e%4===0?4:e%2===0?2:1,PO=(e="f32",t,r="0")=>!t||t===1?`${e}(${r})`:`vec${t}<${e}>(${r})`,um=(e,t,r)=>e==="f32"?r:t===1?`f32(${r})`:`vec${t}<f32>(${r})`,Xc=(e,t)=>t===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:t===2?`(${e}.x + ${e}.y)`:t===3?`(${e}.x + ${e}.y + ${e}.z)`:e,Ot=(e,t,r,n)=>e.startsWith("uniforms.")&&r>4?typeof t=="string"?n==="f16"?`${e}[(${t}) / 8][(${t}) % 8 / 4][(${t}) % 8 % 4]`:`${e}[(${t}) / 4][(${t}) % 4]`:n==="f16"?`${e}[${Math.floor(t/8)}][${Math.floor(t%8/4)}][${t%8%4}]`:`${e}[${Math.floor(t/4)}][${t%4}]`:r>1?`${e}[${t}]`:e,hy=(e,t,r,n,i)=>{let s=typeof r=="number",o=s?r:r.length,a=[...new Array(o).keys()],l=o<2?"u32":o<=4?`vec${o}<u32>`:`array<u32, ${o}>`,u=Bb(t,i),c=typeof u=="string"?u:u[1],d=typeof u=="string"?u:u[0],h={indices:l,value:c,storage:d,tensor:t},m=D=>typeof D=="string"?D:`${D}u`,g={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},v=s?"uniforms.":"",y=`${v}${e}_shape`,x=`${v}${e}_strides`,w="";for(let D=0;D<o-1;D++)w+=`
    let dim${D} = current / ${Ot(x,D,o)};
    let rest${D} = current % ${Ot(x,D,o)};
    indices[${D}] = dim${D};
    current = rest${D};
    `;w+=`indices[${o-1}] = current;`;let S=o<2?"":`
  fn o2i_${e}(offset: u32) -> ${h.indices} {
    var indices: ${h.indices};
    var current = offset;
    ${w}
    return indices;
  }`,M=D=>(g.offsetToIndices=!0,o<2?D:`o2i_${e}(${D})`),T=[];if(o>=2)for(let D=o-1;D>=0;D--)T.push(`${Ot(x,D,o)} * (indices[${D}])`);let P=o<2?"":`
  fn i2o_${e}(indices: ${h.indices}) -> u32 {
    return ${T.join("+")};
  }`,E=D=>(g.indicesToOffset=!0,o<2?D:`i2o_${e}(${D})`),A=(...D)=>o===0?"0u":`${h.indices}(${D.map(m).join(",")})`,L=(D,U)=>o<2?`${D}`:`${Ot(D,U,o)}`,B=(D,U,te)=>o<2?`${D}=${te};`:`${Ot(D,U,o)}=${te};`,V={},G=(D,U)=>{g.broadcastedIndicesToOffset=!0;let te=`${U.name}broadcastedIndicesTo${e}Offset`;if(te in V)return`${te}(${D})`;let ee=[];for(let pe=o-1;pe>=0;pe--){let Oe=U.indicesGet("outputIndices",pe+U.rank-o);ee.push(`${L(x,pe)} * (${Oe} % ${L(y,pe)})`)}return V[te]=`fn ${te}(outputIndices: ${U.type.indices}) -> u32 {
             return ${ee.length>0?ee.join("+"):"0u"};
           }`,`${te}(${D})`},z=(D,U)=>(()=>{if(h.storage===h.value)return`${e}[${D}]=${U};`;if(h.storage==="vec2<u32>"&&h.value==="i32")return`${e}[${D}]=vec2<u32>(u32(${U}), select(0u, 0xFFFFFFFFu, ${U} < 0));`;if(h.storage==="vec2<u32>"&&h.value==="u32")return`${e}[${D}]=vec2<u32>(u32(${U}), 0u);`;if(h.storage==="u32"&&h.value==="vec4<bool>")return`${e}[${D}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${U}));`;throw new Error(`not supported combination of storage type ${h.storage} and value type ${h.value} yet`)})(),K=D=>(()=>{if(h.storage===h.value)return`${e}[${D}]`;if(h.storage==="vec2<u32>"&&h.value==="i32")return`i32(${e}[${D}].x)`;if(h.storage==="vec2<u32>"&&h.value==="u32")return`u32(${e}[${D}].x)`;if(h.storage==="u32"&&h.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${D}] & 0xFFu), bool(${e}[${D}] & 0xFF00u), bool(${e}[${D}] & 0xFF0000u), bool(${e}[${D}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${h.storage} and value type ${h.value} yet`)})(),J=o<2?"":`
  fn get_${e}ByIndices(indices: ${h.indices}) -> ${c} {
    return ${K(`i2o_${e}(indices)`)};
  }`,X=o<2?"":(()=>{let D=a.map(te=>`d${te}: u32`).join(", "),U=a.map(te=>`d${te}`).join(", ");return`
  fn get_${e}(${D}) -> ${c} {
    return get_${e}ByIndices(${A(U)});
  }`})(),Q=(...D)=>{if(D.length!==o)throw new Error(`indices length must be ${o}`);let U=D.map(m).join(",");return o===0?K("0u"):o===1?K(U[0]):(g.get=!0,g.getByIndices=!0,g.indicesToOffset=!0,`get_${e}(${U})`)},W=D=>o<2?K(D):(g.getByIndices=!0,g.indicesToOffset=!0,`get_${e}ByIndices(${D})`),oe=o<2?"":`
  fn set_${e}ByIndices(indices: ${h.indices}, value: ${c}) {
    ${z(`i2o_${e}(indices)`,"value")}
  }`,ce=o<2?"":(()=>{let D=a.map(te=>`d${te}: u32`).join(", "),U=a.map(te=>`d${te}`).join(", ");return`
  fn set_${e}(${D}, value: ${c}) {
    set_${e}ByIndices(${A(U)}, value);
  }`})();return{impl:()=>{let D=[],U=!1;return g.offsetToIndices&&(D.push(S),U=!0),g.indicesToOffset&&(D.push(P),U=!0),g.broadcastedIndicesToOffset&&(Object.values(V).forEach(te=>D.push(te)),U=!0),g.set&&(D.push(ce),U=!0),g.setByIndices&&(D.push(oe),U=!0),g.get&&(D.push(X),U=!0),g.getByIndices&&(D.push(J),U=!0),!s&&U&&D.unshift(`const ${y} = ${h.indices}(${r.join(",")});`,`const ${x} = ${h.indices}(${Ue.computeStrides(r).join(",")});`),D.join(`
`)},type:h,offsetToIndices:M,indicesToOffset:E,broadcastedIndicesToOffset:G,indices:A,indicesGet:L,indicesSet:B,set:(...D)=>{if(D.length!==o+1)throw new Error(`indices length must be ${o}`);let U=D[o];if(typeof U!="string")throw new Error("value must be string");let te=D.slice(0,o).map(m).join(",");return o===0?z("0u",U):o===1?z(te[0],U):(g.set=!0,g.setByIndices=!0,g.indicesToOffset=!0,`set_${e}(${te}, ${U})`)},setByOffset:z,setByIndices:(D,U)=>o<2?z(D,U):(g.setByIndices=!0,g.indicesToOffset=!0,`set_${e}ByIndices(${D}, ${U});`),get:Q,getByOffset:K,getByIndices:W,usage:n,name:e,strides:x,shape:y,rank:o}},qe=(e,t,r,n=1)=>hy(e,t,r,"input",n),Et=(e,t,r,n=1)=>hy(e,t,r,"output",n),Z9=(e,t,r)=>hy(e,t,r,"atomicOutput",1),qI=(e,t,r,n=1)=>hy(e,t,r,"internal",n),VR=class{constructor(e,t){this.normalizedDispatchGroup=e,this.limits=t,this.internalVariables=[],this.variables=[],this.uniforms=[],this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(e){return`if (global_idx >= ${typeof e=="number"?`${e}u`:e}) { return; }`}mainStart(e=km){let t=typeof e=="number"?e:e[0],r=typeof e=="number"?1:e[1],n=typeof e=="number"?1:e[2];if(t>this.limits.maxComputeWorkgroupSizeX||r>this.limits.maxComputeWorkgroupSizeY||n>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${t}, ${r}, ${n}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(t*r*n>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${t}, ${r}, ${n}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let i=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,s=i?`@builtin(global_invocation_id) global_id : vec3<u32>,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,
                                             @builtin(local_invocation_id) local_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(num_workgroups) num_workgroups : vec3<u32>`,o=i?`let global_idx = global_id.x;
         let workgroup_index = workgroup_id.x;`:`let workgroup_index = workgroup_id.z * num_workgroups[0] * num_workgroups[1] +
             workgroup_id.y * num_workgroups[0] + workgroup_id.x;
         let global_idx = workgroup_index * ${t*r*n}u + local_idx;`;return`@compute @workgroup_size(${t}, ${r}, ${n})
  fn main(${s}) {
    ${o}
  `}appendVariableUniforms(e){e.rank!==0&&(e.shape.startsWith("uniforms.")&&this.uniforms.push({name:e.shape.replace("uniforms.",""),type:"u32",length:e.rank}),e.strides.startsWith("uniforms.")&&this.uniforms.push({name:e.strides.replace("uniforms.",""),type:"u32",length:e.rank}))}declareVariable(e,t){if(e.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(e),this.appendVariableUniforms(e);let r=e.usage==="input"?"read":"read_write",n=e.usage==="atomicOutput"?"atomic<i32>":e.type.storage;return`@group(0) @binding(${t}) var<storage, ${r}> ${e.name}: array<${n}>;`}declareVariables(...e){return e.map(t=>this.declareVariable(t,this.variableIndex++)).join(`
`)}registerInternalVariable(e){if(e.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(e),this.appendVariableUniforms(e)}registerInternalVariables(...e){return e.forEach(t=>this.registerInternalVariable(t)),this}registerUniform(e,t,r=1){return this.uniforms.push({name:e,type:t,length:r}),this}registerUniforms(e){return this.uniforms=this.uniforms.concat(e),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let e=[];for(let{name:t,type:r,length:n}of this.uniforms)if(n&&n>4)r==="f16"?e.push(`@align(16) ${t}:array<mat2x4<${r}>, ${Math.ceil(n/8)}>`):e.push(`${t}:array<vec4<${r}>, ${Math.ceil(n/4)}>`);else{let i=n==null||n===1?r:`vec${n}<${r}>`;e.push(`${t}:${i}`)}return`
      struct Uniforms { ${e.join(", ")} };
      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(e=>e.impl()).join(`
`)+this.internalVariables.map(e=>e.impl()).join(`
`)}get variablesInfo(){if(this.uniforms.length===0)return;let e=t=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(t)];return this.uniforms.map(t=>[e(t.type),t.length??1])}},e7=(e,t)=>new VR(e,t)}),WR,ET,GR,qR,HR,KR,eo,t7,r7,id=at(()=>{Bt(),Jt(),Dn(),er(),WR=(e,t)=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.");if(t.length!==0&&t.length!==e[0].dims.length)throw new Error(`perm size ${t.length} does not match input rank ${e[0].dims.length}`)},ET=(e,t)=>t.length!==0?t:[...new Array(e).keys()].reverse(),GR=(e,t)=>Ue.sortBasedOnPerm(e,ET(e.length,t)),qR=(e,t,r,n)=>{let i=`fn perm(i: ${n.type.indices}) -> ${r.type.indices} {
    var a: ${r.type.indices};`;for(let s=0;s<t;++s)i+=`a[${e[s]}]=i[${s}];`;return i+="return a;}"},HR=(e,t)=>{let r=[],n=[];for(let i=0;i<e.length;++i)e[i]!==1&&r.push(e[i]),e[t[i]]!==1&&n.push(t[i]);return{newShape:r,newPerm:n}},KR=(e,t)=>{let r=0;for(let n=0;n<e.length;++n)if(t[e[n]]!==1){if(e[n]<r)return!1;r=e[n]}return!0},eo=(e,t)=>{let r=e.dataType,n=e.dims.length,i=ET(n,t),s=GR(e.dims,i),o=e.dims,a=s,l=n<2||KR(i,e.dims),u;if(l)return u=g=>{let v=qe("input",r,o,4),y=Et("output",r,a,4);return`
  ${g.registerUniform("output_size","u32").declareVariables(v,y)}
  ${g.mainStart()}
    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    output[global_idx] = input[global_idx];
  }`},{name:"TransposeCopy",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let g=Ue.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(g/64/4)},programUniforms:[{type:12,data:Math.ceil(g/4)}]}},getShaderSource:u};let{newShape:c,newPerm:d}=HR(e.dims,i),h=Ue.areEqual(d,[2,3,1]),m=Ue.areEqual(d,[3,1,2]);if(c.length===2||h||m){o=h?[c[0],c[1]*c[2]]:m?[c[0]*c[1],c[2]]:c,a=[o[1],o[0]];let g=16;return u=v=>{let y=qe("a",r,o.length),x=Et("output",r,a.length);return`
  ${v.registerUniform("output_size","u32").declareVariables(y,x)}
  var<workgroup> tile : array<array<${x.type.value}, ${g+1}>, ${g}>;
  ${v.mainStart([g,g,1])}
    let stride = (uniforms.output_shape[1] - 1) / ${g} + 1;
    let workgroup_id_x = workgroup_index % stride;
    let workgroup_id_y = workgroup_index / stride;
    let input_col = workgroup_id_y * ${g}u + local_id.x;
    let input_row = workgroup_id_x * ${g}u + local_id.y;
    if (input_row < uniforms.a_shape[0] && input_col < uniforms.a_shape[1]) {
      tile[local_id.y][local_id.x] = ${y.getByIndices(`${y.type.indices}(input_row, input_col)`)};
    }
    workgroupBarrier();

    let output_col = workgroup_id_x * ${g}u + local_id.x;
    let output_row = workgroup_id_y * ${g}u + local_id.y;
    if (output_row < uniforms.output_shape[0] && output_col < uniforms.output_shape[1]) {
      ${x.setByIndices(`${x.type.indices}(output_row, output_col)`,"tile[local_id.x][local_id.y]")}
    }
  }`},{name:"TransposeShared",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let v=Ue.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(a[1]/g),y:Math.ceil(a[0]/g)},programUniforms:[{type:12,data:v},...It(o,a)]}},getShaderSource:u}}return u=g=>{let v=qe("a",r,o.length),y=Et("output",r,a.length);return`
  ${g.registerUniform("output_size","u32").declareVariables(v,y)}

  ${qR(i,n,v,y)}

  ${g.mainStart()}
    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${y.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${y.setByOffset("global_idx",v.getByIndices("aIndices"))}
  }`},{name:"Transpose",shaderCache:{hint:`${t}`,inputDependencies:["rank"]},getRunData:()=>{let g=Ue.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(g/64)},programUniforms:[{type:12,data:g},...It(o,a)]}},getShaderSource:u}},t7=(e,t)=>{WR(e.inputs,t.perm),e.compute(eo(e.inputs[0],t.perm))},r7=e=>Tr({perm:e.perm})}),XR,YR,QR,JR,ZR,eL,tL,rL,nL,iL,aa,n7,i7,s7,o7,a7,l7,u7,c7,d7,f7,Uge=at(()=>{Bt(),Jt(),er(),HI(),id(),XR={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},YR={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},QR={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},JR={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},ZR=(e,t)=>{let r=[];for(let n=t-e;n<t;++n)r.push(n);return r},eL=(e,t)=>{let r=[],n=e.length;for(let s=0;s<n;s++)t.indexOf(s)===-1&&r.push(e[s]);let i=t.map(s=>e[s]);return[r,i]},tL=(e,t)=>{let r=e.length+t.length,n=[],i=0;for(let s=0;s<r;s++)t.indexOf(s)===-1?n.push(e[i++]):n.push(1);return n},rL=(e,t)=>{for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0},nL=(e,t)=>{let r=[];if(!rL(e,t)){for(let n=0;n<t;++n)e.indexOf(n)===-1&&r.push(n);e.forEach(n=>r.push(n))}return r},iL=(e,t,r,n,i,s,o)=>{let a=r[0].dims,l=Ue.size(s),u=Ue.size(o),c=qe("_A",r[0].dataType,a),d=Et("output",i,s),h=64;l===1&&(h=256);let m=`
          var<workgroup> aBestValues : array<f32, ${h}>;
       `,g=v=>`
        ${v.registerUniform("reduceSize","u32").declareVariables(c,d)}
        ${m}
        fn DIV_CEIL(a : u32, b : u32) -> u32 {
          return ((a - 1u) / b + 1u);
         }
         ${v.mainStart(h)}

          let outputIndex = global_idx / ${h};
          let offset = outputIndex * uniforms.reduceSize;

          var bestValue = f32(${QR[n]});
          let Length = uniforms.reduceSize;
          for (var k = local_idx; k < Length; k = k + ${h}) {
           let candidate = f32(${c.getByOffset("offset + k")});
           bestValue = ${XR[n]};
          }
          aBestValues[local_idx] = bestValue;
          workgroupBarrier();

         var reduceSize = min(Length, ${h}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (local_idx < currentSize) {
            let candidate = aBestValues[local_idx + interval];
            bestValue = ${YR[n]};
            aBestValues[local_idx] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (local_idx == 0u) {
          ${d.setByOffset("outputIndex",`${n==="mean"?`${d.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${d.type.storage}(${JR[n]})`}`)};
         }
        }`;return{name:e,shaderCache:{hint:`${t};${h}`,inputDependencies:["type"]},getShaderSource:g,getRunData:()=>({outputs:[{dims:s,dataType:i}],dispatchGroup:{x:l},programUniforms:[{type:12,data:u}]})}},aa=(e,t,r,n)=>{let i=e.inputs.length===1?r:EO(e.inputs,r),s=i.axes;s.length===0&&!i.noopWithEmptyAxes&&(s=e.inputs[0].dims.map((m,g)=>g));let o=Ue.normalizeAxes(s,e.inputs[0].dims.length),a=o,l=e.inputs[0],u=nL(a,e.inputs[0].dims.length);u.length>0&&(l=e.compute(eo(e.inputs[0],u),{inputs:[0],outputs:[-1]})[0],a=ZR(a.length,l.dims.length));let[c,d]=eL(l.dims,a),h=c;i.keepDims&&(h=tL(c,o)),e.compute(iL(t,i.cacheKey,[l],n,e.inputs[0].dataType,h,d),{inputs:[l]})},n7=(e,t)=>{aa(e,"ReduceMeanShared",t,"mean")},i7=(e,t)=>{aa(e,"ReduceL1Shared",t,"l1")},s7=(e,t)=>{aa(e,"ReduceL2Shared",t,"l2")},o7=(e,t)=>{aa(e,"ReduceLogSumExpShared",t,"logSumExp")},a7=(e,t)=>{aa(e,"ReduceMaxShared",t,"max")},l7=(e,t)=>{aa(e,"ReduceMinShared",t,"min")},u7=(e,t)=>{aa(e,"ReduceProdShared",t,"prod")},c7=(e,t)=>{aa(e,"ReduceSumShared",t,"sum")},d7=(e,t)=>{aa(e,"ReduceSumSquareShared",t,"sumSquare")},f7=(e,t)=>{aa(e,"ReduceLogSumShared",t,"logSum")}}),la,sL,Xw,EO,ua,oL,aL,lL,uL,cL,dL,fL,hL,pL,mL,ca,h7,p7,m7,g7,v7,y7,_7,b7,w7,x7,HI=at(()=>{Bt(),Jt(),Dn(),er(),Uge(),la=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},sL=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],Xw=(e,t,r,n,i,s,o=!1,a=!1)=>{let l=[],u=r[0].dims,c=u.length,d=Ue.normalizeAxes(i,c),h=!a&&d.length===0;u.forEach((v,y)=>{h||d.indexOf(y)>=0?o&&l.push(1):l.push(v)});let m=l.length,g=Ue.size(l);return{name:e,shaderCache:t,getShaderSource:v=>{let y=[],x=qe("_A",r[0].dataType,c),w=Et("output",s,m),S=n(x,w,d),M=S[2];for(let T=0,P=0;T<c;T++)h||d.indexOf(T)>=0?(o&&P++,M=`for(var j${T}: u32 = 0; j${T} < ${u[T]}; j${T}++) {
                  ${S[2].includes("last_index")?`let last_index = j${T};`:""}
                  ${x.indicesSet("input_indices",T,`j${T}`)}
                  ${M}
                }`):(y.push(`${x.indicesSet("input_indices",T,w.indicesGet("output_indices",P))};`),P++);return`

        ${v.registerUniform("output_size","u32").declareVariables(x,w)}

        ${v.mainStart()}
          ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var input_indices: ${x.type.indices};
          let output_indices = ${w.offsetToIndices("global_idx")};

          ${y.join(`
`)}
          ${S[0]}       // init ops for reduce max/min
          ${S[1]}
          ${M}
          ${S[3]}
          ${S.length===4?w.setByOffset("global_idx","value"):S.slice(4).join(`
`)}
        }`},getRunData:()=>({outputs:[{dims:l,dataType:s}],dispatchGroup:{x:Math.ceil(g/64)},programUniforms:[{type:12,data:g},...It(u,l)]})}},EO=(e,t)=>{let r=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(n=>r.push(Number(n))),Tr({axes:r,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})},ua=(e,t,r,n)=>{let i=e.inputs,s=i.length===1?r:EO(i,r);e.compute(Xw(t,{hint:s.cacheKey,inputDependencies:["rank"]},[i[0]],s.noopWithEmptyAxes&&s.axes.length===0?sL:n,s.axes,i[0].dataType,s.keepDims,s.noopWithEmptyAxes),{inputs:[0]})},oL=(e,t)=>{la(e.inputs),ua(e,"ReduceLogSum",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += ${r.getByIndices("input_indices")};`,"value = log(value);"])},aL=(e,t)=>{la(e.inputs),ua(e,"ReduceL1",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += abs(${r.getByIndices("input_indices")});`,""])},lL=(e,t)=>{la(e.inputs),ua(e,"ReduceL2",t,(r,n)=>[`var t = ${n.type.value}(0); var value = ${n.type.value}(0);`,"",`t = ${r.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},uL=(e,t)=>{la(e.inputs),ua(e,"ReduceLogSumExp",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += exp(${r.getByIndices("input_indices")});`,"value = log(value);"])},cL=(e,t)=>{la(e.inputs),ua(e,"ReduceMax",t,(r,n,i)=>{let s=[];for(let o=0;o<r.rank;o++)(i.indexOf(o)>=0||i.length===0)&&s.push(r.indicesSet("input_indices",o,0));return[`${s.join(`
`)}`,`var value = ${r.getByIndices("input_indices")};`,`value = max(value, ${r.getByIndices("input_indices")});`,""]})},dL=(e,t)=>{la(e.inputs),ua(e,"ReduceMean",t,(r,n,i)=>{let s=1;for(let o=0;o<r.rank;o++)(i.indexOf(o)>=0||i.length===0)&&(s*=e.inputs[0].dims[o]);return["var sum = f32(0);","",`sum += f32(${r.getByIndices("input_indices")});`,`let value = ${n.type.value}(sum / ${s});`]})},fL=(e,t)=>{la(e.inputs),ua(e,"ReduceMin",t,(r,n,i)=>{let s=[];for(let o=0;o<r.rank;o++)(i.indexOf(o)>=0||i.length===0)&&s.push(`input_indices[${o}] = 0;`);return[`${s.join(`
`)}`,`var value = ${r.getByIndices("input_indices")};`,`value = min(value, ${r.getByIndices("input_indices")});`,""]})},hL=(e,t)=>{la(e.inputs),ua(e,"ReduceProd",t,(r,n)=>[`var value = ${n.type.storage}(1);`,"",`value *= ${r.getByIndices("input_indices")};`,""])},pL=(e,t)=>{la(e.inputs),ua(e,"ReduceSum",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += ${r.getByIndices("input_indices")};`,""])},mL=(e,t)=>{la(e.inputs),ua(e,"ReduceSumSquare",t,(r,n)=>[`var t = ${n.type.value}(0); var value = ${n.type.value}(0);`,"",`t = ${r.getByIndices("input_indices")}; value += t * t;`,""])},ca=(e,t,r)=>{if(t.length===0)return r;let n=1,i=1;for(let s=0;s<t.length;s++)t.indexOf(s)===-1?n*=e[s]:i*=e[s];return i<32&&n>1024},h7=(e,t)=>{ca(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?dL(e,t):n7(e,t)},p7=(e,t)=>{ca(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?aL(e,t):i7(e,t)},m7=(e,t)=>{ca(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?lL(e,t):s7(e,t)},g7=(e,t)=>{ca(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?uL(e,t):o7(e,t)},v7=(e,t)=>{ca(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?cL(e,t):a7(e,t)},y7=(e,t)=>{ca(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?fL(e,t):l7(e,t)},_7=(e,t)=>{ca(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?hL(e,t):u7(e,t)},b7=(e,t)=>{ca(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?pL(e,t):c7(e,t)},w7=(e,t)=>{ca(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?mL(e,t):d7(e,t)},x7=(e,t)=>{ca(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?oL(e,t):f7(e,t)}}),CT,M7,T7,CO,Vge=at(()=>{Bt(),Dn(),HI(),CT=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},M7=(e,t)=>{CT(e.inputs);let r=(n,i,s)=>{let o=[];for(let a=0;a<n.rank;a++)(s.indexOf(a)>=0||s.length===0)&&o.push(`input_indices[${a}] = 0;`);return[`${o.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${n.getByIndices("input_indices")} ${t.selectLastIndex>0?"<=":"<"} value) {
         value = ${n.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(Xw("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},T7=(e,t)=>{CT(e.inputs);let r=(n,i,s)=>{let o=[];for(let a=0;a<n.rank;a++)(s.indexOf(a)>=0||s.length===0)&&o.push(`input_indices[${a}] = 0;`);return[`${o.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${n.getByIndices("input_indices")} ${t.selectLastIndex>0?">=":">"} value) {
         value = ${n.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(Xw("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},CO=e=>Tr(e)}),gL,zb,vL,yL,_L,M_,bL,S7,KI=at(()=>{Bt(),Jt(),GI(),er(),gL=(e,t)=>{let r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5];if(o&&a)throw new Error("Attention cannot have both past and attention_bias");if(r.dims.length!==3)throw new Error('Input "input" must have 3 dimensions');let l=r.dims[0],u=r.dims[1],c=r.dims[2];if(i.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimensions');if(n.dims.length!==2)throw new Error('Input "weights" is expected to have 2 dimensions');if(n.dims[0]!==c)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(i.dims[0]!==n.dims[1])throw new Error('Input "bias" dimension 0 should have same length as dimension 1 of input "weights"');let d=i.dims[0]/3,h=d,m=h;if(t.qkvHiddenSizes.length>0){if(t.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let S of t.qkvHiddenSizes)if(S%t.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");d=t.qkvHiddenSizes[0],h=t.qkvHiddenSizes[1],m=t.qkvHiddenSizes[2]}let g=u;if(d!==h)throw new Error("qkv_hidden_sizes first element should be same as the second");if(i.dims[0]!==d+h+m)throw new Error('Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes');let v=0;if(o){if(h!==m)throw new Error('Input "past" expect k_hidden_size == v_hidden_size');if(o.dims.length!==5)throw new Error('Input "past" must have 5 dimensions');if(o.dims[0]!==2)throw new Error('Input "past" first dimension must be 2');if(o.dims[1]!==l)throw new Error('Input "past" second dimension must be batch_size');if(o.dims[2]!==t.numHeads)throw new Error('Input "past" third dimension must be num_heads');if(o.dims[4]!==h/t.numHeads)throw new Error('Input "past" fifth dimension must be k_hidden_size / num_heads');t.pastPresentShareBuffer||(v=o.dims[3])}let y=g+v,x=-1,w=0;if(s)throw new Error("Mask not supported");if(o)throw new Error("past is not supported");if(a){if(a.dims.length!==4)throw new Error('Input "attention_bias" must have 4 dimensions');if(a.dims[0]!==l||a.dims[1]!==t.numHeads||a.dims[2]!==u||a.dims[3]!==y)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:l,sequenceLength:u,pastSequenceLength:v,kvSequenceLength:g,totalSequenceLength:y,maxSequenceLength:x,inputHiddenSize:c,hiddenSize:d,vHiddenSize:m,headSize:Math.floor(d/t.numHeads),vHeadSize:Math.floor(m/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:w,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},zb=(e,t,r)=>t&&e?`
      let total_sequence_length_input = u32(${t.getByOffset("0")});
      let present_sequence_length = max(total_sequence_length_input, uniforms.past_sequence_length);
      let is_subsequent_prompt: bool = sequence_length > 1 && sequence_length != total_sequence_length_input;
      let is_first_prompt: bool = is_subsequent_prompt == false && sequence_length == total_sequence_length_input;
      total_sequence_length = u32(${e?.getByOffset("batchIdx")}) + 1;
      var past_sequence_length: u32 = 0;
      if (is_first_prompt == false) {
        past_sequence_length = total_sequence_length - sequence_length;
      }
       `:`
    ${r?"let past_sequence_length = uniforms.past_sequence_length":""};
    let present_sequence_length = total_sequence_length;
    `,vL=(e,t,r,n,i,s,o,a)=>{let l=wn(o?1:s),u=64,c=s/l;c<u&&(u=32);let d=Math.ceil(s/l/u),h=[{type:12,data:t},{type:12,data:r},{type:12,data:n},{type:12,data:i},{type:12,data:c},{type:12,data:d}],m=di(e.dataType,l),g=Ji(1,l),v=["type"];o&&v.push("type"),a&&v.push("type");let y=x=>{let w=Et("x",e.dataType,e.dims,l),S=[w],M=o?qe("seq_lens",o.dataType,o.dims):void 0;M&&S.push(M);let T=a?qe("total_sequence_length_input",a.dataType,a.dims):void 0;T&&S.push(T);let P=Ji(e.dataType),E=[{name:"batch_size",type:"u32"},{name:"num_heads",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"sequence_length",type:"u32"},{name:"total_sequence_length",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`
  var<workgroup> thread_max: array<f32, ${u}>;
  var<workgroup> thread_sum: array<f32, ${u}>;
  ${x.registerUniforms(E).declareVariables(...S)}
  ${x.mainStart([u,1,1])}
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let sequence_length = uniforms.sequence_length;
    var total_sequence_length = uniforms.total_sequence_length;
    ${zb(M,T,!1)}
    let local_offset = local_idx * uniforms.elements_per_thread;
    let offset = (global_idx / ${u}) * uniforms.total_sequence_length + local_offset;
    let seq_causal_length = ${o?"u32(past_sequence_length + workgroup_id.y + 1)":"total_sequence_length"};
    var thread_max_vector = ${g}(-3.402823e+38f);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      thread_max_vector = max(${g}(x[offset + i]), thread_max_vector);
    }
    thread_max[local_idx] = ${(()=>{switch(l){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${l}`)}})()};
    workgroupBarrier();

    var max_value =  f32(-3.402823e+38f);
    for (var i = 0u; i < ${u}; i++) {
      max_value = max(thread_max[i], max_value);
    }

    var sum_vector = ${g}(0);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      sum_vector += exp(${g}(x[offset + i]) - max_value);
    }
    thread_sum[local_idx] = ${(()=>{switch(l){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${l}`)}})()};
    workgroupBarrier();

    var sum: f32 = 0;
    for (var i = 0u; i < ${u}; i++) {
      sum += thread_sum[i];
    }

    if (sum == 0) {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        x[offset + i] = ${w.type.value}(${P}(1.0) / ${P}(seq_causal_length));
      }
    } else {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        var f32input = ${g}(x[offset + i]);
        x[offset + i] = ${w.type.value}(exp(f32input - max_value) / sum);
      }
    }
      ${o?`
        for (var total_seq_id: u32 = seq_causal_length; total_seq_id + local_offset < uniforms.total_sequence_length; total_seq_id++) {
          x[offset + total_seq_id] = ${w.type.value}(${P}(0));
        }`:""};
  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${u};${m};${l}`,inputDependencies:v},getShaderSource:y,getRunData:()=>({outputs:[],dispatchGroup:{x:1,y:i,z:t*r},programUniforms:h})}},yL=(e,t,r,n,i,s,o,a,l)=>{let u=o+s.kvSequenceLength,c=[s.batchSize,s.numHeads,s.sequenceLength,u],d=e>1&&n,h=s.kvNumHeads?s.kvNumHeads:s.numHeads,m=d?[s.batchSize,h,u,s.headSize]:void 0,g=s.nReps?s.nReps:1,v=s.scale===0?1/Math.sqrt(s.headSize):s.scale,y=wn(s.headSize),x=s.headSize/y,w=12,S={x:Math.ceil(u/w),y:Math.ceil(s.sequenceLength/w),z:s.batchSize*s.numHeads},M=[{type:12,data:s.sequenceLength},{type:12,data:x},{type:12,data:u},{type:12,data:s.numHeads},{type:12,data:s.headSize},{type:1,data:v},{type:12,data:o},{type:12,data:s.kvSequenceLength},{type:12,data:g}],T=d&&n&&Ue.size(n.dims)>0,P=["type","type"];T&&P.push("type"),i&&P.push("type"),a&&P.push("type"),l&&P.push("type");let E=[{dims:c,dataType:t.dataType,gpuDataType:0}];d&&E.push({dims:m,dataType:t.dataType,gpuDataType:0});let A=L=>{let B=qe("q",t.dataType,t.dims,y),V=qe("key",r.dataType,r.dims,y),G=[B,V];if(T){let oe=qe("past_key",n.dataType,n.dims,y);G.push(oe)}i&&G.push(qe("attention_bias",i.dataType,i.dims));let z=a?qe("seq_lens",a.dataType,a.dims):void 0;z&&G.push(z);let K=l?qe("total_sequence_length_input",l.dataType,l.dims):void 0;K&&G.push(K);let J=Et("output",t.dataType,c),X=[J];d&&X.push(Et("present_key",t.dataType,m,y));let Q=Ji(1,y),W=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"alpha",type:"f32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${w}u;

  var<workgroup> tileQ: array<${B.type.storage}, ${w*w}>;
  var<workgroup> tileK: array<${B.type.storage}, ${w*w}>;
  ${L.registerUniforms(W).declareVariables(...G,...X)}
  ${L.mainStart([w,w,1])}
    // x holds the N and y holds the M
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let kvHeadIdx = ${g===1?"headIdx":"headIdx / uniforms.n_reps"};
    let kv_num_heads = ${g===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let m = workgroup_id.y * TILE_SIZE;
    let n = workgroup_id.x * TILE_SIZE;
    let sequence_length = uniforms.M;
    var total_sequence_length = uniforms.N;
    ${zb(z,K,!0)}
    let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx;
    let qOffset = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
    ${T&&d?"let pastKeyOffset = absKvHeadIdx * uniforms.past_sequence_length * uniforms.K;":""};
    let kOffset = absKvHeadIdx * uniforms.kv_sequence_length * uniforms.K;
    ${d?"let presentKeyOffset = absKvHeadIdx * uniforms.N * uniforms.K;":""}
    var value = ${Q}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
      ${T&&d?`
              if (n + local_id.y < past_sequence_length) {
                tileK[idx] = past_key[pastKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
              } else if (n + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
                tileK[idx] = key[kOffset + (n + local_id.y - past_sequence_length) * uniforms.K + w + local_id.x];
              }`:`
          if (n + local_id.y < uniforms.kv_sequence_length) {
            tileK[idx] = key[kOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
          }`}
      ${d?`if (n + local_id.y < present_sequence_length) {
        present_key[presentKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x] = tileK[idx];
      }`:""}
      }
      workgroupBarrier();

      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
          value += ${Q}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);
      }

      workgroupBarrier();
    }

    if (global_id.y < uniforms.M && global_id.x < total_sequence_length) {
      let headOffset = workgroup_id.z * uniforms.M * uniforms.N;
      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;
      var sum: f32 = ${(()=>{switch(y){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${y}`)}})()};
        output[outputIdx] = ${J.type.value} (sum * uniforms.alpha) + ${i?"attention_bias[outputIdx]":"0.0"};
    }
  }`};return{name:"AttentionProbs",shaderCache:{hint:`${y};${i!==void 0};${n!==void 0};${e}`,inputDependencies:P},getRunData:()=>({outputs:E,dispatchGroup:S,programUniforms:M}),getShaderSource:A}},_L=(e,t,r,n,i,s,o=void 0,a=void 0)=>{let l=s+i.kvSequenceLength,u=i.nReps?i.nReps:1,c=i.vHiddenSize*u,d=e>1&&n,h=i.kvNumHeads?i.kvNumHeads:i.numHeads,m=d?[i.batchSize,h,l,i.headSize]:void 0,g=[i.batchSize,i.sequenceLength,c],v=12,y={x:Math.ceil(i.vHeadSize/v),y:Math.ceil(i.sequenceLength/v),z:i.batchSize*i.numHeads},x=[{type:12,data:i.sequenceLength},{type:12,data:l},{type:12,data:i.vHeadSize},{type:12,data:i.numHeads},{type:12,data:i.headSize},{type:12,data:c},{type:12,data:s},{type:12,data:i.kvSequenceLength},{type:12,data:u}],w=d&&n&&Ue.size(n.dims)>0,S=["type","type"];w&&S.push("type"),o&&S.push("type"),a&&S.push("type");let M=[{dims:g,dataType:t.dataType,gpuDataType:0}];d&&M.push({dims:m,dataType:t.dataType,gpuDataType:0});let T=P=>{let E=qe("probs",t.dataType,t.dims),A=qe("v",r.dataType,r.dims),L=[E,A];w&&L.push(qe("past_value",n.dataType,n.dims));let B=o?qe("seq_lens",o.dataType,o.dims):void 0;o&&L.push(B);let V=a?qe("total_sequence_length_input",a.dataType,a.dims):void 0;a&&L.push(V);let G=[Et("output",t.dataType,g)];d&&G.push(Et("present_value",t.dataType,m));let z=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"v_hidden_size",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${v}u;
  var<workgroup> tileQ: array<${E.type.value}, ${v*v}>;
  var<workgroup> tileV: array<${E.type.value}, ${v*v}>;
  ${P.registerUniforms(z).declareVariables(...L,...G)}
  ${P.mainStart([v,v,1])}
   let headIdx = workgroup_id.z % uniforms.num_heads;
   let batchIdx = workgroup_id.z / uniforms.num_heads;
   let kvHeadIdx = ${u===1?"headIdx":"headIdx / uniforms.n_reps"};
   let kv_num_heads = ${u===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
   let m = global_id.y;
   let n = global_id.x;
   let sequence_length = uniforms.M;
   var total_sequence_length = uniforms.K;
   ${zb(B,V,!0)}
   let offsetA = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
   let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx; // kvHeadIdx is relative to the batch
   ${w&&d?"let pastValueOffset = absKvHeadIdx * uniforms.N * uniforms.past_sequence_length + n;":""};
   let vOffset = absKvHeadIdx * uniforms.N * uniforms.kv_sequence_length + n;
   ${d?"let presentValueOffset = absKvHeadIdx * uniforms.N * uniforms.K + n;":""}
   var value = ${E.type.storage}(0);
   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
        ${w&&d?`
        if (w + local_id.y < past_sequence_length) {
          tileV[idx] = past_value[pastValueOffset + (w + local_id.y) * uniforms.N];
        } else if (w + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
          tileV[idx] = v[vOffset + (w + local_id.y - past_sequence_length) * uniforms.N];
        }
      `:`
            if (w + local_id.y < uniforms.kv_sequence_length) {
              tileV[idx] = v[vOffset + (w + local_id.y) * uniforms.N];
            }`}
        ${d?`
            if (w + local_id.y < present_sequence_length) {
          present_value[presentValueOffset + (w + local_id.y) * uniforms.N] = tileV[idx];
        }`:""}
      }
     workgroupBarrier();
     for (var k: u32 = 0u; k < TILE_SIZE && w+k < total_sequence_length; k++) {
       value += tileQ[TILE_SIZE * local_id.y + k] * tileV[TILE_SIZE * k + local_id.x];
     }
     workgroupBarrier();
   }

   // we need to transpose output from BNSH_v to BSND_v
   if (m < uniforms.M && n < uniforms.N) {
     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size
       + headIdx * uniforms.N + n;
     output[outputIdx] = value;
   }
  }`};return{name:"AttentionScore",shaderCache:{hint:`${n!==void 0};${e}`,inputDependencies:S},getRunData:()=>({outputs:M,dispatchGroup:y,programUniforms:x}),getShaderSource:T}},M_=(e,t,r,n,i,s,o,a,l,u,c=void 0,d=void 0)=>{let h=Math.min(e.outputCount,1+(o?1:0)+(a?1:0)),m=h>1?u.pastSequenceLength:0,g=m+u.kvSequenceLength,v=l&&Ue.size(l.dims)>0?l:void 0,y=[t,r];h>1&&o&&Ue.size(o.dims)>0&&y.push(o),v&&y.push(v),c&&y.push(c),d&&y.push(d);let x=e.compute(yL(h,t,r,o,v,u,m,c,d),{inputs:y,outputs:h>1?[-1,1]:[-1]})[0];e.compute(vL(x,u.batchSize,u.numHeads,m,u.sequenceLength,g,c,d),{inputs:c&&d?[x,c,d]:[x],outputs:[]});let w=[x,n];h>1&&a&&Ue.size(a.dims)>0&&w.push(a),c&&w.push(c),d&&w.push(d),e.compute(_L(h,x,n,a,u,m,c,d),{inputs:w,outputs:h>1?[0,2]:[0]})},bL=(e,t)=>{let r=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],n=t.sequenceLength,i=t.inputHiddenSize,s=t.headSize,o=12,a={x:Math.ceil(t.headSize/o),y:Math.ceil(t.sequenceLength/o),z:t.batchSize*t.numHeads},l=[e.inputs[0],e.inputs[1],e.inputs[2]],u=[{type:12,data:n},{type:12,data:i},{type:12,data:s},{type:12,data:t.numHeads},{type:12,data:t.headSize},{type:12,data:t.hiddenSize},{type:12,data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}],c=d=>{let h=Et("output_q",l[0].dataType,r),m=Et("output_k",l[0].dataType,r),g=Et("output_v",l[0].dataType,r),v=qe("input",l[0].dataType,l[0].dims),y=qe("weight",l[1].dataType,l[1].dims),x=qe("bias",l[2].dataType,l[2].dims),w=v.type.storage,S=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`
  const TILE_SIZE = ${o}u;
  var<workgroup> tileInput: array<${w}, ${o*o}>;
  var<workgroup> tileWeightQ: array<${w}, ${o*o}>;
  var<workgroup> tileWeightK: array<${w}, ${o*o}>;
  var<workgroup> tileWeightV: array<${w}, ${o*o}>;
  ${d.registerUniforms(S).declareVariables(v,y,x,h,m,g)}
  ${d.mainStart([o,o,1])}
    let batchIndex = workgroup_id.z / uniforms.num_heads;
    let headNumber = workgroup_id.z % uniforms.num_heads;
    let m = global_id.y;
    let n = global_id.x;

    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;
    let biasOffsetQ = headNumber * uniforms.head_size;
    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;
    let biasOffsetV = uniforms.hidden_size + biasOffsetK;

    var valueQ = ${w}(0);
    var valueK = ${w}(0);
    var valueV = ${w}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        let offset = n + (w + local_id.y) * uniforms.ldb;
        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];
        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];
        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];
      }
      workgroupBarrier();
      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {
        let inputTileOffset = TILE_SIZE * local_id.y + k;
        let weightTileOffset = TILE_SIZE * k + local_id.x;
        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];
        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];
        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];
      }

      workgroupBarrier();
    }

    let headOffset = (m * uniforms.N + n) % uniforms.head_size;
    valueQ += bias[headOffset + biasOffsetQ];
    valueK += bias[headOffset + biasOffsetK];
    valueV += bias[headOffset + biasOffsetV];

    let offset = workgroup_id.z * uniforms.M * uniforms.N;
    if (m < uniforms.M && n < uniforms.N) {
      let outputIdx = offset + m * uniforms.N + n;
      output_q[outputIdx] = valueQ;
      output_k[outputIdx] = valueK;
      output_v[outputIdx] = valueV;
    }
  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:a,programUniforms:u}),getShaderSource:c},{inputs:l,outputs:[-1,-1,-1]})},S7=(e,t)=>{let r=gL(e.inputs,t),[n,i,s]=bL(e,r);return M_(e,n,i,s,e.inputs[4],void 0,void 0,void 0,e.inputs[5],r)}}),wL,xL,ML,P7,Wge=at(()=>{Ia(),Bt(),Jt(),Dn(),er(),wL=(e,t)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let r=(n,i,s)=>{let o=i.length;if(o!==n.length)throw new Error(`${s}: num dimensions != ${o}`);i.forEach((a,l)=>{if(a!==n[l])throw new Error(`${s}: dim[${l}] do not match`)})};if(e[0].dims.length>1){let n=t.format==="NHWC"?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);r(e[1].dims,n,"Invalid input scale"),r(e[2].dims,n,"Invalid input B"),r(e[3].dims,n,"Invalid input mean"),r(e[4].dims,n,"Invalid input var")}else r(e[1].dims,[1],"Invalid input scale"),r(e[2].dims,[1],"Invalid input B"),r(e[3].dims,[1],"Invalid input mean"),r(e[4].dims,[1],"Invalid input var")},xL=(e,t)=>{let{epsilon:r,spatial:n,format:i}=t,s=e[0].dims,o=n?wn(s[s.length-1]):1,a=i==="NHWC"&&s.length>1?o:1,l=Ue.size(s)/o,u=n,c=u?s.length:s,d=qe("x",e[0].dataType,e[0].dims,o),h=qe("scale",e[1].dataType,e[1].dims,a),m=qe("bias",e[2].dataType,e[2].dims,a),g=qe("inputMean",e[3].dataType,e[3].dims,a),v=qe("inputVar",e[4].dataType,e[4].dims,a),y=Et("y",e[0].dataType,c,o),x=()=>{let S="";if(n)S=`let cOffset = ${s.length===1?"0u":i==="NHWC"?`outputIndices[${s.length-1}] / ${o}`:"outputIndices[1]"};`;else if(i==="NCHW")S=`
            ${y.indicesSet("outputIndices","0","0")}
            let cOffset = ${y.indicesToOffset("outputIndices")};`;else{S=`var cIndices = ${h.type.indices}(0);
                       cIndices[0] = outputIndices[${s.length-1}];`;for(let M=1;M<h.rank;M++)S+=`cIndices[${M}] = outputIndices[${M}];`;S+=`let cOffset = ${h.indicesToOffset("cIndices")};`}return S},w=S=>`
  const epsilon = ${r};
  ${S.registerUniform("outputSize","u32").declareVariables(d,h,m,g,v,y)}
  ${S.mainStart()}
  ${S.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
    var outputIndices = ${y.offsetToIndices(`global_idx * ${o}`)};
    ${x()}
    let scale = ${h.getByOffset("cOffset")};
    let bias = ${m.getByOffset("cOffset")};
    let inputMean = ${g.getByOffset("cOffset")};
    let inputVar = ${v.getByOffset("cOffset")};
    let x = ${d.getByOffset("global_idx")};
    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;
    ${y.setByOffset("global_idx","value")}
  }`;return{name:"BatchNormalization",shaderCache:{hint:`${t.epsilon}_${t.format}_${n}_${o}`,inputDependencies:u?["rank","type","type","type","type"]:void 0},getShaderSource:w,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:u?[{type:12,data:l},...It(s)]:[{type:12,data:l}]})}},ML=e=>Tr(e),P7=(e,t)=>{let{inputs:r,outputCount:n}=e,i=ML({...t,outputCount:n});if(Zr.webgpu.validateInputContent&&wL(r,i),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(xL(r,i))}}),TL,SL,E7,Gge=at(()=>{Jt(),er(),TL=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},SL=e=>{let t=e[0].dims,r=e[0].dims[2],n=Ue.size(t)/4,i=e[0].dataType,s=qe("input",i,t,4),o=qe("bias",i,[r],4),a=qe("residual",i,t,4),l=Et("output",i,t,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(n/64)}}),getShaderSource:u=>`
  const channels = ${r}u / 4;
  ${u.declareVariables(s,o,a,l)}

  ${u.mainStart()}
    ${u.guardAgainstOutOfBoundsWorkgroupSizes(n)}
    let value = ${s.getByOffset("global_idx")}
      + ${o.getByOffset("global_idx % channels")} + ${a.getByOffset("global_idx")};
    ${l.setByOffset("global_idx","value")}
  }`}},E7=e=>{TL(e.inputs),e.compute(SL(e.inputs))}}),PL,_r,C7,A7,O7,k7,I7,j7,$7,N7,D7,EL,R7,L7,F7,B7,Ny,z7,xw,U7,V7,W7,G7,q7,H7,K7,X7,Y7,Q7,J7,Z7,eX,tX,rX,nX,AT,iX,AO,OO,sX,oX,aX,CL,AL,lX,XI=at(()=>{Bt(),Jt(),Dn(),er(),PL=(e,t,r,n,i,s,o)=>{let a=Math.ceil(t/4),l="";typeof i=="string"?l=`${i}(a)`:l=i("a");let u=qe("inputData",r,[a],4),c=Et("outputData",n,[a],4),d=[{name:"vec_size",type:"u32"}];return o&&d.push(...o),`
      ${e.registerUniforms(d).declareVariables(u,c)}

  ${s??""}

  ${e.mainStart()}
    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}

    let a = ${u.getByOffset("global_idx")};
    ${c.setByOffset("global_idx",l)}
  }`},_r=(e,t,r,n,i,s=e.dataType,o,a)=>{let l=[{type:12,data:Math.ceil(Ue.size(e.dims)/4)}];return o&&l.push(...o),{name:t,shaderCache:{hint:i,inputDependencies:["type"]},getShaderSource:u=>PL(u,Ue.size(e.dims),e.dataType,s,r,n,a),getRunData:u=>({outputs:[{dims:e.dims,dataType:s}],dispatchGroup:{x:Math.ceil(Ue.size(u[0].dims)/64/4)},programUniforms:l})}},C7=e=>{e.compute(_r(e.inputs[0],"Abs","abs"))},A7=e=>{e.compute(_r(e.inputs[0],"Acos","acos"))},O7=e=>{e.compute(_r(e.inputs[0],"Acosh","acosh"))},k7=e=>{e.compute(_r(e.inputs[0],"Asin","asin"))},I7=e=>{e.compute(_r(e.inputs[0],"Asinh","asinh"))},j7=e=>{e.compute(_r(e.inputs[0],"Atan","atan"))},$7=e=>{e.compute(_r(e.inputs[0],"Atanh","atanh"))},N7=e=>Tr(e),D7=(e,t)=>{let r;switch(t.to){case 10:r="vec4<f16>";break;case 1:r="vec4<f32>";break;case 12:r="vec4<u32>";break;case 6:r="vec4<i32>";break;case 9:r="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute 'to' from 'Cast' operator): ${t.to}`)}e.compute(_r(e.inputs[0],"Cast",r,void 0,t.cacheKey,t.to))},EL=e=>{let t,r,n=e.length>=2&&e[1].data!==0,i=e.length>=3&&e[2].data!==0;switch(e[0].dataType){case 1:t=n?e[1].getFloat32Array()[0]:-34028234663852886e22,r=i?e[2].getFloat32Array()[0]:34028234663852886e22;break;case 10:t=n?e[1].getUint16Array()[0]:64511,r=i?e[2].getUint16Array()[0]:31743;break;default:throw new Error("Unsupport data type")}return Tr({min:t,max:r})},R7=(e,t)=>{let r=t||EL(e.inputs),n=Ji(e.inputs[0].dataType);e.compute(_r(e.inputs[0],"Clip",i=>`clamp(${i}, vec4<${n}>(uniforms.min), vec4<${n}>(uniforms.max))`,void 0,r.cacheKey,void 0,[{type:e.inputs[0].dataType,data:r.min},{type:e.inputs[0].dataType,data:r.max}],[{name:"min",type:n},{name:"max",type:n}]),{inputs:[0]})},L7=e=>{e.compute(_r(e.inputs[0],"Ceil","ceil"))},F7=e=>{e.compute(_r(e.inputs[0],"Cos","cos"))},B7=e=>{e.compute(_r(e.inputs[0],"Cosh","cosh"))},Ny=e=>Tr(e),z7=(e,t)=>{let r=Ji(e.inputs[0].dataType);e.compute(_r(e.inputs[0],"Elu",n=>`elu_vf32(${n})`,`
  const elu_alpha_ = ${r}(${t.alpha});

  fn elu_f32(a: ${r}) -> ${r} {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<${r}>) -> vec4<${r}> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,t.cacheKey))},xw=(e="f32")=>`
const r0: ${e} = 0.3275911;
const r1: ${e} = 0.254829592;
const r2: ${e} = -0.284496736;
const r3: ${e} = 1.421413741;
const r4: ${e} = -1.453152027;
const r5: ${e} = 1.061405429;

fn erf_vf32(v: vec4<${e}>) -> vec4<${e}> {
  let absv = abs(v);
  let x = 1.0 / (1.0 + r0 * absv);
  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
}`,U7=e=>{let t=Ji(e.inputs[0].dataType);e.compute(_r(e.inputs[0],"Erf",r=>`erf_vf32(${r})`,xw(t)))},V7=e=>{e.compute(_r(e.inputs[0],"Exp","exp"))},W7=e=>{e.compute(_r(e.inputs[0],"Floor","floor"))},G7=e=>{let t=Ji(e.inputs[0].dataType);e.compute(_r(e.inputs[0],"Gelu",r=>`0.5 * ${r} * (1.0 + erf_vf32(${r} * 0.7071067811865475))`,xw(t)))},q7=(e,t)=>{let r=Ji(e.inputs[0].dataType);e.compute(_r(e.inputs[0],"LeakyRelu",n=>`select(leaky_relu_alpha_ * ${n}, ${n}, ${n} >= vec4<${r}>(0.0))`,`const leaky_relu_alpha_ = ${r}(${t.alpha});`,t.cacheKey))},H7=e=>{e.compute(_r(e.inputs[0],"Not",t=>`!${t}`))},K7=e=>{e.compute(_r(e.inputs[0],"Neg",t=>`-${t}`))},X7=e=>{e.compute(_r(e.inputs[0],"Reciprocal",t=>`1.0/${t}`))},Y7=e=>{let t=Ji(e.inputs[0].dataType);e.compute(_r(e.inputs[0],"Relu",r=>`select(vec4<${t}>(0.0), ${r}, ${r} > vec4<${t}>(0.0))`))},Q7=e=>{e.compute(_r(e.inputs[0],"Sigmoid",t=>`(1.0 / (1.0 + exp(-${t})))`))},J7=e=>Tr(e),Z7=(e,t)=>{let r=Ji(e.inputs[0].dataType);e.compute(_r(e.inputs[0],"HardSigmoid",n=>`max(vec4<${r}>(0.0), min(vec4<${r}>(1.0), ${t.alpha} * ${n} + vec4<${r}>(${t.beta})))`,void 0,t.cacheKey))},eX=e=>{e.compute(_r(e.inputs[0],"Sin","sin"))},tX=e=>{e.compute(_r(e.inputs[0],"Sinh","sinh"))},rX=e=>{e.compute(_r(e.inputs[0],"Sqrt","sqrt"))},nX=e=>{e.compute(_r(e.inputs[0],"Tan","tan"))},AT=e=>`sign(${e}) * (1 - exp(-2 * abs(${e}))) / (1 + exp(-2 * abs(${e})))`,iX=e=>{e.compute(_r(e.inputs[0],"Tanh",AT))},AO=(e="f32")=>`
const fast_gelu_a: ${e} = 0.5;
const fast_gelu_b: ${e} = 0.7978845608028654;
const fast_gelu_c: ${e} = 0.035677408136300125;

fn tanh_v(v: vec4<${e}>) -> vec4<${e}> {
  return ${AT("v")};
}
`,OO=e=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e} * (fast_gelu_c * ${e} * ${e} + fast_gelu_b))) * ${e}`,sX=e=>{let t=Ji(e.inputs[0].dataType);e.compute(_r(e.inputs[0],"FastGelu",OO,AO(t),void 0,e.inputs[0].dataType))},oX=(e,t)=>{let r=Ji(e.inputs[0].dataType);return e.compute(_r(e.inputs[0],"ThresholdedRelu",n=>`select(vec4<${r}>(0.0), ${n}, ${n} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${r}>(${t.alpha});`,t.cacheKey)),0},aX=e=>{e.compute(_r(e.inputs[0],"Log","log"))},CL=(e,t)=>`
const alpha = vec4<${e}>(${t});
const one = ${e}(1.0);
const zero = ${e}(0.0);

fn quick_gelu_impl(x: vec4<${e}>) -> vec4<${e}> {
  let v = x *alpha;
  var x1 : vec4<${e}>;
  for (var i = 0; i < 4; i = i + 1) {
    if (v[i] >= zero) {
      x1[i] = one / (one + exp(-v[i]));
    } else {
      x1[i] = one - one / (one + exp(v[i]));
    }
  }
  return x * x1;
}
`,AL=e=>`quick_gelu_impl(${e})`,lX=(e,t)=>{let r=Ji(e.inputs[0].dataType);e.compute(_r(e.inputs[0],"QuickGelu",AL,CL(r,t.alpha),t.cacheKey,e.inputs[0].dataType))}}),OL,kL,uX,qge=at(()=>{Jt(),er(),XI(),OL=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},kL=e=>{let t=e[0].dims.slice();t[2]=t[2]/2;let r=qe("input",e[0].dataType,e[0].dims,4),n=qe("bias",e[0].dataType,[e[0].dims[2]],4),i=Et("output",e[0].dataType,t,4),s=Ue.size(t)/4,o=di(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)}}),getShaderSource:a=>`
  const M_SQRT2 = sqrt(2.0);
  const halfChannels = ${e[0].dims[2]/4/2}u;

  ${a.declareVariables(r,n,i)}

  ${xw(o)}

  ${a.mainStart()}
    ${a.guardAgainstOutOfBoundsWorkgroupSizes(s)}
    let biasIdx = global_idx % halfChannels;
    let batchIndex = global_idx / halfChannels;
    let inputOffset = biasIdx + batchIndex * halfChannels * 2;
    let valueLeft = input[inputOffset] + bias[biasIdx];
    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];
    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);

    ${i.setByOffset("global_idx","valueLeft * geluRight")}
  }`}},uX=e=>{OL(e.inputs),e.compute(kL(e.inputs))}}),IL,jL,da,cX,dX,fX,hX,pX,mX,gX,vX,yX,_X,Hge=at(()=>{Bt(),Jt(),er(),IL=(e,t,r,n,i,s,o,a,l,u,c,d)=>{let h,m;typeof a=="string"?h=m=(w,S)=>`${a}((${w}),(${S}))`:typeof a=="function"?h=m=a:(h=a.scalar,m=a.vector);let g=Et("outputData",c,n.length,4),v=qe("aData",l,t.length,4),y=qe("bData",u,r.length,4),x;if(i)if(s){let w=Ue.size(t)===1,S=Ue.size(r)===1,M=t.length>0&&t[t.length-1]%4===0,T=r.length>0&&r[r.length-1]%4===0;w||S?x=g.setByOffset("global_idx",m(w?`${v.type.value}(${v.getByOffset("0")}.x)`:v.getByOffset("global_idx"),S?`${y.type.value}(${y.getByOffset("0")}.x)`:y.getByOffset("global_idx"))):x=`
            let outputIndices = ${g.offsetToIndices("global_idx * 4u")};
            let offsetA = ${v.broadcastedIndicesToOffset("outputIndices",g)};
            let offsetB = ${y.broadcastedIndicesToOffset("outputIndices",g)};
            ${g.setByOffset("global_idx",m(o||M?v.getByOffset("offsetA / 4u"):`${v.type.value}(${v.getByOffset("offsetA / 4u")}[offsetA % 4u])`,o||T?y.getByOffset("offsetB / 4u"):`${y.type.value}(${y.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}
          `}else x=g.setByOffset("global_idx",m(v.getByOffset("global_idx"),y.getByOffset("global_idx")));else{if(!s)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let w=(S,M,T="")=>{let P=`aData[indexA${M}][componentA${M}]`,E=`bData[indexB${M}][componentB${M}]`;return`
            let outputIndices${M} = ${g.offsetToIndices(`global_idx * 4u + ${M}u`)};
            let offsetA${M} = ${v.broadcastedIndicesToOffset(`outputIndices${M}`,g)};
            let offsetB${M} = ${y.broadcastedIndicesToOffset(`outputIndices${M}`,g)};
            let indexA${M} = offsetA${M} / 4u;
            let indexB${M} = offsetB${M} / 4u;
            let componentA${M} = offsetA${M} % 4u;
            let componentB${M} = offsetB${M} % 4u;
            ${S}[${M}] = ${T}(${h(P,E)});
          `};c===9?x=`
            var data = vec4<u32>(0);
            ${w("data",0,"u32")}
            ${w("data",1,"u32")}
            ${w("data",2,"u32")}
            ${w("data",3,"u32")}
            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:x=`
            ${w("outputData[global_idx]",0)}
            ${w("outputData[global_idx]",1)}
            ${w("outputData[global_idx]",2)}
            ${w("outputData[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(v,y,g)}

        ${d??""}

        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${x}
      }`},jL=(e,t,r,n,i,s,o=r.dataType)=>{let a=r.dims.map(v=>Number(v)??1),l=n.dims.map(v=>Number(v)??1),u=!Ue.areEqual(a,l),c=a,d=Ue.size(a),h=!1,m=!1,g=[u];if(u){let v=Om.calcShape(a,l,!1);if(!v)throw new Error("Can't perform binary op on the given tensors");c=v.slice(),d=Ue.size(c);let y=Ue.size(a)===1,x=Ue.size(l)===1,w=a.length>0&&a[a.length-1]%4===0,S=l.length>0&&l[l.length-1]%4===0;g.push(y),g.push(x),g.push(w),g.push(S);let M=1;for(let T=1;T<c.length;T++){let P=a[a.length-T],E=l[l.length-T];if(P===E)M*=P;else break}M%4===0?(m=!0,h=!0):(y||x||w||S)&&(h=!0)}else h=!0;return g.push(h),{name:e,shaderCache:{hint:t+g.map(v=>v.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:v=>IL(v,a,l,c,h,u,m,i,r.dataType,n.dataType,o,s),getRunData:()=>({outputs:[{dims:c,dataType:o}],dispatchGroup:{x:Math.ceil(d/64/4)},programUniforms:[{type:12,data:Math.ceil(Ue.size(c)/4)},...It(a,l,c)]})}},da=(e,t,r,n,i,s)=>{e.compute(jL(t,i??"",e.inputs[0],e.inputs[1],r,n,s))},cX=e=>{da(e,"Add",(t,r)=>`${t}+${r}`)},dX=e=>{da(e,"Div",(t,r)=>`${t}/${r}`)},fX=e=>{da(e,"Equal",{scalar:(t,r)=>`u32(${t}==${r})`,vector:(t,r)=>`vec4<u32>(${t}==${r})`},void 0,void 0,9)},hX=e=>{da(e,"Mul",(t,r)=>`${t}*${r}`)},pX=e=>{let t=qe("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;da(e,"Pow",{scalar:(r,n)=>`pow_custom(${r},${n})`,vector:(r,n)=>`pow_vector_custom(${r},${n})`},`
    fn pow_custom(a : ${t}, b : ${t}) -> ${t} {
      if (b == ${t}(0.0)) {
        return ${t}(1.0);
      } else if (a < ${t}(0.0) && f32(b) != floor(f32(b))) {
        return ${t}(pow(f32(a), f32(b))); // NaN
      }
      return select(sign(a), ${t}(1.0), round(f32(abs(b) % ${t}(2.0))) != 1.0) * ${t}(${t==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));
    }
    fn pow_vector_custom(a : vec4<${t}>, b : vec4<${t}>) -> vec4<${t}> {
      // TODO: implement vectorized pow
      return vec4<${t}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));
    }
      `)},mX=e=>{da(e,"Sub",(t,r)=>`${t}-${r}`)},gX=e=>{da(e,"Greater",{scalar:(t,r)=>`u32(${t}>${r})`,vector:(t,r)=>`vec4<u32>(${t}>${r})`},void 0,void 0,9)},vX=e=>{da(e,"Less",{scalar:(t,r)=>`u32(${t}<${r})`,vector:(t,r)=>`vec4<u32>(${t}<${r})`},void 0,void 0,9)},yX=e=>{da(e,"GreaterOrEqual",{scalar:(t,r)=>`u32(${t}>=${r})`,vector:(t,r)=>`vec4<u32>(${t}>=${r})`},void 0,void 0,9)},_X=e=>{da(e,"LessOrEqual",{scalar:(t,r)=>`u32(${t}<=${r})`,vector:(t,r)=>`vec4<u32>(${t}<=${r})`},void 0,void 0,9)}}),$L,NL,DL,RL,bX,wX,Kge=at(()=>{Bt(),Jt(),Dn(),er(),$L=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");let r=0,n=e[r],i=n.dataType,s=n.dims.length;e.forEach((o,a)=>{if(a!==r){if(o.dataType!==i)throw new Error("input tensors should be one type");if(o.dims.length!==s)throw new Error("input tensors should have the same shape");o.dims.forEach((l,u)=>{if(u!==t&&l!==n.dims[u])throw new Error("non concat dimensions must match")})}})},NL=(e,t)=>`
  fn calculateInputIndex(index: u32) -> u32 {
    let sizeInConcatAxis = array<u32, ${e}u>(${t});
    for (var i: u32 = 0u; i < ${e}; i += 1u ) {
      if (index < sizeInConcatAxis[i]) {
        return i;
      }
    }
    return ${e}u;
  }`,DL=(e,t)=>{let r=e.length,n=[];for(let i=0;i<r;++i){let s=t.setByOffset("global_idx",e[i].getByIndices("indices"));r===1?n.push(s):i===0?n.push(`if (inputIndex == ${i}u) { ${s} }`):i===r-1?n.push(`else { ${s} }`):n.push(`else if (inputIndex == ${i}) { ${s} }`)}return n.join(`
`)},RL=(e,t,r,n)=>{let i=Ue.size(r),s=new Array(e.length),o=new Array(e.length),a=0,l=[],u=[],c=[{type:12,data:i}];for(let v=0;v<e.length;++v)a+=e[v].dims[t],s[v]=a,u.push(e[v].dims.length),o[v]=qe(`input${v}`,n,u[v]),l.push("rank"),c.push({type:12,data:s[v]});for(let v=0;v<e.length;++v)c.push(...It(e[v].dims));c.push(...It(r));let d=Et("output",n,r.length),h=d.indicesGet("indices",t),m=Array.from(Array(s.length).keys()).map(v=>`uniforms.sizeInConcatAxis${v}`).join(","),g=v=>`

  ${(()=>{v.registerUniform("outputSize","u32");for(let y=0;y<e.length;y++)v.registerUniform(`sizeInConcatAxis${y}`,"u32");return v.declareVariables(...o,d)})()}

  ${NL(s.length,m)}

  ${v.mainStart()}
    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

    var indices = ${d.offsetToIndices("global_idx")};

    let inputIndex = calculateInputIndex(${h});
    if (inputIndex != 0u) {
      let sizeInConcatAxis = array<u32, ${s.length}u>(${m});
      ${h} -= sizeInConcatAxis[inputIndex - 1u];
    }

    ${DL(o,d)}
  }`;return{name:"Concat",shaderCache:{hint:`${t}`,inputDependencies:l},getRunData:()=>({outputs:[{dims:r,dataType:n}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:c}),getShaderSource:g}},bX=(e,t)=>{let r=e.inputs,n=r[0].dims,i=Ue.normalizeAxis(t.axis,n.length);$L(r,i);let s=n.slice();s[i]=r.reduce((a,l)=>a+(l.dims.length>i?l.dims[i]:0),0);let o=r.filter(a=>Ue.size(a.dims)>0);e.compute(RL(o,i,s,r[0].dataType),{inputs:o})},wX=e=>Tr({axis:e.axis})}),th,rh,nh,YI,dh=at(()=>{Bt(),Jt(),th=(e,t,r="f32")=>{switch(e.activation){case"Relu":return`value = max(value, ${t}(0.0));`;case"Sigmoid":return`value = (${t}(1.0) / (${t}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${t}(${r}(uniforms.clip_min)), ${t}(${r}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${t}(0.0), min(${t}(1.0), ${r}(uniforms.alpha) * value + ${r}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${r}(uniforms.alpha) * value, value, value >= ${t}(0.0));`;case"Tanh":return`let e2x = exp(-2.0 * abs(value));
              value = sign(value) * (1.0 - e2x) / (1.0 + e2x);
        `;case"":return"";default:throw new Error(`Unsupported activation ${e.activation}`)}},rh=(e,t)=>{e.activation==="Clip"?t.push({type:1,data:e.clipMax},{type:1,data:e.clipMin}):e.activation==="HardSigmoid"?t.push({type:1,data:e.alpha},{type:1,data:e.beta}):e.activation==="LeakyRelu"&&t.push({type:1,data:e.alpha})},nh=(e,t)=>{e.activation==="Clip"?t.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e.activation==="HardSigmoid"?t.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e.activation==="LeakyRelu"&&t.push({name:"alpha",type:"f32"})},YI=e=>{let t=e?.activation||"";if(t==="HardSigmoid"){let[r,n]=e?.activation_params||[.2,.5];return{activation:t,alpha:r,beta:n}}else if(t==="Clip"){let[r,n]=e?.activation_params||[H9,K9];return{activation:t,clipMax:n,clipMin:r}}else if(t==="LeakyRelu"){let[r]=e?.activation_params||[.01];return{activation:t,alpha:r}}return{activation:t}}}),xi,xX,QI=at(()=>{xi=(e,t)=>{switch(e){case 1:return t;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${e}-component is not supported.`)}},xX=e=>`
      ${e?"value = value + getBiasByOutputCoords(coords);":""}
      `}),MX,Xge=at(()=>{MX=e=>`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));
}
`}),Qy,JI,ZI=at(()=>{Bt(),Jt(),er(),dh(),Qy=(e,t,r,n,i)=>{let s=n-r;return`
      ${Array.from({length:r}).map((o,a)=>`
      if (${Ot(t.shape,a,t.rank)} != 1) {
        ${t.indicesSet(e,a,Ot(i,a+s,n))}
      } else {
        ${t.indicesSet(e,a,0)}
      }`).join("")}
`},JI=(e,t,r,n,i=!1,s)=>{let o=e[0].dims,a=e[1].dims,l=o[o.length-2],u=a[a.length-1],c=o[o.length-1],d=wn(u),h=wn(c),m=wn(l),g=Ue.size(r)/d/m,v=e.length>2,y=n?n.slice(0,-2):r.slice(0,-2),x=[Ue.size(y),l,u],w=[{type:12,data:g},{type:12,data:l},{type:12,data:u},{type:12,data:c}];rh(t,w),w.push(...It(y,o,a)),v&&w.push(...It(e[2].dims)),w.push(...It(x));let S=M=>{let T=qI("batch_dims",e[0].dataType,y.length),P=qe("a",e[0].dataType,o.length,h),E=qe("b",e[1].dataType,a.length,d),A=Et("output",e[0].dataType,x.length,d),L=di(A.type.tensor),B=th(t,A.type.value,L),V=[P,E],G="";if(v){let J=i?d:1;V.push(qe("bias",e[2].dataType,e[2].dims.length,J)),G=`${i?`value += bias[col / ${J}];`:`value += ${A.type.value}(bias[row + i]);`}`}let z=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];nh(t,z);let K=()=>{let J=`var a_data: ${P.type.value};`;for(let X=0;X<h;X++)J+=`
              let b_data${X} = b[(b_offset + (k + ${X}) * uniforms.N + col) / ${d}];`;for(let X=0;X<m;X++){J+=`a_data = a[(a_offset + (row + ${X}) * uniforms.K + k) / ${h}];`;for(let Q=0;Q<h;Q++)J+=`
            values[${X}] = fma(${E.type.value}(a_data${h===1?"":`[${Q}]`}), b_data${Q}, values[${X}]);
`}return J};return`
  ${M.registerUniforms(z).registerInternalVariables(T).declareVariables(...V,A)}
  ${M.mainStart()}
    ${M.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let col = (global_idx % (uniforms.N / ${d})) * ${d};
    var index1 = global_idx / (uniforms.N / ${d});
    let stride1 = uniforms.M / ${m};
    let row = (index1 % stride1) * ${m};
    let batch = index1 / stride1;

    ${r.length===2?"":`let batch_indices = ${T.offsetToIndices("batch")};`}

    var a_indices: ${P.type.indices};
    ${Qy("a_indices",P,P.rank-2,T.rank,"batch_indices")}
    ${P.indicesSet("a_indices",P.rank-2,0)}
    ${P.indicesSet("a_indices",P.rank-1,0)}
    let a_offset = ${P.indicesToOffset("a_indices")};

    var b_indices: ${E.type.indices};
    ${Qy("b_indices",E,E.rank-2,T.rank,"batch_indices")}
    ${E.indicesSet("b_indices",E.rank-2,0)}
    ${E.indicesSet("b_indices",E.rank-1,0)}
    let b_offset = ${E.indicesToOffset("b_indices")};
    var values: array<${A.type.value}, ${m}>;
    for (var k: u32 = 0u; k < uniforms.K; k = k + ${h}) {
      ${K()}
    }
    for (var i = 0u; i < ${m}u; i++) {
      var value = values[i];
      ${G}
      ${B}
      let cur_indices = ${A.type.indices}(batch, row + i, col);
      let offset = ${A.indicesToOffset("cur_indices")};
      ${A.setByOffset(`offset / ${d}`,"value")};
    }
  }
  `};return{name:"MatMulNaive",shaderCache:{hint:`${t.activation};${d};${h};${m};${i}`,inputDependencies:v?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:s?s(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(g/64)},programUniforms:w}),getShaderSource:S}}}),LL,FL,kO,OT,BL,IO,zL,Yw,ej=at(()=>{Bt(),Jt(),er(),dh(),ZI(),QI(),LL=(e,t)=>e?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol${t?", batchIndices":""});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol${t?", batchIndices":""});
        `,FL=(e,t)=>e?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${t===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`,kO=(e,t,r="f32",n,i=!1,s=32,o=!1,a=32)=>{let l=t[1]*e[1],u=t[0]*e[0],c=i?l:s,d=i?s:l,h=c/t[0],m=s/t[1];if(!((i&&h===4&&e[1]===4||!i&&(h===3||h===4))&&c%t[0]===0&&s%t[1]===0&&e[0]===4))throw new Error(`If transposeA ${i} is true, innerElementSize ${h} and workPerThread[1] ${e[1]} must be 4.
      Otherwise, innerElementSize ${h} must be 3 or 4.
  tileAWidth ${c} must be divisible by workgroupSize[0]${t[0]}. tileInner ${s} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${e[0]} must be 4.`);return`
var<workgroup> mm_Asub: array<array<vec${h}<${r}>, ${c/h}>, ${d}>;
var<workgroup> mm_Bsub: array<array<vec4<${r}>, ${u/e[0]}>, ${s}>;

const rowPerThread = ${e[1]};
const colPerThread = ${e[0]};
const innerElementSize = ${h};
const tileInner = ${s};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = localRow * rowPerThread;
  let tileCol = i32(localId.x);

  let globalRow =i32(globalId.y) * rowPerThread;
  let globalCol = i32(globalId.x);
  let batch = ${o?"0":"i32(globalId.z)"};
  ${n?`let batchIndices = ${n.offsetToIndices("u32(batch)")};`:""}
  let globalRowStart = i32(workgroupId.y) * ${l};

  let num_tiles = ${o?`${Math.ceil(a/s)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
  var kStart = ${o?`i32(globalId.z) * ${a}`:"0"};

  var acc: array<vec4<${r}>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${m};
  for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${LL(i,n)}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${m}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${n?", batchIndices":""});
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${h===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${FL(i,h)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`},OT=(e,t)=>e?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol${t?", batchIndices":""});
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol${t?", batchIndices":""});
            `,BL=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",IO=(e,t,r="f32",n,i=!1,s=32,o=!1,a=32,l=!1)=>{let u=e[1]*t[1],c=e[0]*t[0],d=i?u:s,h=i?s:u;if(!(h%t[1]===0&&d%t[0]===0&&s%t[1]===0))throw new Error(`tileAHight ${h} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${d} must be divisible by workgroupSize[0]${t[0]}, tileInner ${s} must be divisible by workgroupSize[1]${t[1]}`);let m=h/t[1],g=d/t[0],v=s/t[1],y=l?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${u};
    let globalColStart = i32(workgroupId.x) * ${c};

    // Loop over shared dimension.
    for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${h}; inputRow = inputRow + ${t[1]}) {
        for (var inputCol = localCol; inputCol < ${d}; inputCol = inputCol + ${t[0]}) {
          ${OT(i,n)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${s}; inputRow = inputRow + ${t[1]}) {
            for (var inputCol = localCol; inputCol < ${c}; inputCol = inputCol + ${t[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol${n?", batchIndices":""});
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<${r}, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${i?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${t[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${t[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${u};

let tileRowA = i32(localId.y) * ${m};
let tileColA = i32(localId.x) * ${g};
let tileRowB = i32(localId.y) * ${v};
// Loop over shared dimension.
for (var t = 0; t < num_tiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${m}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${g}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${OT(i,n)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${v}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol${n?", batchIndices":""});
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<${r}, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${BL(i)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<${r}, ${d}>, ${h}>;
  var<workgroup> mm_Bsub : array<array<${r}, ${c}>, ${s}>;
  const rowPerThread = ${e[1]};
  const colPerThread = ${e[0]};
  const tileInner = ${s};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${o?"0":"i32(globalId.z)"};
    ${n?`let batchIndices = ${n.offsetToIndices("u32(batch)")};`:""}
    let num_tiles = ${o?`${Math.ceil(a/s)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
    var kStart = ${o?`i32(globalId.z) * ${a}`:"0"};

    var acc : array<array<${r}, colPerThread>, rowPerThread>;
    ${y}
  }
`},zL=(e,t,r,n,i=!1)=>{let[s,o,a,l]=n,u=di(n[0].type.tensor);return`
    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${s.type.indices}) -> ${xi(e,u)} {
      var value = ${xi(e,u)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)
      {
        var aIndices: ${o.type.indices};
        ${Qy("aIndices",o,o.rank-2,s.rank,"batchIndices")}
        ${o.indicesSet("aIndices",o.rank-2,"u32(row)")}
        ${o.indicesSet("aIndices",o.rank-1,"u32(colIn)")}
        value = ${o.getByIndices("aIndices")};
      }
      return value;
    }

    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${s.type.indices}) -> ${xi(e,u)} {
      var value = ${xi(e,u)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)
      {
        var bIndices: ${a.type.indices};
        ${Qy("bIndices",a,a.rank-2,s.rank,"batchIndices")}
        ${a.indicesSet("bIndices",a.rank-2,"u32(row)")}
        ${a.indicesSet("bIndices",a.rank-1,"u32(colIn)")}
        value = ${a.getByIndices("bIndices")};
      }
      return value;
    }

    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${xi(e,u)}) {
      let col = colIn * ${e};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
        var value = valueIn;
        let coords = vec3<i32>(batch, row, colIn);
        ${t?`value = value + ${i?"bias[colIn]":`${xi(e,u)}(bias[row])`};`:""}
        ${r}
        ${l.setByIndices("vec3<u32>(coords)","value")}
      }
    }
    `},Yw=(e,t,r,n,i=!1,s)=>{let o=e[0].dims,a=e[1].dims,l=o.slice(0,-2),u=a.slice(0,-2),c=n?n.slice(0,-2):r.slice(0,-2),d=Ue.size(c),h=o[o.length-2],m=o[o.length-1],g=a[a.length-1],v=m%4===0&&g%4===0,y=h<=8?[4,1,1]:[4,4,1],x=[8,8,1],w=[Math.ceil(g/x[0]/y[0]),Math.ceil(h/x[1]/y[1]),Math.ceil(d/x[2]/y[2])],S=v?4:1,M=[...l,h,m/S],T=M.length,P=[...u,m,g/S],E=P.length,A=[d,h,g/S],L=[{type:6,data:h},{type:6,data:g},{type:6,data:m}];rh(t,L),L.push(...It(c,M,P));let B=["rank","rank"],V=e.length>2;V&&(L.push(...It(e[2].dims)),B.push("rank")),L.push(...It(A));let G=z=>{let K=c.length,J=qI("batchDims",e[0].dataType,K,1),X=di(e[0].dataType),Q=qe("a",e[0].dataType,T,S),W=qe("b",e[1].dataType,E,S),oe=Et("result",e[0].dataType,A.length,S),ce=[Q,W];if(V){let pe=i?S:1;ce.push(qe("bias",e[2].dataType,e[2].dims.length,pe))}let D=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];nh(t,D);let U=di(oe.type.tensor),te=th(t,oe.type.value,U),ee=zL(S,V,te,[J,Q,W,oe],i);return`
  ${z.registerUniforms(D).registerInternalVariables(J).declareVariables(...ce,oe)}
  ${ee}
  ${v?kO(y,x,X,J):IO(y,x,X,J)}
                   `};return{name:"MatMul",shaderCache:{hint:`${y};${t.activation};${v};${i}`,inputDependencies:B},getRunData:()=>({outputs:[{dims:s?s(r):r,dataType:e[0].dataType}],dispatchGroup:{x:w[0],y:w[1],z:w[2]},programUniforms:L}),getShaderSource:G}}}),UL,TX,Yge=at(()=>{Bt(),Du(),er(),dh(),QI(),Xge(),ej(),UL=(e,t,r,n,i=!1,s,o=4,a=4,l=4,u="f32")=>{let c=L=>{switch(L){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${u}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${L} is not supported.`)}},d=L=>{switch(L){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${L} is not supported.`)}},h=e?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,m=e?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,g=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",v=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",y=e?"row":"col",x=e?"col":"row",w=`
    let inChannels = i32(uniforms.w_shape[2]);
    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
    let outRow = ${y} / outWidth;
    let outCol = ${y} % outWidth;

    let WRow = ${x} / (i32(uniforms.w_shape[1]) * inChannels);
    let WCol = ${x} / inChannels % i32(uniforms.w_shape[1]);
    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];
    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];
    let xCh = ${x} % inChannels;
    var resData = ${xi(o,u)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${g} && xCol >= 0 && xCol < ${v}) {
      ${h}
      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));
      ${c(o)}
    }
    return resData;`,S=e?t&&n?`
    let col = colIn * ${o};
    ${w}`:`
    let col = colIn * ${o};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
      ${w}
    }
    return ${xi(o,u)}(0.0);`:n&&r?`
    let col = colIn * ${o};
    ${w}`:`
    let col = colIn * ${o};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${w}
    }
    return ${xi(o,u)}(0.0);`,M=e?n&&r?d(a):`
    let col = colIn * ${a};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${d(a)}
    }
    return ${xi(a,u)}(0.0);`:`
    let col = colIn * ${a};
    if (row < uniforms.dim_inner && col < uniforms.dim_a_outer) {
      ${d(a)}
    }
    return ${xi(a,u)}(0.0);`,T=xi(l,u),P=xi(e?o:a,u),E=xi(e?a:o,u),A=th(s,T,u);return`
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${P} {
      ${e?S:M}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${E} {
      ${e?M:S}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${T}) {
      let col = colIn * ${l};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)
      {
      var value = valueIn;
      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${m}
      ${xX(i)}
      ${A}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`},TX=(e,t,r,n,i,s,o,a,l)=>{let u=t.format==="NHWC",c=u?e[0].dims[3]:e[0].dims[1],d=r[0],h=u?r[2]:r[3],m=u?r[1]:r[2],g=u?r[3]:r[1],v=u&&(c%4===0||c%3===0)&&g%4===0,y=u?g:h*m,x=u?h*m:g,w=[8,8,1],S=n<=8?[4,1,1]:[4,4,1],M=[Math.ceil(y/w[0]/S[0]),Math.ceil(x/w[1]/S[1]),Math.ceil(d/w[2]/S[2])];fr("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${M}`);let T=v?u&&c%4!==0?3:4:1,P=w[1]*S[1],E=w[0]*S[0],A=Math.max(w[0]*T,w[1]),L=n%P===0,B=i%E===0,V=s%A===0,G=v?[T,4,4]:[1,1,1],z=[{type:6,data:n},{type:6,data:i},{type:6,data:s},{type:6,data:[t.pads[0],t.pads[1]]},{type:6,data:t.strides},{type:6,data:t.dilations}];rh(t,z),z.push(...It(e[0].dims,e[1].dims));let K=["rank","rank"];o&&(z.push(...It(e[2].dims)),K.push("rank")),z.push(...It(r));let J=X=>{let Q=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];nh(t,Q);let W=v?4:1,oe=di(e[0].dataType),ce=`
      fn setOutputAtIndex(flatIndex : i32, value : ${v?`vec4<${oe}>`:oe}) {
        result[flatIndex] = ${v?`vec4<${oe}>`:oe}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${v?`vec4<${oe}>`:oe}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${v?"/ 4":""}, value);
      }`,D=qe("x",e[0].dataType,e[0].dims.length,T===3?1:T),U=qe("w",e[1].dataType,e[1].dims.length,W),te=[D,U],ee=Et("result",e[0].dataType,r.length,W);if(o){let pe=qe("bias",e[2].dataType,e[2].dims.length,W);te.push(pe),ce+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${v?`vec4<${oe}>`:oe} {
          return bias[coords.${u?"w":"y"}${v?"/ 4":""}];
        }`}return`
        ${MX("uniforms.result_strides")}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${X.registerUniforms(Q).declareVariables(...te,ee)}
        ${ce}
        ${UL(u,L,B,V,o,t,G[0],G[1],G[2],oe)}
        ${v?kO(S,w,oe,void 0,!u,A):IO(S,w,oe,void 0,!u,A,!1,void 0,a)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${t.cacheKey};${T};${v};${L};${B};${V};${P};${E};${A}`,inputDependencies:K},getRunData:()=>({outputs:[{dims:l?l(r):r,dataType:e[0].dataType}],dispatchGroup:{x:M[0],y:M[1],z:M[2]},programUniforms:z}),getShaderSource:J}}}),VL,kT,py,WL,IT,GL,SX,PX,Qge=at(()=>{Bt(),Du(),Jt(),er(),dh(),QI(),VL=e=>{let t=1;for(let r=0;r<e.length;r++)t*=e[r];return t},kT=e=>typeof e=="number"?[e,e,e]:e,py=(e,t)=>t<=1?e:e+(e-1)*(t-1),WL=(e,t,r,n=1)=>{let i=py(t,n);return Math.floor((e[0]*(r-1)-r+i)/2)},IT=(e,t,r,n,i)=>{i==null&&(i=WL(e,t[0],n[0]));let s=[0,0,0,r];for(let o=0;o<3;o++)e[o]+2*i>=t[o]&&(s[o]=Math.trunc((e[o]-t[o]+2*i)/n[o]+1));return s},GL=(e,t,r,n,i,s,o,a,l,u)=>{let c,d,h,m;if(e==="VALID"&&(e=0),typeof e=="number"){c={top:e,bottom:e,left:e,right:e,front:e,back:e};let g=IT([t,r,n,1],[a,l,u],1,[i,s,o],e);d=g[0],h=g[1],m=g[2]}else if(Array.isArray(e)){if(!e.every((v,y,x)=>v===x[0]))throw Error(`Unsupported padding parameter: ${e}`);c={top:e[0],bottom:e[1],left:e[2],right:e[3],front:e[4],back:e[5]};let g=IT([t,r,n,1],[a,l,u],1,[i,s,o],e[0]);d=g[0],h=g[1],m=g[2]}else if(e==="SAME_UPPER"){d=Math.ceil(t/i),h=Math.ceil(r/s),m=Math.ceil(n/o);let g=(d-1)*i+a-t,v=(h-1)*s+l-r,y=(m-1)*o+u-n,x=Math.floor(g/2),w=g-x,S=Math.floor(v/2),M=v-S,T=Math.floor(y/2),P=y-T;c={top:S,bottom:M,left:T,right:P,front:x,back:w}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:c,outDepth:d,outHeight:h,outWidth:m}},SX=(e,t,r,n,i,s=!1,o="channelsLast")=>{let a,l,u,c,d;if(o==="channelsLast")[a,l,u,c,d]=e;else if(o==="channelsFirst")[a,d,l,u,c]=e;else throw new Error(`Unknown dataFormat ${o}`);let[h,,m,g,v]=t,[y,x,w]=kT(r),[S,M,T]=kT(n),P=py(m,S),E=py(g,M),A=py(v,T),{padInfo:L,outDepth:B,outHeight:V,outWidth:G}=GL(i,l,u,c,y,x,w,P,E,A),z=s?h*d:h,K=[0,0,0,0,0];return o==="channelsFirst"?K=[a,z,B,V,G]:o==="channelsLast"&&(K=[a,B,V,G,z]),{batchSize:a,dataFormat:o,inDepth:l,inHeight:u,inWidth:c,inChannels:d,outDepth:B,outHeight:V,outWidth:G,outChannels:z,padInfo:L,strideDepth:y,strideHeight:x,strideWidth:w,filterDepth:m,filterHeight:g,filterWidth:v,effectiveFilterDepth:P,effectiveFilterHeight:E,effectiveFilterWidth:A,dilationDepth:S,dilationHeight:M,dilationWidth:T,inShape:e,outShape:K,filterShape:t}},PX=(e,t,r,n,i,s)=>{let o=s==="channelsLast";o?e[0].dims[3]:e[0].dims[1];let a=[64,1,1],l={x:r.map((y,x)=>x)},u=[Math.ceil(VL(l.x.map(y=>r[y]))/a[0]),1,1];fr("verbose",()=>`[conv3d_naive_webgpu] dispatch = ${u}`);let c=1,d=Ue.size(r),h=[{type:12,data:d},{type:12,data:n},{type:12,data:i},{type:12,data:t.strides},{type:12,data:t.dilations}];rh(t,h),h.push(...It(e[0].dims,e[1].dims));let m=["rank","rank"],g=e.length===3;g&&(h.push(...It(e[2].dims)),m.push("rank")),h.push(...It(r));let v=y=>{let x=[{name:"output_size",type:"u32"},{name:"filter_dims",type:"u32",length:n.length},{name:"pads",type:"u32",length:i.length},{name:"strides",type:"u32",length:t.strides.length},{name:"dilations",type:"u32",length:t.dilations.length}];nh(t,x);let w=1,S=di(e[0].dataType),M=qe("x",e[0].dataType,e[0].dims.length,c),T=qe("W",e[1].dataType,e[1].dims.length,w),P=[M,T],E=Et("result",e[0].dataType,r.length,w),A="";if(g){let V=qe("bias",e[2].dataType,e[2].dims.length,w);P.push(V),A+=`
        fn getBiasByOutputCoords(coords : array<u32, 5>) -> ${S} {
          return bias[${o?Ot("coords",4,5):Ot("coords",1,5)}];
        }`}let L=xi(c,S),B=th(t,L,S);return`
            ${A}
            fn getX(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${M.getByIndices("aIndices")};
            }
            fn getW(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${T.getByIndices("aIndices")};
            }
          ${y.registerUniforms(x).declareVariables(...P,E)}
          ${y.mainStart()}
          ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
              let coords = ${E.offsetToIndices("global_idx")};
              let batch = ${Ot("coords",0,M.rank)};
              let d2 = ${o?Ot("coords",M.rank-1,M.rank):Ot("coords",1,M.rank)};
              let xFRCCorner = vec3<u32>(${o?Ot("coords",1,M.rank):Ot("coords",2,M.rank)},
              ${o?Ot("coords",2,M.rank):Ot("coords",3,M.rank)},
              ${o?Ot("coords",3,M.rank):Ot("coords",4,M.rank)}) * uniforms.strides - uniforms.pads;
              let xFCorner = xFRCCorner.x;
              let xRCorner = xFRCCorner.y;
              let xCCorner = xFRCCorner.z;
              let xShapeY = ${o?Ot("uniforms.x_shape",1,M.rank):Ot("uniforms.x_shape",2,M.rank)};
              let xShapeZ = ${o?Ot("uniforms.x_shape",2,M.rank):Ot("uniforms.x_shape",3,M.rank)};
              let xShapeW = ${o?Ot("uniforms.x_shape",3,M.rank):Ot("uniforms.x_shape",4,M.rank)};
              let xShapeU = ${o?Ot("uniforms.x_shape",4,M.rank):Ot("uniforms.x_shape",1,M.rank)};
              let inputDepthNearestVec4 = (xShapeU / 4) * 4;
              let inputDepthVec4Remainder = xShapeU % 4;

              var value = 0.0;
              for (var wF = 0u; wF < uniforms.filter_dims[0]; wF++) {
                let xF = xFCorner + wF * uniforms.dilations[0];
                if (xF < 0 || xF >= xShapeY) {
                  continue;
                }

                for (var wR = 0u; wR < uniforms.filter_dims[1]; wR++) {
                  let xR = xRCorner + wR * uniforms.dilations[1];
                  if (xR < 0 || xR >= xShapeZ) {
                    continue;
                  }

                  for (var wC = 0u; wC < uniforms.filter_dims[2]; wC++) {
                    let xC = xCCorner + wC * uniforms.dilations[2];
                    if (xC < 0 || xC >= xShapeW) {
                      continue;
                    }

                    for (var d1 = 0u; d1 < inputDepthNearestVec4; d1 += 4) {
                      ${o?`let xValues = vec4<f32>(
                               getX(batch, xF, xR, xC, d1),
                               getX(batch, xF, xR, xC, d1 + 1),
                               getX(batch, xF, xR, xC, d1 + 2),
                               getX(batch, xF, xR, xC, d1 + 3));
                            `:`let xValues = vec4<f32>(
                               getX(batch, d1, xF, xR, xC),
                               getX(batch, d1 + 1, xF, xR, xC),
                               getX(batch, d1 + 2, xF, xR, xC),
                               getX(batch, d1 + 3, xF, xR, xC));
                            `}
                            let wValues = vec4<f32>(
                              getW(d2, d1, wF, wR, wC),
                              getW(d2, d1 + 1, wF, wR, wC),
                              getW(d2, d1 + 2, wF, wR, wC),
                              getW(d2, d1 + 3, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                    if (inputDepthVec4Remainder == 1) {
                        ${o?`value += getX(batch, xF, xR, xC, inputDepthNearestVec4)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`:`value += getX(batch, inputDepthNearestVec4, xF, xR, xC)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`}
                    } else if (inputDepthVec4Remainder == 2) {
                      ${o?`let xValues = vec2<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1));
                      `:`let xValues = vec2<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC));
                    `}
                    let wValues = vec2<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC));
                      value += dot(xValues, wValues);
                    } else if (inputDepthVec4Remainder == 3) {
                      ${o?`let xValues = vec3<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2));
                      `:`let xValues = vec3<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 2, xF, xR, xC));
                    `}
                    let wValues = vec3<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 2, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                  }
                }
              }
              ${g?"value = value + getBiasByOutputCoords(coords)":""};
              ${B}
              result[global_idx] = f32(value);
          }`};return{name:"Conv3DNaive",shaderCache:{hint:`${t.cacheKey};${o};${c};${g}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:u[0],y:u[1],z:u[2]},programUniforms:h}),getShaderSource:v}}}),EX,CX,Jge=at(()=>{Bt(),Jt(),er(),dh(),EX=(e,t,r,n)=>{let i=e.length>2,s=i?"value += b[output_channel];":"",o=e[0].dims,a=e[1].dims,l=t.format==="NHWC",u=l?r[3]:r[1],c=u/t.group,d=l&&c>=4?wn(u):1,h=Ue.size(r)/d,m=[{type:12,data:h},{type:12,data:t.dilations},{type:12,data:[t.strides[0],t.strides[1]]},{type:12,data:[t.pads[0],t.pads[1]]},{type:12,data:c}];rh(t,m),m.push(...It(o,[a[0],a[1],a[2],a[3]/d]));let g=i?["rank","rank","rank"]:["rank","rank"];m.push(...It([r[0],r[1],r[2],r[3]/d]));let v=y=>{let x=Et("output",e[0].dataType,r.length,d),w=di(x.type.tensor),S=th(t,x.type.value,w),M=qe("x",e[0].dataType,o.length),T=qe("w",e[1].dataType,a.length,d),P=[M,T];i&&P.push(qe("b",e[2].dataType,e[2].dims,d));let E=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:t.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];nh(t,E);let A=l?`
      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[0]; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

        if (xHeight < 0u || xHeight >= uniforms.x_shape[1]) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[1]; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
          if (xWidth < 0u || xWidth >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[2]; wInChannel++) {
            let input_channel = in_channel_offset + wInChannel;
            let xVal = ${M.get("batch","xHeight","xWidth","input_channel")};
            let wVal = ${T.get("wHeight","wWidth","wInChannel","output_channel")};
            value += xVal * wVal;
          }
        }
      }
      `:`
      for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {
        let input_channel = in_channel_offset + wInChannel;
        for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {
          let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

          if (xHeight < 0u || xHeight >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {
            let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
            if (xWidth < 0u || xWidth >= uniforms.x_shape[3]) {
              continue;
            }

            let xVal = ${M.get("batch","input_channel","xHeight","xWidth")};
            let wVal = ${T.get("output_channel","wInChannel","wHeight","wWidth")};
            value += xVal * wVal;
          }
        }
      }
      `;return`
  ${y.registerUniforms(E).declareVariables(...P,x)}

  ${y.mainStart()}
    ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let outputIndices = ${x.offsetToIndices("global_idx")};
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${l?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${l?1:2}], outputIndices[${l?2:3}]) * uniforms.strides - uniforms.pads;
    let group_id: u32 = output_channel * ${d} / uniforms.output_channels_per_group;
    var in_channel_offset = group_id * uniforms.w_shape[${l?2:1}];

    var value: ${x.type.value} = ${x.type.value}(0);
    ${A}
    ${s}
    ${S}
    ${x.setByOffset("global_idx","value")}
  }`};return{name:"GroupedConv",shaderCache:{hint:`${t.cacheKey}_${d}`,inputDependencies:g},getRunData:()=>({outputs:[{dims:n?n(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:m}),getShaderSource:v}},CX=(e,t,r,n)=>{let i=e.length>2,s=wn(r[3]),o=wn(r[2]),a=Ue.size(r)/s/o,l=[e[0].dims[0],e[0].dims[1],e[0].dims[2],e[0].dims[3]/s],u=[e[1].dims[0],e[1].dims[1],e[1].dims[2],e[1].dims[3]/s],c=[r[0],r[1],r[2],r[3]/s],d=[{type:12,data:a},{type:6,data:[t.strides[0],t.strides[1]]},{type:6,data:[t.pads[0],t.pads[1]]}];rh(t,d),d.push(...It(l,u,c));let h=(o-1)*t.strides[1]+u[1],m=g=>{let v=Et("output",e[0].dataType,c.length,s),y=di(v.type.tensor),x=th(t,v.type.value,y),w=qe("x",e[0].dataType,l.length,s),S=qe("w",e[1].dataType,u.length,s),M=[w,S];i&&M.push(qe("b",e[2].dataType,e[2].dims,s));let T=i?"value += b[output_channel];":"",P=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return nh(t,P),`
  ${g.registerUniforms(P).declareVariables(...M,v)}
  ${g.mainStart()}
    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let width0 = uniforms.output_shape[3];
    let output_channel = global_idx % width0;
    var index1 = global_idx / width0;
    let width1 = uniforms.output_shape[2] / ${o}u;
    let col = (index1 % width1) * ${o}u;
    index1 = index1 / width1;
    let row = index1 % uniforms.output_shape[1];
    let batch = index1 / uniforms.output_shape[1];

    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;

    var x_vals: array<${w.type.value}, ${h}>;
    var values: array<${v.type.value}, ${o}>;
    let input_channel = output_channel;
    // Use constant instead of uniform can give better performance for w's height/width.
    for (var w_height: u32 = 0u; w_height < ${u[0]}; w_height++) {
      let x_height = x_corner.x + i32(w_height);
      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {
        for (var i = 0; i < ${h}; i++) {
          let x_width = x_corner.y + i;
          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {
            x_vals[i] = ${w.get("batch","u32(x_height)","u32(x_width)","input_channel")};
          } else {
            x_vals[i] = ${w.type.value}(0);
          }
        }
        for (var w_width: u32 = 0u; w_width < ${u[1]}; w_width++) {
          let w_val = ${S.get("w_height","w_width","0","output_channel")};
          for (var i = 0u; i < ${o}u; i++) {
            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);
          }
        }
      }
    }

    for (var i = 0u; i < ${o}u; i++) {
      var value = values[i];
      ${T}
      ${x}
      ${v.set("batch","row","col + i","output_channel","value")};
    }
  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${t.cacheKey};${s};${o};${h};${u[0]};${u[1]}`,inputDependencies:i?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:n?n(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:d}),getShaderSource:m}}}),qL,Ub,HL,Vb,jO,jT,KL,XL,$O,Zge=at(()=>{Jt(),Yge(),Qge(),ej(),Jge(),dh(),ZI(),id(),qL=(e,t,r,n,i,s)=>{let o=e[0],a=e.slice(s?1:2,s?3:4),l=a.length,u=t[0],c=t.slice(2).map((h,m)=>h+(h-1)*(r[m]-1)),d=a.map((h,m)=>h+n[m]+n[m+l]).map((h,m)=>Math.floor((h-c[m]+i[m])/i[m]));return d.splice(0,0,o),d.splice(s?3:1,0,u),d},Ub=[2,3,1,0],HL=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length>5)throw new Error("greater than 5D is not supported");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],n=e[1].dims[1]*t.group;if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let i=e[0].dims.length-2;if(t.dilations.length!==i)throw new Error(`dilations should be ${i}D`);if(t.strides.length!==i)throw new Error(`strides should be ${i}D`);if(t.pads.length!==i*2)throw new Error(`pads should be ${i*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},Vb=(e,t)=>{let r=e.kernelShape.slice();r.length<t[1].dims.length-2&&r.push(...Array(t[1].dims.length-2-r.length).fill(0));for(let s=2;s<t[1].dims.length;++s)r[s-2]===0&&(r[s-2]=t[1].dims[s]);let n=e.pads.slice();Kw.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,n,e.format==="NHWC",e.autoPad);let i=Object.assign({},e);return Object.assign(i,{kernelShape:r,pads:n}),i},jO=e=>{let t=YI(e),r=e.format,n=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],i=e.dilations,s=e.group,o=e.kernel_shape,a=e.pads,l=e.strides,u=e.w_is_const();return{autoPad:n,format:r,dilations:i,group:s,kernelShape:o,pads:a,strides:l,wIsConst:u,...t,cacheKey:`${e.format};${t.activation};`}},jT=(e,t,r,n)=>{let i=r.format==="NHWC",s=qL(t[0].dims,t[1].dims,r.dilations,r.pads,r.strides,i);if(r.group!==1){let P=[t[0]];if(i){let E=e.kernelCustomData.wT??e.compute(eo(t[1],Ub),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=E),P.push(E)}else P.push(t[1]);t.length===3&&P.push(t[2]),!e.adapterInfo.isArchitecture("ampere")&&i&&t[1].dims[0]===r.group&&t[1].dims[1]===1&&r.dilations[0]===1&&r.dilations[1]===1?e.compute(CX(P,r,s,n),{inputs:P}):e.compute(EX(P,r,s,n),{inputs:P});return}let o=t.length===3,a=t[0].dims[i?1:2],l=t[0].dims[i?2:3],u=t[0].dims[i?3:1],c=t[1].dims[2],d=t[1].dims[3],h=s[i?1:2],m=s[i?2:3],g=s[i?3:1],v=i&&c===a&&d===l&&r.pads[0]===0&&r.pads[1]===0;if(v||c===1&&d===1&&r.dilations[0]===1&&r.dilations[1]===1&&r.strides[0]===1&&r.strides[1]===1&&r.pads[0]===0&&r.pads[1]===0){let P=s[0],E,A,L,B=[];if(i){let z=e.kernelCustomData.wT??e.compute(eo(t[1],Ub),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];if(r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=z),v){let K=a*l*u;E=t[0].reshape([1,P,K]),A=z.reshape([1,K,g]),L=[1,P,g]}else E=t[0].reshape([P,a*l,u]),A=z.reshape([1,u,g]),L=[P,h*m,g];B.push(E),B.push(A)}else E=t[0].reshape([P,u,a*l]),A=t[1].reshape([1,g,u]),L=[P,g,h*m],B.push(A),B.push(E);o&&B.push(t[2]);let V=L[2],G=B[0].dims[B[0].dims.length-1];V<8&&G<8?e.compute(JI(B,r,s,L,i,n),{inputs:B}):e.compute(Yw(B,r,s,L,i,n),{inputs:B});return}let y=!0,x=e.kernelCustomData.wT??e.compute(eo(t[1],Ub),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=x);let w=[t[0],x];o&&w.push(t[2]);let S=i?h*m:g,M=i?g:h*m,T=c*d*u;e.compute(TX(w,r,s,S,M,T,o,y,n),{inputs:w})},KL=(e,t)=>{let r=t.format==="NHWC",n=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&n.push(e.inputs[2]);let i=[0,t.pads[0],0,t.pads[1]],s=[1].concat(t.strides),o=[1].concat(t.dilations),a=[1].concat(t.kernelShape),l=Vb({...t,pads:i,strides:s,dilations:o,kernelShape:a},n);jT(e,n,l,u=>r?[u[0],u[2],u[3]]:[u[0],u[1],u[3]])},XL=(e,t,r)=>{let n=r.format==="NHWC"?"channelsLast":"channelsFirst",i=Vb(r,t),s=r.autoPad==="NOTSET"?r.pads:r.autoPad,o=SX(t[0].dims,t[1].dims,r.strides,r.dilations,s,!1,n);e.compute(PX(t,i,o.outShape,[o.filterDepth,o.filterHeight,o.filterWidth],[o.padInfo.front,o.padInfo.top,o.padInfo.left],n))},$O=(e,t)=>{if(HL(e.inputs,t),e.inputs[0].dims.length===3)KL(e,t);else if(e.inputs[0].dims.length===5)XL(e,e.inputs,t);else{let r=Vb(t,e.inputs);jT(e,e.inputs,r)}}}),AX,eve=at(()=>{Bt(),Du(),Jt(),er(),AX=(e,t,r)=>{let n=e.length>2,i=t.outputShape,s=t.format==="NHWC",o=t.group,a=e[1].dims,l=a[2]/o,u=a[3],c=s?wn(l):1,d=s&&u===1&&l>=4,h=d?Math.floor(l/4)*4:Math.floor(l/c)*c,m=l-h,g=s?wn(u):1,v=s?u===1?c:g:1,y=Ue.size(i)/g,x=[Math.ceil(y/64),1,1];fr("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${x}`);let w=["rank","rank"],S=[t.strides[0],t.strides[1]],M=[t.kernelShape[s?1:2],t.kernelShape[s?2:3]],T=[t.dilations[0],t.dilations[1]],P=[M[0]+(t.dilations[0]<=1?0:(t.kernelShape[s?1:2]-1)*(t.dilations[0]-1)),M[1]+(t.dilations[1]<=1?0:(t.kernelShape[s?2:3]-1)*(t.dilations[1]-1))],E=[P[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),P[1]-1-Math.floor((t.pads[1]+t.pads[3])/2)],A=[{type:12,data:y},{type:12,data:S},{type:12,data:M},{type:12,data:T},{type:12,data:P},{type:6,data:E},{type:12,data:h},{type:12,data:l},{type:12,data:u},...It(e[0].dims,e[1].dims)];n&&(A.push(...It(e[2].dims)),w.push("rank")),A.push(...It(i));let L=B=>{let V=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:S.length},{name:"filter_dims",type:"u32",length:M.length},{name:"dilations",type:"u32",length:M.length},{name:"effective_filter_dims",type:"u32",length:P.length},{name:"pads",type:"i32",length:E.length},{name:"input_channels_per_group_int",type:"u32"},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],G=di(e[0].dataType),z=s?1:2,K=s?2:3,J=s?3:1,X=qe("W",e[1].dataType,e[1].dims.length,v),Q=qe("Dy",e[0].dataType,e[0].dims.length,c),W=[Q,X];n&&W.push(qe("bias",e[2].dataType,[i[J]].length,g));let oe=Et("result",e[0].dataType,i.length,g),ce=()=>{let te="";if(d)c===4?te+=`
        let xValue = ${Q.getByOffset("x_offset")};
        let wValue = ${X.getByOffset("w_offset")};
        dotProd = dotProd + dot(xValue, wValue);
        x_offset += 1u;
        w_offset += 1u;`:c===2?te+=`
          dotProd = dotProd + dot(vec4<${G}>(${Q.getByOffset("x_offset")}, ${Q.getByOffset("x_offset + 1u")}), vec4<${G}>(${X.getByOffset("w_offset")}, ${X.getByOffset("w_offset + 1u")}));
          x_offset += 2u;
          w_offset += 2u;`:c===1&&(te+=`
          dotProd = dotProd + dot(vec4<${G}>(${Q.getByOffset("x_offset")}, ${Q.getByOffset("x_offset + 1u")}, ${Q.getByOffset("x_offset + 2u")}, ${Q.getByOffset("x_offset + 3u")}), vec4<${G}>(${X.getByOffset("w_offset")}, ${X.getByOffset("w_offset + 1u")}, ${X.getByOffset("w_offset + 2u")}, ${X.getByOffset("w_offset + 3u")}));
          x_offset += 4u;
          w_offset += 4u;`);else if(te+=`
                  let xValue = ${s?Q.getByOffset(`${Q.indicesToOffset(`${Q.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${c}`):Q.get("batch","inputChannel","idyR","idyC")};
        `,c===1)te+=`
          let w_offset = ${X.indicesToOffset(`${X.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel, wOutChannel)`)};
          let wValue = ${X.getByOffset(`w_offset / ${v}`)};
          dotProd = dotProd + xValue * wValue;`;else for(let ee=0;ee<c;ee++)te+=`
            let wValue${ee} = ${X.getByOffset(`${X.indicesToOffset(`${X.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel + ${ee}, wOutChannel)`)} / ${v}`)};
            dotProd = dotProd + xValue[${ee}] * wValue${ee};`;return te},D=()=>{if(m===0)return"";if(!d)throw new Error(`packInputAs4 ${d} is not true.`);let te="";if(c===1){te+="dotProd = dotProd";for(let ee=0;ee<m;ee++)te+=`
            + ${Q.getByOffset(`x_offset + ${ee}`)} * ${X.getByOffset(`w_offset + ${ee}`)}`;te+=";"}else if(c===2){if(m!==2)throw new Error(`Invalid inputChannelsRemainder ${m}.`);te+=`
          let xValue = ${Q.getByOffset("x_offset")};
          let wValue = ${X.getByOffset("w_offset")};
          dotProd = dotProd + dot(xValue, wValue);`}return te},U=`
            let outputIndices = ${oe.offsetToIndices(`global_idx * ${g}`)};
            let batch = ${oe.indicesGet("outputIndices",0)};
            let d1 = ${oe.indicesGet("outputIndices",J)};
            let r = ${oe.indicesGet("outputIndices",z)};
            let c = ${oe.indicesGet("outputIndices",K)};
            let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;
            let dyRCorner = dyCorner.x;
            let dyCCorner = dyCorner.y;
            let groupId = d1 / uniforms.output_channels_per_group;
            let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;
            // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
            // ? = to be determined. : = across all values in that axis.
            var dotProd = ${oe.type.value}(0.0);
            var wR: u32 = 0;
            if (uniforms.dilations.x == 1) {
              // Minimum wR >= 0 that satisfies (dyRCorner + wR) % (uniforms.strides.x) == 0
              wR = u32(((dyRCorner + i32(uniforms.strides.x) - 1) / i32(uniforms.strides.x)) * i32(uniforms.strides.x) - dyRCorner);
            }
            for (; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {
              if (wR % uniforms.dilations.x != 0) {
                continue;
              }
              let dyR = (${G}(dyRCorner) + ${G}(wR)) / ${G}(uniforms.strides[0]);
              let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;
              if (dyR < 0.0 || dyR >= ${G}(uniforms.Dy_shape[${z}]) || fract(dyR) > 0.0 ||
                  wRPerm < 0) {
                continue;
              }
              let idyR: u32 = u32(dyR);
              var wC: u32 = 0;
              if (uniforms.dilations.y == 1) {
                // Minimum wC >= 0 that satisfies (dyCCorner + wC) % (uniforms.strides.y) == 0
                wC = u32(((dyCCorner + i32(uniforms.strides.y) - 1) / i32(uniforms.strides.y)) * i32(uniforms.strides.y) - dyCCorner);
              }
              for (; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {
                if (wC % uniforms.dilations.y != 0) {
                  continue;
                }
                let dyC = (${G}(dyCCorner) + ${G}(wC)) / ${G}(uniforms.strides.y);
                let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;
                if (dyC < 0.0 || dyC >= ${G}(uniforms.Dy_shape[${K}]) ||
                    fract(dyC) > 0.0 || wCPerm < 0) {
                  continue;
                }
                let idyC: u32 = u32(dyC);
                var inputChannel = groupId * uniforms.input_channels_per_group;
                ${d?`
                var x_offset = ${Q.indicesToOffset(`${Q.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${c};
                var w_offset = ${X.indicesToOffset(`${X.type.indices}(wRPerm, wCPerm, inputChannel, wOutChannel)`)} / ${v};
                  `:""}
                for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group_int; d2 = d2 + ${d?4:c}) {
                  ${ce()}
                  inputChannel = inputChannel + ${d?4:c};
                }
                ${D()}
                wC = wC + uniforms.strides.y - 1;
              }
              wR = wR + uniforms.strides[0] - 1;
            }
            let value = dotProd${n?` + bias[d1 / ${g}]`:""};
            ${oe.setByOffset("global_idx","value")};
          `;return`
    ${B.registerUniforms(V).declareVariables(...W,oe)}
      ${B.mainStart()}
      ${B.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};
    ${U}}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${t.cacheKey};${c}${v}${g}${d}${m}`,inputDependencies:w},getRunData:()=>({dispatchGroup:{x:x[0],y:x[1],z:x[2]},outputs:[{dims:r?r(i):i,dataType:e[0].dataType}],programUniforms:A}),getShaderSource:L}}}),YL,QL,JL,$T,OX,ZL,NT,eF,kX,tve=at(()=>{eve(),dh(),id(),YL=(e,t,r,n,i,s)=>(e-1)*t+r+(n-1)*i+1-s,QL=(e,t,r,n,i)=>{let s=Math.floor(e/2);t==="SAME_UPPER"?(r[n]=s,r[i]=e-s):t==="SAME_LOWER"&&(r[n]=e-s,r[i]=s)},JL=(e,t,r,n,i,s,o,a,l,u)=>{let c=e.length-2,d=u.length===0;l.length<c&&l.push(...Array(c-l.length).fill(0));let h=e[0],m=t[a?3:1]*i;for(let g=0,v=e.length-c-(a?1:0);g<c;++g,++v){let y=e[v],x=d?y*o[g]:u[g],w=YL(y,o[g],s[g],t[v],r[g],x);QL(w,n,s,g,g+c),d&&u.push(o[g]*(y-1)+l[g]+(t[v]-1)*r[g]+1-s[g]-s[g+c])}u.splice(0,0,h),u.splice(a?3:1,0,m)},$T=(e,t)=>{let r=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((d,h)=>d*h,1)===0){r.length=0;for(let d=2;d<t[1].dims.length;++d)r.push(t[1].dims[d])}let n=e.format==="NHWC";r.splice(0,0,t[1].dims[0]),r.splice(n?3:1,0,t[1].dims[1]);let i=e.pads.slice(),s=e.outputShape.slice(),o=e.outputPadding.slice(),a=t[0].dims,l=e.dilations.slice();if(l.reduce((d,h)=>d+h,0)===0){let d=t[0].dims.length-2;l=new Array(d).fill(1)}let u=e.strides.slice();if(u.reduce((d,h)=>d+h,0)===0){let d=t[0].dims.length-2;u=new Array(d).fill(1)}JL(a,r,l,e.autoPad,e.group,i,u,n,o,s);let c=Object.assign({},e);return Object.assign(c,{kernelShape:r,pads:i,outputPadding:o,outputShape:s,dilations:l,strides:u}),c},OX=e=>{let t=YI(e),r=e.format,n=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],i=e.dilations,s=e.group,o=e.kernelShape,a=e.pads,l=e.strides,u=e.wIsConst(),c=e.outputPadding,d=e.outputShape;return{autoPad:n,format:r,dilations:i,group:s,kernelShape:o,outputPadding:c,outputShape:d,pads:a,strides:l,wIsConst:u,...t,cacheKey:`${e.format};${t.activation};`}},ZL=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],n=e[1].dims[0];if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let i=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==i))throw new Error("invalid bias");let s=e[0].dims.length-2;if(t.dilations.reduce((o,a)=>o+a,0)>0&&t.dilations.length!==s)throw new Error(`dilations should be ${s}D`);if(t.strides.reduce((o,a)=>o+a,0)>0&&t.strides.length!==s)throw new Error(`strides should be ${s}D`);if(t.pads.reduce((o,a)=>o+a,0)>0&&t.pads.length!==s*2)throw new Error(`pads should be ${s*2}D`);if(t.outputPadding.length!==s&&t.outputPadding.length!==0)throw new Error(`output_padding should be ${s}D`);if(t.kernelShape.reduce((o,a)=>o+a,0)>0&&t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},NT=(e,t,r,n)=>{let i=e.kernelCustomData.wT??e.compute(eo(t[1],[2,3,0,1]),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=i);let s=[t[0],i];t.length===3&&s.push(t[2]),e.compute(AX(s,r,n),{inputs:s})},eF=(e,t)=>{let r=t.format==="NHWC",n=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&n.push(e.inputs[2]);let i=t.kernelShape;(i.length===0||i[0]===0)&&(i=[e.inputs[1].dims[2]]);let s=t.dilations;(s.length===0||s[0]===0)&&(s=[1]);let o=t.strides;(o.length===0||o[0]===0)&&(o=[1]);let a=t.pads;a.length===0&&(a=[0,0]),a=[0,a[0],0,a[1]],o=[1].concat(o),s=[1].concat(s),i=[1].concat(i);let l=t.outputPadding;l=[0].concat(l);let u=$T({...t,pads:a,strides:o,dilations:s,kernelShape:i,outputPadding:l},n);NT(e,n,u,c=>r?[c[0],c[2],c[3]]:[c[0],c[1],c[3]])},kX=(e,t)=>{if(ZL(e.inputs,t),e.inputs[0].dims.length===3)eF(e,t);else{let r=$T(t,e.inputs);NT(e,e.inputs,r)}}}),tF,IX,jX,rve=at(()=>{Bt(),Jt(),Dn(),er(),tF=(e,t,r,n)=>{let i=Ue.size(t),s=t.length,o=qe("input",e,s),a=Et("output",e,s),l=r.dataType===6?r.getInt32Array()[0]:Number(r.getBigInt64Array()[0]),u=Ue.normalizeAxis(l,s),c=d=>{let h=` i32(${o.indicesGet("inputIndices","uniforms.axis")}) `,m=Ot("uniforms.input_shape","uniforms.axis",s),g=n.reverse?h+(n.exclusive?" + 1":""):"0",v=n.reverse?m:h+(n.exclusive?"":" + 1");return`
                ${d.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(o,a)}
                ${d.mainStart()}
                  ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
                  var inputIndices = ${a.offsetToIndices("global_idx")};
                  var sum = ${a.type.value}(0);
                  let first : i32 = ${g};
                  let last : i32 = ${v};
                  for (var i : i32 = first; i < last; i++) {
                    ${o.indicesSet("inputIndices","uniforms.axis","u32(i)")};
                    sum = sum + ${o.getByIndices("inputIndices")};
                  }
                  ${a.setByOffset("global_idx","sum")};
                }`};return{name:"CumSum",shaderCache:{hint:n.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:12,data:i},{type:12,data:u},...It(t,t)]}),getShaderSource:c}},IX=(e,t)=>{let r=e.inputs[0].dims,n=e.inputs[0].dataType,i=e.inputs[1];e.compute(tF(n,r,i,t),{inputs:[0]})},jX=e=>{let t=e.exclusive===1,r=e.reverse===1;return Tr({exclusive:t,reverse:r})}}),rF,nF,iF,$X,NX,nve=at(()=>{Bt(),Jt(),Dn(),er(),rF=e=>{if(!e||e.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},nF=(e,t,r,n)=>{let i=[];i.push(`fn perm(i: ${n.type.indices}) -> ${r.type.indices} {
    var a: ${r.type.indices};`);for(let s=0;s<t;++s)i.push(r.indicesSet("a",e[s],`i[${s}]`));return i.push("return a;}"),i.join(`
`)},iF=(e,t)=>{let r,n,i,s,o,a,l=t.format==="NHWC",u=t.blocksize,c=t.mode==="DCR";l?([r,n,i,s]=e.dims,o=c?[r,n,i,u,u,s/u**2]:[r,n,i,s/u**2,u,u],a=c?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([r,n,i,s]=[e.dims[0],e.dims[2],e.dims[3],e.dims[1]],o=c?[r,u,u,s/u**2,n,i]:[r,s/u**2,u,u,n,i],a=c?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let d=e.reshape(o),h=d.dims.length,m=e.dataType,g=qe("a",m,h),v=Et("output",m,h),y=x=>`
  ${x.registerUniform("output_size","u32").declareVariables(g,v)}

  ${nF(a,h,g,v)}

  ${x.mainStart()}
    ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${v.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${v.setByOffset("global_idx",g.getByIndices("aIndices"))}
  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e.dims};${t.blocksize};${t.mode}`,inputDependencies:["rank"]},getRunData:x=>{let w=l?[r,n*u,i*u,s/u**2]:[r,s/u**2,n*u,i*u],S=Ue.size(w),M=d.dims,T=Ue.sortBasedOnPerm(M,a);return{outputs:[{dims:w,dataType:x[0].dataType}],dispatchGroup:{x:Math.ceil(S/64)},programUniforms:[{type:12,data:S},...It(M,T)]}},getShaderSource:y}},$X=(e,t)=>{rF(e.inputs),e.compute(iF(e.inputs[0],t))},NX=e=>Tr({blocksize:e.blocksize,mode:e.mode,format:e.format})}),Wb,my,DT,sF,oF,aF,lF,RT,uF,DX,RX,ive=at(()=>{Bt(),Jt(),Dn(),er(),Wb="[a-zA-Z]|\\.\\.\\.",my="("+Wb+")+",DT="^"+my+"$",sF="("+my+",)*"+my,oF="^"+sF+"$",aF=class{constructor(e=-1){this.symbolToIndices=new Map,this.inputIndex=e}addSymbol(e,t){let r=this.symbolToIndices.get(e);r===void 0?r=[t]:r.push(t),this.symbolToIndices.set(e,r)}},lF=class{constructor(e,t){this.equation=t,this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[r,n]=t.includes("->")?t.split("->",2):[t,""];if(!r.match(RegExp(oF)))throw new Error("Invalid LHS term");if(r.split(",").forEach((i,s)=>{let o=e[s].dims.slice();if(!i.match(RegExp(DT)))throw new Error("Invalid LHS term");let a=this.processTerm(i,!0,o,s);this.lhs.push(a)}),n==="")n+=[...this.symbolToInfo.entries()].filter(([i,s])=>s.count===1||i==="...").map(([i])=>i).join("");else if(!n.match(RegExp(my)))throw new Error("Invalid RHS");n.match(RegExp(Wb,"g"))?.forEach(i=>{if(i==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let s=this.symbolToInfo.get(i);if(s===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(s.dimValue)}}),this.rhs=this.processTerm(n,!1,this.outputDims)}addSymbol(e,t,r){let n=this.symbolToInfo.get(e);if(n!==void 0){if(n.dimValue!==t&&n.count!==1)throw new Error("Dimension mismatch");n.count++,n.inputIndices.push(r)}else n={count:1,dimValue:t,inputIndices:[r]};this.symbolToInfo.set(e,n)}processTerm(e,t,r,n=-1){let i=r.length,s=!1,o=[],a=0;if(!e.match(RegExp(DT))&&!t&&e!=="")throw new Error("Invalid LHS term");let l=e.match(RegExp(Wb,"g")),u=new aF(n);return l?.forEach((c,d)=>{if(c==="..."){if(s)throw new Error("Only one ellipsis is allowed per input term");s=!0;let h=i-l.length+1;if(h<0)throw new Error("Ellipsis out of bounds");if(o=r.slice(a,a+h),this.hasEllipsis){if(this.ellipsisDims.length!==o.length||this.ellipsisDims.toString()!==o.toString())throw new Error("Ellipsis dimensions mismatch")}else if(t)this.hasEllipsis=!0,this.ellipsisDims=o;else throw new Error("Ellipsis must be specified in the LHS");for(let m=0;m<o.length;m++){let g=String.fromCharCode(48+m);u.addSymbol(g,d+m),this.addSymbol(g,r[a++],n)}}else u.addSymbol(c,d+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(c,r[a++],n)}),u}},RT=e=>e+"_max",uF=(e,t,r,n)=>{let i=e.map(u=>u.length).map((u,c)=>qe(`input${c}`,t,u)),s=Ue.size(n),o=Et("output",t,n.length),a=[...r.symbolToInfo.keys()].filter(u=>!r.rhs.symbolToIndices.has(u)),l=u=>{let c=[],d="var prod = 1.0;",h="var sum = 0.0;",m="sum += prod;",g=[],v=[],y=[],x=[],w=r.symbolToInfo.size===r.rhs.symbolToIndices.size;r.symbolToInfo.forEach((M,T)=>{if(r.rhs.symbolToIndices.has(T)){let P=r.rhs.symbolToIndices.get(T)?.[0];P!==void 0&&r.lhs.forEach((E,A)=>{if(M.inputIndices.includes(A)){let L=E.symbolToIndices.get(T);if(L===void 0)throw new Error("Invalid symbol error");L.forEach(B=>{c.push(`${i[A].indicesSet(`input${A}Indices`,B,o.indicesGet("outputIndices",P))}`)})}})}else r.lhs.forEach((P,E)=>{if(M.inputIndices.includes(E)){let A=P.symbolToIndices.get(T);if(A===void 0)throw new Error("Invalid symbol error");A.forEach(L=>{g.push(`${i[E].indicesSet(`input${E}Indices`,L,`${T}`)}`)}),x.push(`prod *= ${i[E].getByIndices(`input${E}Indices`)};`)}}),v.push(`for(var ${T}: u32 = 0; ${T} < uniforms.${RT(T)}; ${T}++) {`),y.push("}")});let S=w?[...c,`let sum = ${i.map((M,T)=>M.getByIndices(`input${T}Indices`)).join(" * ")};`]:[...c,h,...v,...g,d,...x,m,...y];return`
            ${u.registerUniforms(a.map(M=>({name:`${RT(M)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...i,o)}

            ${u.mainStart()}
            ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
            var outputIndices = ${o.offsetToIndices("global_idx")};
            ${i.map((M,T)=>`var input${T}Indices: ${i[T].type.indices};`).join(`
`)}
            ${S.join(`
`)};
            ${o.setByOffset("global_idx","sum")};
          }`};return{name:"Einsum",shaderCache:{hint:r.equation,inputDependencies:e.map(()=>"rank")},getRunData:()=>{let u=a.filter(d=>r.symbolToInfo.has(d)).map(d=>({type:12,data:r.symbolToInfo.get(d)?.dimValue||0}));u.push({type:12,data:s});let c=e.map((d,h)=>[...It(d)]).reduce((d,h)=>d.concat(h),u);return c.push(...It(n)),{outputs:[{dims:n,dataType:t}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:c}},getShaderSource:l}},DX=(e,t)=>{let r=new lF(e.inputs,t.equation),n=r.outputDims,i=e.inputs.map((s,o)=>s.dims);e.compute(uF(i,e.inputs[0].dataType,r,n))},RX=e=>{let t=e.equation.replace(/\s+/g,"");return Tr({equation:t})}}),cF,LT,dF,fF,LX,sve=at(()=>{Bt(),Jt(),er(),cF=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),n=r.length<t.length?0:r.length-t.length,i=t.length<r.length?0:t.length-r.length;for(;n<r.length&&i<t.length;++n,++i)if(r[n]!==t[i]&&r[n]!==1&&t[i]!==1)throw new Error("Expand requires shape to be broadcastable to input")},LT=(e,t)=>{let r=e.length-t.length,n=[];for(let i=0;i<r;++i)n.push(e[i]);for(let i=0;i<t.length;++i)n.push(t[i]===1?e[i+r]:t[i]);return n},dF=(e,t)=>e.length>t.length?LT(e,t):LT(t,e),fF=e=>{let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),n=dF(t,r),i=e[0].dataType,s=i===9||Ue.size(t)===1,o=i===9||t.length>0&&t[t.length-1]%4===0?4:1,a=s||n.length>0&&n[n.length-1]%4===0?4:1,l=Math.ceil(Ue.size(n)/a),u=d=>{let h=qe("input",i,t.length,o),m=Et("output",i,n.length,a),g;if(i===9){let v=(y,x,w="")=>`
          let outputIndices${x} = ${m.offsetToIndices(`outputOffset + ${x}u`)};
          let offset${x} = ${h.broadcastedIndicesToOffset(`outputIndices${x}`,m)};
          let index${x} = offset${x} / 4u;
          let component${x} = offset${x} % 4u;
          ${y}[${x}] = ${w}(${h.getByOffset(`index${x}`)}[component${x}]);
        `;g=`
        let outputOffset = global_idx * ${a};
        var data = vec4<u32>(0);
        ${v("data",0,"u32")}
        ${v("data",1,"u32")}
        ${v("data",2,"u32")}
        ${v("data",3,"u32")}
        ${m.setByOffset("global_idx","data")}
      }`}else g=`
        let outputIndices = ${m.offsetToIndices(`global_idx * ${a}`)};
        let inputOffset = ${h.broadcastedIndicesToOffset("outputIndices",m)};
        let data = ${m.type.value}(${h.getByOffset(`inputOffset / ${o}`)});
        ${m.setByOffset("global_idx","data")}
      }`;return`
    ${d.registerUniform("vec_size","u32").declareVariables(h,m)}
    ${d.mainStart()}
    ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
    ${g}`},c=[{type:12,data:l},...It(t,n)];return{name:"Expand",shaderCache:{hint:`${n.length};${o}${a}`,inputDependencies:["rank"]},getShaderSource:u,getRunData:()=>({outputs:[{dims:n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:c})}},LX=e=>{cF(e.inputs),e.compute(fF(e.inputs),{inputs:[0]})}}),hF,FX,ove=at(()=>{Bt(),Jt(),er(),XI(),hF=e=>{let t=e[0].dataType,r=Ue.size(e[0].dims),n=Ue.size(e[1].dims),i=n%4===0,s=o=>{let a=qe("x",t,[1],4),l=qe("bias",t,[1],4),u=Et("y",t,[1],4),c=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],d=m=>`
      let bias${m}_offset: u32 = (global_idx * 4 + ${m}) % uniforms.bias_size;
      let bias${m} = ${l.getByOffset(`bias${m}_offset / 4`)}[bias${m}_offset % 4];`,h=i?`
      let bias = ${l.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${d(0)}${d(1)}${d(2)}${d(3)}
      let bias = ${a.type.value}(bias0, bias1, bias2, bias3);`;return`${o.registerUniforms(c).declareVariables(a,l,u)}

    ${AO(Ji(t))}

    ${o.mainStart(km)}
      ${o.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}

      let x = ${a.getByOffset("global_idx")};
      ${h}
      let x_in = x + bias;
      ${u.setByOffset("global_idx",OO("x_in"))}
    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${i}`,inputDependencies:["type","type"]},getShaderSource:s,getRunData:o=>({outputs:[{dims:o[0].dims,dataType:o[0].dataType}],programUniforms:[{type:12,data:Math.ceil(r/4)},{type:12,data:n}],dispatchGroup:{x:Math.ceil(r/km/4)}})}},FX=e=>{e.inputs.length<2||Ue.size(e.inputs[1].dims)===0?sX(e):e.compute(hF(e.inputs))}}),pF,mF,BX,zX,ave=at(()=>{Bt(),Jt(),Dn(),er(),pF=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},mF=(e,t)=>{let r=e[0].dims,n=e[1].dims,i=r.length,s=Ue.normalizeAxis(t.axis,i),o=r.slice(0);o.splice(s,1,...n);let a=r[s],l=e[0].dataType===9?4:1,u=Math.ceil(Ue.size(o)/l),c=[{type:12,data:u},{type:6,data:a},{type:12,data:s},...It(e[0].dims,e[1].dims,o)],d=h=>{let m=qe("data",e[0].dataType,e[0].dims.length,l),g=qe("inputIndices",e[1].dataType,e[1].dims.length),v=Et("output",e[0].dataType,o.length,l),y=w=>{let S=n.length,M=`var indicesIndices${w}  = ${g.type.indices}(0);`;for(let T=0;T<S;T++)M+=`${S>1?`indicesIndices${w}[${T}]`:`indicesIndices${w}`} = ${o.length>1?`outputIndices${w}[uniforms.axis + ${T}]`:`outputIndices${w}`};`;M+=`
          var idx${w} = ${g.getByIndices(`indicesIndices${w}`)};
          if (idx${w} < 0) {
            idx${w} = idx${w} + uniforms.axisDimLimit;
          }
          var dataIndices${w} : ${m.type.indices};
        `;for(let T=0,P=0;T<i;T++)T===s?(M+=`${i>1?`dataIndices${w}[${T}]`:`dataIndices${w}`} = u32(idx${w});`,P+=S):(M+=`${i>1?`dataIndices${w}[${T}]`:`dataIndices${w}`} = ${o.length>1?`outputIndices${w}[${P}]`:`outputIndices${w}`};`,P++);return M},x;if(e[0].dataType===9){let w=(S,M,T="")=>`
          let outputIndices${M} = ${v.offsetToIndices(`outputOffset + ${M}u`)};
          ${y(M)};
          let offset${M} = ${m.indicesToOffset(`dataIndices${M}`)};
          let index${M} = offset${M} / 4u;
          let component${M} = offset${M} % 4u;
          ${S}[${M}] = ${T}(${m.getByOffset(`index${M}`)}[component${M}]);
        `;x=`
        let outputOffset = global_idx * ${l};
        var value = vec4<u32>(0);
        ${w("value",0,"u32")}
        ${w("value",1,"u32")}
        ${w("value",2,"u32")}
        ${w("value",3,"u32")}
        ${v.setByOffset("global_idx","value")}
      `}else x=`
      let outputIndices = ${v.offsetToIndices("global_idx")};
      ${y("")};
      let value = ${m.getByIndices("dataIndices")};
      ${v.setByOffset("global_idx","value")};
      `;return`
      ${h.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(m,g,v)}
      ${h.mainStart()}
        ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        ${x}
      }`};return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:c}),getShaderSource:d}},BX=e=>Tr({axis:e.axis}),zX=(e,t)=>{let r=e.inputs;pF(r),e.compute(mF(e.inputs,t))}}),gF,UX,VX,lve=at(()=>{Bt(),Jt(),er(),gF=(e,t,r,n,i,s,o,a,l)=>{let u=[{type:12,data:s},{type:12,data:n},{type:12,data:i},{type:12,data:r},{type:12,data:o},{type:12,data:a},{type:12,data:l}],c=[s];u.push(...It(t.dims,c));let d=h=>{let m=qe("indices_data",t.dataType,t.dims.length),g=Et("input_slice_offsets_data",12,1,1),v=[m,g],y=[{name:"output_size",type:"u32"},{name:"batch_dims",type:"u32"},{name:"input_dims",type:"u32",length:i.length},{name:"sizes_from_slice_dims_data",type:"u32",length:r.length},{name:"num_slices_per_batch",type:"u32"},{name:"input_batch_stride",type:"u32"},{name:"num_slice_dims",type:"u32"}];return`
  ${h.registerUniforms(y).declareVariables(...v)}
  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let batch_idx = global_idx / uniforms.num_slices_per_batch;
    let base_offset = batch_idx * uniforms.input_batch_stride;

    let slice_indices_base_offset = global_idx * uniforms.num_slice_dims;
    var relative_slice_offset = 0;
    for (var dim_idx = 0u; dim_idx < uniforms.num_slice_dims; dim_idx ++) {
      var index = i32(indices_data[dim_idx + slice_indices_base_offset].x);
      let input_dim_idx = uniforms.batch_dims + dim_idx;
      if (index < 0) {
        ${i.length===1?"index += i32(uniforms.input_dims);":"index += i32(uniforms.input_dims[input_dim_idx]);"}
      }
      ${r.length===1?"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data);":"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data[dim_idx]);"}
    }

    input_slice_offsets_data[global_idx] =  base_offset + u32(relative_slice_offset);
  }`};return e.compute({name:"computeSliceOffsets",shaderCache:{hint:`${i.length}_${r.length}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:c,dataType:e.inputs[1].dataType}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:u}),getShaderSource:d},{inputs:[t],outputs:[-1]})[0]},UX=(e,t)=>{let r=e.inputs,n=r[0].dims,i=r[0].dataType,s=r[1].dims,o=s[s.length-1],a=Ue.sizeToDimension(s,s.length-1),l=Ue.sizeFromDimension(n,t.batchDims+o),u=Ue.sizeToDimension(n,t.batchDims),c=Ue.sizeFromDimension(n,t.batchDims),d=a/u,h=new Array(o),m=l;for(let M=0;M<o;++M)h[o-1-M]=m,m*=n[t.batchDims+o-1-M];let g=gF(e,r[1],h,t.batchDims,n,a,d,c,o),v=t.batchDims+o;if(v>n.length)throw new Error("last dimension of indices must not be larger than rank of input tensor");let y=s.slice(0,-1).concat(n.slice(v)),x=Ue.size(y),w=[{type:12,data:x},{type:12,data:l},...It(r[0].dims,g.dims,y)],S=M=>{let T=qe("data",r[0].dataType,r[0].dims.length),P=qe("slice_offsets",12,g.dims.length),E=Et("output",r[0].dataType,y.length);return`
          ${M.registerUniform("output_size","u32").registerUniform("slice_size","u32").declareVariables(T,P,E)}
            ${M.mainStart()}
            ${M.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let slice_offset = slice_offsets[global_idx / uniforms.slice_size];
          output[global_idx] = data[u32(slice_offset) + global_idx % uniforms.slice_size];
        }`};e.compute({name:"GatherND",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:y,dataType:i}],dispatchGroup:{x:Math.ceil(x/64)},programUniforms:w}),getShaderSource:S},{inputs:[r[0],g]})},VX=e=>({batchDims:e.batch_dims,cacheKey:""})}),vF,yF,WX,GX,uve=at(()=>{Bt(),Jt(),Dn(),er(),vF=(e,t)=>{if(e.length<3||e.length>4)throw new Error("GatherBlockQuantized requires 3 or 4 inputs.");let r=Ue.normalizeAxis(t.quantizeAxis,e[0].dims.length),n=t.blockSize,i=e[0],s=e[2],o=e.length===4?e[3]:void 0;if(s.dims.length!==i.dims.length||!i.dims.map((a,l)=>l===r?Math.ceil(a/n)===s.dims[l]:a===s.dims[l]).reduce((a,l)=>a&&l,!0))throw new Error("Scales must have the same rank as the input tensor and the dims should match except on gatherAxis.");if(o){if(o.dataType!==i.dataType)throw new Error("Zero point must have the same data type as the input tensor.");if(o.dims.length!==s.dims.length||!o.dims.map((a,l)=>a===s.dims[l]).reduce((a,l)=>a&&l,!0))throw new Error("Zero point must have the same rank as the input tensor and the dims should match except on quantizeAxis.")}},yF=(e,t)=>{let r=e[0].dims,n=e[1].dims,i=r.length,s=Ue.normalizeAxis(t.gatherAxis,i),o=Ue.normalizeAxis(t.quantizeAxis,i),a=r.slice(0);a.splice(s,1,...n);let l=Ue.size(a),u=e[2].dataType,c=e[0].dataType===22,d=[{type:12,data:l},{type:12,data:o},{type:12,data:s},{type:12,data:t.blockSize},...It(...e.map((m,g)=>m.dims),a)],h=m=>{let g=qe("data",e[0].dataType,e[0].dims.length),v=qe("inputIndices",e[1].dataType,e[1].dims.length),y=qe("scales",e[2].dataType,e[2].dims.length),x=e.length>3?qe("zeroPoint",e[3].dataType,e[3].dims.length):void 0,w=Et("output",u,a.length),S=[g,v,y];x&&S.push(x);let M=[{name:"output_size",type:"u32"},{name:"quantize_axis",type:"u32"},{name:"gather_axis",type:"u32"},{name:"block_size",type:"u32"}];return`
        ${m.registerUniforms(M).declareVariables(...S,w)}
        ${m.mainStart()}
        let output_indices = ${w.offsetToIndices("global_idx")};
        var indices_indices = ${v.type.indices}(0);
        ${n.length>1?`
          for (var i: u32 = 0; i < ${n.length}; i++) {
            let index = ${w.indicesGet("output_indices","uniforms.gather_axis + i")};
            ${v.indicesSet("indices_indices","i","index")};
          }`:`indices_indices = ${w.indicesGet("output_indices","uniforms.gather_axis")};`};
        var data_indices = ${g.type.indices}(0);
        for (var i: u32 = 0; i < uniforms.gather_axis; i++) {
          let index = ${w.indicesGet("output_indices","i")};
          ${g.indicesSet("data_indices","i","index")};
        }
        var index_from_indices = ${v.getByIndices("indices_indices")};
        if (index_from_indices < 0) {
          index_from_indices += ${r[s]};
        }
        ${g.indicesSet("data_indices","uniforms.gather_axis","u32(index_from_indices)")};
        for (var i = uniforms.gather_axis + 1; i < ${a.length}; i++) {
          let index = ${w.indicesGet("output_indices",`i + ${n.length} - 1`)};
          ${g.indicesSet("data_indices","i","index")};
        }
        let data_offset = ${g.indicesToOffset("data_indices")};
        let data_index = data_offset % 8;
        // Convert 4-bit packed data to 8-bit packed data.
        let packed_4bit_quantized_data = ${g.getByOffset("data_offset / 8")};
        let packed_8bit_quantized_data = (packed_4bit_quantized_data >> (4 * (data_index % 2))) & 0x0f0f0f0f;
        let quantized_data_vec = ${c?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_quantized_data));
        let quantized_data = quantized_data_vec[data_index / 2];
        var scale_indices = data_indices;
        let quantize_axis_index = ${y.indicesGet("data_indices","uniforms.quantize_axis")} / uniforms.block_size;
        ${y.indicesSet("scale_indices","uniforms.quantize_axis","quantize_axis_index")};
        var scale = ${y.getByIndices("scale_indices")};
        ${x?`
              let zero_point_indices = scale_indices;
              let zero_point_offset = ${x.indicesToOffset("zero_point_indices")};
              let zero_point_index = zero_point_offset % 8;
              let packed_4bit_zero_points = ${x.getByOffset("zero_point_offset / 8")};
              let packed_8bit_zero_points = (packed_4bit_zero_points >> (4 * (zero_point_index % 2))) & 0x0f0f0f0f;
              let zero_point_vec = ${c?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_zero_points));
              let zero_point = zero_point_vec[zero_point_index / 2];`:"var zero_point = 0"};
        let dequantized_data = ${Ji(u)}(quantized_data - zero_point) * scale;
        ${w.setByOffset("global_idx","dequantized_data")};
    }`};return{name:"GatherBlockQuantized",shaderCache:{hint:`${t.cacheKey};${e.filter((m,g)=>g!==1).map(m=>m.dims.join("_")).join(";")}`,inputDependencies:Array.from({length:e.length},(m,g)=>"rank")},getRunData:()=>({outputs:[{dims:a,dataType:u}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:d}),getShaderSource:h}},WX=(e,t)=>{let r=e.inputs;vF(r,t),e.compute(yF(e.inputs,t))},GX=e=>Tr({blockSize:e.blockSize,gatherAxis:e.gatherAxis,quantizeAxis:e.quantizeAxis})}),_F,bF,qX,HX,cve=at(()=>{Bt(),Jt(),Dn(),er(),_F=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and
                     indices input tensors be of same rank.`)},bF=(e,t)=>{let r=e[0].dims,n=e[0].dataType,i=r.length,s=e[1].dims,o=e[1].dataType,a=Ue.normalizeAxis(t.axis,i),l=r[a],u=s.slice(0),c=Ue.size(u),d=qe("input",n,i),h=qe("indicesInput",o,s.length),m=Et("output",n,u.length),g=[{type:12,data:c},{type:6,data:l},{type:12,data:a}];return g.push(...It(r,s,u)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:u,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(c/64)},programUniforms:g}),getShaderSource:v=>`
      ${v.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(d,h,m)}
      ${v.mainStart()}
      ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

      let outputIndices = ${m.offsetToIndices("global_idx")};

      var idx = ${h.getByOffset("global_idx")};
      if (idx < 0) {
        idx = idx + uniforms.axisDimLimit;
      }
      var inputIndices = ${d.type.indices}(outputIndices);
      ${d.indicesSet("inputIndices","uniforms.axis","u32(idx)")};
      let value = ${d.getByIndices("inputIndices")};

      ${m.setByOffset("global_idx","value")};
  }`}},qX=e=>Tr({axis:e.axis}),HX=(e,t)=>{let r=e.inputs;_F(r),e.compute(bF(e.inputs,t))}}),wF,xF,KX,XX,dve=at(()=>{Bt(),Jt(),er(),wF=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},xF=(e,t)=>{let r=e[0].dims.slice(),n=e[1].dims.slice(),[i,s,o]=q9.getShapeOfGemmResult(r,t.transA,n,t.transB,e.length===3?e[2].dims:void 0),a=[i,s];if(!a)throw new Error("Can't use gemm on the given tensors");let l=16,u=Math.ceil(s/l),c=Math.ceil(i/l),d=!0,h=Ue.size(a),m=[{type:12,data:d?u:h},{type:12,data:i},{type:12,data:s},{type:12,data:o},{type:1,data:t.alpha},{type:1,data:t.beta}],g=["type","type"];e.length===3&&(m.push(...It(e[2].dims)),g.push("rank")),m.push(...It(a));let v=x=>{let w="";t.transA&&t.transB?w="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?w="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?w="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(w="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let S=t.alpha===1?"":"value *= uniforms.alpha;",M=qe("a",e[0].dataType,e[0].dims),T=qe("b",e[1].dataType,e[1].dims),P=M.type.value,E=null,A=[M,T];e.length===3&&(E=qe("c",e[2].dataType,e[2].dims.length),A.push(E));let L=Et("output",e[0].dataType,a.length);A.push(L);let B=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`
  ${x.registerUniforms(B).declareVariables(...A)}

  ${x.mainStart()}
    ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let m = global_idx / uniforms.N;
    let n = global_idx % uniforms.N;

    var value = ${P}(0);
    for (var k: u32 = 0u; k < uniforms.K; k++) {
      ${w}
    }

    ${S}
    ${E!=null?`let cOffset = ${E.broadcastedIndicesToOffset("vec2(m, n)",L)}; value += ${P}(uniforms.beta) * ${E.getByOffset("cOffset")};`:""}
    output[global_idx] = value;
  }`},y=x=>{let w=qe("a",e[0].dataType,e[0].dims),S=qe("b",e[1].dataType,e[1].dims),M=null,T=[w,S];e.length===3&&(M=qe("c",e[2].dataType,e[2].dims.length),T.push(M));let P=Et("output",e[0].dataType,a.length);T.push(P);let E=[{name:"num_tile_n",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}],A="",L="";t.transA&&t.transB?(L=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${w.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${S.type.value}(0);
      }
      `,A="value += tile_a[k][local_id.y] * tile_b[local_id.x][k];"):t.transA&&!t.transB?(L=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${w.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${S.type.value}(0);
      }
      `,A="value += tile_a[k][local_id.y] * tile_b[k][local_id.x];"):!t.transA&&t.transB?(L=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${w.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${S.type.value}(0);
      }
      `,A="value += tile_a[local_id.y][k] * tile_b[local_id.x][k];"):!t.transA&&!t.transB&&(L=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${w.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${S.type.value}(0);
      }
      `,A="value += tile_a[local_id.y][k] * tile_b[k][local_id.x];");let B=t.alpha===1?"":"value *= uniforms.alpha;";return`
  ${x.registerUniforms(E).declareVariables(...T)}
  var<workgroup> tile_a: array<array<${w.type.storage}, ${l}>, ${l}>;
  var<workgroup> tile_b: array<array<${S.type.storage}, ${l}>, ${l}>;
  ${x.mainStart([l,l,1])}
    let tile_col_start = (workgroup_index % uniforms.num_tile_n) * ${l};
    let tile_row_start = (workgroup_index / uniforms.num_tile_n) * ${l};
    let num_tiles = (uniforms.K - 1) / ${l} + 1;
    var k_start = 0u;
    var value = ${P.type.value}(0);
    for (var t: u32 = 0u; t < num_tiles; t++) {
      ${L}
      k_start = k_start + ${l};
      workgroupBarrier();

      for (var k: u32 = 0u; k < ${l}; k++) {
        ${A}
      }
      workgroupBarrier();
    }

    ${B}
    let m = tile_row_start + local_id.y;
    let n = tile_col_start + local_id.x;
    ${M!=null?`let cOffset = ${M.broadcastedIndicesToOffset("vec2(m, n)",P)}; value += ${P.type.value}(uniforms.beta) * ${M.getByOffset("cOffset")};`:""}
    if (m < uniforms.M && n < uniforms.N) {
      output[m * uniforms.N + n] = value;
    }
  }`};return d?{name:"GemmShared",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:g},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:u*c},programUniforms:m}),getShaderSource:y}:{name:"Gemm",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:g},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:m}),getShaderSource:v}},KX=e=>{let t=e.transA,r=e.transB,n=e.alpha,i=e.beta;return{transA:t,transB:r,alpha:n,beta:i,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},XX=(e,t)=>{wF(e.inputs),e.compute(xF(e.inputs,t))}}),sl,mu,vf,yf,MF,TF,SF,PF,EF,CF,AF,OF,YX,QX,fve=at(()=>{Bt(),Jt(),Dn(),er(),[sl,mu,vf,yf]=[0,1,2,3],MF=e=>{if(e[0].dims.length!==4)throw new Error("only 4-D tensor is supported.");if(e[0].dims.length!==e[1].dims.length)throw new Error("input dimensions must be equal to grid dimensions");if(e[0].dims.length-2!==e[1].dims[e[1].dims.length-1])throw new Error(`last dimension of grid must be equal to ${e[0].dims.length-2}`);if(e[0].dims[0]!==e[1].dims[0])throw new Error("grid batch size must match input batch size")},TF=`
  fn gs_get_cubic_coeffs(x: f32) -> vec4<f32> {
    let cubic_alpha = -0.75f;
    let x_abs = abs(x);
    var coeffs: vec4<f32>;
    coeffs[0] = (((cubic_alpha * (x_abs + 1) - 5 * cubic_alpha) * (x_abs + 1) + 8 * cubic_alpha) * (x_abs + 1) - 4 * cubic_alpha);
    coeffs[1] = (((cubic_alpha + 2) * x_abs - (cubic_alpha + 3)) * x_abs * x_abs + 1);
    coeffs[2] = (((cubic_alpha + 2) * (1 - x_abs) - (cubic_alpha + 3)) * (1 - x_abs) * (1 - x_abs) + 1);
    coeffs[3] = (((cubic_alpha * (2 - x_abs) - 5 * cubic_alpha) * (2 - x_abs) + 8 * cubic_alpha) * (2 - x_abs) - 4 * cubic_alpha);
    return coeffs;
  }
`,SF=e=>`
  fn gs_bicubic_interpolate(p: mat4x4<${e}>, x: f32, y: f32) -> ${e} {
    var v: vec4<f32>;
    var coeffs = gs_get_cubic_coeffs(x);
    for (var i = 0; i < 4; i++) {
      v[i] = coeffs[0] * p[i][0] + coeffs[1] * p[i][1] + coeffs[2] * p[i][2] + coeffs[3] * p[i][3];
    }
    coeffs = gs_get_cubic_coeffs(y);
    let pixel = ${e}(coeffs[0] * v[0] + coeffs[1] * v[1] + coeffs[2] * v[2] + coeffs[3] * v[3]);
    return pixel;
  }
`,PF=e=>`
  fn gs_denormalize(n: f32, length: i32) -> f32 {
    ${e.alignCorners===0?`
    // alignCorners: false => [-1, 1] to [-0.5, length - 0.5]
    return ((n + 1.0) * f32(length) - 1.0) / 2.0;
    `:`
    // alignCorners: true => [-1, 1] to [0, length - 1]
    return (n + 1.0) / 2.0 * (f32(length - 1));
    `}
  }
`,EF=e=>`
  ${e.paddingMode==="reflection"?`
      fn gs_reflect(x: i32, x_min: f32, x_max: f32) -> u32 {
        var dx = 0.0;
        var fx = f32(x);
        let range = x_max - x_min;
        if (fx < x_min) {
          dx = x_min - fx;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_min + r;
          } else {
            fx = x_max - r;
          }
        } else if (fx > x_max) {
          dx = fx - x_max;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_max - r;
          } else {
            fx = x_min + r;
          }
        }
        return u32(fx);
      }`:""}
`,CF=(e,t,r)=>`
  fn pixel_at_grid(r: i32, c: i32, H: i32, W: i32, batch: u32, channel: u32, border: vec4<f32>) -> ${t} {
     var pixel = ${t}(0);
     var indices = vec4<u32>(0);
     indices[${sl}] = batch;
     indices[${mu}] = channel;`+(()=>{switch(r.paddingMode){case"zeros":return`
          if (r >= 0 && r < H && c >=0 && c < W) {
            indices[${vf}] = u32(r);
            indices[${yf}] = u32(c);
          } else {
            return ${t}(0);
          }
        `;case"border":return`
          indices[${vf}] = u32(clamp(r, 0, H - 1));
          indices[${yf}] = u32(clamp(c, 0, W - 1));
        `;case"reflection":return`
          indices[${vf}] = gs_reflect(r, border[1], border[3]);
          indices[${yf}] = gs_reflect(c, border[0], border[2]);
        `;default:throw new Error(`padding mode ${r.paddingMode} is not supported`)}})()+`
    return ${e.getByIndices("indices")};
  }
`,AF=(e,t,r)=>(()=>{switch(r.mode){case"nearest":return`
          let result = pixel_at_grid(i32(round(y)), i32(round(x)), H_in, W_in, indices[${sl}], indices[${mu}], border);
        `;case"bilinear":return`
          let x1 = i32(floor(x));
          let y1 = i32(floor(y));
          let x2 = x1 + 1;
          let y2 = y1 + 1;

          let p11 = pixel_at_grid(y1, x1, H_in, W_in, indices[${sl}], indices[${mu}], border);
          let p12 = pixel_at_grid(y1, x2, H_in, W_in, indices[${sl}], indices[${mu}], border);
          let p21 = pixel_at_grid(y2, x1, H_in, W_in, indices[${sl}], indices[${mu}], border);
          let p22 = pixel_at_grid(y2, x2, H_in, W_in, indices[${sl}], indices[${mu}], border);

          let dx2 = ${t}(f32(x2) - x);
          let dx1 = ${t}(x - f32(x1));
          let dy2 = ${t}(f32(y2) - y);
          let dy1 = ${t}(y - f32(y1));
          let result = dy2 * (dx2 * p11 + dx1 * p12) + dy1 * (dx2 * p21 + dx1 * p22);
        `;case"bicubic":return`
          let x0 = i32(floor(x)) - 1;
          let y0 = i32(floor(y)) - 1;
          var p: mat4x4<${t}>;
          for (var h = 0; h < 4; h++) {
            for (var w = 0; w < 4; w++) {
              p[h][w] = pixel_at_grid(h + y0, w + x0, H_in, W_in, indices[${sl}], indices[${mu}], border);
            }
          }

          let dx = x - f32(x0 + 1);
          let dy = y - f32(y0 + 1);
          let result = gs_bicubic_interpolate(p, dx, dy);
        `;default:throw new Error(`mode ${r.mode} is not supported`)}})()+`${e.setByOffset("global_idx","result")}`,OF=(e,t)=>{let r=qe("x",e[0].dataType,e[0].dims.length),n=[e[1].dims[0],e[1].dims[1],e[1].dims[2]],i=qe("grid",e[1].dataType,n.length,2),s=[e[0].dims[0],e[0].dims[1],e[1].dims[1],e[1].dims[2]];t.format==="NHWC"&&(s=[e[0].dims[0],e[1].dims[1],e[1].dims[2],e[0].dims[3]],[sl,mu,vf,yf]=[0,3,1,2]);let o=Et("output",e[0].dataType,s.length),a=r.type.value,l=Ue.size(s),u=[{type:12,data:l},...It(e[0].dims,n,s)],c=d=>`
  ${d.registerUniform("output_size","u32").declareVariables(r,i,o)}
  ${TF}
  ${SF(a)}
  ${PF(t)}
  ${EF(t)}
  ${CF(r,a,t)}

  ${d.mainStart()}
    ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let H_in = i32(uniforms.x_shape[${vf}]);
      let W_in = i32(uniforms.x_shape[${yf}]);

      ${t.alignCorners===0?`
      let x_min = -0.5;
      let x_max = f32(W_in) - 0.5;
      let y_min = -0.5;
      let y_max = f32(H_in) - 0.5;
      `:`
      let x_min = 0.0;
      let x_max = f32(W_in) - 1.0;
      let y_min = 0.0;
      let y_max = f32(H_in) - 1.0;
      `};
      let border = vec4<f32>(x_min, y_min, x_max, y_max);

      let indices = ${o.offsetToIndices("global_idx")};
      var grid_indices = vec3<u32>(indices[${sl}], indices[${vf}], indices[${yf}]);
      let nxy = ${i.getByIndices("grid_indices")};
      var x = gs_denormalize(f32(nxy[0]), W_in);
      var y = gs_denormalize(f32(nxy[1]), H_in);

      ${AF(o,a,t)}
  }`;return{name:"GridSample",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:["type","type"]},getRunData:d=>{let h=Ue.size(s);return{outputs:[{dims:s,dataType:d[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:u}},getShaderSource:c}},YX=(e,t)=>{MF(e.inputs),e.compute(OF(e.inputs,t))},QX=e=>Tr({alignCorners:e.align_corners,mode:e.mode,paddingMode:e.padding_mode,format:e.format})}),cs,kF,JX,FT,IF,Dy,ZX,eY=at(()=>{Bt(),Jt(),Dn(),GI(),KI(),er(),id(),cs=(e,t)=>e.length>t&&e[t].dims.length>0?e[t]:void 0,kF=(e,t)=>{let r=e[0],n=cs(e,1),i=cs(e,2),s=cs(e,3),o=cs(e,4),a=cs(e,5),l=cs(e,6),u=cs(e,7);if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let c=r.dims[0],d=r.dims[1],h=r.dims.length===3?r.dims[2]:t.numHeads*r.dims[4],m=d,g=0,v=0,y=Math.floor(h/t.numHeads);if(l&&u&&Ue.size(l.dims)&&Ue.size(u.dims)){if(l.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(l.dims[0]!==c||l.dims[1]!==t.numHeads||l.dims[3]!==y)throw new Error('Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)');if(u.dims[0]!==c||u.dims[1]!==t.numHeads||u.dims[3]!==y)throw new Error('Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)');if(l.dims[2]!==u.dims[2])throw new Error('Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)');if(u.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');g=l.dims[2],v=l.dims[2]}else if(l&&Ue.size(l.dims)||u&&Ue.size(u.dims))throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let x;if(n&&Ue.size(n.dims)>0){if(r.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(n.dims.length<3||n.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(r.dims[0]!==n.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(n.dims.length===3){if(n.dims[2]!==r.dims[2])throw new Error('Input "query" and "key" shall have same dim 2 (hidden_size)');x=2,m=n.dims[1]}else if(n.dims.length===5){if(n.dims[2]!==t.numHeads||n.dims[3]!==2||n.dims[4]!==y)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(i)throw new Error('Expect "value" be none when "key" has packed kv format.');x=5,m=n.dims[1]}else{if(n.dims[1]!==t.numHeads||n.dims[3]!==y)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');x=0,m=n.dims[2]}}else{if(r.dims.length!==5)throw new Error('Input "query" is expected to have 5 dimensions when key is empty');if(r.dims[2]!==t.numHeads||r.dims[3]!==3)throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');x=3}if(s&&Ue.size(s.dims)>0){if(s.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimension');if(n&&n.dims.length===5&&n.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let w=g+m,S=0;if(o&&Ue.size(o.dims)>0){S=8;let E=o.dims;throw E.length===1?E[0]===c?S=1:E[0]===3*c+2&&(S=3):E.length===2&&E[0]===c&&E[1]===w&&(S=5),S===8?new Error('Input "key_padding_mask" shape shall be (batch_size) or (batch_size, total_sequence_length)'):new Error("Mask not supported")}let M=!1,T=h;if(i&&Ue.size(i.dims)>0){if(i.dims.length!==3&&i.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(r.dims[0]!==i.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(i.dims.length===3){if(m!==i.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');T=i.dims[2]}else{if(m!==i.dims[2])throw new Error('Input "key" and "value" shall have the same dim 2 (kv_sequence_length)');T=i.dims[1]*i.dims[3],M=!0}}let P=!1;if(o&&Ue.size(o.dims)>0)throw new Error("Key padding mask is not supported");if(a&&Ue.size(a.dims)>0){if(a.dims.length!==4)throw new Error('Input "attention_bias" is expected to have 4 dimensions');if(a.dims[0]!==c||a.dims[1]!==t.numHeads||a.dims[2]!==d||a.dims[3]!==w)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:c,sequenceLength:d,pastSequenceLength:g,kvSequenceLength:m,totalSequenceLength:w,maxSequenceLength:v,inputHiddenSize:0,hiddenSize:h,vHiddenSize:T,headSize:y,vHeadSize:Math.floor(T/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:S,scale:t.scale,broadcastResPosBias:P,passPastInKv:M,qkvFormat:x}},JX=e=>Tr({...e}),FT=Tr({perm:[0,2,1,3]}),IF=(e,t,r,n,i,s,o)=>{let a=[n,i,s],l=Ue.size(a),u=[{type:12,data:l},{type:12,data:o},{type:12,data:s}],c=d=>{let h=Et("qkv_with_bias",t.dataType,a),m=qe("qkv",t.dataType,a),g=qe("bias",r.dataType,a),v=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`
  ${d.registerUniforms(v).declareVariables(m,g,h)}
  ${d.mainStart()}
    ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;

    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];
  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:a,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:u}),getShaderSource:c},{inputs:[t,r],outputs:[-1]})[0]},Dy=(e,t,r,n,i,s,o,a)=>{let l=s;if(o&&Ue.size(o.dims)>0){if(n===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return l=IF(e,s,o,t,n,r*i,a),l=l.reshape([t,n,r,i]),r===1||n===1?l:e.compute(eo(l,FT.perm),{inputs:[l],outputs:[-1]})[0]}else return s.dims.length===3&&(l=s.reshape([t,n,r,i])),r===1||n===1?l:e.compute(eo(l,FT.perm),{inputs:[l],outputs:[-1]})[0]},ZX=(e,t)=>{let r=kF(e.inputs,t),n=e.inputs[0],i=cs(e.inputs,1),s=cs(e.inputs,2),o=cs(e.inputs,3),a=cs(e.inputs,4),l=cs(e.inputs,5),u=cs(e.inputs,6),c=cs(e.inputs,7);if(n.dims.length===5)throw new Error("Packed QKV is not implemented");if(i?.dims.length===5)throw new Error("Packed KV is not implemented");let d=i&&s&&i.dims.length===4&&s.dims.length===4,h=Dy(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,n,o,0);if(d)return M_(e,h,i,s,a,void 0,u,c,l,r);if(!i||!s)throw new Error("key and value must be provided");let m=Dy(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.headSize,i,o,r.hiddenSize),g=Dy(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.vHeadSize,s,o,2*r.hiddenSize);M_(e,h,m,g,a,void 0,u,c,l,r)}}),jF,$F,NF,DF,NO,tY,rY,nY=at(()=>{Bt(),Jt(),Dn(),er(),jF=e=>{if(!e||e.length<1)throw new Error("too few inputs")},$F=(e,t)=>{let r=[],n=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(i=>r.push(Number(i))),n=r.length),Tr({numOutputs:n,axis:t.axis,splitSizes:r})},NF=e=>`
fn calculateOutputIndex(index: u32) -> u32 {
    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {
    if (index < ${Ot("uniforms.size_in_split_axis","i",e)}) {
        return i;
    }
    }
    return ${e}u;
}`,DF=e=>{let t=e.length,r=[];for(let n=0;n<t;++n){let i=e[n].setByIndices("indices","input[global_idx]");t===1?r.push(i):n===0?r.push(`if (output_number == ${n}u) { ${i} }`):n===t-1?r.push(`else { ${i} }`):r.push(`else if (output_number == ${n}) { ${i} }`)}return`
      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {
        ${r.join(`
`)}
      }`},NO=(e,t)=>{let r=e[0].dims,n=Ue.size(r),i=e[0].dataType,s=Ue.normalizeAxis(t.axis,r.length),o=new Array(t.numOutputs),a=qe("input",i,r.length),l=new Array(t.numOutputs),u=[],c=[],d=0,h=[{type:12,data:n}];for(let g=0;g<t.numOutputs;g++){d+=t.splitSizes[g],l[g]=d;let v=r.slice();v[s]=t.splitSizes[g],c.push(v),o[g]=Et(`output${g}`,i,v.length),u.push({dims:c[g],dataType:e[0].dataType})}h.push({type:12,data:l},...It(r,...c));let m=g=>`
  ${g.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",l.length).declareVariables(a,...o)}
  ${NF(l.length)}
  ${DF(o)}

  ${g.mainStart()}
    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}

    var indices = ${a.offsetToIndices("global_idx")};
    var index = ${a.indicesGet("indices",s)};
    let output_number = calculateOutputIndex(index);
    if (output_number != 0) {
      index -= ${Ot("uniforms.size_in_split_axis","output_number - 1u",l.length)};
      ${a.indicesSet("indices",s,"index")};
    }
    writeBufferData(output_number, indices, global_idx);
  }`;return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:m,getRunData:()=>({outputs:u,dispatchGroup:{x:Math.ceil(n/64)},programUniforms:h})}},tY=(e,t)=>{jF(e.inputs);let r=e.inputs.length===1?t:$F(e.inputs,t);e.compute(NO(e.inputs,r),{inputs:[0]})},rY=e=>{let t=e.axis,r=e.splitSizes,n=e.numOutputs<0?r.length:e.numOutputs;if(n!==r.length)throw new Error("numOutputs and splitSizes lengh must be equal");return Tr({axis:t,numOutputs:n,splitSizes:r})}}),RF,Qw,iY,sY=at(()=>{Bt(),Jt(),Dn(),er(),RF=(e,t)=>{let[r,n,i,s]=e,{numHeads:o,rotaryEmbeddingDim:a}=t;if(r.dims.length!==3&&r.dims.length!==4)throw new Error(`Input 'x' is expected to have 3 or 4 dimensions, got ${r.dims.length}`);if(!Ue.areEqual(n.dims,[])&&!Ue.areEqual(n.dims,[1])&&n.dims.length!==2)throw new Error(`Input 'position_ids' is expected to have 0, 1, or 2 dimensions, got ${n.dims.length}`);if(i.dims.length!==2)throw new Error(`Input 'cos_cache' is expected to have 2 dimensions, got ${i.dims.length}`);if(s.dims.length!==2)throw new Error(`Input 'sin_cache' is expected to have 2 dimensions, got ${s.dims.length}`);if(!Ue.areEqual(i.dims,s.dims))throw new Error("Inputs 'cos_cache' and 'sin_cache' are expected to have the same shape");if(a>0&&o===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let l=r.dims[0],u=r.dims[r.dims.length-2],c=i.dims[0],d=Ue.sizeFromDimension(r.dims,1)/u,h=a===0?i.dims[1]*2:d/o;if(a>h)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(n.dims.length===2){if(l!==n.dims[0])throw new Error(`Input 'position_ids' dimension 0 should be of size batch_size, got ${n.dims[0]}`);if(u!==n.dims[1])throw new Error(`Input 'position_ids' dimension 1 should be of size sequence_length, got ${n.dims[1]}`)}if(h/2!==i.dims[1]&&a/2!==i.dims[1])throw new Error(`Input 'cos_cache' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${i.dims[1]}`);if(u>c)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},Qw=(e,t)=>{let{interleaved:r,numHeads:n,rotaryEmbeddingDim:i,scale:s}=t,o=e[0].dims[0],a=Ue.sizeFromDimension(e[0].dims,1),l=e[0].dims[e[0].dims.length-2],u=a/l,c=e[2].dims[1],d=i===0?c*2:u/n,h=new Array(o,l,u/d,d-c),m=Ue.computeStrides(h),g=[{type:1,data:s},{type:12,data:h},{type:12,data:m},...e[0].dims.length===3?new Array({type:12,data:[a,u,d,1]}):[],...e[0].dims.length===4?new Array({type:12,data:[a,d,l*d,1]}):[],...It(e[0].dims,e[1].dims,e[2].dims,e[3].dims,e[0].dims)],v=y=>{let x=qe("input",e[0].dataType,e[0].dims.length),w=qe("position_ids",e[1].dataType,e[1].dims.length),S=qe("cos_cache",e[2].dataType,e[2].dims.length),M=qe("sin_cache",e[3].dataType,e[3].dims.length),T=Et("output",e[0].dataType,e[0].dims.length);return y.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:h.length},{name:"global_strides",type:"u32",length:m.length},{name:"input_output_strides",type:"u32",length:m.length}]),`
        ${y.declareVariables(x,w,S,M,T)}

        ${y.mainStart(km)}
          let half_rotary_emb_dim = uniforms.${S.name}_shape[1];
          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;
          let size = uniforms.global_shape[0] * uniforms.global_strides[0];
          ${y.guardAgainstOutOfBoundsWorkgroupSizes("size")}

          if (bsnh[3] < half_rotary_emb_dim) {
            let position_ids_idx =
                ${w.broadcastedIndicesToOffset("bsnh.xy",Et("",w.type.tensor,2))};
            let position_id =
                u32(${w.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);
            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${r});
            let j = i + select(half_rotary_emb_dim, 1, ${r});
            let re = ${x.getByOffset("i")} * ${S.get("position_id","bsnh[3]")} -
                ${x.getByOffset("j")} * ${M.get("position_id","bsnh[3]")};
            ${T.setByOffset("i","re")}
            let im = ${x.getByOffset("i")} * ${M.get("position_id","bsnh[3]")} +
                ${x.getByOffset("j")} * ${S.get("position_id","bsnh[3]")};
            ${T.setByOffset("j","im")}
          } else {
            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;
            ${T.setByOffset("k",x.getByOffset("k"))}
          }
        }`};return{name:"RotaryEmbedding",shaderCache:{hint:Tr({interleaved:r}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:v,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(Ue.size(h)/km)},programUniforms:g})}},iY=(e,t)=>{RF(e.inputs,t),e.compute(Qw(e.inputs,t))}}),LF,FF,BT,BF,oY,hve=at(()=>{Dn(),Bt(),KI(),eY(),nY(),id(),sY(),er(),LF=(e,t)=>{if(t.doRotary&&e.length<=7)throw new Error("cos_cache and sin_cache inputs are required if do_rotary is specified");let r=e[0],n=e[1],i=e[2],s=e[3],o=e[4];if(t.doRotary!==0&&e.length<=7)throw new Error("cos_cast and sin_cache are expected if do_rotary attribute is non-zero");if(t.localWindowSize!==-1)throw new Error("Local attention is not supported");if(t.softcap!==0)throw new Error("Softcap is not supported");if(t.rotaryInterleaved!==0)throw new Error("Rotary interleaved is not supported");if(t.smoothSoftmax)throw new Error("Smooth softmax is not supported");if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let a=!1,l=r.dims[0],u=r.dims[1],c=r.dims.length===3?a?r.dims[2]/3:r.dims[2]:t.numHeads*r.dims[4],d=u,h=0,m=!n||n.dims.length===0,g=Math.floor(m?c/(t.numHeads+2*t.kvNumHeads):c/t.numHeads);m&&(c=g*t.numHeads);let v=s&&s.dims.length!==0,y=o&&o.dims.length!==0;if(v&&s.dims.length===4&&s.dims[0]===l&&s.dims[1]!==t.kvNumHeads&&s.dims[2]===t.kvNumHeads&&s.dims[3]===g)throw new Error("BSNH pastKey/pastValue is not supported");if(v&&y){if(s.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(o.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');h=s.dims[2]}else if(v||y)throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let x=1;if(n&&n.dims.length>0){if(r.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(n.dims.length<3||n.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(r.dims[0]!==n.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(n.dims.length===3){if(r.dims[2]%n.dims[2]!==0)throw new Error('Dimension 2 of "query" should be a multiple of "key"');d=n.dims[1]}else if(n.dims.length===5){if(n.dims[2]!==t.numHeads||n.dims[3]!==2||n.dims[4]!==g)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(i)throw new Error('Expect "value" be none when "key" has packed kv format.');d=n.dims[1]}else{if(n.dims[1]!==t.numHeads||n.dims[3]!==g)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');d=n.dims[2]}}else{if(r.dims.length!==3&&r.dims.length!==5)throw new Error('Input "query" is expected to have 3 or 5 dimensions when key is empty');if(r.dims.length===5&&(r.dims[2]!==t.numHeads||r.dims[3]!==3))throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');x=3}let w=0,S=!1,M=t.kvNumHeads?g*t.kvNumHeads:c;if(i&&i.dims.length>0){if(i.dims.length!==3&&i.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(r.dims[0]!==i.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(i.dims.length===3){if(d!==i.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');M=i.dims[2]}else{if(d!==i.dims[2])throw new Error('Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)');M=i.dims[1]*i.dims[3],S=!0}}let T=e.length>4?e[5]:void 0;if(T&&T.dims.length!==1&&T.dims[0]!==l)throw new Error('Input "seqlens" is expected to have 1 dimension and the same dim 0 as batch_size');return{batchSize:l,sequenceLength:u,pastSequenceLength:h,kvSequenceLength:d,totalSequenceLength:-1,maxSequenceLength:-1,inputHiddenSize:0,hiddenSize:c,vHiddenSize:M,headSize:g,vHeadSize:Math.floor(M/t.kvNumHeads),numHeads:t.numHeads,kvNumHeads:t.kvNumHeads,nReps:t.numHeads/t.kvNumHeads,pastPresentShareBuffer:!1,maskType:w,scale:t.scale,broadcastResPosBias:!1,passPastInKv:S,qkvFormat:x}},FF=Tr({perm:[0,2,1,3]}),BT=(e,t,r)=>{let n=t,i=r.kvNumHeads;return t.dims.length===3&&r.kvSequenceLength!==0&&(n=t.reshape([r.batchSize,r.kvSequenceLength,i,r.headSize]),n=e.compute(eo(n,FF.perm),{inputs:[n],outputs:[-1]})[0]),n},BF=(e,t,r,n)=>{let i=7,s=["type","type"],o=[e*t],a=e*t,l=[{type:12,data:a},{type:12,data:t},{type:12,data:e}],u=c=>{let d=qe("seq_lens",r.dataType,r.dims),h=qe("total_seq_lens",n.dataType,n.dims),m=Et("pos_ids",i,o),g=[{name:"output_size",type:"u32"},{name:"sequence_length",type:"u32"},{name:"batch_size",type:"u32"}];return`
  ${c.registerUniforms(g).declareVariables(d,h,m)}
  ${c.mainStart()}
    ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let total_sequence_length = u32(${h.getByOffset("0")});
    let is_subsequent_prompt = uniforms.sequence_length > 1 && uniforms.sequence_length != total_sequence_length;
    let is_first_prompt = !is_subsequent_prompt && uniforms.sequence_length == total_sequence_length;
    let batch_idx = global_idx / uniforms.sequence_length;
    let sequence_idx = i32(global_idx % uniforms.sequence_length);
    var pos_id: i32 = 0;
    let seqlen = ${d.getByOffset("batch_idx")};
    let total_seqlen = seqlen + 1;
    if (is_first_prompt) {
      if (sequence_idx < total_seqlen) {
        pos_id = sequence_idx;
      } else {
        pos_id = 1;
      }
      ${m.setByOffset("global_idx","pos_id")}
    } else if (is_subsequent_prompt) {
      let past_seqlen = total_seqlen - i32(uniforms.sequence_length);
      if (past_seqlen + sequence_idx < total_seqlen) {
        pos_id = past_seqlen + sequence_idx;
      } else {
        pos_id = 1;
      }
      ${m.setByOffset("global_idx","pos_id")}
    } else if (global_idx < uniforms.batch_size) {
      ${m.setByOffset("global_idx","seqlen")}
    };
  }
  `};return{name:"GeneratePositionIds",shaderCache:{hint:`${e};${t}`,inputDependencies:s},getRunData:()=>({outputs:[{dims:o,dataType:i}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:l}),getShaderSource:u}},oY=(e,t)=>{let r=LF(e.inputs,t);if(e.inputs[0].dims.length===5)throw new Error("Packed QKV is not implemented");if(e.inputs[1]?.dims.length===5)throw new Error("Packed KV is not implemented");let n=e.inputs[0],i=e.inputs[1]&&e.inputs[1].dims.length>0?e.inputs[1]:void 0,s=e.inputs[2]&&e.inputs[2].dims.length>0?e.inputs[2]:void 0,o=e.inputs[3]&&e.inputs[3].dims.length!==0?e.inputs[3]:void 0,a=e.inputs[4]&&e.inputs[4].dims.length!==0?e.inputs[4]:void 0,l=e.inputs.length>4?e.inputs[5]:void 0,u=e.inputs.length>5?e.inputs[6]:void 0,c=r.kvNumHeads?r.kvNumHeads:r.numHeads,d=Tr({axis:2,numOutputs:3,splitSizes:[r.numHeads*r.headSize,c*r.headSize,c*r.headSize]}),[h,m,g]=!i&&!s?e.compute(NO([n],d),{inputs:[n],outputs:[-1,-1,-1]}):[n,i,s],v,y;if(t.doRotary){let M=e.compute(BF(r.batchSize,r.sequenceLength,l,u),{inputs:[l,u],outputs:[-1]})[0],T=e.inputs[7],P=e.inputs[8],E=Tr({interleaved:t.rotaryInterleaved!==0,numHeads:r.numHeads,rotaryEmbeddingDim:0,scale:t.scale}),A=[h,M,T,P],L=[-1];v=e.compute(Qw(A,E),{inputs:A,outputs:L})[0],A.splice(0,1,m);let B=Tr({interleaved:t.rotaryInterleaved!==0,numHeads:r.kvNumHeads,rotaryEmbeddingDim:0,scale:t.scale});y=e.compute(Qw(A,B),{inputs:A,outputs:L})[0]}let x=Dy(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,t.doRotary?v:h,void 0,0),w=BT(e,t.doRotary?y:m,r),S=BT(e,g,r);M_(e,x,w,S,void 0,void 0,o,a,void 0,r,l,u)}}),zT,zF,UF,aY,pve=at(()=>{Bt(),Jt(),id(),er(),zT=(e,t,r,n,i,s,o,a)=>{let l=wn(s),u=l===1?"f32":`vec${l}f`,c=l===1?"vec2f":`mat2x${l}f`,d=i*o,h=64;d===1&&(h=256);let m=[i,o,s/l],g=[i,o,2],v=["rank","type","type"],y=[];y.push(...It(m,g));let x=w=>{let S=qe("x",t.dataType,3,l),M=qe("scale",r.dataType,r.dims),T=qe("bias",n.dataType,n.dims),P=Et("output",1,3,2),E=[S,M,T,P];return`
  var<workgroup> workgroup_shared : array<${c}, ${h}>;
  const workgroup_size = ${h}u;
  ${w.declareVariables(...E)}
  ${w.mainStart(h)}
    let batch = workgroup_index / uniforms.x_shape[1];
    let channel = workgroup_index % uniforms.x_shape[1];
    let hight = uniforms.x_shape[2];
    // initialize workgroup memory
    var sum = ${u}(0);
    var squared_sum = ${u}(0);
    for (var h = local_idx; h < hight; h += workgroup_size) {
      let value = ${u}(${S.get("batch","channel","h")});
      sum += value;
      squared_sum += value * value;
    }
    workgroup_shared[local_idx] = ${c}(sum, squared_sum);
    workgroupBarrier();

    for (var currSize = workgroup_size >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (local_idx < currSize) {
        workgroup_shared[local_idx] = workgroup_shared[local_idx] + workgroup_shared[local_idx + currSize];
      }
      workgroupBarrier();
    }
    if (local_idx == 0) {
      let sum_final = ${Xc("workgroup_shared[0][0]",l)} / f32(hight * ${l});
      let squared_sum_final = ${Xc("workgroup_shared[0][1]",l)} / f32(hight * ${l});

      let inv_std_dev = inverseSqrt(squared_sum_final - sum_final * sum_final + f32(${a}));
      let channel_scale = inv_std_dev * f32(scale[channel]);
      let channel_shift = f32(bias[channel]) - sum_final * channel_scale;
      output[workgroup_index] = vec2f(channel_scale, channel_shift);
    }
  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${l};${a};${h}`,inputDependencies:v},getRunData:()=>({outputs:[{dims:g,dataType:1}],dispatchGroup:{x:d},programUniforms:y}),getShaderSource:x},{inputs:[t,r,n],outputs:[-1]})[0]},zF=(e,t,r)=>{let n=t[0].dims,i=n,s=2,o=n[0],a=n[1],l=Ue.sizeFromDimension(n,s),u=wn(l),c=Ue.size(i)/u,d=zT(e,t[0],t[1],t[2],o,l,a,r.epsilon),h=[o,a,l/u],m=[o,a],g=["type","none"],v=y=>{let x=qe("x",t[0].dataType,h.length,u),w=qe("scale_shift",1,m.length,2),S=Et("output",t[0].dataType,h.length,u),M=[x,w,S];return`
  ${y.registerUniform("output_size","u32").declareVariables(...M)}
  ${y.mainStart()}
  ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let outputIndices = ${S.offsetToIndices("global_idx")};
      let batch = outputIndices[0];
      let channel = outputIndices[1];
      let scale_shift = ${w.getByIndices("vec2<u32>(batch, channel)")};
      let value = ${x.getByOffset("global_idx")} * ${S.type.value}(scale_shift.x) + ${S.type.value}(scale_shift.y);
      ${S.setByOffset("global_idx","value")};
  }`};e.compute({name:"InstanceNormalization",shaderCache:{hint:`${u}`,inputDependencies:g},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(c/64)},programUniforms:[{type:12,data:c},...It(h,m,h)]}),getShaderSource:v},{inputs:[t[0],d]})},UF=(e,t,r)=>{let n=t[0].dims,i=n,s=n[0],o=n[n.length-1],a=Ue.sizeFromDimension(n,1)/o,l=wn(o),u=Ue.size(i)/l,c=[{type:12,data:a},{type:12,data:Math.floor(o/l)}],d=["type","type"],h=!1,m=[0,n.length-1];for(let x=0;x<n.length-2;x++)h=h||n[x+1]!==1,m.push(x+1);h=h&&n[n.length-1]!==1;let g=h?e.compute(eo(e.inputs[0],m),{inputs:[e.inputs[0]],outputs:[-1]})[0]:e.inputs[0].reshape(Array.from({length:n.length},(x,w)=>n[m[w]])),v=zT(e,g,t[1],t[2],s,a,o,r.epsilon),y=x=>{let w=di(t[0].dataType),S=l===1?"vec2f":`mat${l}x2f`,M=E=>{let A=E===0?"x":"y",L=l===1?"f32":`vec${l}f`;switch(l){case 1:return`${w}(${L}(scale.${A}))`;case 2:return`vec2<${w}>(${L}(scale[0].${A}, scale[1].${A}))`;case 4:return`vec4<${w}>(${L}(scale[0].${A}, scale[1].${A}, scale[2].${A}, scale[3].${A}))`;default:throw new Error(`Not supported compoents ${l}`)}},T=qe("input",t[0].dataType,t[0].dims,l),P=Et("output",t[0].dataType,i,l);return`
  @group(0) @binding(0) var<storage, read> input : array<${T.type.storage}>;
  @group(0) @binding(1) var<storage, read> scale_input : array<${S}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${P.type.storage}>;
  struct Uniforms {H: u32, C : u32};
  @group(0) @binding(3) var<uniform> uniforms: Uniforms;

  ${x.mainStart()}
    let current_image_number = global_idx / (uniforms.C * uniforms.H);
    let current_channel_number = global_idx % uniforms.C;

    let scale_offset = current_image_number * uniforms.C + current_channel_number;
    let scale = scale_input[scale_offset];
    output[global_idx] = fma(input[global_idx], ${M(0)}, ${M(1)});
  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${l}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:c}),getShaderSource:y},{inputs:[t[0],v]})},aY=(e,t)=>{t.format==="NHWC"?UF(e,e.inputs,t):zF(e,e.inputs,t)}}),VF,WF,lY,mve=at(()=>{Bt(),Jt(),er(),VF=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},WF=(e,t,r)=>{let n=t.simplified,i=e[0].dims,s=e[1],o=!n&&e[2],a=i,l=Ue.normalizeAxis(t.axis,i.length),u=Ue.sizeToDimension(i,l),c=Ue.sizeFromDimension(i,l),d=Ue.size(s.dims),h=o?Ue.size(o.dims):0;if(d!==c||o&&h!==c)throw new Error(`Size of X.shape()[axis:] == ${c}.
       Size of scale and bias (if provided) must match this.
       Got scale size of ${d} and bias size of ${h}`);let m=[];for(let T=0;T<i.length;++T)T<l?m.push(i[T]):m.push(1);let g=wn(c),v=["type","type"],y=[{type:12,data:u},{type:1,data:c},{type:12,data:Math.floor(c/g)},{type:1,data:t.epsilon}];o&&v.push("type");let x=r>1,w=r>2,S=T=>{let P=di(e[0].dataType),E=[qe("x",e[0].dataType,e[0].dims,g),qe("scale",s.dataType,s.dims,g)];o&&E.push(qe("bias",o.dataType,o.dims,g)),E.push(Et("output",e[0].dataType,a,g)),x&&E.push(Et("mean_data_output",1,m)),w&&E.push(Et("inv_std_output",1,m));let A=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`
  ${T.registerUniforms(A).declareVariables(...E)}
  ${T.mainStart()}
    ${T.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}
    let offset = global_idx * uniforms.norm_size_vectorized;
    var mean_vector = ${PO("f32",g)};
    var mean_square_vector = ${PO("f32",g)};

    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {
      let value = ${um(P,g,"x[h + offset]")};
      mean_vector += value;
      mean_square_vector += value * value;
    }
    let mean = ${Xc("mean_vector",g)} / uniforms.norm_size;
    let inv_std_dev = inverseSqrt(${Xc("mean_square_vector",g)} / uniforms.norm_size ${n?"":"- mean * mean"} + uniforms.epsilon);

    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {
      let f32input = ${um(P,g,"x[j + offset]")};
      let f32scale = ${um(P,g,"scale[j]")};
      output[j + offset] = ${E[0].type.value}((f32input ${n?"":"- mean"}) * inv_std_dev * f32scale
        ${o?`+ ${um(P,g,"bias[j]")}`:""}
      );
    }

    ${x?"mean_data_output[global_idx] = mean":""};
    ${w?"inv_std_output[global_idx] = inv_std_dev":""};
  }`},M=[{dims:a,dataType:e[0].dataType}];return x&&M.push({dims:m,dataType:1}),w&&M.push({dims:m,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${g};${r};${n}`,inputDependencies:v},getRunData:()=>({outputs:M,dispatchGroup:{x:Math.ceil(u/64)},programUniforms:y}),getShaderSource:S}},lY=(e,t)=>{VF(e.inputs),e.compute(WF(e.inputs,t,e.outputCount))}}),GF,uY,gve=at(()=>{Jt(),ZI(),ej(),GF=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},uY=e=>{GF(e.inputs);let t=Om.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can't use matmul on the given tensors");let r=t[t.length-1],n=e.inputs[0].dims[e.inputs[0].dims.length-1];if(r<8&&n<8)e.compute(JI(e.inputs,{activation:""},t));else{let i=t[t.length-2],s=Ue.size(e.inputs[0].dims.slice(0,-2)),o=Ue.size(e.inputs[1].dims.slice(0,-2));if(s!==1&&i===1&&o===1){let a=e.inputs[0].reshape([1,s,n]),l=e.inputs[1].reshape([1,n,r]),u=[1,s,r],c=[a,l];e.compute(Yw(c,{activation:""},t,u),{inputs:c})}else e.compute(Yw(e.inputs,{activation:""},t))}}}),qF,HF,KF,cY,dY,vve=at(()=>{Bt(),Jt(),Dn(),er(),qF=(e,t)=>{if(e.length<3||e.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let r=e[0],n=r.dims.length;if(r.dims[n-1]!==t.k)throw new Error("The last dim of input shape does not match the k value");let i=Math.floor((t.k+t.blockSize-1)/t.blockSize),s=t.blockSize/8*t.bits,o=e[1];if(!Ue.areEqual(o.dims,[t.n,i,s]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let a=e[2].dims;if(Ue.size(a)!==t.n*i)throw new Error("scales input size error.");if(e.length===4){let l=e[3].dims,u=t.bits>4?t.n*i:t.n*Math.floor((i+1)/2);if(Ue.size(l)!==u)throw new Error("zeroPoints input size error.")}},HF=(e,t)=>{let r=e[0].dims,n=r.length,i=r[n-2],s=t.k,o=t.n,a=r.slice(0,n-2),l=Ue.size(a),u=e[1].dims[2]/4,c=e[0].dataType,d=wn(t.k),h=wn(u),m=wn(o),g=a.concat([i,o]),v=i>1&&o/m%2===0?2:1,y=Ue.size(g)/m/v,x=64,w=[],S=[l,i,s/d],M=Ue.convertShape(e[1].dims).slice();M.splice(-1,1,u/h),w.push(...It(S)),w.push(...It(M)),w.push(...It(e[2].dims)),e.length===4&&w.push(...It(Ue.convertShape(e[3].dims)));let T=[l,i,o/m];w.push(...It(T));let P=E=>{let A=S.length,L=qe("a",e[0].dataType,A,d),B=qe("b",12,M.length,h),V=qe("scales",e[2].dataType,e[2].dims.length),G=[L,B,V],z=e.length===4?qe("zero_points",12,e[3].dims.length):void 0;z&&G.push(z);let K=T.length,J=Et("output",e[0].dataType,K,m),X=di(e[0].dataType),Q=(()=>{switch(d){case 1:return`array<${X}, 8>`;case 2:return`mat4x2<${X}>`;case 4:return`mat2x4<${X}>`;default:throw new Error(`${d}-component is not supported.`)}})(),W=()=>{let D=`
          // reuse a data
            var input_offset = ${L.indicesToOffset(`${L.type.indices}(batch, row, word_offset)`)};
            var a_data: ${Q};
            for (var j: u32 = 0; j < ${8/d}; j++) {
              a_data[j] = ${L.getByOffset("input_offset")};
              input_offset++;
            }
          `;for(let U=0;U<m*v;U++)D+=`
            b_value = ${h===1?`b${U}_data`:`b${U}_data[i]`};
            b_value_lower = unpack4xU8(b_value & b_mask);
            b_value_upper = unpack4xU8((b_value >> 4) & b_mask);
            b_quantized_values = ${Q}(${Array.from({length:4},(te,ee)=>`${X}(b_value_lower[${ee}]), ${X}(b_value_upper[${ee}])`).join(", ")});
            b_dequantized_values = ${d===1?`${Q}(${Array.from({length:8},(te,ee)=>`(b_quantized_values[${ee}] - ${z?`zero_point${U}`:"zero_point"}) * scale${U}`).join(", ")});`:`(b_quantized_values - ${Q}(${Array(8).fill(`${z?`zero_point${U}`:"zero_point"}`).join(",")})) * scale${U};`};
            workgroup_shared[local_id.x * ${v} + ${Math.floor(U/m)}]${m>1?`[${U%m}]`:""} += ${Array.from({length:8/d},(te,ee)=>`${d===1?`a_data[${ee}] * b_dequantized_values[${ee}]`:`dot(a_data[${ee}], b_dequantized_values[${ee}])`}`).join(" + ")};
          `;return D},oe=()=>{let D=`
            var col_index = col * ${m};
            ${z?`
            let zero_point_bytes_per_col = (nBlocksPerCol + 1) / 2;
            var zero_point_byte_count: u32;
            var zero_point_word_index: u32;
            var zero_point_byte_offset: u32;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            var zero_point_bits_offset: u32;
            var zero_point_word: u32;`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${X}(8);`}
            `;for(let U=0;U<m*v;U++)D+=`
            let scale${U} = ${V.getByOffset("col_index * nBlocksPerCol + block")};
            ${z?`
            zero_point_byte_count = col_index * zero_point_bytes_per_col + (block >> 0x1u);
            zero_point_word_index = zero_point_byte_count >> 0x2u;
            zero_point_byte_offset = zero_point_byte_count & 0x3u;
            zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            zero_point_word = ${z.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point${U} = ${X}((zero_point_word) & 0xFu);`:""}
            col_index += 1;`;return D},ce=()=>{let D=`col_index = col * ${m};`;for(let U=0;U<m*v;U++)D+=`
            let b${U}_data = ${B.getByIndices(`${B.type.indices}(col_index, block, word)`)};
            col_index += 1;`;return D+=`
            var b_value: u32;
            let b_mask: u32 = 0x0F0F0F0Fu;
            var b_value_lower: vec4<u32>;
            var b_value_upper: vec4<u32>;
            var b_quantized_values: ${Q};
            var b_dequantized_values: ${Q};`,D};return`
        var<workgroup> workgroup_shared: array<${J.type.value}, ${v*x}>;
        ${E.declareVariables(...G,J)}
        ${E.mainStart([x,1,1])}
          let output_indices = ${J.offsetToIndices(`(global_idx / ${x}) * ${v}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let nBlocksPerCol = uniforms.b_shape[1];

          for (var block = local_id.x; block < nBlocksPerCol; block += ${x}) {
            //process one block
            var word_offset: u32 = block * ${t.blockSize/d};
            ${oe()}
            for (var word: u32 = 0; word < ${u}; word += ${h}) {
              ${ce()}
              for (var i: u32 = 0; i < ${h}; i++) {
                ${W()}
                word_offset += ${8/d};
              }
            }
          }
          workgroupBarrier();

          if (local_id.x < ${v}) {
            var output_value: ${J.type.value} = ${J.type.value}(0);
            var workgroup_shared_offset: u32 = local_id.x;
            for (var b: u32 = 0u; b < ${x}u; b++) {
              output_value += workgroup_shared[workgroup_shared_offset];
              workgroup_shared_offset += ${v};
            }
            ${J.setByIndices(`${J.type.indices}(batch, row, col + local_id.x)`,"output_value")};
          }
        }`};return{name:"MatMulNBits",shaderCache:{hint:`${t.blockSize};${t.bits};${d};${h};${m};${v};${x}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:g,dataType:c}],dispatchGroup:{x:y},programUniforms:w}),getShaderSource:P}},KF=(e,t)=>{let r=e[0].dims,n=r.length,i=r[n-2],s=t.k,o=t.n,a=r.slice(0,n-2),l=Ue.size(a),u=e[1].dims[2]/4,c=e[0].dataType,d=wn(t.k),h=wn(u),m=a.concat([i,o]),g=128,v=o%8===0?8:o%4===0?4:1,y=g/v,x=y*h*8,w=x/d,S=x/t.blockSize,M=Ue.size(m)/v,T=[],P=[l,i,s/d],E=Ue.convertShape(e[1].dims).slice();E.splice(-1,1,u/h),T.push(...It(P)),T.push(...It(E)),T.push(...It(e[2].dims)),e.length===4&&T.push(...It(Ue.convertShape(e[3].dims)));let A=[l,i,o];T.push(...It(A));let L=B=>{let V=P.length,G=qe("a",e[0].dataType,V,d),z=qe("b",12,E.length,h),K=qe("scales",e[2].dataType,e[2].dims.length),J=[G,z,K],X=e.length===4?qe("zero_points",12,e[3].dims.length):void 0;X&&J.push(X);let Q=A.length,W=Et("output",e[0].dataType,Q),oe=di(e[0].dataType),ce=()=>{switch(d){case 1:return`
          let a_data0 = vec4<${oe}>(sub_a[word_offset], sub_a[word_offset + 1], sub_a[word_offset + 2], sub_a[word_offset + 3]);
          let a_data1 = vec4<${oe}>(sub_a[word_offset + 4], sub_a[word_offset + 5], sub_a[word_offset + 6], sub_a[word_offset + 7]);`;case 2:return`
          let a_data0 = vec4<${oe}>(sub_a[word_offset], sub_a[word_offset + 1]);
          let a_data1 = vec4<${oe}>(sub_a[word_offset + 2], sub_a[word_offset + 3]);`;case 4:return`
          let a_data0 = sub_a[word_offset];
          let a_data1 = sub_a[word_offset + 1];`;default:throw new Error(`${d}-component is not supported.`)}};return`
        var<workgroup> sub_a: array<${G.type.value}, ${w}>;
        var<workgroup> inter_results: array<array<${W.type.value}, ${y}>, ${v}>;
        ${B.declareVariables(...J,W)}
        ${B.mainStart([y,v,1])}
          let output_indices = ${W.offsetToIndices(`workgroup_index * ${v}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let n_blocks_per_col = uniforms.b_shape[1];
          let num_tiles =  (n_blocks_per_col - 1) / ${S} + 1;

          // Loop over shared dimension.
          for (var tile: u32 = 0; tile < num_tiles; tile += 1) {
            let a_col_start = tile * ${w};
            // load one tile A data into shared memory.
            for (var a_offset = local_idx; a_offset < ${w}; a_offset += ${g})
            {
              let a_col = a_col_start + a_offset;
              if (a_col < uniforms.a_shape[2])
              {
                sub_a[a_offset] = ${G.getByIndices(`${G.type.indices}(batch, row, a_col)`)};
              } else {
                sub_a[a_offset] = ${G.type.value}(0);
              }
            }
            workgroupBarrier();

            // each thread process one block
            let b_row = col + local_id.y;
            let block = tile * ${S} + local_id.x;
            ${X?`
            let zero_point_bytes_per_col = (n_blocks_per_col + 1) / 2;
            let zero_point_byte_count = b_row * zero_point_bytes_per_col + (block >> 0x1u);
            let zero_point_word_index = zero_point_byte_count >> 0x2u;
            let zero_point_byte_offset = zero_point_byte_count & 0x3u;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            let zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            let zero_point_word = ${X.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point = ${oe}((zero_point_word) & 0xFu);`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${oe}(8);`}
            let scale = ${K.getByOffset("b_row * n_blocks_per_col + block")};
            let b_data = ${z.getByIndices(`${z.type.indices}(b_row, block, 0)`)};
            var word_offset = local_id.x * ${t.blockSize/d};
            for (var i: u32 = 0; i < ${h}; i++) {
              ${ce()}
              let b_value = ${h===1?"b_data":"b_data[i]"};
              let b_value_lower = unpack4xU8(b_value & 0x0F0F0F0Fu);
              let b_value_upper = unpack4xU8((b_value >> 4) & 0x0F0F0F0Fu);
              let b_quantized_values = mat2x4<${oe}>(${Array.from({length:4},(D,U)=>`${oe}(b_value_lower[${U}]), ${oe}(b_value_upper[${U}])`).join(", ")});
              let b_dequantized_values = (b_quantized_values - mat2x4<${oe}>(${Array(8).fill("zero_point").join(",")})) * scale;
              inter_results[local_id.y][local_id.x] += ${Array.from({length:2},(D,U)=>`${`dot(a_data${U}, b_dequantized_values[${U}])`}`).join(" + ")};
              word_offset += ${8/d};
            }
            workgroupBarrier();
          }

          if (local_idx < ${v}) {
            var output_value: ${W.type.value} = ${W.type.value}(0);
            for (var b = 0u; b < ${y}; b++) {
              output_value += inter_results[local_idx][b];
            }
            if (col + local_idx < uniforms.output_shape[2])
            {
              ${W.setByIndices(`${W.type.indices}(batch, row, col + local_idx)`,"output_value")}
            }
          }
        }`};return{name:"BlockwiseMatMulNBits32",shaderCache:{hint:`${t.blockSize};${d};${h};${y};${v}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:m,dataType:c}],dispatchGroup:{x:M},programUniforms:T}),getShaderSource:L}},cY=(e,t)=>{qF(e.inputs,t),t.blockSize===32&&e.adapterInfo.isVendor("intel")&&e.adapterInfo.isArchitecture("gen-12lp")?e.compute(KF(e.inputs,t)):e.compute(HF(e.inputs,t))},dY=e=>Tr(e)}),XF,YF,QF,JF,ZF,e3,t3,r3,fY,yve=at(()=>{Bt(),Jt(),er(),XF=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1&&e[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e.length>=2){let t=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(t=e[3].dims[0]*2===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},YF=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
            k = i32(${e.indicesGet("indices",i)}) - ${Ot("uniforms.pads",i,r)};
            if (k < 0) {
              break;
            }
            if (k >= i32(${Ot("uniforms.x_shape",i,t)})) {
              break;
            }
            offset += k * i32(${Ot("uniforms.x_strides",i,t)});
        `;return`
          value = ${e.type.value}(uniforms.constant_value);
          for (var i = 0; i < 1; i++) {
            var offset = 0;
            var k = 0;
            ${n}
            value = x[offset];
          }
      `},QF=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
                k = i32(${e.indicesGet("indices",i)}) - ${Ot("uniforms.pads",i,r)};
                if (k < 0) {
                  k = -k;
                }
                {
                  let _2n_1 = 2 * (i32(${Ot("uniforms.x_shape",i,t)}) - 1);
                  k = k % _2n_1;
                  if(k >= i32(${Ot("uniforms.x_shape",i,t)})) {
                    k = _2n_1 - k;
                  }
                }
                offset += k * i32(${Ot("uniforms.x_strides",i,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},JF=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
                k = i32(${e.indicesGet("indices",i)}) - ${Ot("uniforms.pads",i,r)};
                if (k < 0) {
                  k = 0;
                }
                if (k >= i32(${Ot("uniforms.x_shape",i,t)})) {
                  k = i32(${Ot("uniforms.x_shape",i,t)}) - 1;
                }
                offset += k * i32(${Ot("uniforms.x_strides",i,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},ZF=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
                k = i32(${e.indicesGet("indices",i)}) - ${Ot("uniforms.pads",i,r)};
                if (k < 0)  {
                  k += i32(${Ot("uniforms.x_shape",i,t)}]);
                }
                if (k >= i32(${Ot("uniforms.x_shape",i,t)})) {
                  k -= i32(${Ot("uniforms.x_shape",i,t)});
                }
                offset += k * i32(${Ot("uniforms.x_strides",i,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},e3=(e,t,r)=>{switch(r.mode){case 0:return YF(e,t,r.pads.length);case 1:return QF(e,t,r.pads.length);case 2:return JF(e,t,r.pads.length);case 3:return ZF(e,t,r.pads.length);default:throw new Error("Invalid mode")}},t3=(e,t)=>{let r=Ue.padShape(e[0].dims.slice(),t.pads),n=e[0].dims,i=Ue.size(r),s=[{type:12,data:i},{type:6,data:t.pads}],o=e.length>=3&&e[2].data;t.mode===0&&s.push({type:o?e[2].dataType:1,data:t.value}),s.push(...It(e[0].dims,r));let a=["rank"],l=u=>{let c=Et("output",e[0].dataType,r.length),d=qe("x",e[0].dataType,n.length),h=d.type.value,m=e3(c,n.length,t),g=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return t.mode===0&&g.push({name:"constant_value",type:o?h:"f32"}),`
            ${u.registerUniforms(g).declareVariables(d,c)}
            ${u.mainStart()}
            ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

            let indices = ${c.offsetToIndices("global_idx")};

            var value = ${h}(0);
            ${m}
            output[global_idx] = value;
        }`};return{name:"Pad",shaderCache:{hint:`${t.mode}${o}`,inputDependencies:a},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(Ue.size(r)/64)},programUniforms:s}),getShaderSource:l}},r3=(e,t)=>{if(e.length>1){let r=e[1].getBigInt64Array(),n=e.length>=3&&e[2].data?e[2].dataType===10?e[2].getUint16Array()[0]:e[2].getFloat32Array()[0]:0,i=e[0].dims.length,s=new Int32Array(2*i).fill(0);if(e.length>=4){let a=e[3].getBigInt64Array();for(let l=0;l<a.length;l++)s[Number(a[l])]=Number(r[l]),s[Number(a[l])+i]=Number(r[l+a.length])}else r.forEach((a,l)=>s[Number(l)]=Number(a));let o=[];return s.forEach(a=>o.push(a)),{mode:t.mode,value:n,pads:o}}else return t},fY=(e,t)=>{XF(e.inputs);let r=r3(e.inputs,t);e.compute(t3(e.inputs,r),{inputs:[0]})}}),gy,UT,VT,WT,GT,n3,i3,qT,HT,hY,pY,KT,mY,gY,XT,vY,yY,_Y,bY,_ve=at(()=>{Ia(),Bt(),Jt(),er(),gy=e=>{if(Zr.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},UT=(e,t,r)=>{let n=t.format==="NHWC",i=e.dims.slice();n&&i.splice(1,0,i.pop());let s=Object.hasOwnProperty.call(t,"dilations"),o=t.kernelShape.slice(),a=t.strides.slice(),l=s?t.dilations.slice():[],u=t.pads.slice();Kw.adjustPoolAttributes(r,i,o,a,l,u);let c=Kw.computePoolOutputShape(r,i,a,l,o,u,t.autoPad),d=Object.assign({},t);s?Object.assign(d,{kernelShape:o,strides:a,pads:u,dilations:l,cacheKey:t.cacheKey}):Object.assign(d,{kernelShape:o,strides:a,pads:u,cacheKey:t.cacheKey});let h=c.slice();return h.push(h.splice(1,1)[0]),[d,n?h:c]},VT=(e,t)=>{let r=t.format==="NHWC",n=Ue.size(e),i=Ue.size(t.kernelShape),s=[{type:12,data:n},{type:12,data:i}],o=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){let a=t.kernelShape[t.kernelShape.length-1],l=t.strides[t.strides.length-1],u=t.pads[t.pads.length/2-1],c=t.pads[t.pads.length-1],d=!!(u+c);s.push({type:12,data:a},{type:12,data:l},{type:12,data:u},{type:12,data:c}),o.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let h=!1;if(t.kernelShape.length===2){let m=t.kernelShape[t.kernelShape.length-2],g=t.strides[t.strides.length-2],v=t.pads[t.pads.length/2-2],y=t.pads[t.pads.length-2];h=!!(v+y),s.push({type:12,data:m},{type:12,data:g},{type:12,data:v},{type:12,data:y}),o.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[s,o,!0,d,h]}else{if(r)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let a=Ue.computeStrides(t.kernelShape);s.push({type:12,data:a},{type:12,data:t.pads},{type:12,data:t.strides}),o.push({name:"kernelStrides",type:"u32",length:a.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});let l=t.pads.reduce((u,c)=>u+c);return[s,o,!!l,!1,!1]}},WT=(e,t,r,n,i,s,o,a,l,u,c,d)=>{let h=i.format==="NHWC",m=t.type.value,g=Et("output",t.type.tensor,n);if(i.kernelShape.length<=2){let v="",y="",x="",w=r-(h?2:1);if(c?v=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${w}] = indices[${w}] * uniforms.sw - uniforms.pwStart + i;
                  if (xIndices[${w}] < 0 || xIndices[${w}]
                      >= uniforms.x_shape[${w}]) {
                    pad++;
                    continue;
                  }
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${s}
                }`:v=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${w}] = indices[${w}] * uniforms.sw - uniforms.pwStart + i;
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${s}
                }`,i.kernelShape.length===2){let S=r-(h?3:2);d?y=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${S}] = indices[${S}] * uniforms.sh - uniforms.phStart + j;
                  if (xIndices[${S}] < 0 || xIndices[${S}] >= uniforms.x_shape[${S}]) {
                    pad += i32(uniforms.kw);
                    continue;
                  }
              `:y=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${S}] = indices[${S}] * uniforms.sh - uniforms.phStart + j;
                `,x=`
              }
            `}return`
            ${e.registerUniforms(l).declareVariables(t,g)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

              let indices = ${g.offsetToIndices("global_idx")};
              var xIndices = ${g.offsetToIndices("global_idx")};

              var value = ${m}(${a});
              var pad = 0;
              ${y}
              ${v}
              ${x}
              ${o}

              output[global_idx] = value;
            }`}else{if(h)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let v=i.kernelShape.length,y=i.pads.length,x="";return u?x=`
                if (xIndices[j] >= uniforms.x_shape[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${t.indicesToOffset("xIndices")}];
                ${s}
              }`:x=`
              }
              let x_val = x[${t.indicesToOffset("xIndices")}];
              ${s}
            `,`
            ${e.registerUniforms(l).declareVariables(t,g)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
              let indices = ${g.offsetToIndices("global_idx")};
              var xIndices = ${g.offsetToIndices("global_idx")};

              var offsets: array<u32, ${v}>;

              var value = ${m}(${a});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {
                var offset = i;
                for (var j = 0u; j < ${v-1}u; j++) {
                  offsets[j] = offset / ${Ot("uniforms.kernelStrides","j",v)};
                  offset -= offsets[j] * ${Ot("uniforms.kernelStrides","j",v)};
                }
                offsets[${v-1}] = offset;

                isPad = false;
                for (var j = ${r-v}u; j < ${r}u; j++) {
                  xIndices[j] = indices[j] * ${Ot("uniforms.strides",`j - ${r-v}u`,v)}
                    + offsets[j - ${r-v}u] - ${Ot("uniforms.pads","j - 2u",y)};
                  ${x}
              }
              ${o}

              output[global_idx] = value;
            }`}},GT=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,n3=e=>`${GT(e)};${e.countIncludePad}`,i3=e=>`${GT(e)};${e.storageOrder};${e.dilations}`,qT=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),HT=(e,t,r,n)=>{let[i,s]=UT(t,n,r),o=qe("x",t.dataType,t.dims.length),a=o.type.value,l="value += x_val;",u="";i.countIncludePad?u+=`value /= ${a}(uniforms.kernelSize);`:u+=`value /= ${a}(i32(uniforms.kernelSize) - pad);`;let[c,d,h,m,g]=VT(s,i);c.push(...It(t.dims,s));let v=["rank"];return{name:e,shaderCache:{hint:`${n.cacheKey};${h};${m};${g}`,inputDependencies:v},getRunData:()=>({outputs:[{dims:s,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(Ue.size(s)/64)},programUniforms:c}),getShaderSource:y=>WT(y,o,t.dims.length,s.length,i,l,u,0,d,h,m,g)}},hY=e=>{let t=e.count_include_pad!==0,r=qT(e);if(r.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let n={countIncludePad:t,...r,cacheKey:""};return{...n,cacheKey:n3(n)}},pY=(e,t)=>{gy(e.inputs),e.compute(HT("AveragePool",e.inputs[0],!1,t))},KT={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},mY=e=>{let t=e.format;return{format:t,...KT,cacheKey:t}},gY=(e,t)=>{gy(e.inputs),e.compute(HT("GlobalAveragePool",e.inputs[0],!0,t))},XT=(e,t,r,n)=>{let[i,s]=UT(t,n,r),o=`
      value = max(x_val, value);
    `,a="",l=qe("x",t.dataType,t.dims.length),u=["rank"],[c,d,h,m,g]=VT(s,i);return c.push(...It(t.dims,s)),{name:e,shaderCache:{hint:`${n.cacheKey};${h};${m};${g}`,inputDependencies:u},getRunData:()=>({outputs:[{dims:s,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(Ue.size(s)/64)},programUniforms:c}),getShaderSource:v=>WT(v,l,t.dims.length,s.length,i,o,a,t.dataType===10?-65504:-1e5,d,h,m,g)}},vY=(e,t)=>{gy(e.inputs),e.compute(XT("MaxPool",e.inputs[0],!1,t))},yY=e=>{let t=e.storage_order,r=e.dilations,n=qT(e);if(t!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(n.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let i={storageOrder:t,dilations:r,...n,cacheKey:""};return{...i,cacheKey:i3(i)}},_Y=e=>{let t=e.format;return{format:t,...KT,cacheKey:t}},bY=(e,t)=>{gy(e.inputs),e.compute(XT("GlobalMaxPool",e.inputs[0],!0,t))}}),s3,o3,wY,xY,bve=at(()=>{Bt(),Jt(),Dn(),er(),s3=(e,t)=>{if(e.length<2||e.length>3)throw new Error("DequantizeLinear requires 2 or 3 inputs.");if(e.length===3&&e[1].dims===e[2].dims)throw new Error("x-scale and x-zero-point must have the same shape.");if(e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[0].dataType===6&&e.length>2)throw new Error("In the case of dequantizing int32 there is no zero point.");if(e[1].dims.length!==0&&e[1].dims.length!==1&&e[1].dims.length!==e[0].dims.length)throw new Error("scale input must be a scalar, a 1D tensor, or have the same rank as the input tensor.");if(e.length>2){if(e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[1].dims.length!==e[2].dims.length)throw new Error("scale and zero-point inputs must have the same rank.");if(!e[1].dims.map((r,n)=>r===e[2].dims[n]).reduce((r,n)=>r&&n,!0))throw new Error("scale and zero-point inputs must have the same shape.")}if(t.blockSize>0){if(e[1].dims.length===0||e[1].dims.length===1&&e[1].dims[0]===1)throw new Error("blockSize must be set only for block quantization.");if(!e[1].dims.map((i,s)=>s===t.axis||i===e[0].dims[s]).reduce((i,s)=>i&&s,!0))throw new Error("For block qunatization, scale input shape to match the input shape except for the axis");if(e[1].dims.length!==e[0].dims.length)throw new Error("For block qunatization the scale input rank must be the same as the x rank.");let r=e[0].dims[t.axis],n=e[1].dims[t.axis];if(t.blockSize<Math.ceil(r/n)||t.blockSize>Math.ceil(r/(n-1)-1))throw new Error("blockSize must be with in the range [ceil(dI / Si), ceil(dI / (Si - 1) - 1)].")}},o3=(e,t)=>{let r=Ue.normalizeAxis(t.axis,e[0].dims.length),n=e[0].dataType,i=n===3,s=e[0].dims,o=e[1].dataType,a=Ue.size(s),l=n===3||n===2,u=l?[Math.ceil(Ue.size(e[0].dims)/4)]:e[0].dims,c=e[1].dims,d=e.length>2?e[2]:void 0,h=d?l?[Math.ceil(Ue.size(d.dims)/4)]:d.dims:void 0,m=c.length===0||c.length===1&&c[0]===1,g=m===!1&&c.length===1,v=wn(a),y=m&&(!l||v===4),x=y?v:1,w=y&&!l?v:1,S=qe("input",l?12:n,u.length,w),M=qe("scale",o,c.length),T=d?qe("zero_point",l?12:n,h.length):void 0,P=Et("output",o,s.length,x),E=[S,M];T&&E.push(T);let A=[u,c];d&&A.push(h);let L=[{type:12,data:a/x},{type:12,data:r},{type:12,data:t.blockSize},...It(...A,s)],B=V=>{let G=[{name:"output_size",type:"u32"},{name:"axis",type:"u32"},{name:"block_size",type:"u32"}];return`
      ${V.registerUniforms(G).declareVariables(...E,P)}
      ${V.mainStart()}
          ${V.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let output_indices = ${P.offsetToIndices("global_idx")};

          // Set input x
          ${l?`
            let input = ${S.getByOffset("global_idx / 4")};
            let x_vec = ${i?"unpack4xI8(input)":"unpack4xU8(input)"};
            let x_value = ${x===1?"x_vec[global_idx % 4]":"x_vec"};`:`let x_value = ${S.getByOffset("global_idx")};`};

          // Set scale input
          ${m?`let scale_value= ${M.getByOffset("0")}`:g?`
            let scale_index = ${P.indicesGet("output_indices","uniforms.axis")};
            let scale_value= ${M.getByOffset("scale_index")};`:`
            var scale_indices: ${M.type.indices} = output_indices;
            let index = ${M.indicesGet("scale_indices","uniforms.axis")} / uniforms.block_size;
            ${M.indicesSet("scale_indices","uniforms.axis","index")};
            let scale_value= ${M.getByIndices("scale_indices")};`};

          // Set zero-point input
          ${T?m?l?`
                let zero_point_input = ${T.getByOffset("0")};
                let zero_point_vec =  ${i?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value= zero_point_vec[0]`:`let zero_point_value = ${T.getByOffset("0")}`:g?l?`
                let zero_point_index = ${P.indicesGet("output_indices","uniforms.axis")};
                let zero_point_input = ${T.getByOffset("zero_point_index / 4")};
                let zero_point_vec =  ${i?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_index % 4]`:`
                let zero_point_index = ${P.indicesGet("output_indices","uniforms.axis")};
                let zero_point_value = ${T.getByOffset("zero_point_index")};`:l?`
                let zero_point_offset = ${M.indicesToOffset("scale_indices")};
                let zero_point_input = ${T.getByOffset("zero_point_offset / 4")};
                let zero_point_vec = ${i?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_offset % 4];`:`let zero_point_value = ${T.getByIndices("scale_indices")};`:`let zero_point_value = ${l?i?"i32":"u32":S.type.value}(0);`};
      // Compute and write output
      ${P.setByOffset("global_idx",`${P.type.value}(x_value - zero_point_value) * scale_value`)};
      }`};return{name:"DequantizeLinear",shaderCache:{hint:t.cacheKey,inputDependencies:T?["rank","rank","rank"]:["rank","rank"]},getShaderSource:B,getRunData:()=>({outputs:[{dims:s,dataType:o}],dispatchGroup:{x:Math.ceil(a/x/64),y:1,z:1},programUniforms:L})}},wY=(e,t)=>{s3(e.inputs,t),e.compute(o3(e.inputs,t))},xY=e=>Tr({axis:e.axis,blockSize:e.blockSize})}),a3,l3,MY,wve=at(()=>{Ia(),Bt(),er(),a3=(e,t,r)=>{let n=e===t,i=e<t&&r<0,s=e>t&&r>0;if(n||i||s)throw new Error("Range these inputs' contents are invalid.")},l3=(e,t,r,n)=>{let i=Math.abs(Math.ceil((t-e)/r)),s=[i],o=i,a=[{type:12,data:o},{type:n,data:e},{type:n,data:r},...It(s)],l=u=>{let c=Et("output",n,s.length),d=c.type.value,h=[{name:"outputSize",type:"u32"},{name:"start",type:d},{name:"delta",type:d}];return`
        ${u.registerUniforms(h).declareVariables(c)}
        ${u.mainStart()}
        ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        output[global_idx] = uniforms.start + ${d}(global_idx) * uniforms.delta;
      }`};return{name:"Range",shaderCache:{hint:`${n}`},getShaderSource:l,getRunData:()=>({outputs:[{dims:s,dataType:n}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:a})}},MY=e=>{let t=0,r=0,n=0;e.inputs[0].dataType===6?(t=e.inputs[0].getInt32Array()[0],r=e.inputs[1].getInt32Array()[0],n=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(t=e.inputs[0].getFloat32Array()[0],r=e.inputs[1].getFloat32Array()[0],n=e.inputs[2].getFloat32Array()[0]),Zr.webgpu.validateInputContent&&a3(t,r,n),e.compute(l3(t,r,n,e.inputs[0].dataType),{inputs:[]})}}),u3,YT,QT,c3,TY,SY,xve=at(()=>{Bt(),Jt(),Dn(),er(),u3=(e,t,r,n)=>{if(e!=="none"&&n!=="i32"&&n!=="u32"&&n!=="f32")throw new Error(`Input ${n} is not supported with reduction ${e}.`);let i=`{
                var oldValue = 0;
                loop {
                  let newValueF32 =`,s=`;
                  let newValue = bitcast<i32>(newValueF32);
                  let res = atomicCompareExchangeWeak(&${t}, oldValue, newValue);
                  if res.exchanged {
                    break;
                  }
                  oldValue = res.old_value;
                }
              }`;switch(e){case"none":return`${t}=${r};`;case"add":return n==="i32"||n==="u32"?`atomicAdd(&${t}, bitcast<${n}>(${r}));`:`
              ${i}bitcast<${n}>(oldValue) + (${r})${s}`;case"max":return n==="i32"||n==="u32"?`atomicMax(&${t}, bitcast<${n}>(${r}));`:`
                ${i}max(bitcast<f32>(oldValue), (${r}))${s}`;case"min":return n==="i32"||n==="u32"?`atomicMin(&${t}, bitcast<${n}>(${r}));`:`${i}min(bitcast<${n}>(oldValue), (${r}))${s}`;case"mul":return`${i}(bitcast<${n}>(oldValue) * (${r}))${s}`;default:throw new Error(`Reduction ${e} is not supported.`)}},YT=(e,t)=>`${e===1?`
    let element_count_dim = uniforms.output_strides;
    let dim_value = uniforms.output_shape;`:`
    let element_count_dim = uniforms.output_strides[${t?"i - indices_start":"i"}];
    let dim_value = uniforms.output_shape[${t?"i - indices_start":"i"} + uniforms.last_index_dimension];`}
    
    if (index >= 0) {
      if (index >= i32(dim_value)) {
        index = i32(dim_value - 1);
      }
    } else {
      if (index < -i32(dim_value)) {
        index = 0;
      } else {
        index += i32(dim_value);
      }
    }
    data_offset += u32((u32(index) * element_count_dim));`,QT=(e,t,r)=>`for (var i = 0u; i < uniforms.num_updates_elements; i++) {
        let value = updates[uniforms.num_updates_elements * ${r?"global_idx":"idx"} + i];
        ${u3(e.reduction,"output[data_offset + i]","value",t)}
      }`,c3=(e,t)=>{let r=e[0].dims,n=e[1].dims,i=r,s=1,o=Math.ceil(Ue.size(n)/s),a=n[n.length-1],l=Ue.sizeFromDimension(r,a),u=Ue.sizeFromDimension(n,0)/a,c=[{type:12,data:o},{type:12,data:a},{type:12,data:l},...It(e[1].dims,e[2].dims,i)],d=h=>{let m=qe("indices",e[1].dataType,e[1].dims.length),g=qe("updates",e[2].dataType,e[2].dims.length,s),v=t.reduction!=="none"&&t.reduction!==""?Z9("output",e[0].dataType,i.length):Et("output",e[0].dataType,i.length,s);return`
      ${h.registerUniform("output_size","u32").registerUniform("last_index_dimension","u32").registerUniform("num_updates_elements","u32").declareVariables(m,g,v)}
      ${h.mainStart()}
        ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
  var hasDuplicates = false;
  if (${t.reduction==="none"}) {
    for (var i = 0; i < ${u}; i = i + 1) {
      for (var j = i + 1; j < ${u}; j = j + 1) {
        var index_i = i32(indices[i].x);
        var index_j = i32(indices[j].x);
        if (index_i == index_j) {
          hasDuplicates = true;
          break;
        }
      }
      if (hasDuplicates) {
        break;
      }
    }
  }

  if (${t.reduction==="none"} && hasDuplicates) {
    if (global_idx != 0u) {
      return;
    }
    // Process each index-update pair individually when duplicates exist
    for (var idx = 0u; idx < ${u}u; idx++) {
      var data_offset = 0u;
      for (var i = 0u; i < uniforms.last_index_dimension; i++) {
        var index = i32(indices[idx * uniforms.last_index_dimension + i].x);
        ${YT(r.length,!1)}
      }
      ${QT(t,v.type.value,!1)}
    }
    return;
  }

  var data_offset = 0u;
  var indices_start = uniforms.last_index_dimension * global_idx;
  var indices_end = indices_start + uniforms.last_index_dimension;
  for (var i = indices_start; i < indices_end; i++) {
    var index = i32(indices[i].x);
    ${YT(r.length,!0)}
  }
  ${QT(t,v.type.value,!0)}
  }`};return{name:"ScatterND",shaderCache:{hint:`${t.cacheKey}_${t.reduction}`,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:c}),getShaderSource:d}},TY=e=>Tr({reduction:e.reduction}),SY=(e,t)=>{e.compute(c3(e.inputs,t),{inputs:[e.inputs[1],e.inputs[2]],outputs:[]})}}),d3,f3,h3,JT,p3,m3,g3,v3,y3,_3,b3,w3,ZT,x3,M3,T3,S3,P3,PY,EY,Mve=at(()=>{Bt(),Jt(),Dn(),er(),d3=(e,t)=>{if(e.every(r=>r>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(t.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and
            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(t.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},f3=(e,t,r)=>{t.every(i=>i>=0&&i<r||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let n=new Array(r).fill(1);return t.forEach((i,s)=>n[i]=e[s]),n},h3=(e,t,r,n,i,s)=>{let[o,a,l]=r>10?[1,2,3]:[-1,e.length>1?1:-1,-1],u=e[0].dims.length;if(o>0&&e.length>o&&e[o].dims.length>0)e[o].getFloat32Array().forEach(c=>s.push(c));else if(t.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(a>0&&e.length>a&&e[a].dims.length===1&&e[a].dims[0]>0){if(e[a].getFloat32Array().forEach(c=>n.push(c)),n.length!==0&&n.length!==u&&r>=18&&n.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");d3(n,t),t.axes.length>0&&f3(n,t.axes,u).forEach((c,d)=>n[d]=c)}if(l>0&&e.length>l&&e[l].dims.length===1&&e[l].dims[0]>0&&(e[l].getBigInt64Array().forEach(c=>i.push(Number(c))),i.length!==0&&i.length!==u&&r>=18&&i.length!==t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(n.length!==0&&n.length!==t.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(i.length!==0&&i.length!==t.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified')}if(typeof n<"u"&&typeof i<"u"&&n.length>0&&i.length>u)throw new Error("Resize requires only of scales or sizes to be specified")},JT=(e,t,r,n)=>`
  // The whole part and the fractional part are calculated separately due to inaccuracy of floating
  // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an
  // offset-by-one error later in floor().
  let big = (${e}) * (${t});
  let whole = ${n}(big / (${r}));
  let fract = ${n}(big % (${r})) / ${n}(${r});
  return whole + fract;
`,p3=(e,t)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,
     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${t} { `+(()=>{switch(e){case"asymmetric":return`
          if (xScale < 1.0 || floor(xScale) != xScale) {
            return ${t}(xResized) / ${t}(xScale);
          } else {
            ${JT("xResized","lengthOriginal","lengthResized",t)}
          }
        `;case"pytorch_half_pixel":return`if (lengthResized > 1) {
                    return (${t}(xResized) + 0.5) / ${t}(xScale) - 0.5;
                  } else {
                    return 0.0;
                  }`;case"tf_half_pixel_for_nn":return`return (${t}(xResized) + 0.5) / ${t}(xScale);`;case"align_corners":return`if (lengthResized == 1) {
                    return 0.0;
                  } else {
                    ${JT("xResized","lengthOriginal - 1","lengthResized - 1",t)}
                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {
                    return ${t}(roiStart) * ${t}(lengthOriginal - 1) +
                        (${t}(xResized) * ${t}(roiEnd - roiStart) * ${t}(lengthOriginal - 1)) /
                        ${t}(lengthResized - 1);
                  } else {
                    return 0.5 * ${t}(roiStart + roiEnd) * ${t}(lengthOriginal - 1);
                  }`;case"half_pixel_symmetric":return`const outputWidth = ${t}xScale * ${t}(lengthResized);
                  const adjustment = ${t}(lengthResized) / outputWidth;
                  const center = ${t}(lengthOriginal) / 2;
                  const offset = center * (1 - adjustment);
                  return offset + ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;case"half_pixel":return`return ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",m3=(e,t,r)=>`fn getNearestPixelFromOriginal(xOriginal: ${r}, isDownSample: bool) -> ${r} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",g3=(e,t,r)=>{let n=new Array(r).fill(0).concat(new Array(r).fill(1)),i=e.length===0?n:e.slice();return t.length>0?(t.forEach((s,o)=>{n[s]=i[o],n[o+r]=i[t.length+o]}),n):i},v3=(e,t,r,n)=>{let i=[];if(r.length>0)if(n.length>0){if(e.forEach(s=>i.push(s)),Math.max(...n)>e.length)throw new Error("axes is out of bound");n.forEach((s,o)=>i[s]=r[o])}else r.forEach(s=>i.push(s));else{if(t.length===0)throw new Error("Resize requires either scales or sizes.");i=e.map((s,o)=>Math.round(s*t[o]))}return i},y3=(e,t,r)=>{let n=(()=>{switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min(...r.axes.map(s=>t[s]),Number.MAX_VALUE):Math.min(...t,Number.MAX_VALUE);case"not_smaller":return r.axes.length>0?Math.max(...r.axes.map(s=>t[s]),Number.MIN_VALUE):Math.max(...t,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${r.keepAspectRatioPolicy} is not supported`)}})();t.fill(1,0,t.length);let i=e.slice();return r.axes.length>0?(r.axes.forEach(s=>t[s]=n),r.axes.forEach(s=>i[s]=Math.round(e[s]*t[s]))):(t.fill(n,0,t.length),i.forEach((s,o)=>i[o]=Math.round(s*t[o]))),i},_3=(e,t,r,n,i)=>`
    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${r.length}> {
      var original_indices: array<${e.type.value}, ${r.length}>;
      for (var i:u32 = 0; i < ${r.length}; i++) {
        var output_index = ${e.indicesGet("output_indices","i")};
        var scale = ${Ot("uniforms.scales","i",n)};
        var roi_low = ${Ot("uniforms.roi","i",i)};
        var roi_hi = ${Ot("uniforms.roi",`i + ${t.length}`,i)};
        if (scale == 1.0) {
          original_indices[i] = ${e.type.value}(output_index);
        } else {
          var input_shape_i = ${Ot("uniforms.input_shape","i",t.length)};
          var output_shape_i = ${Ot("uniforms.output_shape","i",r.length)};
          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                           input_shape_i, roi_low, roi_hi);
        }
      }
      return original_indices;
    }`,b3=(e,t,r,n,i,s,o)=>`
    fn calculateInputIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
      var input_indices: ${e.type.indices};
      for (var i:u32 = 0; i < ${n.length}; i++) {
        var output_index = ${t.indicesGet("output_indices","i")};
        var input_index: u32;
        var scale = ${Ot("uniforms.scales","i",i)};
        if (scale == 1.0) {
          input_index = output_index;
        } else {
          var roi_low = ${Ot("uniforms.roi","i",s)};
          var roi_hi = ${Ot("uniforms.roi",`i + ${r.length}`,s)};
          var input_shape_i = ${Ot("uniforms.input_shape","i",r.length)};
          var output_shape_i = ${Ot("uniforms.output_shape","i",n.length)};
          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                        input_shape_i, roi_low, roi_hi);
          if (!${o} || (original_idx >= 0 && original_idx < ${t.type.value}(input_shape_i))) {
            if (original_idx < 0) {
              input_index = 0;
            } else if (original_idx > ${t.type.value}(input_shape_i - 1)) {
              input_index = input_shape_i - 1;
            } else {
              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));
            }
          } else {
            input_index = u32(original_idx);
          }
        }
        ${e.indicesSet("input_indices","i","input_index")}
      }
      return input_indices;
    }`,w3=(e,t)=>`
    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {
      for (var i:u32 = 0; i < ${t.length}; i++) {
        var input_index = ${e.indicesGet("input_indices","i")};
        if (input_index < 0 || input_index >= ${Ot("uniforms.input_shape","i",t.length)}) {
          return false;
        }
      }
      return true;
    }`,ZT=(e,t,r,n)=>e.rank>n?`
    ${e.indicesSet("input_indices",t,"channel")};
    ${e.indicesSet("input_indices",r,"batch")};
`:"",x3=(e,t,r,n,i)=>{let[s,o,a,l]=r.length===2?[-1,0,1,-1]:[0,2,3,1],u=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${u} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",o,`max(0, min(row, ${r[o]} - 1))`)};
      ${e.indicesSet("input_indices",a,`max(0, min(col, ${r[a]} - 1))`)};
      ${ZT(e,l,s,2)}
      return ${e.getByIndices("input_indices")};
    }

    fn bilinearInterpolation(output_indices: ${t.type.indices}) -> ${u} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var row:${u} = originalIndices[${o}];
      var col:${u} = originalIndices[${a}];
      ${n?`if (row < 0 || row > (${r[o]} - 1) || col < 0 || col > (${r[a]} - 1)) {
        return ${i};
      }`:""};
      row = max(0, min(row, ${r[o]} - 1));
      col = max(0, min(col, ${r[a]} - 1));
      var row1: u32 = u32(row);
      var col1: u32 = u32(col);
      var row2: u32 = u32(row + 1);
      var col2: u32 = u32(col + 1);
      var channel: u32 = ${r.length>2?`u32(originalIndices[${l}])`:"0"};
      var batch: u32 =  ${r.length>2?`u32(originalIndices[${s}])`:"0"};
      var x11: ${u} = getInputValue(batch, channel, row1, col1);
      var x12: ${u} = getInputValue(batch, channel, row1, col2);
      var x21: ${u} = getInputValue(batch, channel, row2, col1);
      var x22: ${u} = getInputValue(batch, channel, row2, col2);
      var dx1: ${u} = abs(row - ${u}(row1));
      var dx2: ${u} = abs(${u}(row2) - row);
      var dy1: ${u} = abs(col - ${u}(col1));
      var dy2: ${u} = abs(${u}(col2) - col);
      if (row1 == row2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (col1 == col2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);
    }`},M3=(e,t,r,n,i,s,o,a,l,u)=>{let c=r.length===2,[d,h]=c?[0,1]:[2,3],m=e.type.value,g=v=>{let y=v===d?"row":"col";return`
      fn ${y}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${t.type.indices}) -> ${m} {
        var output_index = ${t.indicesGet("output_indices",v)};
        var originalIdx: ${m} = getOriginalCoordinateFromResizedCoordinate(output_index, ${i[v]},
        ${n[v]}, ${r[v]}, ${s[v]}, ${s[v]} + ${r.length});
        var fractOriginalIdx: ${m} = originalIdx - floor(originalIdx);
        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);

        if (${a} && (originalIdx < 0 || originalIdx > (${r[v]} - 1))) {
          return ${l};
        }
        var data: array<${m}, 4> = array<${m}, 4>(0.0, 0.0, 0.0, 0.0);
        for (var i: i32 = -1; i < 3; i++) {
          var ${y}: ${m} = originalIdx + ${m}(i);
          if (${y} < 0 || ${y} >= ${r[v]}) {
            ${u?`coefs[i + 1] = 0.0;
                        continue;`:a?`return ${l};`:`${y} = max(0, min(${y}, ${r[v]} - 1));`};
          }
        var input_indices_copy: ${e.type.indices} = input_indices;
          ${e.indicesSet("input_indices_copy",v,`u32(${y})`)};
          data[i + 1] = ${v===d?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};
        }
        return cubicInterpolation1D(data, coefs);
      }`};return`
    ${g(d)};
    ${g(h)};
  fn getCubicInterpolationCoefs(s: ${m}) -> array<${m}, 4> {
    var absS = abs(s);
    var coeffs: array<${m}, 4> = array<${m}, 4>(0.0, 0.0, 0.0, 0.0);
    var oneMinusAbsS: ${m} = 1.0 - absS;
    var twoMinusAbsS: ${m} = 2.0 - absS;
    var onePlusAbsS: ${m} = 1.0 + absS;
    coeffs[0] = ((${o} * onePlusAbsS - 5 * ${o}) * onePlusAbsS + 8 * ${o}) * onePlusAbsS - 4 * ${o};
    coeffs[1] = ((${o} + 2) * absS - (${o} + 3)) * absS * absS + 1;
    coeffs[2] = ((${o} + 2) * oneMinusAbsS - (${o} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;
    coeffs[3] = ((${o} * twoMinusAbsS - 5 * ${o}) * twoMinusAbsS + 8 * ${o}) * twoMinusAbsS - 4 * ${o};
    return coeffs;
  }

  fn cubicInterpolation1D(x: array<${m}, 4>, coefs: array<${m}, 4>) -> ${m} {
    var coefsSum: ${m} = coefs[0] + coefs[1] + coefs[2] + coefs[3];
    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;
  }

  fn bicubicInterpolation(output_indices: ${t.type.indices}) -> ${m} {
    var input_indices: ${e.type.indices} = output_indices;
    return colCubicInterpolation(input_indices, output_indices);
  }
    `},T3=(e,t,r,n,i)=>{let[s,o,a,l,u]=r.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],c=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${c} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",o,`max(0, min(depth, ${r[o]} - 1))`)};
      ${e.indicesSet("input_indices",a,`max(0, min(height, ${r[a]} - 1))`)};
      ${e.indicesSet("input_indices",l,`max(0, min(width, ${r[l]} - 1))`)};
      ${ZT(e,u,s,3)}
      return ${e.getByIndices("input_indices")};
    }

    fn trilinearInterpolation(output_indices: ${t.type.indices}) -> ${c} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var depth:${c} = originalIndices[${o}];
      var height:${c} = originalIndices[${a}];
      var width:${c} = originalIndices[${l}];
      ${n?`if (depth < 0 || depth > (${r[o]} - 1) || height < 0 || height > (${r[a]} - 1) || width < 0 || (width > ${r[l]} - 1)) {
      return ${i};
        }`:""};

    depth = max(0, min(depth, ${r[o]} - 1));
      height = max(0, min(height, ${r[a]} - 1));
      width = max(0, min(width, ${r[l]} - 1));
      var depth1: u32 = u32(depth);
      var height1: u32 = u32(height);
      var width1: u32 = u32(width);
      var depth2: u32 = u32(depth + 1);
      var height2: u32 = u32(height + 1);
      var width2: u32 = u32(width + 1);
      var channel: u32 = ${r.length>3?`u32(originalIndices[${u}])`:"0"};
      var batch: u32 =  ${r.length>3?`u32(originalIndices[${s}])`:"0"};

      var x111: ${c} = getInputValue(batch, channel, depth1, height1, width1);
      var x112: ${c} = getInputValue(batch, channel, depth1, height1, width2);
      var x121: ${c} = getInputValue(batch, channel, depth1, height2, width1);
      var x122: ${c} = getInputValue(batch, channel, depth1, height2, width2);
      var x211: ${c} = getInputValue(batch, channel, depth2, height1, width1);
      var x212: ${c} = getInputValue(batch, channel, depth2, height1, width2);
      var x221: ${c} = getInputValue(batch, channel, depth2, height2, width1);
      var x222: ${c} = getInputValue(batch, channel, depth2, height2, width2);
      var dx1: ${c} = abs(depth - ${c}(depth1));
      var dx2: ${c} = abs(${c}(depth2) - depth);
      var dy1: ${c} = abs(height - ${c}(height1));
      var dy2: ${c} = abs(${c}(height2) - height);
      var dz1: ${c} = abs(width - ${c}(width1));
      var dz2: ${c} = abs(${c}(width2) - width);
      if (depth1 == depth2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (height1 == height2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      if (width1 == width2) {
        dz1 = 0.5;
        dz2 = 0.5;
      }
      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +
              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);
    }`},S3=(e,t,r,n,i,s)=>{let o=e.dims,a=g3(s,t.axes,o.length),l=v3(o,n,i,t.axes),u=n.slice();n.length===0&&(u=o.map((w,S)=>w===0?1:l[S]/w),t.keepAspectRatioPolicy!=="stretch"&&(l=y3(o,u,t)));let c=Et("output",e.dataType,l.length),d=qe("input",e.dataType,o.length),h=Ue.size(l),m=o.length===l.length&&o.every((w,S)=>w===l[S]),g=t.coordinateTransformMode==="tf_crop_and_resize",v=t.extrapolationValue,y=d.type.value,x=w=>`
      ${m?"":`
      ${p3(t.coordinateTransformMode,y)};
      ${(()=>{switch(t.mode){case"nearest":return`
              ${w3(d,o)};
              ${m3(t.nearestMode,r,y)};
              ${b3(d,c,o,l,u.length,a.length,g)};
              `;case"linear":return`
              ${_3(c,o,l,u.length,a.length)};
              ${(()=>{if(o.length===2||o.length===4)return`${x3(d,c,o,g,v)}`;if(o.length===3||o.length===5)return`${T3(d,c,o,g,v)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};
            `;case"cubic":return`
            ${(()=>{if(o.length===2||o.length===4)return`${M3(d,c,o,l,u,a,t.cubicCoeffA,g,t.extrapolationValue,t.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};
            `;default:throw Error("Invalid resize mode")}})()};
      `}
      ${w.registerUniform("output_size","u32").registerUniform("scales","f32",u.length).registerUniform("roi","f32",a.length).declareVariables(d,c)}
      ${w.mainStart()}
        ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
        ${m?"output[global_idx] = input[global_idx];":`
        let output_indices = ${c.offsetToIndices("global_idx")};
        var input_indices: ${d.type.indices};
        ${(()=>{switch(t.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);
                if (checkInputIndices(input_indices)) {
                  output[global_idx] = ${d.getByIndices("input_indices")};
                } else {
                  output[global_idx] = ${t.extrapolationValue};
                }`;case"linear":return`output[global_idx] = ${o.length===2||o.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${t.mode}`)}})()};
`}
      }`;return{name:"Resize",shaderCache:{hint:`${t.cacheKey}|${r}|${u.length>0?t.mode==="cubic"?u:u.length:""}|${i.length>0?i:""}|${a.length>0?a:""}|${m}|${t.mode==="nearest"?o.length:o}`,inputDependencies:["rank"]},getShaderSource:x,getRunData:()=>({outputs:[{dims:l,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:[{type:12,data:h},{type:1,data:u},{type:1,data:a},...It(o,l)]})}},P3=e=>{let t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]},PY=(e,t)=>{let r=[],n=[],i=[],s=P3(e);if(t.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");h3(e.inputs,t,s,r,n,i),e.compute(S3(e.inputs[0],t,s,r,n,i),{inputs:[0]})},EY=e=>{let t=e.antialias,r=e.axes,n=e.coordinateTransformMode,i=e.cubicCoeffA,s=e.excludeOutside!==0,o=e.extrapolationValue,a=e.keepAspectRatioPolicy,l=e.mode,u=e.nearestMode===""?"simple":e.nearestMode;return Tr({antialias:t,axes:r,coordinateTransformMode:n,cubicCoeffA:i,excludeOutside:s,extrapolationValue:o,keepAspectRatioPolicy:a,mode:l,nearestMode:u})}}),E3,C3,CY,Tve=at(()=>{Bt(),Jt(),er(),E3=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let t=e[0],r=e[1],n=e[2];if(t.dataType!==r.dataType||t.dataType!==n.dataType)throw new Error("All inputs must have the same data type");if(t.dims.length!==3&&t.dims.length!==2)throw new Error("Input must be 2D or 3D");if(r.dims.length!==3&&r.dims.length!==2)throw new Error("Skip must be 2D or 3D");let i=t.dims[t.dims.length-1],s=t.dims[t.dims.length-2];if(r.dims[r.dims.length-1]!==i)throw new Error("Skip must have the same hidden size as input");if(r.dims[r.dims.length-2]!==s)throw new Error("Skip must have the same sequence length as input");if(n.dims.length!==1)throw new Error("Gamma must be 1D");if(n.dims[n.dims.length-1]!==i)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let o=e[3];if(o.dims.length!==1)throw new Error("Beta must be 1D");if(o.dims[o.dims.length-1]!==i)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let o=e[4];if(o.dims.length!==1)throw new Error("Bias must be 1D");if(o.dims[o.dims.length-1]!==i)throw new Error("Bias must have the same hidden size as input")}},C3=(e,t,r,n)=>{let i=t.simplified,s=e[0].dims,o=Ue.size(s),a=s,l=o,u=s.slice(-1)[0],c=n?s.slice(0,-1).concat(1):[],d=!i&&e.length>3,h=e.length>4,m=n&&r>1,g=n&&r>2,v=r>3,y=64,x=wn(u),w=[{type:12,data:l},{type:12,data:x},{type:12,data:u},{type:1,data:t.epsilon}],S=T=>{let P=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],E=[qe("x",e[0].dataType,e[0].dims,x),qe("skip",e[1].dataType,e[1].dims,x),qe("gamma",e[2].dataType,e[2].dims,x)];d&&E.push(qe("beta",e[3].dataType,e[3].dims,x)),h&&E.push(qe("bias",e[4].dataType,e[4].dims,x)),E.push(Et("output",e[0].dataType,a,x)),m&&E.push(Et("mean_output",1,c)),g&&E.push(Et("inv_std_output",1,c)),v&&E.push(Et("input_skip_bias_sum",e[0].dataType,a,x));let A=di(e[0].dataType),L=di(1,x);return`

      ${T.registerUniforms(P).declareVariables(...E)}
      var<workgroup> sum_shared : array<${L}, ${y}>;
      var<workgroup> sum_squared_shared : array<${L}, ${y}>;

      ${T.mainStart([y,1,1])}
        let ix = local_id.x;
        let iy = global_id.x / ${y};

        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;
        var stride = hidden_size_vectorized / ${y};
        let offset = ix * stride + iy * hidden_size_vectorized;
        let offset1d = stride * ix;
        if (ix == ${y-1}) {
          stride = hidden_size_vectorized - stride * ix;
        }
        for (var i: u32 = 0; i < stride; i++) {
          let skip_value = skip[offset + i];
          let bias_value = ${h?"bias[offset1d + i]":A+"(0.0)"};
          let input_value = x[offset + i];
          let value = input_value + skip_value + bias_value;
          ${v?"input_skip_bias_sum[offset + i] = value;":""}
          output[offset + i] = value;
          let f32_value = ${um(A,x,"value")};
          sum_shared[ix] += f32_value;
          sum_squared_shared[ix] += f32_value * f32_value;
        }
        workgroupBarrier();

        var reduce_size : u32 = ${y};
        for (var curr_size = reduce_size >> 1;  curr_size > 0; curr_size = reduce_size >> 1) {
          reduce_size = curr_size + (reduce_size & 1);
          if (ix < curr_size) {
            sum_shared[ix] += sum_shared[ix + reduce_size];
            sum_squared_shared[ix] += sum_squared_shared[ix + reduce_size];
          }
          workgroupBarrier();
        }

        let sum = sum_shared[0];
        let square_sum = sum_squared_shared[0];
        let mean = ${Xc("sum",x)} / f32(uniforms.hidden_size);
        let inv_std_dev = inverseSqrt(${Xc("square_sum",x)} / f32(uniforms.hidden_size) ${i?"":"- mean * mean"} + uniforms.epsilon);
        ${m?"mean_output[global_idx] = mean;":""}
        ${g?"inv_std_output[global_idx] = inv_std_dev;":""}

        for (var i: u32 = 0; i < stride; i++) {
          output[offset + i] = (output[offset + i] ${i?"":`- ${A}(mean)`}) *
            ${A}(inv_std_dev) * gamma[offset1d + i]
            ${d?"+ beta[offset1d + i]":""};
        }
      }`},M=[{dims:a,dataType:e[0].dataType}];return r>1&&M.push({dims:c,dataType:1}),r>2&&M.push({dims:c,dataType:1}),r>3&&M.push({dims:s,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${x};${m};${g};${v}`,inputDependencies:e.map((T,P)=>"type")},getShaderSource:S,getRunData:()=>({outputs:M,dispatchGroup:{x:Math.ceil(l/u)},programUniforms:w})}},CY=(e,t)=>{E3(e.inputs);let r=[0];e.outputCount>1&&r.push(-3),e.outputCount>2&&r.push(-3),e.outputCount>3&&r.push(3),e.compute(C3(e.inputs,t,e.outputCount,!1),{outputs:r})}}),A3,vy,O3,eS,k3,I3,AY,OY,Sve=at(()=>{Bt(),Jt(),Dn(),er(),A3=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");if(t.axes.length!==0){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((r,n)=>{if(e[n+1].dataType!==6&&e[n+1].dataType!==7)throw new Error(`Input ${n} must be an array of int32 or int64`)})},vy=(e,t)=>{let r=[];if(e.length>t)if(e[t].dataType===7)e[t].getBigInt64Array().forEach(n=>r.push(Number(n)));else if(e[t].dataType===6)e[t].getInt32Array().forEach(n=>r.push(Number(n)));else throw new Error(`Input ${t} must be an array of int32 or int64`);return r},O3=(e,t)=>{if(e.length>1){let r=vy(e,1),n=vy(e,2),i=vy(e,3);return i.length===0&&(i=[...Array(e[0].dims.length).keys()]),Tr({starts:r,ends:n,axes:i})}else return t},eS=(e,t,r,n,i)=>{let s=e;return e<0&&(s+=r[n[t]]),i[t]<0?Math.max(0,Math.min(s,r[n[t]]-1)):Math.max(0,Math.min(s,r[n[t]]))},k3=(e,t,r)=>`fn calculateInputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
          var input_indices: ${e.type.indices};
          var carry = 0u;
          for (var i = ${r.length}; i >= 0; i--) {
            let input_shape_i = ${Ot("uniforms.input_shape","i",r.length)};
            let steps_i = ${Ot("uniforms.steps","i",r.length)};
            let signs_i = ${Ot("uniforms.signs","i",r.length)};
            let starts_i = ${Ot("uniforms.starts","i",r.length)};
            var output_index = ${t.indicesGet("output_indices","i")};
            var input_index = output_index * steps_i + starts_i + carry;
            carry = input_index / input_shape_i;
            input_index = input_index % input_shape_i;
            if (signs_i < 0) {
              input_index = input_shape_i - input_index - 1u + starts_i;
            }
            ${e.indicesSet("input_indices","i","input_index")};
          }
          return input_indices;
      }`,I3=(e,t)=>{let r=e[0].dims,n=Ue.size(r),i=t.axes.length>0?Ue.normalizeAxes(t.axes,r.length):[...Array(r.length).keys()],s=vy(e,4);s.forEach(x=>x!==0||(()=>{throw new Error("step cannot be 0")})),s.length===0&&(s=Array(i.length).fill(1));let o=t.starts.map((x,w)=>eS(x,w,r,i,s)),a=t.ends.map((x,w)=>eS(x,w,r,i,s));if(i.length!==o.length||i.length!==a.length)throw new Error("start, ends and axes should have the same number of elements");if(i.length!==r.length)for(let x=0;x<r.length;++x)i.includes(x)||(o.splice(x,0,0),a.splice(x,0,r[x]),s.splice(x,0,1));let l=s.map(x=>Math.sign(x));s.forEach((x,w,S)=>{if(x<0){let M=(a[w]-o[w])/x,T=o[w],P=T+M*s[w];o[w]=P,a[w]=T,S[w]=-x}});let u=r.slice(0);i.forEach((x,w)=>{u[x]=Math.ceil((a[x]-o[x])/s[x])});let c={dims:u,dataType:e[0].dataType},d=Et("output",e[0].dataType,u.length),h=qe("input",e[0].dataType,e[0].dims.length),m=Ue.size(u),g=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:o.length},{name:"signs",type:"i32",length:l.length},{name:"steps",type:"u32",length:s.length}],v=[{type:12,data:m},{type:12,data:o},{type:6,data:l},{type:12,data:s},...It(e[0].dims,u)],y=x=>`
      ${x.registerUniforms(g).declareVariables(h,d)}
        ${k3(h,d,r)}
        ${x.mainStart()}
          ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
          let output_indices = ${d.offsetToIndices("global_idx")};
          let input_indices = calculateInputIndices(output_indices);
          ${d.setByOffset("global_idx",h.getByIndices("input_indices"))}
      }`;return{name:"Slice",shaderCache:{hint:`${l.length}_${o.length}_${s.length}`,inputDependencies:["rank"]},getShaderSource:y,getRunData:()=>({outputs:[c],dispatchGroup:{x:Math.ceil(n/64)},programUniforms:v})}},AY=(e,t)=>{A3(e.inputs,t);let r=O3(e.inputs,t);e.compute(I3(e.inputs,r),{inputs:[0]})},OY=e=>{let t=e.starts,r=e.ends,n=e.axes;return Tr({starts:t,ends:r,axes:n})}}),j3,$3,kY,IY,Pve=at(()=>{Bt(),Jt(),Dn(),id(),er(),j3=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},$3=(e,t)=>{let r=e.inputs[0],n=r.dims,i=Ue.size(n),s=n.length,o=Ue.normalizeAxis(t.axis,s),a=o<n.length-1,l,u=[];a?(u=Array.from({length:s},(E,A)=>A),u[o]=s-1,u[s-1]=o,l=e.compute(eo(r,u),{inputs:[r],outputs:[-1]})[0]):l=r;let c=l.dims,d=c[s-1],h=i/d,m=wn(d),g=d/m,v=64;h===1&&(v=256);let y=(E,A)=>A===4?`max(max(${E}.x, ${E}.y), max(${E}.z, ${E}.w))`:A===2?`max(${E}.x, ${E}.y)`:A===3?`max(max(${E}.x, ${E}.y), ${E}.z)`:E,x=qe("x",l.dataType,l.dims,m),w=Et("result",l.dataType,l.dims,m),S=x.type.value,M=di(l.dataType)==="f32"?`var threadMax = ${S}(-3.402823e+38f);`:`var threadMax = ${S}(-65504.0h);`,T=E=>`
      var<workgroup> rowMaxShared : ${S};
      var<workgroup> rowSumShared : ${S};
      var<workgroup> threadShared : array<${S}, ${v}>;

      fn getValue(row: i32, col: i32, row_stride: i32) -> ${S} {
        let index = row * row_stride + col;
        return x[index];
      }

      fn setValue(row: i32, col: i32, row_stride: i32, value: ${S}) {
        let index = row * row_stride + col;
        result[index] = value;
      }
      ${E.registerUniform("packedCols","i32").declareVariables(x,w)}
      ${E.mainStart(v)}
        let gindex = i32(global_idx);
        let lindex = i32(local_idx);
        const wg = ${v};
        let row = gindex / wg;
        let cols = uniforms.packedCols;
        let row_stride : i32 = uniforms.packedCols;

        // find the rows max
        ${M}
        for (var col = lindex; col < cols; col += wg) {
          let value = getValue(row, col, row_stride);
          threadMax = max(threadMax, value);
        }
        if (lindex < cols) {
          threadShared[lindex] = threadMax;
        }
        workgroupBarrier();

        var reduceSize = min(cols, wg);
        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
          reduceSize = currSize + (reduceSize & 1);
          if (lindex < currSize) {
            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowMaxShared = ${S}(${y("threadShared[0]",m)});
        }
        workgroupBarrier();

        // find the rows sum
        var threadSum = ${S}(0.0);
        for (var col = lindex; col < cols; col += wg) {
          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);
          threadSum += subExp;
        }
        threadShared[lindex] = threadSum;
        workgroupBarrier();

        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {
          if (lindex < currSize) {
            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowSumShared = ${S}(${Xc("threadShared[0]",m)});
        }
        workgroupBarrier();

        // calculate final value for each element in the row
        for (var col = lindex; col < cols; col += wg) {
          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;
          setValue(row, col, row_stride, value);
        }
      }`,P=e.compute({name:"Softmax",shaderCache:{hint:`${m};${v}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:c,dataType:l.dataType}],dispatchGroup:{x:h},programUniforms:[{type:6,data:g}]}),getShaderSource:T},{inputs:[l],outputs:[a?-1:0]})[0];a&&e.compute(eo(P,u),{inputs:[P]})},kY=(e,t)=>{j3(e.inputs),$3(e,t)},IY=e=>Tr({axis:e.axis})}),tS,N3,D3,R3,jY,Eve=at(()=>{Bt(),Jt(),er(),tS=e=>Array.from(e.getBigInt64Array(),Number),N3=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==10&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, float16, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(tS(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},D3=(e,t)=>{let r=[];for(let n=0;n<e.length;++n)r.push(e[n]*t[n]);return r},R3=(e,t)=>{let r=e[0].dims,n=t??tS(e[1]),i=D3(r,n),s=Ue.size(i),o=e[0].dataType,a=qe("input",o,r.length),l=Et("output",o,i.length),u=c=>`
      const inputShape = ${a.indices(...r)};
      ${c.registerUniform("output_size","u32").declareVariables(a,l)}
      ${c.mainStart()}
      ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let output_indices = ${l.offsetToIndices("global_idx")};
      var input_indices: ${a.type.indices};
      for (var i = 0; i < ${r.length}; i++) {
        let input_dim_i = ${a.indicesGet("uniforms.input_shape","i")};
        let input_dim_value = ${l.indicesGet("output_indices","i")}  % input_dim_i;

        ${a.indicesSet("input_indices","i","input_dim_value")}
      }
      ${l.setByOffset("global_idx",a.getByIndices("input_indices"))}
    }`;return{name:"Tile",shaderCache:{hint:`${n}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:[{type:12,data:s},...It(e[0].dims,i)]}),getShaderSource:u}},jY=e=>{N3(e.inputs),e.compute(R3(e.inputs),{inputs:[0]})}}),L3,F3,$Y,Cve=at(()=>{Bt(),Jt(),er(),L3=(e,t,r,n,i)=>{let s=Et("output_data",i,r.length,4),o=qe("a_data",t[1].dataType,t[1].dims.length,4),a=qe("b_data",t[2].dataType,t[2].dims.length,4),l=qe("c_data",t[0].dataType,t[0].dims.length,4),u,c=(d,h,m)=>`select(${h}, ${d}, ${m})`;if(!n)u=s.setByOffset("global_idx",c(o.getByOffset("global_idx"),a.getByOffset("global_idx"),l.getByOffset("global_idx")));else{let d=(h,m,g="")=>{let v=`a_data[index_a${m}][component_a${m}]`,y=`b_data[index_b${m}][component_b${m}]`,x=`bool(c_data[index_c${m}] & (0xffu << (component_c${m} * 8)))`;return`
            let output_indices${m} = ${s.offsetToIndices(`global_idx * 4u + ${m}u`)};
            let offset_a${m} = ${o.broadcastedIndicesToOffset(`output_indices${m}`,s)};
            let offset_b${m} = ${a.broadcastedIndicesToOffset(`output_indices${m}`,s)};
            let offset_c${m} = ${l.broadcastedIndicesToOffset(`output_indices${m}`,s)};
            let index_a${m} = offset_a${m} / 4u;
            let index_b${m} = offset_b${m} / 4u;
            let index_c${m} = offset_c${m} / 4u;
            let component_a${m} = offset_a${m} % 4u;
            let component_b${m} = offset_b${m} % 4u;
            let component_c${m} = offset_c${m} % 4u;
            ${h}[${m}] = ${g}(${c(v,y,x)});
          `};i===9?u=`
            var data = vec4<u32>(0);
            ${d("data",0,"u32")}
            ${d("data",1,"u32")}
            ${d("data",2,"u32")}
            ${d("data",3,"u32")}
            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:u=`
            ${d("output_data[global_idx]",0)}
            ${d("output_data[global_idx]",1)}
            ${d("output_data[global_idx]",2)}
            ${d("output_data[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(l,o,a,s)}
        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${u}
      }`},F3=e=>{let t=e[1].dims,r=e[2].dims,n=e[0].dims,i=e[1].dataType,s=!(Ue.areEqual(t,r)&&Ue.areEqual(r,n)),o=t,a=Ue.size(t);if(s){let u=Om.calcShape(Om.calcShape(t,r,!1),n,!1);if(!u)throw new Error("Can't perform where op on the given tensors");o=u,a=Ue.size(o)}let l=Math.ceil(a/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:u=>L3(u,e,o,s,i),getRunData:()=>({outputs:[{dims:o,dataType:i}],dispatchGroup:{x:Math.ceil(a/64/4)},programUniforms:[{type:12,data:l},...It(n,t,r,o)]})}},$Y=e=>{e.compute(F3(e.inputs))}}),NY,Ave=at(()=>{Vge(),KI(),Wge(),Gge(),qge(),Hge(),Kge(),Zge(),tve(),rve(),nve(),ive(),sve(),ove(),ave(),lve(),uve(),cve(),dve(),fve(),hve(),pve(),mve(),gve(),vve(),eY(),yve(),_ve(),bve(),wve(),xve(),HI(),Mve(),sY(),Tve(),Sve(),Pve(),nY(),Eve(),id(),XI(),Cve(),NY=new Map([["Abs",[C7]],["Acos",[A7]],["Acosh",[O7]],["Add",[cX]],["ArgMax",[T7,CO]],["ArgMin",[M7,CO]],["Asin",[k7]],["Asinh",[I7]],["Atan",[j7]],["Atanh",[$7]],["Attention",[S7]],["AveragePool",[pY,hY]],["BatchNormalization",[P7]],["BiasAdd",[E7]],["BiasSplitGelu",[uX]],["Cast",[D7,N7]],["Ceil",[L7]],["Clip",[R7]],["Concat",[bX,wX]],["Conv",[$O,jO]],["ConvTranspose",[kX,OX]],["Cos",[F7]],["Cosh",[B7]],["CumSum",[IX,jX]],["DepthToSpace",[$X,NX]],["DequantizeLinear",[wY,xY]],["Div",[dX]],["Einsum",[DX,RX]],["Elu",[z7,Ny]],["Equal",[fX]],["Erf",[U7]],["Exp",[V7]],["Expand",[LX]],["FastGelu",[FX]],["Floor",[W7]],["FusedConv",[$O,jO]],["Gather",[zX,BX]],["GatherElements",[HX,qX]],["GatherBlockQuantized",[WX,GX]],["GatherND",[UX,VX]],["Gelu",[G7]],["Gemm",[XX,KX]],["GlobalAveragePool",[gY,mY]],["GlobalMaxPool",[bY,_Y]],["Greater",[gX]],["GreaterOrEqual",[yX]],["GridSample",[YX,QX]],["GroupQueryAttention",[oY]],["HardSigmoid",[Z7,J7]],["InstanceNormalization",[aY]],["LayerNormalization",[lY]],["LeakyRelu",[q7,Ny]],["Less",[vX]],["LessOrEqual",[_X]],["Log",[aX]],["MatMul",[uY]],["MatMulNBits",[cY,dY]],["MaxPool",[vY,yY]],["Mul",[hX]],["MultiHeadAttention",[ZX,JX]],["Neg",[K7]],["Not",[H7]],["Pad",[fY]],["Pow",[pX]],["QuickGelu",[lX,Ny]],["Range",[MY]],["Reciprocal",[X7]],["ReduceMin",[y7]],["ReduceMean",[h7]],["ReduceMax",[v7]],["ReduceSum",[b7]],["ReduceProd",[_7]],["ReduceL1",[p7]],["ReduceL2",[m7]],["ReduceLogSum",[x7]],["ReduceLogSumExp",[g7]],["ReduceSumSquare",[w7]],["Relu",[Y7]],["Resize",[PY,EY]],["RotaryEmbedding",[iY]],["ScatterND",[SY,TY]],["Sigmoid",[Q7]],["Sin",[eX]],["Sinh",[tX]],["Slice",[AY,OY]],["SkipLayerNormalization",[CY]],["Split",[tY,rY]],["Sqrt",[rX]],["Softmax",[kY,IY]],["Sub",[mX]],["Tan",[nX]],["Tanh",[iX]],["ThresholdedRelu",[oX,Ny]],["Tile",[jY]],["Transpose",[t7,r7]],["Where",[$Y]]])}),DY,Ove=at(()=>{Ia(),Du(),er(),DY=class{constructor(e){this.backend=e,this.repo=new Map,this.attributesBound=!1}getArtifact(e){return this.repo.get(e)}setArtifact(e,t){this.repo.set(e,t)}run(e,t,r,n,i){Ea(e.programInfo.name);let s=this.backend.device,o=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let a=[];for(let u of t)a.push({binding:a.length,resource:{buffer:u.buffer}});for(let u of r)a.push({binding:a.length,resource:{buffer:u.buffer}});i&&a.push({binding:a.length,resource:i});let l=s.createBindGroup({layout:e.computePipeline.getBindGroupLayout(0),entries:a,label:e.programInfo.name});if(this.backend.sessionStatus==="capturing"){let u={kernelId:this.backend.currentKernelId,computePipeline:e.computePipeline,bindGroup:l,dispatchGroup:n};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(u)}o.setPipeline(e.computePipeline),o.setBindGroup(0,l),o.dispatchWorkgroups(...n),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),Lo(e.programInfo.name)}dispose(){}build(e,t){Ea(e.name);let r=this.backend.device,n=[];[{feature:"shader-f16",extension:"f16"},{feature:"subgroups",extension:"subgroups"}].forEach(u=>{r.features.has(u.feature)&&n.push(`enable ${u.extension};`)});let i=e7(t,this.backend.device.limits),s=e.getShaderSource(i),o=`${n.join(`
`)}
${i.additionalImplementations}
${s}`,a=r.createShaderModule({code:o,label:e.name});fr("verbose",()=>`[WebGPU] ${e.name} shader code: ${o}`);let l=r.createComputePipeline({compute:{module:a,entryPoint:"main"},layout:"auto",label:e.name});return Lo(e.name),{programInfo:e,computePipeline:l,uniformVariablesInfo:i.variablesInfo}}normalizeDispatchGroupSize(e){let t=typeof e=="number"?e:e.x,r=typeof e=="number"?1:e.y||1,n=typeof e=="number"?1:e.z||1,i=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(t<=i&&r<=i&&n<=i)return[t,r,n];let s=t*r*n,o=Math.ceil(Math.sqrt(s));if(o>i){if(o=Math.ceil(Math.cbrt(s)),o>i)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[o,o,o]}else return[o,o,1]}}}),RY={};hg(RY,{WebGpuBackend:()=>LY});var B3,z3,U3,LY,kve=at(()=>{Ia(),Bt(),Du(),X9(),zge(),Ave(),Ove(),B3=(e,t)=>{if(t.length!==e.length)throw new Error(`inputDependencies length ${t.length} is not equal to inputTensors length ${e.length}.`);let r=[];for(let n=0;n<e.length;++n){let i=e[n].dataType;switch(t[n]){case"none":{r.push("");break}case"type":{r.push(`${i}`);break}case"rank":{let s=e[n].dims.length;r.push(`${i};${s}`);break}case"dims":{let s=e[n].dims.join(",");r.push(`${i};${s}`);break}default:throw new Error(`unsupported input dependency: ${t[n]}`)}}return r.join("|")},z3=(e,t,r)=>{let n=e.name;return e.shaderCache?.hint&&(n+="["+e.shaderCache.hint+"]"),n+=":"+r+`:${B3(t,e.shaderCache?.inputDependencies??new Array(t.length).fill("dims"))}`,n},U3=class{constructor(e){e&&(this.architecture=e.architecture,this.vendor=e.vendor)}isArchitecture(e){return this.architecture===e}isVendor(e){return this.vendor===e}},LY=class{constructor(){this.currentSessionId=null,this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.maxDispatchNumber=16,this.pendingDispatchNumber=0,this.pendingKernels=[],this.pendingQueries=new Map,this.sessionStatus="default",this.capturedCommandList=new Map,this.capturedPendingKernels=new Map,this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let e=this.kernelCustomData.get(this.currentKernelId);return e||(e={},this.kernelCustomData.set(this.currentKernelId,e)),e}async initialize(e,t){this.env=e;let r=[],n={requiredLimits:{maxComputeWorkgroupStorageSize:t.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:t.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:t.limits.maxStorageBufferBindingSize,maxBufferSize:t.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:t.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:t.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:t.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:t.limits.maxComputeWorkgroupSizeZ},requiredFeatures:r},i=s=>t.features.has(s)&&r.push(s)&&!0;i("chromium-experimental-timestamp-query-inside-passes")||i("timestamp-query"),i("shader-f16"),i("subgroups"),this.device=await t.requestDevice(n),this.adapterInfo=new U3(t.info||await t.requestAdapterInfo()),this.gpuDataManager=J9(this),this.programManager=new DY(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,VI(e.logLevel,!!e.debug),this.device.onuncapturederror=s=>{s.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${s.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:t,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let e=this.getCommandEncoder(),t={};this.queryType==="at-passes"&&(t.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=e.beginComputePass(t)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;Ea(),this.endComputePass();let e;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),e=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(e,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,e,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&e.mapAsync(GPUMapMode.READ).then(()=>{let t=new BigUint64Array(e.getMappedRange()),r=this.pendingQueries.get(e);for(let n=0;n<t.length/2;n++){let i=r[n],s=i.kernelId,o=this.kernels.get(s),a=o.kernelType,l=o.kernelName,u=i.programName,c=i.inputTensorViews,d=i.outputTensorViews,h=t[n*2],m=t[n*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=h);let g=Number(h-this.queryTimeBase),v=Number(m-this.queryTimeBase);if(!Number.isSafeInteger(g)||!Number.isSafeInteger(v))throw new RangeError("incorrect timestamp range");if(this.env.webgpu.profiling?.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:c.map(y=>({dims:y.dims,dataType:wu(y.dataType)})),outputsMetadata:d.map(y=>({dims:y.dims,dataType:wu(y.dataType)})),kernelId:s,kernelType:a,kernelName:l,programName:u,startTime:g,endTime:v});else{let y="";c.forEach((w,S)=>{y+=`input[${S}]: [${w.dims}] | ${wu(w.dataType)}, `});let x="";d.forEach((w,S)=>{x+=`output[${S}]: [${w.dims}] | ${wu(w.dataType)}, `}),console.log(`[profiling] kernel "${s}|${a}|${l}|${u}" ${y}${x}execution time: ${v-g} ns`)}x_("GPU",`${u}::${h}::${m}`)}e.unmap(),this.pendingQueries.delete(e)}),Lo()}run(e,t,r,n,i,s){Ea(e.name);let o=[];for(let w=0;w<t.length;++w){let S=t[w].data;if(S===0)continue;let M=this.gpuDataManager.get(S);if(!M)throw new Error(`no GPU data for input: ${S}`);o.push(M)}let{outputs:a,dispatchGroup:l,programUniforms:u}=e.getRunData(t),c=r.length===0?a.map((w,S)=>S):r;if(c.length!==a.length)throw new Error(`Output size ${c.length} must be equal to ${a.length}.`);let d=[],h=[];for(let w=0;w<a.length;++w){if(!Number.isInteger(c[w])||c[w]<-3||c[w]>=s)throw new Error(`Invalid output index: ${c[w]}`);if(c[w]===-3)continue;let S=c[w]===-1,M=c[w]===-2,T=S||M?i(a[w].dataType,a[w].dims):n(c[w],a[w].dataType,a[w].dims);if(d.push(T),T.data===0)continue;let P=this.gpuDataManager.get(T.data);if(!P)throw new Error(`no GPU data for output: ${T.data}`);if(S&&this.temporaryData.push(P),M){let E=this.kernelPersistentData.get(this.currentKernelId);E||(E=[],this.kernelPersistentData.set(this.currentKernelId,E)),E.push(P)}h.push(P)}if(o.length!==t.length||h.length!==d.length){if(h.length===0)return Lo(e.name),d;throw new Error(`Program ${e.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let m;if(u){let w=0,S=[];u.forEach(E=>{let A=typeof E.data=="number"?[E.data]:E.data;if(A.length===0)return;let L=E.type===10?2:4,B,V;E.type===10?(V=A.length>4?16:A.length>2?8:A.length*L,B=A.length>4?16:L*A.length):(V=A.length<=2?A.length*L:16,B=16),w=Math.ceil(w/V)*V,S.push(w);let G=E.type===10?8:4;w+=A.length>4?Math.ceil(A.length/G)*B:A.length*L});let M=16;w=Math.ceil(w/M)*M;let T=new ArrayBuffer(w);u.forEach((E,A)=>{let L=S[A],B=typeof E.data=="number"?[E.data]:E.data;if(E.type===6)new Int32Array(T,L,B.length).set(B);else if(E.type===12)new Uint32Array(T,L,B.length).set(B);else if(E.type===10)new Uint16Array(T,L,B.length).set(B);else if(E.type===1)new Float32Array(T,L,B.length).set(B);else throw new Error(`Unsupported uniform type: ${wu(E.type)}`)});let P=this.gpuDataManager.create(w,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(P.buffer,0,T,0,w),this.gpuDataManager.release(P.id),m={offset:0,size:w,buffer:P.buffer}}let g=this.programManager.normalizeDispatchGroupSize(l),v=g[1]===1&&g[2]===1,y=z3(e,t,v),x=this.programManager.getArtifact(y);if(x||(x=this.programManager.build(e,g),this.programManager.setArtifact(y,x),fr("info",()=>`[artifact] key: ${y}, programName: ${e.name}`)),u&&x.uniformVariablesInfo){if(u.length!==x.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${x.uniformVariablesInfo.length}, got ${u.length} in program "${x.programInfo.name}".`);for(let w=0;w<u.length;w++){let S=u[w],M=S.type,T=typeof S.data=="number"?1:S.data.length,[P,E]=x.uniformVariablesInfo[w];if(M!==P||T!==E)throw new Error(`Uniform variable ${w} mismatch: expect type ${P} with size ${E}, got type ${M} with size ${T} in program "${x.programInfo.name}".`)}}if(fr("info",()=>`[ProgramManager] run "${e.name}" (key=${y}) with ${g[0]}x${g[1]}x${g[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let w={kernelId:this.currentKernelId,programName:x.programInfo.name,inputTensorViews:t,outputTensorViews:d};this.pendingKernels.push(w),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(w)}return this.programManager.run(x,o,h,g,m),Lo(e.name),d}upload(e,t){this.gpuDataManager.upload(e,t)}memcpy(e,t){this.gpuDataManager.memcpy(e,t)}async download(e,t){await this.gpuDataManager.download(e,t)}alloc(e){return this.gpuDataManager.create(e).id}free(e){return this.gpuDataManager.release(e)}createKernel(e,t,r,n){let i=NY.get(e);if(!i)throw new Error(`kernel not implemented: ${e}`);let s={kernelType:e,kernelName:n,kernelEntry:i[0],attributes:[i[1],r]};this.kernels.set(t,s)}releaseKernel(e){let t=this.kernelPersistentData.get(e);if(t){for(let r of t)this.gpuDataManager.release(r.id);this.kernelPersistentData.delete(e)}this.kernelCustomData.delete(e),this.kernels.delete(e)}computeKernel(e,t,r){let n=this.kernels.get(e);if(!n)throw new Error(`kernel not created: ${e}`);let i=n.kernelType,s=n.kernelName,o=n.kernelEntry,a=n.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${i}] ${s}" is not allowed to be called recursively`);this.currentKernelId=e,a[0]&&(a[1]=a[0](a[1]),a[0]=void 0),fr("info",()=>`[WebGPU] Start to run kernel "[${i}] ${s}"...`);let l=this.env.debug;this.temporaryData=[];try{return l&&this.device.pushErrorScope("validation"),o(t,a[1]),0}catch(u){return r.push(Promise.resolve(`[WebGPU] Kernel "[${i}] ${s}" failed. ${u}`)),1}finally{l&&r.push(this.device.popErrorScope().then(u=>u?`GPU validation error for kernel "[${i}] ${s}": ${u.message}`:null));for(let u of this.temporaryData)this.gpuDataManager.release(u.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(e,t,r,n){let i=this.sessionExternalDataMapping.get(e);i||(i=new Map,this.sessionExternalDataMapping.set(e,i));let s=i.get(t),o=this.gpuDataManager.registerExternalBuffer(r,n,s);return i.set(t,[o,r]),o}unregisterBuffers(e){let t=this.sessionExternalDataMapping.get(e);t&&(t.forEach(r=>this.gpuDataManager.unregisterExternalBuffer(r[0])),this.sessionExternalDataMapping.delete(e))}getBuffer(e){let t=this.gpuDataManager.get(e);if(!t)throw new Error(`no GPU data for buffer: ${e}`);return t.buffer}createDownloader(e,t,r){return async()=>{let n=await SO(this,e,t);return WI(n.buffer,r)}}writeTimestamp(e){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,e)}setQueryType(){this.queryType="none",(this.env.webgpu.profiling?.mode==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){fr("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){fr("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){fr("info","replay"),this.sessionStatus="replaying";let e=this.capturedCommandList.get(this.currentSessionId),t=this.capturedPendingKernels.get(this.currentSessionId),r=e.length;this.pendingKernels=[];for(let n=0;n<r;n++){let i=this.getComputePassEncoder(),s=e[n];this.writeTimestamp(this.pendingDispatchNumber*2),i.setPipeline(s.computePipeline),i.setBindGroup(0,s.bindGroup),i.dispatchWorkgroups(...s.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(t[n]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onCreateSession(){this.gpuDataManager.onCreateSession()}onReleaseSession(e){this.unregisterBuffers(e),this.capturedCommandList.has(e)&&this.capturedCommandList.delete(e),this.capturedPendingKernels.has(e)&&this.capturedPendingKernels.delete(e),this.gpuDataManager.onReleaseSession(e)}onRunStart(e){this.currentSessionId=e,this.setQueryType()}}}),FY={};hg(FY,{init:()=>BY});var Gb,V3,BY,Ive=at(()=>{Bt(),Du(),Jt(),Bge(),Gb=class zY{constructor(t,r,n,i){this.module=t,this.dataType=r,this.data=n,this.dims=i}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let t=Ue.size(this.dims);return t===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let t=Ue.size(this.dims);return t===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let t=Ue.size(this.dims);return t===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)}getUint16Array(){if(this.dataType!==10&&this.dataType!==4)throw new Error("Invalid data type");let t=Ue.size(this.dims);return t===0?new Uint16Array:new Uint16Array(this.module.HEAP8.buffer,this.data,t)}reshape(t){if(Ue.size(t)!==Ue.size(this.dims))throw new Error("Invalid new shape");return new zY(this.module,this.dataType,this.data,t)}},V3=class{constructor(e,t,r){this.module=e,this.backend=t,this.customDataOffset=0,this.customDataSize=0,this.adapterInfo=t.adapterInfo;let n=e.PTR_SIZE,i=r/e.PTR_SIZE,s=n===4?"i32":"i64";this.opKernelContext=Number(e.getValue(n*i++,s));let o=Number(e.getValue(n*i++,s));this.outputCount=Number(e.getValue(n*i++,s)),this.customDataOffset=Number(e.getValue(n*i++,"*")),this.customDataSize=Number(e.getValue(n*i++,s));let a=[];for(let l=0;l<o;l++){let u=Number(e.getValue(n*i++,s)),c=Number(e.getValue(n*i++,"*")),d=Number(e.getValue(n*i++,s)),h=[];for(let m=0;m<d;m++)h.push(Number(e.getValue(n*i++,s)));a.push(new Gb(e,u,c,h))}this.inputs=a}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}compute(e,t){let r=t?.inputs?.map(o=>typeof o=="number"?this.inputs[o]:o)??this.inputs,n=t?.outputs??[],i=(o,a,l)=>new Gb(this.module,a,this.output(o,l),l),s=(o,a)=>{let l=jf(o,a);if(!l)throw new Error(`Unsupported data type: ${o}`);let u=l>0?this.backend.gpuDataManager.create(l).id:0;return new Gb(this.module,o,u,a)};return this.backend.run(e,r,n,i,s,this.outputCount)}output(e,t){let r=this.module.stackSave();try{let n=this.module.PTR_SIZE,i=n===4?"i32":"i64",s=this.module.stackAlloc((1+t.length)*n);this.module.setValue(s,t.length,i);for(let o=0;o<t.length;o++)this.module.setValue(s+n*(o+1),t[o],i);return this.module._JsepOutput(this.opKernelContext,e,s)}catch(n){throw new Error(`Failed to generate kernel's output[${e}] with dims [${t}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${n}`)}finally{this.module.stackRestore(r)}}},BY=async(e,t,r,n)=>{let i=t.jsepInit;if(!i)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e==="webgpu"){let s=(kve(),w_(RY)).WebGpuBackend,o=new s;await o.initialize(r,n),i("webgpu",[o,a=>o.alloc(Number(a)),a=>o.free(a),(a,l,u,c=!1)=>{if(c)fr("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${Number(a)}, dst=${Number(l)}, size=${Number(u)}`),o.memcpy(Number(a),Number(l));else{fr("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${Number(a)}, gpuDataId=${Number(l)}, size=${Number(u)}`);let d=t.HEAPU8.subarray(Number(a>>>0),Number(a>>>0)+Number(u));o.upload(Number(l),d)}},async(a,l,u)=>{fr("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${a}, dataOffset=${l}, size=${u}`),await o.download(Number(a),()=>t.HEAPU8.subarray(Number(l)>>>0,Number(l+u)>>>0))},(a,l,u)=>o.createKernel(a,Number(l),u,t.UTF8ToString(t._JsepGetNodeName(Number(l)))),a=>o.releaseKernel(a),(a,l,u,c)=>{fr("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${u}, kernel=${a}, contextDataOffset=${l}`);let d=new V3(t,o,Number(l));return o.computeKernel(Number(a),d,c)},()=>o.captureBegin(),()=>o.captureEnd(),()=>o.replay()])}else{let s=new Q9(r);i("webnn",[s,()=>s.reserveTensorId(),o=>s.releaseTensorId(o),async(o,a,l,u,c)=>s.ensureTensor(o,a,l,u,c),(o,a)=>{s.uploadTensor(o,a)},async(o,a)=>s.downloadTensor(o,a)])}}}),W3,tj,rj,Oc,G3,rS,Jw,nj,ij,nS,sj,oj,aj,UY=at(()=>{Rge(),Lge(),Bt(),ch(),LI(),G9(),W3=(e,t)=>{qr()._OrtInit(e,t)!==0&&Or("Can't initialize onnxruntime.")},tj=async e=>{W3(e.wasm.numThreads,Hw(e.logLevel))},rj=async(e,t)=>{qr().asyncInit?.();{let r=(Ive(),w_(FY)).init;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let n=e.webgpu.adapter;if(n){if(typeof n.limits!="object"||typeof n.features!="object"||typeof n.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let i=e.webgpu.powerPreference;if(i!==void 0&&i!=="low-power"&&i!=="high-performance")throw new Error(`Invalid powerPreference setting: "${i}"`);let s=e.webgpu.forceFallbackAdapter;if(s!==void 0&&typeof s!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${s}"`);if(n=await navigator.gpu.requestAdapter({powerPreference:i,forceFallbackAdapter:s}),!n)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}await r("webgpu",qr(),e,n)}if(t==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await r("webnn",qr(),e)}}},Oc=new Map,G3=e=>{let t=qr(),r=t.stackSave();try{let n=t.PTR_SIZE,i=t.stackAlloc(2*n);t._OrtGetInputOutputCount(e,i,i+n)!==0&&Or("Can't get session input/output count.");let s=n===4?"i32":"i64";return[Number(t.getValue(i,s)),Number(t.getValue(i+n,s))]}finally{t.stackRestore(r)}},rS=(e,t)=>{let r=qr(),n=r.stackSave(),i=0;try{let s=r.PTR_SIZE,o=r.stackAlloc(2*s);r._OrtGetInputOutputMetadata(e,t,o,o+s)!==0&&Or("Can't get session input/output metadata.");let a=Number(r.getValue(o,"*"));i=Number(r.getValue(o+s,"*"));let l=r.HEAP32[i/4];if(l===0)return[a,0];let u=r.HEAPU32[i/4+1],c=[];for(let d=0;d<u;d++){let h=Number(r.getValue(i+8+d*s,"*"));c.push(h!==0?r.UTF8ToString(h):Number(r.getValue(i+8+(d+u)*s,"*")))}return[a,l,c]}finally{r.stackRestore(n),i!==0&&r._OrtFree(i)}},Jw=e=>{let t=qr(),r=t._malloc(e.byteLength);if(r===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},nj=async(e,t)=>{let r,n,i=qr();Array.isArray(e)?[r,n]=e:e.buffer===i.HEAPU8.buffer?[r,n]=[e.byteOffset,e.byteLength]:[r,n]=Jw(e);let s=0,o=0,a=0,l=[],u=[],c=[];try{if([o,l]=await W9(t),t?.externalData&&i.mountExternalData){let M=[];for(let T of t.externalData){let P=typeof T=="string"?T:T.path;M.push(UI(typeof T=="string"?T:T.data).then(E=>{i.mountExternalData(P,E)}))}await Promise.all(M)}for(let M of t?.executionProviders??[])if((typeof M=="string"?M:M.name)==="webnn"){if(i.shouldTransferToMLTensor=!1,typeof M!="string"){let T=M,P=T?.context,E=T?.gpuDevice,A=T?.deviceType,L=T?.powerPreference;P?i.currentContext=P:E?i.currentContext=await i.webnnCreateMLContext(E):i.currentContext=await i.webnnCreateMLContext({deviceType:A,powerPreference:L})}else i.currentContext=await i.webnnCreateMLContext();break}s=await i._OrtCreateSession(r,n,o),i.webgpuOnCreateSession?.(s),s===0&&Or("Can't create a session."),i.jsepOnCreateSession?.(),i.currentContext&&(i.webnnRegisterMLContext(s,i.currentContext),i.currentContext=void 0,i.shouldTransferToMLTensor=!0);let[d,h]=G3(s),m=!!t?.enableGraphCapture,g=[],v=[],y=[],x=[],w=[];for(let M=0;M<d;M++){let[T,P,E]=rS(s,M);T===0&&Or("Can't get an input name."),u.push(T);let A=i.UTF8ToString(T);g.push(A),y.push(P===0?{name:A,isTensor:!1}:{name:A,isTensor:!0,type:wu(P),shape:E})}for(let M=0;M<h;M++){let[T,P,E]=rS(s,M+d);T===0&&Or("Can't get an output name."),c.push(T);let A=i.UTF8ToString(T);v.push(A),x.push(P===0?{name:A,isTensor:!1}:{name:A,isTensor:!0,type:wu(P),shape:E});{if(m&&t?.preferredOutputLocation===void 0){w.push("gpu-buffer");continue}let L=typeof t?.preferredOutputLocation=="string"?t.preferredOutputLocation:t?.preferredOutputLocation?.[A]??"cpu";if(L!=="cpu"&&L!=="cpu-pinned"&&L!=="gpu-buffer"&&L!=="ml-tensor")throw new Error(`Not supported preferred output location: ${L}.`);if(m&&L!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${L}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`);w.push(L)}}let S=null;return w.some(M=>M==="gpu-buffer"||M==="ml-tensor")&&(a=i._OrtCreateBinding(s),a===0&&Or("Can't create IO binding."),S={handle:a,outputPreferredLocations:w,outputPreferredLocationsEncoded:w.map(M=>MO(M))}),Oc.set(s,[s,u,c,S,m,!1]),[s,g,v,y,x]}catch(d){throw u.forEach(h=>i._OrtFree(h)),c.forEach(h=>i._OrtFree(h)),a!==0&&i._OrtReleaseBinding(a)!==0&&Or("Can't release IO binding."),s!==0&&i._OrtReleaseSession(s)!==0&&Or("Can't release session."),d}finally{i._free(r),o!==0&&i._OrtReleaseSessionOptions(o)!==0&&Or("Can't release session options."),l.forEach(d=>i._free(d)),i.unmountExternalData?.()}},ij=e=>{let t=qr(),r=Oc.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);let[n,i,s,o,a]=r;o&&(a&&t._OrtClearBoundOutputs(o.handle)!==0&&Or("Can't clear bound outputs."),t._OrtReleaseBinding(o.handle)!==0&&Or("Can't release IO binding.")),t.jsepOnReleaseSession?.(e),t.webnnOnReleaseSession?.(e),t.webgpuOnReleaseSession?.(e),i.forEach(l=>t._OrtFree(l)),s.forEach(l=>t._OrtFree(l)),t._OrtReleaseSession(n)!==0&&Or("Can't release session."),Oc.delete(e)},nS=async(e,t,r,n,i,s,o=!1)=>{if(!e){t.push(0);return}let a=qr(),l=a.PTR_SIZE,u=e[0],c=e[1],d=e[3],h=d,m,g;if(u==="string"&&(d==="gpu-buffer"||d==="ml-tensor"))throw new Error("String tensor is not supported on GPU.");if(o&&d!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${s} when enableGraphCapture is true.`);if(d==="gpu-buffer"){let x=e[2].gpuBuffer;g=jf(tm(u),c);{let w=a.jsepRegisterBuffer;if(!w)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');m=w(n,s,x,g)}}else if(d==="ml-tensor"){let x=e[2].mlTensor;g=jf(tm(u),c);let w=a.webnnRegisterMLTensor;if(!w)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');m=w(n,x,tm(u),c)}else{let x=e[2];if(Array.isArray(x)){g=l*x.length,m=a._malloc(g),r.push(m);for(let w=0;w<x.length;w++){if(typeof x[w]!="string")throw new TypeError(`tensor data at index ${w} is not a string`);a.setValue(m+w*l,_a(x[w],r),"*")}}else{let w=a.webnnIsGraphInput;if(u!=="string"&&w){let S=a.UTF8ToString(i);if(w(n,S)){let M=tm(u);g=jf(M,c),h="ml-tensor";let T=a.webnnCreateTemporaryTensor,P=a.webnnUploadTensor;if(!T||!P)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');let E=await T(n,M,c);P(E,new Uint8Array(x.buffer,x.byteOffset,x.byteLength)),m=E}else g=x.byteLength,m=a._malloc(g),r.push(m),a.HEAPU8.set(new Uint8Array(x.buffer,x.byteOffset,g),m)}else g=x.byteLength,m=a._malloc(g),r.push(m),a.HEAPU8.set(new Uint8Array(x.buffer,x.byteOffset,g),m)}}let v=a.stackSave(),y=a.stackAlloc(4*c.length);try{c.forEach((w,S)=>a.setValue(y+S*l,w,l===4?"i32":"i64"));let x=a._OrtCreateTensor(tm(u),m,g,y,c.length,MO(h));x===0&&Or(`Can't create tensor for input/output. session=${n}, index=${s}.`),t.push(x)}finally{a.stackRestore(v)}},sj=async(e,t,r,n,i,s)=>{let o=qr(),a=o.PTR_SIZE,l=Oc.get(e);if(!l)throw new Error(`cannot run inference. invalid session id: ${e}`);let u=l[0],c=l[1],d=l[2],h=l[3],m=l[4],g=l[5],v=t.length,y=n.length,x=0,w=[],S=[],M=[],T=[],P=o.stackSave(),E=o.stackAlloc(v*a),A=o.stackAlloc(v*a),L=o.stackAlloc(y*a),B=o.stackAlloc(y*a);try{[x,w]=V9(s);for(let z=0;z<v;z++)await nS(r[z],S,T,e,c[t[z]],t[z],m);for(let z=0;z<y;z++)await nS(i[z],M,T,e,d[n[z]],v+n[z],m);for(let z=0;z<v;z++)o.setValue(E+z*a,S[z],"*"),o.setValue(A+z*a,c[t[z]],"*");for(let z=0;z<y;z++)o.setValue(L+z*a,M[z],"*"),o.setValue(B+z*a,d[n[z]],"*");if(h&&!g){let{handle:z,outputPreferredLocations:K,outputPreferredLocationsEncoded:J}=h;if(c.length!==v)throw new Error(`input count from feeds (${v}) is expected to be always equal to model's input count (${c.length}).`);for(let X=0;X<v;X++){let Q=t[X];await o._OrtBindInput(z,c[Q],S[X])!==0&&Or(`Can't bind input[${X}] for session=${e}.`)}for(let X=0;X<y;X++){let Q=n[X];i[X]?.[3]?o._OrtBindOutput(z,d[Q],M[X],0)!==0&&Or(`Can't bind pre-allocated output[${X}] for session=${e}.`):o._OrtBindOutput(z,d[Q],0,J[Q])!==0&&Or(`Can't bind output[${X}] to ${K[X]} for session=${e}.`)}Oc.set(e,[u,c,d,h,m,!0])}o.jsepOnRunStart?.(u),o.webnnOnRunStart?.(u);let V;h?V=await o._OrtRunWithBinding(u,h.handle,y,L,x):V=await o._OrtRun(u,A,E,v,B,y,L,x),V!==0&&Or("failed to call OrtRun().");let G=[];for(let z=0;z<y;z++){let K=Number(o.getValue(L+z*a,"*"));if(K===M[z]){G.push(i[z]);continue}let J=o.stackSave(),X=o.stackAlloc(4*a),Q=!1,W,oe=0;try{o._OrtGetTensorData(K,X,X+a,X+2*a,X+3*a)!==0&&Or(`Can't access output tensor data on index ${z}.`);let ce=a===4?"i32":"i64",D=Number(o.getValue(X,ce));oe=o.getValue(X+a,"*");let U=o.getValue(X+a*2,"*"),te=Number(o.getValue(X+a*3,ce)),ee=[];for(let xe=0;xe<te;xe++)ee.push(Number(o.getValue(U+xe*a,ce)));o._OrtFree(U)!==0&&Or("Can't free memory for tensor dims.");let pe=ee.reduce((xe,Ie)=>xe*Ie,1);W=wu(D);let Oe=h?.outputPreferredLocations[n[z]];if(W==="string"){if(Oe==="gpu-buffer"||Oe==="ml-tensor")throw new Error("String tensor is not supported on GPU.");let xe=[];for(let Ie=0;Ie<pe;Ie++){let Pe=o.getValue(oe+Ie*a,"*"),he=o.getValue(oe+(Ie+1)*a,"*"),re=Ie===pe-1?void 0:he-Pe;xe.push(o.UTF8ToString(Pe,re))}G.push([W,ee,xe,"cpu"])}else if(Oe==="gpu-buffer"&&pe>0){let xe=o.jsepGetBuffer;if(!xe)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let Ie=xe(oe),Pe=jf(D,pe);if(Pe===void 0||!BI(W))throw new Error(`Unsupported data type: ${W}`);Q=!0,G.push([W,ee,{gpuBuffer:Ie,download:o.jsepCreateDownloader(Ie,Pe,W),dispose:()=>{o._OrtReleaseTensor(K)!==0&&Or("Can't release tensor.")}},"gpu-buffer"])}else if(Oe==="ml-tensor"&&pe>0){let xe=o.webnnEnsureTensor,Ie=o.webnnIsInt64Supported;if(!xe||!Ie)throw new Error('preferredLocation "ml-tensor" is not supported without using WebNN.');if(jf(D,pe)===void 0||!zI(W))throw new Error(`Unsupported data type: ${W}`);if(W==="int64"&&!Ie(e))throw new Error('preferredLocation "ml-tensor" for int64 output is not supported by current WebNN Context.');let Pe=await xe(e,oe,D,ee,!1);Q=!0,G.push([W,ee,{mlTensor:Pe,download:o.webnnCreateMLTensorDownloader(oe,W),dispose:()=>{o.webnnReleaseTensorId(oe),o._OrtReleaseTensor(K)}},"ml-tensor"])}else{let xe=FI(W),Ie=new xe(pe);new Uint8Array(Ie.buffer,Ie.byteOffset,Ie.byteLength).set(o.HEAPU8.subarray(oe,oe+Ie.byteLength)),G.push([W,ee,Ie,"cpu"])}}finally{o.stackRestore(J),W==="string"&&oe&&o._free(oe),Q||o._OrtReleaseTensor(K),o.webnnOnRunEnd?.(u)}}return h&&!m&&(o._OrtClearBoundOutputs(h.handle)!==0&&Or("Can't clear bound outputs."),Oc.set(e,[u,c,d,h,m,!1])),G}finally{o.stackRestore(P),S.forEach(V=>o._OrtReleaseTensor(V)),M.forEach(V=>o._OrtReleaseTensor(V)),T.forEach(V=>o._free(V)),x!==0&&o._OrtReleaseRunOptions(x),w.forEach(V=>o._free(V))}},oj=e=>{let t=qr(),r=Oc.get(e);if(!r)throw new Error("invalid session id");let n=r[0],i=t._OrtEndProfiling(n);i===0&&Or("Can't get an profile file name."),t._OrtFree(i)},aj=e=>{let t=[];for(let r of e){let n=r[2];!Array.isArray(n)&&"buffer"in n&&t.push(n.buffer)}return t}}),kc,xo,Hp,yy,_y,qb,iS,Hb,_f,bf,q3,VY,WY,GY,qY,HY,KY,XY,YY=at(()=>{Ia(),UY(),ch(),DI(),kc=()=>!!Zr.wasm.proxy&&typeof document<"u",Hp=!1,yy=!1,_y=!1,Hb=new Map,_f=(e,t)=>{let r=Hb.get(e);r?r.push(t):Hb.set(e,[t])},bf=()=>{if(Hp||!yy||_y||!xo)throw new Error("worker not ready")},q3=e=>{switch(e.data.type){case"init-wasm":Hp=!1,e.data.err?(_y=!0,iS[1](e.data.err)):(yy=!0,iS[0]()),qb&&(URL.revokeObjectURL(qb),qb=void 0);break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t=Hb.get(e.data.type);e.data.err?t.shift()[1](e.data.err):t.shift()[0](e.data.out);break}}},VY=async()=>{if(!yy){if(Hp)throw new Error("multiple calls to 'initWasm()' detected.");if(_y)throw new Error("previous call to 'initWasm()' failed.");if(Hp=!0,kc())return new Promise((e,t)=>{xo?.terminate(),z9().then(([r,n])=>{try{xo=n,xo.onerror=s=>t(s),xo.onmessage=q3,iS=[e,t];let i={type:"init-wasm",in:Zr};!i.in.wasm.wasmPaths&&(r||xO)&&(i.in.wasm.wasmPaths={wasm:new URL("/assets/ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href}),xo.postMessage(i),qb=r}catch(i){t(i)}},t)});try{await RI(Zr.wasm),await tj(Zr),yy=!0}catch(e){throw _y=!0,e}finally{Hp=!1}}},WY=async e=>{if(kc())return bf(),new Promise((t,r)=>{_f("init-ep",[t,r]);let n={type:"init-ep",in:{epName:e,env:Zr}};xo.postMessage(n)});await rj(Zr,e)},GY=async e=>kc()?(bf(),new Promise((t,r)=>{_f("copy-from",[t,r]);let n={type:"copy-from",in:{buffer:e}};xo.postMessage(n,[e.buffer])})):Jw(e),qY=async(e,t)=>{if(kc()){if(t?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return bf(),new Promise((r,n)=>{_f("create",[r,n]);let i={type:"create",in:{model:e,options:{...t}}},s=[];e instanceof Uint8Array&&s.push(e.buffer),xo.postMessage(i,s)})}else return nj(e,t)},HY=async e=>{if(kc())return bf(),new Promise((t,r)=>{_f("release",[t,r]);let n={type:"release",in:e};xo.postMessage(n)});ij(e)},KY=async(e,t,r,n,i,s)=>{if(kc()){if(r.some(o=>o[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(i.some(o=>o))throw new Error("pre-allocated output tensor is not supported for proxy.");return bf(),new Promise((o,a)=>{_f("run",[o,a]);let l=r,u={type:"run",in:{sessionId:e,inputIndices:t,inputs:l,outputIndices:n,options:s}};xo.postMessage(u,aj(l))})}else return sj(e,t,r,n,i,s)},XY=async e=>{if(kc())return bf(),new Promise((t,r)=>{_f("end-profiling",[t,r]);let n={type:"end-profiling",in:e};xo.postMessage(n)});oj(e)}}),sS,H3,QY,jve=at(()=>{Ia(),YY(),Bt(),NI(),G9(),sS=(e,t)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];case"ml-tensor":return[e.type,e.dims,{mlTensor:e.mlTensor},"ml-tensor"];default:throw new Error(`invalid data location: ${e.location} for ${t()}`)}},H3=e=>{switch(e[3]){case"cpu":return new wa(e[0],e[2],e[1]);case"gpu-buffer":{let t=e[0];if(!BI(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:r,download:n,dispose:i}=e[2];return wa.fromGpuBuffer(r,{dataType:t,dims:e[1],download:n,dispose:i})}case"ml-tensor":{let t=e[0];if(!zI(t))throw new Error(`not supported data type: ${t} for deserializing MLTensor tensor`);let{mlTensor:r,download:n,dispose:i}=e[2];return wa.fromMLTensor(r,{dataType:t,dims:e[1],download:n,dispose:i})}default:throw new Error(`invalid data location: ${e[3]}`)}},QY=class{async fetchModelAndCopyToWasmMemory(e){return GY(await UI(e))}async loadModel(e,t){Ea();let r;typeof e=="string"?r=await this.fetchModelAndCopyToWasmMemory(e):r=e,[this.sessionId,this.inputNames,this.outputNames,this.inputMetadata,this.outputMetadata]=await qY(r,t),Lo()}async dispose(){return HY(this.sessionId)}async run(e,t,r){Ea();let n=[],i=[];Object.entries(e).forEach(d=>{let h=d[0],m=d[1],g=this.inputNames.indexOf(h);if(g===-1)throw new Error(`invalid input '${h}'`);n.push(m),i.push(g)});let s=[],o=[];Object.entries(t).forEach(d=>{let h=d[0],m=d[1],g=this.outputNames.indexOf(h);if(g===-1)throw new Error(`invalid output '${h}'`);s.push(m),o.push(g)});let a=n.map((d,h)=>sS(d,()=>`input "${this.inputNames[i[h]]}"`)),l=s.map((d,h)=>d?sS(d,()=>`output "${this.outputNames[o[h]]}"`):null),u=await KY(this.sessionId,i,a,o,l,r),c={};for(let d=0;d<u.length;d++)c[this.outputNames[o[d]]]=s[d]??H3(u[d]);return Lo(),c}startProfiling(){}endProfiling(){XY(this.sessionId)}}}),JY={};hg(JY,{OnnxruntimeWebAssemblyBackend:()=>RO,initializeFlags:()=>DO,wasmBackend:()=>ZY});var DO,RO,ZY,$ve=at(()=>{Ia(),YY(),jve(),DO=()=>{(typeof Zr.wasm.initTimeout!="number"||Zr.wasm.initTimeout<0)&&(Zr.wasm.initTimeout=0);let e=Zr.wasm.simd;if(typeof e!="boolean"&&e!==void 0&&e!=="fixed"&&e!=="relaxed"&&(console.warn(`Property "env.wasm.simd" is set to unknown value "${e}". Reset it to \`false\` and ignore SIMD feature checking.`),Zr.wasm.simd=!1),typeof Zr.wasm.proxy!="boolean"&&(Zr.wasm.proxy=!1),typeof Zr.wasm.trace!="boolean"&&(Zr.wasm.trace=!1),typeof Zr.wasm.numThreads!="number"||!Number.isInteger(Zr.wasm.numThreads)||Zr.wasm.numThreads<=0)if(typeof self<"u"&&!self.crossOriginIsolated)Zr.wasm.numThreads=1;else{let t=typeof navigator>"u"?bge("node:os").cpus().length:navigator.hardwareConcurrency;Zr.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},RO=class{async init(e){DO(),await VY(),await WY(e)}async createInferenceSessionHandler(e,t){let r=new QY;return await r.loadModel(e,t),r}},ZY=new RO});Ia();Ia();Ia();var Nve="1.22.0-dev.20250409-89f8206ba4",Dve=N9;{let e=($ve(),w_(JY)).wasmBackend;Lf("webgpu",e,5),Lf("webnn",e,5),Lf("cpu",e,10),Lf("wasm",e,10)}Object.defineProperty(Zr.versions,"web",{value:Nve,enumerable:!0});const Rve=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return $I},get TRACE(){return x_},get TRACE_FUNC_BEGIN(){return Ea},get TRACE_FUNC_END(){return Lo},get Tensor(){return wa},default:Dve,get env(){return Zr},get registerBackend(){return Lf}},Symbol.toStringTag,{value:"Module"}));var oS={},Lve={"onnxruntime-common":(e=>{e.exports=gge}),"onnxruntime-web":(e=>{e.exports=Rve}),"?2ce3":(()=>{}),"?7992":(()=>{}),"?5af5":(()=>{}),"?2b25":(()=>{}),"?db59":(()=>{}),"?383f":(()=>{}),"?fa4b":(()=>{}),"./node_modules/@huggingface/jinja/dist/index.js":((e,t,r)=>{r.r(t),r.d(t,{Environment:()=>Qe,Interpreter:()=>et,Template:()=>hi,parse:()=>te,tokenize:()=>d});var n=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",NullLiteral:"NullLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndSet:"EndSet",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator",Macro:"Macro",EndMacro:"EndMacro",Break:"Break",Continue:"Continue"}),i=Object.freeze({set:n.Set,for:n.For,in:n.In,is:n.Is,if:n.If,else:n.Else,endset:n.EndSet,endif:n.EndIf,elif:n.ElseIf,endfor:n.EndFor,and:n.And,or:n.Or,not:n.Not,"not in":n.NotIn,macro:n.Macro,endmacro:n.EndMacro,break:n.Break,continue:n.Continue,true:n.BooleanLiteral,false:n.BooleanLiteral,none:n.NullLiteral,True:n.BooleanLiteral,False:n.BooleanLiteral,None:n.NullLiteral}),s=class{constructor(Z,be){this.value=Z,this.type=be}};function o(Z){return/\w/.test(Z)}function a(Z){return/[0-9]/.test(Z)}var l=[["{%",n.OpenStatement],["%}",n.CloseStatement],["{{",n.OpenExpression],["}}",n.CloseExpression],["(",n.OpenParen],[")",n.CloseParen],["{",n.OpenCurlyBracket],["}",n.CloseCurlyBracket],["[",n.OpenSquareBracket],["]",n.CloseSquareBracket],[",",n.Comma],[".",n.Dot],[":",n.Colon],["|",n.Pipe],["<=",n.ComparisonBinaryOperator],[">=",n.ComparisonBinaryOperator],["==",n.ComparisonBinaryOperator],["!=",n.ComparisonBinaryOperator],["<",n.ComparisonBinaryOperator],[">",n.ComparisonBinaryOperator],["+",n.AdditiveBinaryOperator],["-",n.AdditiveBinaryOperator],["*",n.MultiplicativeBinaryOperator],["/",n.MultiplicativeBinaryOperator],["%",n.MultiplicativeBinaryOperator],["=",n.Equals]],u=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function c(Z,be={}){return Z.endsWith(`
`)&&(Z=Z.slice(0,-1)),Z=Z.replace(/{#.*?#}/gs,"{##}"),be.lstrip_blocks&&(Z=Z.replace(/^[ \t]*({[#%])/gm,"$1")),be.trim_blocks&&(Z=Z.replace(/([#%]})\n/g,"$1")),Z.replace(/{##}/g,"").replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{")}function d(Z,be={}){const se=[],we=c(Z,be);let je=0;const Je=Be=>{let Nt="";for(;Be(we[je]);){if(we[je]==="\\"){if(++je,je>=we.length)throw new SyntaxError("Unexpected end of input");const bt=we[je++],wt=u.get(bt);if(wt===void 0)throw new SyntaxError(`Unexpected escaped character: ${bt}`);Nt+=wt;continue}if(Nt+=we[je++],je>=we.length)throw new SyntaxError("Unexpected end of input")}return Nt};e:for(;je<we.length;){const Be=se.at(-1)?.type;if(Be===void 0||Be===n.CloseStatement||Be===n.CloseExpression){let bt="";for(;je<we.length&&!(we[je]==="{"&&(we[je+1]==="%"||we[je+1]==="{"));)bt+=we[je++];if(bt.length>0){se.push(new s(bt,n.Text));continue}}Je(bt=>/\s/.test(bt));const Nt=we[je];if(Nt==="-"||Nt==="+"){const bt=se.at(-1)?.type;if(bt===n.Text||bt===void 0)throw new SyntaxError(`Unexpected character: ${Nt}`);switch(bt){case n.Identifier:case n.NumericLiteral:case n.BooleanLiteral:case n.NullLiteral:case n.StringLiteral:case n.CloseParen:case n.CloseSquareBracket:break;default:{++je;const wt=Je(a);se.push(new s(`${Nt}${wt}`,wt.length>0?n.NumericLiteral:n.UnaryOperator));continue}}}for(const[bt,wt]of l)if(we.slice(je,je+bt.length)===bt){se.push(new s(bt,wt)),je+=bt.length;continue e}if(Nt==="'"||Nt==='"'){++je;const bt=Je(wt=>wt!==Nt);se.push(new s(bt,n.StringLiteral)),++je;continue}if(a(Nt)){const bt=Je(a);se.push(new s(bt,n.NumericLiteral));continue}if(o(Nt)){const bt=Je(o),wt=Object.hasOwn(i,bt)?i[bt]:n.Identifier;wt===n.In&&se.at(-1)?.type===n.Not?(se.pop(),se.push(new s("not in",n.NotIn))):se.push(new s(bt,wt));continue}throw new SyntaxError(`Unexpected character: ${Nt}`)}return se}var h=class{type="Statement"},m=class extends h{constructor(Z){super(),this.body=Z}type="Program"},g=class extends h{constructor(Z,be,se){super(),this.test=Z,this.body=be,this.alternate=se}type="If"},v=class extends h{constructor(Z,be,se,we){super(),this.loopvar=Z,this.iterable=be,this.body=se,this.defaultBlock=we}type="For"},y=class extends h{type="Break"},x=class extends h{type="Continue"},w=class extends h{constructor(Z,be,se){super(),this.assignee=Z,this.value=be,this.body=se}type="Set"},S=class extends h{constructor(Z,be,se){super(),this.name=Z,this.args=be,this.body=se}type="Macro"},M=class extends h{type="Expression"},T=class extends M{constructor(Z,be,se){super(),this.object=Z,this.property=be,this.computed=se}type="MemberExpression"},P=class extends M{constructor(Z,be){super(),this.callee=Z,this.args=be}type="CallExpression"},E=class extends M{constructor(Z){super(),this.value=Z}type="Identifier"},A=class extends M{constructor(Z){super(),this.value=Z}type="Literal"},L=class extends A{type="NumericLiteral"},B=class extends A{type="StringLiteral"},V=class extends A{type="BooleanLiteral"},G=class extends A{type="NullLiteral"},z=class extends A{type="ArrayLiteral"},K=class extends A{type="TupleLiteral"},J=class extends A{type="ObjectLiteral"},X=class extends M{constructor(Z,be,se){super(),this.operator=Z,this.left=be,this.right=se}type="BinaryExpression"},Q=class extends M{constructor(Z,be){super(),this.operand=Z,this.filter=be}type="FilterExpression"},W=class extends M{constructor(Z,be){super(),this.iterable=Z,this.test=be}type="SelectExpression"},oe=class extends M{constructor(Z,be,se){super(),this.operand=Z,this.negate=be,this.test=se}type="TestExpression"},ce=class extends M{constructor(Z,be){super(),this.operator=Z,this.argument=be}type="UnaryExpression"},D=class extends M{constructor(Z=void 0,be=void 0,se=void 0){super(),this.start=Z,this.stop=be,this.step=se}type="SliceExpression"},U=class extends M{constructor(Z,be){super(),this.key=Z,this.value=be}type="KeywordArgumentExpression"};function te(Z){const be=new m([]);let se=0;function we(it,nt){const At=Z[se++];if(!At||At.type!==it)throw new Error(`Parser Error: ${nt}. ${At.type} !== ${it}.`);return At}function je(){switch(Z[se].type){case n.Text:return Nt();case n.OpenStatement:return bt();case n.OpenExpression:return wt();default:throw new SyntaxError(`Unexpected token type: ${Z[se].type}`)}}function Je(...it){return se+it.length<=Z.length&&it.some((nt,At)=>nt!==Z[se+At].type)}function Be(...it){return se+it.length<=Z.length&&it.every((nt,At)=>nt===Z[se+At].type)}function Nt(){return new B(we(n.Text,"Expected text token").value)}function bt(){we(n.OpenStatement,"Expected opening statement token");let it;switch(Z[se].type){case n.Set:++se,it=Rr(),we(n.CloseStatement,"Expected closing statement token");break;case n.If:++se,it=sr(),we(n.OpenStatement,"Expected {% token"),we(n.EndIf,"Expected endif token"),we(n.CloseStatement,"Expected %} token");break;case n.Macro:++se,it=kr(),we(n.OpenStatement,"Expected {% token"),we(n.EndMacro,"Expected endmacro token"),we(n.CloseStatement,"Expected %} token");break;case n.For:++se,it=Rn(),we(n.OpenStatement,"Expected {% token"),we(n.EndFor,"Expected endfor token"),we(n.CloseStatement,"Expected %} token");break;case n.Break:++se,we(n.CloseStatement,"Expected closing statement token"),it=new y;break;case n.Continue:++se,we(n.CloseStatement,"Expected closing statement token"),it=new x;break;default:throw new SyntaxError(`Unknown statement type: ${Z[se].type}`)}return it}function wt(){we(n.OpenExpression,"Expected opening expression token");const it=Lr();return we(n.CloseExpression,"Expected closing expression token"),it}function Rr(){const it=Lr();if(Be(n.Equals)){++se;const nt=Lr();return new w(it,nt,[])}else{const nt=[];for(we(n.CloseStatement,"Expected %} token");!(Z[se]?.type===n.OpenStatement&&Z[se+1]?.type===n.EndSet);){const At=je();nt.push(At)}return we(n.OpenStatement,"Expected {% token"),we(n.EndSet,"Expected endset token"),new w(it,null,nt)}}function sr(){const it=Lr();we(n.CloseStatement,"Expected closing statement token");const nt=[],At=[];for(;!(Z[se]?.type===n.OpenStatement&&(Z[se+1]?.type===n.ElseIf||Z[se+1]?.type===n.Else||Z[se+1]?.type===n.EndIf));)nt.push(je());if(Z[se]?.type===n.OpenStatement&&Z[se+1]?.type!==n.EndIf)if(++se,Be(n.ElseIf))we(n.ElseIf,"Expected elseif token"),At.push(sr());else for(we(n.Else,"Expected else token"),we(n.CloseStatement,"Expected closing statement token");!(Z[se]?.type===n.OpenStatement&&Z[se+1]?.type===n.EndIf);)At.push(je());return new g(it,nt,At)}function kr(){const it=Ci();if(it.type!=="Identifier")throw new SyntaxError("Expected identifier following macro statement");const nt=vs();we(n.CloseStatement,"Expected closing statement token");const At=[];for(;Je(n.OpenStatement,n.EndMacro);)At.push(je());return new S(it,nt,At)}function Pr(it=!1){const nt=it?Ci:Lr,At=[nt()],vn=Be(n.Comma);for(;vn&&(++se,At.push(nt()),!!Be(n.Comma)););return vn?new K(At):At[0]}function Rn(){const it=Pr(!0);if(!(it instanceof E||it instanceof K))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${it.type} instead`);we(n.In,"Expected `in` keyword following loop variable");const nt=Lr();we(n.CloseStatement,"Expected closing statement token");const At=[];for(;Je(n.OpenStatement,n.EndFor)&&Je(n.OpenStatement,n.Else);)At.push(je());const vn=[];if(Be(n.OpenStatement,n.Else))for(++se,++se,we(n.CloseStatement,"Expected closing statement token");Je(n.OpenStatement,n.EndFor);)vn.push(je());return new v(it,nt,At,vn)}function Lr(){return Tn()}function Tn(){const it=Pi();if(Be(n.If)){++se;const nt=Pi();if(Be(n.Else)){++se;const At=Pi();return new g(nt,[it],[At])}else return new W(it,nt)}return it}function Pi(){let it=Bi();for(;Be(n.Or);){const nt=Z[se];++se;const At=Bi();it=new X(nt,it,At)}return it}function Bi(){let it=zi();for(;Be(n.And);){const nt=Z[se];++se;const At=zi();it=new X(nt,it,At)}return it}function zi(){let it;for(;Be(n.Not);){const nt=Z[se];++se;const At=zi();it=new ce(nt,At)}return it??no()}function no(){let it=Ei();for(;Be(n.ComparisonBinaryOperator)||Be(n.In)||Be(n.NotIn);){const nt=Z[se];++se;const At=Ei();it=new X(nt,it,At)}return it}function Ei(){let it=es();for(;Be(n.AdditiveBinaryOperator);){const nt=Z[se];++se;const At=es();it=new X(nt,it,At)}return it}function io(){const it=Ur(Ci());return Be(n.OpenParen)?Wn(it):it}function Wn(it){let nt=new P(it,vs());return nt=Ur(nt),Be(n.OpenParen)&&(nt=Wn(nt)),nt}function vs(){we(n.OpenParen,"Expected opening parenthesis for arguments list");const it=ri();return we(n.CloseParen,"Expected closing parenthesis for arguments list"),it}function ri(){const it=[];for(;!Be(n.CloseParen);){let nt=Lr();if(Be(n.Equals)){if(++se,!(nt instanceof E))throw new SyntaxError("Expected identifier for keyword argument");const At=Lr();nt=new U(nt,At)}it.push(nt),Be(n.Comma)&&++se}return it}function zo(){const it=[];let nt=!1;for(;!Be(n.CloseSquareBracket);)Be(n.Colon)?(it.push(void 0),++se,nt=!0):(it.push(Lr()),Be(n.Colon)&&(++se,nt=!0));if(it.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(nt){if(it.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new D(...it)}return it[0]}function Ur(it){for(;Be(n.Dot)||Be(n.OpenSquareBracket);){const nt=Z[se];++se;let At;const vn=nt.type!==n.Dot;if(vn)At=zo(),we(n.CloseSquareBracket,"Expected closing square bracket");else if(At=Ci(),At.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");it=new T(it,At,vn)}return it}function es(){let it=ts();for(;Be(n.MultiplicativeBinaryOperator);){const nt=Z[se];++se;const At=ts();it=new X(nt,it,At)}return it}function ts(){let it=Kn();for(;Be(n.Is);){++se;const nt=Be(n.Not);nt&&++se;let At=Ci();if(At instanceof V?At=new E(At.value.toString()):At instanceof G&&(At=new E("none")),!(At instanceof E))throw new SyntaxError("Expected identifier for the test");it=new oe(it,nt,At)}return it}function Kn(){let it=io();for(;Be(n.Pipe);){++se;let nt=Ci();if(!(nt instanceof E))throw new SyntaxError("Expected identifier for the filter");Be(n.OpenParen)&&(nt=Wn(nt)),it=new Q(it,nt)}return it}function Ci(){const it=Z[se];switch(it.type){case n.NumericLiteral:return++se,new L(Number(it.value));case n.StringLiteral:return++se,new B(it.value);case n.BooleanLiteral:return++se,new V(it.value.toLowerCase()==="true");case n.NullLiteral:return++se,new G(null);case n.Identifier:return++se,new E(it.value);case n.OpenParen:{++se;const nt=Pr();if(Z[se].type!==n.CloseParen)throw new SyntaxError(`Expected closing parenthesis, got ${Z[se].type} instead`);return++se,nt}case n.OpenSquareBracket:{++se;const nt=[];for(;!Be(n.CloseSquareBracket);)nt.push(Lr()),Be(n.Comma)&&++se;return++se,new z(nt)}case n.OpenCurlyBracket:{++se;const nt=new Map;for(;!Be(n.CloseCurlyBracket);){const At=Lr();we(n.Colon,"Expected colon between key and value in object literal");const vn=Lr();nt.set(At,vn),Be(n.Comma)&&++se}return++se,new J(nt)}default:throw new SyntaxError(`Unexpected token: ${it.type}`)}}for(;se<Z.length;)be.body.push(je());return be}function ee(Z,be,se=1){be===void 0&&(be=Z,Z=0);const we=[];for(let je=Z;je<be;je+=se)we.push(je);return we}function pe(Z,be,se,we=1){const je=Math.sign(we);je>=0?(be=(be??=0)<0?Math.max(Z.length+be,0):Math.min(be,Z.length),se=(se??=Z.length)<0?Math.max(Z.length+se,0):Math.min(se,Z.length)):(be=(be??=Z.length-1)<0?Math.max(Z.length+be,-1):Math.min(be,Z.length-1),se=(se??=-1)<-1?Math.max(Z.length+se,-1):Math.min(se,Z.length-1));const Je=[];for(let Be=be;je*Be<je*se;Be+=we)Je.push(Z[Be]);return Je}function Oe(Z){return Z.replace(/\b\w/g,be=>be.toUpperCase())}var xe=class extends Error{},Ie=class extends Error{},Pe=class{type="RuntimeValue";value;builtins=new Map;constructor(Z=void 0){this.value=Z}__bool__(){return new ue(!!this.value)}},he=class extends Pe{type="NumericValue"},re=class extends Pe{type="StringValue";builtins=new Map([["upper",new Le(()=>new re(this.value.toUpperCase()))],["lower",new Le(()=>new re(this.value.toLowerCase()))],["strip",new Le(()=>new re(this.value.trim()))],["title",new Le(()=>new re(Oe(this.value)))],["length",new he(this.value.length)],["rstrip",new Le(()=>new re(this.value.trimEnd()))],["lstrip",new Le(()=>new re(this.value.trimStart()))],["startswith",new Le(Z=>{if(Z.length===0)throw new Error("startswith() requires at least one argument");const be=Z[0];if(!(be instanceof re))throw new Error("startswith() argument must be a string");return new ue(this.value.startsWith(be.value))})],["endswith",new Le(Z=>{if(Z.length===0)throw new Error("endswith() requires at least one argument");const be=Z[0];if(!(be instanceof re))throw new Error("endswith() argument must be a string");return new ue(this.value.endsWith(be.value))})],["split",new Le(Z=>{const be=Z[0]??new Ve;if(!(be instanceof re||be instanceof Ve))throw new Error("sep argument must be a string or null");const se=Z[1]??new he(-1);if(!(se instanceof he))throw new Error("maxsplit argument must be a number");let we=[];if(be instanceof Ve){const je=this.value.trimStart();for(const{0:Je,index:Be}of je.matchAll(/\S+/g)){if(se.value!==-1&&we.length>=se.value&&Be!==void 0){we.push(Je+je.slice(Be+Je.length));break}we.push(Je)}}else{if(be.value==="")throw new Error("empty separator");we=this.value.split(be.value),se.value!==-1&&we.length>se.value&&we.push(we.splice(se.value).join(be.value))}return new $e(we.map(je=>new re(je)))})]])},ue=class extends Pe{type="BooleanValue"},ae=class extends Pe{type="ObjectValue";__bool__(){return new ue(this.value.size>0)}builtins=new Map([["get",new Le(([Z,be])=>{if(!(Z instanceof re))throw new Error(`Object key must be a string: got ${Z.type}`);return this.value.get(Z.value)??be??new Ve})],["items",new Le(()=>new $e(Array.from(this.value.entries()).map(([Z,be])=>new $e([new re(Z),be]))))]])},Ce=class extends ae{type="KeywordArgumentsValue"},$e=class extends Pe{type="ArrayValue";builtins=new Map([["length",new he(this.value.length)]]);__bool__(){return new ue(this.value.length>0)}},Ne=class extends $e{type="TupleValue"},Le=class extends Pe{type="FunctionValue"},Ve=class extends Pe{type="NullValue"},He=class extends Pe{type="UndefinedValue"},Qe=class{constructor(Z){this.parent=Z}variables=new Map([["namespace",new Le(Z=>{if(Z.length===0)return new ae(new Map);if(Z.length!==1||!(Z[0]instanceof ae))throw new Error("`namespace` expects either zero arguments or a single object argument");return Z[0]})]]);tests=new Map([["boolean",Z=>Z.type==="BooleanValue"],["callable",Z=>Z instanceof Le],["odd",Z=>{if(Z.type!=="NumericValue")throw new Error(`Cannot apply test "odd" to type: ${Z.type}`);return Z.value%2!==0}],["even",Z=>{if(Z.type!=="NumericValue")throw new Error(`Cannot apply test "even" to type: ${Z.type}`);return Z.value%2===0}],["false",Z=>Z.type==="BooleanValue"&&!Z.value],["true",Z=>Z.type==="BooleanValue"&&Z.value],["none",Z=>Z.type==="NullValue"],["string",Z=>Z.type==="StringValue"],["number",Z=>Z.type==="NumericValue"],["integer",Z=>Z.type==="NumericValue"&&Number.isInteger(Z.value)],["iterable",Z=>Z.type==="ArrayValue"||Z.type==="StringValue"],["mapping",Z=>Z.type==="ObjectValue"],["lower",Z=>{const be=Z.value;return Z.type==="StringValue"&&be===be.toLowerCase()}],["upper",Z=>{const be=Z.value;return Z.type==="StringValue"&&be===be.toUpperCase()}],["none",Z=>Z.type==="NullValue"],["defined",Z=>Z.type!=="UndefinedValue"],["undefined",Z=>Z.type==="UndefinedValue"],["equalto",(Z,be)=>Z.value===be.value],["eq",(Z,be)=>Z.value===be.value]]);set(Z,be){return this.declareVariable(Z,ot(be))}declareVariable(Z,be){if(this.variables.has(Z))throw new SyntaxError(`Variable already declared: ${Z}`);return this.variables.set(Z,be),be}setVariable(Z,be){return this.variables.set(Z,be),be}resolve(Z){if(this.variables.has(Z))return this;if(this.parent)return this.parent.resolve(Z);throw new Error(`Unknown variable: ${Z}`)}lookupVariable(Z){try{return this.resolve(Z).variables.get(Z)??new He}catch{return new He}}},et=class{global;constructor(Z){this.global=Z??new Qe}run(Z){return this.evaluate(Z,this.global)}evaluateBinaryExpression(Z,be){const se=this.evaluate(Z.left,be);switch(Z.operator.value){case"and":return se.__bool__().value?this.evaluate(Z.right,be):se;case"or":return se.__bool__().value?se:this.evaluate(Z.right,be)}const we=this.evaluate(Z.right,be);switch(Z.operator.value){case"==":return new ue(se.value==we.value);case"!=":return new ue(se.value!=we.value)}if(se instanceof He||we instanceof He)throw new Error("Cannot perform operation on undefined values");if(se instanceof Ve||we instanceof Ve)throw new Error("Cannot perform operation on null values");if(se instanceof he&&we instanceof he)switch(Z.operator.value){case"+":return new he(se.value+we.value);case"-":return new he(se.value-we.value);case"*":return new he(se.value*we.value);case"/":return new he(se.value/we.value);case"%":return new he(se.value%we.value);case"<":return new ue(se.value<we.value);case">":return new ue(se.value>we.value);case">=":return new ue(se.value>=we.value);case"<=":return new ue(se.value<=we.value)}else if(se instanceof $e&&we instanceof $e)switch(Z.operator.value){case"+":return new $e(se.value.concat(we.value))}else if(we instanceof $e){const je=we.value.find(Je=>Je.value===se.value)!==void 0;switch(Z.operator.value){case"in":return new ue(je);case"not in":return new ue(!je)}}if(se instanceof re||we instanceof re)switch(Z.operator.value){case"+":return new re(se.value.toString()+we.value.toString())}if(se instanceof re&&we instanceof re)switch(Z.operator.value){case"in":return new ue(we.value.includes(se.value));case"not in":return new ue(!we.value.includes(se.value))}if(se instanceof re&&we instanceof ae)switch(Z.operator.value){case"in":return new ue(we.value.has(se.value));case"not in":return new ue(!we.value.has(se.value))}throw new SyntaxError(`Unknown operator "${Z.operator.value}" between ${se.type} and ${we.type}`)}evaluateArguments(Z,be){const se=[],we=new Map;for(const je of Z)if(je.type==="KeywordArgumentExpression"){const Je=je;we.set(Je.key.value,this.evaluate(Je.value,be))}else{if(we.size>0)throw new Error("Positional arguments must come before keyword arguments");se.push(this.evaluate(je,be))}return[se,we]}evaluateFilterExpression(Z,be){const se=this.evaluate(Z.operand,be);if(Z.filter.type==="Identifier"){const we=Z.filter;if(we.value==="tojson")return new re(Xe(se));if(se instanceof $e)switch(we.value){case"list":return se;case"first":return se.value[0];case"last":return se.value[se.value.length-1];case"length":return new he(se.value.length);case"reverse":return new $e(se.value.reverse());case"sort":return new $e(se.value.sort((je,Je)=>{if(je.type!==Je.type)throw new Error(`Cannot compare different types: ${je.type} and ${Je.type}`);switch(je.type){case"NumericValue":return je.value-Je.value;case"StringValue":return je.value.localeCompare(Je.value);default:throw new Error(`Cannot compare type: ${je.type}`)}}));case"join":return new re(se.value.map(je=>je.value).join(""));case"string":return new re(Xe(se));default:throw new Error(`Unknown ArrayValue filter: ${we.value}`)}else if(se instanceof re)switch(we.value){case"length":return new he(se.value.length);case"upper":return new re(se.value.toUpperCase());case"lower":return new re(se.value.toLowerCase());case"title":return new re(Oe(se.value));case"capitalize":return new re(se.value.charAt(0).toUpperCase()+se.value.slice(1));case"trim":return new re(se.value.trim());case"indent":return new re(se.value.split(`
`).map((je,Je)=>Je===0||je.length===0?je:"    "+je).join(`
`));case"join":case"string":return se;default:throw new Error(`Unknown StringValue filter: ${we.value}`)}else if(se instanceof he)switch(we.value){case"abs":return new he(Math.abs(se.value));default:throw new Error(`Unknown NumericValue filter: ${we.value}`)}else if(se instanceof ae)switch(we.value){case"items":return new $e(Array.from(se.value.entries()).map(([je,Je])=>new $e([new re(je),Je])));case"length":return new he(se.value.size);default:throw new Error(`Unknown ObjectValue filter: ${we.value}`)}throw new Error(`Cannot apply filter "${we.value}" to type: ${se.type}`)}else if(Z.filter.type==="CallExpression"){const we=Z.filter;if(we.callee.type!=="Identifier")throw new Error(`Unknown filter: ${we.callee.type}`);const je=we.callee.value;if(je==="tojson"){const[,Je]=this.evaluateArguments(we.args,be),Be=Je.get("indent")??new Ve;if(!(Be instanceof he||Be instanceof Ve))throw new Error("If set, indent must be a number");return new re(Xe(se,Be.value))}else if(je==="join"){let Je;if(se instanceof re)Je=Array.from(se.value);else if(se instanceof $e)Je=se.value.map(wt=>wt.value);else throw new Error(`Cannot apply filter "${je}" to type: ${se.type}`);const[Be,Nt]=this.evaluateArguments(we.args,be),bt=Be.at(0)??Nt.get("separator")??new re("");if(!(bt instanceof re))throw new Error("separator must be a string");return new re(Je.join(bt.value))}if(se instanceof $e){switch(je){case"selectattr":case"rejectattr":{const Je=je==="selectattr";if(se.value.some(sr=>!(sr instanceof ae)))throw new Error(`\`${je}\` can only be applied to array of objects`);if(we.args.some(sr=>sr.type!=="StringLiteral"))throw new Error(`arguments of \`${je}\` must be strings`);const[Be,Nt,bt]=we.args.map(sr=>this.evaluate(sr,be));let wt;if(Nt){const sr=be.tests.get(Nt.value);if(!sr)throw new Error(`Unknown test: ${Nt.value}`);wt=sr}else wt=(...sr)=>sr[0].__bool__().value;const Rr=se.value.filter(sr=>{const kr=sr.value.get(Be.value),Pr=kr?wt(kr,bt):!1;return Je?Pr:!Pr});return new $e(Rr)}case"map":{const[,Je]=this.evaluateArguments(we.args,be);if(Je.has("attribute")){const Be=Je.get("attribute");if(!(Be instanceof re))throw new Error("attribute must be a string");const Nt=Je.get("default"),bt=se.value.map(wt=>{if(!(wt instanceof ae))throw new Error("items in map must be an object");return wt.value.get(Be.value)??Nt??new He});return new $e(bt)}else throw new Error("`map` expressions without `attribute` set are not currently supported.")}}throw new Error(`Unknown ArrayValue filter: ${je}`)}else if(se instanceof re){switch(je){case"indent":{const[Je,Be]=this.evaluateArguments(we.args,be),Nt=Je.at(0)??Be.get("width")??new he(4);if(!(Nt instanceof he))throw new Error("width must be a number");const bt=Je.at(1)??Be.get("first")??new ue(!1),wt=Je.at(2)??Be.get("blank")??new ue(!1),Rr=se.value.split(`
`),sr=" ".repeat(Nt.value),kr=Rr.map((Pr,Rn)=>!bt.value&&Rn===0||!wt.value&&Pr.length===0?Pr:sr+Pr);return new re(kr.join(`
`))}}throw new Error(`Unknown StringValue filter: ${je}`)}else throw new Error(`Cannot apply filter "${je}" to type: ${se.type}`)}throw new Error(`Unknown filter: ${Z.filter.type}`)}evaluateTestExpression(Z,be){const se=this.evaluate(Z.operand,be),we=be.tests.get(Z.test.value);if(!we)throw new Error(`Unknown test: ${Z.test.value}`);const je=we(se);return new ue(Z.negate?!je:je)}evaluateUnaryExpression(Z,be){const se=this.evaluate(Z.argument,be);switch(Z.operator.value){case"not":return new ue(!se.value);default:throw new SyntaxError(`Unknown operator: ${Z.operator.value}`)}}evalProgram(Z,be){return this.evaluateBlock(Z.body,be)}evaluateBlock(Z,be){let se="";for(const we of Z){const je=this.evaluate(we,be);je.type!=="NullValue"&&je.type!=="UndefinedValue"&&(se+=je.value)}return new re(se)}evaluateIdentifier(Z,be){return be.lookupVariable(Z.value)}evaluateCallExpression(Z,be){const[se,we]=this.evaluateArguments(Z.args,be);we.size>0&&se.push(new Ce(we));const je=this.evaluate(Z.callee,be);if(je.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${je.type}`);return je.value(se,be)}evaluateSliceExpression(Z,be,se){if(!(Z instanceof $e||Z instanceof re))throw new Error("Slice object must be an array or string");const we=this.evaluate(be.start,se),je=this.evaluate(be.stop,se),Je=this.evaluate(be.step,se);if(!(we instanceof he||we instanceof He))throw new Error("Slice start must be numeric or undefined");if(!(je instanceof he||je instanceof He))throw new Error("Slice stop must be numeric or undefined");if(!(Je instanceof he||Je instanceof He))throw new Error("Slice step must be numeric or undefined");return Z instanceof $e?new $e(pe(Z.value,we.value,je.value,Je.value)):new re(pe(Array.from(Z.value),we.value,je.value,Je.value).join(""))}evaluateMemberExpression(Z,be){const se=this.evaluate(Z.object,be);let we;if(Z.computed){if(Z.property.type==="SliceExpression")return this.evaluateSliceExpression(se,Z.property,be);we=this.evaluate(Z.property,be)}else we=new re(Z.property.value);let je;if(se instanceof ae){if(!(we instanceof re))throw new Error(`Cannot access property with non-string: got ${we.type}`);je=se.value.get(we.value)??se.builtins.get(we.value)}else if(se instanceof $e||se instanceof re)if(we instanceof he)je=se.value.at(we.value),se instanceof re&&(je=new re(se.value.at(we.value)));else if(we instanceof re)je=se.builtins.get(we.value);else throw new Error(`Cannot access property with non-string/non-number: got ${we.type}`);else{if(!(we instanceof re))throw new Error(`Cannot access property with non-string: got ${we.type}`);je=se.builtins.get(we.value)}return je instanceof Pe?je:new He}evaluateSet(Z,be){const se=Z.value?this.evaluate(Z.value,be):this.evaluateBlock(Z.body,be);if(Z.assignee.type==="Identifier"){const we=Z.assignee.value;be.setVariable(we,se)}else if(Z.assignee.type==="MemberExpression"){const we=Z.assignee,je=this.evaluate(we.object,be);if(!(je instanceof ae))throw new Error("Cannot assign to member of non-object");if(we.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");je.value.set(we.property.value,se)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(Z.assignee)}`);return new Ve}evaluateIf(Z,be){const se=this.evaluate(Z.test,be);return this.evaluateBlock(se.__bool__().value?Z.body:Z.alternate,be)}evaluateFor(Z,be){const se=new Qe(be);let we,je;if(Z.iterable.type==="SelectExpression"){const wt=Z.iterable;je=this.evaluate(wt.iterable,se),we=wt.test}else je=this.evaluate(Z.iterable,se);if(!(je instanceof $e))throw new Error(`Expected iterable type in for loop: got ${je.type}`);const Je=[],Be=[];for(let wt=0;wt<je.value.length;++wt){const Rr=new Qe(se),sr=je.value[wt];let kr;if(Z.loopvar.type==="Identifier")kr=Pr=>Pr.setVariable(Z.loopvar.value,sr);else if(Z.loopvar.type==="TupleLiteral"){const Pr=Z.loopvar;if(sr.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${sr.type}`);const Rn=sr;if(Pr.value.length!==Rn.value.length)throw new Error(`Too ${Pr.value.length>Rn.value.length?"few":"many"} items to unpack`);kr=Lr=>{for(let Tn=0;Tn<Pr.value.length;++Tn){if(Pr.value[Tn].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${Pr.value[Tn].type}`);Lr.setVariable(Pr.value[Tn].value,Rn.value[Tn])}}}else throw new Error(`Invalid loop variable(s): ${Z.loopvar.type}`);we&&(kr(Rr),!this.evaluate(we,Rr).__bool__().value)||(Je.push(sr),Be.push(kr))}let Nt="",bt=!0;for(let wt=0;wt<Je.length;++wt){const Rr=new Map([["index",new he(wt+1)],["index0",new he(wt)],["revindex",new he(Je.length-wt)],["revindex0",new he(Je.length-wt-1)],["first",new ue(wt===0)],["last",new ue(wt===Je.length-1)],["length",new he(Je.length)],["previtem",wt>0?Je[wt-1]:new He],["nextitem",wt<Je.length-1?Je[wt+1]:new He]]);se.setVariable("loop",new ae(Rr)),Be[wt](se);try{const sr=this.evaluateBlock(Z.body,se);Nt+=sr.value}catch(sr){if(sr instanceof Ie)continue;if(sr instanceof xe)break;throw sr}bt=!1}if(bt){const wt=this.evaluateBlock(Z.defaultBlock,se);Nt+=wt.value}return new re(Nt)}evaluateMacro(Z,be){return be.setVariable(Z.name.value,new Le((se,we)=>{const je=new Qe(we);se=se.slice();let Je;se.at(-1)?.type==="KeywordArgumentsValue"&&(Je=se.pop());for(let Be=0;Be<Z.args.length;++Be){const Nt=Z.args[Be],bt=se[Be];if(Nt.type==="Identifier"){const wt=Nt;if(!bt)throw new Error(`Missing positional argument: ${wt.value}`);je.setVariable(wt.value,bt)}else if(Nt.type==="KeywordArgumentExpression"){const wt=Nt,Rr=bt??Je?.value.get(wt.key.value)??this.evaluate(wt.value,je);je.setVariable(wt.key.value,Rr)}else throw new Error(`Unknown argument type: ${Nt.type}`)}return this.evaluateBlock(Z.body,je)})),new Ve}evaluate(Z,be){if(Z===void 0)return new He;switch(Z.type){case"Program":return this.evalProgram(Z,be);case"Set":return this.evaluateSet(Z,be);case"If":return this.evaluateIf(Z,be);case"For":return this.evaluateFor(Z,be);case"Macro":return this.evaluateMacro(Z,be);case"Break":throw new xe;case"Continue":throw new Ie;case"NumericLiteral":return new he(Number(Z.value));case"StringLiteral":return new re(Z.value);case"BooleanLiteral":return new ue(Z.value);case"NullLiteral":return new Ve(Z.value);case"ArrayLiteral":return new $e(Z.value.map(se=>this.evaluate(se,be)));case"TupleLiteral":return new Ne(Z.value.map(se=>this.evaluate(se,be)));case"ObjectLiteral":{const se=new Map;for(const[we,je]of Z.value){const Je=this.evaluate(we,be);if(!(Je instanceof re))throw new Error(`Object keys must be strings: got ${Je.type}`);se.set(Je.value,this.evaluate(je,be))}return new ae(se)}case"Identifier":return this.evaluateIdentifier(Z,be);case"CallExpression":return this.evaluateCallExpression(Z,be);case"MemberExpression":return this.evaluateMemberExpression(Z,be);case"UnaryExpression":return this.evaluateUnaryExpression(Z,be);case"BinaryExpression":return this.evaluateBinaryExpression(Z,be);case"FilterExpression":return this.evaluateFilterExpression(Z,be);case"TestExpression":return this.evaluateTestExpression(Z,be);default:throw new SyntaxError(`Unknown node type: ${Z.type}`)}}};function ot(Z){switch(typeof Z){case"number":return new he(Z);case"string":return new re(Z);case"boolean":return new ue(Z);case"undefined":return new He;case"object":return Z===null?new Ve:Array.isArray(Z)?new $e(Z.map(ot)):new ae(new Map(Object.entries(Z).map(([be,se])=>[be,ot(se)])));case"function":return new Le((be,se)=>{const we=Z(...be.map(je=>je.value))??null;return ot(we)});default:throw new Error(`Cannot convert to runtime value: ${Z}`)}}function Xe(Z,be,se){const we=se??0;switch(Z.type){case"NullValue":case"UndefinedValue":return"null";case"NumericValue":case"StringValue":case"BooleanValue":return JSON.stringify(Z.value);case"ArrayValue":case"ObjectValue":{const je=be?" ".repeat(be):"",Je=`
`+je.repeat(we),Be=Je+je;if(Z.type==="ArrayValue"){const Nt=Z.value.map(bt=>Xe(bt,be,we+1));return be?`[${Be}${Nt.join(`,${Be}`)}${Je}]`:`[${Nt.join(", ")}]`}else{const Nt=Array.from(Z.value.entries()).map(([bt,wt])=>{const Rr=`"${bt}": ${Xe(wt,be,we+1)}`;return be?`${Be}${Rr}`:Rr});return be?`{${Nt.join(",")}${Je}}`:`{${Nt.join(", ")}}`}}default:throw new Error(`Cannot convert to JSON: ${Z.type}`)}}var lt=`
`,_t="{%- ",dt=" -%}",xt={MultiplicativeBinaryOperator:2,AdditiveBinaryOperator:1,ComparisonBinaryOperator:0};function gt(Z,be="	"){const se=typeof be=="number"?" ".repeat(be):be;return Ze(Z.body,0,se).replace(/\n$/,"")}function We(...Z){return _t+Z.join(" ")+dt}function Ze(Z,be,se){return Z.map(we=>Pt(we,be,se)).join(lt)}function Pt(Z,be,se){const we=se.repeat(be);switch(Z.type){case"Program":return Ze(Z.body,be,se);case"If":return Zt(Z,be,se);case"For":return Rt(Z,be,se);case"Set":return Kr(Z,be,se);case"Macro":return gn(Z,be,se);case"Break":return we+We("break");case"Continue":return we+We("continue");default:return we+"{{- "+jt(Z)+" -}}"}}function Zt(Z,be,se){const we=se.repeat(be),je=[];let Je=Z;for(;Je&&(je.push({test:Je.test,body:Je.body}),Je.alternate.length===1&&Je.alternate[0].type==="If");)Je=Je.alternate[0];let Be=we+We("if",jt(je[0].test))+lt+Ze(je[0].body,be+1,se);for(let Nt=1;Nt<je.length;Nt++)Be+=lt+we+We("elif",jt(je[Nt].test))+lt+Ze(je[Nt].body,be+1,se);return Je&&Je.alternate.length>0&&(Be+=lt+we+We("else")+lt+Ze(Je.alternate,be+1,se)),Be+=lt+we+We("endif"),Be}function Rt(Z,be,se){const we=se.repeat(be);let je="";if(Z.iterable.type==="SelectExpression"){const Be=Z.iterable;je=`${jt(Be.iterable)} if ${jt(Be.test)}`}else je=jt(Z.iterable);let Je=we+We("for",jt(Z.loopvar),"in",je)+lt+Ze(Z.body,be+1,se);return Z.defaultBlock.length>0&&(Je+=lt+we+We("else")+lt+Ze(Z.defaultBlock,be+1,se)),Je+=lt+we+We("endfor"),Je}function Kr(Z,be,se){const we=se.repeat(be),je=jt(Z.assignee),Je=Z.value?jt(Z.value):"",Be=we+We("set",`${je}${Z.value?" = "+Je:""}`);return Z.body.length===0?Be:Be+lt+Ze(Z.body,be+1,se)+lt+we+We("endset")}function gn(Z,be,se){const we=se.repeat(be),je=Z.args.map(jt).join(", ");return we+We("macro",`${Z.name.value}(${je})`)+lt+Ze(Z.body,be+1,se)+lt+we+We("endmacro")}function jt(Z,be=-1){switch(Z.type){case"Identifier":return Z.value;case"NullLiteral":return"none";case"NumericLiteral":case"BooleanLiteral":return`${Z.value}`;case"StringLiteral":return JSON.stringify(Z.value);case"BinaryExpression":{const se=Z,we=xt[se.operator.type]??0,je=jt(se.left,we),Je=jt(se.right,we+1),Be=`${je} ${se.operator.value} ${Je}`;return we<be?`(${Be})`:Be}case"UnaryExpression":{const se=Z;return se.operator.value+(se.operator.value==="not"?" ":"")+jt(se.argument,1/0)}case"LogicalNegationExpression":return`not ${jt(Z.argument,1/0)}`;case"CallExpression":{const se=Z,we=se.args.map(je=>jt(je,-1)).join(", ");return`${jt(se.callee,-1)}(${we})`}case"MemberExpression":{const se=Z;let we=jt(se.object,-1);se.object.type!=="Identifier"&&(we=`(${we})`);let je=jt(se.property,-1);return!se.computed&&se.property.type!=="Identifier"&&(je=`(${je})`),se.computed?`${we}[${je}]`:`${we}.${je}`}case"FilterExpression":{const se=Z,we=jt(se.operand,1/0);return se.filter.type==="CallExpression"?`${we} | ${jt(se.filter,-1)}`:`${we} | ${se.filter.value}`}case"SelectExpression":{const se=Z;return`${jt(se.iterable,-1)} | select(${jt(se.test,-1)})`}case"TestExpression":{const se=Z;return`${jt(se.operand,-1)} is${se.negate?" not":""} ${se.test.value}`}case"ArrayLiteral":case"TupleLiteral":{const se=Z.value.map(je=>jt(je,-1)),we=Z.type==="ArrayLiteral"?"[]":"()";return`${we[0]}${se.join(", ")}${we[1]}`}case"ObjectLiteral":return`{ ${Array.from(Z.value.entries()).map(([we,je])=>`${jt(we,-1)}: ${jt(je,-1)}`).join(", ")} }`;case"SliceExpression":{const se=Z,we=se.start?jt(se.start,-1):"",je=se.stop?jt(se.stop,-1):"",Je=se.step?`:${jt(se.step,-1)}`:"";return`${we}:${je}${Je}`}case"KeywordArgumentExpression":{const se=Z;return`${se.key.value}=${jt(se.value,-1)}`}case"If":{const se=Z,we=jt(se.test,-1),je=jt(se.body[0],0),Je=jt(se.alternate[0],-1);return`${je} if ${we} else ${Je}`}default:throw new Error(`Unknown expression type: ${Z.type}`)}}var hi=class{parsed;constructor(Z){const be=d(Z,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=te(be)}render(Z){const be=new Qe;if(be.set("false",!1),be.set("true",!0),be.set("raise_exception",je=>{throw new Error(je)}),be.set("range",ee),Z)for(const[je,Je]of Object.entries(Z))be.set(je,Je);return new et(be).run(this.parsed).value}format(Z){return gt(this.parsed,Z?.indent||"	")}}}),"./src/backends/onnx.js":((e,t,r)=>{var n;r.r(t),r.d(t,{Tensor:()=>a.Tensor,createInferenceSession:()=>y,deviceToExecutionProviders:()=>g,isONNXProxy:()=>S,isONNXTensor:()=>x});var i=r("./src/env.js"),s=r("?2ce3"),o=r("onnxruntime-web"),a=r("onnxruntime-common");const l=Object.freeze({auto:null,gpu:null,cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:{name:"webnn",deviceType:"cpu"},"webnn-npu":{name:"webnn",deviceType:"npu"},"webnn-gpu":{name:"webnn",deviceType:"gpu"},"webnn-cpu":{name:"webnn",deviceType:"cpu"}}),u=[];let c,d;const h=Symbol.for("onnxruntime");if(h in globalThis)d=globalThis[h];else if(i.apis.IS_NODE_ENV){switch(d=s??(n||(n=r.t(s,2))),process.platform){case"win32":u.push("dml");break;case"linux":process.arch==="x64"&&u.push("cuda");break}u.push("cpu"),c=["cpu"]}else d=o,i.apis.IS_WEBNN_AVAILABLE&&u.push("webnn-npu","webnn-gpu","webnn-cpu","webnn"),i.apis.IS_WEBGPU_AVAILABLE&&u.push("webgpu"),u.push("wasm"),c=["wasm"];const m=d.InferenceSession;function g(M=null){if(!M)return c;switch(M){case"auto":return u;case"gpu":return u.filter(T=>["webgpu","cuda","dml","webnn-gpu"].includes(T))}if(u.includes(M))return[l[M]??M];throw new Error(`Unsupported device: "${M}". Should be one of: ${u.join(", ")}.`)}let v=null;async function y(M,T,P){v&&await v;const E=m.create(M,T);v??=E;const A=await E;return A.config=P,A}function x(M){return M instanceof d.Tensor}const w=d?.env;w?.wasm&&(!(typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope)&&!w.wasm.wasmPaths&&(w.wasm.wasmPaths=`https://cdn.jsdelivr.net/npm/@huggingface/transformers@${i.env.version}/dist/`),w.wasm.proxy=!1),w?.webgpu&&(w.webgpu.powerPreference="high-performance");function S(){return w?.wasm?.proxy}i.env.backends.onnx=w}),"./src/base/feature_extraction_utils.js":((e,t,r)=>{r.r(t),r.d(t,{FeatureExtractor:()=>o,validate_audio_inputs:()=>a});var n=r("./src/utils/constants.js"),i=r("./src/utils/generic.js"),s=r("./src/utils/hub.js");class o extends i.Callable{constructor(u){super(),this.config=u}static async from_pretrained(u,c){const d=await(0,s.getModelJSON)(u,n.FEATURE_EXTRACTOR_NAME,!0,c);return new this(d)}}function a(l,u){if(!(l instanceof Float32Array||l instanceof Float64Array))throw new Error(`${u} expects input to be a Float32Array or a Float64Array, but got ${l?.constructor?.name??typeof l} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}}),"./src/base/image_processors_utils.js":((e,t,r)=>{r.r(t),r.d(t,{ImageProcessor:()=>M,center_to_corners_format:()=>d,post_process_instance_segmentation:()=>S,post_process_object_detection:()=>h,post_process_panoptic_segmentation:()=>w,post_process_semantic_segmentation:()=>m});var n=r("./src/utils/generic.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js");r("./src/utils/image.js");var o=r("./src/utils/core.js"),a=r("./src/utils/hub.js"),l=r("./src/utils/constants.js");function u(T,P,E=0,A=null){const L=T/P;let B=(0,s.bankers_round)(L)*P;return A!==null&&B>A&&(B=Math.floor(L)*P),B<E&&(B=Math.ceil(L)*P),B}function c([T,P],E){return[Math.max(Math.floor(T/E),1)*E,Math.max(Math.floor(P/E),1)*E]}function d([T,P,E,A]){return[T-E/2,P-A/2,T+E/2,P+A/2]}function h(T,P=.5,E=null,A=!1){const L=T.logits,B=T.pred_boxes,[V,G,z]=L.dims;if(E!==null&&E.length!==V)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let K=[];for(let J=0;J<V;++J){let X=E!==null?E[J]:null,Q={boxes:[],classes:[],scores:[]},W=L[J],oe=B[J];for(let ce=0;ce<G;++ce){let D=W[ce],U=[],te;if(A){te=D.sigmoid().data;for(let ee=0;ee<te.length;++ee)te[ee]>P&&U.push(ee)}else{let ee=(0,s.max)(D.data)[1];if(ee===z-1||(te=(0,s.softmax)(D.data),te[ee]<P))continue;U.push(ee)}for(const ee of U){let pe=oe[ce].data;pe=d(pe),X!==null&&(pe=pe.map((Oe,xe)=>Oe*X[(xe+1)%2])),Q.boxes.push(pe),Q.classes.push(ee),Q.scores.push(te[ee])}}K.push(Q)}return K}function m(T,P=null){const E=T.logits,A=E.dims[0];if(P!==null&&P.length!==A)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const L=[];for(let B=0;B<A;++B){const V=P!==null?P[B]:null;let G=E[B];V!==null&&(G=(0,i.interpolate)(G,V,"bilinear",!1));const[z,K]=V??G.dims.slice(-2),J=new i.Tensor("int32",new Int32Array(z*K),[z,K]),X=G[0].data,Q=J.data;for(let ce=1;ce<G.dims[0];++ce){const D=G[ce].data;for(let U=0;U<D.length;++U)D[U]>X[U]&&(X[U]=D[U],Q[U]=ce)}const W=new Array(G.dims[0]);for(let ce=0;ce<Q.length;++ce){const D=Q[ce];W[D]=D}const oe=W.filter(ce=>ce!==void 0);L.push({segmentation:J,labels:oe})}return L}function g(T,P,E,A){const L=[],B=[],V=[];for(let G=0;G<T.dims[0];++G){const z=T[G],K=P[G],J=(0,s.max)(z.data)[1];if(J===A)continue;const Q=(0,s.softmax)(z.data)[J];Q>E&&(L.push(K),B.push(Q),V.push(J))}return[L,B,V]}function v(T,P,E,A=.5,L=.8){const B=[];let V=0,G=0;const z=P[E].data;for(let J=0;J<T.length;++J)T[J]===E&&(B.push(J),++V),z[J]>=A&&++G;let K=V>0&&G>0;return K&&(K=V/G>L),[K,B]}function y(T,P,E,A,L,B=null,V=null){const[G,z]=V??T[0].dims,K=new i.Tensor("int32",new Int32Array(G*z),[G,z]),J=[];if(V!==null)for(let ce=0;ce<T.length;++ce)T[ce]=(0,i.interpolate)(T[ce],V,"bilinear",!1);const X=new Int32Array(T[0].data.length),Q=new Float32Array(T[0].data.length);for(let ce=0;ce<T.length;++ce){let D=P[ce];const U=T[ce].data;for(let te=0;te<U.length;++te)U[te]*=D,U[te]>Q[te]&&(X[te]=ce,Q[te]=U[te])}let W=0;const oe=K.data;for(let ce=0;ce<E.length;++ce){const D=E[ce],[U,te]=v(X,T,ce,A,L);if(U){++W;for(const ee of te)oe[ee]=W;J.push({id:W,label_id:D,score:P[ce]})}}return[K,J]}function x(T,P,E=28,A=3136,L=784*1280){if(T<E||P<E)throw new Error(`height:${T} or width:${P} must be larger than factor:${E}`);if(Math.max(T,P)/Math.min(T,P)>200)throw new Error(`absolute aspect ratio must be smaller than 200, got ${Math.max(T,P)/Math.min(T,P)}`);let B=Math.round(T/E)*E,V=Math.round(P/E)*E;if(B*V>L){const G=Math.sqrt(T*P/L);B=Math.floor(T/G/E)*E,V=Math.floor(P/G/E)*E}else if(B*V<A){const G=Math.sqrt(A/(T*P));B=Math.ceil(T*G/E)*E,V=Math.ceil(P*G/E)*E}return[B,V]}function w(T,P=.5,E=.5,A=.8,L=null,B=null){L===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),L=new Set);const V=T.class_queries_logits??T.logits,z=(T.masks_queries_logits??T.pred_masks).sigmoid();let[K,J,X]=V.dims;if(X-=1,B!==null&&B.length!==K)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let Q=[];for(let W=0;W<K;++W){let oe=B!==null?B[W]:null,ce=V[W],D=z[W],[U,te,ee]=g(ce,D,P,X);if(ee.length===0){let[xe,Ie]=oe??D.dims.slice(-2),Pe=new i.Tensor("int32",new Int32Array(xe*Ie).fill(-1),[xe,Ie]);Q.push({segmentation:Pe,segments_info:[]});continue}let[pe,Oe]=y(U,te,ee,E,A,L,oe);Q.push({segmentation:pe,segments_info:Oe})}return Q}function S(T,P=.5,E=null){throw new Error("`post_process_instance_segmentation` is not yet implemented.")}class M extends n.Callable{constructor(P){super(),this.image_mean=P.image_mean??P.mean,this.image_std=P.image_std??P.std,this.resample=P.resample??2,this.do_rescale=P.do_rescale??!0,this.rescale_factor=P.rescale_factor??1/255,this.do_normalize=P.do_normalize,this.do_thumbnail=P.do_thumbnail,this.size=P.size??P.image_size,this.do_resize=P.do_resize??this.size!==void 0,this.size_divisibility=P.size_divisibility??P.size_divisor,this.do_center_crop=P.do_center_crop,this.crop_size=P.crop_size,this.do_convert_rgb=P.do_convert_rgb??!0,this.do_crop_margin=P.do_crop_margin,this.pad_size=P.pad_size,this.do_pad=P.do_pad,this.min_pixels=P.min_pixels,this.max_pixels=P.max_pixels,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=P.do_flip_channel_order??!1,this.config=P}async thumbnail(P,E,A=2){const L=P.height,B=P.width,V=E.height,G=E.width;let z=Math.min(L,V),K=Math.min(B,G);return z===L&&K===B?P:(L>B?K=Math.floor(B*z/L):B>L&&(z=Math.floor(L*K/B)),await P.resize(K,z,{resample:A}))}async crop_margin(P,E=200){const A=P.clone().grayscale(),L=(0,s.min)(A.data)[0],V=(0,s.max)(A.data)[0]-L;if(V===0)return P;const G=E/255;let z=A.width,K=A.height,J=0,X=0;const Q=A.data;for(let W=0;W<A.height;++W){const oe=W*A.width;for(let ce=0;ce<A.width;++ce)(Q[oe+ce]-L)/V<G&&(z=Math.min(z,ce),K=Math.min(K,W),J=Math.max(J,ce),X=Math.max(X,W))}return P=await P.crop([z,K,J,X]),P}pad_image(P,E,A,{mode:L="constant",center:B=!1,constant_values:V=0}={}){const[G,z,K]=E;let J,X;if(typeof A=="number"?(J=A,X=A):A==="square"?J=X=Math.max(G,z):(J=A.width,X=A.height),J!==z||X!==G){const Q=new Float32Array(J*X*K);if(Array.isArray(V))for(let ce=0;ce<Q.length;++ce)Q[ce]=V[ce%K];else V!==0&&Q.fill(V);const[W,oe]=B?[Math.floor((J-z)/2),Math.floor((X-G)/2)]:[0,0];for(let ce=0;ce<G;++ce){const D=(ce+oe)*J,U=ce*z;for(let te=0;te<z;++te){const ee=(D+te+W)*K,pe=(U+te)*K;for(let Oe=0;Oe<K;++Oe)Q[ee+Oe]=P[pe+Oe]}}if(L==="symmetric"){if(B)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const ce=G-1,D=z-1;for(let U=0;U<X;++U){const te=U*J,ee=(0,o.calculateReflectOffset)(U,ce)*z;for(let pe=0;pe<J;++pe){if(U<G&&pe<z)continue;const Oe=(te+pe)*K,xe=(ee+(0,o.calculateReflectOffset)(pe,D))*K;for(let Ie=0;Ie<K;++Ie)Q[Oe+Ie]=P[xe+Ie]}}}P=Q,E=[X,J,K]}return[P,E]}rescale(P){for(let E=0;E<P.length;++E)P[E]=this.rescale_factor*P[E]}get_resize_output_image_size(P,E){const[A,L]=P.size;let B,V;if(this.do_thumbnail){const{height:G,width:z}=E;B=Math.min(G,z)}else Number.isInteger(E)?(B=E,V=this.config.max_size??B):E!==void 0&&(B=E.shortest_edge,V=E.longest_edge);if(B!==void 0||V!==void 0){const G=B===void 0?1:Math.max(B/A,B/L),z=A*G,K=L*G,J=V===void 0?1:Math.min(V/z,V/K);let X=Math.floor(Number((z*J).toFixed(2))),Q=Math.floor(Number((K*J).toFixed(2)));return this.size_divisibility!==void 0&&([X,Q]=c([X,Q],this.size_divisibility)),[X,Q]}else if(E!==void 0&&E.width!==void 0&&E.height!==void 0){let G=E.width,z=E.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let K=z/L,J=G/A;Math.abs(1-J)<Math.abs(1-K)?K=J:J=K,z=u(K*L,this.config.ensure_multiple_of),G=u(J*A,this.config.ensure_multiple_of)}return[G,z]}else{if(this.size_divisibility!==void 0)return c([A,L],this.size_divisibility);if(this.min_pixels!==void 0&&this.max_pixels!==void 0){const G=this.config.patch_size*this.config.merge_size;return x(L,A,G,this.min_pixels,this.max_pixels)}else throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(E)}`)}}async resize(P){const[E,A]=this.get_resize_output_image_size(P,this.size);return await P.resize(E,A,{resample:this.resample})}async preprocess(P,{do_normalize:E=null,do_pad:A=null,do_convert_rgb:L=null,do_convert_grayscale:B=null,do_flip_channel_order:V=null}={}){this.do_crop_margin&&(P=await this.crop_margin(P));const[G,z]=P.size;if(L??this.do_convert_rgb?P=P.rgb():B&&(P=P.grayscale()),this.do_resize&&(P=await this.resize(P)),this.do_thumbnail&&(P=await this.thumbnail(P,this.size,this.resample)),this.do_center_crop){let W,oe;Number.isInteger(this.crop_size)?(W=this.crop_size,oe=this.crop_size):(W=this.crop_size.width,oe=this.crop_size.height),P=await P.center_crop(W,oe)}const K=[P.height,P.width];let J=Float32Array.from(P.data),X=[P.height,P.width,P.channels];if(this.do_rescale&&this.rescale(J),E??this.do_normalize){let W=this.image_mean;Array.isArray(this.image_mean)||(W=new Array(P.channels).fill(W));let oe=this.image_std;if(Array.isArray(this.image_std)||(oe=new Array(P.channels).fill(W)),W.length!==P.channels||oe.length!==P.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${W.length}) and \`image_std\` (${oe.length}) must match the number of channels in the image (${P.channels}).`);for(let ce=0;ce<J.length;ce+=P.channels)for(let D=0;D<P.channels;++D)J[ce+D]=(J[ce+D]-W[D])/oe[D]}if(A??this.do_pad){if(this.pad_size)[J,X]=this.pad_image(J,[P.height,P.width,P.channels],this.pad_size);else if(this.size_divisibility){const[W,oe]=c([X[1],X[0]],this.size_divisibility);[J,X]=this.pad_image(J,X,{width:W,height:oe})}}if(V??this.do_flip_channel_order){if(X[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let W=0;W<J.length;W+=3){const oe=J[W];J[W]=J[W+2],J[W+2]=oe}}const Q=new i.Tensor("float32",J,X).permute(2,0,1);return{original_size:[z,G],reshaped_input_size:K,pixel_values:Q}}async _call(P,...E){Array.isArray(P)||(P=[P]);const A=await Promise.all(P.map(B=>this.preprocess(B)));return{pixel_values:(0,i.stack)(A.map(B=>B.pixel_values),0),original_sizes:A.map(B=>B.original_size),reshaped_input_sizes:A.map(B=>B.reshaped_input_size)}}static async from_pretrained(P,E){const A=await(0,a.getModelJSON)(P,l.IMAGE_PROCESSOR_NAME,!0,E);return new this(A)}}}),"./src/base/processing_utils.js":((e,t,r)=>{r.r(t),r.d(t,{Processor:()=>o});var n=r("./src/utils/constants.js"),i=r("./src/utils/generic.js"),s=r("./src/utils/hub.js");class o extends i.Callable{static classes=["image_processor_class","tokenizer_class","feature_extractor_class"];static uses_processor_config=!1;static uses_chat_template_file=!1;constructor(l,u,c){super(),this.config=l,this.components=u,this.chat_template=c}get image_processor(){return this.components.image_processor}get tokenizer(){return this.components.tokenizer}get feature_extractor(){return this.components.feature_extractor}apply_chat_template(l,u={}){if(!this.tokenizer)throw new Error("Unable to apply chat template without a tokenizer.");return this.tokenizer.apply_chat_template(l,{tokenize:!1,chat_template:this.chat_template??void 0,...u})}batch_decode(...l){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.batch_decode(...l)}decode(...l){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.decode(...l)}async _call(l,...u){for(const c of[this.image_processor,this.feature_extractor,this.tokenizer])if(c)return c(l,...u);throw new Error("No image processor, feature extractor, or tokenizer found.")}static async from_pretrained(l,u){const[c,d,h]=await Promise.all([this.uses_processor_config?(0,s.getModelJSON)(l,n.PROCESSOR_NAME,!0,u):{},Promise.all(this.classes.filter(m=>m in this).map(async m=>{const g=await this[m].from_pretrained(l,u);return[m.replace(/_class$/,""),g]})).then(Object.fromEntries),this.uses_chat_template_file?(0,s.getModelText)(l,n.CHAT_TEMPLATE_NAME,!0,u):null]);return new this(c,d,h)}}}),"./src/configs.js":((e,t,r)=>{r.r(t),r.d(t,{AutoConfig:()=>u,PretrainedConfig:()=>l,getKeyValueShapes:()=>a});var n=r("./src/utils/core.js"),i=r("./src/utils/hub.js");async function s(c,d){return await(0,i.getModelJSON)(c,"config.json",!0,d)}function o(c){const d={};let h={};switch(c.model_type){case"llava":case"paligemma":case"gemma3":case"florence2":case"llava_onevision":case"idefics3":case"ultravox":case"smolvlm":case"gemma3n":h=o(c.text_config);break;case"moondream1":h=o(c.phi_config);break;case"musicgen":h=o(c.decoder);break;case"multi_modality":h=o(c.language_config);break;case"gpt2":case"gptj":case"jais":case"codegen":case"gpt_bigcode":d.num_heads="n_head",d.num_layers="n_layer",d.hidden_size="n_embd";break;case"gpt_neox":case"stablelm":case"opt":case"falcon":d.num_heads="num_attention_heads",d.num_layers="num_hidden_layers",d.hidden_size="hidden_size";break;case"llama":case"olmo":case"olmo2":case"mobilellm":case"granite":case"cohere":case"mistral":case"starcoder2":case"qwen2":case"qwen2_vl":case"phi":case"phi3":case"phi3_v":case"llava_qwen2":d.num_heads="num_key_value_heads",d.num_layers="num_hidden_layers",d.hidden_size="hidden_size",d.num_attention_heads="num_attention_heads";break;case"qwen3":case"gemma":case"gemma2":case"gemma3_text":case"gemma3n_text":case"glm":case"helium":d.num_heads="num_key_value_heads",d.num_layers="num_hidden_layers",d.dim_kv="head_dim";break;case"openelm":d.num_heads="num_kv_heads",d.num_layers="num_transformer_layers",d.dim_kv="head_dim";break;case"gpt_neo":case"donut-swin":d.num_heads="num_heads",d.num_layers="num_layers",d.hidden_size="hidden_size";break;case"bloom":d.num_heads="n_head",d.num_layers="n_layer",d.hidden_size="hidden_size";break;case"mpt":d.num_heads="n_heads",d.num_layers="n_layers",d.hidden_size="d_model";break;case"exaone":d.num_heads="num_key_value_heads",d.num_layers="num_layers",d.dim_kv="head_dim",d.num_attention_heads="num_attention_heads";break;case"t5":case"mt5":case"longt5":d.num_decoder_layers="num_decoder_layers",d.num_decoder_heads="num_heads",d.decoder_dim_kv="d_kv",d.num_encoder_layers="num_layers",d.num_encoder_heads="num_heads",d.encoder_dim_kv="d_kv";break;case"bart":case"mbart":case"marian":case"whisper":case"lite-whisper":case"m2m_100":case"blenderbot":case"blenderbot-small":case"florence2_language":d.num_decoder_layers="decoder_layers",d.num_decoder_heads="decoder_attention_heads",d.decoder_hidden_size="d_model",d.num_encoder_layers="encoder_layers",d.num_encoder_heads="encoder_attention_heads",d.encoder_hidden_size="d_model";break;case"speecht5":d.num_decoder_layers="decoder_layers",d.num_decoder_heads="decoder_attention_heads",d.decoder_hidden_size="hidden_size",d.num_encoder_layers="encoder_layers",d.num_encoder_heads="encoder_attention_heads",d.encoder_hidden_size="hidden_size";break;case"trocr":d.num_encoder_layers=d.num_decoder_layers="decoder_layers",d.num_encoder_heads=d.num_decoder_heads="decoder_attention_heads",d.encoder_hidden_size=d.decoder_hidden_size="d_model";break;case"musicgen_decoder":d.num_encoder_layers=d.num_decoder_layers="num_hidden_layers",d.num_encoder_heads=d.num_decoder_heads="num_attention_heads",d.encoder_hidden_size=d.decoder_hidden_size="hidden_size";break;case"moonshine":d.num_decoder_layers="decoder_num_hidden_layers",d.num_decoder_heads="decoder_num_key_value_heads",d.num_encoder_layers="encoder_num_hidden_layers",d.num_encoder_heads="encoder_num_key_value_heads",d.encoder_hidden_size=d.decoder_hidden_size="hidden_size";break;case"vision-encoder-decoder":const g=o(c.decoder),v="num_decoder_layers"in g,y=(0,n.pick)(c,["model_type","is_encoder_decoder"]);return v?(y.num_decoder_layers=g.num_decoder_layers,y.num_decoder_heads=g.num_decoder_heads,y.decoder_hidden_size=g.decoder_hidden_size,y.num_encoder_layers=g.num_encoder_layers,y.num_encoder_heads=g.num_encoder_heads,y.encoder_hidden_size=g.encoder_hidden_size):(y.num_layers=g.num_layers,y.num_heads=g.num_heads,y.hidden_size=g.hidden_size),y}const m={...h,...(0,n.pick)(c,["model_type","multi_query","is_encoder_decoder"])};for(const g in d)m[g]=c[d[g]];return m}function a(c,{prefix:d="past_key_values",batch_size:h=1}={}){const m={},g=c.normalized_config;if(g.is_encoder_decoder&&"num_encoder_heads"in g&&"num_decoder_heads"in g){const v=g.encoder_dim_kv??g.encoder_hidden_size/g.num_encoder_heads,y=g.decoder_dim_kv??g.decoder_hidden_size/g.num_decoder_heads,x=[h,g.num_encoder_heads,0,v],w=[h,g.num_decoder_heads,0,y];for(let S=0;S<g.num_decoder_layers;++S)m[`${d}.${S}.encoder.key`]=x,m[`${d}.${S}.encoder.value`]=x,m[`${d}.${S}.decoder.key`]=w,m[`${d}.${S}.decoder.value`]=w}else{const v=g.num_heads,y=g.num_layers,x=g.dim_kv??g.hidden_size/(g.num_attention_heads??v);if(g.model_type==="falcon"){const w=[h*v,0,x];for(let S=0;S<y;++S)m[`${d}.${S}.key`]=w,m[`${d}.${S}.value`]=w}else if(g.multi_query){const w=[h*v,0,2*x];for(let S=0;S<y;++S)m[`${d}.${S}.key_value`]=w}else if(g.model_type==="bloom"){const w=[h*v,x,0],S=[h*v,0,x];for(let M=0;M<y;++M)m[`${d}.${M}.key`]=w,m[`${d}.${M}.value`]=S}else if(g.model_type==="openelm")for(let w=0;w<y;++w){const S=[h,v[w],0,x];m[`${d}.${w}.key`]=S,m[`${d}.${w}.value`]=S}else{const w=[h,v,0,x];for(let S=0;S<y;++S)m[`${d}.${S}.key`]=w,m[`${d}.${S}.value`]=w}}return m}class l{model_type=null;is_encoder_decoder=!1;max_position_embeddings;"transformers.js_config";constructor(d){Object.assign(this,d),this.normalized_config=o(this)}static async from_pretrained(d,{progress_callback:h=null,config:m=null,cache_dir:g=null,local_files_only:v=!1,revision:y="main"}={}){m&&!(m instanceof l)&&(m=new l(m));const x=m??await s(d,{progress_callback:h,config:m,cache_dir:g,local_files_only:v,revision:y});return new this(x)}}class u{static async from_pretrained(...d){return l.from_pretrained(...d)}}}),"./src/env.js":((e,t,r)=>{r.r(t),r.d(t,{apis:()=>x,env:()=>E});var n=r("?db59"),i=r("?383f"),s=r("?fa4b");const o="3.6.0",a=typeof window<"u"&&typeof window.document<"u",l=typeof self<"u"&&self.constructor?.name==="DedicatedWorkerGlobalScope",u=typeof self<"u"&&"caches"in self,c=typeof navigator<"u"&&"gpu"in navigator,d=typeof navigator<"u"&&"ml"in navigator,h=typeof process<"u",m=h&&process?.release?.name==="node",g=!A(n),v=!A(i),y=typeof globalThis.Deno<"u",x=Object.freeze({IS_BROWSER_ENV:a,IS_WEBWORKER_ENV:l,IS_WEB_CACHE_AVAILABLE:u,IS_WEBGPU_AVAILABLE:c,IS_WEBNN_AVAILABLE:d,IS_PROCESS_AVAILABLE:h,IS_NODE_ENV:m,IS_FS_AVAILABLE:g,IS_PATH_AVAILABLE:v}),w=g&&v;let S="./";if(w){const L=Object(import.meta).url;L?S=i.dirname(i.dirname(s.fileURLToPath(L))):typeof __dirname<"u"&&(S=i.dirname(__dirname))}const M=w?i.join(S,"/.cache/"):null,T="/models/",P=w?i.join(S,T):T,E={version:o,backends:{onnx:{}},allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!(a||l),localModelPath:P,useFS:g,useBrowserCache:u&&!y,useFSCache:g,cacheDir:M,useCustomCache:!1,customCache:null};function A(L){return Object.keys(L).length===0}}),"./src/generation/configuration_utils.js":((e,t,r)=>{r.r(t),r.d(t,{GenerationConfig:()=>i});var n=r("./src/utils/core.js");class i{max_length=20;max_new_tokens=null;min_length=0;min_new_tokens=null;early_stopping=!1;max_time=null;do_sample=!1;num_beams=1;num_beam_groups=1;penalty_alpha=null;use_cache=!0;temperature=1;top_k=50;top_p=1;typical_p=1;epsilon_cutoff=0;eta_cutoff=0;diversity_penalty=0;repetition_penalty=1;encoder_repetition_penalty=1;length_penalty=1;no_repeat_ngram_size=0;bad_words_ids=null;force_words_ids=null;renormalize_logits=!1;constraints=null;forced_bos_token_id=null;forced_eos_token_id=null;remove_invalid_values=!1;exponential_decay_length_penalty=null;suppress_tokens=null;streamer=null;begin_suppress_tokens=null;forced_decoder_ids=null;guidance_scale=null;num_return_sequences=1;output_attentions=!1;output_hidden_states=!1;output_scores=!1;return_dict_in_generate=!1;pad_token_id=null;bos_token_id=null;eos_token_id=null;encoder_no_repeat_ngram_size=0;decoder_start_token_id=null;generation_kwargs={};constructor(o){Object.assign(this,(0,n.pick)(o,Object.getOwnPropertyNames(this)))}}}),"./src/generation/logits_process.js":((e,t,r)=>{r.r(t),r.d(t,{ClassifierFreeGuidanceLogitsProcessor:()=>x,ForcedBOSTokenLogitsProcessor:()=>l,ForcedEOSTokenLogitsProcessor:()=>u,LogitsProcessor:()=>s,LogitsProcessorList:()=>a,LogitsWarper:()=>o,MinLengthLogitsProcessor:()=>g,MinNewTokensLengthLogitsProcessor:()=>v,NoBadWordsLogitsProcessor:()=>y,NoRepeatNGramLogitsProcessor:()=>h,RepetitionPenaltyLogitsProcessor:()=>m,SuppressTokensAtBeginLogitsProcessor:()=>c,TemperatureLogitsWarper:()=>w,TopKLogitsWarper:()=>M,TopPLogitsWarper:()=>S,WhisperTimeStampLogitsProcessor:()=>d});var n=r("./src/utils/generic.js");r("./src/utils/tensor.js");var i=r("./src/utils/maths.js");class s extends n.Callable{_call(P,E){throw Error("`_call` should be implemented in a subclass")}}class o extends n.Callable{_call(P,E){throw Error("`_call` should be implemented in a subclass")}}class a extends n.Callable{constructor(){super(),this.processors=[]}push(P){this.processors.push(P)}extend(P){this.processors.push(...P)}_call(P,E){let A=E;for(const L of this.processors)A=L(P,A);return A}[Symbol.iterator](){return this.processors.values()}}class l extends s{constructor(P){super(),this.bos_token_id=P}_call(P,E){for(let A=0;A<P.length;++A)if(P[A].length===1){const L=E[A].data;L.fill(-1/0),L[this.bos_token_id]=0}return E}}class u extends s{constructor(P,E){super(),this.max_length=P,this.eos_token_id=Array.isArray(E)?E:[E]}_call(P,E){for(let A=0;A<P.length;++A)if(P[A].length===this.max_length-1){const L=E[A].data;L.fill(-1/0);for(const B of this.eos_token_id)L[B]=0}return E}}class c extends s{constructor(P,E){super(),this.begin_suppress_tokens=P,this.begin_index=E}_call(P,E){for(let A=0;A<P.length;++A)if(P[A].length===this.begin_index){const L=E[A].data;for(const B of this.begin_suppress_tokens)L[B]=-1/0}return E}}class d extends s{constructor(P,E){super(),this.eos_token_id=Array.isArray(P.eos_token_id)?P.eos_token_id[0]:P.eos_token_id,this.no_timestamps_token_id=P.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=E.length,E.at(-1)===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=P.max_initial_timestamp_index}_call(P,E){for(let A=0;A<P.length;++A){const L=E[A].data;if(L[this.no_timestamps_token_id]=-1/0,P[A].length===this.begin_index-1){L.fill(-1/0),L[this.timestamp_begin]=0;continue}const B=P[A].slice(this.begin_index),V=B.length>=1&&B[B.length-1]>=this.timestamp_begin,G=B.length<2||B[B.length-2]>=this.timestamp_begin;if(V&&(G?L.subarray(this.timestamp_begin).fill(-1/0):L.subarray(0,this.eos_token_id).fill(-1/0)),P[A].length===this.begin_index&&this.max_initial_timestamp_index!==null){const X=this.timestamp_begin+this.max_initial_timestamp_index;L.subarray(X+1).fill(-1/0)}const z=(0,i.log_softmax)(L),K=Math.log(z.subarray(this.timestamp_begin).map(Math.exp).reduce((X,Q)=>X+Q)),J=(0,i.max)(z.subarray(0,this.timestamp_begin))[0];K>J&&L.subarray(0,this.timestamp_begin).fill(-1/0)}return E}}class h extends s{constructor(P){super(),this.no_repeat_ngram_size=P}getNgrams(P){const E=P.length,A=[];for(let B=0;B<E+1-this.no_repeat_ngram_size;++B){const V=[];for(let G=0;G<this.no_repeat_ngram_size;++G)V.push(P[B+G]);A.push(V.map(Number))}const L=new Map;for(const B of A){const V=B.slice(0,B.length-1),G=JSON.stringify(V),z=L.get(G)??[];z.push(B[B.length-1]),L.set(G,z)}return L}getGeneratedNgrams(P,E){const A=E.slice(E.length+1-this.no_repeat_ngram_size,E.length);return P.get(JSON.stringify(A.map(Number)))??[]}calcBannedNgramTokens(P){const E=[];if(P.length+1<this.no_repeat_ngram_size)return E;{const A=this.getNgrams(P);return this.getGeneratedNgrams(A,P)}}_call(P,E){for(let A=0;A<P.length;++A){const L=E[A].data,B=this.calcBannedNgramTokens(P[A]);for(const V of B)L[V]=-1/0}return E}}class m extends s{constructor(P){super(),this.penalty=P}_call(P,E){for(let A=0;A<P.length;++A){const L=E[A].data;for(const B of new Set(P[A])){const V=Number(B);L[V]<0?L[V]*=this.penalty:L[V]/=this.penalty}}return E}}class g extends s{constructor(P,E){super(),this.min_length=P,this.eos_token_id=Array.isArray(E)?E:[E]}_call(P,E){for(let A=0;A<P.length;++A)if(P[A].length<this.min_length){const L=E[A].data;for(const B of this.eos_token_id)L[B]=-1/0}return E}}class v extends s{constructor(P,E,A){super(),this.prompt_length_to_skip=P,this.min_new_tokens=E,this.eos_token_id=Array.isArray(A)?A:[A]}_call(P,E){for(let A=0;A<P.length;++A)if(P[A].length-this.prompt_length_to_skip<this.min_new_tokens){const B=E[A].data;for(const V of this.eos_token_id)B[V]=-1/0}return E}}class y extends s{constructor(P,E){super(),this.bad_words_ids=P,this.eos_token_id=Array.isArray(E)?E:[E]}_call(P,E){for(let A=0;A<P.length;++A){const L=E[A].data,B=P[A];for(const V of this.bad_words_ids){if(B.length<V.length-1)continue;let G=!0;for(let z=1;z<=V.length-1;++z)if(V.at(-z-1)!=B.at(-z)){G=!1;break}G&&(L[V.at(-1)]=-1/0)}}return E}}class x extends s{constructor(P){if(super(),P<=1)throw new Error(`Require guidance scale >1 to use the classifier free guidance processor, got guidance scale ${P}.`);this.guidance_scale=P}_call(P,E){if(E.dims[0]!==2*P.length)throw new Error(`Logits should have twice the batch size of the input ids, the first half of batches corresponding to the conditional inputs, and the second half of batches corresponding to the unconditional inputs. Got batch size ${E.dims[0]} for the logits and ${P.length} for the input ids.`);const A=P.length,L=E.slice([0,A],null),B=E.slice([A,E.dims[0]],null);for(let V=0;V<B.data.length;++V)B.data[V]+=(L.data[V]-B.data[V])*this.guidance_scale;return B}}class w extends o{constructor(P){super(),this.temperature=P}_call(P,E){const A=E.data;for(let L=0;L<A.length;++L)A[L]/=this.temperature;return E}}class S extends o{constructor(P,{filter_value:E=-1/0,min_tokens_to_keep:A=1}={}){if(super(),P<0||P>1)throw new Error(`\`top_p\` must be a float > 0 and < 1, but is ${P}`);if(!Number.isInteger(A)||A<1)throw new Error(`\`min_tokens_to_keep\` must be a positive integer, but is ${A}`);this.top_p=P,this.filter_value=E,this.min_tokens_to_keep=A}}class M extends o{constructor(P,{filter_value:E=-1/0,min_tokens_to_keep:A=1}={}){if(super(),!Number.isInteger(P)||P<0)throw new Error(`\`top_k\` must be a positive integer, but is ${P}`);this.top_k=Math.max(P,A),this.filter_value=E}}}),"./src/generation/logits_sampler.js":((e,t,r)=>{r.r(t),r.d(t,{LogitsSampler:()=>o});var n=r("./src/utils/generic.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js");r("./src/generation/configuration_utils.js");class o extends n.Callable{constructor(d){super(),this.generation_config=d}async _call(d){return this.sample(d)}async sample(d){throw Error("sample should be implemented in subclasses.")}getLogits(d,h){let m=d.dims.at(-1),g=d.data;if(h===-1)g=g.slice(-m);else{let v=h*m;g=g.slice(v,v+m)}return g}randomSelect(d){let h=0;for(let g=0;g<d.length;++g)h+=d[g];let m=Math.random()*h;for(let g=0;g<d.length;++g)if(m-=d[g],m<=0)return g;return 0}static getSampler(d){if(d.do_sample)return new l(d);if(d.num_beams>1)return new u(d);if(d.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${d.num_return_sequences}.`);return new a(d)}}class a extends o{async sample(d){const h=(0,s.max)(d.data)[1];return[[BigInt(h),0]]}}class l extends o{async sample(d){let h=d.dims.at(-1);this.generation_config.top_k>0&&(h=Math.min(this.generation_config.top_k,h));const[m,g]=await(0,i.topk)(d,h),v=(0,s.softmax)(m.data);return Array.from({length:this.generation_config.num_beams},()=>{const y=this.randomSelect(v);return[g.data[y],Math.log(v[y])]})}}class u extends o{async sample(d){let h=d.dims.at(-1);this.generation_config.top_k>0&&(h=Math.min(this.generation_config.top_k,h));const[m,g]=await(0,i.topk)(d,h),v=(0,s.softmax)(m.data);return Array.from({length:this.generation_config.num_beams},(y,x)=>[g.data[x],Math.log(v[x])])}}}),"./src/generation/stopping_criteria.js":((e,t,r)=>{r.r(t),r.d(t,{EosTokenCriteria:()=>a,InterruptableStoppingCriteria:()=>l,MaxLengthCriteria:()=>o,StoppingCriteria:()=>i,StoppingCriteriaList:()=>s});var n=r("./src/utils/generic.js");class i extends n.Callable{_call(c,d){throw Error("StoppingCriteria needs to be subclassed")}}class s extends n.Callable{constructor(){super(),this.criteria=[]}push(c){this.criteria.push(c)}extend(c){c instanceof s?c=c.criteria:c instanceof i&&(c=[c]),this.criteria.push(...c)}_call(c,d){const h=new Array(c.length).fill(!1);for(const m of this.criteria){const g=m(c,d);for(let v=0;v<h.length;++v)h[v]||=g[v]}return h}[Symbol.iterator](){return this.criteria.values()}}class o extends i{constructor(c,d=null){super(),this.max_length=c,this.max_position_embeddings=d}_call(c){return c.map(d=>d.length>=this.max_length)}}class a extends i{constructor(c){super(),Array.isArray(c)||(c=[c]),this.eos_token_id=c}_call(c,d){return c.map(h=>{const m=h.at(-1);return this.eos_token_id.some(g=>m==g)})}}class l extends i{constructor(){super(),this.interrupted=!1}interrupt(){this.interrupted=!0}reset(){this.interrupted=!1}_call(c,d){return new Array(c.length).fill(this.interrupted)}}}),"./src/generation/streamers.js":((e,t,r)=>{r.r(t),r.d(t,{BaseStreamer:()=>o,TextStreamer:()=>l,WhisperTextStreamer:()=>u});var n=r("./src/utils/core.js"),i=r("./src/tokenizers.js"),s=r("./src/env.js");class o{put(d){throw Error("Not implemented")}end(){throw Error("Not implemented")}}const a=s.apis.IS_PROCESS_AVAILABLE?c=>process.stdout.write(c):c=>console.log(c);class l extends o{constructor(d,{skip_prompt:h=!1,callback_function:m=null,token_callback_function:g=null,skip_special_tokens:v=!0,decode_kwargs:y={},...x}={}){super(),this.tokenizer=d,this.skip_prompt=h,this.callback_function=m??a,this.token_callback_function=g,this.decode_kwargs={skip_special_tokens:v,...y,...x},this.token_cache=[],this.print_len=0,this.next_tokens_are_prompt=!0}put(d){if(d.length>1)throw Error("TextStreamer only supports batch size of 1");const h=this.next_tokens_are_prompt;if(h&&(this.next_tokens_are_prompt=!1,this.skip_prompt))return;const m=d[0];this.token_callback_function?.(m),this.token_cache=(0,n.mergeArrays)(this.token_cache,m);const g=this.tokenizer.decode(this.token_cache,this.decode_kwargs);let v;h||g.endsWith(`
`)?(v=g.slice(this.print_len),this.token_cache=[],this.print_len=0):g.length>0&&(0,i.is_chinese_char)(g.charCodeAt(g.length-1))?(v=g.slice(this.print_len),this.print_len+=v.length):(v=g.slice(this.print_len,g.lastIndexOf(" ")+1),this.print_len+=v.length),this.on_finalized_text(v,!1)}end(){let d;this.token_cache.length>0?(d=this.tokenizer.decode(this.token_cache,this.decode_kwargs).slice(this.print_len),this.token_cache=[],this.print_len=0):d="",this.next_tokens_are_prompt=!0,this.on_finalized_text(d,!0)}on_finalized_text(d,h){d.length>0&&this.callback_function?.(d),h&&this.callback_function===a&&s.apis.IS_PROCESS_AVAILABLE&&this.callback_function?.(`
`)}}class u extends l{constructor(d,{skip_prompt:h=!1,callback_function:m=null,token_callback_function:g=null,on_chunk_start:v=null,on_chunk_end:y=null,on_finalize:x=null,time_precision:w=.02,skip_special_tokens:S=!0,decode_kwargs:M={}}={}){super(d,{skip_prompt:h,skip_special_tokens:S,callback_function:m,token_callback_function:g,decode_kwargs:M}),this.timestamp_begin=d.timestamp_begin,this.on_chunk_start=v,this.on_chunk_end=y,this.on_finalize=x,this.time_precision=w,this.waiting_for_timestamp=!1}put(d){if(d.length>1)throw Error("WhisperTextStreamer only supports batch size of 1");const h=d[0];if(h.length===1){const m=Number(h[0])-this.timestamp_begin;if(m>=0){const g=m*this.time_precision;this.waiting_for_timestamp?this.on_chunk_end?.(g):this.on_chunk_start?.(g),this.waiting_for_timestamp=!this.waiting_for_timestamp,this.token_callback_function?.(h);return}}return super.put(d)}end(){super.end(),this.on_finalize?.()}}}),"./src/models.js":((e,t,r)=>{r.r(t),r.d(t,{ASTForAudioClassification:()=>gh,ASTModel:()=>Na,ASTPreTrainedModel:()=>kl,AlbertForMaskedLM:()=>_e,AlbertForQuestionAnswering:()=>de,AlbertForSequenceClassification:()=>q,AlbertModel:()=>ke,AlbertPreTrainedModel:()=>ao,AutoModel:()=>Z0,AutoModelForAudioClassification:()=>nb,AutoModelForAudioFrameClassification:()=>sM,AutoModelForAudioTextToText:()=>aM,AutoModelForCTC:()=>Ip,AutoModelForCausalLM:()=>Ap,AutoModelForDepthEstimation:()=>ny,AutoModelForDocumentQuestionAnswering:()=>ib,AutoModelForImageClassification:()=>Zv,AutoModelForImageFeatureExtraction:()=>oM,AutoModelForImageMatting:()=>ry,AutoModelForImageSegmentation:()=>nM,AutoModelForImageTextToText:()=>Np,AutoModelForImageToImage:()=>jp,AutoModelForMaskGeneration:()=>kp,AutoModelForMaskedLM:()=>hu,AutoModelForNormalEstimation:()=>$p,AutoModelForObjectDetection:()=>tb,AutoModelForPoseEstimation:()=>sb,AutoModelForQuestionAnswering:()=>Op,AutoModelForSemanticSegmentation:()=>ey,AutoModelForSeq2SeqLM:()=>Ps,AutoModelForSequenceClassification:()=>eb,AutoModelForSpeechSeq2Seq:()=>Qv,AutoModelForTextToSpectrogram:()=>rM,AutoModelForTextToWaveform:()=>il,AutoModelForTokenClassification:()=>tM,AutoModelForUniversalSegmentation:()=>iM,AutoModelForVision2Seq:()=>Jv,AutoModelForXVector:()=>ty,AutoModelForZeroShotObjectDetection:()=>rb,BartForConditionalGeneration:()=>wr,BartForSequenceClassification:()=>Xr,BartModel:()=>Fr,BartPretrainedModel:()=>dr,BaseModelOutput:()=>$e,BeitForImageClassification:()=>Ga,BeitModel:()=>go,BeitPreTrainedModel:()=>Ls,BertForMaskedLM:()=>Ve,BertForQuestionAnswering:()=>et,BertForSequenceClassification:()=>He,BertForTokenClassification:()=>Qe,BertModel:()=>Le,BertPreTrainedModel:()=>Ne,BlenderbotForConditionalGeneration:()=>Cn,BlenderbotModel:()=>En,BlenderbotPreTrainedModel:()=>Ir,BlenderbotSmallForConditionalGeneration:()=>yn,BlenderbotSmallModel:()=>bs,BlenderbotSmallPreTrainedModel:()=>Vi,BloomForCausalLM:()=>Yo,BloomModel:()=>Ih,BloomPreTrainedModel:()=>jg,CLIPModel:()=>Nl,CLIPPreTrainedModel:()=>Go,CLIPSegForImageSegmentation:()=>kt,CLIPSegModel:()=>Ll,CLIPSegPreTrainedModel:()=>Qu,CLIPTextModel:()=>Dl,CLIPTextModelWithProjection:()=>gd,CLIPVisionModel:()=>xg,CLIPVisionModelWithProjection:()=>Mh,CamembertForMaskedLM:()=>sr,CamembertForQuestionAnswering:()=>Rn,CamembertForSequenceClassification:()=>kr,CamembertForTokenClassification:()=>Pr,CamembertModel:()=>Rr,CamembertPreTrainedModel:()=>wt,CausalLMOutput:()=>C,CausalLMOutputWithPast:()=>N,ChineseCLIPModel:()=>Xu,ChineseCLIPPreTrainedModel:()=>Ku,ClapAudioModelWithProjection:()=>Cv,ClapModel:()=>Qd,ClapPreTrainedModel:()=>bc,ClapTextModelWithProjection:()=>U0,CodeGenForCausalLM:()=>nc,CodeGenModel:()=>Ko,CodeGenPreTrainedModel:()=>vi,CohereForCausalLM:()=>A0,CohereModel:()=>C0,CoherePreTrainedModel:()=>xd,ConvBertForMaskedLM:()=>hi,ConvBertForQuestionAnswering:()=>se,ConvBertForSequenceClassification:()=>Z,ConvBertForTokenClassification:()=>be,ConvBertModel:()=>jt,ConvBertPreTrainedModel:()=>gn,ConvNextForImageClassification:()=>gc,ConvNextModel:()=>mc,ConvNextPreTrainedModel:()=>pc,ConvNextV2ForImageClassification:()=>Yh,ConvNextV2Model:()=>ii,ConvNextV2PreTrainedModel:()=>Xg,DFineForObjectDetection:()=>Wg,DFineModel:()=>Vg,DFinePreTrainedModel:()=>uc,DPTForDepthEstimation:()=>Bd,DPTModel:()=>qg,DPTPreTrainedModel:()=>cc,DacDecoderModel:()=>$i,DacDecoderOutput:()=>rf,DacEncoderModel:()=>Mc,DacEncoderOutput:()=>el,DacModel:()=>wp,DacPreTrainedModel:()=>Za,DebertaForMaskedLM:()=>Pi,DebertaForQuestionAnswering:()=>no,DebertaForSequenceClassification:()=>Bi,DebertaForTokenClassification:()=>zi,DebertaModel:()=>Tn,DebertaPreTrainedModel:()=>Lr,DebertaV2ForMaskedLM:()=>Wn,DebertaV2ForQuestionAnswering:()=>zo,DebertaV2ForSequenceClassification:()=>vs,DebertaV2ForTokenClassification:()=>ri,DebertaV2Model:()=>io,DebertaV2PreTrainedModel:()=>Ei,DecisionTransformerModel:()=>Lv,DecisionTransformerPreTrainedModel:()=>Rv,DeiTForImageClassification:()=>Uh,DeiTModel:()=>zh,DeiTPreTrainedModel:()=>Ka,DepthAnythingForDepthEstimation:()=>dc,DepthAnythingPreTrainedModel:()=>Hg,DepthProForDepthEstimation:()=>ru,DepthProPreTrainedModel:()=>Hh,DetrForObjectDetection:()=>Fh,DetrForSegmentation:()=>Ii,DetrModel:()=>Lh,DetrObjectDetectionOutput:()=>ji,DetrPreTrainedModel:()=>jd,DetrSegmentationOutput:()=>Jr,Dinov2ForImageClassification:()=>Fs,Dinov2Model:()=>Qh,Dinov2PreTrainedModel:()=>Gd,Dinov2WithRegistersForImageClassification:()=>Jh,Dinov2WithRegistersModel:()=>vc,Dinov2WithRegistersPreTrainedModel:()=>qi,DistilBertForMaskedLM:()=>it,DistilBertForQuestionAnswering:()=>Ci,DistilBertForSequenceClassification:()=>ts,DistilBertForTokenClassification:()=>Kn,DistilBertModel:()=>es,DistilBertPreTrainedModel:()=>Ur,DonutSwinModel:()=>qn,DonutSwinPreTrainedModel:()=>Ln,EfficientNetForImageClassification:()=>W0,EfficientNetModel:()=>si,EfficientNetPreTrainedModel:()=>ou,ElectraForMaskedLM:()=>Je,ElectraForQuestionAnswering:()=>bt,ElectraForSequenceClassification:()=>Be,ElectraForTokenClassification:()=>Nt,ElectraModel:()=>je,ElectraPreTrainedModel:()=>we,EsmForMaskedLM:()=>vn,EsmForSequenceClassification:()=>pi,EsmForTokenClassification:()=>ys,EsmModel:()=>At,EsmPreTrainedModel:()=>nt,ExaoneForCausalLM:()=>Ft,ExaoneModel:()=>Tt,ExaonePreTrainedModel:()=>pt,FalconForCausalLM:()=>Ev,FalconModel:()=>dp,FalconPreTrainedModel:()=>Yd,FastViTForImageClassification:()=>Od,FastViTModel:()=>Ng,FastViTPreTrainedModel:()=>Dh,Florence2ForConditionalGeneration:()=>_h,Florence2PreTrainedModel:()=>yh,GLPNForDepthEstimation:()=>nn,GLPNModel:()=>Qa,GLPNPreTrainedModel:()=>Wd,GPT2LMHeadModel:()=>Ho,GPT2Model:()=>Zu,GPT2PreTrainedModel:()=>Ju,GPTBigCodeForCausalLM:()=>bd,GPTBigCodeModel:()=>rc,GPTBigCodePreTrainedModel:()=>Wl,GPTJForCausalLM:()=>Vl,GPTJModel:()=>_d,GPTJPreTrainedModel:()=>Ul,GPTNeoForCausalLM:()=>Bl,GPTNeoModel:()=>ec,GPTNeoPreTrainedModel:()=>Fl,GPTNeoXForCausalLM:()=>tc,GPTNeoXModel:()=>zl,GPTNeoXPreTrainedModel:()=>Fa,Gemma2ForCausalLM:()=>Ch,Gemma2Model:()=>Wr,Gemma2PreTrainedModel:()=>Eh,Gemma3ForCausalLM:()=>Eg,Gemma3Model:()=>sc,Gemma3PreTrainedModel:()=>ic,Gemma3nForConditionalGeneration:()=>pd,Gemma3nPreTrainedModel:()=>wh,GemmaForCausalLM:()=>Pg,GemmaModel:()=>O0,GemmaPreTrainedModel:()=>ql,GlmForCausalLM:()=>rt,GlmModel:()=>Ge,GlmPreTrainedModel:()=>Se,GraniteForCausalLM:()=>Ph,GraniteModel:()=>Xo,GranitePreTrainedModel:()=>Sh,GroundingDinoForObjectDetection:()=>Yg,GroundingDinoPreTrainedModel:()=>Zh,GroupViTModel:()=>Ad,GroupViTPreTrainedModel:()=>ki,HeliumForCausalLM:()=>le,HeliumModel:()=>ie,HeliumPreTrainedModel:()=>Y,HieraForImageClassification:()=>tu,HieraModel:()=>Vh,HieraPreTrainedModel:()=>Ld,HubertForCTC:()=>op,HubertForSequenceClassification:()=>iu,HubertModel:()=>pv,HubertPreTrainedModel:()=>B0,IJepaForImageClassification:()=>Cd,IJepaModel:()=>Yl,IJepaPreTrainedModel:()=>Xl,Idefics3ForConditionalGeneration:()=>qu,Idefics3PreTrainedModel:()=>Gu,ImageMattingOutput:()=>F,JAISLMHeadModel:()=>fo,JAISModel:()=>rs,JAISPreTrainedModel:()=>xs,JinaCLIPModel:()=>Yu,JinaCLIPPreTrainedModel:()=>La,JinaCLIPTextModel:()=>yd,JinaCLIPVisionModel:()=>co,LiteWhisperForConditionalGeneration:()=>Da,LlamaForCausalLM:()=>R,LlamaModel:()=>I,LlamaPreTrainedModel:()=>Gl,LlavaForConditionalGeneration:()=>Wu,LlavaOnevisionForConditionalGeneration:()=>fd,LlavaPreTrainedModel:()=>Ds,LlavaQwen2ForCausalLM:()=>bh,LongT5ForConditionalGeneration:()=>vt,LongT5Model:()=>mt,LongT5PreTrainedModel:()=>ft,M2M100ForConditionalGeneration:()=>tp,M2M100Model:()=>iv,M2M100PreTrainedModel:()=>yc,MBartForCausalLM:()=>Ai,MBartForConditionalGeneration:()=>lo,MBartForSequenceClassification:()=>Pn,MBartModel:()=>Ar,MBartPreTrainedModel:()=>pr,MPNetForMaskedLM:()=>Tl,MPNetForQuestionAnswering:()=>Ns,MPNetForSequenceClassification:()=>Sl,MPNetForTokenClassification:()=>so,MPNetModel:()=>Ml,MPNetPreTrainedModel:()=>Sn,MT5ForConditionalGeneration:()=>Lt,MT5Model:()=>tr,MT5PreTrainedModel:()=>ut,MarianMTModel:()=>qd,MarianModel:()=>nv,MarianPreTrainedModel:()=>nu,MaskFormerForInstanceSegmentation:()=>Vd,MaskFormerModel:()=>Xh,MaskFormerPreTrainedModel:()=>Ud,MaskedLMOutput:()=>p,Metric3DForDepthEstimation:()=>Kh,Metric3DPreTrainedModel:()=>Kg,Metric3Dv2ForDepthEstimation:()=>zd,Metric3Dv2PreTrainedModel:()=>rn,MgpstrForSceneTextRecognition:()=>Bv,MgpstrModelOutput:()=>Bs,MgpstrPreTrainedModel:()=>G0,MimiDecoderModel:()=>Fn,MimiDecoderOutput:()=>Qn,MimiEncoderModel:()=>lu,MimiEncoderOutput:()=>kn,MimiModel:()=>Xi,MimiPreTrainedModel:()=>On,MistralForCausalLM:()=>Tv,MistralModel:()=>cp,MistralPreTrainedModel:()=>up,MobileBertForMaskedLM:()=>_s,MobileBertForQuestionAnswering:()=>xl,MobileBertForSequenceClassification:()=>mi,MobileBertModel:()=>Gn,MobileBertPreTrainedModel:()=>dn,MobileLLMForCausalLM:()=>An,MobileLLMModel:()=>mr,MobileLLMPreTrainedModel:()=>rr,MobileNetV1ForImageClassification:()=>mp,MobileNetV1ForSemanticSegmentation:()=>$v,MobileNetV1Model:()=>au,MobileNetV1PreTrainedModel:()=>Mt,MobileNetV2ForImageClassification:()=>Zd,MobileNetV2ForSemanticSegmentation:()=>vp,MobileNetV2Model:()=>wc,MobileNetV2PreTrainedModel:()=>gp,MobileNetV3ForImageClassification:()=>Dv,MobileNetV3ForSemanticSegmentation:()=>yp,MobileNetV3Model:()=>Nv,MobileNetV3PreTrainedModel:()=>ef,MobileNetV4ForImageClassification:()=>Ms,MobileNetV4ForSemanticSegmentation:()=>na,MobileNetV4Model:()=>Yn,MobileNetV4PreTrainedModel:()=>xc,MobileViTForImageClassification:()=>Rg,MobileViTModel:()=>Rh,MobileViTPreTrainedModel:()=>ac,MobileViTV2ForImageClassification:()=>Zl,MobileViTV2Model:()=>Jo,MobileViTV2PreTrainedModel:()=>Lg,ModelOutput:()=>Ce,ModernBertForMaskedLM:()=>lt,ModernBertForSequenceClassification:()=>_t,ModernBertForTokenClassification:()=>dt,ModernBertModel:()=>Xe,ModernBertPreTrainedModel:()=>ot,Moondream1ForConditionalGeneration:()=>vh,MoonshineForConditionalGeneration:()=>dd,MoonshineModel:()=>wg,MoonshinePreTrainedModel:()=>Uu,MptForCausalLM:()=>Rs,MptModel:()=>Hl,MptPreTrainedModel:()=>jh,MultiModalityCausalLM:()=>Fv,MultiModalityPreTrainedModel:()=>Ts,MusicgenForCausalLM:()=>bi,MusicgenForConditionalGeneration:()=>jv,MusicgenModel:()=>pp,MusicgenPreTrainedModel:()=>Iv,NomicBertModel:()=>gt,NomicBertPreTrainedModel:()=>xt,OPTForCausalLM:()=>$h,OPTModel:()=>ho,OPTPreTrainedModel:()=>Kl,Olmo2ForCausalLM:()=>Sg,Olmo2Model:()=>Tg,Olmo2PreTrainedModel:()=>Th,OlmoForCausalLM:()=>Mg,OlmoModel:()=>wd,OlmoPreTrainedModel:()=>ns,OpenELMForCausalLM:()=>Td,OpenELMModel:()=>oc,OpenELMPreTrainedModel:()=>Md,OwlViTForObjectDetection:()=>Id,OwlViTModel:()=>kd,OwlViTPreTrainedModel:()=>Va,Owlv2ForObjectDetection:()=>Wa,Owlv2Model:()=>is,Owlv2PreTrainedModel:()=>Wi,PaliGemmaForConditionalGeneration:()=>hd,PaliGemmaPreTrainedModel:()=>$l,PatchTSMixerForPrediction:()=>bp,PatchTSMixerModel:()=>tf,PatchTSMixerPreTrainedModel:()=>Vv,PatchTSTForPrediction:()=>Uv,PatchTSTModel:()=>zv,PatchTSTPreTrainedModel:()=>_p,Phi3ForCausalLM:()=>I0,Phi3Model:()=>Ig,Phi3PreTrainedModel:()=>kg,Phi3VForCausalLM:()=>Hu,Phi3VPreTrainedModel:()=>xh,PhiForCausalLM:()=>kh,PhiModel:()=>Oh,PhiPreTrainedModel:()=>Ed,PreTrainedModel:()=>ae,PretrainedMixin:()=>vr,PvtForImageClassification:()=>Br,PvtModel:()=>Gr,PvtPreTrainedModel:()=>po,PyAnnoteForAudioFrameClassification:()=>uv,PyAnnoteModel:()=>lv,PyAnnotePreTrainedModel:()=>np,QuestionAnsweringModelOutput:()=>b,Qwen2ForCausalLM:()=>k0,Qwen2Model:()=>Cg,Qwen2PreTrainedModel:()=>Ba,Qwen2VLForConditionalGeneration:()=>Ah,Qwen2VLPreTrainedModel:()=>Pd,Qwen3ForCausalLM:()=>Sd,Qwen3Model:()=>Og,Qwen3PreTrainedModel:()=>Ag,RFDetrForObjectDetection:()=>$0,RFDetrModel:()=>Bh,RFDetrObjectDetectionOutput:()=>lc,RFDetrPreTrainedModel:()=>qa,RTDetrForObjectDetection:()=>Bg,RTDetrModel:()=>Fg,RTDetrObjectDetectionOutput:()=>eu,RTDetrPreTrainedModel:()=>ss,RTDetrV2ForObjectDetection:()=>Nd,RTDetrV2Model:()=>zg,RTDetrV2ObjectDetectionOutput:()=>Ug,RTDetrV2PreTrainedModel:()=>$d,ResNetForImageClassification:()=>Wh,ResNetModel:()=>Xa,ResNetPreTrainedModel:()=>Gi,RoFormerForMaskedLM:()=>Pt,RoFormerForQuestionAnswering:()=>Kr,RoFormerForSequenceClassification:()=>Zt,RoFormerForTokenClassification:()=>Rt,RoFormerModel:()=>Ze,RoFormerPreTrainedModel:()=>We,RobertaForMaskedLM:()=>Vr,RobertaForQuestionAnswering:()=>Xn,RobertaForSequenceClassification:()=>Qr,RobertaForTokenClassification:()=>_n,RobertaModel:()=>Yr,RobertaPreTrainedModel:()=>fn,SamImageSegmentationOutput:()=>rv,SamModel:()=>tv,SamPreTrainedModel:()=>ev,SapiensForDepthEstimation:()=>hc,SapiensForNormalEstimation:()=>Ya,SapiensForSemanticSegmentation:()=>fc,SapiensPreTrainedModel:()=>os,SegformerForImageClassification:()=>V0,SegformerForSemanticSegmentation:()=>Av,SegformerModel:()=>ra,SegformerPreTrainedModel:()=>su,Seq2SeqLMOutput:()=>uf,SequenceClassifierOutput:()=>Wt,SiglipModel:()=>Ra,SiglipPreTrainedModel:()=>Rl,SiglipTextModel:()=>qo,SiglipVisionModel:()=>vd,SmolVLMForConditionalGeneration:()=>md,SnacDecoderModel:()=>nf,SnacEncoderModel:()=>_o,SnacModel:()=>uu,SnacPreTrainedModel:()=>Tc,SpeechT5ForSpeechToText:()=>_i,SpeechT5ForTextToSpeech:()=>bv,SpeechT5HifiGan:()=>wv,SpeechT5Model:()=>Ki,SpeechT5PreTrainedModel:()=>lp,SqueezeBertForMaskedLM:()=>Pl,SqueezeBertForQuestionAnswering:()=>Uo,SqueezeBertForSequenceClassification:()=>El,SqueezeBertModel:()=>oo,SqueezeBertPreTrainedModel:()=>Ui,StableLmForCausalLM:()=>kv,StableLmModel:()=>Ov,StableLmPreTrainedModel:()=>Jd,Starcoder2ForCausalLM:()=>Pv,Starcoder2Model:()=>Sv,Starcoder2PreTrainedModel:()=>Xd,StyleTextToSpeech2Model:()=>_v,StyleTextToSpeech2PreTrainedModel:()=>yv,Swin2SRForImageSuperResolution:()=>ea,Swin2SRModel:()=>yo,Swin2SRPreTrainedModel:()=>qh,SwinForImageClassification:()=>Zo,SwinForSemanticSegmentation:()=>Gh,SwinModel:()=>vo,SwinPreTrainedModel:()=>Fd,T5ForConditionalGeneration:()=>Ke,T5Model:()=>Re,T5PreTrainedModel:()=>ve,TableTransformerForObjectDetection:()=>Dd,TableTransformerModel:()=>Gg,TableTransformerObjectDetectionOutput:()=>Rd,TableTransformerPreTrainedModel:()=>Ha,TokenClassifierOutput:()=>f,TrOCRForCausalLM:()=>Mv,TrOCRPreTrainedModel:()=>xv,UltravoxModel:()=>gr,UltravoxPreTrainedModel:()=>as,UniSpeechForCTC:()=>dv,UniSpeechForSequenceClassification:()=>fv,UniSpeechModel:()=>D0,UniSpeechPreTrainedModel:()=>ip,UniSpeechSatForAudioFrameClassification:()=>F0,UniSpeechSatForCTC:()=>R0,UniSpeechSatForSequenceClassification:()=>L0,UniSpeechSatModel:()=>Hd,UniSpeechSatPreTrainedModel:()=>_c,ViTForImageClassification:()=>za,ViTMAEModel:()=>ni,ViTMAEPreTrainedModel:()=>Qo,ViTMSNForImageClassification:()=>Jl,ViTMSNModel:()=>Ua,ViTMSNPreTrainedModel:()=>yi,ViTModel:()=>j0,ViTPreTrainedModel:()=>$g,VisionEncoderDecoderModel:()=>Vu,VitMatteForImageMatting:()=>mo,VitMattePreTrainedModel:()=>Dg,VitPoseForPoseEstimation:()=>Ql,VitPosePreTrainedModel:()=>Nh,VitsModel:()=>hp,VitsModelOutput:()=>ne,VitsPreTrainedModel:()=>fp,Wav2Vec2BertForCTC:()=>Kd,Wav2Vec2BertForSequenceClassification:()=>hv,Wav2Vec2BertModel:()=>sp,Wav2Vec2BertPreTrainedModel:()=>Hi,Wav2Vec2ForAudioFrameClassification:()=>rp,Wav2Vec2ForCTC:()=>ov,Wav2Vec2ForSequenceClassification:()=>av,Wav2Vec2Model:()=>sv,Wav2Vec2PreTrainedModel:()=>ta,WavLMForAudioFrameClassification:()=>vv,WavLMForCTC:()=>z0,WavLMForSequenceClassification:()=>mv,WavLMForXVector:()=>gv,WavLMModel:()=>ap,WavLMPreTrainedModel:()=>Ja,WeSpeakerResNetModel:()=>cv,WeSpeakerResNetPreTrainedModel:()=>N0,WhisperForConditionalGeneration:()=>uo,WhisperModel:()=>jl,WhisperPreTrainedModel:()=>Il,XLMForQuestionAnswering:()=>Cl,XLMForSequenceClassification:()=>ws,XLMForTokenClassification:()=>zu,XLMModel:()=>$a,XLMPreTrainedModel:()=>Oi,XLMRobertaForMaskedLM:()=>Ol,XLMRobertaForQuestionAnswering:()=>Wo,XLMRobertaForSequenceClassification:()=>cd,XLMRobertaForTokenClassification:()=>gi,XLMRobertaModel:()=>Al,XLMRobertaPreTrainedModel:()=>Vo,XLMWithLMHeadModel:()=>ud,XVectorOutput:()=>cf,YolosForObjectDetection:()=>Jg,YolosModel:()=>Qg,YolosObjectDetectionOutput:()=>Zg,YolosPreTrainedModel:()=>ep});var n=r("./src/configs.js"),i=r("./src/backends/onnx.js"),s=r("./src/utils/dtypes.js"),o=r("./src/utils/generic.js"),a=r("./src/utils/core.js"),l=r("./src/utils/hub.js"),u=r("./src/utils/constants.js"),c=r("./src/generation/logits_process.js"),d=r("./src/generation/configuration_utils.js"),h=r("./src/utils/tensor.js"),m=r("./src/utils/image.js"),g=r("./src/utils/maths.js"),v=r("./src/generation/stopping_criteria.js"),y=r("./src/generation/logits_sampler.js"),x=r("./src/env.js"),w=r("./src/models/whisper/generation_whisper.js"),S=r("./src/models/whisper/common_whisper.js");const M={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5,ImageTextToText:6,Musicgen:7,MultiModality:8,Phi3V:9,AudioTextToText:10,AutoEncoder:11,ImageAudioTextToText:12},T=new Map,P=new Map,E=new Map;async function A(O,k,H){let fe=H.config?.["transformers.js_config"]??{},me=H.device??fe.device;me&&typeof me!="string"&&(me.hasOwnProperty(k)?me=me[k]:(console.warn(`device not specified for "${k}". Using the default device.`),me=null));const ge=me??(x.apis.IS_NODE_ENV?"cpu":"wasm"),Ae=(0,i.deviceToExecutionProviders)(ge),De=fe.device_config??{};De.hasOwnProperty(ge)&&(fe={...fe,...De[ge]});let Fe=H.dtype??fe.dtype;if(typeof Fe!="string"&&(Fe&&Fe.hasOwnProperty(k)?Fe=Fe[k]:(Fe=s.DEFAULT_DEVICE_DTYPE_MAPPING[ge]??s.DATA_TYPES.fp32,console.warn(`dtype not specified for "${k}". Using the default dtype (${Fe}) for this device (${ge}).`))),Fe===s.DATA_TYPES.auto){let ir=fe.dtype;typeof ir!="string"&&(ir=ir?.[k]),ir&&ir!==s.DATA_TYPES.auto&&s.DATA_TYPES.hasOwnProperty(ir)?Fe=ir:Fe=s.DEFAULT_DEVICE_DTYPE_MAPPING[ge]??s.DATA_TYPES.fp32}const ht=Fe;if(s.DEFAULT_DTYPE_SUFFIX_MAPPING.hasOwnProperty(ht)){if(ht===s.DATA_TYPES.fp16&&ge==="webgpu"&&!await(0,s.isWebGpuFp16Supported)())throw new Error(`The device (${ge}) does not support fp16.`)}else throw new Error(`Invalid dtype: ${ht}. Should be one of: ${Object.keys(s.DATA_TYPES).join(", ")}`);const Te=fe.kv_cache_dtype,Me=Te?typeof Te=="string"?Te:Te[ht]??"float32":void 0;if(Me&&!["float32","float16"].includes(Me))throw new Error(`Invalid kv_cache_dtype: ${Me}. Should be one of: float32, float16`);const Ee={dtype:ht,kv_cache_dtype:Me,device:ge},ze=s.DEFAULT_DTYPE_SUFFIX_MAPPING[ht],ct=`${k}${ze}.onnx`,st=`${H.subfolder??""}/${ct}`,tt={...H.session_options};tt.executionProviders??=Ae;const yt=fe.free_dimension_overrides;yt?tt.freeDimensionOverrides??=yt:ge.startsWith("webnn")&&!tt.freeDimensionOverrides&&console.warn(`WebNN does not currently support dynamic shapes and requires 'free_dimension_overrides' to be set in config.json, preferably as a field within config["transformers.js_config"]["device_config"]["${ge}"]. When 'free_dimension_overrides' is not set, you may experience significant performance degradation.`);const Xt=x.apis.IS_NODE_ENV&&x.env.useFSCache,Dt=(0,l.getModelFile)(O,st,!0,H,Xt),jr=H.use_external_data_format??fe.use_external_data_format;let In=[];if(jr){let ir;typeof jr=="object"?jr.hasOwnProperty(ct)?ir=jr[ct]:jr.hasOwnProperty(k)?ir=jr[k]:ir=!1:ir=jr;const bn=+ir;if(bn>l.MAX_EXTERNAL_DATA_CHUNKS)throw new Error(`The number of external data chunks (${bn}) exceeds the maximum allowed value (${l.MAX_EXTERNAL_DATA_CHUNKS}).`);for(let oi=0;oi<bn;++oi){const df=`${ct}_data${oi===0?"":"_"+oi}`,us=`${H.subfolder??""}/${df}`;In.push(new Promise(async(sa,Dp)=>{const Rp=await(0,l.getModelFile)(O,us,!0,H,Xt);sa(Rp instanceof Uint8Array?{path:df,data:Rp}:df)}))}}else tt.externalData!==void 0&&(In=tt.externalData.map(async ir=>{if(typeof ir.data=="string"){const bn=await(0,l.getModelFile)(O,ir.data,!0,H);return{...ir,data:bn}}return ir}));if(In.length>0){const ir=await Promise.all(In);x.apis.IS_NODE_ENV||(tt.externalData=ir)}if(ge==="webgpu"){const ir=(0,n.getKeyValueShapes)(H.config,{prefix:"present"});if(Object.keys(ir).length>0&&!(0,i.isONNXProxy)()){const bn={};for(const oi in ir)bn[oi]="gpu-buffer";tt.preferredOutputLocation=bn}}return{buffer_or_path:await Dt,session_options:tt,session_config:Ee}}async function L(O,k,H){return Object.fromEntries(await Promise.all(Object.keys(k).map(async fe=>{const{buffer_or_path:me,session_options:ge,session_config:Ae}=await A(O,k[fe],H),De=await(0,i.createInferenceSession)(me,ge,Ae);return[fe,De]})))}async function B(O,k,H){return Object.fromEntries(await Promise.all(Object.keys(k).map(async fe=>{const me=await(0,l.getModelJSON)(O,k[fe],!1,H);return[fe,me]})))}function V(O,k){const H=Object.create(null),fe=[];for(const Ae of O.inputNames){const De=k[Ae];if(!(De instanceof h.Tensor)){fe.push(Ae);continue}H[Ae]=(0,i.isONNXProxy)()?De.clone():De}if(fe.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${fe.join(", ")}.`);const me=Object.keys(k).length,ge=O.inputNames.length;if(me>ge){let Ae=Object.keys(k).filter(De=>!O.inputNames.includes(De));console.warn(`WARNING: Too many inputs were provided (${me} > ${ge}). The following inputs will be ignored: "${Ae.join(", ")}".`)}return H}let G=Promise.resolve();async function z(O,k){const H=V(O,k);try{const fe=Object.fromEntries(Object.entries(H).map(([Ae,De])=>[Ae,De.ort_tensor])),me=()=>O.run(fe),ge=await(x.apis.IS_BROWSER_ENV||x.apis.IS_WEBWORKER_ENV?G=G.then(me):me());return K(ge)}catch(fe){const me=Object.fromEntries(Object.entries(H).map(([ge,Ae])=>{const De={type:Ae.type,dims:Ae.dims,location:Ae.location};return De.location!=="gpu-buffer"&&(De.data=Ae.data),[ge,De]}));throw console.error(`An error occurred during model execution: "${fe}".`),console.error("Inputs given to model:",me),fe}}function K(O){for(let k in O)(0,i.isONNXTensor)(O[k])?O[k]=new h.Tensor(O[k]):typeof O[k]=="object"&&K(O[k]);return O}function J(O){if(O instanceof h.Tensor)return O;if(O.length===0)throw Error("items must be non-empty");if(Array.isArray(O[0])){if(O.some(k=>k.length!==O[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new h.Tensor("int64",BigInt64Array.from(O.flat().map(k=>BigInt(k))),[O.length,O[0].length])}else return new h.Tensor("int64",BigInt64Array.from(O.map(k=>BigInt(k))),[1,O.length])}function X(O){return new h.Tensor("bool",[O],[1])}async function Q(O,k){let{encoder_outputs:H,input_ids:fe,decoder_input_ids:me,...ge}=k;if(!H){const De=(0,a.pick)(k,O.sessions.model.inputNames);H=(await W(O,De)).last_hidden_state}return ge.input_ids=me,ge.encoder_hidden_states=H,O.sessions.decoder_model_merged.inputNames.includes("encoder_attention_mask")&&(ge.encoder_attention_mask=k.attention_mask),await ce(O,ge,!0)}async function W(O,k){const H=O.sessions.model,fe=(0,a.pick)(k,H.inputNames);if(H.inputNames.includes("inputs_embeds")&&!fe.inputs_embeds){if(!k.input_ids)throw new Error("Both `input_ids` and `inputs_embeds` are missing in the model inputs.");fe.inputs_embeds=await O.encode_text({input_ids:k.input_ids})}if(H.inputNames.includes("token_type_ids")&&!fe.token_type_ids){if(!fe.input_ids)throw new Error("Both `input_ids` and `token_type_ids` are missing in the model inputs.");fe.token_type_ids=(0,h.zeros_like)(fe.input_ids)}if(H.inputNames.includes("pixel_mask")&&!fe.pixel_mask){if(!fe.pixel_values)throw new Error("Both `pixel_values` and `pixel_mask` are missing in the model inputs.");const me=fe.pixel_values.dims;fe.pixel_mask=(0,h.ones)([me[0],me[2],me[3]])}return await z(H,fe)}async function oe(O,k){const H=await O.encode(k);return await O.decode(H)}async function ce(O,k,H=!1){const fe=O.sessions[H?"decoder_model_merged":"model"],{past_key_values:me,...ge}=k;if(fe.inputNames.includes("use_cache_branch")&&(ge.use_cache_branch=X(!!me)),fe.inputNames.includes("position_ids")&&ge.attention_mask&&!ge.position_ids){const De=["paligemma","gemma3_text","gemma3"].includes(O.config.model_type)?1:0;ge.position_ids=Ie(ge,me,De)}O.addPastKeyValues(ge,me);const Ae=(0,a.pick)(ge,fe.inputNames);return await z(fe,Ae)}function D({modality_token_id:O,inputs_embeds:k,modality_features:H,input_ids:fe,attention_mask:me}){const ge=fe.tolist().map(ht=>ht.reduce((Te,Me,Ee)=>(Me==O&&Te.push(Ee),Te),[])),Ae=ge.reduce((ht,Te)=>ht+Te.length,0),De=H.dims[0];if(Ae!==De)throw new Error(`Number of tokens and features do not match: tokens: ${Ae}, features ${De}`);let Fe=0;for(let ht=0;ht<ge.length;++ht){const Te=ge[ht],Me=k[ht];for(let Ee=0;Ee<Te.length;++Ee)Me[Te[Ee]].data.set(H[Fe++].data)}return{inputs_embeds:k,attention_mask:me}}function U({image_token_id:O,inputs_embeds:k,image_features:H,input_ids:fe,attention_mask:me}){return D({modality_token_id:O,inputs_embeds:k,modality_features:H,input_ids:fe,attention_mask:me})}function te({audio_token_id:O,inputs_embeds:k,audio_features:H,input_ids:fe,attention_mask:me}){return D({modality_token_id:O,inputs_embeds:k,modality_features:H,input_ids:fe,attention_mask:me})}async function ee(O,{encode_function:k,merge_function:H,modality_input_name:fe,modality_output_name:me,input_ids:ge=null,attention_mask:Ae=null,position_ids:De=null,inputs_embeds:Fe=null,past_key_values:ht=null,generation_config:Te=null,logits_processor:Me=null,...Ee}){const ze=Ee[fe];if(!Fe){if(Fe=await O.encode_text({input_ids:ge,...Ee}),ze&&ge.dims[1]!==1){const st=await k({[fe]:ze,...Ee});({inputs_embeds:Fe,attention_mask:Ae}=H({[me]:st,inputs_embeds:Fe,input_ids:ge,attention_mask:Ae}))}else if(ht&&ze&&ge.dims[1]===1){const st=ge.dims[1],tt=Object.values(ht)[0].dims.at(-2);Ae=(0,h.cat)([(0,h.ones)([ge.dims[0],tt]),Ae.slice(null,[Ae.dims[1]-st,Ae.dims[1]])],1)}}if(!De&&O.config.model_type==="qwen2_vl"){const{image_grid_thw:st,video_grid_thw:tt}=Ee;[De]=O.get_rope_index(ge,st,tt,Ae)}return await ce(O,{inputs_embeds:Fe,past_key_values:ht,attention_mask:Ae,position_ids:De,generation_config:Te,logits_processor:Me},!0)}async function pe(O,k){return await ee(O,{...k,modality_input_name:"audio_values",modality_output_name:"audio_features",encode_function:O.encode_audio.bind(O),merge_function:O._merge_input_ids_with_audio_features.bind(O)})}async function Oe(O,k){return await ee(O,{...k,modality_input_name:"pixel_values",modality_output_name:"image_features",encode_function:O.encode_image.bind(O),merge_function:O._merge_input_ids_with_image_features.bind(O)})}function xe(O,k=0){const[H,fe]=O.dims,me=O.data,ge=new BigInt64Array(me.length);for(let Ae=0;Ae<H;++Ae){const De=Ae*fe;let Fe=BigInt(k);for(let ht=0;ht<fe;++ht){const Te=De+ht;me[Te]===0n?ge[Te]=BigInt(1):(ge[Te]=Fe,Fe+=me[Te])}}return{data:ge,dims:O.dims}}function Ie(O,k=null,H=0){const{input_ids:fe,inputs_embeds:me,attention_mask:ge}=O,{data:Ae,dims:De}=xe(ge,H);let Fe=new h.Tensor("int64",Ae,De);if(k){const ht=-(fe??me).dims.at(1);Fe=Fe.slice(null,[ht,null])}return Fe}function Pe(O,k,H,fe){const me=H.past_key_values?Object.values(H.past_key_values)[0].dims.at(-2):0;if(!H.attention_mask){let ge;for(const Ae of["input_ids","inputs_embeds","position_ids"])if(H[Ae]){ge=H[Ae].dims;break}if(!ge)throw new Error("attention_mask is not provided, and unable to infer its shape from model inputs.");H.attention_mask=(0,h.ones)([ge[0],me+ge[1]])}if(H.past_key_values){const{input_ids:ge,attention_mask:Ae}=H;Ae&&Ae.dims[1]>ge.dims[1]||me<ge.dims[1]&&(H.input_ids=ge.slice(null,[me,null]))}return H}function he(O,k,H,fe){return H.past_key_values&&(k=k.map(me=>[me.at(-1)])),{...H,decoder_input_ids:J(k)}}function re(O,...k){return O.config.is_encoder_decoder?he(O,...k):Pe(O,...k)}function ue(O,k,H,fe){const me=!!H.past_key_values;return fe.guidance_scale!==null&&fe.guidance_scale>1&&(me?H.input_ids=(0,h.cat)([H.input_ids,H.input_ids],0):(H.input_ids=(0,h.cat)([H.input_ids,(0,h.full_like)(H.input_ids,BigInt(fe.pad_token_id))],0),H.attention_mask=(0,h.cat)([H.attention_mask,(0,h.full_like)(H.attention_mask,0n)],0))),(me||!H.pixel_values)&&(H.pixel_values=(0,h.full)([0,0,3,384,384],1)),me&&(H.images_seq_mask=new h.Tensor("bool",new Array(1).fill(!0).fill(!1,0,1),[1,1]),H.images_emb_mask=new h.Tensor("bool",new Array(0).fill(!1),[1,1,0])),H}class ae extends o.Callable{main_input_name="input_ids";forward_params=["input_ids","attention_mask"];constructor(k,H,fe){super(),this.config=k,this.sessions=H,this.configs=fe;const me=E.get(this.constructor),ge=T.get(me);switch(this.can_generate=!1,this._forward=null,this._prepare_inputs_for_generation=null,ge){case M.DecoderOnly:this.can_generate=!0,this._forward=ce,this._prepare_inputs_for_generation=Pe;break;case M.Seq2Seq:case M.Vision2Seq:case M.Musicgen:this.can_generate=!0,this._forward=Q,this._prepare_inputs_for_generation=he;break;case M.EncoderDecoder:this._forward=Q;break;case M.ImageTextToText:this.can_generate=!0,this._forward=Oe,this._prepare_inputs_for_generation=re;break;case M.AudioTextToText:this.can_generate=!0,this._forward=pe,this._prepare_inputs_for_generation=re;break;case M.Phi3V:case M.ImageAudioTextToText:this.can_generate=!0,this._prepare_inputs_for_generation=re;break;case M.MultiModality:this.can_generate=!0,this._prepare_inputs_for_generation=ue;break;case M.AutoEncoder:this._forward=oe;break;default:this._forward=W;break}this.can_generate&&this.forward_params.push("past_key_values"),this.custom_config=this.config["transformers.js_config"]??{}}async dispose(){const k=[];for(const H of Object.values(this.sessions))H?.handler?.dispose&&k.push(H.handler.dispose());return await Promise.all(k)}static async from_pretrained(k,{progress_callback:H=null,config:fe=null,cache_dir:me=null,local_files_only:ge=!1,revision:Ae="main",model_file_name:De=null,subfolder:Fe="onnx",device:ht=null,dtype:Te=null,use_external_data_format:Me=null,session_options:Ee={}}={}){let ze={progress_callback:H,config:fe,cache_dir:me,local_files_only:ge,revision:Ae,model_file_name:De,subfolder:Fe,device:ht,dtype:Te,use_external_data_format:Me,session_options:Ee};const ct=E.get(this),st=T.get(ct);fe=ze.config=await n.AutoConfig.from_pretrained(k,ze);let tt;if(st===M.DecoderOnly)tt=await Promise.all([L(k,{model:ze.model_file_name??"model"},ze),B(k,{generation_config:"generation_config.json"},ze)]);else if(st===M.Seq2Seq||st===M.Vision2Seq)tt=await Promise.all([L(k,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},ze),B(k,{generation_config:"generation_config.json"},ze)]);else if(st===M.MaskGeneration)tt=await Promise.all([L(k,{model:"vision_encoder",prompt_encoder_mask_decoder:"prompt_encoder_mask_decoder"},ze)]);else if(st===M.EncoderDecoder)tt=await Promise.all([L(k,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},ze)]);else if(st===M.ImageTextToText){const yt={embed_tokens:"embed_tokens",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};fe.is_encoder_decoder&&(yt.model="encoder_model"),tt=await Promise.all([L(k,yt,ze),B(k,{generation_config:"generation_config.json"},ze)])}else if(st===M.AudioTextToText){const yt={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",decoder_model_merged:"decoder_model_merged"};tt=await Promise.all([L(k,yt,ze),B(k,{generation_config:"generation_config.json"},ze)])}else if(st===M.ImageAudioTextToText){const yt={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};tt=await Promise.all([L(k,yt,ze),B(k,{generation_config:"generation_config.json"},ze)])}else if(st===M.Musicgen)tt=await Promise.all([L(k,{model:"text_encoder",decoder_model_merged:"decoder_model_merged",encodec_decode:"encodec_decode"},ze),B(k,{generation_config:"generation_config.json"},ze)]);else if(st===M.MultiModality)tt=await Promise.all([L(k,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"language_model",lm_head:"lm_head",gen_head:"gen_head",gen_img_embeds:"gen_img_embeds",image_decode:"image_decode"},ze),B(k,{generation_config:"generation_config.json"},ze)]);else if(st===M.Phi3V)tt=await Promise.all([L(k,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"model",vision_encoder:"vision_encoder"},ze),B(k,{generation_config:"generation_config.json"},ze)]);else if(st===M.AutoEncoder)tt=await Promise.all([L(k,{encoder_model:"encoder_model",decoder_model:"decoder_model"},ze)]);else{if(st!==M.EncoderOnly){const yt=ct??fe?.model_type;yt!=="custom"&&console.warn(`Model type for '${yt}' not found, assuming encoder-only architecture. Please report this at ${u.GITHUB_ISSUE_URL}.`)}tt=await Promise.all([L(k,{model:ze.model_file_name??"model"},ze)])}return new this(fe,...tt)}async _call(k){return await this.forward(k)}async forward(k){return await this._forward(this,k)}get generation_config(){return this.configs?.generation_config??null}_get_logits_warper(k){const H=new c.LogitsProcessorList;return k.temperature!==null&&k.temperature!==1&&H.push(new c.TemperatureLogitsWarper(k.temperature)),k.top_k!==null&&k.top_k!==0&&H.push(new c.TopKLogitsWarper(k.top_k)),k.top_p!==null&&k.top_p<1&&H.push(new c.TopPLogitsWarper(k.top_p)),H}_get_logits_processor(k,H,fe=null){const me=new c.LogitsProcessorList;if(k.repetition_penalty!==null&&k.repetition_penalty!==1&&me.push(new c.RepetitionPenaltyLogitsProcessor(k.repetition_penalty)),k.no_repeat_ngram_size!==null&&k.no_repeat_ngram_size>0&&me.push(new c.NoRepeatNGramLogitsProcessor(k.no_repeat_ngram_size)),k.bad_words_ids!==null&&me.push(new c.NoBadWordsLogitsProcessor(k.bad_words_ids,k.eos_token_id)),k.min_length!==null&&k.eos_token_id!==null&&k.min_length>0&&me.push(new c.MinLengthLogitsProcessor(k.min_length,k.eos_token_id)),k.min_new_tokens!==null&&k.eos_token_id!==null&&k.min_new_tokens>0&&me.push(new c.MinNewTokensLengthLogitsProcessor(H,k.min_new_tokens,k.eos_token_id)),k.forced_bos_token_id!==null&&me.push(new c.ForcedBOSTokenLogitsProcessor(k.forced_bos_token_id)),k.forced_eos_token_id!==null&&me.push(new c.ForcedEOSTokenLogitsProcessor(k.max_length,k.forced_eos_token_id)),k.begin_suppress_tokens!==null){const ge=H>1||k.forced_bos_token_id===null?H:H+1;me.push(new c.SuppressTokensAtBeginLogitsProcessor(k.begin_suppress_tokens,ge))}return k.guidance_scale!==null&&k.guidance_scale>1&&me.push(new c.ClassifierFreeGuidanceLogitsProcessor(k.guidance_scale)),fe!==null&&me.extend(fe),me}_prepare_generation_config(k,H,fe=d.GenerationConfig){const me={...this.config};for(const Ae of["decoder","generator","text_config"])Ae in me&&Object.assign(me,me[Ae]);const ge=new fe(me);return Object.assign(ge,this.generation_config??{}),k&&Object.assign(ge,k),H&&Object.assign(ge,(0,a.pick)(H,Object.getOwnPropertyNames(ge))),ge}_get_stopping_criteria(k,H=null){const fe=new v.StoppingCriteriaList;return k.max_length!==null&&fe.push(new v.MaxLengthCriteria(k.max_length,this.config.max_position_embeddings??null)),k.eos_token_id!==null&&fe.push(new v.EosTokenCriteria(k.eos_token_id)),H&&fe.extend(H),fe}_validate_model_class(){if(!this.can_generate){const k=[ls,af,bo,cu],H=E.get(this.constructor),fe=new Set,me=this.config.model_type;for(const Ae of k){const De=Ae.get(me);De&&fe.add(De[0])}let ge=`The current model class (${H}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;throw fe.size>0&&(ge+=` Please use the following class instead: ${[...fe].join(", ")}`),Error(ge)}}prepare_inputs_for_generation(...k){return this._prepare_inputs_for_generation(this,...k)}_update_model_kwargs_for_generation({generated_input_ids:k,outputs:H,model_inputs:fe,is_encoder_decoder:me}){return fe.past_key_values=this.getPastKeyValues(H,fe.past_key_values),fe.input_ids=new h.Tensor("int64",k.flat(),[k.length,1]),me||(fe.attention_mask=(0,h.cat)([fe.attention_mask,(0,h.ones)([fe.attention_mask.dims[0],1])],1)),fe.position_ids=null,fe}_prepare_model_inputs({inputs:k,bos_token_id:H,model_kwargs:fe}){const me=(0,a.pick)(fe,this.forward_params),ge=this.main_input_name;if(ge in me){if(k)throw new Error("`inputs`: {inputs}` were passed alongside {input_name} which is not allowed. Make sure to either pass {inputs} or {input_name}=...")}else me[ge]=k;return{inputs_tensor:me[ge],model_inputs:me,model_input_name:ge}}async _prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:k,model_inputs:H,model_input_name:fe,generation_config:me}){if(this.sessions.model.inputNames.includes("inputs_embeds")&&!H.inputs_embeds&&"_prepare_inputs_embeds"in this){const{input_ids:Ae,pixel_values:De,attention_mask:Fe,...ht}=H,Te=await this._prepare_inputs_embeds(H);H={...ht,...(0,a.pick)(Te,["inputs_embeds","attention_mask"])}}let{last_hidden_state:ge}=await W(this,H);if(me.guidance_scale!==null&&me.guidance_scale>1)ge=(0,h.cat)([ge,(0,h.full_like)(ge,0)],0),"attention_mask"in H&&(H.attention_mask=(0,h.cat)([H.attention_mask,(0,h.zeros_like)(H.attention_mask)],0));else if(H.decoder_input_ids){const Ae=J(H.decoder_input_ids).dims[0];if(Ae!==ge.dims[0]){if(ge.dims[0]!==1)throw new Error(`The encoder outputs have a different batch size (${ge.dims[0]}) than the decoder inputs (${Ae}).`);ge=(0,h.cat)(Array.from({length:Ae},()=>ge),0)}}return H.encoder_outputs=ge,H}_prepare_decoder_input_ids_for_generation({batch_size:k,model_input_name:H,model_kwargs:fe,decoder_start_token_id:me,bos_token_id:ge,generation_config:Ae}){let{decoder_input_ids:De,...Fe}=fe;if(!(De instanceof h.Tensor)){if(De)Array.isArray(De[0])||(De=Array.from({length:k},()=>De));else if(me??=ge,this.config.model_type==="musicgen")De=Array.from({length:k*this.config.decoder.num_codebooks},()=>[me]);else if(Array.isArray(me)){if(me.length!==k)throw new Error(`\`decoder_start_token_id\` expcted to have length ${k} but got ${me.length}`);De=me}else De=Array.from({length:k},()=>[me]);De=J(De)}return fe.decoder_attention_mask=(0,h.ones_like)(De),{input_ids:De,model_inputs:Fe}}async generate({inputs:k=null,generation_config:H=null,logits_processor:fe=null,stopping_criteria:me=null,streamer:ge=null,...Ae}){this._validate_model_class(),H=this._prepare_generation_config(H,Ae);let{inputs_tensor:De,model_inputs:Fe,model_input_name:ht}=this._prepare_model_inputs({inputs:k,model_kwargs:Ae});const Te=this.config.is_encoder_decoder;Te&&("encoder_outputs"in Fe||(Fe=await this._prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:De,model_inputs:Fe,model_input_name:ht,generation_config:H})));let Me;Te?{input_ids:Me,model_inputs:Fe}=this._prepare_decoder_input_ids_for_generation({batch_size:Fe[ht].dims.at(0),model_input_name:ht,model_kwargs:Fe,decoder_start_token_id:H.decoder_start_token_id,bos_token_id:H.bos_token_id,generation_config:H}):Me=Fe[ht];let Ee=Me.dims.at(-1);H.max_new_tokens!==null&&(H.max_length=Ee+H.max_new_tokens);const ze=this._get_logits_processor(H,Ee,fe),ct=this._get_stopping_criteria(H,me),st=Fe[ht].dims.at(0),tt=y.LogitsSampler.getSampler(H),yt=new Array(st).fill(0),Xt=Me.tolist();ge&&ge.put(Xt);let Dt,jr={};for(;;){if(Fe=this.prepare_inputs_for_generation(Xt,Fe,H),Dt=await this.forward(Fe),H.output_attentions&&H.return_dict_in_generate){const us=this.getAttentions(Dt);for(const sa in us)sa in jr||(jr[sa]=[]),jr[sa].push(us[sa])}const ir=Dt.logits.slice(null,-1,null),bn=ze(Xt,ir),oi=[];for(let us=0;us<bn.dims.at(0);++us){const sa=bn[us],Dp=await tt(sa);for(const[Rp,ob]of Dp){const iy=BigInt(Rp);yt[us]+=ob,Xt[us].push(iy),oi.push([iy]);break}}if(ge&&ge.put(oi),ct(Xt).every(us=>us))break;Fe=this._update_model_kwargs_for_generation({generated_input_ids:oi,outputs:Dt,model_inputs:Fe,is_encoder_decoder:Te})}ge&&ge.end();const In=this.getPastKeyValues(Dt,Fe.past_key_values,!0),Bn=new h.Tensor("int64",Xt.flat(),[Xt.length,Xt[0].length]);if(H.return_dict_in_generate)return{sequences:Bn,past_key_values:In,...jr};for(const ir of Object.values(Dt))ir.location==="gpu-buffer"&&ir.dispose();return Bn}getPastKeyValues(k,H,fe=!1){const me=Object.create(null);for(const ge in k)if(ge.startsWith("present")){const Ae=ge.replace("present","past_key_values"),De=ge.includes("encoder");if(De&&H?me[Ae]=H[Ae]:me[Ae]=k[ge],H&&(!De||fe)){const Fe=H[Ae];Fe.location==="gpu-buffer"&&Fe.dispose()}}return me}getAttentions(k){const H={};for(const fe of["cross_attentions","encoder_attentions","decoder_attentions"])for(const me in k)me.startsWith(fe)&&(fe in H||(H[fe]=[]),H[fe].push(k[me]));return H}addPastKeyValues(k,H){if(H)Object.assign(k,H);else{const me=(this.sessions.decoder_model_merged??this.sessions.model)?.config?.kv_cache_dtype??"float32",ge=me==="float16"?new h.DataTypeMap.float16:[],Ae=(k[this.main_input_name]??k.attention_mask)?.dims?.[0]??1,De=(0,n.getKeyValueShapes)(this.config,{batch_size:Ae});for(const Fe in De)k[Fe]=new h.Tensor(me,ge,De[Fe])}}async encode_image({pixel_values:k}){return(await z(this.sessions.vision_encoder,{pixel_values:k})).image_features}async encode_text({input_ids:k}){return(await z(this.sessions.embed_tokens,{input_ids:k})).inputs_embeds}async encode_audio({audio_values:k}){return(await z(this.sessions.audio_encoder,{audio_values:k})).audio_features}}class Ce{}class $e extends Ce{constructor({last_hidden_state:k,hidden_states:H=null,attentions:fe=null}){super(),this.last_hidden_state=k,this.hidden_states=H,this.attentions=fe}}class Ne extends ae{}class Le extends Ne{}class Ve extends Ne{async _call(k){return new p(await super._call(k))}}class He extends Ne{async _call(k){return new Wt(await super._call(k))}}class Qe extends Ne{async _call(k){return new f(await super._call(k))}}class et extends Ne{async _call(k){return new b(await super._call(k))}}class ot extends ae{}class Xe extends ot{}class lt extends ot{async _call(k){return new p(await super._call(k))}}class _t extends ot{async _call(k){return new Wt(await super._call(k))}}class dt extends ot{async _call(k){return new f(await super._call(k))}}class xt extends ae{}class gt extends xt{}class We extends ae{}class Ze extends We{}class Pt extends We{async _call(k){return new p(await super._call(k))}}class Zt extends We{async _call(k){return new Wt(await super._call(k))}}class Rt extends We{async _call(k){return new f(await super._call(k))}}class Kr extends We{async _call(k){return new b(await super._call(k))}}class gn extends ae{}class jt extends gn{}class hi extends gn{async _call(k){return new p(await super._call(k))}}class Z extends gn{async _call(k){return new Wt(await super._call(k))}}class be extends gn{async _call(k){return new f(await super._call(k))}}class se extends gn{async _call(k){return new b(await super._call(k))}}class we extends ae{}class je extends we{}class Je extends we{async _call(k){return new p(await super._call(k))}}class Be extends we{async _call(k){return new Wt(await super._call(k))}}class Nt extends we{async _call(k){return new f(await super._call(k))}}class bt extends we{async _call(k){return new b(await super._call(k))}}class wt extends ae{}class Rr extends wt{}class sr extends wt{async _call(k){return new p(await super._call(k))}}class kr extends wt{async _call(k){return new Wt(await super._call(k))}}class Pr extends wt{async _call(k){return new f(await super._call(k))}}class Rn extends wt{async _call(k){return new b(await super._call(k))}}class Lr extends ae{}class Tn extends Lr{}class Pi extends Lr{async _call(k){return new p(await super._call(k))}}class Bi extends Lr{async _call(k){return new Wt(await super._call(k))}}class zi extends Lr{async _call(k){return new f(await super._call(k))}}class no extends Lr{async _call(k){return new b(await super._call(k))}}class Ei extends ae{}class io extends Ei{}class Wn extends Ei{async _call(k){return new p(await super._call(k))}}class vs extends Ei{async _call(k){return new Wt(await super._call(k))}}class ri extends Ei{async _call(k){return new f(await super._call(k))}}class zo extends Ei{async _call(k){return new b(await super._call(k))}}class Ur extends ae{}class es extends Ur{}class ts extends Ur{async _call(k){return new Wt(await super._call(k))}}class Kn extends Ur{async _call(k){return new f(await super._call(k))}}class Ci extends Ur{async _call(k){return new b(await super._call(k))}}class it extends Ur{async _call(k){return new p(await super._call(k))}}class nt extends ae{}class At extends nt{}class vn extends nt{async _call(k){return new p(await super._call(k))}}class pi extends nt{async _call(k){return new Wt(await super._call(k))}}class ys extends nt{async _call(k){return new f(await super._call(k))}}class dn extends ae{}class Gn extends dn{}class _s extends dn{async _call(k){return new p(await super._call(k))}}class mi extends dn{async _call(k){return new Wt(await super._call(k))}}class xl extends dn{async _call(k){return new b(await super._call(k))}}class Sn extends ae{}class Ml extends Sn{}class Tl extends Sn{async _call(k){return new p(await super._call(k))}}class Sl extends Sn{async _call(k){return new Wt(await super._call(k))}}class so extends Sn{async _call(k){return new f(await super._call(k))}}class Ns extends Sn{async _call(k){return new b(await super._call(k))}}class Ui extends ae{}class oo extends Ui{}class Pl extends Ui{async _call(k){return new p(await super._call(k))}}class El extends Ui{async _call(k){return new Wt(await super._call(k))}}class Uo extends Ui{async _call(k){return new b(await super._call(k))}}class ao extends ae{}class ke extends ao{}class q extends ao{async _call(k){return new Wt(await super._call(k))}}class de extends ao{async _call(k){return new b(await super._call(k))}}class _e extends ao{async _call(k){return new p(await super._call(k))}}class ve extends ae{forward_params=["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"]}class Re extends ve{}class Ke extends ve{}class ft extends ae{}class mt extends ft{}class vt extends ft{}class ut extends ae{}class tr extends ut{}class Lt extends ut{}class dr extends ae{}class Fr extends dr{}class wr extends dr{}class Xr extends dr{async _call(k){return new Wt(await super._call(k))}}class pr extends ae{}class Ar extends pr{}class lo extends pr{}class Pn extends pr{async _call(k){return new Wt(await super._call(k))}}class Ai extends pr{}class Ir extends ae{}class En extends Ir{}class Cn extends Ir{}class Vi extends ae{}class bs extends Vi{}class yn extends Vi{}class fn extends ae{}class Yr extends fn{}class Vr extends fn{async _call(k){return new p(await super._call(k))}}class Qr extends fn{async _call(k){return new Wt(await super._call(k))}}class _n extends fn{async _call(k){return new f(await super._call(k))}}class Xn extends fn{async _call(k){return new b(await super._call(k))}}class Oi extends ae{}class $a extends Oi{}class ud extends Oi{async _call(k){return new p(await super._call(k))}}class ws extends Oi{async _call(k){return new Wt(await super._call(k))}}class zu extends Oi{async _call(k){return new f(await super._call(k))}}class Cl extends Oi{async _call(k){return new b(await super._call(k))}}class Vo extends ae{}class Al extends Vo{}class Ol extends Vo{async _call(k){return new p(await super._call(k))}}class cd extends Vo{async _call(k){return new Wt(await super._call(k))}}class gi extends Vo{async _call(k){return new f(await super._call(k))}}class Wo extends Vo{async _call(k){return new b(await super._call(k))}}class kl extends ae{}class Na extends kl{}class gh extends kl{}class Il extends ae{requires_attention_mask=!1;main_input_name="input_features";forward_params=["input_features","attention_mask","decoder_input_ids","decoder_attention_mask","past_key_values"]}class jl extends Il{}class uo extends Il{_prepare_generation_config(k,H){return super._prepare_generation_config(k,H,w.WhisperGenerationConfig)}_retrieve_init_tokens(k){const H=[k.decoder_start_token_id];let fe=k.language;const me=k.task;if(k.is_multilingual){fe||(console.warn("No language specified - defaulting to English (en)."),fe="en");const Ae=`<|${(0,S.whisper_language_to_code)(fe)}|>`;H.push(k.lang_to_id[Ae]),H.push(k.task_to_id[me??"transcribe"])}else if(fe||me)throw new Error("Cannot specify `task` or `language` for an English-only model. If the model is intended to be multilingual, pass `is_multilingual=true` to generate, or update the generation config.");return!k.return_timestamps&&k.no_timestamps_token_id&&H.at(-1)!==k.no_timestamps_token_id?H.push(k.no_timestamps_token_id):k.return_timestamps&&H.at(-1)===k.no_timestamps_token_id&&(console.warn("<|notimestamps|> prompt token is removed from generation_config since `return_timestamps` is set to `true`."),H.pop()),H.filter(ge=>ge!=null)}async generate({inputs:k=null,generation_config:H=null,logits_processor:fe=null,stopping_criteria:me=null,...ge}){H=this._prepare_generation_config(H,ge);const Ae=ge.decoder_input_ids??this._retrieve_init_tokens(H);if(H.return_timestamps&&(fe??=new c.LogitsProcessorList,fe.push(new c.WhisperTimeStampLogitsProcessor(H,Ae))),H.begin_suppress_tokens&&(fe??=new c.LogitsProcessorList,fe.push(new c.SuppressTokensAtBeginLogitsProcessor(H.begin_suppress_tokens,Ae.length))),H.return_token_timestamps){if(!H.alignment_heads)throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");H.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),H.output_attentions=!0,H.return_dict_in_generate=!0}const De=await super.generate({inputs:k,generation_config:H,logits_processor:fe,decoder_input_ids:Ae,...ge});return H.return_token_timestamps&&(De.token_timestamps=this._extract_token_timestamps(De,H.alignment_heads,H.num_frames)),De}_extract_token_timestamps(k,H,fe=null,me=.02){if(!k.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");fe==null&&console.warn("`num_frames` has not been set, meaning the entire audio will be analyzed. This may lead to inaccurate token-level timestamps for short audios (< 30 seconds).");let ge=this.config.median_filter_width;ge===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),ge=7);const Ae=k.cross_attentions,De=Array.from({length:this.config.decoder_layers},(st,tt)=>(0,h.cat)(Ae.map(yt=>yt[tt]),2)),Fe=(0,h.stack)(H.map(([st,tt])=>{if(st>=De.length)throw new Error(`Layer index ${st} is out of bounds for cross attentions (length ${De.length}).`);return fe?De[st].slice(null,tt,null,[0,fe]):De[st].slice(null,tt)})).transpose(1,0,2,3),[ht,Te]=(0,h.std_mean)(Fe,-2,0,!0),Me=Fe.clone();for(let st=0;st<Me.dims[0];++st){const tt=Me[st];for(let yt=0;yt<tt.dims[0];++yt){const Xt=tt[yt],Dt=ht[st][yt][0].data,jr=Te[st][yt][0].data;for(let In=0;In<Xt.dims[0];++In){let Bn=Xt[In].data;for(let ir=0;ir<Bn.length;++ir)Bn[ir]=(Bn[ir]-jr[ir])/Dt[ir];Bn.set((0,g.medianFilter)(Bn,ge))}}}const Ee=[(0,h.mean)(Me,1)],ze=k.sequences.dims,ct=new h.Tensor("float32",new Float32Array(ze[0]*ze[1]),ze);for(let st=0;st<ze[0];++st){const tt=Ee[st].neg().squeeze_(0),[yt,Xt]=(0,g.dynamic_time_warping)(tt.tolist()),Dt=Array.from({length:yt.length-1},(Bn,ir)=>yt[ir+1]-yt[ir]),jr=(0,a.mergeArrays)([1],Dt).map(Bn=>!!Bn),In=[];for(let Bn=0;Bn<jr.length;++Bn)jr[Bn]&&In.push(Xt[Bn]*me);ct[st].data.set(In,1)}return ct}}class Da extends uo{}class Uu extends ae{requires_attention_mask=!1;main_input_name="input_values";forward_params=["input_values","decoder_input_ids","past_key_values"]}class wg extends Uu{}class dd extends Uu{}class Vu extends ae{main_input_name="pixel_values";forward_params=["pixel_values","decoder_input_ids","encoder_hidden_states","past_key_values"]}class Ds extends ae{forward_params=["input_ids","attention_mask","pixel_values","position_ids","past_key_values"]}class Wu extends Ds{_merge_input_ids_with_image_features(k){const H=k.image_features.dims.at(-1),fe=k.image_features.view(-1,H);return U({image_token_id:this.config.image_token_index,...k,image_features:fe})}}class fd extends Wu{}class vh extends Wu{}class yh extends ae{forward_params=["input_ids","inputs_embeds","attention_mask","pixel_values","encoder_outputs","decoder_input_ids","decoder_inputs_embeds","decoder_attention_mask","past_key_values"];main_input_name="inputs_embeds"}class _h extends yh{_merge_input_ids_with_image_features({inputs_embeds:k,image_features:H,input_ids:fe,attention_mask:me}){return{inputs_embeds:(0,h.cat)([H,k],1),attention_mask:(0,h.cat)([(0,h.ones)(H.dims.slice(0,2)),me],1)}}async _prepare_inputs_embeds({input_ids:k,pixel_values:H,inputs_embeds:fe,attention_mask:me}){if(!k&&!H)throw new Error("Either `input_ids` or `pixel_values` should be provided.");let ge,Ae;return k&&(ge=await this.encode_text({input_ids:k})),H&&(Ae=await this.encode_image({pixel_values:H})),ge&&Ae?{inputs_embeds:fe,attention_mask:me}=this._merge_input_ids_with_image_features({inputs_embeds:ge,image_features:Ae,input_ids:k,attention_mask:me}):fe=ge||Ae,{inputs_embeds:fe,attention_mask:me}}async forward({input_ids:k,pixel_values:H,attention_mask:fe,decoder_input_ids:me,decoder_attention_mask:ge,encoder_outputs:Ae,past_key_values:De,inputs_embeds:Fe,decoder_inputs_embeds:ht}){if(Fe||({inputs_embeds:Fe,attention_mask:fe}=await this._prepare_inputs_embeds({input_ids:k,pixel_values:H,inputs_embeds:Fe,attention_mask:fe})),!Ae){let{last_hidden_state:Ee}=await W(this,{inputs_embeds:Fe,attention_mask:fe});Ae=Ee}if(!ht){if(!me)throw new Error("Either `decoder_input_ids` or `decoder_inputs_embeds` should be provided.");ht=await this.encode_text({input_ids:me})}return await ce(this,{inputs_embeds:ht,attention_mask:ge,encoder_attention_mask:fe,encoder_hidden_states:Ae,past_key_values:De},!0)}}class $l extends ae{forward_params=["input_ids","attention_mask","pixel_values","position_ids","past_key_values"]}class hd extends $l{_merge_input_ids_with_image_features(k){const H=k.image_features.dims.at(-1),fe=k.image_features.view(-1,H);return U({image_token_id:this.config.image_token_index,...k,image_features:fe})}}class bh extends Ds{_merge_input_ids_with_image_features(k){const H=k.image_features.dims.at(-1),fe=k.image_features.view(-1,H);return U({image_token_id:this.config.image_token_index,...k,image_features:fe})}}class wh extends ae{forward_params=["input_ids","attention_mask","inputs_embeds","per_layer_inputs","position_ids","pixel_values","input_features","input_features_mask","past_key_values"]}class pd extends wh{async forward({input_ids:k=null,attention_mask:H=null,pixel_values:fe=null,input_features:me=null,input_features_mask:ge=null,position_ids:Ae=null,inputs_embeds:De=null,per_layer_inputs:Fe=null,past_key_values:ht=null,generation_config:Te=null,logits_processor:Me=null,...Ee}){if((!De||!Fe)&&({inputs_embeds:De,per_layer_inputs:Fe}=await z(this.sessions.embed_tokens,{input_ids:k}),k.dims[1]!==1)){if(fe){const{image_features:ct}=await z(this.sessions.vision_encoder,{pixel_values:fe});({inputs_embeds:De,attention_mask:H}=this._merge_input_ids_with_image_features({image_features:ct,inputs_embeds:De,input_ids:k,attention_mask:H}))}if(me){const{audio_features:ct}=await z(this.sessions.audio_encoder,{input_features:me,input_features_mask:ge});({inputs_embeds:De,attention_mask:H}=this._merge_input_ids_with_audio_features({audio_features:ct,inputs_embeds:De,input_ids:k,attention_mask:H}))}}return await ce(this,{inputs_embeds:De,per_layer_inputs:Fe,past_key_values:ht,attention_mask:H,position_ids:Ae,generation_config:Te,logits_processor:Me},!0)}_merge_input_ids_with_image_features(k){const H=k.image_features.dims.at(-1),fe=k.image_features.view(-1,H);return U({image_token_id:this.config.image_token_id,...k,image_features:fe})}_merge_input_ids_with_audio_features(k){const H=k.audio_features.dims.at(-1),fe=k.audio_features.view(-1,H);return te({audio_token_id:this.config.audio_token_id,...k,audio_features:fe})}}class Gu extends ae{forward_params=["input_ids","attention_mask","pixel_values","pixel_attention_mask","position_ids","past_key_values"]}class qu extends Gu{async encode_image({pixel_values:k,pixel_attention_mask:H}){return(await z(this.sessions.vision_encoder,{pixel_values:k,pixel_attention_mask:H})).image_features}_merge_input_ids_with_image_features(k){const H=k.image_features.dims.at(-1),fe=k.image_features.view(-1,H);return U({image_token_id:this.config.image_token_id,...k,image_features:fe})}}class md extends qu{}class xh extends ae{forward_params=["input_ids","inputs_embeds","attention_mask","position_ids","pixel_values","image_sizes","past_key_values"]}class Hu extends xh{async forward({input_ids:k=null,attention_mask:H=null,pixel_values:fe=null,image_sizes:me=null,position_ids:ge=null,inputs_embeds:Ae=null,past_key_values:De=null,generation_config:Fe=null,logits_processor:ht=null,...Te}){if(!Ae){let Ee;if(fe&&k.dims[1]!==1){if(!me)throw new Error("`image_sizes` must be provided when `pixel_values` is provided.");({image_features:Ee}=await z(this.sessions.vision_encoder,{pixel_values:fe,image_sizes:me}))}else{const ze=this.config.normalized_config.hidden_size;Ee=new h.Tensor("float32",[],[0,ze])}({inputs_embeds:Ae}=await z(this.sessions.prepare_inputs_embeds,{input_ids:k,image_features:Ee}))}return await ce(this,{inputs_embeds:Ae,past_key_values:De,attention_mask:H,position_ids:ge,generation_config:Fe,logits_processor:ht},!1)}}class Go extends ae{}class Nl extends Go{}class Dl extends Go{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"text_model"})}}class gd extends Go{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"text_model"})}}class xg extends Go{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"vision_model"})}}class Mh extends Go{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"vision_model"})}}class Rl extends ae{}class Ra extends Rl{}class qo extends Rl{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"text_model"})}}class vd extends Go{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"vision_model"})}}class Ku extends ae{}class Xu extends Ku{}class La extends ae{}class Yu extends La{async forward(k){const H=!k.input_ids,fe=!k.pixel_values;if(H&&fe)throw new Error("Either `input_ids` or `pixel_values` should be provided.");if(H&&(k.input_ids=(0,h.ones)([k.pixel_values.dims[0],1])),fe){const{image_size:ht}=this.config.vision_config;k.pixel_values=(0,h.full)([0,3,ht,ht],0)}const{text_embeddings:me,image_embeddings:ge,l2norm_text_embeddings:Ae,l2norm_image_embeddings:De}=await super.forward(k),Fe={};return H||(Fe.text_embeddings=me,Fe.l2norm_text_embeddings=Ae),fe||(Fe.image_embeddings=ge,Fe.l2norm_image_embeddings=De),Fe}}class yd extends La{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"text_model"})}}class co extends La{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"vision_model"})}}class Qu extends ae{}class Ll extends Qu{}class kt extends Qu{}class Ju extends ae{}class Zu extends Ju{}class Ho extends Ju{}class xs extends ae{}class rs extends xs{}class fo extends xs{}class Fl extends ae{}class ec extends Fl{}class Bl extends Fl{}class Fa extends ae{}class zl extends Fa{}class tc extends Fa{}class Ul extends ae{}class _d extends Ul{}class Vl extends Ul{}class Wl extends ae{}class rc extends Wl{}class bd extends Wl{}class vi extends ae{}class Ko extends vi{}class nc extends vi{}class Gl extends ae{}class I extends Gl{}class R extends Gl{}class Y extends ae{}class ie extends Y{}class le extends Y{}class Se extends ae{}class Ge extends Se{}class rt extends Se{}class pt extends ae{}class Tt extends pt{}class Ft extends pt{}class rr extends ae{}class mr extends rr{}class An extends rr{}class ns extends ae{}class wd extends ns{}class Mg extends ns{}class Th extends ae{}class Tg extends Th{}class Sg extends Th{}class Sh extends ae{}class Xo extends Sh{}class Ph extends Sh{}class xd extends ae{}class C0 extends xd{}class A0 extends xd{}class ql extends ae{}class O0 extends ql{}class Pg extends ql{}class Eh extends ae{}class Wr extends Eh{}class Ch extends Eh{}class ic extends ae{}class sc extends ic{}class Eg extends ic{}class Md extends ae{}class oc extends Md{}class Td extends Md{}class Ba extends ae{}class Cg extends Ba{}class k0 extends Ba{}class Ag extends ae{}class Og extends Ag{}class Sd extends Ag{}class Pd extends ae{forward_params=["input_ids","attention_mask","position_ids","past_key_values","pixel_values","image_grid_thw"]}class Ah extends Pd{get_rope_index(k,H,fe,me){const{vision_config:ge,image_token_id:Ae,video_token_id:De,vision_start_token_id:Fe}=this.config,ht=ge.spatial_merge_size??2,Te=[];if(H||fe){let Me=k.tolist();me||(me=(0,h.ones_like)(k));const Ee=me.tolist(),ze=Array.from({length:3},Xt=>Array.from({length:k.dims[0]},Dt=>Array.from({length:k.dims[1]},jr=>1))),ct=H?H.tolist():[],st=fe?fe.tolist():[];let tt=0,yt=0;for(let Xt=0;Xt<Me.length;++Xt){const Dt=Me[Xt].filter((sn,Jn)=>Ee[Xt][Jn]==1),In=Dt.reduce((sn,Jn,Sc)=>(Jn==Fe&&sn.push(Sc),sn),[]).map(sn=>Dt[sn+1]),Bn=In.filter(sn=>sn==Ae).length,ir=In.filter(sn=>sn==De).length;let bn=[],oi=0,df=Bn,us=ir;for(let sn=0;sn<In.length;++sn){const Jn=Dt.findIndex((hf,oa)=>oa>oi&&hf==Ae),Sc=Dt.findIndex((hf,oa)=>oa>oi&&hf==De),ff=df>0&&Jn!==-1?Jn:Dt.length+1,Lp=us>0&&Sc!==-1?Sc:Dt.length+1;let ab,lM,uM,cM;ff<Lp?([lM,uM,cM]=ct[tt],++tt,--df,ab=ff):([lM,uM,cM]=st[yt],++yt,--us,ab=Lp);const[Tee,dM,lb]=[Number(lM),Math.floor(Number(uM)/ht),Math.floor(Number(cM)/ht)],fM=ab-oi,M$=bn.length>0?(0,g.max)(bn.at(-1))[0]+1:0;bn.push(Array.from({length:3*fM},(hf,oa)=>M$+oa%fM));const hM=fM+M$,ub=Tee*dM*lb,See=Array.from({length:ub},(hf,oa)=>hM+Math.floor(oa/(dM*lb))),Pee=Array.from({length:ub},(hf,oa)=>hM+Math.floor(oa/lb)%dM),Eee=Array.from({length:ub},(hf,oa)=>hM+oa%lb);bn.push([See,Pee,Eee].flat()),oi=ab+ub}if(oi<Dt.length){const sn=bn.length>0?(0,g.max)(bn.at(-1))[0]+1:0,Jn=Dt.length-oi;bn.push(Array.from({length:3*Jn},(Sc,ff)=>sn+ff%Jn))}const sa=bn.reduce((sn,Jn)=>sn+Jn.length,0),Dp=new Array(sa);let Rp=0;for(let sn=0;sn<3;++sn)for(let Jn=0;Jn<bn.length;++Jn){const Sc=bn[Jn],ff=Sc.length/3;for(let Lp=sn*ff;Lp<(sn+1)*ff;++Lp)Dp[Rp++]=Sc[Lp]}let ob=0;const iy=Ee[Xt];for(let sn=0;sn<iy.length;++sn)if(iy[sn]==1){for(let Jn=0;Jn<3;++Jn)ze[Jn][Xt][sn]=Dp[Jn*sa/3+ob];++ob}const Mee=(0,g.max)(Dp)[0];Te.push(Mee+1-Me[Xt].length)}return[new h.Tensor("int64",ze.flat(1/0),[3,k.dims[0],k.dims[1]]),new h.Tensor("int64",Te,[Te.length,1])]}else if(me){const{data:Me,dims:Ee}=xe(me),ze=BigInt64Array.from({length:3*Me.length},(st,tt)=>Me[tt%Me.length]),ct=Array.from({length:Ee[0]},(st,tt)=>(0,g.max)(Me.subarray(Ee[1]*tt,Ee[1]*(tt+1)))[0]+1n+BigInt(Ee[1]));return[new h.Tensor("int64",ze,[3,...Ee]),new h.Tensor("int64",ct,[ct.length,1])]}else{const[Me,Ee]=k.dims,ze=BigInt64Array.from({length:3*Me*Ee},(ct,st)=>BigInt(Math.floor(st%Ee/Me)));return[new h.Tensor("int64",ze,[3,...k.dims]),(0,h.zeros)([Me,1])]}}async encode_image({pixel_values:k,image_grid_thw:H}){return(await z(this.sessions.vision_encoder,{pixel_values:k,grid_thw:H})).image_features}_merge_input_ids_with_image_features(k){return U({image_token_id:this.config.image_token_id,...k})}prepare_inputs_for_generation(k,H,fe){if(H.attention_mask&&!H.position_ids)if(!H.past_key_values)[H.position_ids,H.rope_deltas]=this.get_rope_index(H.input_ids,H.image_grid_thw,H.video_grid_thw,H.attention_mask);else{H.pixel_values=null;const me=BigInt(Object.values(H.past_key_values)[0].dims.at(-2)),ge=H.rope_deltas.map(Ae=>me+Ae);H.position_ids=(0,h.stack)([ge,ge,ge],0)}return H}}class Ed extends ae{}class Oh extends Ed{}class kh extends Ed{}class kg extends ae{}class Ig extends kg{}class I0 extends kg{}class jg extends ae{}class Ih extends jg{}class Yo extends jg{}class jh extends ae{}class Hl extends jh{}class Rs extends jh{}class Kl extends ae{}class ho extends Kl{}class $h extends Kl{}class $g extends ae{}class j0 extends $g{}class za extends $g{async _call(k){return new Wt(await super._call(k))}}class Xl extends ae{}class Yl extends Xl{}class Cd extends Xl{async _call(k){return new Wt(await super._call(k))}}class Nh extends ae{}class Ql extends Nh{}class po extends ae{}class Gr extends po{}class Br extends po{async _call(k){return new Wt(await super._call(k))}}class Qo extends ae{}class ni extends Qo{}class yi extends ae{}class Ua extends yi{}class Jl extends yi{async _call(k){return new Wt(await super._call(k))}}class ki extends ae{}class Ad extends ki{}class Dh extends ae{}class Ng extends Dh{}class Od extends Dh{async _call(k){return new Wt(await super._call(k))}}class Dg extends ae{}class mo extends Dg{async _call(k){return new F(await super._call(k))}}class ac extends ae{}class Rh extends ac{}class Rg extends ac{async _call(k){return new Wt(await super._call(k))}}class Lg extends ae{}class Jo extends Lg{}class Zl extends Lg{async _call(k){return new Wt(await super._call(k))}}class Va extends ae{}class kd extends Va{}class Id extends Va{}class Wi extends ae{}class is extends Wi{}class Wa extends Wi{}class Ls extends ae{}class go extends Ls{}class Ga extends Ls{async _call(k){return new Wt(await super._call(k))}}class jd extends ae{}class Lh extends jd{}class Fh extends jd{async _call(k){return new ji(await super._call(k))}}class Ii extends jd{async _call(k){return new Jr(await super._call(k))}}class ji extends Ce{constructor({logits:k,pred_boxes:H}){super(),this.logits=k,this.pred_boxes=H}}class Jr extends Ce{constructor({logits:k,pred_boxes:H,pred_masks:fe}){super(),this.logits=k,this.pred_boxes=H,this.pred_masks=fe}}class ss extends ae{}class Fg extends ss{}class Bg extends ss{async _call(k){return new eu(await super._call(k))}}class eu extends Ce{constructor({logits:k,pred_boxes:H}){super(),this.logits=k,this.pred_boxes=H}}class $d extends ae{}class zg extends $d{}class Nd extends $d{async _call(k){return new Ug(await super._call(k))}}class Ug extends eu{}class qa extends ae{}class Bh extends qa{}class $0 extends qa{async _call(k){return new lc(await super._call(k))}}class lc extends eu{}class uc extends ae{}class Vg extends uc{}class Wg extends uc{async _call(k){return new eu(await super._call(k))}}class Ha extends ae{}class Gg extends Ha{}class Dd extends Ha{async _call(k){return new Rd(await super._call(k))}}class Rd extends ji{}class Ka extends ae{}class zh extends Ka{}class Uh extends Ka{async _call(k){return new Wt(await super._call(k))}}class Ld extends ae{}class Vh extends Ld{}class tu extends Ld{async _call(k){return new Wt(await super._call(k))}}class Gi extends ae{}class Xa extends Gi{}class Wh extends Gi{async _call(k){return new Wt(await super._call(k))}}class Fd extends ae{}class vo extends Fd{}class Zo extends Fd{async _call(k){return new Wt(await super._call(k))}}class Gh extends Fd{}class qh extends ae{}class yo extends qh{}class ea extends qh{}class cc extends ae{}class qg extends cc{}class Bd extends cc{}class Hg extends ae{}class dc extends Hg{}class os extends ae{}class fc extends os{}class hc extends os{}class Ya extends os{}class Hh extends ae{}class ru extends Hh{}class Kg extends ae{}class Kh extends Kg{}class rn extends ae{}class zd extends rn{}class Ud extends ae{}class Xh extends Ud{}class Vd extends Ud{}class Wd extends ae{}class Qa extends Wd{}class nn extends Wd{}class Ln extends ae{}class qn extends Ln{}class pc extends ae{}class mc extends pc{}class gc extends pc{async _call(k){return new Wt(await super._call(k))}}class Xg extends ae{}class ii extends Xg{}class Yh extends Xg{async _call(k){return new Wt(await super._call(k))}}class Gd extends ae{}class Qh extends Gd{}class Fs extends Gd{async _call(k){return new Wt(await super._call(k))}}class qi extends ae{}class vc extends qi{}class Jh extends qi{async _call(k){return new Wt(await super._call(k))}}class Zh extends ae{}class Yg extends Zh{}class ep extends ae{}class Qg extends ep{}class Jg extends ep{async _call(k){return new Zg(await super._call(k))}}class Zg extends Ce{constructor({logits:k,pred_boxes:H}){super(),this.logits=k,this.pred_boxes=H}}class ev extends ae{}class tv extends ev{async get_image_embeddings({pixel_values:k}){return await W(this,{pixel_values:k})}async forward(k){if((!k.image_embeddings||!k.image_positional_embeddings)&&(k={...k,...await this.get_image_embeddings(k)}),!k.input_labels&&k.input_points){const fe=k.input_points.dims.slice(0,-1),me=fe.reduce((ge,Ae)=>ge*Ae,1);k.input_labels=new h.Tensor("int64",new BigInt64Array(me).fill(1n),fe)}const H={image_embeddings:k.image_embeddings,image_positional_embeddings:k.image_positional_embeddings};return k.input_points&&(H.input_points=k.input_points),k.input_labels&&(H.input_labels=k.input_labels),k.input_boxes&&(H.input_boxes=k.input_boxes),await z(this.sessions.prompt_encoder_mask_decoder,H)}async _call(k){return new rv(await super._call(k))}}class rv extends Ce{constructor({iou_scores:k,pred_masks:H}){super(),this.iou_scores=k,this.pred_masks=H}}class nu extends ae{}class nv extends nu{}class qd extends nu{}class yc extends ae{}class iv extends yc{}class tp extends yc{}class ta extends ae{}class sv extends ta{}class ov extends ta{async _call(k){return new C(await super._call(k))}}class av extends ta{async _call(k){return new Wt(await super._call(k))}}class rp extends ta{async _call(k){return new f(await super._call(k))}}class np extends ae{}class lv extends np{}class uv extends np{async _call(k){return new f(await super._call(k))}}class N0 extends ae{}class cv extends N0{}class ip extends ae{}class D0 extends ip{}class dv extends ip{async _call(k){return new C(await super._call(k))}}class fv extends ip{async _call(k){return new Wt(await super._call(k))}}class _c extends ae{}class Hd extends _c{}class R0 extends _c{async _call(k){return new C(await super._call(k))}}class L0 extends _c{async _call(k){return new Wt(await super._call(k))}}class F0 extends _c{async _call(k){return new f(await super._call(k))}}class Hi extends ae{}class sp extends Hi{}class Kd extends Hi{async _call(k){return new C(await super._call(k))}}class hv extends Hi{async _call(k){return new Wt(await super._call(k))}}class B0 extends ae{}class pv extends ta{}class op extends ta{async _call(k){return new C(await super._call(k))}}class iu extends ta{async _call(k){return new Wt(await super._call(k))}}class Ja extends ae{}class ap extends Ja{}class z0 extends Ja{async _call(k){return new C(await super._call(k))}}class mv extends Ja{async _call(k){return new Wt(await super._call(k))}}class gv extends Ja{async _call(k){return new cf(await super._call(k))}}class vv extends Ja{async _call(k){return new f(await super._call(k))}}class yv extends ae{}class _v extends yv{}class lp extends ae{}class Ki extends lp{}class _i extends lp{}class bv extends lp{async generate_speech(k,H,{threshold:fe=.5,minlenratio:me=0,maxlenratio:ge=20,vocoder:Ae=null}={}){const De={input_ids:k},{encoder_outputs:Fe,encoder_attention_mask:ht}=await W(this,De),Te=Fe.dims[1]/this.config.reduction_factor,Me=Math.floor(Te*ge),Ee=Math.floor(Te*me),ze=this.config.num_mel_bins;let ct=[],st=null,tt=null,yt=0;for(;;){++yt;const jr=X(!!tt);let In;tt?In=tt.output_sequence_out:In=new h.Tensor("float32",new Float32Array(ze),[1,1,ze]);let Bn={use_cache_branch:jr,output_sequence:In,encoder_attention_mask:ht,speaker_embeddings:H,encoder_hidden_states:Fe};this.addPastKeyValues(Bn,st),tt=await z(this.sessions.decoder_model_merged,Bn),st=this.getPastKeyValues(tt,st);const{prob:ir,spectrum:bn}=tt;if(ct.push(bn),yt>=Ee&&(Array.from(ir.data).filter(oi=>oi>=fe).length>0||yt>=Me))break}const Xt=(0,h.cat)(ct),{waveform:Dt}=await z(Ae.sessions.model,{spectrogram:Xt});return{spectrogram:Xt,waveform:Dt}}}class wv extends ae{main_input_name="spectrogram"}class xv extends ae{}class Mv extends xv{}class up extends ae{}class cp extends up{}class Tv extends up{}class Xd extends ae{}class Sv extends Xd{}class Pv extends Xd{}class Yd extends ae{}class dp extends Yd{}class Ev extends Yd{}class bc extends ae{}class Qd extends bc{}class U0 extends bc{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"text_model"})}}class Cv extends bc{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"audio_model"})}}class fp extends ae{}class hp extends fp{async _call(k){return new ne(await super._call(k))}}class su extends ae{}class ra extends su{}class V0 extends su{}class Av extends su{}class Jd extends ae{}class Ov extends Jd{}class kv extends Jd{}class ou extends ae{}class si extends ou{}class W0 extends ou{async _call(k){return new Wt(await super._call(k))}}class Iv extends ae{}class pp extends Iv{}class bi extends Iv{}class jv extends ae{forward_params=["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"];_apply_and_filter_by_delay_pattern_mask(k){const[H,fe]=k.dims,me=this.config.decoder.num_codebooks,ge=fe-me;let Ae=0;for(let ht=0;ht<k.size;++ht){if(k.data[ht]===this.config.decoder.pad_token_id)continue;const Te=ht%fe,Me=Math.floor(ht/fe)%me,Ee=Te-Me;Ee>0&&Ee<=ge&&(k.data[Ae++]=k.data[ht])}const De=Math.floor(H/me),Fe=Ae/(De*me);return new h.Tensor(k.type,k.data.slice(0,Ae),[De,me,Fe])}prepare_inputs_for_generation(k,H,fe){let me=structuredClone(k);for(let Ae=0;Ae<me.length;++Ae)for(let De=0;De<me[Ae].length;++De)Ae%this.config.decoder.num_codebooks>=De&&(me[Ae][De]=BigInt(this.config.decoder.pad_token_id));return fe.guidance_scale!==null&&fe.guidance_scale>1&&(me=me.concat(me)),super.prepare_inputs_for_generation(me,H,fe)}async generate(k){const H=await super.generate(k),fe=this._apply_and_filter_by_delay_pattern_mask(H).unsqueeze_(0),{audio_values:me}=await z(this.sessions.encodec_decode,{audio_codes:fe});return me}}class Mt extends ae{}class au extends Mt{}class mp extends Mt{async _call(k){return new Wt(await super._call(k))}}class $v extends Mt{}class gp extends ae{}class wc extends gp{}class Zd extends gp{async _call(k){return new Wt(await super._call(k))}}class vp extends gp{}class ef extends ae{}class Nv extends ef{}class Dv extends ef{async _call(k){return new Wt(await super._call(k))}}class yp extends ef{}class xc extends ae{}class Yn extends xc{}class Ms extends xc{async _call(k){return new Wt(await super._call(k))}}class na extends xc{}class Rv extends ae{}class Lv extends Rv{}class Ts extends ae{}class Fv extends Ts{forward_params=["input_ids","pixel_values","images_seq_mask","images_emb_mask","attention_mask","position_ids","past_key_values"];constructor(...k){super(...k),this._generation_mode="text"}async forward(k){const H=this._generation_mode??"text";let fe;if(H==="text"||!k.past_key_values){const Fe=this.sessions.prepare_inputs_embeds,ht=(0,a.pick)(k,Fe.inputNames);fe=await z(Fe,ht)}else{const Fe=this.sessions.gen_img_embeds,ht=(0,a.pick)({image_ids:k.input_ids},Fe.inputNames);fe=await z(Fe,ht)}const me={...k,...fe},ge=await ce(this,me),Ae=this.sessions[H==="text"?"lm_head":"gen_head"];if(!Ae)throw new Error(`Unable to find "${Ae}" generation head`);const De=await z(Ae,(0,a.pick)(ge,Ae.inputNames));return{...fe,...ge,...De}}async generate(k){return this._generation_mode="text",super.generate(k)}async generate_images(k){this._generation_mode="image";const H=(k.inputs??k[this.main_input_name]).dims[1],me=(await super.generate(k)).slice(null,[H,null]),ge=this.sessions.image_decode,{decoded_image:Ae}=await z(ge,{generated_tokens:me}),De=Ae.add_(1).mul_(255/2).clamp_(0,255).to("uint8"),Fe=[];for(const ht of De){const Te=m.RawImage.fromTensor(ht);Fe.push(Te)}return Fe}}class Bs extends Ce{constructor({char_logits:k,bpe_logits:H,wp_logits:fe}){super(),this.char_logits=k,this.bpe_logits=H,this.wp_logits=fe}get logits(){return[this.char_logits,this.bpe_logits,this.wp_logits]}}class G0 extends ae{}class Bv extends G0{async _call(k){return new Bs(await super._call(k))}}class _p extends ae{}class zv extends _p{}class Uv extends _p{}class Vv extends ae{}class tf extends Vv{}class bp extends Vv{}class as extends ae{forward_params=["input_ids","attention_mask","position_ids","audio_values","past_key_values"]}class gr extends as{_merge_input_ids_with_audio_features(k){const H=k.audio_features.dims.at(-1),fe=k.audio_features.view(-1,H);return te({audio_token_id:this.config.ignore_index,...k,audio_features:fe})}}class On extends ae{main_input_name="input_values";forward_params=["input_values"]}class kn extends Ce{constructor({audio_codes:k}){super(),this.audio_codes=k}}class Qn extends Ce{constructor({audio_values:k}){super(),this.audio_values=k}}class Xi extends On{async encode(k){return new kn(await z(this.sessions.encoder_model,k))}async decode(k){return new Qn(await z(this.sessions.decoder_model,k))}}class lu extends On{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"encoder_model"})}}class Fn extends On{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"decoder_model"})}}class Za extends ae{main_input_name="input_values";forward_params=["input_values"]}class el extends Ce{constructor({audio_codes:k}){super(),this.audio_codes=k}}class rf extends Ce{constructor({audio_values:k}){super(),this.audio_values=k}}class wp extends Za{async encode(k){return new el(await z(this.sessions.encoder_model,k))}async decode(k){return new rf(await z(this.sessions.decoder_model,k))}}class Mc extends Za{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"encoder_model"})}}class $i extends Za{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"decoder_model"})}}class Tc extends ae{main_input_name="input_values";forward_params=["input_values"]}class uu extends Tc{async encode(k){return await z(this.sessions.encoder_model,k)}async decode(k){return await z(this.sessions.decoder_model,k)}}class _o extends Tc{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"encoder_model"})}}class nf extends Tc{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"decoder_model"})}}class vr{static MODEL_CLASS_MAPPINGS=null;static BASE_IF_FAIL=!1;static async from_pretrained(k,{progress_callback:H=null,config:fe=null,cache_dir:me=null,local_files_only:ge=!1,revision:Ae="main",model_file_name:De=null,subfolder:Fe="onnx",device:ht=null,dtype:Te=null,use_external_data_format:Me=null,session_options:Ee={}}={}){const ze={progress_callback:H,config:fe,cache_dir:me,local_files_only:ge,revision:Ae,model_file_name:De,subfolder:Fe,device:ht,dtype:Te,use_external_data_format:Me,session_options:Ee};if(ze.config=await n.AutoConfig.from_pretrained(k,ze),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);const ct=ze.config.model_type;for(const st of this.MODEL_CLASS_MAPPINGS){let tt=st.get(ct);if(!tt){for(const yt of st.values())if(yt[0]===ct){tt=yt;break}if(!tt)continue}return await tt[1].from_pretrained(k,ze)}if(this.BASE_IF_FAIL)return J0.has(ct)||console.warn(`Unknown model class "${ct}", attempting to construct from base class.`),await ae.from_pretrained(k,ze);throw Error(`Unsupported model type: ${ct}`)}}const tl=new Map([["bert",["BertModel",Le]],["modernbert",["ModernBertModel",Xe]],["nomic_bert",["NomicBertModel",gt]],["roformer",["RoFormerModel",Ze]],["electra",["ElectraModel",je]],["esm",["EsmModel",At]],["convbert",["ConvBertModel",jt]],["camembert",["CamembertModel",Rr]],["deberta",["DebertaModel",Tn]],["deberta-v2",["DebertaV2Model",io]],["mpnet",["MPNetModel",Ml]],["albert",["AlbertModel",ke]],["distilbert",["DistilBertModel",es]],["roberta",["RobertaModel",Yr]],["xlm",["XLMModel",$a]],["xlm-roberta",["XLMRobertaModel",Al]],["clap",["ClapModel",Qd]],["clip",["CLIPModel",Nl]],["clipseg",["CLIPSegModel",Ll]],["chinese_clip",["ChineseCLIPModel",Xu]],["siglip",["SiglipModel",Ra]],["jina_clip",["JinaCLIPModel",Yu]],["mobilebert",["MobileBertModel",Gn]],["squeezebert",["SqueezeBertModel",oo]],["wav2vec2",["Wav2Vec2Model",sv]],["wav2vec2-bert",["Wav2Vec2BertModel",sp]],["unispeech",["UniSpeechModel",D0]],["unispeech-sat",["UniSpeechSatModel",Hd]],["hubert",["HubertModel",pv]],["wavlm",["WavLMModel",ap]],["audio-spectrogram-transformer",["ASTModel",Na]],["vits",["VitsModel",hp]],["pyannote",["PyAnnoteModel",lv]],["wespeaker-resnet",["WeSpeakerResNetModel",cv]],["detr",["DetrModel",Lh]],["rt_detr",["RTDetrModel",Fg]],["rt_detr_v2",["RTDetrV2Model",zg]],["rf_detr",["RFDetrModel",Bh]],["d_fine",["DFineModel",Vg]],["table-transformer",["TableTransformerModel",Gg]],["vit",["ViTModel",j0]],["ijepa",["IJepaModel",Yl]],["pvt",["PvtModel",Gr]],["vit_msn",["ViTMSNModel",Ua]],["vit_mae",["ViTMAEModel",ni]],["groupvit",["GroupViTModel",Ad]],["fastvit",["FastViTModel",Ng]],["mobilevit",["MobileViTModel",Rh]],["mobilevitv2",["MobileViTV2Model",Jo]],["owlvit",["OwlViTModel",kd]],["owlv2",["Owlv2Model",is]],["beit",["BeitModel",go]],["deit",["DeiTModel",zh]],["hiera",["HieraModel",Vh]],["convnext",["ConvNextModel",mc]],["convnextv2",["ConvNextV2Model",ii]],["dinov2",["Dinov2Model",Qh]],["dinov2_with_registers",["Dinov2WithRegistersModel",vc]],["resnet",["ResNetModel",Xa]],["swin",["SwinModel",vo]],["swin2sr",["Swin2SRModel",yo]],["donut-swin",["DonutSwinModel",qn]],["yolos",["YolosModel",Qg]],["dpt",["DPTModel",qg]],["glpn",["GLPNModel",Qa]],["hifigan",["SpeechT5HifiGan",wv]],["efficientnet",["EfficientNetModel",si]],["decision_transformer",["DecisionTransformerModel",Lv]],["patchtst",["PatchTSTForPrediction",zv]],["patchtsmixer",["PatchTSMixerForPrediction",tf]],["mobilenet_v1",["MobileNetV1Model",au]],["mobilenet_v2",["MobileNetV2Model",wc]],["mobilenet_v3",["MobileNetV3Model",Nv]],["mobilenet_v4",["MobileNetV4Model",Yn]],["maskformer",["MaskFormerModel",Xh]],["mgp-str",["MgpstrForSceneTextRecognition",Bv]],["style_text_to_speech_2",["StyleTextToSpeech2Model",_v]]]),xp=new Map([["t5",["T5Model",Re]],["longt5",["LongT5Model",mt]],["mt5",["MT5Model",tr]],["bart",["BartModel",Fr]],["mbart",["MBartModel",Ar]],["marian",["MarianModel",nv]],["whisper",["WhisperModel",jl]],["m2m_100",["M2M100Model",iv]],["blenderbot",["BlenderbotModel",En]],["blenderbot-small",["BlenderbotSmallModel",bs]]]),rl=new Map([["mimi",["MimiModel",Xi]],["dac",["DacModel",wp]],["snac",["SnacModel",uu]]]),Mp=new Map([["bloom",["BloomModel",Ih]],["jais",["JAISModel",rs]],["gpt2",["GPT2Model",Zu]],["gptj",["GPTJModel",_d]],["gpt_bigcode",["GPTBigCodeModel",rc]],["gpt_neo",["GPTNeoModel",ec]],["gpt_neox",["GPTNeoXModel",zl]],["codegen",["CodeGenModel",Ko]],["llama",["LlamaModel",I]],["exaone",["ExaoneModel",Tt]],["olmo",["OlmoModel",wd]],["olmo2",["Olmo2Model",Tg]],["mobilellm",["MobileLLMModel",mr]],["granite",["GraniteModel",Xo]],["cohere",["CohereModel",C0]],["gemma",["GemmaModel",O0]],["gemma2",["Gemma2Model",Wr]],["gemma3_text",["Gemma3Model",sc]],["helium",["HeliumModel",ie]],["glm",["GlmModel",Ge]],["openelm",["OpenELMModel",oc]],["qwen2",["Qwen2Model",Cg]],["qwen3",["Qwen3Model",Og]],["phi",["PhiModel",Oh]],["phi3",["Phi3Model",Ig]],["mpt",["MptModel",Hl]],["opt",["OPTModel",ho]],["mistral",["MistralModel",cp]],["starcoder2",["Starcoder2Model",Sv]],["falcon",["FalconModel",dp]],["stablelm",["StableLmModel",Ov]]]),cu=new Map([["speecht5",["SpeechT5ForSpeechToText",_i]],["whisper",["WhisperForConditionalGeneration",uo]],["lite-whisper",["LiteWhisperForConditionalGeneration",Da]],["moonshine",["MoonshineForConditionalGeneration",dd]]]),Tp=new Map([["speecht5",["SpeechT5ForTextToSpeech",bv]]]),sf=new Map([["vits",["VitsModel",hp]],["musicgen",["MusicgenForConditionalGeneration",jv]]]),of=new Map([["bert",["BertForSequenceClassification",He]],["modernbert",["ModernBertForSequenceClassification",_t]],["roformer",["RoFormerForSequenceClassification",Zt]],["electra",["ElectraForSequenceClassification",Be]],["esm",["EsmForSequenceClassification",pi]],["convbert",["ConvBertForSequenceClassification",Z]],["camembert",["CamembertForSequenceClassification",kr]],["deberta",["DebertaForSequenceClassification",Bi]],["deberta-v2",["DebertaV2ForSequenceClassification",vs]],["mpnet",["MPNetForSequenceClassification",Sl]],["albert",["AlbertForSequenceClassification",q]],["distilbert",["DistilBertForSequenceClassification",ts]],["roberta",["RobertaForSequenceClassification",Qr]],["xlm",["XLMForSequenceClassification",ws]],["xlm-roberta",["XLMRobertaForSequenceClassification",cd]],["bart",["BartForSequenceClassification",Xr]],["mbart",["MBartForSequenceClassification",Pn]],["mobilebert",["MobileBertForSequenceClassification",mi]],["squeezebert",["SqueezeBertForSequenceClassification",El]]]),wi=new Map([["bert",["BertForTokenClassification",Qe]],["modernbert",["ModernBertForTokenClassification",dt]],["roformer",["RoFormerForTokenClassification",Rt]],["electra",["ElectraForTokenClassification",Nt]],["esm",["EsmForTokenClassification",ys]],["convbert",["ConvBertForTokenClassification",be]],["camembert",["CamembertForTokenClassification",Pr]],["deberta",["DebertaForTokenClassification",zi]],["deberta-v2",["DebertaV2ForTokenClassification",ri]],["mpnet",["MPNetForTokenClassification",so]],["distilbert",["DistilBertForTokenClassification",Kn]],["roberta",["RobertaForTokenClassification",_n]],["xlm",["XLMForTokenClassification",zu]],["xlm-roberta",["XLMRobertaForTokenClassification",gi]]]),bo=new Map([["t5",["T5ForConditionalGeneration",Ke]],["longt5",["LongT5ForConditionalGeneration",vt]],["mt5",["MT5ForConditionalGeneration",Lt]],["bart",["BartForConditionalGeneration",wr]],["mbart",["MBartForConditionalGeneration",lo]],["marian",["MarianMTModel",qd]],["m2m_100",["M2M100ForConditionalGeneration",tp]],["blenderbot",["BlenderbotForConditionalGeneration",Cn]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",yn]]]),ls=new Map([["bloom",["BloomForCausalLM",Yo]],["gpt2",["GPT2LMHeadModel",Ho]],["jais",["JAISLMHeadModel",fo]],["gptj",["GPTJForCausalLM",Vl]],["gpt_bigcode",["GPTBigCodeForCausalLM",bd]],["gpt_neo",["GPTNeoForCausalLM",Bl]],["gpt_neox",["GPTNeoXForCausalLM",tc]],["codegen",["CodeGenForCausalLM",nc]],["llama",["LlamaForCausalLM",R]],["exaone",["ExaoneForCausalLM",Ft]],["olmo",["OlmoForCausalLM",Mg]],["olmo2",["Olmo2ForCausalLM",Sg]],["mobilellm",["MobileLLMForCausalLM",An]],["granite",["GraniteForCausalLM",Ph]],["cohere",["CohereForCausalLM",A0]],["gemma",["GemmaForCausalLM",Pg]],["gemma2",["Gemma2ForCausalLM",Ch]],["gemma3_text",["Gemma3ForCausalLM",Eg]],["helium",["HeliumForCausalLM",le]],["glm",["GlmForCausalLM",rt]],["openelm",["OpenELMForCausalLM",Td]],["qwen2",["Qwen2ForCausalLM",k0]],["qwen3",["Qwen3ForCausalLM",Sd]],["phi",["PhiForCausalLM",kh]],["phi3",["Phi3ForCausalLM",I0]],["mpt",["MptForCausalLM",Rs]],["opt",["OPTForCausalLM",$h]],["mbart",["MBartForCausalLM",Ai]],["mistral",["MistralForCausalLM",Tv]],["starcoder2",["Starcoder2ForCausalLM",Pv]],["falcon",["FalconForCausalLM",Ev]],["trocr",["TrOCRForCausalLM",Mv]],["stablelm",["StableLmForCausalLM",kv]],["phi3_v",["Phi3VForCausalLM",Hu]]]),Yi=new Map([["multi_modality",["MultiModalityCausalLM",Fv]]]),Wv=new Map([["bert",["BertForMaskedLM",Ve]],["modernbert",["ModernBertForMaskedLM",lt]],["roformer",["RoFormerForMaskedLM",Pt]],["electra",["ElectraForMaskedLM",Je]],["esm",["EsmForMaskedLM",vn]],["convbert",["ConvBertForMaskedLM",hi]],["camembert",["CamembertForMaskedLM",sr]],["deberta",["DebertaForMaskedLM",Pi]],["deberta-v2",["DebertaV2ForMaskedLM",Wn]],["mpnet",["MPNetForMaskedLM",Tl]],["albert",["AlbertForMaskedLM",_e]],["distilbert",["DistilBertForMaskedLM",it]],["roberta",["RobertaForMaskedLM",Vr]],["xlm",["XLMWithLMHeadModel",ud]],["xlm-roberta",["XLMRobertaForMaskedLM",Ol]],["mobilebert",["MobileBertForMaskedLM",_s]],["squeezebert",["SqueezeBertForMaskedLM",Pl]]]),Sp=new Map([["bert",["BertForQuestionAnswering",et]],["roformer",["RoFormerForQuestionAnswering",Kr]],["electra",["ElectraForQuestionAnswering",bt]],["convbert",["ConvBertForQuestionAnswering",se]],["camembert",["CamembertForQuestionAnswering",Rn]],["deberta",["DebertaForQuestionAnswering",no]],["deberta-v2",["DebertaV2ForQuestionAnswering",zo]],["mpnet",["MPNetForQuestionAnswering",Ns]],["albert",["AlbertForQuestionAnswering",de]],["distilbert",["DistilBertForQuestionAnswering",Ci]],["roberta",["RobertaForQuestionAnswering",Xn]],["xlm",["XLMForQuestionAnswering",Cl]],["xlm-roberta",["XLMRobertaForQuestionAnswering",Wo]],["mobilebert",["MobileBertForQuestionAnswering",xl]],["squeezebert",["SqueezeBertForQuestionAnswering",Uo]]]),af=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",Vu]],["idefics3",["Idefics3ForConditionalGeneration",qu]],["smolvlm",["SmolVLMForConditionalGeneration",md]]]),q0=new Map([["llava",["LlavaForConditionalGeneration",Wu]],["llava_onevision",["LlavaOnevisionForConditionalGeneration",fd]],["moondream1",["Moondream1ForConditionalGeneration",vh]],["florence2",["Florence2ForConditionalGeneration",_h]],["qwen2-vl",["Qwen2VLForConditionalGeneration",Ah]],["idefics3",["Idefics3ForConditionalGeneration",qu]],["smolvlm",["SmolVLMForConditionalGeneration",md]],["paligemma",["PaliGemmaForConditionalGeneration",hd]],["llava_qwen2",["LlavaQwen2ForCausalLM",bh]],["gemma3n",["Gemma3nForConditionalGeneration",pd]]]),ia=new Map([["ultravox",["UltravoxModel",gr]]]),H0=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",Vu]]]),Pp=new Map([["vit",["ViTForImageClassification",za]],["ijepa",["IJepaForImageClassification",Cd]],["pvt",["PvtForImageClassification",Br]],["vit_msn",["ViTMSNForImageClassification",Jl]],["fastvit",["FastViTForImageClassification",Od]],["mobilevit",["MobileViTForImageClassification",Rg]],["mobilevitv2",["MobileViTV2ForImageClassification",Zl]],["beit",["BeitForImageClassification",Ga]],["deit",["DeiTForImageClassification",Uh]],["hiera",["HieraForImageClassification",tu]],["convnext",["ConvNextForImageClassification",gc]],["convnextv2",["ConvNextV2ForImageClassification",Yh]],["dinov2",["Dinov2ForImageClassification",Fs]],["dinov2_with_registers",["Dinov2WithRegistersForImageClassification",Jh]],["resnet",["ResNetForImageClassification",Wh]],["swin",["SwinForImageClassification",Zo]],["segformer",["SegformerForImageClassification",V0]],["efficientnet",["EfficientNetForImageClassification",W0]],["mobilenet_v1",["MobileNetV1ForImageClassification",mp]],["mobilenet_v2",["MobileNetV2ForImageClassification",Zd]],["mobilenet_v3",["MobileNetV3ForImageClassification",Dv]],["mobilenet_v4",["MobileNetV4ForImageClassification",Ms]]]),nl=new Map([["detr",["DetrForObjectDetection",Fh]],["rt_detr",["RTDetrForObjectDetection",Bg]],["rt_detr_v2",["RTDetrV2ForObjectDetection",Nd]],["rf_detr",["RFDetrForObjectDetection",$0]],["d_fine",["DFineForObjectDetection",Wg]],["table-transformer",["TableTransformerForObjectDetection",Dd]],["yolos",["YolosForObjectDetection",Jg]]]),Ep=new Map([["owlvit",["OwlViTForObjectDetection",Id]],["owlv2",["Owlv2ForObjectDetection",Wa]],["grounding-dino",["GroundingDinoForObjectDetection",Yg]]]),Ss=new Map([["detr",["DetrForSegmentation",Ii]],["clipseg",["CLIPSegForImageSegmentation",kt]]]),Gv=new Map([["segformer",["SegformerForSemanticSegmentation",Av]],["sapiens",["SapiensForSemanticSegmentation",fc]],["swin",["SwinForSemanticSegmentation",Gh]],["mobilenet_v1",["MobileNetV1ForSemanticSegmentation",$v]],["mobilenet_v2",["MobileNetV2ForSemanticSegmentation",vp]],["mobilenet_v3",["MobileNetV3ForSemanticSegmentation",yp]],["mobilenet_v4",["MobileNetV4ForSemanticSegmentation",na]]]),qv=new Map([["detr",["DetrForSegmentation",Ii]],["maskformer",["MaskFormerForInstanceSegmentation",Vd]]]),Cp=new Map([["sam",["SamModel",tv]]]),lf=new Map([["wav2vec2",["Wav2Vec2ForCTC",ov]],["wav2vec2-bert",["Wav2Vec2BertForCTC",Kd]],["unispeech",["UniSpeechForCTC",dv]],["unispeech-sat",["UniSpeechSatForCTC",R0]],["wavlm",["WavLMForCTC",z0]],["hubert",["HubertForCTC",op]]]),K0=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",av]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",hv]],["unispeech",["UniSpeechForSequenceClassification",fv]],["unispeech-sat",["UniSpeechSatForSequenceClassification",L0]],["wavlm",["WavLMForSequenceClassification",mv]],["hubert",["HubertForSequenceClassification",iu]],["audio-spectrogram-transformer",["ASTForAudioClassification",gh]]]),X0=new Map([["wavlm",["WavLMForXVector",gv]]]),Hv=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",F0]],["wavlm",["WavLMForAudioFrameClassification",vv]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",rp]],["pyannote",["PyAnnoteForAudioFrameClassification",uv]]]),Kv=new Map([["vitmatte",["VitMatteForImageMatting",mo]]]),du=new Map([["patchtst",["PatchTSTForPrediction",Uv]],["patchtsmixer",["PatchTSMixerForPrediction",bp]]]),Y0=new Map([["swin2sr",["Swin2SRForImageSuperResolution",ea]]]),fu=new Map([["dpt",["DPTForDepthEstimation",Bd]],["depth_anything",["DepthAnythingForDepthEstimation",dc]],["glpn",["GLPNForDepthEstimation",nn]],["sapiens",["SapiensForDepthEstimation",hc]],["depth_pro",["DepthProForDepthEstimation",ru]],["metric3d",["Metric3DForDepthEstimation",Kh]],["metric3dv2",["Metric3Dv2ForDepthEstimation",zd]]]),Xv=new Map([["sapiens",["SapiensForNormalEstimation",Ya]]]),hn=new Map([["vitpose",["VitPoseForPoseEstimation",Ql]]]),Q0=new Map([["clip",["CLIPVisionModelWithProjection",Mh]],["siglip",["SiglipVisionModel",vd]],["jina_clip",["JinaCLIPVisionModel",co]]]),Yv=[[tl,M.EncoderOnly],[xp,M.EncoderDecoder],[Mp,M.DecoderOnly],[rl,M.AutoEncoder],[of,M.EncoderOnly],[wi,M.EncoderOnly],[bo,M.Seq2Seq],[cu,M.Seq2Seq],[ls,M.DecoderOnly],[Yi,M.MultiModality],[Wv,M.EncoderOnly],[Sp,M.EncoderOnly],[af,M.Vision2Seq],[q0,M.ImageTextToText],[ia,M.AudioTextToText],[Pp,M.EncoderOnly],[Ss,M.EncoderOnly],[qv,M.EncoderOnly],[Gv,M.EncoderOnly],[Kv,M.EncoderOnly],[du,M.EncoderOnly],[Y0,M.EncoderOnly],[fu,M.EncoderOnly],[Xv,M.EncoderOnly],[hn,M.EncoderOnly],[nl,M.EncoderOnly],[Ep,M.EncoderOnly],[Cp,M.MaskGeneration],[lf,M.EncoderOnly],[K0,M.EncoderOnly],[Tp,M.Seq2Seq],[sf,M.EncoderOnly],[X0,M.EncoderOnly],[Hv,M.EncoderOnly],[Q0,M.EncoderOnly]];for(const[O,k]of Yv)for(const[H,fe]of O.values())T.set(H,k),E.set(fe,H),P.set(H,fe);const eM=[["MusicgenForConditionalGeneration",jv,M.Musicgen],["Phi3VForCausalLM",Hu,M.Phi3V],["CLIPTextModelWithProjection",gd,M.EncoderOnly],["SiglipTextModel",qo,M.EncoderOnly],["JinaCLIPTextModel",yd,M.EncoderOnly],["ClapTextModelWithProjection",U0,M.EncoderOnly],["ClapAudioModelWithProjection",Cv,M.EncoderOnly],["DacEncoderModel",Mc,M.EncoderOnly],["DacDecoderModel",$i,M.EncoderOnly],["MimiEncoderModel",lu,M.EncoderOnly],["MimiDecoderModel",Fn,M.EncoderOnly],["SnacEncoderModel",_o,M.EncoderOnly],["SnacDecoderModel",nf,M.EncoderOnly],["Gemma3nForConditionalGeneration",pd,M.ImageAudioTextToText]];for(const[O,k,H]of eM)T.set(O,H),E.set(k,O),P.set(O,k);const J0=new Map([["modnet",Ss],["birefnet",Ss],["isnet",Ss],["ben",Ss]]);for(const[O,k]of J0.entries())k.set(O,["PreTrainedModel",ae]),T.set(O,M.EncoderOnly),E.set(ae,O),P.set(O,ae);class Z0 extends vr{static MODEL_CLASS_MAPPINGS=Yv.map(k=>k[0]);static BASE_IF_FAIL=!0}class eb extends vr{static MODEL_CLASS_MAPPINGS=[of]}class tM extends vr{static MODEL_CLASS_MAPPINGS=[wi]}class Ps extends vr{static MODEL_CLASS_MAPPINGS=[bo]}class Qv extends vr{static MODEL_CLASS_MAPPINGS=[cu]}class rM extends vr{static MODEL_CLASS_MAPPINGS=[Tp]}class il extends vr{static MODEL_CLASS_MAPPINGS=[sf]}class Ap extends vr{static MODEL_CLASS_MAPPINGS=[ls]}class hu extends vr{static MODEL_CLASS_MAPPINGS=[Wv]}class Op extends vr{static MODEL_CLASS_MAPPINGS=[Sp]}class Jv extends vr{static MODEL_CLASS_MAPPINGS=[af]}class Zv extends vr{static MODEL_CLASS_MAPPINGS=[Pp]}class nM extends vr{static MODEL_CLASS_MAPPINGS=[Ss]}class ey extends vr{static MODEL_CLASS_MAPPINGS=[Gv]}class iM extends vr{static MODEL_CLASS_MAPPINGS=[qv]}class tb extends vr{static MODEL_CLASS_MAPPINGS=[nl]}class rb extends vr{static MODEL_CLASS_MAPPINGS=[Ep]}class kp extends vr{static MODEL_CLASS_MAPPINGS=[Cp]}class Ip extends vr{static MODEL_CLASS_MAPPINGS=[lf]}class nb extends vr{static MODEL_CLASS_MAPPINGS=[K0]}class ty extends vr{static MODEL_CLASS_MAPPINGS=[X0]}class sM extends vr{static MODEL_CLASS_MAPPINGS=[Hv]}class ib extends vr{static MODEL_CLASS_MAPPINGS=[H0]}class ry extends vr{static MODEL_CLASS_MAPPINGS=[Kv]}class jp extends vr{static MODEL_CLASS_MAPPINGS=[Y0]}class ny extends vr{static MODEL_CLASS_MAPPINGS=[fu]}class $p extends vr{static MODEL_CLASS_MAPPINGS=[Xv]}class sb extends vr{static MODEL_CLASS_MAPPINGS=[hn]}class oM extends vr{static MODEL_CLASS_MAPPINGS=[Q0]}class Np extends vr{static MODEL_CLASS_MAPPINGS=[q0]}class aM extends vr{static MODEL_CLASS_MAPPINGS=[ia]}class uf extends Ce{constructor({logits:k,past_key_values:H,encoder_outputs:fe,decoder_attentions:me=null,cross_attentions:ge=null}){super(),this.logits=k,this.past_key_values=H,this.encoder_outputs=fe,this.decoder_attentions=me,this.cross_attentions=ge}}class Wt extends Ce{constructor({logits:k,...H}){super(),this.logits=k;const fe=Object.values(H);fe.length>0&&(this.attentions=fe)}}class cf extends Ce{constructor({logits:k,embeddings:H}){super(),this.logits=k,this.embeddings=H}}class f extends Ce{constructor({logits:k}){super(),this.logits=k}}class p extends Ce{constructor({logits:k}){super(),this.logits=k}}class b extends Ce{constructor({start_logits:k,end_logits:H}){super(),this.start_logits=k,this.end_logits=H}}class C extends Ce{constructor({logits:k}){super(),this.logits=k}}class N extends Ce{constructor({logits:k,past_key_values:H}){super(),this.logits=k,this.past_key_values=H}}class F extends Ce{constructor({alphas:k}){super(),this.alphas=k}}class ne extends Ce{constructor({waveform:k,spectrogram:H}){super(),this.waveform=k,this.spectrogram=H}}}),"./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js":((e,t,r)=>{r.r(t),r.d(t,{ASTFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js");class s extends n.FeatureExtractor{constructor(a){super(a);const l=this.config.sampling_rate,u=(0,i.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(l/2),l,null,"kaldi",!0);this.mel_filters=u,this.window=(0,i.window_function)(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}async _extract_fbank_features(a,l){return(0,i.spectrogram)(a,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:l,transpose:!0})}async _call(a){(0,n.validate_audio_inputs)(a,"ASTFeatureExtractor");const l=await this._extract_fbank_features(a,this.config.max_length);if(this.config.do_normalize){const u=this.std*2,c=l.data;for(let d=0;d<c.length;++d)c[d]=(c[d]-this.mean)/u}return{input_values:l.unsqueeze_(0)}}}}),"./src/models/auto/feature_extraction_auto.js":((e,t,r)=>{r.r(t),r.d(t,{AutoFeatureExtractor:()=>o});var n=r("./src/utils/constants.js"),i=r("./src/utils/hub.js");r("./src/base/feature_extraction_utils.js");var s=r("./src/models/feature_extractors.js");class o{static async from_pretrained(l,u={}){const c=await(0,i.getModelJSON)(l,n.FEATURE_EXTRACTOR_NAME,!0,u),d=c.feature_extractor_type,h=s[d];if(!h)throw new Error(`Unknown feature_extractor_type: '${d}'. Please report this at ${n.GITHUB_ISSUE_URL}.`);return new h(c)}}}),"./src/models/auto/image_processing_auto.js":((e,t,r)=>{r.r(t),r.d(t,{AutoImageProcessor:()=>a});var n=r("./src/utils/constants.js"),i=r("./src/utils/hub.js"),s=r("./src/base/image_processors_utils.js"),o=r("./src/models/image_processors.js");class a{static async from_pretrained(u,c={}){const d=await(0,i.getModelJSON)(u,n.IMAGE_PROCESSOR_NAME,!0,c),h=d.image_processor_type??d.feature_extractor_type;let m=o[h?.replace(/Fast$/,"")];return m||(h!==void 0&&console.warn(`Image processor type '${h}' not found, assuming base ImageProcessor. Please report this at ${n.GITHUB_ISSUE_URL}.`),m=s.ImageProcessor),new m(d)}}}),"./src/models/auto/processing_auto.js":((e,t,r)=>{r.r(t),r.d(t,{AutoProcessor:()=>u});var n=r("./src/utils/constants.js"),i=r("./src/utils/hub.js"),s=r("./src/base/processing_utils.js"),o=r("./src/models/processors.js"),a=r("./src/models/image_processors.js"),l=r("./src/models/feature_extractors.js");class u{static async from_pretrained(d,h={}){const m=await(0,i.getModelJSON)(d,n.IMAGE_PROCESSOR_NAME,!0,h),{image_processor_type:g,feature_extractor_type:v,processor_class:y}=m;if(y&&o[y])return o[y].from_pretrained(d,h);if(!g&&!v)throw new Error("No `image_processor_type` or `feature_extractor_type` found in the config.");const x={};if(g){const S=a[g.replace(/Fast$/,"")];if(!S)throw new Error(`Unknown image_processor_type: '${g}'.`);x.image_processor=new S(m)}if(v){const S=a[v];if(S)x.image_processor=new S(m);else{const M=l[v];if(!M)throw new Error(`Unknown feature_extractor_type: '${v}'.`);x.feature_extractor=new M(m)}}const w={};return new s.Processor(w,x,null)}}}),"./src/models/beit/image_processing_beit.js":((e,t,r)=>{r.r(t),r.d(t,{BeitFeatureExtractor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}}),"./src/models/bit/image_processing_bit.js":((e,t,r)=>{r.r(t),r.d(t,{BitImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}}),"./src/models/chinese_clip/image_processing_chinese_clip.js":((e,t,r)=>{r.r(t),r.d(t,{ChineseCLIPFeatureExtractor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}}),"./src/models/clap/feature_extraction_clap.js":((e,t,r)=>{r.r(t),r.d(t,{ClapFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js");class s extends n.FeatureExtractor{constructor(a){super(a),this.mel_filters=(0,i.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=(0,i.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=(0,i.window_function)(this.config.fft_window_size,"hann")}async _get_input_mel(a,l,u,c){let d;const h=a.length-l;if(h>0)if(u==="rand_trunc"){const m=Math.floor(Math.random()*(h+1));a=a.subarray(m,m+l),d=await this._extract_fbank_features(a,this.mel_filters_slaney,this.config.nb_max_samples)}else throw new Error(`Truncation strategy "${u}" not implemented`);else{if(h<0){let m=new Float64Array(l);if(m.set(a),c==="repeat")for(let g=a.length;g<l;g+=a.length)m.set(a.subarray(0,Math.min(a.length,l-g)),g);else if(c==="repeatpad")for(let g=a.length;g<-h;g+=a.length)m.set(a,g);a=m}if(u==="fusion")throw new Error(`Truncation strategy "${u}" not implemented`);d=await this._extract_fbank_features(a,this.mel_filters_slaney,this.config.nb_max_samples)}return d.unsqueeze_(0)}async _extract_fbank_features(a,l,u=null){return(0,i.spectrogram)(a,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:l,log_mel:"dB",max_num_frames:u,do_pad:!1,transpose:!0})}async _call(a,{max_length:l=null}={}){return(0,n.validate_audio_inputs)(a,"ClapFeatureExtractor"),{input_features:(await this._get_input_mel(a,l??this.config.nb_max_samples,this.config.truncation,this.config.padding)).unsqueeze_(0)}}}}),"./src/models/clip/image_processing_clip.js":((e,t,r)=>{r.r(t),r.d(t,{CLIPFeatureExtractor:()=>s,CLIPImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}}),"./src/models/convnext/image_processing_convnext.js":((e,t,r)=>{r.r(t),r.d(t,{ConvNextFeatureExtractor:()=>s,ConvNextImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(a){super(a),this.crop_pct=this.config.crop_pct??224/256}async resize(a){const l=this.size?.shortest_edge;if(l===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(l<384){const u=Math.floor(l/this.crop_pct),[c,d]=this.get_resize_output_image_size(a,{shortest_edge:u});a=await a.resize(c,d,{resample:this.resample}),a=await a.center_crop(l,l)}else a=await a.resize(l,l,{resample:this.resample});return a}}class s extends i{}}),"./src/models/dac/feature_extraction_dac.js":((e,t,r)=>{r.r(t),r.d(t,{DacFeatureExtractor:()=>i});var n=r("./src/models/encodec/feature_extraction_encodec.js");class i extends n.EncodecFeatureExtractor{}}),"./src/models/deit/image_processing_deit.js":((e,t,r)=>{r.r(t),r.d(t,{DeiTFeatureExtractor:()=>s,DeiTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}}),"./src/models/detr/image_processing_detr.js":((e,t,r)=>{r.r(t),r.d(t,{DetrFeatureExtractor:()=>o,DetrImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(l){const u=await super._call(l),c=[u.pixel_values.dims[0],64,64],d=(0,i.full)(c,1n);return{...u,pixel_mask:d}}post_process_object_detection(...l){return(0,n.post_process_object_detection)(...l)}post_process_panoptic_segmentation(...l){return(0,n.post_process_panoptic_segmentation)(...l)}post_process_instance_segmentation(...l){return(0,n.post_process_instance_segmentation)(...l)}}class o extends s{}}),"./src/models/donut/image_processing_donut.js":((e,t,r)=>{r.r(t),r.d(t,{DonutFeatureExtractor:()=>s,DonutImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{pad_image(a,l,u,c={}){const[d,h,m]=l;let g=this.image_mean;Array.isArray(this.image_mean)||(g=new Array(m).fill(g));let v=this.image_std;Array.isArray(v)||(v=new Array(m).fill(g));const y=g.map((x,w)=>-x/v[w]);return super.pad_image(a,l,u,{center:!0,constant_values:y,...c})}}class s extends i{}}),"./src/models/dpt/image_processing_dpt.js":((e,t,r)=>{r.r(t),r.d(t,{DPTFeatureExtractor:()=>s,DPTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}}),"./src/models/efficientnet/image_processing_efficientnet.js":((e,t,r)=>{r.r(t),r.d(t,{EfficientNetImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(o){super(o),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(a=>a*a))}}}),"./src/models/encodec/feature_extraction_encodec.js":((e,t,r)=>{r.r(t),r.d(t,{EncodecFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js");class s extends n.FeatureExtractor{async _call(a){(0,n.validate_audio_inputs)(a,"EncodecFeatureExtractor"),a instanceof Float64Array&&(a=new Float32Array(a));const l=this.config.feature_size;if(a.length%l!==0)throw new Error(`The length of the audio data must be a multiple of the number of channels (${l}).`);const u=[1,l,a.length/l];return{input_values:new i.Tensor("float32",a,u)}}}}),"./src/models/feature_extractors.js":((e,t,r)=>{r.r(t),r.d(t,{ASTFeatureExtractor:()=>n.ASTFeatureExtractor,ClapFeatureExtractor:()=>s.ClapFeatureExtractor,DacFeatureExtractor:()=>o.DacFeatureExtractor,EncodecFeatureExtractor:()=>i.EncodecFeatureExtractor,Gemma3nAudioFeatureExtractor:()=>a.Gemma3nAudioFeatureExtractor,ImageFeatureExtractor:()=>y.ImageProcessor,MoonshineFeatureExtractor:()=>l.MoonshineFeatureExtractor,PyAnnoteFeatureExtractor:()=>u.PyAnnoteFeatureExtractor,SeamlessM4TFeatureExtractor:()=>c.SeamlessM4TFeatureExtractor,SnacFeatureExtractor:()=>d.SnacFeatureExtractor,SpeechT5FeatureExtractor:()=>h.SpeechT5FeatureExtractor,Wav2Vec2FeatureExtractor:()=>m.Wav2Vec2FeatureExtractor,WeSpeakerFeatureExtractor:()=>g.WeSpeakerFeatureExtractor,WhisperFeatureExtractor:()=>v.WhisperFeatureExtractor});var n=r("./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js"),i=r("./src/models/encodec/feature_extraction_encodec.js"),s=r("./src/models/clap/feature_extraction_clap.js"),o=r("./src/models/dac/feature_extraction_dac.js"),a=r("./src/models/gemma3n/feature_extraction_gemma3n.js"),l=r("./src/models/moonshine/feature_extraction_moonshine.js"),u=r("./src/models/pyannote/feature_extraction_pyannote.js"),c=r("./src/models/seamless_m4t/feature_extraction_seamless_m4t.js"),d=r("./src/models/snac/feature_extraction_snac.js"),h=r("./src/models/speecht5/feature_extraction_speecht5.js"),m=r("./src/models/wav2vec2/feature_extraction_wav2vec2.js"),g=r("./src/models/wespeaker/feature_extraction_wespeaker.js"),v=r("./src/models/whisper/feature_extraction_whisper.js"),y=r("./src/base/image_processors_utils.js")}),"./src/models/florence2/processing_florence2.js":((e,t,r)=>{r.r(t),r.d(t,{Florence2Processor:()=>o});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class o extends n.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=i.AutoImageProcessor;constructor(l,u,c){super(l,u,c);const{tasks_answer_post_processing_type:d,task_prompts_without_inputs:h,task_prompts_with_input:m}=this.image_processor.config;this.tasks_answer_post_processing_type=new Map(Object.entries(d??{})),this.task_prompts_without_inputs=new Map(Object.entries(h??{})),this.task_prompts_with_input=new Map(Object.entries(m??{})),this.regexes={quad_boxes:/(.+?)<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm,bboxes:/([^<]+)?<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm},this.size_per_bin=1e3}construct_prompts(l){typeof l=="string"&&(l=[l]);const u=[];for(const c of l)if(this.task_prompts_without_inputs.has(c))u.push(this.task_prompts_without_inputs.get(c));else{for(const[d,h]of this.task_prompts_with_input)if(c.includes(d)){u.push(h.replaceAll("{input}",c).replaceAll(d,""));break}u.length!==l.length&&u.push(c)}return u}post_process_generation(l,u,c){const d=this.tasks_answer_post_processing_type.get(u)??"pure_text";l=l.replaceAll("<s>","").replaceAll("</s>","");let h;switch(d){case"pure_text":h=l;break;case"description_with_bboxes":case"bboxes":case"phrase_grounding":case"ocr":const m=d==="ocr"?"quad_boxes":"bboxes",g=l.matchAll(this.regexes[m]),v=[],y=[];for(const[x,w,...S]of g)v.push(w?w.trim():v.at(-1)??""),y.push(S.map((M,T)=>(Number(M)+.5)/this.size_per_bin*c[T%2]));h={labels:v,[m]:y};break;default:throw new Error(`Task "${u}" (of type "${d}") not yet implemented.`)}return{[u]:h}}async _call(l,u=null,c={}){if(!l&&!u)throw new Error("Either text or images must be provided");const d=await this.image_processor(l,c),h=u?this.tokenizer(this.construct_prompts(u),c):{};return{...d,...h}}}}),"./src/models/gemma3n/feature_extraction_gemma3n.js":((e,t,r)=>{r.r(t),r.d(t,{Gemma3nAudioFeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/audio.js");class o extends n.FeatureExtractor{constructor(l){super(l);const{fft_length:u,feature_size:c,min_frequency:d,max_frequency:h,sampling_rate:m,frame_length:g}=this.config,v=(0,s.mel_filter_bank)(Math.floor(1+u/2),c,d,h,m,null,"htk",!1);this.mel_filters=v,this.window=(0,s.window_function)(g,"hann")}async _extract_fbank_features(l,u){return(0,s.spectrogram)(l,this.window,this.config.frame_length,this.config.hop_length,{fft_length:this.config.fft_length,center:!1,onesided:!0,preemphasis:this.config.preemphasis,preemphasis_htk_flavor:this.config.preemphasis_htk_flavor,mel_filters:this.mel_filters,log_mel:"log",mel_floor:this.config.mel_floor,remove_dc_offset:!1,transpose:!0})}async _call(l,{max_length:u=48e4,truncation:c=!0,padding:d=!0,pad_to_multiple_of:h=128}={}){if((0,n.validate_audio_inputs)(l,"Gemma3nAudioFeatureExtractor"),c&&l.length>u&&(l=l.slice(0,u)),d&&l.length%h!==0){const v=h-l.length%h,y=new Float64Array(l.length+v);y.set(l),this.config.padding_value!==0&&y.fill(this.config.padding_value,l.length),l=y}const m=await this._extract_fbank_features(l,this.config.max_length),g=(0,i.full)([1,m.dims[0]],!0);return{input_features:m.unsqueeze_(0),input_features_mask:g}}}}),"./src/models/gemma3n/processing_gemma3n.js":((e,t,r)=>{r.r(t),r.d(t,{Gemma3nProcessor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/models/auto/feature_extraction_auto.js"),o=r("./src/tokenizers.js");r("./src/utils/image.js"),r("./src/utils/audio.js");class a extends n.Processor{static image_processor_class=i.AutoImageProcessor;static feature_extractor_class=s.AutoFeatureExtractor;static tokenizer_class=o.AutoTokenizer;static uses_processor_config=!0;static uses_chat_template_file=!0;constructor(u,c,d){super(u,c,d),this.audio_seq_length=this.config.audio_seq_length,this.image_seq_length=this.config.image_seq_length;const{audio_token_id:h,boa_token:m,audio_token:g,eoa_token:v,image_token_id:y,boi_token:x,image_token:w,eoi_token:S}=this.tokenizer.config;this.audio_token_id=h,this.boa_token=m,this.audio_token=g;const M=g.repeat(this.audio_seq_length);this.full_audio_sequence=`

${m}${M}${v}

`,this.image_token_id=y,this.boi_token=x,this.image_token=w;const T=w.repeat(this.image_seq_length);this.full_image_sequence=`

${x}${T}${S}

`}async _call(u,c=null,d=null,h={}){typeof u=="string"&&(u=[u]);let m;d&&(m=await this.feature_extractor(d,h),u=u.map(y=>y.replaceAll(this.audio_token,this.full_audio_sequence)));let g;return c&&(g=await this.image_processor(c,h),u=u.map(y=>y.replaceAll(this.image_token,this.full_image_sequence))),{...this.tokenizer(u,h),...g,...m}}}}),"./src/models/glpn/image_processing_glpn.js":((e,t,r)=>{r.r(t),r.d(t,{GLPNFeatureExtractor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}}),"./src/models/grounding_dino/image_processing_grounding_dino.js":((e,t,r)=>{r.r(t),r.d(t,{GroundingDinoImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(a){const l=await super._call(a),u=l.pixel_values.dims,c=(0,i.ones)([u[0],u[2],u[3]]);return{...l,pixel_mask:c}}}}),"./src/models/grounding_dino/processing_grounding_dino.js":((e,t,r)=>{r.r(t),r.d(t,{GroundingDinoProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),o=r("./src/base/image_processors_utils.js");function a(u,c){const h=u.dims.at(-1)-1,m=u.tolist();m.fill(!1,0,1),m.fill(!1,h);const g=c.tolist();return m.map((v,y)=>v?y:null).filter(v=>v!==null).map(v=>g[v])}class l extends n.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=i.AutoImageProcessor;async _call(c,d,h={}){const m=c?await this.image_processor(c,h):{};return{...d?this.tokenizer(d,h):{},...m}}post_process_grounded_object_detection(c,d,{box_threshold:h=.25,text_threshold:m=.25,target_sizes:g=null}={}){const{logits:v,pred_boxes:y}=c,x=v.dims[0];if(g!==null&&g.length!==x)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const w=v.dims.at(1),S=v.sigmoid(),M=S.max(-1).tolist(),T=y.tolist().map(E=>E.map(A=>(0,o.center_to_corners_format)(A))),P=[];for(let E=0;E<x;++E){const A=g!==null?g[E]:null;A!==null&&(T[E]=T[E].map(z=>z.map((K,J)=>K*A[(J+1)%2])));const L=M[E],B=[],V=[],G=[];for(let z=0;z<w;++z){const K=L[z];if(K<=h)continue;const J=T[E][z],X=S[E][z];B.push(K),G.push(J);const Q=a(X.gt(m),d[E]);V.push(Q)}P.push({scores:B,boxes:G,labels:this.batch_decode(V)})}return P}}}),"./src/models/idefics3/image_processing_idefics3.js":((e,t,r)=>{r.r(t),r.d(t,{Idefics3ImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{constructor(a){super(a),this.do_image_splitting=a.do_image_splitting??!0,this.max_image_size=a.max_image_size}get_resize_for_vision_encoder(a,l){let[u,c]=a.dims.slice(-2);const d=c/u;return c>=u?(c=Math.ceil(c/l)*l,u=Math.floor(c/d),u=Math.ceil(u/l)*l):(u=Math.ceil(u/l)*l,c=Math.floor(u*d),c=Math.ceil(c/l)*l),{height:u,width:c}}async _call(a,{do_image_splitting:l=null,return_row_col_info:u=!1}={}){let c;if(!Array.isArray(a))c=[[a]];else{if(a.length===0||!a[0])throw new Error("No images provided.");Array.isArray(a[0])?c=a:c=[a]}let d=[],h=[],m=[];const g=[],v=[];for(const E of c){let A=await Promise.all(E.map(V=>this.preprocess(V)));g.push(...A.map(V=>V.original_size)),v.push(...A.map(V=>V.reshaped_input_size)),A.forEach(V=>V.pixel_values.unsqueeze_(0));const{longest_edge:L}=this.max_image_size;let B;if(l??this.do_image_splitting){let V=new Array(A.length),G=new Array(A.length);B=await Promise.all(A.map(async(z,K)=>{const J=this.get_resize_for_vision_encoder(z.pixel_values,L),X=await(0,i.interpolate_4d)(z.pixel_values,{size:[J.height,J.width]}),{frames:Q,num_splits_h:W,num_splits_w:oe}=await this.split_image(X,this.max_image_size);return V[K]=W,G[K]=oe,(0,i.cat)(Q,0)})),h.push(V),m.push(G)}else{const V=[L,L];B=await Promise.all(A.map(G=>(0,i.interpolate_4d)(G.pixel_values,{size:V}))),h.push(new Array(A.length).fill(0)),m.push(new Array(A.length).fill(0))}d.push((0,i.cat)(B,0))}const y=d.length,[x,w,S,M]=d[0].dims;let T,P;if(y===1)T=d[0].unsqueeze_(0),P=(0,i.full)([y,x,S,M],!0);else{const E=Math.max(...d.map(B=>B.dims.at(0)));P=(0,i.full)([y,E,S,M],!0);const A=P.data,L=E*S*M;for(let B=0;B<y;++B){const V=d[B].dims[0];if(V<E){d[B]=(0,i.cat)([d[B],(0,i.full)([E-V,w,S,M],0)],0);const G=B*L+V*S*M,z=(B+1)*L;A.fill(!1,G,z)}}T=(0,i.stack)(d,0)}return{pixel_values:T,pixel_attention_mask:P,original_sizes:g,reshaped_input_sizes:v,...u?{rows:h,cols:m}:{}}}async split_image(a,{longest_edge:l}){const u=l,c=l,d=[],[h,m]=a.dims.slice(-2);let g=0,v=0;if(h>u||m>c){g=Math.ceil(h/u),v=Math.ceil(m/c);const y=Math.ceil(h/g),x=Math.ceil(m/v);for(let M=0;M<g;++M)for(let T=0;T<v;++T){let P,E,A,L;M===g-1?(E=h-y,L=h):(E=M*y,L=(M+1)*y),T===v-1?(P=m-x,A=m):(P=T*x,A=(T+1)*x);const B=[E,P],V=[L,A],G=await(0,i.slice)(a,B,V,[2,3]);d.push(G)}const w=u,S=c;(h!==w||m!==S)&&(a=await(0,i.interpolate_4d)(a,{size:[w,S]}))}return d.push(a),{frames:d,num_splits_h:g,num_splits_w:v}}}}),"./src/models/idefics3/processing_idefics3.js":((e,t,r)=>{r.r(t),r.d(t,{Idefics3Processor:()=>c});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");r("./src/utils/image.js");var o=r("./src/utils/core.js");function a(d,h,m,g,v,y){let x="";for(let w=0;w<h;++w){for(let S=0;S<m;++S)x+=g+`<row_${w+1}_col_${S+1}>`+v.repeat(d);x+=`
`}return x+=`
${g}${y}`+v.repeat(d)+`${g}`,x}function l(d,h,m,g){return`${h}${g}`+m.repeat(d)+`${h}`}function u(d,h,m,g,v,y){return d===0&&h===0?l(m,g,v,y):a(m,d,h,g,v,y)}class c extends n.Processor{static image_processor_class=i.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;static uses_processor_config=!0;fake_image_token="<fake_token_around_image>";image_token="<image>";global_img_token="<global-img>";async _call(h,m=null,g={}){g.return_row_col_info??=!0;let v;m&&(v=await this.image_processor(m,g)),Array.isArray(h)||(h=[h]);const y=v.rows??[new Array(h.length).fill(0)],x=v.cols??[new Array(h.length).fill(0)],w=this.config.image_seq_len,S=[],M=[];for(let P=0;P<h.length;++P){const E=h[P],A=y[P],L=x[P];S.push((0,o.count)(E,this.image_token));const B=A.map((z,K)=>u(z,L[K],w,this.fake_image_token,this.image_token,this.global_img_token)),V=E.split(this.image_token);if(V.length===0)throw new Error("The image token should be present in the text.");let G=V[0];for(let z=0;z<B.length;++z)G+=B[z]+V[z+1];M.push(G)}return{...this.tokenizer(M),...v}}}}),"./src/models/image_processors.js":((e,t,r)=>{r.r(t),r.d(t,{BeitFeatureExtractor:()=>n.BeitFeatureExtractor,BitImageProcessor:()=>i.BitImageProcessor,CLIPFeatureExtractor:()=>o.CLIPFeatureExtractor,CLIPImageProcessor:()=>o.CLIPImageProcessor,ChineseCLIPFeatureExtractor:()=>s.ChineseCLIPFeatureExtractor,ConvNextFeatureExtractor:()=>a.ConvNextFeatureExtractor,ConvNextImageProcessor:()=>a.ConvNextImageProcessor,DPTFeatureExtractor:()=>d.DPTFeatureExtractor,DPTImageProcessor:()=>d.DPTImageProcessor,DeiTFeatureExtractor:()=>l.DeiTFeatureExtractor,DeiTImageProcessor:()=>l.DeiTImageProcessor,DetrFeatureExtractor:()=>u.DetrFeatureExtractor,DetrImageProcessor:()=>u.DetrImageProcessor,DonutFeatureExtractor:()=>c.DonutFeatureExtractor,DonutImageProcessor:()=>c.DonutImageProcessor,EfficientNetImageProcessor:()=>h.EfficientNetImageProcessor,GLPNFeatureExtractor:()=>m.GLPNFeatureExtractor,GroundingDinoImageProcessor:()=>g.GroundingDinoImageProcessor,Idefics3ImageProcessor:()=>v.Idefics3ImageProcessor,JinaCLIPImageProcessor:()=>x.JinaCLIPImageProcessor,LlavaOnevisionImageProcessor:()=>w.LlavaOnevisionImageProcessor,Mask2FormerImageProcessor:()=>S.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>M.MaskFormerFeatureExtractor,MaskFormerImageProcessor:()=>M.MaskFormerImageProcessor,MobileNetV1FeatureExtractor:()=>T.MobileNetV1FeatureExtractor,MobileNetV1ImageProcessor:()=>T.MobileNetV1ImageProcessor,MobileNetV2FeatureExtractor:()=>P.MobileNetV2FeatureExtractor,MobileNetV2ImageProcessor:()=>P.MobileNetV2ImageProcessor,MobileNetV3FeatureExtractor:()=>E.MobileNetV3FeatureExtractor,MobileNetV3ImageProcessor:()=>E.MobileNetV3ImageProcessor,MobileNetV4FeatureExtractor:()=>A.MobileNetV4FeatureExtractor,MobileNetV4ImageProcessor:()=>A.MobileNetV4ImageProcessor,MobileViTFeatureExtractor:()=>L.MobileViTFeatureExtractor,MobileViTImageProcessor:()=>L.MobileViTImageProcessor,NougatImageProcessor:()=>B.NougatImageProcessor,OwlViTFeatureExtractor:()=>G.OwlViTFeatureExtractor,OwlViTImageProcessor:()=>G.OwlViTImageProcessor,Owlv2ImageProcessor:()=>V.Owlv2ImageProcessor,Phi3VImageProcessor:()=>z.Phi3VImageProcessor,PvtImageProcessor:()=>K.PvtImageProcessor,Qwen2VLImageProcessor:()=>J.Qwen2VLImageProcessor,RTDetrImageProcessor:()=>X.RTDetrImageProcessor,SamImageProcessor:()=>Q.SamImageProcessor,SegformerFeatureExtractor:()=>W.SegformerFeatureExtractor,SegformerImageProcessor:()=>W.SegformerImageProcessor,SiglipImageProcessor:()=>oe.SiglipImageProcessor,SmolVLMImageProcessor:()=>ce.SmolVLMImageProcessor,Swin2SRImageProcessor:()=>D.Swin2SRImageProcessor,VLMImageProcessor:()=>y.VLMImageProcessor,ViTFeatureExtractor:()=>U.ViTFeatureExtractor,ViTImageProcessor:()=>U.ViTImageProcessor,VitMatteImageProcessor:()=>te.VitMatteImageProcessor,VitPoseImageProcessor:()=>ee.VitPoseImageProcessor,YolosFeatureExtractor:()=>pe.YolosFeatureExtractor,YolosImageProcessor:()=>pe.YolosImageProcessor});var n=r("./src/models/beit/image_processing_beit.js"),i=r("./src/models/bit/image_processing_bit.js"),s=r("./src/models/chinese_clip/image_processing_chinese_clip.js"),o=r("./src/models/clip/image_processing_clip.js"),a=r("./src/models/convnext/image_processing_convnext.js"),l=r("./src/models/deit/image_processing_deit.js"),u=r("./src/models/detr/image_processing_detr.js"),c=r("./src/models/donut/image_processing_donut.js"),d=r("./src/models/dpt/image_processing_dpt.js"),h=r("./src/models/efficientnet/image_processing_efficientnet.js"),m=r("./src/models/glpn/image_processing_glpn.js"),g=r("./src/models/grounding_dino/image_processing_grounding_dino.js"),v=r("./src/models/idefics3/image_processing_idefics3.js"),y=r("./src/models/janus/image_processing_janus.js"),x=r("./src/models/jina_clip/image_processing_jina_clip.js"),w=r("./src/models/llava_onevision/image_processing_llava_onevision.js"),S=r("./src/models/mask2former/image_processing_mask2former.js"),M=r("./src/models/maskformer/image_processing_maskformer.js"),T=r("./src/models/mobilenet_v1/image_processing_mobilenet_v1.js"),P=r("./src/models/mobilenet_v2/image_processing_mobilenet_v2.js"),E=r("./src/models/mobilenet_v3/image_processing_mobilenet_v3.js"),A=r("./src/models/mobilenet_v4/image_processing_mobilenet_v4.js"),L=r("./src/models/mobilevit/image_processing_mobilevit.js"),B=r("./src/models/nougat/image_processing_nougat.js"),V=r("./src/models/owlv2/image_processing_owlv2.js"),G=r("./src/models/owlvit/image_processing_owlvit.js"),z=r("./src/models/phi3_v/image_processing_phi3_v.js"),K=r("./src/models/pvt/image_processing_pvt.js"),J=r("./src/models/qwen2_vl/image_processing_qwen2_vl.js"),X=r("./src/models/rt_detr/image_processing_rt_detr.js"),Q=r("./src/models/sam/image_processing_sam.js"),W=r("./src/models/segformer/image_processing_segformer.js"),oe=r("./src/models/siglip/image_processing_siglip.js"),ce=r("./src/models/smolvlm/image_processing_smolvlm.js"),D=r("./src/models/swin2sr/image_processing_swin2sr.js"),U=r("./src/models/vit/image_processing_vit.js"),te=r("./src/models/vitmatte/image_processing_vitmatte.js"),ee=r("./src/models/vitpose/image_processing_vitpose.js"),pe=r("./src/models/yolos/image_processing_yolos.js")}),"./src/models/janus/image_processing_janus.js":((e,t,r)=>{r.r(t),r.d(t,{VLMImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(o){super({do_pad:!0,pad_size:{width:o.image_size,height:o.image_size},...o}),this.constant_values=this.config.background_color.map(a=>a*this.rescale_factor)}pad_image(o,a,l,u){return super.pad_image(o,a,l,{constant_values:this.constant_values,center:!0,...u})}}}),"./src/models/janus/processing_janus.js":((e,t,r)=>{r.r(t),r.d(t,{VLChatProcessor:()=>u});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),o=r("./src/utils/core.js"),a=r("./src/utils/tensor.js"),l=r("./src/utils/image.js");class u extends n.Processor{static image_processor_class=i.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;static uses_processor_config=!0;constructor(d,h,m){super(d,h,m),this.image_tag=this.config.image_tag,this.image_start_tag=this.config.image_start_tag,this.image_end_tag=this.config.image_end_tag,this.num_image_tokens=this.config.num_image_tokens}async _call(d,{images:h=null,chat_template:m="default"}={}){h?Array.isArray(h)||(h=[h]):h=await Promise.all(d.filter(B=>B.images).flatMap(B=>B.images).map(B=>l.RawImage.read(B)));const g=this.tokenizer,v=g.apply_chat_template(d,{tokenize:!1,add_generation_prompt:!0,chat_template:m}),y=B=>g.encode(B,{add_special_tokens:!1}),x=v.split(this.image_tag),w=x.length-1;if(h.length!==w)throw new Error(`Number of images provided (${h.length}) does not match number of "${this.image_tag}" image tags (${w})`);const[S,M,T]=g.model.convert_tokens_to_ids([this.image_tag,this.image_start_tag,this.image_end_tag]);let P=y(x[0]),E=new Array(P.length).fill(!1);for(let B=1;B<x.length;++B){const V=new Array(this.num_image_tokens).fill(S),G=y(x[B]);P=(0,o.mergeArrays)(P,[M],V,[T],G);const z=new Array(this.num_image_tokens).fill(!0);E=(0,o.mergeArrays)(E,[!1],z,[!1],new Array(G.length).fill(!1))}const A=[1,P.length],L={input_ids:new a.Tensor("int64",P,A),attention_mask:new a.Tensor("int64",new Array(P.length).fill(1),A),images_seq_mask:new a.Tensor("bool",E,A),images_emb_mask:new a.Tensor("bool",new Array(w*this.num_image_tokens).fill(!0),[1,w,this.num_image_tokens])};if(h&&h.length>0){const B=await this.image_processor(h);return B.pixel_values.unsqueeze_(0),{...L,...B}}return L}}}),"./src/models/jina_clip/image_processing_jina_clip.js":((e,t,r)=>{r.r(t),r.d(t,{JinaCLIPImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(o){const{resize_mode:a,fill_color:l,interpolation:u,size:c,...d}=o,h=a==="squash"?{width:c,height:c}:a==="shortest"?{shortest_edge:c}:{longest_edge:c},m=u==="bicubic"?3:2;super({...d,size:h,resample:m,do_center_crop:!0,crop_size:c,do_normalize:!0})}}}),"./src/models/jina_clip/processing_jina_clip.js":((e,t,r)=>{r.r(t),r.d(t,{JinaCLIPProcessor:()=>o});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class o extends n.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=i.AutoImageProcessor;async _call(l=null,u=null,c={}){if(!l&&!u)throw new Error("Either text or images must be provided");const d=l?this.tokenizer(l,c):{},h=u?await this.image_processor(u,c):{};return{...d,...h}}}}),"./src/models/llava/processing_llava.js":((e,t,r)=>{r.r(t),r.d(t,{LlavaProcessor:()=>o});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class o extends n.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=i.AutoImageProcessor;static uses_processor_config=!0;async _call(l,u=null,c={}){const d=await this.image_processor(l,c);if(u){const[m,g]=d.pixel_values.dims.slice(-2),{image_token:v,patch_size:y,num_additional_image_tokens:x}=this.config,w=Math.floor(m/y)*Math.floor(g/y)+x;u=structuredClone(u),Array.isArray(u)||(u=[u]);for(let S=0;S<u.length;++S)u[S]=u[S].replace(v,v.repeat(w))}const h=u?this.tokenizer(u,c):{};return{...d,...h}}}}),"./src/models/llava_onevision/image_processing_llava_onevision.js":((e,t,r)=>{r.r(t),r.d(t,{LlavaOnevisionImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}}),"./src/models/mask2former/image_processing_mask2former.js":((e,t,r)=>{r.r(t),r.d(t,{Mask2FormerImageProcessor:()=>i});var n=r("./src/models/maskformer/image_processing_maskformer.js");class i extends n.MaskFormerImageProcessor{}}),"./src/models/maskformer/image_processing_maskformer.js":((e,t,r)=>{r.r(t),r.d(t,{MaskFormerFeatureExtractor:()=>s,MaskFormerImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_panoptic_segmentation(...a){return(0,n.post_process_panoptic_segmentation)(...a)}post_process_instance_segmentation(...a){return(0,n.post_process_instance_segmentation)(...a)}}class s extends i{}}),"./src/models/mgp_str/processing_mgp_str.js":((e,t,r)=>{r.r(t),r.d(t,{MgpstrProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),o=r("./src/utils/maths.js");const a={char:["char_decode",1],bpe:["bpe_decode",2],wp:["wp_decode",102]};class l extends n.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=i.AutoImageProcessor;get char_tokenizer(){return this.components.char_tokenizer}get bpe_tokenizer(){return this.components.bpe_tokenizer}get wp_tokenizer(){return this.components.wp_tokenizer}_decode_helper(c,d){if(!a.hasOwnProperty(d))throw new Error(`Format ${d} is not supported.`);const[h,m]=a[d],g=this[h].bind(this),[v,y]=c.dims,x=[],w=[],S=c.tolist();for(let T=0;T<v;++T){const P=S[T],E=[],A=[];for(let B=1;B<y;++B){const[V,G]=(0,o.max)((0,o.softmax)(P[B]));if(A.push(V),G==m)break;E.push(G)}const L=A.length>0?A.reduce((B,V)=>B*V,1):0;w.push(E),x.push(L)}return[g(w),x]}char_decode(c){return this.char_tokenizer.batch_decode(c).map(d=>d.replaceAll(" ",""))}bpe_decode(c){return this.bpe_tokenizer.batch_decode(c)}wp_decode(c){return this.wp_tokenizer.batch_decode(c).map(d=>d.replaceAll(" ",""))}batch_decode([c,d,h]){const[m,g]=this._decode_helper(c,"char"),[v,y]=this._decode_helper(d,"bpe"),[x,w]=this._decode_helper(h,"wp"),S=[],M=[];for(let T=0;T<m.length;++T){const[P,E]=(0,o.max)([g[T],y[T],w[T]]);S.push([m[T],v[T],x[T]][E]),M.push(P)}return{generated_text:S,scores:M,char_preds:m,bpe_preds:v,wp_preds:x}}static async from_pretrained(...c){const d=await super.from_pretrained(...c),h=await s.AutoTokenizer.from_pretrained("Xenova/gpt2"),m=await s.AutoTokenizer.from_pretrained("Xenova/bert-base-uncased");return d.components={image_processor:d.image_processor,char_tokenizer:d.tokenizer,bpe_tokenizer:h,wp_tokenizer:m},d}async _call(c,d=null){const h=await this.image_processor(c);return d&&(h.labels=this.tokenizer(d).input_ids),h}}}),"./src/models/mobilenet_v1/image_processing_mobilenet_v1.js":((e,t,r)=>{r.r(t),r.d(t,{MobileNetV1FeatureExtractor:()=>s,MobileNetV1ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}}),"./src/models/mobilenet_v2/image_processing_mobilenet_v2.js":((e,t,r)=>{r.r(t),r.d(t,{MobileNetV2FeatureExtractor:()=>s,MobileNetV2ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}}),"./src/models/mobilenet_v3/image_processing_mobilenet_v3.js":((e,t,r)=>{r.r(t),r.d(t,{MobileNetV3FeatureExtractor:()=>s,MobileNetV3ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}}),"./src/models/mobilenet_v4/image_processing_mobilenet_v4.js":((e,t,r)=>{r.r(t),r.d(t,{MobileNetV4FeatureExtractor:()=>s,MobileNetV4ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}}),"./src/models/mobilevit/image_processing_mobilevit.js":((e,t,r)=>{r.r(t),r.d(t,{MobileViTFeatureExtractor:()=>s,MobileViTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}}),"./src/models/moonshine/feature_extraction_moonshine.js":((e,t,r)=>{r.r(t),r.d(t,{MoonshineFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js");class s extends n.FeatureExtractor{async _call(a){(0,n.validate_audio_inputs)(a,"MoonshineFeatureExtractor"),a instanceof Float64Array&&(a=new Float32Array(a));const l=[1,a.length];return{input_values:new i.Tensor("float32",a,l)}}}}),"./src/models/moonshine/processing_moonshine.js":((e,t,r)=>{r.r(t),r.d(t,{MoonshineProcessor:()=>o});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class o extends s.Processor{static tokenizer_class=i.AutoTokenizer;static feature_extractor_class=n.AutoFeatureExtractor;async _call(l){return await this.feature_extractor(l)}}}),"./src/models/nougat/image_processing_nougat.js":((e,t,r)=>{r.r(t),r.d(t,{NougatImageProcessor:()=>i});var n=r("./src/models/donut/image_processing_donut.js");class i extends n.DonutImageProcessor{}}),"./src/models/owlv2/image_processing_owlv2.js":((e,t,r)=>{r.r(t),r.d(t,{Owlv2ImageProcessor:()=>i});var n=r("./src/models/owlvit/image_processing_owlvit.js");class i extends n.OwlViTImageProcessor{}}),"./src/models/owlvit/image_processing_owlvit.js":((e,t,r)=>{r.r(t),r.d(t,{OwlViTFeatureExtractor:()=>s,OwlViTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_object_detection(...a){return(0,n.post_process_object_detection)(...a)}}class s extends i{}}),"./src/models/owlvit/processing_owlvit.js":((e,t,r)=>{r.r(t),r.d(t,{OwlViTProcessor:()=>o});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class o extends n.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=i.AutoImageProcessor}}),"./src/models/paligemma/processing_paligemma.js":((e,t,r)=>{r.r(t),r.d(t,{PaliGemmaProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");const o="<image>";function a(u,c,d,h,m){return`${h.repeat(d*m)}${c}${u}
`}class l extends n.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=i.AutoImageProcessor;static uses_processor_config=!1;async _call(c,d=null,h={}){d||(console.warn("You are using PaliGemma without a text prefix. It will perform as a picture-captioning model."),d=""),Array.isArray(c)||(c=[c]),Array.isArray(d)||(d=[d]);const m=this.tokenizer.bos_token,g=this.image_processor.config.image_seq_length;let v;d.some(w=>w.includes(o))?v=d.map(w=>{const S=w.replaceAll(o,o.repeat(g)),M=S.lastIndexOf(o),T=M===-1?0:M+o.length;return S.slice(0,T)+m+S.slice(T)+`
`}):(console.warn("You are passing both `text` and `images` to `PaliGemmaProcessor`. The processor expects special image tokens in the text, as many tokens as there are images per each text. It is recommended to add `<image>` tokens in the very beginning of your text. For this call, we will infer how many images each text has and add special tokens."),v=d.map(w=>a(w,m,g,o,c.length)));const y=this.tokenizer(v,h);return{...await this.image_processor(c,h),...y}}}}),"./src/models/phi3_v/image_processing_phi3_v.js":((e,t,r)=>{r.r(t),r.d(t,{Phi3VImageProcessor:()=>c});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");const s=336,o=[2,3],{ceil:a,floor:l,sqrt:u}=Math;class c extends n.ImageProcessor{constructor(h){super({...h,do_normalize:!0,do_pad:!0,pad_size:"custom",do_convert_rgb:!0,do_resize:!0}),this._num_crops=h.num_crops}calc_num_image_tokens_from_image_size(h,m){const{num_img_tokens:g}=this.config;return l((l(m/s)*l(h/s)+1)*g+1+(l(m/s)+1)*u(g))}get_resize_output_image_size(h,m){const g=this._num_crops,[v,y]=h.size;let x=v/y,w=1;for(;w*Math.ceil(w/x)<=g;)w+=1;w-=1;const S=Math.floor(w*336),M=Math.floor(S/x);return[S,M]}pad_image(h,m,g,v={}){const[y,x]=m,w=s*a(y/s),S=s*a(x/s),M=[1,1,1].map((T,P)=>(T-this.image_mean[P])/this.image_std[P]);return super.pad_image(h,m,{width:S,height:w},{center:!0,constant_values:M,...v})}async _call(h,{num_crops:m=null}={}){if(this._num_crops=m??=this.config.num_crops,m<4||u(m)%1!==0)throw new Error("num_crops must be a square number >= 4");Array.isArray(h)||(h=[h]);const g=h.length,v=await Promise.all(h.map(E=>this.preprocess(E))),y=v.map(E=>E.original_size),x=v.map(E=>E.reshaped_input_size),w=[];for(const{pixel_values:E}of v){E.unsqueeze_(0);const[A,L]=E.dims.slice(-2),B=await(0,i.interpolate_4d)(E,{size:[s,s],mode:"bicubic"});if(m>0){const V=[],G=u(m),z=l(L/G),K=l(A/G);for(let X=0;X<G;++X)for(let Q=0;Q<G;++Q){let W,oe,ce,D;X===G-1?(oe=A-K,D=A):(oe=X*K,D=(X+1)*K),Q===G-1?(W=L-z,ce=L):(W=Q*z,ce=(Q+1)*z);const U=[oe,W],te=[D,ce],ee=await(0,i.slice)(E,U,te,o);V.push(ee)}const J=await(0,i.interpolate_4d)((0,i.cat)(V,0),{size:[s,s],mode:"bicubic"});w.push((0,i.cat)([B,J],0))}else w.push(B)}const S=(0,i.stack)(w,0),M=x.map(E=>E.map(A=>s*a(A/s))),T=new i.Tensor("int64",M.flat(),[g,2]),P=M.map(([E,A])=>this.calc_num_image_tokens_from_image_size(A,E));return{pixel_values:S,original_sizes:y,reshaped_input_sizes:x,image_sizes:T,num_img_tokens:P}}}}),"./src/models/phi3_v/processing_phi3_v.js":((e,t,r)=>{r.r(t),r.d(t,{Phi3VProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");r("./src/utils/image.js");const o="<|image|>",a=/<\|image_\d+\|>/g;class l extends n.Processor{static image_processor_class=i.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;async _call(c,d=null,{padding:h=!0,truncation:m=!0,num_crops:g=null}={}){Array.isArray(c)||(c=[c]);let v,y;if(d){y=await this.image_processor(d,{num_crops:g});const{num_img_tokens:x}=y,w=c.map((M,T)=>M.split(a).join(o.repeat(x[T])));v=this.tokenizer(w,{padding:h,truncation:m});const S=this.tokenizer.model.convert_tokens_to_ids([o])[0];v.input_ids.map_(M=>M==S?-M:M)}else v=this.tokenizer(c);return{...v,...y}}}}),"./src/models/processors.js":((e,t,r)=>{r.r(t),r.d(t,{Florence2Processor:()=>n.Florence2Processor,Gemma3nProcessor:()=>i.Gemma3nProcessor,GroundingDinoProcessor:()=>s.GroundingDinoProcessor,Idefics3Processor:()=>o.Idefics3Processor,JinaCLIPProcessor:()=>l.JinaCLIPProcessor,LlavaProcessor:()=>u.LlavaProcessor,MgpstrProcessor:()=>c.MgpstrProcessor,MoonshineProcessor:()=>d.MoonshineProcessor,OwlViTProcessor:()=>h.OwlViTProcessor,PaliGemmaProcessor:()=>g.PaliGemmaProcessor,Phi3VProcessor:()=>m.Phi3VProcessor,PyAnnoteProcessor:()=>v.PyAnnoteProcessor,Qwen2VLProcessor:()=>y.Qwen2VLProcessor,SamProcessor:()=>x.SamProcessor,SmolVLMProcessor:()=>w.SmolVLMProcessor,SpeechT5Processor:()=>S.SpeechT5Processor,UltravoxProcessor:()=>M.UltravoxProcessor,VLChatProcessor:()=>a.VLChatProcessor,Wav2Vec2Processor:()=>T.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>P.Wav2Vec2ProcessorWithLM,WhisperProcessor:()=>E.WhisperProcessor});var n=r("./src/models/florence2/processing_florence2.js"),i=r("./src/models/gemma3n/processing_gemma3n.js"),s=r("./src/models/grounding_dino/processing_grounding_dino.js"),o=r("./src/models/idefics3/processing_idefics3.js"),a=r("./src/models/janus/processing_janus.js"),l=r("./src/models/jina_clip/processing_jina_clip.js"),u=r("./src/models/llava/processing_llava.js"),c=r("./src/models/mgp_str/processing_mgp_str.js"),d=r("./src/models/moonshine/processing_moonshine.js"),h=r("./src/models/owlvit/processing_owlvit.js"),m=r("./src/models/phi3_v/processing_phi3_v.js"),g=r("./src/models/paligemma/processing_paligemma.js"),v=r("./src/models/pyannote/processing_pyannote.js"),y=r("./src/models/qwen2_vl/processing_qwen2_vl.js"),x=r("./src/models/sam/processing_sam.js"),w=r("./src/models/smolvlm/processing_smolvlm.js"),S=r("./src/models/speecht5/processing_speecht5.js"),M=r("./src/models/ultravox/processing_ultravox.js"),T=r("./src/models/wav2vec2/processing_wav2vec2.js"),P=r("./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js"),E=r("./src/models/whisper/processing_whisper.js")}),"./src/models/pvt/image_processing_pvt.js":((e,t,r)=>{r.r(t),r.d(t,{PvtImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}}),"./src/models/pyannote/feature_extraction_pyannote.js":((e,t,r)=>{r.r(t),r.d(t,{PyAnnoteFeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js");class o extends n.FeatureExtractor{async _call(l){(0,n.validate_audio_inputs)(l,"PyAnnoteFeatureExtractor"),l instanceof Float64Array&&(l=new Float32Array(l));const u=[1,1,l.length];return{input_values:new i.Tensor("float32",l,u)}}samples_to_frames(l){return(l-this.config.offset)/this.config.step}post_process_speaker_diarization(l,u){const c=u/this.samples_to_frames(u)/this.config.sampling_rate,d=[];for(const h of l.tolist()){const m=[];let g=-1;for(let v=0;v<h.length;++v){const y=(0,s.softmax)(h[v]),[x,w]=(0,s.max)(y),[S,M]=[v,v+1];w!==g?(g=w,m.push({id:w,start:S,end:M,score:x})):(m.at(-1).end=M,m.at(-1).score+=x)}d.push(m.map(({id:v,start:y,end:x,score:w})=>({id:v,start:y*c,end:x*c,confidence:w/(x-y)})))}return d}}}),"./src/models/pyannote/processing_pyannote.js":((e,t,r)=>{r.r(t),r.d(t,{PyAnnoteProcessor:()=>s});var n=r("./src/base/processing_utils.js"),i=r("./src/models/pyannote/feature_extraction_pyannote.js");class s extends n.Processor{static feature_extractor_class=i.PyAnnoteFeatureExtractor;async _call(a){return await this.feature_extractor(a)}post_process_speaker_diarization(...a){return this.feature_extractor.post_process_speaker_diarization(...a)}get sampling_rate(){return this.feature_extractor.config.sampling_rate}}}),"./src/models/qwen2_vl/image_processing_qwen2_vl.js":((e,t,r)=>{r.r(t),r.d(t,{Qwen2VLImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(a,...l){const{pixel_values:u,original_sizes:c,reshaped_input_sizes:d}=await super._call(a,...l);let h=u;const{temporal_patch_size:m,merge_size:g,patch_size:v}=this.config;h.dims[0]===1&&(h=(0,i.cat)(Array.from({length:m},()=>h),0));const y=h.dims[0]/m,x=h.dims[1],w=Math.floor(h.dims[2]/v),S=Math.floor(h.dims[3]/v),M=h.view(y,m,x,Math.floor(w/g),g,v,Math.floor(S/g),g,v).permute(0,3,6,4,7,2,1,5,8).view(y*w*S,x*m*v*v),T=new i.Tensor("int64",[y,w,S],[1,3]);return{pixel_values:M,image_grid_thw:T,original_sizes:c,reshaped_input_sizes:d}}}}),"./src/models/qwen2_vl/processing_qwen2_vl.js":((e,t,r)=>{r.r(t),r.d(t,{Qwen2VLProcessor:()=>o});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");r("./src/utils/image.js");class o extends n.Processor{static image_processor_class=i.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;async _call(l,u=null,...c){Array.isArray(l)||(l=[l]);let d,h;if(u&&(d=await this.image_processor(u),h=d.image_grid_thw),h){let g=this.image_processor.config.merge_size**2,v=0;const y=h.tolist();l=l.map(x=>{for(;x.includes("<|image_pad|>");){const w=Number(y[v++].reduce((S,M)=>S*M,1n));x=x.replace("<|image_pad|>","<|placeholder|>".repeat(Math.floor(w/g)))}return x.replaceAll("<|placeholder|>","<|image_pad|>")})}return{...this.tokenizer(l),...d}}}}),"./src/models/rt_detr/image_processing_rt_detr.js":((e,t,r)=>{r.r(t),r.d(t,{RTDetrImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_object_detection(...o){return(0,n.post_process_object_detection)(...o)}}}),"./src/models/sam/image_processing_sam.js":((e,t,r)=>{r.r(t),r.d(t,{SamImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/core.js"),s=r("./src/utils/tensor.js");class o extends n.ImageProcessor{reshape_input_points(l,u,c,d=!1){l=structuredClone(l);let h=(0,i.calculateDimensions)(l);if(h.length===3)d||(h=[1,...h]),l=[l];else if(h.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let m=0;m<l.length;++m){let g=u[m],v=c[m],y=[v[0]/g[0],v[1]/g[1]];for(let x=0;x<l[m].length;++x)for(let w=0;w<l[m][x].length;++w)for(let S=0;S<l[m][x][w].length;++S)l[m][x][w][S]*=y[S%2]}return new s.Tensor("float32",Float32Array.from(l.flat(1/0)),h)}add_input_labels(l,u){let c=(0,i.calculateDimensions)(l);if(c.length===2)c=[1,...c],l=[l];else if(c.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(c.some((d,h)=>d!==u.dims[h]))throw Error(`The first ${c.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new s.Tensor("int64",l.flat(1/0).map(BigInt),c)}async _call(l,{input_points:u=null,input_labels:c=null,input_boxes:d=null}={}){const h=await super._call(l);if(u&&(h.input_points=this.reshape_input_points(u,h.original_sizes,h.reshaped_input_sizes)),c){if(!h.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");h.input_labels=this.add_input_labels(c,h.input_points)}return d&&(h.input_boxes=this.reshape_input_points(d,h.original_sizes,h.reshaped_input_sizes,!0)),h}async post_process_masks(l,u,c,{mask_threshold:d=0,binarize:h=!0,pad_size:m=null}={}){const g=[];m=m??this.pad_size;const v=[m.height,m.width];for(let y=0;y<u.length;++y){const x=u[y],w=c[y];let S=await(0,s.interpolate_4d)(l[y],{mode:"bilinear",size:v});if(S=S.slice(null,null,[0,w[0]],[0,w[1]]),S=await(0,s.interpolate_4d)(S,{mode:"bilinear",size:x}),h){const M=S.data,T=new Uint8Array(M.length);for(let P=0;P<M.length;++P)M[P]>d&&(T[P]=1);S=new s.Tensor("bool",T,S.dims)}g.push(S)}return g}generate_crop_boxes(l,u,{crop_n_layers:c=0,overlap_ratio:d=512/1500,points_per_crop:h=32,crop_n_points_downscale_factor:m=1}={}){}}}),"./src/models/sam/processing_sam.js":((e,t,r)=>{r.r(t),r.d(t,{SamProcessor:()=>s});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js");class s extends n.Processor{static image_processor_class=i.AutoImageProcessor;async _call(...a){return await this.image_processor(...a)}post_process_masks(...a){return this.image_processor.post_process_masks(...a)}reshape_input_points(...a){return this.image_processor.reshape_input_points(...a)}}}),"./src/models/seamless_m4t/feature_extraction_seamless_m4t.js":((e,t,r)=>{r.r(t),r.d(t,{SeamlessM4TFeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js"),s=r("./src/utils/audio.js");class o extends n.FeatureExtractor{constructor(l){super(l);const u=this.config.sampling_rate,c=(0,s.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(u/2),u,null,"kaldi",!0);this.mel_filters=c,this.window=(0,s.window_function)(400,"povey",{periodic:!1})}async _extract_fbank_features(l,u){return l=l.map(c=>c*32768),(0,s.spectrogram)(l,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:u,transpose:!0})}async _call(l,{padding:u=!0,pad_to_multiple_of:c=2,do_normalize_per_mel_bins:d=!0,return_attention_mask:h=!0}={}){(0,n.validate_audio_inputs)(l,"SeamlessM4TFeatureExtractor");let m=await this._extract_fbank_features(l,this.config.max_length);if(d){const[T,P]=m.dims,E=m.data;for(let A=0;A<P;++A){let L=0;for(let z=0;z<T;++z)L+=E[z*P+A];const B=L/T;let V=0;for(let z=0;z<T;++z)V+=(E[z*P+A]-B)**2;V/=T-1;const G=Math.sqrt(V+1e-7);for(let z=0;z<T;++z){const K=z*P+A;E[K]=(E[K]-B)/G}}}let g;if(u){const[T,P]=m.dims,E=m.data,A=T%c;if(A>0){const L=new Float32Array(P*(T+A));L.set(E),L.fill(this.config.padding_value,E.length);const B=T+A;m=new i.Tensor(m.type,L,[B,P]),h&&(g=new i.Tensor("int64",new BigInt64Array(B),[1,B]),g.data.fill(1n,0,T))}}const[v,y]=m.dims,x=this.config.stride;if(v%x!==0)throw new Error(`The number of frames (${v}) must be a multiple of the stride (${x}).`);const S=m.view(1,Math.floor(v/x),y*x),M={input_features:S};if(h){const T=S.dims[1],P=new BigInt64Array(T);if(g){const E=g.data;for(let A=1,L=0;A<v;A+=x,++L)P[L]=E[A]}else P.fill(1n);M.attention_mask=new i.Tensor("int64",P,[1,T])}return M}}}),"./src/models/segformer/image_processing_segformer.js":((e,t,r)=>{r.r(t),r.d(t,{SegformerFeatureExtractor:()=>s,SegformerImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_semantic_segmentation(...a){return(0,n.post_process_semantic_segmentation)(...a)}}class s extends i{}}),"./src/models/siglip/image_processing_siglip.js":((e,t,r)=>{r.r(t),r.d(t,{SiglipImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}}),"./src/models/smolvlm/image_processing_smolvlm.js":((e,t,r)=>{r.r(t),r.d(t,{SmolVLMImageProcessor:()=>n.Idefics3ImageProcessor});var n=r("./src/models/idefics3/image_processing_idefics3.js")}),"./src/models/smolvlm/processing_smolvlm.js":((e,t,r)=>{r.r(t),r.d(t,{SmolVLMProcessor:()=>n.Idefics3Processor});var n=r("./src/models/idefics3/processing_idefics3.js")}),"./src/models/snac/feature_extraction_snac.js":((e,t,r)=>{r.r(t),r.d(t,{SnacFeatureExtractor:()=>i});var n=r("./src/models/dac/feature_extraction_dac.js");class i extends n.DacFeatureExtractor{}}),"./src/models/speecht5/feature_extraction_speecht5.js":((e,t,r)=>{r.r(t),r.d(t,{SpeechT5FeatureExtractor:()=>i});var n=r("./src/base/feature_extraction_utils.js");class i extends n.FeatureExtractor{}}),"./src/models/speecht5/processing_speecht5.js":((e,t,r)=>{r.r(t),r.d(t,{SpeechT5Processor:()=>o});var n=r("./src/base/processing_utils.js"),i=r("./src/tokenizers.js"),s=r("./src/models/auto/feature_extraction_auto.js");class o extends n.Processor{static tokenizer_class=i.AutoTokenizer;static feature_extractor_class=s.AutoFeatureExtractor;async _call(l){return await this.feature_extractor(l)}}}),"./src/models/swin2sr/image_processing_swin2sr.js":((e,t,r)=>{r.r(t),r.d(t,{Swin2SRImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{pad_image(o,a,l,u={}){const[c,d,h]=a;return super.pad_image(o,a,{width:d+(l-d%l)%l,height:c+(l-c%l)%l},{mode:"symmetric",center:!1,constant_values:-1,...u})}}}),"./src/models/ultravox/processing_ultravox.js":((e,t,r)=>{r.r(t),r.d(t,{UltravoxProcessor:()=>o});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class o extends s.Processor{static tokenizer_class=i.AutoTokenizer;static feature_extractor_class=n.AutoFeatureExtractor;static uses_processor_config=!0;async _call(l,u=null,c={}){if(Array.isArray(l))throw new Error("Batched inputs are not supported yet.");let d={};if(u){const m=u.length,{input_features:g}=await this.feature_extractor(u,{...c,max_length:m}),v=Math.round(m/this.config.encoder_ds_factor+1e-4),y=1+Math.ceil(v/this.config.stack_factor);d.audio_token_len=[y],d.audio_values=g;const x=this.config.audio_placeholder;if(!l.includes(x))throw new Error(`The input text does not contain the image token ${x}.`);l=l.replaceAll(x,x.repeat(y))}return{...this.tokenizer(l,{add_special_tokens:!1,...c}),...d}}}}),"./src/models/vit/image_processing_vit.js":((e,t,r)=>{r.r(t),r.d(t,{ViTFeatureExtractor:()=>s,ViTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class s extends i{}}),"./src/models/vitmatte/image_processing_vitmatte.js":((e,t,r)=>{r.r(t),r.d(t,{VitMatteImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(a,l){Array.isArray(a)||(a=[a]),Array.isArray(l)||(l=[l]);const u=await Promise.all(a.map(h=>this.preprocess(h))),c=await Promise.all(l.map(h=>this.preprocess(h,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:(0,i.stack)(u.map((h,m)=>(0,i.cat)([h.pixel_values,c[m].pixel_values],0)),0),original_sizes:u.map(h=>h.original_size),reshaped_input_sizes:u.map(h=>h.reshaped_input_size)}}}}),"./src/models/vitpose/image_processing_vitpose.js":((e,t,r)=>{r.r(t),r.d(t,{VitPoseImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_pose_estimation(o,a,{threshold:l=null}={}){const u=o.tolist(),[c,d,h,m]=o.dims,g=[];for(let v=0;v<c;++v){const y=u[v],x=a[v],w=[];for(let S=0;S<x.length;++S){const M=x[S],T=[],P=[],E=[],A=M.at(-2)/m,L=M.at(-1)/h;for(let B=0;B<y.length;++B){let[V,G]=[0,0],z=0,K=-1/0;const J=y[B];for(let Q=0;Q<J.length;++Q){const W=J[Q];for(let oe=0;oe<W.length;++oe){const ce=W[oe];z+=ce,K=Math.max(K,ce),V+=(oe+.5)*ce,G+=Q*ce}}if(l!=null&&K<l)continue;const X=[A*V/z,L*G/z];T.push(X),E.push(B),P.push(K)}w.push({bbox:M,scores:P,labels:E,keypoints:T})}g.push(w)}return g}}}),"./src/models/wav2vec2/feature_extraction_wav2vec2.js":((e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2FeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js");class s extends n.FeatureExtractor{_zero_mean_unit_var_norm(a){const u=a.reduce((d,h)=>d+h,0)/a.length,c=a.reduce((d,h)=>d+(h-u)**2,0)/a.length;return a.map(d=>(d-u)/Math.sqrt(c+1e-7))}async _call(a){(0,n.validate_audio_inputs)(a,"Wav2Vec2FeatureExtractor"),a instanceof Float64Array&&(a=new Float32Array(a));let l=a;this.config.do_normalize&&(l=this._zero_mean_unit_var_norm(l));const u=[1,l.length];return{input_values:new i.Tensor("float32",l,u),attention_mask:new i.Tensor("int64",new BigInt64Array(l.length).fill(1n),u)}}}}),"./src/models/wav2vec2/processing_wav2vec2.js":((e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2Processor:()=>o});var n=r("./src/tokenizers.js"),i=r("./src/models/auto/feature_extraction_auto.js"),s=r("./src/base/processing_utils.js");class o extends s.Processor{static tokenizer_class=n.AutoTokenizer;static feature_extractor_class=i.AutoFeatureExtractor;async _call(l){return await this.feature_extractor(l)}}}),"./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js":((e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2ProcessorWithLM:()=>o});var n=r("./src/tokenizers.js"),i=r("./src/models/auto/feature_extraction_auto.js"),s=r("./src/base/processing_utils.js");class o extends s.Processor{static tokenizer_class=n.AutoTokenizer;static feature_extractor_class=i.AutoFeatureExtractor;async _call(l){return await this.feature_extractor(l)}}}),"./src/models/wespeaker/feature_extraction_wespeaker.js":((e,t,r)=>{r.r(t),r.d(t,{WeSpeakerFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js");class s extends n.FeatureExtractor{constructor(a){super(a);const l=this.config.sampling_rate,u=(0,i.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(l/2),l,null,"kaldi",!0);this.mel_filters=u,this.window=(0,i.window_function)(400,"hamming",{periodic:!1}),this.min_num_frames=this.config.min_num_frames}async _extract_fbank_features(a){return a=a.map(l=>l*32768),(0,i.spectrogram)(a,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,transpose:!0,min_num_frames:this.min_num_frames})}async _call(a){(0,n.validate_audio_inputs)(a,"WeSpeakerFeatureExtractor");const l=(await this._extract_fbank_features(a)).unsqueeze_(0);if(this.config.fbank_centering_span===null){const u=l.mean(1).data,c=l.data,[d,h,m]=l.dims;for(let g=0;g<d;++g){const v=g*h*m,y=g*m;for(let x=0;x<h;++x){const w=v+x*m;for(let S=0;S<m;++S)c[w+S]-=u[y+S]}}}return{input_features:l}}}}),"./src/models/whisper/common_whisper.js":((e,t,r)=>{r.r(t),r.d(t,{WHISPER_LANGUAGE_MAPPING:()=>i,WHISPER_TO_LANGUAGE_CODE_MAPPING:()=>s,whisper_language_to_code:()=>o});const n=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],i=new Map(n),s=new Map([...n.map(([a,l])=>[l,a]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);function o(a){a=a.toLowerCase();let l=s.get(a);if(l===void 0){const u=a.match(/^<\|([a-z]{2})\|>$/);if(u&&(a=u[1]),i.has(a))l=a;else{const d=a.length===2?i.keys():i.values();throw new Error(`Language "${a}" is not supported. Must be one of: ${JSON.stringify(Array.from(d))}`)}}return l}}),"./src/models/whisper/feature_extraction_whisper.js":((e,t,r)=>{r.r(t),r.d(t,{WhisperFeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js"),s=r("./src/utils/maths.js");class o extends n.FeatureExtractor{constructor(l){super(l),this.config.mel_filters??=(0,i.mel_filter_bank)(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney"),this.window=(0,i.window_function)(this.config.n_fft,"hann")}async _extract_fbank_features(l){const u=await(0,i.spectrogram)(l,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:Math.min(Math.floor(l.length/this.config.hop_length),this.config.nb_max_frames)}),c=u.data,d=(0,s.max)(c)[0];for(let h=0;h<c.length;++h)c[h]=(Math.max(c[h],d-8)+4)/4;return u}async _call(l,{max_length:u=null}={}){(0,n.validate_audio_inputs)(l,"WhisperFeatureExtractor");let c;const d=u??this.config.n_samples;return l.length>d?(l.length>this.config.n_samples&&console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),c=l.slice(0,d)):(c=new Float32Array(d),c.set(l)),{input_features:(await this._extract_fbank_features(c)).unsqueeze_(0)}}}}),"./src/models/whisper/generation_whisper.js":((e,t,r)=>{r.r(t),r.d(t,{WhisperGenerationConfig:()=>i});var n=r("./src/generation/configuration_utils.js");class i extends n.GenerationConfig{return_timestamps=null;return_token_timestamps=null;num_frames=null;alignment_heads=null;task=null;language=null;no_timestamps_token_id=null;prompt_ids=null;is_multilingual=null;lang_to_id=null;task_to_id=null;max_initial_timestamp_index=1}}),"./src/models/whisper/processing_whisper.js":((e,t,r)=>{r.r(t),r.d(t,{WhisperProcessor:()=>o});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class o extends s.Processor{static tokenizer_class=i.AutoTokenizer;static feature_extractor_class=n.AutoFeatureExtractor;async _call(l){return await this.feature_extractor(l)}}}),"./src/models/yolos/image_processing_yolos.js":((e,t,r)=>{r.r(t),r.d(t,{YolosFeatureExtractor:()=>s,YolosImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_object_detection(...a){return(0,n.post_process_object_detection)(...a)}}class s extends i{}}),"./src/ops/registry.js":((e,t,r)=>{r.r(t),r.d(t,{TensorOpRegistry:()=>l});var n=r("./src/backends/onnx.js"),i=r("./src/utils/tensor.js"),s=r("./src/env.js");const o=s.apis.IS_BROWSER_ENV||s.apis.IS_WEBWORKER_ENV,a=async(u,c,d)=>{const h=await(0,n.createInferenceSession)(new Uint8Array(u),c);let m=Promise.resolve();return(async g=>{const v=(0,n.isONNXProxy)(),y=Object.fromEntries(Object.entries(g).map(([w,S])=>[w,(v?S.clone():S).ort_tensor])),x=await(m=o?m.then(()=>h.run(y)):h.run(y));return Array.isArray(d)?d.map(w=>new i.Tensor(x[w])):new i.Tensor(x[d])})};class l{static session_options={};static get nearest_interpolate_4d(){return this._nearest_interpolate_4d||(this._nearest_interpolate_4d=a([8,10,18,0,58,129,1,10,41,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,18,10,4,109,111,100,101,34,7,110,101,97,114,101,115,116,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,21],this.session_options,"y")),this._nearest_interpolate_4d}static get bilinear_interpolate_4d(){return this._bilinear_interpolate_4d||(this._bilinear_interpolate_4d=a([8,9,18,0,58,128,1,10,40,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,17,10,4,109,111,100,101,34,6,108,105,110,101,97,114,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bilinear_interpolate_4d}static get bicubic_interpolate_4d(){return this._bicubic_interpolate_4d||(this._bicubic_interpolate_4d=a([8,9,18,0,58,127,10,39,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,16,10,4,109,111,100,101,34,5,99,117,98,105,99,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bicubic_interpolate_4d}static get matmul(){return this._matmul||(this._matmul=a([8,9,18,0,58,55,10,17,10,1,97,10,1,98,18,1,99,34,6,77,97,116,77,117,108,18,1,114,90,9,10,1,97,18,4,10,2,8,1,90,9,10,1,98,18,4,10,2,8,1,98,9,10,1,99,18,4,10,2,8,1,66,2,16,20],this.session_options,"c")),this._matmul}static get stft(){return this._stft||(this._stft=a([8,7,18,0,58,148,1,10,38,10,1,115,10,1,106,10,1,119,10,1,108,18,1,111,34,4,83,84,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,115,90,26,10,1,115,18,21,10,19,8,1,18,15,10,3,18,1,98,10,3,18,1,115,10,3,18,1,99,90,11,10,1,106,18,6,10,4,8,7,18,0,90,16,10,1,119,18,11,10,9,8,1,18,5,10,3,18,1,119,90,11,10,1,108,18,6,10,4,8,7,18,0,98,31,10,1,111,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,102,10,3,18,1,100,10,3,18,1,99,66,2,16,17],this.session_options,"o")),this._stft}static get rfft(){return this._rfft||(this._rfft=a([8,9,18,0,58,97,10,33,10,1,120,10,0,10,1,97,18,1,121,34,3,68,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,100,90,21,10,1,120,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,90,11,10,1,97,18,6,10,4,8,7,18,0,98,21,10,1,121,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,66,2,16,20],this.session_options,"y")),this._rfft}static get top_k(){return this._top_k||(this._top_k=a([8,10,18,0,58,73,10,18,10,1,120,10,1,107,18,1,118,18,1,105,34,4,84,111,112,75,18,1,116,90,9,10,1,120,18,4,10,2,8,1,90,15,10,1,107,18,10,10,8,8,7,18,4,10,2,8,1,98,9,10,1,118,18,4,10,2,8,1,98,9,10,1,105,18,4,10,2,8,7,66,2,16,21],this.session_options,["v","i"])),this._top_k}static get slice(){return this._slice||(this._slice=a([8,7,18,0,58,96,10,25,10,1,120,10,1,115,10,1,101,10,1,97,10,1,116,18,1,121,34,5,83,108,105,99,101,18,1,114,90,9,10,1,120,18,4,10,2,8,1,90,9,10,1,115,18,4,10,2,8,7,90,9,10,1,101,18,4,10,2,8,7,90,9,10,1,97,18,4,10,2,8,7,90,9,10,1,116,18,4,10,2,8,7,98,9,10,1,121,18,4,10,2,8,1,66,2,16,13],this.session_options,"y")),this._slice}}}),"./src/pipelines.js":((e,t,r)=>{r.r(t),r.d(t,{AudioClassificationPipeline:()=>G,AutomaticSpeechRecognitionPipeline:()=>K,BackgroundRemovalPipeline:()=>W,DepthEstimationPipeline:()=>pe,DocumentQuestionAnsweringPipeline:()=>U,FeatureExtractionPipeline:()=>B,FillMaskPipeline:()=>S,ImageClassificationPipeline:()=>X,ImageFeatureExtractionPipeline:()=>V,ImageSegmentationPipeline:()=>Q,ImageToImagePipeline:()=>ee,ImageToTextPipeline:()=>J,ObjectDetectionPipeline:()=>ce,Pipeline:()=>v,QuestionAnsweringPipeline:()=>w,SummarizationPipeline:()=>T,Text2TextGenerationPipeline:()=>M,TextClassificationPipeline:()=>y,TextGenerationPipeline:()=>A,TextToAudioPipeline:()=>te,TokenClassificationPipeline:()=>x,TranslationPipeline:()=>P,ZeroShotAudioClassificationPipeline:()=>z,ZeroShotClassificationPipeline:()=>L,ZeroShotImageClassificationPipeline:()=>oe,ZeroShotObjectDetectionPipeline:()=>D,pipeline:()=>Ie});var n=r("./src/tokenizers.js"),i=r("./src/models.js"),s=r("./src/models/auto/processing_auto.js");r("./src/base/processing_utils.js");var o=r("./src/utils/generic.js"),a=r("./src/utils/core.js"),l=r("./src/utils/maths.js"),u=r("./src/utils/audio.js"),c=r("./src/utils/tensor.js"),d=r("./src/utils/image.js");async function h(he){return Array.isArray(he)||(he=[he]),await Promise.all(he.map(re=>d.RawImage.read(re)))}async function m(he,re){return Array.isArray(he)||(he=[he]),await Promise.all(he.map(ue=>typeof ue=="string"||ue instanceof URL?(0,u.read_audio)(ue,re):ue instanceof Float64Array?new Float32Array(ue):ue))}function g(he,re){re&&(he=he.map(Ne=>Ne|0));const[ue,ae,Ce,$e]=he;return{xmin:ue,ymin:ae,xmax:Ce,ymax:$e}}class v extends o.Callable{constructor({task:re,model:ue,tokenizer:ae=null,processor:Ce=null}){super(),this.task=re,this.model=ue,this.tokenizer=ae,this.processor=Ce}async dispose(){await this.model.dispose()}}class y extends v{constructor(re){super(re)}async _call(re,{top_k:ue=1}={}){const ae=this.tokenizer(re,{padding:!0,truncation:!0}),Ce=await this.model(ae),$e=this.model.config.problem_type==="multi_label_classification"?Ve=>Ve.sigmoid():Ve=>new c.Tensor("float32",(0,l.softmax)(Ve.data),Ve.dims),Ne=this.model.config.id2label,Le=[];for(const Ve of Ce.logits){const He=$e(Ve),Qe=await(0,c.topk)(He,ue),et=Qe[0].tolist(),Xe=Qe[1].tolist().map((lt,_t)=>({label:Ne?Ne[lt]:`LABEL_${lt}`,score:et[_t]}));ue===1?Le.push(...Xe):Le.push(Xe)}return Array.isArray(re)||ue===1?Le:Le[0]}}class x extends v{constructor(re){super(re)}async _call(re,{ignore_labels:ue=["O"]}={}){const ae=Array.isArray(re),Ce=this.tokenizer(ae?re:[re],{padding:!0,truncation:!0}),Ne=(await this.model(Ce)).logits,Le=this.model.config.id2label,Ve=[];for(let He=0;He<Ne.dims[0];++He){const Qe=Ce.input_ids[He],et=Ne[He],ot=[];for(let Xe=0;Xe<et.dims[0];++Xe){const lt=et[Xe],_t=(0,l.max)(lt.data)[1],dt=Le?Le[_t]:`LABEL_${_t}`;if(ue.includes(dt))continue;const xt=this.tokenizer.decode([Qe[Xe].item()],{skip_special_tokens:!0});if(xt==="")continue;const gt=(0,l.softmax)(lt.data);ot.push({entity:dt,score:gt[_t],index:Xe,word:xt})}Ve.push(ot)}return ae?Ve:Ve[0]}}class w extends v{constructor(re){super(re)}async _call(re,ue,{top_k:ae=1}={}){const Ce=this.tokenizer(re,{text_pair:ue,padding:!0,truncation:!0}),{start_logits:$e,end_logits:Ne}=await this.model(Ce),Le=Ce.input_ids.tolist(),Ve=Ce.attention_mask.tolist(),He=this.tokenizer.all_special_ids,Qe=[];for(let et=0;et<$e.dims[0];++et){const ot=Le[et],Xe=ot.findIndex(We=>We==this.tokenizer.sep_token_id);Ve[et].map((We,Ze)=>We==1&&(Ze===0||Ze>Xe&&He.findIndex(Pt=>Pt==ot[Ze])===-1));const lt=$e[et].tolist(),_t=Ne[et].tolist();for(let We=1;We<lt.length;++We)(Ve[et]==0||We<=Xe||He.findIndex(Ze=>Ze==ot[We])!==-1)&&(lt[We]=-1/0,_t[We]=-1/0);const dt=(0,l.softmax)(lt).map((We,Ze)=>[We,Ze]),xt=(0,l.softmax)(_t).map((We,Ze)=>[We,Ze]);dt[0][0]=0,xt[0][0]=0;const gt=(0,a.product)(dt,xt).filter(We=>We[0][1]<=We[1][1]).map(We=>[We[0][1],We[1][1],We[0][0]*We[1][0]]).sort((We,Ze)=>Ze[2]-We[2]);for(let We=0;We<Math.min(gt.length,ae);++We){const[Ze,Pt,Zt]=gt[We],Rt=ot.slice(Ze,Pt+1),Kr=this.tokenizer.decode(Rt,{skip_special_tokens:!0});Qe.push({answer:Kr,score:Zt})}}return ae===1?Qe[0]:Qe}}class S extends v{constructor(re){super(re)}async _call(re,{top_k:ue=5}={}){const ae=this.tokenizer(re,{padding:!0,truncation:!0}),{logits:Ce}=await this.model(ae),$e=[],Ne=ae.input_ids.tolist();for(let Le=0;Le<Ne.length;++Le){const Ve=Ne[Le],He=Ve.findIndex(lt=>lt==this.tokenizer.mask_token_id);if(He===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const Qe=Ce[Le][He],et=await(0,c.topk)(new c.Tensor("float32",(0,l.softmax)(Qe.data),Qe.dims),ue),ot=et[0].tolist(),Xe=et[1].tolist();$e.push(Xe.map((lt,_t)=>{const dt=Ve.slice();return dt[He]=lt,{score:ot[_t],token:Number(lt),token_str:this.tokenizer.decode([lt]),sequence:this.tokenizer.decode(dt,{skip_special_tokens:!0})}}))}return Array.isArray(re)?$e:$e[0]}}class M extends v{_key="generated_text";constructor(re){super(re)}async _call(re,ue={}){Array.isArray(re)||(re=[re]),this.model.config.prefix&&(re=re.map(Ve=>this.model.config.prefix+Ve));const ae=this.model.config.task_specific_params;ae&&ae[this.task]&&ae[this.task].prefix&&(re=re.map(Ve=>ae[this.task].prefix+Ve));const Ce=this.tokenizer,$e={padding:!0,truncation:!0};let Ne;this instanceof P&&"_build_translation_inputs"in Ce?Ne=Ce._build_translation_inputs(re,$e,ue):Ne=Ce(re,$e);const Le=await this.model.generate({...Ne,...ue});return Ce.batch_decode(Le,{skip_special_tokens:!0}).map(Ve=>({[this._key]:Ve}))}}class T extends M{_key="summary_text";constructor(re){super(re)}}class P extends M{_key="translation_text";constructor(re){super(re)}}function E(he){return Array.isArray(he)&&he.every(re=>"role"in re&&"content"in re)}class A extends v{constructor(re){super(re)}async _call(re,ue={}){let ae=!1,Ce=!1,$e;if(typeof re=="string")$e=re=[re];else if(Array.isArray(re)&&re.every(Xe=>typeof Xe=="string"))ae=!0,$e=re;else{if(E(re))re=[re];else if(Array.isArray(re)&&re.every(E))ae=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");Ce=!0,$e=re.map(Xe=>this.tokenizer.apply_chat_template(Xe,{tokenize:!1,add_generation_prompt:!0}))}const Ne=ue.add_special_tokens??!1,Le=Ce?!1:ue.return_full_text??!0;this.tokenizer.padding_side="left";const Ve=this.tokenizer($e,{add_special_tokens:Ne,padding:!0,truncation:!0}),He=await this.model.generate({...Ve,...ue}),Qe=this.tokenizer.batch_decode(He,{skip_special_tokens:!0});let et;!Le&&Ve.input_ids.dims.at(-1)>0&&(et=this.tokenizer.batch_decode(Ve.input_ids,{skip_special_tokens:!0}).map(Xe=>Xe.length));const ot=Array.from({length:re.length},Xe=>[]);for(let Xe=0;Xe<Qe.length;++Xe){const lt=Math.floor(Xe/He.dims[0]*re.length);et&&(Qe[Xe]=Qe[Xe].slice(et[lt])),ot[lt].push({generated_text:Ce?[...re[lt],{role:"assistant",content:Qe[Xe]}]:Qe[Xe]})}return!ae&&ot.length===1?ot[0]:ot}}class L extends v{constructor(re){super(re),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([ue,ae])=>[ue.toLowerCase(),ae])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(re,ue,{hypothesis_template:ae="This example is {}.",multi_label:Ce=!1}={}){const $e=Array.isArray(re);$e||(re=[re]),Array.isArray(ue)||(ue=[ue]);const Ne=ue.map(He=>ae.replace("{}",He)),Le=Ce||ue.length===1,Ve=[];for(const He of re){const Qe=[];for(const Xe of Ne){const lt=this.tokenizer(He,{text_pair:Xe,padding:!0,truncation:!0}),_t=await this.model(lt);Le?Qe.push([_t.logits.data[this.contradiction_id],_t.logits.data[this.entailment_id]]):Qe.push(_t.logits.data[this.entailment_id])}const ot=(Le?Qe.map(Xe=>(0,l.softmax)(Xe)[1]):(0,l.softmax)(Qe)).map((Xe,lt)=>[Xe,lt]).sort((Xe,lt)=>lt[0]-Xe[0]);Ve.push({sequence:He,labels:ot.map(Xe=>ue[Xe[1]]),scores:ot.map(Xe=>Xe[0])})}return $e?Ve:Ve[0]}}class B extends v{constructor(re){super(re)}async _call(re,{pooling:ue="none",normalize:ae=!1,quantize:Ce=!1,precision:$e="binary"}={}){const Ne=this.tokenizer(re,{padding:!0,truncation:!0}),Le=await this.model(Ne);let Ve=Le.last_hidden_state??Le.logits??Le.token_embeddings;switch(ue){case"none":break;case"mean":Ve=(0,c.mean_pooling)(Ve,Ne.attention_mask);break;case"first_token":case"cls":Ve=Ve.slice(null,0);break;case"last_token":case"eos":Ve=Ve.slice(null,-1);break;default:throw Error(`Pooling method '${ue}' not supported.`)}return ae&&(Ve=Ve.normalize(2,-1)),Ce&&(Ve=(0,c.quantize_embeddings)(Ve,$e)),Ve}}class V extends v{constructor(re){super(re)}async _call(re,{pool:ue=null}={}){const ae=await h(re),{pixel_values:Ce}=await this.processor(ae),$e=await this.model({pixel_values:Ce});let Ne;if(ue){if(!("pooler_output"in $e))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");Ne=$e.pooler_output}else Ne=$e.last_hidden_state??$e.logits??$e.image_embeds;return Ne}}class G extends v{constructor(re){super(re)}async _call(re,{top_k:ue=5}={}){const ae=this.processor.feature_extractor.config.sampling_rate,Ce=await m(re,ae),$e=this.model.config.id2label,Ne=[];for(const Le of Ce){const Ve=await this.processor(Le),Qe=(await this.model(Ve)).logits[0],et=await(0,c.topk)(new c.Tensor("float32",(0,l.softmax)(Qe.data),Qe.dims),ue),ot=et[0].tolist(),lt=et[1].tolist().map((_t,dt)=>({label:$e?$e[_t]:`LABEL_${_t}`,score:ot[dt]}));Ne.push(lt)}return Array.isArray(re)?Ne:Ne[0]}}class z extends v{constructor(re){super(re)}async _call(re,ue,{hypothesis_template:ae="This is a sound of {}."}={}){const Ce=!Array.isArray(re);Ce&&(re=[re]);const $e=ue.map(Qe=>ae.replace("{}",Qe)),Ne=this.tokenizer($e,{padding:!0,truncation:!0}),Le=this.processor.feature_extractor.config.sampling_rate,Ve=await m(re,Le),He=[];for(const Qe of Ve){const et=await this.processor(Qe),ot=await this.model({...Ne,...et}),Xe=(0,l.softmax)(ot.logits_per_audio.data);He.push([...Xe].map((lt,_t)=>({score:lt,label:ue[_t]})))}return Ce?He[0]:He}}class K extends v{constructor(re){super(re)}async _call(re,ue={}){switch(this.model.config.model_type){case"whisper":case"lite-whisper":return this._call_whisper(re,ue);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(re,ue);case"moonshine":return this._call_moonshine(re,ue);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(re,ue){ue.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),ue.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const ae=!Array.isArray(re);ae&&(re=[re]);const Ce=this.processor.feature_extractor.config.sampling_rate,$e=await m(re,Ce),Ne=[];for(const Le of $e){const Ve=await this.processor(Le),Qe=(await this.model(Ve)).logits[0],et=[];for(const Xe of Qe)et.push((0,l.max)(Xe.data)[1]);const ot=this.tokenizer.decode(et);Ne.push({text:ot})}return ae?Ne[0]:Ne}async _call_whisper(re,ue){const ae=ue.return_timestamps??!1,Ce=ue.chunk_length_s??0,$e=ue.force_full_sequences??!1;let Ne=ue.stride_length_s??null;const Le={...ue};ae==="word"&&(Le.return_token_timestamps=!0,Le.return_timestamps=!1);const Ve=!Array.isArray(re);Ve&&(re=[re]);const He=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,Qe=this.processor.feature_extractor.config.hop_length,et=this.processor.feature_extractor.config.sampling_rate,ot=await m(re,et),Xe=[];for(const lt of ot){let _t=[];if(Ce>0){if(Ne===null)Ne=Ce/6;else if(Ce<=Ne)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const gt=et*Ce,We=et*Ne,Ze=gt-2*We;let Pt=0;for(;;){const Zt=Pt+gt,Rt=lt.subarray(Pt,Zt),Kr=await this.processor(Rt),gn=Pt===0,jt=Zt>=lt.length;if(_t.push({stride:[Rt.length,gn?0:We,jt?0:We],input_features:Kr.input_features,is_last:jt}),jt)break;Pt+=Ze}}else _t=[{stride:[lt.length,0,0],input_features:(await this.processor(lt)).input_features,is_last:!0}];for(const gt of _t){Le.num_frames=Math.floor(gt.stride[0]/Qe);const We=await this.model.generate({inputs:gt.input_features,...Le});ae==="word"?(gt.tokens=We.sequences.tolist()[0],gt.token_timestamps=We.token_timestamps.tolist()[0].map(Ze=>(0,l.round)(Ze,2))):gt.tokens=We[0].tolist(),gt.stride=gt.stride.map(Ze=>Ze/et)}const[dt,xt]=this.tokenizer._decode_asr(_t,{time_precision:He,return_timestamps:ae,force_full_sequences:$e});Xe.push({text:dt,...xt})}return Ve?Xe[0]:Xe}async _call_moonshine(re,ue){const ae=!Array.isArray(re);ae&&(re=[re]);const Ce=this.processor.feature_extractor.config.sampling_rate,$e=await m(re,Ce),Ne=[];for(const Le of $e){const Ve=await this.processor(Le),He=Math.floor(Le.length/Ce)*6,Qe=await this.model.generate({max_new_tokens:He,...ue,...Ve}),et=this.processor.batch_decode(Qe,{skip_special_tokens:!0})[0];Ne.push({text:et})}return ae?Ne[0]:Ne}}class J extends v{constructor(re){super(re)}async _call(re,ue={}){const ae=Array.isArray(re),Ce=await h(re),{pixel_values:$e}=await this.processor(Ce),Ne=[];for(const Le of $e){Le.dims=[1,...Le.dims];const Ve=await this.model.generate({inputs:Le,...ue}),He=this.tokenizer.batch_decode(Ve,{skip_special_tokens:!0}).map(Qe=>({generated_text:Qe.trim()}));Ne.push(He)}return ae?Ne:Ne[0]}}class X extends v{constructor(re){super(re)}async _call(re,{top_k:ue=5}={}){const ae=await h(re),{pixel_values:Ce}=await this.processor(ae),$e=await this.model({pixel_values:Ce}),Ne=this.model.config.id2label,Le=[];for(const Ve of $e.logits){const He=await(0,c.topk)(new c.Tensor("float32",(0,l.softmax)(Ve.data),Ve.dims),ue),Qe=He[0].tolist(),ot=He[1].tolist().map((Xe,lt)=>({label:Ne?Ne[Xe]:`LABEL_${Xe}`,score:Qe[lt]}));Le.push(ot)}return Array.isArray(re)?Le:Le[0]}}class Q extends v{constructor(re){super(re),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(re,{threshold:ue=.5,mask_threshold:ae=.5,overlap_mask_area_threshold:Ce=.8,label_ids_to_fuse:$e=null,target_sizes:Ne=null,subtask:Le=null}={}){if(Array.isArray(re)&&re.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const He=await h(re),Qe=He.map(gt=>[gt.height,gt.width]),et=await this.processor(He),{inputNames:ot,outputNames:Xe}=this.model.sessions.model;if(!ot.includes("pixel_values")){if(ot.length!==1)throw Error(`Expected a single input name, but got ${ot.length} inputs: ${ot}.`);const gt=ot[0];if(gt in et)throw Error(`Input name ${gt} already exists in the inputs.`);et[gt]=et.pixel_values}const lt=await this.model(et);let _t=null;if(Le!==null)_t=this.subtasks_mapping[Le];else if(this.processor.image_processor){for(const[gt,We]of Object.entries(this.subtasks_mapping))if(We in this.processor.image_processor){_t=this.processor.image_processor[We].bind(this.processor.image_processor),Le=gt;break}}const dt=this.model.config.id2label,xt=[];if(Le)if(Le==="panoptic"||Le==="instance"){const gt=_t(lt,ue,ae,Ce,$e,Ne??Qe)[0],We=gt.segmentation;for(const Ze of gt.segments_info){const Pt=new Uint8ClampedArray(We.data.length);for(let Rt=0;Rt<We.data.length;++Rt)We.data[Rt]===Ze.id&&(Pt[Rt]=255);const Zt=new d.RawImage(Pt,We.dims[1],We.dims[0],1);xt.push({score:Ze.score,label:dt[Ze.label_id],mask:Zt})}}else if(Le==="semantic"){const{segmentation:gt,labels:We}=_t(lt,Ne??Qe)[0];for(const Ze of We){const Pt=new Uint8ClampedArray(gt.data.length);for(let Rt=0;Rt<gt.data.length;++Rt)gt.data[Rt]===Ze&&(Pt[Rt]=255);const Zt=new d.RawImage(Pt,gt.dims[1],gt.dims[0],1);xt.push({score:null,label:dt[Ze],mask:Zt})}}else throw Error(`Subtask ${Le} not supported.`);else{const We=lt[Xe[0]];for(let Ze=0;Ze<Qe.length;++Ze){const Pt=Qe[Ze],Zt=We[Ze];Zt.data.some(Kr=>Kr<-1e-5||Kr>1+1e-5)&&Zt.sigmoid_();const Rt=await d.RawImage.fromTensor(Zt.mul_(255).to("uint8")).resize(Pt[1],Pt[0]);xt.push({label:null,score:null,mask:Rt})}}return xt}}class W extends Q{constructor(re){super(re)}async _call(re,ue={}){if(Array.isArray(re)&&re.length!==1)throw Error("Background removal pipeline currently only supports a batch size of 1.");const Ce=await h(re),$e=await super._call(re,ue);return Ce.map((Le,Ve)=>{const He=Le.clone();return He.putAlpha($e[Ve].mask),He})}}class oe extends v{constructor(re){super(re)}async _call(re,ue,{hypothesis_template:ae="This is a photo of {}"}={}){const Ce=Array.isArray(re),$e=await h(re),Ne=ue.map(ot=>ae.replace("{}",ot)),Le=this.tokenizer(Ne,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:Ve}=await this.processor($e),He=await this.model({...Le,pixel_values:Ve}),Qe=this.model.config.model_type==="siglip"?ot=>ot.sigmoid().data:ot=>(0,l.softmax)(ot.data),et=[];for(const ot of He.logits_per_image){const lt=[...Qe(ot)].map((_t,dt)=>({score:_t,label:ue[dt]}));lt.sort((_t,dt)=>dt.score-_t.score),et.push(lt)}return Ce?et:et[0]}}class ce extends v{constructor(re){super(re)}async _call(re,{threshold:ue=.9,percentage:ae=!1}={}){const Ce=Array.isArray(re);if(Ce&&re.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const $e=await h(re),Ne=ae?null:$e.map(Xe=>[Xe.height,Xe.width]),{pixel_values:Le,pixel_mask:Ve}=await this.processor($e),He=await this.model({pixel_values:Le,pixel_mask:Ve}),Qe=this.processor.image_processor.post_process_object_detection(He,ue,Ne),et=this.model.config.id2label,ot=Qe.map(Xe=>Xe.boxes.map((lt,_t)=>({score:Xe.scores[_t],label:et[Xe.classes[_t]],box:g(lt,!ae)})));return Ce?ot:ot[0]}}class D extends v{constructor(re){super(re)}async _call(re,ue,{threshold:ae=.1,top_k:Ce=null,percentage:$e=!1}={}){const Ne=Array.isArray(re),Le=await h(re),Ve=this.tokenizer(ue,{padding:!0,truncation:!0}),He=await this.processor(Le),Qe=[];for(let et=0;et<Le.length;++et){const ot=Le[et],Xe=$e?null:[[ot.height,ot.width]],lt=He.pixel_values[et].unsqueeze_(0),_t=await this.model({...Ve,pixel_values:lt});let dt;if("post_process_grounded_object_detection"in this.processor){const xt=this.processor.post_process_grounded_object_detection(_t,Ve.input_ids,{box_threshold:ae,text_threshold:ae,target_sizes:Xe})[0];dt=xt.boxes.map((gt,We)=>({score:xt.scores[We],label:xt.labels[We],box:g(gt,!$e)}))}else{const xt=this.processor.image_processor.post_process_object_detection(_t,ae,Xe,!0)[0];dt=xt.boxes.map((gt,We)=>({score:xt.scores[We],label:ue[xt.classes[We]],box:g(gt,!$e)}))}dt.sort((xt,gt)=>gt.score-xt.score),Ce!==null&&(dt=dt.slice(0,Ce)),Qe.push(dt)}return Ne?Qe:Qe[0]}}class U extends v{constructor(re){super(re)}async _call(re,ue,ae={}){const Ce=(await h(re))[0],{pixel_values:$e}=await this.processor(Ce),Ne=`<s_docvqa><s_question>${ue}</s_question><s_answer>`,Le=this.tokenizer(Ne,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,Ve=await this.model.generate({inputs:$e,max_length:this.model.config.decoder.max_position_embeddings,decoder_input_ids:Le,...ae}),Qe=this.tokenizer.batch_decode(Ve)[0].match(/<s_answer>(.*?)<\/s_answer>/);let et=null;return Qe&&Qe.length>=2&&(et=Qe[1].trim()),[{answer:et}]}}class te extends v{DEFAULT_VOCODER_ID="Xenova/speecht5_hifigan";constructor(re){super(re),this.vocoder=re.vocoder??null}async _call(re,{speaker_embeddings:ue=null}={}){return this.processor?this._call_text_to_spectrogram(re,{speaker_embeddings:ue}):this._call_text_to_waveform(re)}async _call_text_to_waveform(re){const ue=this.tokenizer(re,{padding:!0,truncation:!0}),{waveform:ae}=await this.model(ue),Ce=this.model.config.sampling_rate;return new u.RawAudio(ae.data,Ce)}async _call_text_to_spectrogram(re,{speaker_embeddings:ue}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await i.AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{dtype:"fp32"})),(typeof ue=="string"||ue instanceof URL)&&(ue=new Float32Array(await(await fetch(ue)).arrayBuffer())),ue instanceof Float32Array)ue=new c.Tensor("float32",ue,[1,ue.length]);else if(!(ue instanceof c.Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:ae}=this.tokenizer(re,{padding:!0,truncation:!0}),{waveform:Ce}=await this.model.generate_speech(ae,ue,{vocoder:this.vocoder}),$e=this.processor.feature_extractor.config.sampling_rate;return new u.RawAudio(Ce.data,$e)}}class ee extends v{constructor(re){super(re)}async _call(re){const ue=await h(re),ae=await this.processor(ue),Ce=await this.model(ae),$e=[];for(const Ne of Ce.reconstruction){const Le=Ne.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");$e.push(d.RawImage.fromTensor(Le))}return $e.length>1?$e:$e[0]}}class pe extends v{constructor(re){super(re)}async _call(re){const ue=await h(re),ae=await this.processor(ue),{predicted_depth:Ce}=await this.model(ae),$e=[];for(let Ne=0;Ne<ue.length;++Ne){const Le=Ce[Ne],[Ve,He]=Le.dims.slice(-2),[Qe,et]=ue[Ne].size,ot=(await(0,c.interpolate_4d)(Le.view(1,1,Ve,He),{size:[et,Qe],mode:"bilinear"})).view(et,Qe),Xe=ot.min().item(),lt=ot.max().item(),_t=ot.sub(Xe).div_(lt-Xe).mul_(255).to("uint8").unsqueeze(0),dt=d.RawImage.fromTensor(_t);$e.push({predicted_depth:ot,depth:dt})}return $e.length>1?$e:$e[0]}}const Oe=Object.freeze({"text-classification":{tokenizer:n.AutoTokenizer,pipeline:y,model:i.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:n.AutoTokenizer,pipeline:x,model:i.AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:n.AutoTokenizer,pipeline:w,model:i.AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:n.AutoTokenizer,pipeline:S,model:i.AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:n.AutoTokenizer,pipeline:T,model:i.AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:n.AutoTokenizer,pipeline:P,model:i.AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:n.AutoTokenizer,pipeline:M,model:i.AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:n.AutoTokenizer,pipeline:A,model:i.AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:n.AutoTokenizer,pipeline:L,model:i.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:G,model:i.AutoModelForAudioClassification,processor:s.AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:n.AutoTokenizer,pipeline:z,model:i.AutoModel,processor:s.AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:n.AutoTokenizer,pipeline:K,model:[i.AutoModelForSpeechSeq2Seq,i.AutoModelForCTC],processor:s.AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:n.AutoTokenizer,pipeline:te,model:[i.AutoModelForTextToWaveform,i.AutoModelForTextToSpectrogram],processor:[s.AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:n.AutoTokenizer,pipeline:J,model:i.AutoModelForVision2Seq,processor:s.AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:X,model:i.AutoModelForImageClassification,processor:s.AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:Q,model:[i.AutoModelForImageSegmentation,i.AutoModelForSemanticSegmentation,i.AutoModelForUniversalSegmentation],processor:s.AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"background-removal":{pipeline:W,model:[i.AutoModelForImageSegmentation,i.AutoModelForSemanticSegmentation,i.AutoModelForUniversalSegmentation],processor:s.AutoProcessor,default:{model:"Xenova/modnet"},type:"image"},"zero-shot-image-classification":{tokenizer:n.AutoTokenizer,pipeline:oe,model:i.AutoModel,processor:s.AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ce,model:i.AutoModelForObjectDetection,processor:s.AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:n.AutoTokenizer,pipeline:D,model:i.AutoModelForZeroShotObjectDetection,processor:s.AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:n.AutoTokenizer,pipeline:U,model:i.AutoModelForDocumentQuestionAnswering,processor:s.AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:ee,model:i.AutoModelForImageToImage,processor:s.AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:pe,model:i.AutoModelForDepthEstimation,processor:s.AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:n.AutoTokenizer,pipeline:B,model:i.AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:s.AutoProcessor,pipeline:V,model:[i.AutoModelForImageFeatureExtraction,i.AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),xe=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function Ie(he,re=null,{progress_callback:ue=null,config:ae=null,cache_dir:Ce=null,local_files_only:$e=!1,revision:Ne="main",device:Le=null,dtype:Ve=null,subfolder:He="onnx",use_external_data_format:Qe=null,model_file_name:et=null,session_options:ot={}}={}){he=xe[he]??he;const Xe=Oe[he.split("_",1)[0]];if(!Xe)throw Error(`Unsupported pipeline: ${he}. Must be one of [${Object.keys(Oe)}]`);re||(re=Xe.default.model,console.log(`No model specified. Using default model: "${re}".`));const lt={progress_callback:ue,config:ae,cache_dir:Ce,local_files_only:$e,revision:Ne,device:Le,dtype:Ve,subfolder:He,use_external_data_format:Qe,model_file_name:et,session_options:ot},_t=new Map([["tokenizer",Xe.tokenizer],["model",Xe.model],["processor",Xe.processor]]),dt=await Pe(_t,re,lt);dt.task=he,(0,a.dispatchCallback)(ue,{status:"ready",task:he,model:re});const xt=Xe.pipeline;return new xt(dt)}async function Pe(he,re,ue){const ae=Object.create(null),Ce=[];for(const[$e,Ne]of he.entries()){if(!Ne)continue;let Le;Array.isArray(Ne)?Le=new Promise(async(Ve,He)=>{let Qe;for(const et of Ne){if(et===null){Ve(null);return}try{Ve(await et.from_pretrained(re,ue));return}catch(ot){if(ot.message?.includes("Unsupported model type"))Qe=ot;else if(ot.message?.includes("Could not locate file"))Qe=ot;else{He(ot);return}}}He(Qe)}):Le=Ne.from_pretrained(re,ue),ae[$e]=Le,Ce.push(Le)}await Promise.all(Ce);for(const[$e,Ne]of Object.entries(ae))ae[$e]=await Ne;return ae}}),"./src/tokenizers.js":((e,t,r)=>{r.r(t),r.d(t,{AlbertTokenizer:()=>bt,AutoTokenizer:()=>ao,BartTokenizer:()=>io,BertTokenizer:()=>Nt,BlenderbotSmallTokenizer:()=>Ns,BlenderbotTokenizer:()=>so,BloomTokenizer:()=>zo,CLIPTokenizer:()=>Sn,CamembertTokenizer:()=>Pi,CodeGenTokenizer:()=>xl,CodeLlamaTokenizer:()=>ts,CohereTokenizer:()=>El,ConvBertTokenizer:()=>Rn,DebertaTokenizer:()=>sr,DebertaV2Tokenizer:()=>kr,DistilBertTokenizer:()=>Tn,ElectraTokenizer:()=>zi,EsmTokenizer:()=>At,FalconTokenizer:()=>it,GPT2Tokenizer:()=>Ei,GPTNeoXTokenizer:()=>nt,GemmaTokenizer:()=>pi,Grok1Tokenizer:()=>ys,HerbertTokenizer:()=>Pr,LlamaTokenizer:()=>es,M2M100Tokenizer:()=>_s,MBart50Tokenizer:()=>vs,MBartTokenizer:()=>Wn,MPNetTokenizer:()=>Ci,MarianTokenizer:()=>Tl,MgpstrTokenizer:()=>Uo,MobileBertTokenizer:()=>wt,NllbTokenizer:()=>Gn,NougatTokenizer:()=>oo,PreTrainedTokenizer:()=>Be,Qwen2Tokenizer:()=>vn,RoFormerTokenizer:()=>Lr,RobertaTokenizer:()=>ri,SiglipTokenizer:()=>Ml,SpeechT5Tokenizer:()=>Ui,SqueezeBertTokenizer:()=>Rr,T5Tokenizer:()=>no,TokenizerModel:()=>V,VitsTokenizer:()=>Pl,Wav2Vec2CTCTokenizer:()=>Sl,WhisperTokenizer:()=>mi,XLMRobertaTokenizer:()=>Kn,XLMTokenizer:()=>Bi,is_chinese_char:()=>S});var n=r("./src/utils/generic.js"),i=r("./src/utils/core.js"),s=r("./src/utils/hub.js"),o=r("./src/utils/maths.js"),a=r("./src/utils/tensor.js"),l=r("./src/utils/data-structures.js"),u=r("./node_modules/@huggingface/jinja/dist/index.js"),c=r("./src/models/whisper/common_whisper.js");async function d(ke,q){const de=await Promise.all([(0,s.getModelJSON)(ke,"tokenizer.json",!0,q),(0,s.getModelJSON)(ke,"tokenizer_config.json",!0,q)]);return q.legacy!==null&&(de[1].legacy=q.legacy),de}function h(ke,q){const de=[];let _e=0;for(const ve of ke.matchAll(q)){const Re=ve[0];_e<ve.index&&de.push(ke.slice(_e,ve.index)),Re.length>0&&de.push(Re),_e=ve.index+Re.length}return _e<ke.length&&de.push(ke.slice(_e)),de}function m(ke,q=!0){if(ke.Regex!==void 0){let de=ke.Regex.replace(/\\([#&~])/g,"$1");for(const[_e,ve]of L)de=de.replaceAll(_e,ve);return new RegExp(de,"gu")}else if(ke.String!==void 0){const de=(0,i.escapeRegExp)(ke.String);return new RegExp(q?de:`(${de})`,"gu")}else return console.warn("Unknown pattern type:",ke),null}function g(ke){return new Map(Object.entries(ke))}function v(ke){const q=ke.dims;switch(q.length){case 1:return ke.tolist();case 2:if(q[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return ke.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${q.length}.`)}}function y(ke){return ke.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function x(ke){return ke.replace(new RegExp("\\p{M}","gu"),"")}function w(ke){return x(ke.toLowerCase())}function S(ke){return ke>=19968&&ke<=40959||ke>=13312&&ke<=19903||ke>=131072&&ke<=173791||ke>=173824&&ke<=177983||ke>=177984&&ke<=178207||ke>=178208&&ke<=183983||ke>=63744&&ke<=64255||ke>=194560&&ke<=195103}function M(ke,q,de){const _e=[];let ve=0;for(;ve<ke.length;){if(_e.push(ke[ve]),(q.get(ke[ve])??de)!==de){++ve;continue}for(;++ve<ke.length&&(q.get(ke[ve])??de)===de;)q.get(_e.at(-1))!==de&&(_e[_e.length-1]+=ke[ve])}return _e}function T(ke){return ke.match(/\S+/g)||[]}const P="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",E=new RegExp(`^[${P}]+$`,"gu"),A=".,!?",L=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"],[` ?[^(\\s|[${A}])]+`,` ?[^\\s${A}]+`]]);class B{constructor(q){this.content=q.content,this.id=q.id,this.single_word=q.single_word??!1,this.lstrip=q.lstrip??!1,this.rstrip=q.rstrip??!1,this.special=q.special??!1,this.normalized=q.normalized??null}}class V extends n.Callable{constructor(q){super(),this.config=q,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(q,...de){switch(q.type){case"WordPiece":return new G(q);case"Unigram":return new z(q,...de);case"BPE":return new X(q);default:if(q.vocab)return Array.isArray(q.vocab)?new z(q,...de):Object.hasOwn(q,"continuing_subword_prefix")&&Object.hasOwn(q,"unk_token")?Object.hasOwn(q,"merges")?new X(q):new G(q):new Q(q,...de);throw new Error(`Unknown TokenizerModel type: ${q.type}`)}}_call(q){return q=this.encode(q),this.fuse_unk&&(q=M(q,this.tokens_to_ids,this.unk_token_id)),q}encode(q){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(q){return q.map(de=>this.tokens_to_ids.get(de)??this.unk_token_id)}convert_ids_to_tokens(q){return q.map(de=>this.vocab[de]??this.unk_token)}}class G extends V{constructor(q){super(q),this.tokens_to_ids=g(q.vocab),this.unk_token_id=this.tokens_to_ids.get(q.unk_token),this.unk_token=q.unk_token,this.max_input_chars_per_word=q.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[de,_e]of this.tokens_to_ids)this.vocab[_e]=de}encode(q){const de=[];for(const _e of q){const ve=[..._e];if(ve.length>this.max_input_chars_per_word){de.push(this.unk_token);continue}let Re=!1,Ke=0;const ft=[];for(;Ke<ve.length;){let mt=ve.length,vt=null;for(;Ke<mt;){let ut=ve.slice(Ke,mt).join("");if(Ke>0&&(ut=this.config.continuing_subword_prefix+ut),this.tokens_to_ids.has(ut)){vt=ut;break}--mt}if(vt===null){Re=!0;break}ft.push(vt),Ke=mt}Re?de.push(this.unk_token):de.push(...ft)}return de}}class z extends V{constructor(q,de){super(q);const _e=q.vocab.length;this.vocab=new Array(_e),this.scores=new Array(_e);for(let ve=0;ve<_e;++ve)[this.vocab[ve],this.scores[ve]]=q.vocab[ve];this.unk_token_id=q.unk_id,this.unk_token=this.vocab[q.unk_id],this.tokens_to_ids=new Map(this.vocab.map((ve,Re)=>[ve,Re])),this.bos_token=" ",this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=de.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.unk_token=this.vocab[this.unk_token_id],this.minScore=(0,o.min)(this.scores)[0],this.unk_score=this.minScore-10,this.scores[this.unk_token_id]=this.unk_score,this.trie=new l.CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(q){const de=q.chars,_e=1;let ve=0;for(;ve<de.length;){let Re=!1;const Ke=de.slice(ve).join(""),ft=this.trie.commonPrefixSearch(Ke);for(const mt of ft){const vt=this.tokens_to_ids.get(mt),ut=this.scores[vt],tr=(0,i.len)(mt);q.insert(ve,tr,ut,vt),!Re&&tr===_e&&(Re=!0)}Re||q.insert(ve,_e,this.unk_score,this.unk_token_id),ve+=_e}}tokenize(q){const de=new l.TokenLattice(q,this.bos_token_id,this.eos_token_id);return this.populateNodes(de),de.tokens()}encode(q){const de=[];for(const _e of q){const ve=this.tokenize(_e);de.push(...ve)}return de}}const K=(()=>{const ke=[...Array.from({length:94},(ve,Re)=>Re+33),...Array.from({length:12},(ve,Re)=>Re+161),...Array.from({length:82},(ve,Re)=>Re+174)],q=ke.slice();let de=0;for(let ve=0;ve<256;++ve)ke.includes(ve)||(ke.push(ve),q.push(256+de),de+=1);const _e=q.map(ve=>String.fromCharCode(ve));return Object.fromEntries(ke.map((ve,Re)=>[ve,_e[Re]]))})(),J=(0,i.reverseDictionary)(K);class X extends V{constructor(q){super(q),this.tokens_to_ids=g(q.vocab),this.unk_token_id=this.tokens_to_ids.get(q.unk_token),this.unk_token=q.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[_e,ve]of this.tokens_to_ids)this.vocab[ve]=_e;const de=Array.isArray(q.merges[0]);this.merges=de?q.merges:q.merges.map(_e=>_e.split(" ",2)),this.bpe_ranks=new Map(this.merges.map((_e,ve)=>[JSON.stringify(_e),ve])),this.end_of_word_suffix=q.end_of_word_suffix,this.continuing_subword_suffix=q.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.max_length_to_cache=256,this.cache_capacity=1e4,this.cache=new l.LRUCache(this.cache_capacity)}clear_cache(){this.cache.clear()}bpe(q){if(q.length===0)return[];const de=this.cache.get(q);if(de!==void 0)return de;const _e=Array.from(q);this.end_of_word_suffix&&(_e[_e.length-1]+=this.end_of_word_suffix);let ve=[];if(_e.length>1){const Re=new l.PriorityQueue((mt,vt)=>mt.score<vt.score);let Ke={token:_e[0],bias:0,prev:null,next:null},ft=Ke;for(let mt=1;mt<_e.length;++mt){const vt={bias:mt/_e.length,token:_e[mt],prev:ft,next:null};ft.next=vt,this._add_node(Re,ft),ft=vt}for(;!Re.isEmpty();){const mt=Re.pop();if(mt.deleted||!mt.next||mt.next.deleted)continue;if(mt.deleted=!0,mt.next.deleted=!0,mt.prev){const ut={...mt.prev};mt.prev.deleted=!0,mt.prev=ut,ut.prev?ut.prev.next=ut:Ke=ut}const vt={token:mt.token+mt.next.token,bias:mt.bias,prev:mt.prev,next:mt.next.next};vt.prev?(vt.prev.next=vt,this._add_node(Re,vt.prev)):Ke=vt,vt.next&&(vt.next.prev=vt,this._add_node(Re,vt))}for(let mt=Ke;mt!==null;mt=mt.next)ve.push(mt.token)}else ve=_e;if(this.continuing_subword_suffix)for(let Re=0;Re<ve.length-1;++Re)ve[Re]+=this.continuing_subword_suffix;return q.length<this.max_length_to_cache&&this.cache.put(q,ve),ve}_add_node(q,de){const _e=this.bpe_ranks.get(JSON.stringify([de.token,de.next.token]));_e!==void 0&&(de.score=_e+de.bias,q.push(de))}encode(q){const de=[];for(const _e of q){if(this.ignore_merges&&this.tokens_to_ids.has(_e)){de.push(_e);continue}const ve=this.bpe(_e);for(const Re of ve)if(this.tokens_to_ids.has(Re))de.push(Re);else if(this.byte_fallback){const Ke=Array.from(this.text_encoder.encode(Re)).map(ft=>`<0x${ft.toString(16).toUpperCase().padStart(2,"0")}>`);Ke.every(ft=>this.tokens_to_ids.has(ft))?de.push(...Ke):de.push(this.unk_token)}else de.push(this.unk_token)}return de}}class Q extends V{constructor(q,de){super(q),this.tokens_to_ids=g(de.target_lang?q.vocab[de.target_lang]:q.vocab),this.bos_token=de.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=de.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=de.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=de.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[_e,ve]of this.tokens_to_ids)this.vocab[ve]=_e}encode(q){return q}}class W extends n.Callable{constructor(q){super(),this.config=q}static fromConfig(q){if(q===null)return null;switch(q.type){case"BertNormalizer":return new he(q);case"Precompiled":return new jt(q);case"Sequence":return new Pe(q);case"Replace":return new oe(q);case"NFC":return new D(q);case"NFD":return new U(q);case"NFKC":return new te(q);case"NFKD":return new ee(q);case"Strip":return new pe(q);case"StripAccents":return new Oe(q);case"Lowercase":return new xe(q);case"Prepend":return new Ie(q);default:throw new Error(`Unknown Normalizer type: ${q.type}`)}}normalize(q){throw Error("normalize should be implemented in subclass.")}_call(q){return this.normalize(q)}}class oe extends W{normalize(q){const de=m(this.config.pattern);return de===null?q:q.replaceAll(de,this.config.content)}}class ce extends W{form=void 0;normalize(q){return q=q.normalize(this.form),q}}class D extends ce{form="NFC"}class U extends ce{form="NFD"}class te extends ce{form="NFKC"}class ee extends ce{form="NFKD"}class pe extends W{normalize(q){return this.config.strip_left&&this.config.strip_right?q=q.trim():(this.config.strip_left&&(q=q.trimStart()),this.config.strip_right&&(q=q.trimEnd())),q}}class Oe extends W{normalize(q){return q=x(q),q}}class xe extends W{normalize(q){return q=q.toLowerCase(),q}}class Ie extends W{normalize(q){return q=this.config.prepend+q,q}}class Pe extends W{constructor(q){super(q),this.normalizers=q.normalizers.map(de=>W.fromConfig(de))}normalize(q){return this.normalizers.reduce((de,_e)=>_e.normalize(de),q)}}class he extends W{_tokenize_chinese_chars(q){const de=[];for(let _e=0;_e<q.length;++_e){const ve=q[_e],Re=ve.charCodeAt(0);S(Re)?(de.push(" "),de.push(ve),de.push(" ")):de.push(ve)}return de.join("")}stripAccents(q){return q.normalize("NFD").replace(new RegExp("\\p{Mn}","gu"),"")}_is_control(q){switch(q){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(q)}}_clean_text(q){const de=[];for(const _e of q){const ve=_e.charCodeAt(0);ve===0||ve===65533||this._is_control(_e)||(/^\s$/.test(_e)?de.push(" "):de.push(_e))}return de.join("")}normalize(q){return this.config.clean_text&&(q=this._clean_text(q)),this.config.handle_chinese_chars&&(q=this._tokenize_chinese_chars(q)),this.config.lowercase?(q=q.toLowerCase(),this.config.strip_accents!==!1&&(q=this.stripAccents(q))):this.config.strip_accents&&(q=this.stripAccents(q)),q}}class re extends n.Callable{static fromConfig(q){if(q===null)return null;switch(q.type){case"BertPreTokenizer":return new ue(q);case"Sequence":return new hi(q);case"Whitespace":return new Z(q);case"WhitespaceSplit":return new be(q);case"Metaspace":return new Kr(q);case"ByteLevel":return new ae(q);case"Split":return new Ce(q);case"Punctuation":return new $e(q);case"Digits":return new Ne(q);case"Replace":return new se(q);default:throw new Error(`Unknown PreTokenizer type: ${q.type}`)}}pre_tokenize_text(q,de){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(q,de){return(Array.isArray(q)?q.map(_e=>this.pre_tokenize_text(_e,de)):this.pre_tokenize_text(q,de)).flat()}_call(q,de){return this.pre_tokenize(q,de)}}class ue extends re{constructor(q){super(),this.pattern=new RegExp(`[^\\s${P}]+|[${P}]`,"gu")}pre_tokenize_text(q,de){return q.trim().match(this.pattern)||[]}}class ae extends re{constructor(q){super(),this.config=q,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=K,this.text_encoder=new TextEncoder}pre_tokenize_text(q,de){return this.add_prefix_space&&!q.startsWith(" ")&&(q=" "+q),(this.use_regex?q.match(this.pattern)||[]:[q]).map(ve=>Array.from(this.text_encoder.encode(ve),Re=>this.byte_encoder[Re]).join(""))}}class Ce extends re{constructor(q){super(),this.config=q,this.pattern=m(this.config.pattern,this.config.invert)}pre_tokenize_text(q,de){return this.pattern===null?[]:this.config.invert?q.match(this.pattern)||[]:this.config.behavior?.toLowerCase()==="removed"?q.split(this.pattern).filter(_e=>_e):h(q,this.pattern)}}class $e extends re{constructor(q){super(),this.config=q,this.pattern=new RegExp(`[^${P}]+|[${P}]+`,"gu")}pre_tokenize_text(q,de){return q.match(this.pattern)||[]}}class Ne extends re{constructor(q){super(),this.config=q;const de=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(de,"gu")}pre_tokenize_text(q,de){return q.match(this.pattern)||[]}}class Le extends n.Callable{constructor(q){super(),this.config=q}static fromConfig(q){if(q===null)return null;switch(q.type){case"TemplateProcessing":return new Qe(q);case"ByteLevel":return new et(q);case"RobertaProcessing":return new He(q);case"BertProcessing":return new Ve(q);case"Sequence":return new ot(q);default:throw new Error(`Unknown PostProcessor type: ${q.type}`)}}post_process(q,...de){throw Error("post_process should be implemented in subclass.")}_call(q,...de){return this.post_process(q,...de)}}class Ve extends Le{constructor(q){super(q),this.cls=q.cls[0],this.sep=q.sep[0]}post_process(q,de=null,{add_special_tokens:_e=!0}={}){_e&&(q=(0,i.mergeArrays)([this.cls],q,[this.sep]));let ve=new Array(q.length).fill(0);if(de!==null){const Re=_e&&this instanceof He?[this.sep]:[],Ke=_e?[this.sep]:[];q=(0,i.mergeArrays)(q,Re,de,Ke),ve=(0,i.mergeArrays)(ve,new Array(de.length+Re.length+Ke.length).fill(1))}return{tokens:q,token_type_ids:ve}}}class He extends Ve{}class Qe extends Le{constructor(q){super(q),this.single=q.single,this.pair=q.pair}post_process(q,de=null,{add_special_tokens:_e=!0}={}){const ve=de===null?this.single:this.pair;let Re=[],Ke=[];for(const ft of ve)"SpecialToken"in ft?_e&&(Re.push(ft.SpecialToken.id),Ke.push(ft.SpecialToken.type_id)):"Sequence"in ft&&(ft.Sequence.id==="A"?(Re=(0,i.mergeArrays)(Re,q),Ke=(0,i.mergeArrays)(Ke,new Array(q.length).fill(ft.Sequence.type_id))):ft.Sequence.id==="B"&&(Re=(0,i.mergeArrays)(Re,de),Ke=(0,i.mergeArrays)(Ke,new Array(de.length).fill(ft.Sequence.type_id))));return{tokens:Re,token_type_ids:Ke}}}class et extends Le{post_process(q,de=null){return de&&(q=(0,i.mergeArrays)(q,de)),{tokens:q}}}class ot extends Le{constructor(q){super(q),this.processors=q.processors.map(de=>Le.fromConfig(de))}post_process(q,de=null,_e={}){let ve;for(const Re of this.processors)if(Re instanceof et)q=Re.post_process(q).tokens,de&&(de=Re.post_process(de).tokens);else{const Ke=Re.post_process(q,de,_e);q=Ke.tokens,ve=Ke.token_type_ids}return{tokens:q,token_type_ids:ve}}}class Xe extends n.Callable{constructor(q){super(),this.config=q,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=q.trim_offsets}static fromConfig(q){if(q===null)return null;switch(q.type){case"WordPiece":return new gt(q);case"Metaspace":return new gn(q);case"ByteLevel":return new We(q);case"Replace":return new lt(q);case"ByteFallback":return new _t(q);case"Fuse":return new dt(q);case"Strip":return new xt(q);case"Sequence":return new Pt(q);case"CTC":return new Ze(q);case"BPEDecoder":return new Zt(q);default:throw new Error(`Unknown Decoder type: ${q.type}`)}}_call(q){return this.decode(q)}decode(q){return this.decode_chain(q).join("")}decode_chain(q){throw Error("`decode_chain` should be implemented in subclass.")}}class lt extends Xe{decode_chain(q){const de=m(this.config.pattern);return de===null?q:q.map(_e=>_e.replaceAll(de,this.config.content))}}class _t extends Xe{constructor(q){super(q),this.text_decoder=new TextDecoder}decode_chain(q){const de=[];let _e=[];for(const ve of q){let Re=null;if(ve.length===6&&ve.startsWith("<0x")&&ve.endsWith(">")){const Ke=parseInt(ve.slice(3,5),16);isNaN(Ke)||(Re=Ke)}if(Re!==null)_e.push(Re);else{if(_e.length>0){const Ke=this.text_decoder.decode(Uint8Array.from(_e));de.push(Ke),_e=[]}de.push(ve)}}if(_e.length>0){const ve=this.text_decoder.decode(Uint8Array.from(_e));de.push(ve),_e=[]}return de}}class dt extends Xe{decode_chain(q){return[q.join("")]}}class xt extends Xe{constructor(q){super(q),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(q){return q.map(de=>{let _e=0;for(let Re=0;Re<this.start&&de[Re]===this.content;++Re){_e=Re+1;continue}let ve=de.length;for(let Re=0;Re<this.stop;++Re){const Ke=de.length-Re-1;if(de[Ke]===this.content){ve=Ke;continue}else break}return de.slice(_e,ve)})}}class gt extends Xe{constructor(q){super(q),this.cleanup=q.cleanup}decode_chain(q){return q.map((de,_e)=>(_e!==0&&(de.startsWith(this.config.prefix)?de=de.replace(this.config.prefix,""):de=" "+de),this.cleanup&&(de=y(de)),de))}}class We extends Xe{constructor(q){super(q),this.byte_decoder=J,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(q){const de=q.join(""),_e=new Uint8Array([...de].map(Re=>this.byte_decoder[Re]));return this.text_decoder.decode(_e)}decode_chain(q){const de=[];let _e=[];for(const ve of q)this.added_tokens.find(Re=>Re.content===ve)!==void 0?(_e.length>0&&(de.push(this.convert_tokens_to_string(_e)),_e=[]),de.push(ve)):_e.push(ve);return _e.length>0&&de.push(this.convert_tokens_to_string(_e)),de}}class Ze extends Xe{constructor(q){super(q),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(q){if(q.length===0)return"";const de=[q[0]];for(let Re=1;Re<q.length;++Re)q[Re]!==de.at(-1)&&de.push(q[Re]);let ve=de.filter(Re=>Re!==this.pad_token).join("");return this.cleanup&&(ve=y(ve).replaceAll(this.word_delimiter_token," ").trim()),ve}decode_chain(q){return[this.convert_tokens_to_string(q)]}}class Pt extends Xe{constructor(q){super(q),this.decoders=q.decoders.map(de=>Xe.fromConfig(de))}decode_chain(q){return this.decoders.reduce((de,_e)=>_e.decode_chain(de),q)}}class Zt extends Xe{constructor(q){super(q),this.suffix=this.config.suffix}decode_chain(q){return q.map((de,_e)=>de.replaceAll(this.suffix,_e===q.length-1?"":" "))}}class Rt extends Xe{decode_chain(q){let de="";for(let _e=1;_e<q.length;_e+=2)de+=q[_e];return[de]}}class Kr extends re{constructor(q){super(),this.addPrefixSpace=q.add_prefix_space,this.replacement=q.replacement,this.strRep=q.str_rep||this.replacement,this.prepend_scheme=q.prepend_scheme??"always"}pre_tokenize_text(q,{section_index:de=void 0}={}){let _e=q.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!_e.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&de===0)&&(_e=this.strRep+_e),[_e]}}class gn extends Xe{constructor(q){super(q),this.addPrefixSpace=q.add_prefix_space,this.replacement=q.replacement}decode_chain(q){const de=[];for(let _e=0;_e<q.length;++_e){let ve=q[_e].replaceAll(this.replacement," ");this.addPrefixSpace&&_e==0&&ve.startsWith(" ")&&(ve=ve.substring(1)),de.push(ve)}return de}}class jt extends W{constructor(q){super(q),this.charsmap=q.precompiled_charsmap}normalize(q){return q=q.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),q=q.replace(/[\u0009\u000A\u000C\u000D\u00A0\u1680\u2000-\u200F\u2028\u2029\u202F\u205F\u2581\u3000\uFEFF\uFFFD]/gm," "),q.includes("")?q=q.split("").map(_e=>_e.normalize("NFKC")).join(""):q=q.normalize("NFKC"),q}}class hi extends re{constructor(q){super(),this.tokenizers=q.pretokenizers.map(de=>re.fromConfig(de))}pre_tokenize_text(q,de){return this.tokenizers.reduce((_e,ve)=>ve.pre_tokenize(_e,de),[q])}}class Z extends re{constructor(q){super()}pre_tokenize_text(q,de){return q.match(/\w+|[^\w\s]+/g)||[]}}class be extends re{constructor(q){super()}pre_tokenize_text(q,de){return T(q)}}class se extends re{constructor(q){super(),this.config=q,this.pattern=m(this.config.pattern),this.content=this.config.content}pre_tokenize_text(q,de){return this.pattern===null?[q]:[q.replaceAll(this.pattern,this.config.content)]}}const we=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function je(ke,q,de,_e){for(const ve of Object.keys(ke)){const Re=q-ke[ve].length,Ke=de(ve),ft=new Array(Re).fill(Ke);ke[ve]=_e==="right"?(0,i.mergeArrays)(ke[ve],ft):(0,i.mergeArrays)(ft,ke[ve])}}function Je(ke,q){for(const de of Object.keys(ke))ke[de].length=q}class Be extends n.Callable{return_token_type_ids=!1;padding_side="right";constructor(q,de){super(),this.config=de,this.normalizer=W.fromConfig(q.normalizer),this.pre_tokenizer=re.fromConfig(q.pre_tokenizer),this.model=V.fromConfig(q.model,de),this.post_processor=Le.fromConfig(q.post_processor),this.decoder=Xe.fromConfig(q.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const _e of q.added_tokens){const ve=new B(_e);this.added_tokens.push(ve),this.model.tokens_to_ids.set(ve.content,ve.id),this.model.vocab[ve.id]=ve.content,ve.special&&(this.special_tokens.push(ve.content),this.all_special_ids.push(ve.id))}if(this.additional_special_tokens=de.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_splitter=new l.DictionarySplitter(this.added_tokens.map(_e=>_e.content)),this.added_tokens_map=new Map(this.added_tokens.map(_e=>[_e.content,_e])),this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.bos_token=this.getToken("bos_token"),this.bos_token_id=this.model.tokens_to_ids.get(this.bos_token),this.eos_token=this.getToken("eos_token"),this.eos_token_id=this.model.tokens_to_ids.get(this.eos_token),this.model_max_length=de.model_max_length,this.remove_space=de.remove_space,this.clean_up_tokenization_spaces=de.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=de.do_lowercase_and_remove_accent??!1,de.padding_side&&(this.padding_side=de.padding_side),this.legacy=!1,this.chat_template=de.chat_template??null,Array.isArray(this.chat_template)){const _e=Object.create(null);for(const{name:ve,template:Re}of this.chat_template){if(typeof ve!="string"||typeof Re!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');_e[ve]=Re}this.chat_template=_e}this._compiled_template_cache=new Map}getToken(...q){for(const de of q){const _e=this.config[de];if(_e)if(typeof _e=="object"){if(_e.__type==="AddedToken")return _e.content;throw Error(`Unknown token: ${_e}`)}else return _e}return null}static async from_pretrained(q,{progress_callback:de=null,config:_e=null,cache_dir:ve=null,local_files_only:Re=!1,revision:Ke="main",legacy:ft=null}={}){const mt=await d(q,{progress_callback:de,config:_e,cache_dir:ve,local_files_only:Re,revision:Ke,legacy:ft});return new this(...mt)}_call(q,{text_pair:de=null,add_special_tokens:_e=!0,padding:ve=!1,truncation:Re=null,max_length:Ke=null,return_tensor:ft=!0,return_token_type_ids:mt=null}={}){const vt=Array.isArray(q);let ut;if(vt){if(q.length===0)throw Error("text array must be non-empty");if(de!==null){if(Array.isArray(de)){if(q.length!==de.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");ut=q.map((Lt,dr)=>this._encode_plus(Lt,{text_pair:de[dr],add_special_tokens:_e,return_token_type_ids:mt}))}else ut=q.map(Lt=>this._encode_plus(Lt,{add_special_tokens:_e,return_token_type_ids:mt}))}else{if(q==null)throw Error("text may not be null or undefined");if(Array.isArray(de))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");ut=[this._encode_plus(q,{text_pair:de,add_special_tokens:_e,return_token_type_ids:mt})]}if(Ke===null?Ke=this.model_max_length:Re===null&&(ve===!0?(console.warn("`max_length` is ignored when `padding: true` and there is no truncation strategy. To pad to max length, use `padding: 'max_length'`."),Ke=this.model_max_length):ve===!1&&(console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation: true` to explicitly truncate examples to max length."),Re=!0)),ve===!0&&(Ke=Math.min((0,o.max)(ut.map(Lt=>Lt.input_ids.length))[0],Ke??1/0)),Ke=Math.min(Ke,this.model_max_length??1/0),ve||Re)for(let Lt=0;Lt<ut.length;++Lt)ut[Lt].input_ids.length!==Ke&&(ut[Lt].input_ids.length>Ke?Re&&Je(ut[Lt],Ke):ve&&je(ut[Lt],Ke,dr=>dr==="input_ids"?this.pad_token_id:0,this.padding_side));const tr={};if(ft){if(!(ve&&Re)&&ut.some(dr=>{for(const Fr of Object.keys(dr))if(dr[Fr].length!==ut[0][Fr]?.length)return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const Lt=[ut.length,ut[0].input_ids.length];for(const dr of Object.keys(ut[0]))tr[dr]=new a.Tensor("int64",BigInt64Array.from(ut.flatMap(Fr=>Fr[dr]).map(BigInt)),Lt)}else{for(const Lt of Object.keys(ut[0]))tr[Lt]=ut.map(dr=>dr[Lt]);if(!vt)for(const Lt of Object.keys(tr))tr[Lt]=tr[Lt][0]}return tr}_encode_text(q){if(q===null)return null;const de=this.added_tokens_splitter.split(q);for(let ve=0;ve<de.length;++ve){const Re=this.added_tokens_map.get(de[ve]);Re&&(Re.lstrip&&ve>0&&(de[ve-1]=de[ve-1].trimEnd()),Re.rstrip&&ve<de.length-1&&(de[ve+1]=de[ve+1].trimStart()))}return de.flatMap((ve,Re)=>{if(ve.length===0)return[];if(this.added_tokens_map.has(ve))return[ve];if(this.remove_space===!0&&(ve=ve.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(ve=w(ve)),this.normalizer!==null&&(ve=this.normalizer(ve)),ve.length===0)return[];const Ke=this.pre_tokenizer!==null?this.pre_tokenizer(ve,{section_index:Re}):[ve];return this.model(Ke)})}_encode_plus(q,{text_pair:de=null,add_special_tokens:_e=!0,return_token_type_ids:ve=null}={}){const{tokens:Re,token_type_ids:Ke}=this._tokenize_helper(q,{pair:de,add_special_tokens:_e}),ft=this.model.convert_tokens_to_ids(Re),mt={input_ids:ft,attention_mask:new Array(ft.length).fill(1)};return(ve??this.return_token_type_ids)&&Ke&&(mt.token_type_ids=Ke),mt}_tokenize_helper(q,{pair:de=null,add_special_tokens:_e=!1}={}){const ve=this._encode_text(q),Re=this._encode_text(de);return this.post_processor?this.post_processor(ve,Re,{add_special_tokens:_e}):{tokens:(0,i.mergeArrays)(ve??[],Re??[])}}tokenize(q,{pair:de=null,add_special_tokens:_e=!1}={}){return this._tokenize_helper(q,{pair:de,add_special_tokens:_e}).tokens}encode(q,{text_pair:de=null,add_special_tokens:_e=!0,return_token_type_ids:ve=null}={}){return this._encode_plus(q,{text_pair:de,add_special_tokens:_e,return_token_type_ids:ve}).input_ids}batch_decode(q,de={}){return q instanceof a.Tensor&&(q=q.tolist()),q.map(_e=>this.decode(_e,de))}decode(q,de={}){if(q instanceof a.Tensor&&(q=v(q)),!Array.isArray(q)||q.length===0||!(0,i.isIntegralNumber)(q[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(q,de)}decode_single(q,{skip_special_tokens:de=!1,clean_up_tokenization_spaces:_e=null}){let ve=this.model.convert_ids_to_tokens(q);de&&(ve=ve.filter(Ke=>!this.special_tokens.includes(Ke)));let Re=this.decoder?this.decoder(ve):ve.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(Re=Re.replaceAll(this.decoder.end_of_word_suffix," "),de&&(Re=Re.trim())),(_e??this.clean_up_tokenization_spaces)&&(Re=y(Re)),Re}get_chat_template({chat_template:q=null,tools:de=null}={}){if(this.chat_template&&typeof this.chat_template=="object"){const _e=this.chat_template;if(q!==null&&Object.hasOwn(_e,q))q=_e[q];else if(q===null)if(de!==null&&"tool_use"in _e)q=_e.tool_use;else if("default"in _e)q=_e.default;else throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(_e).sort()}.`)}else if(q===null)if(this.chat_template)q=this.chat_template;else throw Error("Cannot use apply_chat_template() because tokenizer.chat_template is not set and no template argument was passed! For information about writing templates and setting the tokenizer.chat_template attribute, please see the documentation at https://huggingface.co/docs/transformers/main/en/chat_templating");return q}apply_chat_template(q,{tools:de=null,documents:_e=null,chat_template:ve=null,add_generation_prompt:Re=!1,tokenize:Ke=!0,padding:ft=!1,truncation:mt=!1,max_length:vt=null,return_tensor:ut=!0,return_dict:tr=!1,tokenizer_kwargs:Lt={},...dr}={}){if(ve=this.get_chat_template({chat_template:ve,tools:de}),typeof ve!="string")throw Error(`chat_template must be a string, but got ${typeof ve}`);let Fr=this._compiled_template_cache.get(ve);Fr===void 0&&(Fr=new u.Template(ve),this._compiled_template_cache.set(ve,Fr));const wr=Object.create(null);for(const pr of we){const Ar=this.getToken(pr);Ar&&(wr[pr]=Ar)}const Xr=Fr.render({messages:q,add_generation_prompt:Re,tools:de,documents:_e,...wr,...dr});if(Ke){const pr=this._call(Xr,{add_special_tokens:!1,padding:ft,truncation:mt,max_length:vt,return_tensor:ut,...Lt});return tr?pr:pr.input_ids}return Xr}}class Nt extends Be{return_token_type_ids=!0}class bt extends Be{return_token_type_ids=!0}class wt extends Be{return_token_type_ids=!0}class Rr extends Be{return_token_type_ids=!0}class sr extends Be{return_token_type_ids=!0}class kr extends Be{return_token_type_ids=!0}class Pr extends Be{return_token_type_ids=!0}class Rn extends Be{return_token_type_ids=!0}class Lr extends Be{return_token_type_ids=!0}class Tn extends Be{}class Pi extends Be{}class Bi extends Be{return_token_type_ids=!0;constructor(q,de){super(q,de),console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class zi extends Be{return_token_type_ids=!0}class no extends Be{}class Ei extends Be{}class io extends Be{}class Wn extends Be{constructor(q,de){super(q,de),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(_e=>this.languageRegex.test(_e)),this.lang_to_token=_e=>_e}_build_translation_inputs(q,de,_e){return dn(this,q,de,_e)}}class vs extends Wn{}class ri extends Be{}class zo extends Be{}const Ur="";class es extends Be{padding_side="left";constructor(q,de){super(q,de),this.legacy=de.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new Kr({replacement:Ur,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(q){if(q===null)return null;if(this.legacy||q.length===0)return super._encode_text(q);let de=super._encode_text(Ur+q.replaceAll(Ur," "));return de.length>1&&de[0]===Ur&&this.special_tokens.includes(de[1])&&(de=de.slice(1)),de}}class ts extends Be{}class Kn extends Be{}class Ci extends Be{}class it extends Be{}class nt extends Be{}class At extends Be{}class vn extends Be{}class pi extends Be{}class ys extends Be{}function dn(ke,q,de,_e){if(!("language_codes"in ke)||!Array.isArray(ke.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in ke)||!(ke.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in ke)||typeof ke.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const ve=_e.src_lang,Re=_e.tgt_lang;if(!ke.language_codes.includes(Re))throw new Error(`Target language code "${Re}" is not valid. Must be one of: {${ke.language_codes.join(", ")}}`);if(ve!==void 0){if(!ke.language_codes.includes(ve))throw new Error(`Source language code "${ve}" is not valid. Must be one of: {${ke.language_codes.join(", ")}}`);for(const Ke of ke.post_processor.config.single)if("SpecialToken"in Ke&&ke.languageRegex.test(Ke.SpecialToken.id)){Ke.SpecialToken.id=ke.lang_to_token(ve);break}}return _e.forced_bos_token_id=ke.model.convert_tokens_to_ids([ke.lang_to_token(Re)])[0],ke._call(q,de)}class Gn extends Be{constructor(q,de){super(q,de),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(_e=>this.languageRegex.test(_e)),this.lang_to_token=_e=>_e}_build_translation_inputs(q,de,_e){return dn(this,q,de,_e)}}class _s extends Be{constructor(q,de){super(q,de),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(_e=>this.languageRegex.test(_e)).map(_e=>_e.slice(2,-2)),this.lang_to_token=_e=>`__${_e}__`}_build_translation_inputs(q,de,_e){return dn(this,q,de,_e)}}class mi extends Be{get timestamp_begin(){return this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1}_decode_asr(q,{return_timestamps:de=!1,return_language:_e=!1,time_precision:ve=null,force_full_sequences:Re=!0}={}){if(ve===null)throw Error("Must specify time_precision");let Ke=null;const ft=de==="word";function mt(){return{language:Ke,timestamp:[null,null],text:""}}const vt=[];let ut=mt(),tr=0;const Lt=this.timestamp_begin,Fr=Lt+1500;let wr=[],Xr=[],pr=!1,Ar=null;const lo=new Set(this.all_special_ids);for(const Ir of q){const En=Ir.tokens,Cn=ft?Ir.token_timestamps:null;let Vi=null,bs=Lt;if("stride"in Ir){const[Yr,Vr,Qr]=Ir.stride;if(tr-=Vr,Ar=Yr-Qr,Vr&&(bs=Vr/ve+Lt),Qr)for(let _n=En.length-1;_n>=0;--_n){const Xn=Number(En[_n]);if(Xn>=Lt){if(Vi!==null&&(Xn-Lt)*ve<Ar)break;Vi=Xn}}}let yn=[],fn=[];for(let Yr=0;Yr<En.length;++Yr){const Vr=Number(En[Yr]);if(lo.has(Vr)){const Qr=this.decode([Vr]),_n=c.WHISPER_LANGUAGE_MAPPING.get(Qr.slice(2,-2));if(_n!==void 0){if(Ke!==null&&_n!==Ke&&!de){wr.push(yn);const Xn=this.findLongestCommonSequence(wr)[0],Oi=this.decode(Xn);ut.text=Oi,vt.push(ut),wr=[],yn=[],ut=mt()}Ke=ut.language=_n}}else if(Vr>=Lt&&Vr<=Fr){const Qr=(Vr-Lt)*ve+tr,_n=(0,o.round)(Qr,2);if(Vi!==null&&Vr>=Vi)pr=!0;else if(pr||wr.length>0&&Vr<bs)pr=!1;else if(ut.timestamp[0]===null)ut.timestamp[0]=_n;else if(_n!==ut.timestamp[0]){ut.timestamp[1]=_n,wr.push(yn),ft&&Xr.push(fn);const[Xn,Oi]=this.findLongestCommonSequence(wr,Xr),$a=this.decode(Xn);ut.text=$a,ft&&(ut.words=this.collateWordTimestamps(Xn,Oi,Ke)),vt.push(ut),wr=[],yn=[],Xr=[],fn=[],ut=mt()}}else if(yn.push(Vr),ft){let Qr=(0,o.round)(Cn[Yr]+tr,2),_n;if(Yr+1<Cn.length){_n=(0,o.round)(Cn[Yr+1]+tr,2);const Xn=this.decode([Vr]);E.test(Xn)&&(_n=(0,o.round)(Math.min(Qr+ve,_n),2))}else _n=null;fn.push([Qr,_n])}}if("stride"in Ir){const[Yr,Vr,Qr]=Ir.stride;tr+=Yr-Qr}yn.length>0?(wr.push(yn),ft&&Xr.push(fn)):wr.every(Yr=>Yr.length===0)&&(ut=mt(),wr=[],yn=[],Xr=[],fn=[])}if(wr.length>0){if(Re&&de)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[Ir,En]=this.findLongestCommonSequence(wr,Xr),Cn=this.decode(Ir);ut.text=Cn,ft&&(ut.words=this.collateWordTimestamps(Ir,En,Ke)),vt.push(ut)}let Pn=Object.create(null);const Ai=vt.map(Ir=>Ir.text).join("");if(de||_e){for(let Ir=0;Ir<vt.length;++Ir){const En=vt[Ir];de||delete En.timestamp,_e||delete En.language}if(ft){const Ir=[];for(const En of vt)for(const Cn of En.words)Ir.push(Cn);Pn={chunks:Ir}}else Pn={chunks:vt}}return[Ai,Pn]}findLongestCommonSequence(q,de=null){let _e=q[0],ve=_e.length,Re=[];const Ke=Array.isArray(de)&&de.length>0;let ft=Ke?[]:null,mt=Ke?de[0]:null;for(let vt=1;vt<q.length;++vt){const ut=q[vt];let tr=0,Lt=[ve,ve,0,0];const dr=ut.length;for(let Pn=1;Pn<ve+dr;++Pn){const Ai=Math.max(0,ve-Pn),Ir=Math.min(ve,ve+dr-Pn),En=_e.slice(Ai,Ir),Cn=Math.max(0,Pn-ve),Vi=Math.min(dr,Pn),bs=ut.slice(Cn,Vi);if(En.length!==bs.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");let yn;Ke?yn=En.filter((Vr,Qr)=>Vr===bs[Qr]&&mt[Ai+Qr]<=de[vt][Cn+Qr]).length:yn=En.filter((Vr,Qr)=>Vr===bs[Qr]).length;const fn=Pn/1e4,Yr=yn/Pn+fn;yn>1&&Yr>tr&&(tr=Yr,Lt=[Ai,Ir,Cn,Vi])}const[Fr,wr,Xr,pr]=Lt,Ar=Math.floor((wr+Fr)/2),lo=Math.floor((pr+Xr)/2);Re.push(..._e.slice(0,Ar)),_e=ut.slice(lo),ve=_e.length,Ke&&(ft.push(...mt.slice(0,Ar)),mt=de[vt].slice(lo))}return Re.push(..._e),Ke?(ft.push(...mt),[Re,ft]):[Re,[]]}collateWordTimestamps(q,de,_e){const[ve,Re,Ke]=this.combineTokensIntoWords(q,_e),ft=[];for(let mt=0;mt<ve.length;++mt){const vt=Ke[mt];ft.push({text:ve[mt],timestamp:[de[vt.at(0)][0],de[vt.at(-1)][1]]})}return ft}combineTokensIntoWords(q,de,_e=`"'([{-`,ve=`"'.,!?:)]}`){de=de??"english";let Re,Ke,ft;return["chinese","japanese","thai","lao","myanmar"].includes(de)?[Re,Ke,ft]=this.splitTokensOnUnicode(q):[Re,Ke,ft]=this.splitTokensOnSpaces(q),this.mergePunctuations(Re,Ke,ft,_e,ve)}decode(q,de){let _e;return de?.decode_with_timestamps?(q instanceof a.Tensor&&(q=v(q)),_e=this.decodeWithTimestamps(q,de)):_e=super.decode(q,de),_e}decodeWithTimestamps(q,de){const _e=de?.time_precision??.02,ve=Array.from(this.all_special_ids).at(-1)+1;let Re=[[]];for(let Ke of q)if(Ke=Number(Ke),Ke>=ve){const ft=((Ke-ve)*_e).toFixed(2);Re.push(`<|${ft}|>`),Re.push([])}else Re[Re.length-1].push(Ke);return Re=Re.map(Ke=>typeof Ke=="string"?Ke:super.decode(Ke,de)),Re.join("")}splitTokensOnUnicode(q){const de=this.decode(q,{decode_with_timestamps:!0}),_e="",ve=[],Re=[],Ke=[];let ft=[],mt=[],vt=0;for(let ut=0;ut<q.length;++ut){const tr=q[ut];ft.push(tr),mt.push(ut);const Lt=this.decode(ft,{decode_with_timestamps:!0});(!Lt.includes(_e)||de[vt+Lt.indexOf(_e)]===_e)&&(ve.push(Lt),Re.push(ft),Ke.push(mt),ft=[],mt=[],vt+=Lt.length)}return[ve,Re,Ke]}splitTokensOnSpaces(q){const[de,_e,ve]=this.splitTokensOnUnicode(q),Re=[],Ke=[],ft=[],mt=new RegExp(`^[${P}]$`,"gu");for(let vt=0;vt<de.length;++vt){const ut=de[vt],tr=_e[vt],Lt=ve[vt],dr=tr[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),Fr=ut.startsWith(" "),wr=ut.trim(),Xr=mt.test(wr);if(dr||Fr||Xr||Re.length===0)Re.push(ut),Ke.push(tr),ft.push(Lt);else{const pr=Re.length-1;Re[pr]+=ut,Ke[pr].push(...tr),ft[pr].push(...Lt)}}return[Re,Ke,ft]}mergePunctuations(q,de,_e,ve,Re){const Ke=structuredClone(q),ft=structuredClone(de),mt=structuredClone(_e);let vt=Ke.length-2,ut=Ke.length-1;for(;vt>=0;)Ke[vt].startsWith(" ")&&ve.includes(Ke[vt].trim())?(Ke[ut]=Ke[vt]+Ke[ut],ft[ut]=(0,i.mergeArrays)(ft[vt],ft[ut]),mt[ut]=(0,i.mergeArrays)(mt[vt],mt[ut]),Ke[vt]="",ft[vt]=[],mt[vt]=[]):ut=vt,--vt;for(vt=0,ut=1;ut<Ke.length;)!Ke[vt].endsWith(" ")&&Re.includes(Ke[ut])?(Ke[vt]+=Ke[ut],ft[vt]=(0,i.mergeArrays)(ft[vt],ft[ut]),mt[vt]=(0,i.mergeArrays)(mt[vt],mt[ut]),Ke[ut]="",ft[ut]=[],mt[ut]=[]):vt=ut,++ut;return[Ke.filter(tr=>tr),ft.filter(tr=>tr.length>0),mt.filter(tr=>tr.length>0)]}}class xl extends Be{}class Sn extends Be{}class Ml extends Be{}class Tl extends Be{constructor(q,de){super(q,de),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(_e=>this.languageRegex.test(_e)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(q){if(q===null)return null;const[de,..._e]=q.trim().split(this.languageRegex);if(_e.length===0)return super._encode_text(de);if(_e.length===2){const[ve,Re]=_e;return this.supported_language_codes.includes(ve)||console.warn(`Unsupported language code "${ve}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),(0,i.mergeArrays)([ve],super._encode_text(Re))}}}class Sl extends Be{}class so extends Be{}class Ns extends Be{}class Ui extends Be{}class oo extends Be{}class Pl extends Be{constructor(q,de){super(q,de),this.decoder=new Rt({})}}class El extends Be{}class Uo extends Be{}class ao{static TOKENIZER_CLASS_MAPPING={T5Tokenizer:no,DistilBertTokenizer:Tn,CamembertTokenizer:Pi,DebertaTokenizer:sr,DebertaV2Tokenizer:kr,BertTokenizer:Nt,HerbertTokenizer:Pr,ConvBertTokenizer:Rn,RoFormerTokenizer:Lr,XLMTokenizer:Bi,ElectraTokenizer:zi,MobileBertTokenizer:wt,SqueezeBertTokenizer:Rr,AlbertTokenizer:bt,GPT2Tokenizer:Ei,BartTokenizer:io,MBartTokenizer:Wn,MBart50Tokenizer:vs,RobertaTokenizer:ri,WhisperTokenizer:mi,CodeGenTokenizer:xl,CLIPTokenizer:Sn,SiglipTokenizer:Ml,MarianTokenizer:Tl,BloomTokenizer:zo,NllbTokenizer:Gn,M2M100Tokenizer:_s,LlamaTokenizer:es,CodeLlamaTokenizer:ts,XLMRobertaTokenizer:Kn,MPNetTokenizer:Ci,FalconTokenizer:it,GPTNeoXTokenizer:nt,EsmTokenizer:At,Wav2Vec2CTCTokenizer:Sl,BlenderbotTokenizer:so,BlenderbotSmallTokenizer:Ns,SpeechT5Tokenizer:Ui,NougatTokenizer:oo,VitsTokenizer:Pl,Qwen2Tokenizer:vn,GemmaTokenizer:pi,Grok1Tokenizer:ys,CohereTokenizer:El,MgpstrTokenizer:Uo,PreTrainedTokenizer:Be};static async from_pretrained(q,{progress_callback:de=null,config:_e=null,cache_dir:ve=null,local_files_only:Re=!1,revision:Ke="main",legacy:ft=null}={}){const[mt,vt]=await d(q,{progress_callback:de,config:_e,cache_dir:ve,local_files_only:Re,revision:Ke,legacy:ft}),ut=vt.tokenizer_class?.replace(/Fast$/,"")??"PreTrainedTokenizer";let tr=this.TOKENIZER_CLASS_MAPPING[ut];return tr||(console.warn(`Unknown tokenizer class "${ut}", attempting to construct from base class.`),tr=Be),new tr(mt,vt)}}}),"./src/utils/audio.js":((e,t,r)=>{r.r(t),r.d(t,{RawAudio:()=>G,hamming:()=>h,hanning:()=>d,mel_filter_bank:()=>S,read_audio:()=>u,spectrogram:()=>A,window_function:()=>L});var n=r("./src/utils/hub.js"),i=r("./src/utils/maths.js"),s=r("./src/utils/core.js"),o=r("./src/env.js"),a=r("./src/utils/tensor.js"),l=r("?7992");async function u(z,K){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const J=await(await(0,n.getFile)(z)).arrayBuffer(),X=new AudioContext({sampleRate:K});typeof K>"u"&&console.warn(`No sampling rate provided, using default of ${X.sampleRate}Hz.`);const Q=await X.decodeAudioData(J);let W;if(Q.numberOfChannels===2){const oe=Math.sqrt(2),ce=Q.getChannelData(0),D=Q.getChannelData(1);W=new Float32Array(ce.length);for(let U=0;U<Q.length;++U)W[U]=oe*(ce[U]+D[U])/2}else W=Q.getChannelData(0);return W}function c(z,K){if(z<1)return new Float64Array;if(z===1)return new Float64Array([1]);const J=1-K,X=2*Math.PI/(z-1),Q=new Float64Array(z);for(let W=0;W<z;++W)Q[W]=K-J*Math.cos(W*X);return Q}function d(z){return c(z,.5)}function h(z){return c(z,.54)}const m={htk:z=>2595*Math.log10(1+z/700),kaldi:z=>1127*Math.log(1+z/700),slaney:(z,K=1e3,J=15,X=27/Math.log(6.4))=>z>=K?J+Math.log(z/K)*X:3*z/200};function g(z,K="htk"){const J=m[K];if(!J)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof z=="number"?J(z):z.map(X=>J(X))}const v={htk:z=>700*(10**(z/2595)-1),kaldi:z=>700*(Math.exp(z/1127)-1),slaney:(z,K=1e3,J=15,X=Math.log(6.4)/27)=>z>=J?K*Math.exp(X*(z-J)):200*z/3};function y(z,K="htk"){const J=v[K];if(!J)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof z=="number"?J(z):z.map(X=>J(X))}function x(z,K){const J=Float64Array.from({length:K.length-1},(oe,ce)=>K[ce+1]-K[ce]),X=Array.from({length:z.length},()=>new Array(K.length));for(let oe=0;oe<z.length;++oe){const ce=X[oe];for(let D=0;D<K.length;++D)ce[D]=K[D]-z[oe]}const Q=K.length-2,W=Array.from({length:Q},()=>new Array(z.length));for(let oe=0;oe<z.length;++oe){const ce=X[oe];for(let D=0;D<Q;++D){const U=-ce[D]/J[D],te=ce[D+2]/J[D+1];W[D][oe]=Math.max(0,Math.min(U,te))}}return W}function w(z,K,J){const X=(K-z)/(J-1);return Float64Array.from({length:J},(Q,W)=>z+X*W)}function S(z,K,J,X,Q,W=null,oe="htk",ce=!1){if(W!==null&&W!=="slaney")throw new Error('norm must be one of null or "slaney"');if(z<2)throw new Error(`Require num_frequency_bins: ${z} >= 2`);if(J>X)throw new Error(`Require min_frequency: ${J} <= max_frequency: ${X}`);const D=g(J,oe),U=g(X,oe),te=w(D,U,K+2);let ee=y(te,oe),pe;if(ce){const xe=Q/((z-1)*2);pe=g(Float64Array.from({length:z},(Ie,Pe)=>Pe*xe),oe),ee=te}else pe=w(0,Math.floor(Q/2),z);const Oe=x(pe,ee);if(W!==null&&W==="slaney")for(let xe=0;xe<K;++xe){const Ie=Oe[xe],Pe=2/(ee[xe+2]-ee[xe]);for(let he=0;he<z;++he)Ie[he]*=Pe}return Oe}function M(z,K,J){const X=new z.constructor(z.length+K+J),Q=z.length-1;for(let W=0;W<z.length;++W)X[K+W]=z[W];for(let W=1;W<=K;++W)X[K-W]=z[(0,s.calculateReflectOffset)(W,Q)];for(let W=1;W<=J;++W)X[Q+K+W]=z[(0,s.calculateReflectOffset)(Q-W,Q)];return X}function T(z,K,J,X,Q){if(J<=0)throw new Error("reference must be greater than zero");if(X<=0)throw new Error("min_value must be greater than zero");J=Math.max(X,J);const W=Math.log10(J);for(let oe=0;oe<z.length;++oe)z[oe]=K*Math.log10(Math.max(X,z[oe])-W);if(Q!==null){if(Q<=0)throw new Error("db_range must be greater than zero");const oe=(0,i.max)(z)[0]-Q;for(let ce=0;ce<z.length;++ce)z[ce]=Math.max(z[ce],oe)}return z}function P(z,K=1,J=1e-5,X=null){return T(z,20,K,J,X)}function E(z,K=1,J=1e-10,X=null){return T(z,10,K,J,X)}async function A(z,K,J,X,{fft_length:Q=null,power:W=1,center:oe=!0,pad_mode:ce="reflect",onesided:D=!0,preemphasis:U=null,preemphasis_htk_flavor:te=!0,mel_filters:ee=null,mel_floor:pe=1e-10,log_mel:Oe=null,reference:xe=1,min_value:Ie=1e-10,db_range:Pe=null,remove_dc_offset:he=null,min_num_frames:re=null,max_num_frames:ue=null,do_pad:ae=!0,transpose:Ce=!1}={}){const $e=K.length;if(Q===null&&(Q=J),J>Q)throw Error(`frame_length (${J}) may not be larger than fft_length (${Q})`);if($e!==J)throw new Error(`Length of the window (${$e}) must equal frame_length (${J})`);if(X<=0)throw new Error("hop_length must be greater than zero");if(W===null&&ee!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(!te)throw new Error("`preemphasis_htk_flavor=false` is not currently supported.");if(oe){if(ce!=="reflect")throw new Error(`pad_mode="${ce}" not implemented yet.`);const xt=Math.floor((Q-1)/2)+1;z=M(z,xt,xt)}let Ne=Math.floor(1+Math.floor((z.length-J)/X));re!==null&&Ne<re&&(Ne=re);const Le=D?Math.floor(Q/2)+1:Q;let Ve=Ne,He=Ne;ue!==null&&(ue>Ne?ae&&(He=ue):He=Ve=ue);const Qe=new i.FFT(Q),et=new Float64Array(Q),ot=new Float64Array(Qe.outputBufferSize),Xe=new Float32Array(Le*He);for(let xt=0;xt<Ve;++xt){const gt=xt*X,We=Math.min(z.length-gt,J);We!==J&&et.fill(0,0,J);for(let Ze=0;Ze<We;++Ze)et[Ze]=z[gt+Ze];if(he){let Ze=0;for(let Zt=0;Zt<We;++Zt)Ze+=et[Zt];const Pt=Ze/We;for(let Zt=0;Zt<We;++Zt)et[Zt]-=Pt}if(U!==null){for(let Ze=We-1;Ze>=1;--Ze)et[Ze]-=U*et[Ze-1];et[0]*=1-U}for(let Ze=0;Ze<K.length;++Ze)et[Ze]*=K[Ze];Qe.realTransform(ot,et);for(let Ze=0;Ze<Le;++Ze){const Pt=Ze<<1;Xe[Ze*He+xt]=ot[Pt]**2+ot[Pt+1]**2}}if(W!==null&&W!==2){const xt=W/2;for(let gt=0;gt<Xe.length;++gt)Xe[gt]**=xt}const lt=ee.length;let _t=await(0,a.matmul)(new a.Tensor("float32",ee.flat(),[lt,Le]),new a.Tensor("float32",Xe,[Le,He]));Ce&&(_t=_t.transpose(1,0));const dt=_t.data;for(let xt=0;xt<dt.length;++xt)dt[xt]=Math.max(pe,dt[xt]);if(W!==null&&Oe!==null){const xt=Math.min(dt.length,Ve*lt);switch(Oe){case"log":for(let gt=0;gt<xt;++gt)dt[gt]=Math.log(dt[gt]);break;case"log10":for(let gt=0;gt<xt;++gt)dt[gt]=Math.log10(dt[gt]);break;case"dB":if(W===1)P(dt,xe,Ie,Pe);else if(W===2)E(dt,xe,Ie,Pe);else throw new Error(`Cannot use log_mel option '${Oe}' with power ${W}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${Oe}'`)}}return _t}function L(z,K,{periodic:J=!0,frame_length:X=null,center:Q=!0}={}){const W=J?z+1:z;let oe;switch(K){case"boxcar":oe=new Float64Array(W).fill(1);break;case"hann":case"hann_window":oe=d(W);break;case"hamming":oe=h(W);break;case"povey":oe=d(W).map(ce=>Math.pow(ce,.85));break;default:throw new Error(`Unknown window type ${K}.`)}if(J&&(oe=oe.subarray(0,z)),X===null)return oe;if(z>X)throw new Error(`Length of the window (${z}) may not be larger than frame_length (${X})`);return oe}function B(z,K){let J=44;const X=new ArrayBuffer(J+z.length*4),Q=new DataView(X);V(Q,0,"RIFF"),Q.setUint32(4,36+z.length*4,!0),V(Q,8,"WAVE"),V(Q,12,"fmt "),Q.setUint32(16,16,!0),Q.setUint16(20,3,!0),Q.setUint16(22,1,!0),Q.setUint32(24,K,!0),Q.setUint32(28,K*4,!0),Q.setUint16(32,4,!0),Q.setUint16(34,32,!0),V(Q,36,"data"),Q.setUint32(40,z.length*4,!0);for(let W=0;W<z.length;++W,J+=4)Q.setFloat32(J,z[W],!0);return X}function V(z,K,J){for(let X=0;X<J.length;++X)z.setUint8(K+X,J.charCodeAt(X))}class G{constructor(K,J){this.audio=K,this.sampling_rate=J}toWav(){return B(this.audio,this.sampling_rate)}toBlob(){const K=this.toWav();return new Blob([K],{type:"audio/wav"})}async save(K){let J;if(o.apis.IS_BROWSER_ENV){if(o.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save a file from a Web Worker.");J=s.saveBlob}else if(o.apis.IS_FS_AVAILABLE)J=async(X,Q)=>{let W=await Q.arrayBuffer();l.writeFileSync(X,Buffer.from(W))};else throw new Error("Unable to save because filesystem is disabled in this environment.");await J(K,this.toBlob())}}}),"./src/utils/constants.js":((e,t,r)=>{r.r(t),r.d(t,{CHAT_TEMPLATE_NAME:()=>l,CONFIG_NAME:()=>i,FEATURE_EXTRACTOR_NAME:()=>s,GENERATION_CONFIG_NAME:()=>u,GITHUB_ISSUE_URL:()=>n,IMAGE_PROCESSOR_NAME:()=>o,PROCESSOR_NAME:()=>a});const n="https://github.com/huggingface/transformers.js/issues/new/choose",i="config.json",s="preprocessor_config.json",o=s,a="processor_config.json",l="chat_template.jinja",u="generation_config.json"}),"./src/utils/core.js":((e,t,r)=>{r.r(t),r.d(t,{calculateDimensions:()=>u,calculateReflectOffset:()=>m,count:()=>x,dispatchCallback:()=>n,escapeRegExp:()=>s,isIntegralNumber:()=>a,isNullishDimension:()=>l,isTypedArray:()=>o,len:()=>y,mergeArrays:()=>d,pick:()=>v,pop:()=>c,product:()=>h,reverseDictionary:()=>i,saveBlob:()=>g});function n(w,S){w&&w(S)}function i(w){return Object.fromEntries(Object.entries(w).map(([S,M])=>[M,S]))}function s(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(w){return w?.prototype?.__proto__?.constructor?.name==="TypedArray"}function a(w){return Number.isInteger(w)||typeof w=="bigint"}function l(w){return w==null||w===-1}function u(w){const S=[];let M=w;for(;Array.isArray(M);)S.push(M.length),M=M[0];return S}function c(w,S,M=void 0){const T=w[S];if(T!==void 0)return delete w[S],T;if(M===void 0)throw Error(`Key ${S} does not exist in object.`);return M}function d(...w){return Array.prototype.concat.apply([],w)}function h(...w){return w.reduce((S,M)=>S.flatMap(T=>M.map(P=>[T,P])))}function m(w,S){return Math.abs((w+S)%(2*S)-S)}function g(w,S){const M=URL.createObjectURL(S),T=document.createElement("a");T.href=M,T.download=w,T.click(),T.remove(),URL.revokeObjectURL(M)}function v(w,S){return Object.assign({},...S.map(M=>{if(w[M]!==void 0)return{[M]:w[M]}}))}function y(w){let S=0;for(const M of w)++S;return S}function x(w,S){let M=0;for(const T of w)T===S&&++M;return M}}),"./src/utils/data-structures.js":((e,t,r)=>{r.r(t),r.d(t,{CharTrie:()=>i,DictionarySplitter:()=>l,LRUCache:()=>u,PriorityQueue:()=>n,TokenLattice:()=>o});class n{constructor(d=(m,g)=>m>g,h=1/0){this._heap=[],this._comparator=d,this._maxSize=h}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...d){return this.extend(d)}extend(d){for(const h of d)if(this.size<this._maxSize)this._heap.push(h),this._siftUp();else{const m=this._smallest();this._comparator(h,this._heap[m])&&(this._heap[m]=h,this._siftUpFrom(m))}return this.size}pop(){const d=this.peek(),h=this.size-1;return h>0&&this._swap(0,h),this._heap.pop(),this._siftDown(),d}replace(d){const h=this.peek();return this._heap[0]=d,this._siftDown(),h}_parent(d){return(d+1>>>1)-1}_left(d){return(d<<1)+1}_right(d){return d+1<<1}_greater(d,h){return this._comparator(this._heap[d],this._heap[h])}_swap(d,h){const m=this._heap[d];this._heap[d]=this._heap[h],this._heap[h]=m}_siftUp(){this._siftUpFrom(this.size-1)}_siftUpFrom(d){for(;d>0&&this._greater(d,this._parent(d));)this._swap(d,this._parent(d)),d=this._parent(d)}_siftDown(){let d=0;for(;this._left(d)<this.size&&this._greater(this._left(d),d)||this._right(d)<this.size&&this._greater(this._right(d),d);){const h=this._right(d)<this.size&&this._greater(this._right(d),this._left(d))?this._right(d):this._left(d);this._swap(d,h),d=h}}_smallest(){return 2**Math.floor(Math.log2(this.size))-1}}class i{constructor(){this.root=s.default()}extend(d){for(const h of d)this.push(h)}push(d){let h=this.root;for(const m of d){let g=h.children.get(m);g===void 0&&(g=s.default(),h.children.set(m,g)),h=g}h.isLeaf=!0}*commonPrefixSearch(d){let h=this.root;if(h===void 0)return;let m="";for(const g of d){if(m+=g,h=h.children.get(g),h===void 0)return;h.isLeaf&&(yield m)}}}class s{constructor(d,h){this.isLeaf=d,this.children=h}static default(){return new s(!1,new Map)}}class o{constructor(d,h,m){this.chars=Array.from(d),this.len=this.chars.length,this.bosTokenId=h,this.eosTokenId=m,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const g=new a(this.bosTokenId,0,0,0,0),v=new a(this.eosTokenId,1,this.len,0,0);this.nodes.push(g.clone()),this.nodes.push(v.clone()),this.beginNodes[this.len].push(v),this.endNodes[0].push(g)}insert(d,h,m,g){const v=this.nodes.length,y=new a(g,v,d,h,m);this.beginNodes[d].push(y),this.endNodes[d+h].push(y),this.nodes.push(y)}viterbi(){const d=this.len;let h=0;for(;h<=d;){if(this.beginNodes[h].length==0)return[];for(let x of this.beginNodes[h]){x.prev=null;let w=0,S=null;for(let M of this.endNodes[h]){const T=M.backtraceScore+x.score;(S===null||T>w)&&(S=M.clone(),w=T)}if(S!==null)x.prev=S,x.backtraceScore=w;else return[]}++h}const m=[],v=this.beginNodes[d][0].prev;if(v===null)return[];let y=v.clone();for(;y.prev!==null;)m.push(y.clone()),y=y.clone().prev.clone();return m.reverse(),m}piece(d){return this.chars.slice(d.pos,d.pos+d.length).join("")}tokens(){return this.viterbi().map(h=>this.piece(h))}tokenIds(){return this.viterbi().map(h=>h.tokenId)}}class a{constructor(d,h,m,g,v){this.tokenId=d,this.nodeId=h,this.pos=m,this.length=g,this.score=v,this.prev=null,this.backtraceScore=0}clone(){const d=new a(this.tokenId,this.nodeId,this.pos,this.length,this.score);return d.prev=this.prev,d.backtraceScore=this.backtraceScore,d}}class l{constructor(d){this.trie=this._buildTrie(d)}_buildTrie(d){const h=Object.create(null);for(const m of d){let g=h;for(let v=0;v<m.length;++v)g=g[m[v]]??=Object.create(null);g.end=m}return h}split(d){const h=[],m=d.length;let g=0,v=0;for(;v<m;){let y=this.trie,x=null,w=v;for(;w<m&&(y=y[d[w]]);)y.end&&(x=y.end),++w;x?(v>g&&h.push(d.slice(g,v)),h.push(x),v+=x.length,g=v):++v}return g<m&&h.push(d.slice(g)),h}}class u{constructor(d){this.capacity=d,this.cache=new Map}get(d){if(!this.cache.has(d))return;const h=this.cache.get(d);return this.cache.delete(d),this.cache.set(d,h),h}put(d,h){this.cache.has(d)&&this.cache.delete(d),this.cache.set(d,h),this.cache.size>this.capacity&&this.cache.delete(this.cache.keys().next().value)}clear(){this.cache.clear()}}}),"./src/utils/devices.js":((e,t,r)=>{r.r(t),r.d(t,{DEVICE_TYPES:()=>n});const n=Object.freeze({auto:"auto",gpu:"gpu",cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:"webnn","webnn-npu":"webnn-npu","webnn-gpu":"webnn-gpu","webnn-cpu":"webnn-cpu"})}),"./src/utils/dtypes.js":((e,t,r)=>{r.r(t),r.d(t,{DATA_TYPES:()=>o,DEFAULT_DEVICE_DTYPE_MAPPING:()=>a,DEFAULT_DTYPE_SUFFIX_MAPPING:()=>l,isWebGpuFp16Supported:()=>s});var n=r("./src/env.js"),i=r("./src/utils/devices.js");const s=(function(){let u;return async function(){if(u===void 0)if(!n.apis.IS_WEBGPU_AVAILABLE)u=!1;else try{u=(await navigator.gpu.requestAdapter()).features.has("shader-f16")}catch{u=!1}return u}})(),o=Object.freeze({auto:"auto",fp32:"fp32",fp16:"fp16",q8:"q8",int8:"int8",uint8:"uint8",q4:"q4",bnb4:"bnb4",q4f16:"q4f16"}),a=Object.freeze({[i.DEVICE_TYPES.wasm]:o.q8}),l=Object.freeze({[o.fp32]:"",[o.fp16]:"_fp16",[o.int8]:"_int8",[o.uint8]:"_uint8",[o.q8]:"_quantized",[o.q4]:"_q4",[o.q4f16]:"_q4f16",[o.bnb4]:"_bnb4"})}),"./src/utils/generic.js":((e,t,r)=>{r.r(t),r.d(t,{Callable:()=>n});const n=class{constructor(){let i=function(...s){return i._call(...s)};return Object.setPrototypeOf(i,new.target.prototype)}_call(...i){throw Error("Must implement _call method in subclass")}}}),"./src/utils/hub.js":((e,t,r)=>{r.r(t),r.d(t,{MAX_EXTERNAL_DATA_CHUNKS:()=>a,getFile:()=>m,getModelFile:()=>w,getModelJSON:()=>M,getModelText:()=>S});var n=r("?7992"),i=r("?5af5"),s=r("./src/env.js"),o=r("./src/utils/core.js");const a=100,l={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};class u{constructor(A){if(this.filePath=A,this.headers=new Headers,this.exists=n.existsSync(A),this.exists){this.status=200,this.statusText="OK";let L=n.statSync(A);this.headers.set("content-length",L.size.toString()),this.updateContentType();const B=n.createReadStream(A);this.body=new ReadableStream({start(V){B.on("data",G=>V.enqueue(G)),B.on("end",()=>V.close()),B.on("error",G=>V.error(G))},cancel(){B.destroy()}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const A=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",l[A]??"application/octet-stream")}clone(){let A=new u(this.filePath);return A.exists=this.exists,A.status=this.status,A.statusText=this.statusText,A.headers=new Headers(this.headers),A}async arrayBuffer(){return(await n.promises.readFile(this.filePath)).buffer}async blob(){const A=await n.promises.readFile(this.filePath);return new Blob([A],{type:this.headers.get("content-type")})}async text(){return await n.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function c(E,A=null,L=null){let B;try{B=new URL(E)}catch{return!1}return!(A&&!A.includes(B.protocol)||L&&!L.includes(B.hostname))}const d=/^(\b[\w\-.]+\b\/)?\b[\w\-.]{1,96}\b$/;function h(E){return!(!d.test(E)||E.includes("..")||E.includes("--")||E.endsWith(".git")||E.endsWith(".ipynb"))}async function m(E){if(s.env.useFS&&!c(E,["http:","https:","blob:"]))return new u(E instanceof URL?E.protocol==="file:"?E.pathname:E.toString():E);if(typeof process<"u"&&process?.release?.name==="node"){const A=!!oS?.TESTING_REMOTELY,L=s.env.version,B=new Headers;if(B.set("User-Agent",`transformers.js/${L}; is_ci/${A};`),c(E,["http:","https:"],["huggingface.co","hf.co"])){const G=oS?.HF_TOKEN??oS?.HF_ACCESS_TOKEN;G&&B.set("Authorization",`Bearer ${G}`)}return fetch(E,{headers:B})}else return fetch(E)}const g={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function v(E,A,L){if(!L)return null;const B=g[E]??`Error (${E}) occurred while trying to load file`;throw Error(`${B}: "${A}".`)}class y{constructor(A){this.path=A}async match(A){let L=i.join(this.path,A),B=new u(L);if(B.exists)return B}async put(A,L,B=void 0){let V=i.join(this.path,A);try{const G=L.headers.get("Content-Length"),z=parseInt(G??"0");let K=0;await n.promises.mkdir(i.dirname(V),{recursive:!0});const J=n.createWriteStream(V),X=L.body.getReader();for(;;){const{done:Q,value:W}=await X.read();if(Q)break;await new Promise((ce,D)=>{J.write(W,U=>{if(U){D(U);return}ce()})}),K+=W.length;const oe=z?K/z*100:0;B?.({progress:oe,loaded:K,total:z})}J.close()}catch(G){try{await n.promises.unlink(V)}catch{}throw G}}}async function x(E,...A){for(let L of A)try{let B=await E.match(L);if(B)return B}catch{continue}}async function w(E,A,L=!0,B={},V=!1){if(!s.env.allowLocalModels){if(B.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");if(!s.env.allowRemoteModels)throw Error("Invalid configuration detected: both local and remote models are disabled. Fix by setting `env.allowLocalModels` or `env.allowRemoteModels` to `true`.")}(0,o.dispatchCallback)(B.progress_callback,{status:"initiate",name:E,file:A});let G;if(!G&&s.env.useCustomCache){if(!s.env.customCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");if(!s.env.customCache.match||!s.env.customCache.put)throw new Error("`env.customCache` must be an object which implements the `match` and `put` functions of the Web Cache API. For more information, see https://developer.mozilla.org/en-US/docs/Web/API/Cache");G=s.env.customCache}if(!G&&s.env.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{G=await caches.open("transformers-cache")}catch(pe){console.warn("An error occurred while opening the browser cache:",pe)}}if(!G&&s.env.useFSCache){if(!s.apis.IS_FS_AVAILABLE)throw Error("File System Cache is not available in this environment.");G=new y(B.cache_dir??s.env.cacheDir)}const z=B.revision??"main",K=P(E,A),J=h(E),X=J?P(s.env.localModelPath,K):K,Q=P(s.env.remoteHost,s.env.remotePathTemplate.replaceAll("{model}",E).replaceAll("{revision}",encodeURIComponent(z)),A);let W;const oe=G instanceof y?z==="main"?K:P(E,z,A):Q;let ce=!1,D;G&&(D=await x(G,X,oe));const U=D!==void 0;if(D===void 0){if(s.env.allowLocalModels)if(c(K,["http:","https:"])){if(B.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${K}.`);if(!s.env.allowRemoteModels)throw new Error(`\`env.allowRemoteModels=false\`, but attempted to load a remote file from: ${K}.`)}else try{D=await m(X),W=X}catch(Oe){console.warn(`Unable to load from local path "${X}": "${Oe}"`)}if(D===void 0||D.status===404){if(B.local_files_only||!s.env.allowRemoteModels){if(L)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${X}".`);return null}if(!J)throw Error(`Local file missing at "${X}" and download aborted due to invalid model ID "${E}".`);if(D=await m(Q),D.status!==200)return v(D.status,Q,L);W=oe}ce=G&&typeof Response<"u"&&D instanceof Response&&D.status===200}(0,o.dispatchCallback)(B.progress_callback,{status:"download",name:E,file:A});let te;if(!(s.apis.IS_NODE_ENV&&V)){let pe;B.progress_callback?U&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(pe=new Uint8Array(await D.arrayBuffer()),(0,o.dispatchCallback)(B.progress_callback,{status:"progress",name:E,file:A,progress:100,loaded:pe.length,total:pe.length})):pe=await T(D,Oe=>{(0,o.dispatchCallback)(B.progress_callback,{status:"progress",name:E,file:A,...Oe})}):pe=new Uint8Array(await D.arrayBuffer()),te=pe}if(ce&&W&&await G.match(W)===void 0&&(te?await G.put(W,new Response(te,{headers:D.headers})).catch(pe=>{console.warn(`Unable to add response to browser cache: ${pe}.`)}):await G.put(W,D,B.progress_callback)),(0,o.dispatchCallback)(B.progress_callback,{status:"done",name:E,file:A}),te){if(!s.apis.IS_NODE_ENV&&V)throw new Error("Cannot return path in a browser environment.");return te}if(D instanceof u)return D.filePath;const ee=await G?.match(W);if(ee instanceof u)return ee.filePath;if(ee instanceof Response)return new Uint8Array(await ee.arrayBuffer());if(typeof ee=="string")return ee;throw new Error("Unable to get model file path or buffer.")}async function S(E,A,L=!0,B={}){const V=await w(E,A,L,B,!1);return V===null?null:new TextDecoder("utf-8").decode(V)}async function M(E,A,L=!0,B={}){const V=await S(E,A,L,B);return V===null?{}:JSON.parse(V)}async function T(E,A){const L=E.headers.get("Content-Length");L===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let B=parseInt(L??"0"),V=new Uint8Array(B),G=0;const z=E.body.getReader();async function K(){const{done:J,value:X}=await z.read();if(J)return;const Q=G+X.length;if(Q>B){B=Q;const oe=new Uint8Array(B);oe.set(V),V=oe}V.set(X,G),G=Q;const W=G/B*100;return A({progress:W,loaded:G,total:B}),K()}return await K(),V}function P(...E){return E=E.map((A,L)=>(L&&(A=A.replace(new RegExp("^/"),"")),L!==E.length-1&&(A=A.replace(new RegExp("/$"),"")),A)),E.join("/")}}),"./src/utils/image.js":((e,t,r)=>{r.r(t),r.d(t,{RawImage:()=>g,load_image:()=>v});var n=r("./src/utils/core.js"),i=r("./src/utils/hub.js"),s=r("./src/env.js"),o=r("./src/utils/tensor.js"),a=r("?2b25");let l,u,c;const d=s.apis.IS_BROWSER_ENV||s.apis.IS_WEBWORKER_ENV;if(d)l=(y,x)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(y,x)},c=self.createImageBitmap,u=self.ImageData;else if(a)c=async y=>{const w=(await y.metadata()).channels,{data:S,info:M}=await y.rotate().raw().toBuffer({resolveWithObject:!0}),T=new g(new Uint8ClampedArray(S),M.width,M.height,M.channels);return w!==void 0&&w!==M.channels&&T.convert(w),T};else throw new Error("Unable to load image processing library.");const h={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},m=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class g{constructor(x,w,S,M){this.data=x,this.width=w,this.height=S,this.channels=M}get size(){return[this.width,this.height]}static async read(x){if(x instanceof g)return x;if(typeof x=="string"||x instanceof URL)return await this.fromURL(x);if(x instanceof Blob)return await this.fromBlob(x);if(typeof HTMLCanvasElement<"u"&&x instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&x instanceof OffscreenCanvas)return this.fromCanvas(x);throw new Error(`Unsupported input type: ${typeof x}`)}static fromCanvas(x){if(!d)throw new Error("fromCanvas() is only supported in browser environments.");const S=x.getContext("2d").getImageData(0,0,x.width,x.height).data;return new g(S,x.width,x.height,4)}static async fromURL(x){const w=await(0,i.getFile)(x);if(w.status!==200)throw new Error(`Unable to read image from "${x}" (${w.status} ${w.statusText})`);const S=await w.blob();return this.fromBlob(S)}static async fromBlob(x){if(d){const w=await c(x),S=l(w.width,w.height).getContext("2d");return S.drawImage(w,0,0),new this(S.getImageData(0,0,w.width,w.height).data,w.width,w.height,4)}else{const w=a(await x.arrayBuffer());return await c(w)}}static fromTensor(x,w="CHW"){if(x.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${x.dims.length} dimensions.`);if(w==="CHW")x=x.transpose(1,2,0);else if(w!=="HWC")throw new Error(`Unsupported channel format: ${w}`);if(!(x.data instanceof Uint8ClampedArray||x.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${x.type}`);switch(x.dims[2]){case 1:case 2:case 3:case 4:return new g(x.data,x.dims[1],x.dims[0],x.dims[2]);default:throw new Error(`Unsupported number of channels: ${x.dims[2]}`)}}grayscale(){if(this.channels===1)return this;const x=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let w=0,S=0;w<this.data.length;w+=this.channels){const M=this.data[w],T=this.data[w+1],P=this.data[w+2];x[S++]=Math.round(.2989*M+.587*T+.114*P)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(x,this.width,this.height,1)}rgb(){if(this.channels===3)return this;const x=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let w=0,S=0;w<this.data.length;++w)x[S++]=this.data[w],x[S++]=this.data[w],x[S++]=this.data[w];break;case 4:for(let w=0,S=0;w<this.data.length;w+=4)x[S++]=this.data[w],x[S++]=this.data[w+1],x[S++]=this.data[w+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(x,this.width,this.height,3)}rgba(){if(this.channels===4)return this;const x=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let w=0,S=0;w<this.data.length;++w)x[S++]=this.data[w],x[S++]=this.data[w],x[S++]=this.data[w],x[S++]=255;break;case 3:for(let w=0,S=0;w<this.data.length;w+=3)x[S++]=this.data[w],x[S++]=this.data[w+1],x[S++]=this.data[w+2],x[S++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(x,this.width,this.height,4)}putAlpha(x){if(x.width!==this.width||x.height!==this.height)throw new Error(`Expected mask size to be ${this.width}x${this.height}, but got ${x.width}x${x.height}`);if(x.channels!==1)throw new Error(`Expected mask to have 1 channel, but got ${x.channels}`);const w=this.data,S=x.data,M=this.width*this.height;if(this.channels===3){const T=new Uint8ClampedArray(M*4);for(let P=0,E=0,A=0;P<M;++P)T[A++]=w[E++],T[A++]=w[E++],T[A++]=w[E++],T[A++]=S[P];return this._update(T,this.width,this.height,4)}else if(this.channels===4){for(let T=0;T<M;++T)w[4*T+3]=S[T];return this}throw new Error(`Expected image to have 3 or 4 channels, but got ${this.channels}`)}async resize(x,w,{resample:S=2}={}){if(this.width===x&&this.height===w)return this;let M=h[S]??S;const T=(0,n.isNullishDimension)(x),P=(0,n.isNullishDimension)(w);if(T&&P)return this;if(T?x=w/this.height*this.width:P&&(w=x/this.width*this.height),d){const E=this.channels,A=this.toCanvas(),L=l(x,w).getContext("2d");return L.drawImage(A,0,0,x,w),new g(L.getImageData(0,0,x,w).data,x,w,4).convert(E)}else{let E=this.toSharp();switch(M){case"box":case"hamming":(M==="box"||M==="hamming")&&(console.warn(`Resampling method ${M} is not yet supported. Using bilinear instead.`),M="bilinear");case"nearest":case"bilinear":case"bicubic":E=E.affine([x/this.width,0,0,w/this.height],{interpolator:M});break;case"lanczos":E=E.resize({width:x,height:w,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${M} is not supported.`)}return await c(E)}}async pad([x,w,S,M]){if(x=Math.max(x,0),w=Math.max(w,0),S=Math.max(S,0),M=Math.max(M,0),x===0&&w===0&&S===0&&M===0)return this;if(d){const T=this.channels,P=this.toCanvas(),E=this.width+x+w,A=this.height+S+M,L=l(E,A).getContext("2d");return L.drawImage(P,0,0,this.width,this.height,x,S,this.width,this.height),new g(L.getImageData(0,0,E,A).data,E,A,4).convert(T)}else{const T=this.toSharp().extend({left:x,right:w,top:S,bottom:M});return await c(T)}}async crop([x,w,S,M]){if(x=Math.max(x,0),w=Math.max(w,0),S=Math.min(S,this.width-1),M=Math.min(M,this.height-1),x===0&&w===0&&S===this.width-1&&M===this.height-1)return this;const T=S-x+1,P=M-w+1;if(d){const E=this.channels,A=this.toCanvas(),L=l(T,P).getContext("2d");return L.drawImage(A,x,w,T,P,0,0,T,P),new g(L.getImageData(0,0,T,P).data,T,P,4).convert(E)}else{const E=this.toSharp().extract({left:x,top:w,width:T,height:P});return await c(E)}}async center_crop(x,w){if(this.width===x&&this.height===w)return this;const S=(this.width-x)/2,M=(this.height-w)/2;if(d){const T=this.channels,P=this.toCanvas(),E=l(x,w).getContext("2d");let A=0,L=0,B=0,V=0;return S>=0?A=S:B=-S,M>=0?L=M:V=-M,E.drawImage(P,A,L,x,w,B,V,x,w),new g(E.getImageData(0,0,x,w).data,x,w,4).convert(T)}else{let T=this.toSharp();if(S>=0&&M>=0)T=T.extract({left:Math.floor(S),top:Math.floor(M),width:x,height:w});else if(S<=0&&M<=0){const P=Math.floor(-M),E=Math.floor(-S);T=T.extend({top:P,left:E,right:x-this.width-E,bottom:w-this.height-P})}else{let P=[0,0],E=0;M<0?(P[0]=Math.floor(-M),P[1]=w-this.height-P[0]):E=Math.floor(M);let A=[0,0],L=0;S<0?(A[0]=Math.floor(-S),A[1]=x-this.width-A[0]):L=Math.floor(S),T=T.extend({top:P[0],bottom:P[1],left:A[0],right:A[1]}).extract({left:L,top:E,width:x,height:w})}return await c(T)}}async toBlob(x="image/png",w=1){if(!d)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:x,quality:w})}toTensor(x="CHW"){let w=new o.Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(x!=="HWC")if(x==="CHW")w=w.permute(2,0,1);else throw new Error(`Unsupported channel format: ${x}`);return w}toCanvas(){if(!d)throw new Error("toCanvas() is only supported in browser environments.");const x=this.clone().rgba(),w=l(x.width,x.height),S=new u(x.data,x.width,x.height);return w.getContext("2d").putImageData(S,0,0),w}split(){const{data:x,width:w,height:S,channels:M}=this,T=x.constructor,P=x.length/M,E=Array.from({length:M},()=>new T(P));for(let A=0;A<P;++A){const L=M*A;for(let B=0;B<M;++B)E[B][A]=x[L+B]}return E.map(A=>new g(A,w,S,1))}_update(x,w,S,M=null){return this.data=x,this.width=w,this.height=S,M!==null&&(this.channels=M),this}clone(){return new g(this.data.slice(),this.width,this.height,this.channels)}convert(x){if(this.channels===x)return this;switch(x){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(x){if(d){if(s.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const w=x.split(".").pop().toLowerCase(),S=m.get(w)??"image/png",M=await this.toBlob(S);(0,n.saveBlob)(x,M)}else{if(s.apis.IS_FS_AVAILABLE)return await this.toSharp().toFile(x);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(d)throw new Error("toSharp() is only supported in server-side environments.");return a(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}const v=g.read.bind(g)}),"./src/utils/maths.js":((e,t,r)=>{r.r(t),r.d(t,{FFT:()=>v,bankers_round:()=>w,cos_sim:()=>l,dot:()=>a,dynamic_time_warping:()=>S,interpolate_data:()=>n,log_softmax:()=>o,magnitude:()=>u,max:()=>d,medianFilter:()=>y,min:()=>c,permute_data:()=>i,round:()=>x,softmax:()=>s});function n(M,[T,P,E],[A,L],B="bilinear",V=!1){const G=L/E,z=A/P,K=new M.constructor(A*L*T),J=P*E,X=A*L;for(let Q=0;Q<A;++Q)for(let W=0;W<L;++W){const oe=Q*L+W,ce=(W+.5)/G-.5,D=(Q+.5)/z-.5;let U=Math.floor(ce),te=Math.floor(D);const ee=Math.min(U+1,E-1),pe=Math.min(te+1,P-1);U=Math.max(U,0),te=Math.max(te,0);const Oe=ce-U,xe=D-te,Ie=(1-Oe)*(1-xe),Pe=Oe*(1-xe),he=(1-Oe)*xe,re=Oe*xe,ue=te*E,ae=pe*E,Ce=ue+U,$e=ue+ee,Ne=ae+U,Le=ae+ee;for(let Ve=0;Ve<T;++Ve){const He=Ve*J;K[Ve*X+oe]=Ie*M[He+Ce]+Pe*M[He+$e]+he*M[He+Ne]+re*M[He+Le]}}return K}function i(M,T,P){const E=new Array(P.length),A=new Array(P.length);for(let V=P.length-1,G=1;V>=0;--V)A[V]=G,E[V]=T[P[V]],G*=E[V];const L=P.map((V,G)=>A[P.indexOf(G)]),B=new M.constructor(M.length);for(let V=0;V<M.length;++V){let G=0;for(let z=T.length-1,K=V;z>=0;--z)G+=K%T[z]*L[z],K=Math.floor(K/T[z]);B[G]=M[V]}return[B,E]}function s(M){const T=d(M)[0],P=M.map(L=>Math.exp(L-T)),E=P.reduce((L,B)=>L+B,0);return P.map(L=>L/E)}function o(M){const T=d(M)[0];let P=0;for(let L=0;L<M.length;++L)P+=Math.exp(M[L]-T);const E=Math.log(P);return M.map(L=>L-T-E)}function a(M,T){let P=0;for(let E=0;E<M.length;++E)P+=M[E]*T[E];return P}function l(M,T){const P=a(M,T),E=u(M),A=u(T);return P/(E*A)}function u(M){return Math.sqrt(M.reduce((T,P)=>T+P*P,0))}function c(M){if(M.length===0)throw Error("Array must not be empty");let T=M[0],P=0;for(let E=1;E<M.length;++E)M[E]<T&&(T=M[E],P=E);return[T,P]}function d(M){if(M.length===0)throw Error("Array must not be empty");let T=M[0],P=0;for(let E=1;E<M.length;++E)M[E]>T&&(T=M[E],P=E);return[T,P]}function h(M){return M>0&&(M&M-1)===0}class m{constructor(T){if(this.size=T|0,this.size<=1||!h(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=T<<1,this.table=new Float64Array(this.size*2);for(let E=0;E<this.table.length;E+=2){const A=Math.PI*E/this.size;this.table[E]=Math.cos(A),this.table[E+1]=-Math.sin(A)}let P=0;for(let E=1;this.size>E;E<<=1)++P;this._width=P%2===0?P-1:P,this._bitrev=new Int32Array(1<<this._width);for(let E=0;E<this._bitrev.length;++E){this._bitrev[E]=0;for(let A=0;A<this._width;A+=2){const L=this._width-A-2;this._bitrev[E]|=(E>>>A&3)<<L}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(T,P){const E=P||new Array(T.length>>>1);for(let A=0;A<T.length;A+=2)E[A>>>1]=T[A];return E}toComplexArray(T,P){const E=P||this.createComplexArray();for(let A=0;A<E.length;A+=2)E[A]=T[A>>>1],E[A+1]=0;return E}transform(T,P){if(T===P)throw new Error("Input and output buffers must be different");this._transform4(T,P,1)}realTransform(T,P){if(T===P)throw new Error("Input and output buffers must be different");this._realTransform4(T,P,1)}inverseTransform(T,P){if(T===P)throw new Error("Input and output buffers must be different");this._transform4(T,P,-1);for(let E=0;E<T.length;++E)T[E]/=this.size}_transform4(T,P,E){const A=this._csize;let B=1<<this._width,V=A/B<<1,G,z;const K=this._bitrev;if(V===4)for(G=0,z=0;G<A;G+=V,++z){const X=K[z];this._singleTransform2(P,T,G,X,B)}else for(G=0,z=0;G<A;G+=V,++z){const X=K[z];this._singleTransform4(P,T,G,X,B,E)}const J=this.table;for(B>>=2;B>=2;B>>=2){V=A/B<<1;const X=V>>>2;for(G=0;G<A;G+=V){const Q=G+X-1;for(let W=G,oe=0;W<Q;W+=2,oe+=B){const ce=W,D=ce+X,U=D+X,te=U+X,ee=T[ce],pe=T[ce+1],Oe=T[D],xe=T[D+1],Ie=T[U],Pe=T[U+1],he=T[te],re=T[te+1],ue=J[oe],ae=E*J[oe+1],Ce=Oe*ue-xe*ae,$e=Oe*ae+xe*ue,Ne=J[2*oe],Le=E*J[2*oe+1],Ve=Ie*Ne-Pe*Le,He=Ie*Le+Pe*Ne,Qe=J[3*oe],et=E*J[3*oe+1],ot=he*Qe-re*et,Xe=he*et+re*Qe,lt=ee+Ve,_t=pe+He,dt=ee-Ve,xt=pe-He,gt=Ce+ot,We=$e+Xe,Ze=E*(Ce-ot),Pt=E*($e-Xe);T[ce]=lt+gt,T[ce+1]=_t+We,T[D]=dt+Pt,T[D+1]=xt-Ze,T[U]=lt-gt,T[U+1]=_t-We,T[te]=dt-Pt,T[te+1]=xt+Ze}}}}_singleTransform2(T,P,E,A,L){const B=T[A],V=T[A+1],G=T[A+L],z=T[A+L+1];P[E]=B+G,P[E+1]=V+z,P[E+2]=B-G,P[E+3]=V-z}_singleTransform4(T,P,E,A,L,B){const V=L*2,G=L*3,z=T[A],K=T[A+1],J=T[A+L],X=T[A+L+1],Q=T[A+V],W=T[A+V+1],oe=T[A+G],ce=T[A+G+1],D=z+Q,U=K+W,te=z-Q,ee=K-W,pe=J+oe,Oe=X+ce,xe=B*(J-oe),Ie=B*(X-ce);P[E]=D+pe,P[E+1]=U+Oe,P[E+2]=te+Ie,P[E+3]=ee-xe,P[E+4]=D-pe,P[E+5]=U-Oe,P[E+6]=te-Ie,P[E+7]=ee+xe}_realTransform4(T,P,E){const A=this._csize;let B=1<<this._width,V=A/B<<1,G,z;const K=this._bitrev;if(V===4)for(G=0,z=0;G<A;G+=V,++z){const Q=K[z];this._singleRealTransform2(P,T,G,Q>>>1,B>>>1)}else for(G=0,z=0;G<A;G+=V,++z){const Q=K[z];this._singleRealTransform4(P,T,G,Q>>>1,B>>>1,E)}const J=this.table;for(B>>=2;B>=2;B>>=2){V=A/B<<1;const Q=V>>>1,W=Q>>>1,oe=W>>>1;for(G=0;G<A;G+=V)for(let ce=0,D=0;ce<=oe;ce+=2,D+=B){const U=G+ce,te=U+W,ee=te+W,pe=ee+W,Oe=T[U],xe=T[U+1],Ie=T[te],Pe=T[te+1],he=T[ee],re=T[ee+1],ue=T[pe],ae=T[pe+1],Ce=Oe,$e=xe,Ne=J[D],Le=E*J[D+1],Ve=Ie*Ne-Pe*Le,He=Ie*Le+Pe*Ne,Qe=J[2*D],et=E*J[2*D+1],ot=he*Qe-re*et,Xe=he*et+re*Qe,lt=J[3*D],_t=E*J[3*D+1],dt=ue*lt-ae*_t,xt=ue*_t+ae*lt,gt=Ce+ot,We=$e+Xe,Ze=Ce-ot,Pt=$e-Xe,Zt=Ve+dt,Rt=He+xt,Kr=E*(Ve-dt),gn=E*(He-xt);if(T[U]=gt+Zt,T[U+1]=We+Rt,T[te]=Ze+gn,T[te+1]=Pt-Kr,ce===0){T[ee]=gt-Zt,T[ee+1]=We-Rt;continue}if(ce===oe)continue;const jt=G+W-ce,hi=G+Q-ce;T[jt]=Ze-E*gn,T[jt+1]=-Pt-E*Kr,T[hi]=gt-E*Zt,T[hi+1]=-We+E*Rt}}const X=A>>>1;for(let Q=2;Q<X;Q+=2)T[A-Q]=T[Q],T[A-Q+1]=-T[Q+1]}_singleRealTransform2(T,P,E,A,L){const B=T[A],V=T[A+L];P[E]=B+V,P[E+1]=0,P[E+2]=B-V,P[E+3]=0}_singleRealTransform4(T,P,E,A,L,B){const V=L*2,G=L*3,z=T[A],K=T[A+L],J=T[A+V],X=T[A+G],Q=z+J,W=z-J,oe=K+X,ce=B*(K-X);P[E]=Q+oe,P[E+1]=0,P[E+2]=W,P[E+3]=-ce,P[E+4]=Q-oe,P[E+5]=0,P[E+6]=W,P[E+7]=ce}}class g{constructor(T){const P=2*(T-1),E=2*(2*T-1),A=2**Math.ceil(Math.log2(E));this.bufferSize=A,this._a=P;const L=new Float64Array(E),B=new Float64Array(A);this._chirpBuffer=new Float64Array(A),this._buffer1=new Float64Array(A),this._buffer2=new Float64Array(A),this._outBuffer1=new Float64Array(A),this._outBuffer2=new Float64Array(A);const V=-2*Math.PI/T,G=Math.cos(V),z=Math.sin(V);for(let K=0;K<E>>1;++K){const J=(K+1-T)**2/2,X=Math.sqrt(G**2+z**2)**J,Q=J*Math.atan2(z,G),W=2*K;L[W]=X*Math.cos(Q),L[W+1]=X*Math.sin(Q),B[W]=L[W],B[W+1]=-L[W+1]}this._slicedChirpBuffer=L.subarray(P,E),this._f=new m(A>>1),this._f.transform(this._chirpBuffer,B)}_transform(T,P,E){const A=this._buffer1,L=this._buffer2,B=this._outBuffer1,V=this._outBuffer2,G=this._chirpBuffer,z=this._slicedChirpBuffer,K=this._a;if(E)for(let J=0;J<z.length;J+=2){const X=J+1,Q=J>>1,W=P[Q];A[J]=W*z[J],A[X]=W*z[X]}else for(let J=0;J<z.length;J+=2){const X=J+1;A[J]=P[J]*z[J]-P[X]*z[X],A[X]=P[J]*z[X]+P[X]*z[J]}this._f.transform(B,A);for(let J=0;J<G.length;J+=2){const X=J+1;L[J]=B[J]*G[J]-B[X]*G[X],L[X]=B[J]*G[X]+B[X]*G[J]}this._f.inverseTransform(V,L);for(let J=0;J<V.length;J+=2){const X=V[J+K],Q=V[J+K+1],W=z[J],oe=z[J+1];T[J]=X*W-Q*oe,T[J+1]=X*oe+Q*W}}transform(T,P){this._transform(T,P,!1)}realTransform(T,P){this._transform(T,P,!0)}}class v{constructor(T){this.fft_length=T,this.isPowerOfTwo=h(T),this.isPowerOfTwo?(this.fft=new m(T),this.outputBufferSize=2*T):(this.fft=new g(T),this.outputBufferSize=this.fft.bufferSize)}realTransform(T,P){this.fft.realTransform(T,P)}transform(T,P){this.fft.transform(T,P)}}function y(M,T){if(T%2===0||T<=0)throw new Error("Window size must be a positive odd number");const P=new M.constructor(M.length),E=new M.constructor(T),A=Math.floor(T/2);for(let L=0;L<M.length;++L){let B=0;for(let V=-A;V<=A;++V){let G=L+V;G<0?G=Math.abs(G):G>=M.length&&(G=2*(M.length-1)-G),E[B++]=M[G]}E.sort(),P[L]=E[A]}return P}function x(M,T){const P=Math.pow(10,T);return Math.round(M*P)/P}function w(M){const T=Math.round(M);return Math.abs(M)%1===.5?T%2===0?T:T-1:T}function S(M){const T=M.length,P=M[0].length,E=[T+1,P+1],A=Array.from({length:E[0]},()=>Array(E[1]).fill(1/0));A[0][0]=0;const L=Array.from({length:E[0]},()=>Array(E[1]).fill(-1));for(let K=1;K<E[1];++K)for(let J=1;J<E[0];++J){const X=A[J-1][K-1],Q=A[J-1][K],W=A[J][K-1];let oe,ce;X<Q&&X<W?(oe=X,ce=0):Q<X&&Q<W?(oe=Q,ce=1):(oe=W,ce=2),A[J][K]=M[J-1][K-1]+oe,L[J][K]=ce}for(let K=0;K<E[1];++K)L[0][K]=2;for(let K=0;K<E[0];++K)L[K][0]=1;let B=T,V=P,G=[],z=[];for(;B>0||V>0;)switch(G.push(B-1),z.push(V-1),L[B][V]){case 0:--B,--V;break;case 1:--B;break;case 2:--V;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${B}, ${V}]. Please file a bug report.`)}return G.reverse(),z.reverse(),[G,z]}}),"./src/utils/tensor.js":((e,t,r)=>{r.r(t),r.d(t,{DataTypeMap:()=>o,Tensor:()=>a,cat:()=>P,full:()=>z,full_like:()=>K,interpolate:()=>c,interpolate_4d:()=>d,layer_norm:()=>w,matmul:()=>h,mean:()=>B,mean_pooling:()=>x,ones:()=>J,ones_like:()=>X,permute:()=>u,quantize_embeddings:()=>ce,rand:()=>oe,rfft:()=>m,slice:()=>y,stack:()=>E,std_mean:()=>L,topk:()=>g,zeros:()=>Q,zeros_like:()=>W});var n=r("./src/utils/maths.js"),i=r("./src/backends/onnx.js"),s=r("./src/ops/registry.js");const o=Object.freeze({float32:Float32Array,float16:typeof Float16Array<"u"?Float16Array:Uint16Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array,uint4:Uint8Array,int4:Int8Array});class a{get dims(){return this.ort_tensor.dims}set dims(U){this.ort_tensor.dims=U}get type(){return this.ort_tensor.type}get data(){return this.ort_tensor.data}get size(){return this.ort_tensor.size}get location(){return this.ort_tensor.location}ort_tensor;constructor(...U){return(0,i.isONNXTensor)(U[0])?this.ort_tensor=U[0]:this.ort_tensor=new i.Tensor(U[0],U[1],U[2]),new Proxy(this,{get:(te,ee)=>{if(typeof ee=="string"){let pe=Number(ee);if(Number.isInteger(pe))return te._getitem(pe)}return te[ee]},set:(te,ee,pe)=>te[ee]=pe})}dispose(){this.ort_tensor.dispose()}*[Symbol.iterator](){const[U,...te]=this.dims;if(te.length>0){const ee=te.reduce((pe,Oe)=>pe*Oe);for(let pe=0;pe<U;++pe)yield this._subarray(pe,ee,te)}else yield*this.data}_getitem(U){const[te,...ee]=this.dims;if(U=T(U,te),ee.length>0){const pe=ee.reduce((Oe,xe)=>Oe*xe);return this._subarray(U,pe,ee)}else return new a(this.type,[this.data[U]],ee)}indexOf(U){const te=this.data;for(let ee=0;ee<te.length;++ee)if(te[ee]==U)return ee;return-1}_subarray(U,te,ee){const pe=U*te,Oe=(U+1)*te,xe="subarray"in this.data?this.data.subarray(pe,Oe):this.data.slice(pe,Oe);return new a(this.type,xe,ee)}item(){const U=this.data;if(U.length!==1)throw new Error(`a Tensor with ${U.length} elements cannot be converted to Scalar`);return U[0]}tolist(){return l(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){const U=this.data;for(let te=0;te<U.length;++te)U[te]=1/(1+Math.exp(-U[te]));return this}map(U){return this.clone().map_(U)}map_(U){const te=this.data;for(let ee=0;ee<te.length;++ee)te[ee]=U(te[ee],ee,te);return this}mul(U){return this.clone().mul_(U)}mul_(U){const te=this.data;for(let ee=0;ee<te.length;++ee)te[ee]*=U;return this}div(U){return this.clone().div_(U)}div_(U){const te=this.data;for(let ee=0;ee<te.length;++ee)te[ee]/=U;return this}add(U){return this.clone().add_(U)}add_(U){const te=this.data;for(let ee=0;ee<te.length;++ee)te[ee]+=U;return this}sub(U){return this.clone().sub_(U)}sub_(U){const te=this.data;for(let ee=0;ee<te.length;++ee)te[ee]-=U;return this}clone(){return new a(this.type,this.data.slice(),this.dims.slice())}slice(...U){const te=[],ee=[];for(let he=0;he<this.dims.length;++he){let re=U[he];if(re==null)ee.push([0,this.dims[he]]),te.push(this.dims[he]);else if(typeof re=="number")re=T(re,this.dims[he],he),ee.push([re,re+1]);else if(Array.isArray(re)&&re.length===2){let[ue,ae]=re;if(ue=ue===null?0:T(ue,this.dims[he],he,!1),ae=ae===null?this.dims[he]:T(ae,this.dims[he],he,!1),ue>ae)throw new Error(`Invalid slice: ${re}`);const Ce=[Math.max(ue,0),Math.min(ae,this.dims[he])];ee.push(Ce),te.push(Ce[1]-Ce[0])}else throw new Error(`Invalid slice: ${re}`)}const pe=ee.map(([he,re])=>re-he),Oe=pe.reduce((he,re)=>he*re),xe=this.data,Ie=new xe.constructor(Oe),Pe=this.stride();for(let he=0;he<Oe;++he){let re=0;for(let ue=pe.length-1,ae=he;ue>=0;--ue){const Ce=pe[ue];re+=(ae%Ce+ee[ue][0])*Pe[ue],ae=Math.floor(ae/Ce)}Ie[he]=xe[re]}return new a(this.type,Ie,te)}permute(...U){return u(this,U)}transpose(...U){return this.permute(...U)}sum(U=null,te=!1){return this.norm(1,U,te)}norm(U="fro",te=null,ee=!1){if(U==="fro")U=2;else if(typeof U=="string")throw Error(`Unsupported norm: ${U}`);const pe=this.data,Oe=(he,re)=>he+re**U;if(te===null){const he=pe.reduce(Oe,0)**(1/U);return new a(this.type,[he],[])}const[xe,Ie,Pe]=A(Oe,this,te,ee);if(U!==1)for(let he=0;he<Ie.length;++he)Ie[he]=Ie[he]**(1/U);return new a(xe,Ie,Pe)}normalize_(U=2,te=1){te=T(te,this.dims.length);const ee=this.norm(U,te,!0),pe=this.data,Oe=ee.data;for(let xe=0;xe<pe.length;++xe){let Ie=0;for(let Pe=this.dims.length-1,he=xe,re=1;Pe>=0;--Pe){const ue=this.dims[Pe];if(Pe!==te){const ae=he%ue;Ie+=ae*re,re*=this.dims[Pe]}he=Math.floor(he/ue)}pe[xe]/=Oe[Ie]}return this}normalize(U=2,te=1){return this.clone().normalize_(U,te)}stride(){return V(this.dims)}squeeze(U=null){return new a(this.type,this.data,S(this.dims,U))}squeeze_(U=null){return this.dims=S(this.dims,U),this}unsqueeze(U=null){return new a(this.type,this.data,M(this.dims,U))}unsqueeze_(U=null){return this.dims=M(this.dims,U),this}flatten_(U=0,te=-1){te=(te+this.dims.length)%this.dims.length;let ee=this.dims.slice(0,U),pe=this.dims.slice(U,te+1),Oe=this.dims.slice(te+1);return this.dims=[...ee,pe.reduce((xe,Ie)=>xe*Ie,1),...Oe],this}flatten(U=0,te=-1){return this.clone().flatten_(U,te)}view(...U){let te=-1;for(let pe=0;pe<U.length;++pe)if(U[pe]===-1){if(te!==-1)throw new Error("Only one dimension can be inferred");te=pe}const ee=this.data;if(te!==-1){const pe=U.reduce((Oe,xe,Ie)=>Ie!==te?Oe*xe:Oe,1);U[te]=ee.length/pe}return new a(this.type,ee,U)}neg_(){const U=this.data;for(let te=0;te<U.length;++te)U[te]=-U[te];return this}neg(){return this.clone().neg_()}gt(U){const te=new Uint8Array(this.data.length),ee=this.data;for(let pe=0;pe<ee.length;++pe)te[pe]=ee[pe]>U?1:0;return new a("bool",te,this.dims)}lt(U){const te=new Uint8Array(this.data.length),ee=this.data;for(let pe=0;pe<ee.length;++pe)te[pe]=ee[pe]<U?1:0;return new a("bool",te,this.dims)}clamp_(U,te){const ee=this.data;for(let pe=0;pe<ee.length;++pe)ee[pe]=Math.min(Math.max(ee[pe],U),te);return this}clamp(U,te){return this.clone().clamp_(U,te)}round_(){const U=this.data;for(let te=0;te<U.length;++te)U[te]=Math.round(U[te]);return this}round(){return this.clone().round_()}mean(U=null,te=!1){return B(this,U,te)}min(U=null,te=!1){if(U===null){const xe=(0,n.min)(this.data)[0];return new a(this.type,[xe],[])}const[ee,pe,Oe]=A((xe,Ie)=>Math.min(xe,Ie),this,U,te,1/0);return new a(ee,pe,Oe)}max(U=null,te=!1){if(U===null){const xe=(0,n.max)(this.data)[0];return new a(this.type,[xe],[])}const[ee,pe,Oe]=A((xe,Ie)=>Math.max(xe,Ie),this,U,te,-1/0);return new a(ee,pe,Oe)}argmin(U=null,te=!1){if(U!==null)throw new Error("`dim !== null` not yet implemented.");const ee=(0,n.min)(this.data)[1];return new a("int64",[BigInt(ee)],[])}argmax(U=null,te=!1){if(U!==null)throw new Error("`dim !== null` not yet implemented.");const ee=(0,n.max)(this.data)[1];return new a("int64",[BigInt(ee)],[])}to(U){if(this.type===U)return this;if(!o.hasOwnProperty(U))throw new Error(`Unsupported type: ${U}`);let te;const ee=["int64","uint64"].includes(this.type),pe=["int64","uint64"].includes(U);return ee&&!pe?te=Number:!ee&&pe&&(te=BigInt),new a(U,o[U].from(this.data,te),this.dims)}}function l(D,U){const te=D.length,ee=U.reduce((Oe,xe)=>Oe*xe);if(te!==ee)throw Error(`cannot reshape array of size ${te} into shape (${U})`);let pe=D;for(let Oe=U.length-1;Oe>=0;Oe--)pe=pe.reduce((xe,Ie)=>{let Pe=xe[xe.length-1];return Pe.length<U[Oe]?Pe.push(Ie):xe.push([Ie]),xe},[[]]);return pe[0]}function u(D,U){const[te,ee]=(0,n.permute_data)(D.data,D.dims,U);return new a(D.type,te,ee)}function c(D,[U,te],ee="bilinear",pe=!1){const Oe=D.dims.at(-3)??1,xe=D.dims.at(-2),Ie=D.dims.at(-1);let Pe=(0,n.interpolate_data)(D.data,[Oe,xe,Ie],[U,te],ee,pe);return new a(D.type,Pe,[Oe,U,te])}async function d(D,{size:U=null,mode:te="bilinear"}={}){if(D.dims.length!==4)throw new Error("`interpolate_4d` currently only supports 4D input.");if(!U)throw new Error("`interpolate_4d` requires a `size` argument.");let ee;if(U.length===2)ee=[...D.dims.slice(0,2),...U];else if(U.length===3)ee=[D.dims[0],...U];else if(U.length===4)ee=U;else throw new Error("`size` must be of length 2, 3, or 4.");let pe;if(te==="nearest")pe=await s.TensorOpRegistry.nearest_interpolate_4d;else if(te==="bilinear")pe=await s.TensorOpRegistry.bilinear_interpolate_4d;else if(te==="bicubic")pe=await s.TensorOpRegistry.bicubic_interpolate_4d;else throw new Error(`Unsupported mode: ${te}`);const Oe=new a("int64",new BigInt64Array(ee.map(BigInt)),[ee.length]);return await pe({x:D,s:Oe})}async function h(D,U){return await(await s.TensorOpRegistry.matmul)({a:D,b:U})}async function m(D,U){return await(await s.TensorOpRegistry.rfft)({x:D,a:U})}async function g(D,U){const te=await s.TensorOpRegistry.top_k;return U==null?U=D.dims.at(-1):U=Math.min(U,D.dims.at(-1)),await te({x:D,k:new a("int64",[BigInt(U)],[1])})}const v=D=>new a("int64",D,[D.length]);async function y(D,U,te,ee,pe){return await(await s.TensorOpRegistry.slice)({x:D,s:v(U),e:v(te),a:v(ee),t:v(pe??new Array(ee.length).fill(1))})}function x(D,U){const te=D.data,ee=U.data,pe=[D.dims[0],D.dims[2]],Oe=new te.constructor(pe[0]*pe[1]),[xe,Ie,Pe]=D.dims;let he=0;for(let re=0;re<xe;++re){const ue=re*Pe*Ie;for(let ae=0;ae<Pe;++ae){let Ce=0,$e=0;const Ne=re*Ie,Le=ue+ae;for(let He=0;He<Ie;++He){const Qe=Number(ee[Ne+He]);$e+=Qe,Ce+=te[Le+He*Pe]*Qe}const Ve=Ce/$e;Oe[he++]=Ve}}return new a(D.type,Oe,pe)}function w(D,U,{eps:te=1e-5}={}){if(D.dims.length!==2)throw new Error("`layer_norm` currently only supports 2D input.");const[ee,pe]=D.dims;if(U.length!==1&&U[0]!==pe)throw new Error("`normalized_shape` must be a 1D array with shape `[input.dims[1]]`.");const[Oe,xe]=L(D,1,0,!0),Ie=Oe.data,Pe=xe.data,he=D.data,re=new he.constructor(he.length);for(let ue=0;ue<ee;++ue){const ae=ue*pe;for(let Ce=0;Ce<pe;++Ce){const $e=ae+Ce;re[$e]=(he[$e]-Pe[ue])/(Ie[ue]+te)}}return new a(D.type,re,D.dims)}function S(D,U){return D=D.slice(),U===null?D=D.filter(te=>te!==1):typeof U=="number"?D[U]===1&&D.splice(U,1):Array.isArray(U)&&(D=D.filter((te,ee)=>te!==1||!U.includes(ee))),D}function M(D,U){return U=T(U,D.length+1),D=D.slice(),D.splice(U,0,1),D}function T(D,U,te=null,ee=!0){if(D<-U||D>=U){if(ee)throw new Error(`IndexError: index ${D} is out of bounds for dimension${te===null?"":" "+te} with size ${U}`);return D<-U?0:U}return D<0&&(D=(D%U+U)%U),D}function P(D,U=0){U=T(U,D[0].dims.length);const te=D[0].dims.slice();te[U]=D.reduce((xe,Ie)=>xe+Ie.dims[U],0);const ee=te.reduce((xe,Ie)=>xe*Ie,1),pe=new D[0].data.constructor(ee),Oe=D[0].type;if(U===0){let xe=0;for(const Ie of D){const Pe=Ie.data;pe.set(Pe,xe),xe+=Pe.length}}else{let xe=0;for(let Ie=0;Ie<D.length;++Ie){const{data:Pe,dims:he}=D[Ie];for(let re=0;re<Pe.length;++re){let ue=0;for(let ae=he.length-1,Ce=re,$e=1;ae>=0;--ae){const Ne=he[ae];let Le=Ce%Ne;ae===U&&(Le+=xe),ue+=Le*$e,$e*=te[ae],Ce=Math.floor(Ce/Ne)}pe[ue]=Pe[re]}xe+=he[U]}}return new a(Oe,pe,te)}function E(D,U=0){return P(D.map(te=>te.unsqueeze(U)),U)}function A(D,U,te=null,ee=!1,pe=null){const Oe=U.data,xe=U.dims;te=T(te,xe.length);const Ie=xe.slice();Ie[te]=1;const Pe=new Oe.constructor(Oe.length/xe[te]);pe!==null&&Pe.fill(pe);for(let he=0;he<Oe.length;++he){let re=0;for(let ue=xe.length-1,ae=he,Ce=1;ue>=0;--ue){const $e=xe[ue];if(ue!==te){const Ne=ae%$e;re+=Ne*Ce,Ce*=Ie[ue]}ae=Math.floor(ae/$e)}Pe[re]=D(Pe[re],Oe[he],he,re)}return ee||Ie.splice(te,1),[U.type,Pe,Ie]}function L(D,U=null,te=1,ee=!1){const pe=D.data,Oe=D.dims;if(U===null){const Ce=pe.reduce((Ve,He)=>Ve+He,0)/pe.length,$e=Math.sqrt(pe.reduce((Ve,He)=>Ve+(He-Ce)**2,0)/(pe.length-te)),Ne=new a(D.type,[Ce],[]);return[new a(D.type,[$e],[]),Ne]}U=T(U,Oe.length);const xe=B(D,U,ee),Ie=xe.data,[Pe,he,re]=A((ae,Ce,$e,Ne)=>ae+(Ce-Ie[Ne])**2,D,U,ee);for(let ae=0;ae<he.length;++ae)he[ae]=Math.sqrt(he[ae]/(Oe[U]-te));return[new a(Pe,he,re),xe]}function B(D,U=null,te=!1){const ee=D.dims,pe=D.data;if(U===null){const Pe=pe.reduce((he,re)=>he+re,0);return new a(D.type,[Pe/pe.length],[])}U=T(U,ee.length);const[Oe,xe,Ie]=A((Pe,he)=>Pe+he,D,U,te);if(ee[U]!==1)for(let Pe=0;Pe<xe.length;++Pe)xe[Pe]/=ee[U];return new a(Oe,xe,Ie)}function V(D){const U=new Array(D.length);for(let te=D.length-1,ee=1;te>=0;--te)U[te]=ee,ee*=D[te];return U}function G(D,U,te,ee){const pe=D.reduce((Oe,xe)=>Oe*xe,1);return new a(te,new ee(pe).fill(U),D)}function z(D,U){let te,ee;if(typeof U=="number")te="float32",ee=Float32Array;else if(typeof U=="bigint")te="int64",ee=BigInt64Array;else if(typeof U=="boolean")te="bool",ee=Uint8Array;else throw new Error(`Unsupported data type: ${typeof U}`);return G(D,U,te,ee)}function K(D,U){return z(D.dims,U)}function J(D){return G(D,1n,"int64",BigInt64Array)}function X(D){return J(D.dims)}function Q(D){return G(D,0n,"int64",BigInt64Array)}function W(D){return Q(D.dims)}function oe(D){const U=D.reduce((te,ee)=>te*ee,1);return new a("float32",Float32Array.from({length:U},()=>Math.random()),D)}function ce(D,U){if(D.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(D.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(U))throw new Error("The precision must be either 'binary' or 'ubinary'");const te=U==="binary",ee=te?"int8":"uint8",pe=te?Int8Array:Uint8Array,Oe=D.data,xe=new pe(Oe.length/8);for(let Ie=0;Ie<Oe.length;++Ie){const Pe=Oe[Ie]>0?1:0,he=Math.floor(Ie/8),re=Ie%8;xe[he]|=Pe<<7-re,te&&re===0&&(xe[he]-=128)}return new a(ee,xe,[D.dims[0],D.dims[1]/8])}}),"./src/utils/video.js":((e,t,r)=>{r.r(t),r.d(t,{RawVideo:()=>o,RawVideoFrame:()=>s,load_video:()=>a});var n=r("./src/utils/image.js"),i=r("./src/env.js");class s{constructor(u,c){this.image=u,this.timestamp=c}}class o{constructor(u,c){u.length>0&&u[0]instanceof n.RawImage&&(u=u.map((d,h)=>new s(d,(h+1)/(u.length+1)*c))),this.frames=u,this.duration=c}get width(){return this.frames[0].image.width}get height(){return this.frames[0].image.height}get fps(){return this.frames.length/this.duration}}async function a(l,{num_frames:u=null,fps:c=null}={}){if(!i.apis.IS_BROWSER_ENV)throw new Error("`load_video` is currently only supported in browser environments.");if(u==null&&c==null)throw new Error("Either num_frames or fps must be provided.");const d=[],h=document.createElement("video");if(h.crossOrigin="anonymous",h.muted=!0,typeof l=="string")h.src=l;else if(l instanceof Blob)h.src=URL.createObjectURL(l);else if(l instanceof HTMLVideoElement)h.src=l.src;else throw new Error("Invalid URL or video element provided.");if(await new Promise(S=>h.onloadedmetadata=S),h.seekable.start(0)===h.seekable.end(0)){const M=await(await fetch(h.src)).blob();h.src=URL.createObjectURL(M),await new Promise(T=>h.onloadedmetadata=T)}const m=h.duration;let g,v;u!=null?(g=u,v=u===1?0:m/(u-1)):(v=1/c,g=Math.floor(m/v));let y=[];for(let S=0;S<g;++S)y.push(u===1?m/2:S*v);const x=document.createElement("canvas");x.width=h.videoWidth,x.height=h.videoHeight;const w=x.getContext("2d",{willReadFrequently:!0});for(const S of y){h.currentTime=S,await new Promise(E=>{h.onseeked=E}),w.drawImage(h,0,0,x.width,x.height);const M=w.getImageData(0,0,x.width,x.height),T=new n.RawImage(M.data,x.width,x.height,4),P=new s(T,S);d.push(P)}return h.remove(),new o(d,m)}})},K3={};function xr(e){var t=K3[e];if(t!==void 0)return t.exports;var r=K3[e]={exports:{}};return Lve[e](r,r.exports,xr),r.exports}(()=>{var e=Object.getPrototypeOf?r=>Object.getPrototypeOf(r):r=>r.__proto__,t;xr.t=function(r,n){if(n&1&&(r=this(r)),n&8||typeof r=="object"&&r&&(n&4&&r.__esModule||n&16&&typeof r.then=="function"))return r;var i=Object.create(null);xr.r(i);var s={};t=t||[null,e({}),e([]),e(e)];for(var o=n&2&&r;typeof o=="object"&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach(a=>s[a]=()=>r[a]);return s.default=()=>r,xr.d(i,s),i}})();xr.d=(e,t)=>{for(var r in t)xr.o(t,r)&&!xr.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})};xr.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);xr.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var j={};(()=>{xr.r(j),xr.d(j,{ASTFeatureExtractor:()=>d.ASTFeatureExtractor,ASTForAudioClassification:()=>r.ASTForAudioClassification,ASTModel:()=>r.ASTModel,ASTPreTrainedModel:()=>r.ASTPreTrainedModel,AlbertForMaskedLM:()=>r.AlbertForMaskedLM,AlbertForQuestionAnswering:()=>r.AlbertForQuestionAnswering,AlbertForSequenceClassification:()=>r.AlbertForSequenceClassification,AlbertModel:()=>r.AlbertModel,AlbertPreTrainedModel:()=>r.AlbertPreTrainedModel,AlbertTokenizer:()=>n.AlbertTokenizer,AudioClassificationPipeline:()=>t.AudioClassificationPipeline,AutoConfig:()=>i.AutoConfig,AutoFeatureExtractor:()=>h.AutoFeatureExtractor,AutoImageProcessor:()=>v.AutoImageProcessor,AutoModel:()=>r.AutoModel,AutoModelForAudioClassification:()=>r.AutoModelForAudioClassification,AutoModelForAudioFrameClassification:()=>r.AutoModelForAudioFrameClassification,AutoModelForAudioTextToText:()=>r.AutoModelForAudioTextToText,AutoModelForCTC:()=>r.AutoModelForCTC,AutoModelForCausalLM:()=>r.AutoModelForCausalLM,AutoModelForDepthEstimation:()=>r.AutoModelForDepthEstimation,AutoModelForDocumentQuestionAnswering:()=>r.AutoModelForDocumentQuestionAnswering,AutoModelForImageClassification:()=>r.AutoModelForImageClassification,AutoModelForImageFeatureExtraction:()=>r.AutoModelForImageFeatureExtraction,AutoModelForImageMatting:()=>r.AutoModelForImageMatting,AutoModelForImageSegmentation:()=>r.AutoModelForImageSegmentation,AutoModelForImageTextToText:()=>r.AutoModelForImageTextToText,AutoModelForImageToImage:()=>r.AutoModelForImageToImage,AutoModelForMaskGeneration:()=>r.AutoModelForMaskGeneration,AutoModelForMaskedLM:()=>r.AutoModelForMaskedLM,AutoModelForNormalEstimation:()=>r.AutoModelForNormalEstimation,AutoModelForObjectDetection:()=>r.AutoModelForObjectDetection,AutoModelForPoseEstimation:()=>r.AutoModelForPoseEstimation,AutoModelForQuestionAnswering:()=>r.AutoModelForQuestionAnswering,AutoModelForSemanticSegmentation:()=>r.AutoModelForSemanticSegmentation,AutoModelForSeq2SeqLM:()=>r.AutoModelForSeq2SeqLM,AutoModelForSequenceClassification:()=>r.AutoModelForSequenceClassification,AutoModelForSpeechSeq2Seq:()=>r.AutoModelForSpeechSeq2Seq,AutoModelForTextToSpectrogram:()=>r.AutoModelForTextToSpectrogram,AutoModelForTextToWaveform:()=>r.AutoModelForTextToWaveform,AutoModelForTokenClassification:()=>r.AutoModelForTokenClassification,AutoModelForUniversalSegmentation:()=>r.AutoModelForUniversalSegmentation,AutoModelForVision2Seq:()=>r.AutoModelForVision2Seq,AutoModelForXVector:()=>r.AutoModelForXVector,AutoModelForZeroShotObjectDetection:()=>r.AutoModelForZeroShotObjectDetection,AutoProcessor:()=>w.AutoProcessor,AutoTokenizer:()=>n.AutoTokenizer,AutomaticSpeechRecognitionPipeline:()=>t.AutomaticSpeechRecognitionPipeline,BackgroundRemovalPipeline:()=>t.BackgroundRemovalPipeline,BartForConditionalGeneration:()=>r.BartForConditionalGeneration,BartForSequenceClassification:()=>r.BartForSequenceClassification,BartModel:()=>r.BartModel,BartPretrainedModel:()=>r.BartPretrainedModel,BartTokenizer:()=>n.BartTokenizer,BaseModelOutput:()=>r.BaseModelOutput,BaseStreamer:()=>S.BaseStreamer,BeitFeatureExtractor:()=>g.BeitFeatureExtractor,BeitForImageClassification:()=>r.BeitForImageClassification,BeitModel:()=>r.BeitModel,BeitPreTrainedModel:()=>r.BeitPreTrainedModel,BertForMaskedLM:()=>r.BertForMaskedLM,BertForQuestionAnswering:()=>r.BertForQuestionAnswering,BertForSequenceClassification:()=>r.BertForSequenceClassification,BertForTokenClassification:()=>r.BertForTokenClassification,BertModel:()=>r.BertModel,BertPreTrainedModel:()=>r.BertPreTrainedModel,BertTokenizer:()=>n.BertTokenizer,BitImageProcessor:()=>g.BitImageProcessor,BlenderbotForConditionalGeneration:()=>r.BlenderbotForConditionalGeneration,BlenderbotModel:()=>r.BlenderbotModel,BlenderbotPreTrainedModel:()=>r.BlenderbotPreTrainedModel,BlenderbotSmallForConditionalGeneration:()=>r.BlenderbotSmallForConditionalGeneration,BlenderbotSmallModel:()=>r.BlenderbotSmallModel,BlenderbotSmallPreTrainedModel:()=>r.BlenderbotSmallPreTrainedModel,BlenderbotSmallTokenizer:()=>n.BlenderbotSmallTokenizer,BlenderbotTokenizer:()=>n.BlenderbotTokenizer,BloomForCausalLM:()=>r.BloomForCausalLM,BloomModel:()=>r.BloomModel,BloomPreTrainedModel:()=>r.BloomPreTrainedModel,BloomTokenizer:()=>n.BloomTokenizer,CLIPFeatureExtractor:()=>g.CLIPFeatureExtractor,CLIPImageProcessor:()=>g.CLIPImageProcessor,CLIPModel:()=>r.CLIPModel,CLIPPreTrainedModel:()=>r.CLIPPreTrainedModel,CLIPSegForImageSegmentation:()=>r.CLIPSegForImageSegmentation,CLIPSegModel:()=>r.CLIPSegModel,CLIPSegPreTrainedModel:()=>r.CLIPSegPreTrainedModel,CLIPTextModel:()=>r.CLIPTextModel,CLIPTextModelWithProjection:()=>r.CLIPTextModelWithProjection,CLIPTokenizer:()=>n.CLIPTokenizer,CLIPVisionModel:()=>r.CLIPVisionModel,CLIPVisionModelWithProjection:()=>r.CLIPVisionModelWithProjection,CamembertForMaskedLM:()=>r.CamembertForMaskedLM,CamembertForQuestionAnswering:()=>r.CamembertForQuestionAnswering,CamembertForSequenceClassification:()=>r.CamembertForSequenceClassification,CamembertForTokenClassification:()=>r.CamembertForTokenClassification,CamembertModel:()=>r.CamembertModel,CamembertPreTrainedModel:()=>r.CamembertPreTrainedModel,CamembertTokenizer:()=>n.CamembertTokenizer,CausalLMOutput:()=>r.CausalLMOutput,CausalLMOutputWithPast:()=>r.CausalLMOutputWithPast,ChineseCLIPFeatureExtractor:()=>g.ChineseCLIPFeatureExtractor,ChineseCLIPModel:()=>r.ChineseCLIPModel,ChineseCLIPPreTrainedModel:()=>r.ChineseCLIPPreTrainedModel,ClapAudioModelWithProjection:()=>r.ClapAudioModelWithProjection,ClapFeatureExtractor:()=>d.ClapFeatureExtractor,ClapModel:()=>r.ClapModel,ClapPreTrainedModel:()=>r.ClapPreTrainedModel,ClapTextModelWithProjection:()=>r.ClapTextModelWithProjection,ClassifierFreeGuidanceLogitsProcessor:()=>T.ClassifierFreeGuidanceLogitsProcessor,CodeGenForCausalLM:()=>r.CodeGenForCausalLM,CodeGenModel:()=>r.CodeGenModel,CodeGenPreTrainedModel:()=>r.CodeGenPreTrainedModel,CodeGenTokenizer:()=>n.CodeGenTokenizer,CodeLlamaTokenizer:()=>n.CodeLlamaTokenizer,CohereForCausalLM:()=>r.CohereForCausalLM,CohereModel:()=>r.CohereModel,CoherePreTrainedModel:()=>r.CoherePreTrainedModel,CohereTokenizer:()=>n.CohereTokenizer,ConvBertForMaskedLM:()=>r.ConvBertForMaskedLM,ConvBertForQuestionAnswering:()=>r.ConvBertForQuestionAnswering,ConvBertForSequenceClassification:()=>r.ConvBertForSequenceClassification,ConvBertForTokenClassification:()=>r.ConvBertForTokenClassification,ConvBertModel:()=>r.ConvBertModel,ConvBertPreTrainedModel:()=>r.ConvBertPreTrainedModel,ConvBertTokenizer:()=>n.ConvBertTokenizer,ConvNextFeatureExtractor:()=>g.ConvNextFeatureExtractor,ConvNextForImageClassification:()=>r.ConvNextForImageClassification,ConvNextImageProcessor:()=>g.ConvNextImageProcessor,ConvNextModel:()=>r.ConvNextModel,ConvNextPreTrainedModel:()=>r.ConvNextPreTrainedModel,ConvNextV2ForImageClassification:()=>r.ConvNextV2ForImageClassification,ConvNextV2Model:()=>r.ConvNextV2Model,ConvNextV2PreTrainedModel:()=>r.ConvNextV2PreTrainedModel,DFineForObjectDetection:()=>r.DFineForObjectDetection,DFineModel:()=>r.DFineModel,DFinePreTrainedModel:()=>r.DFinePreTrainedModel,DPTFeatureExtractor:()=>g.DPTFeatureExtractor,DPTForDepthEstimation:()=>r.DPTForDepthEstimation,DPTImageProcessor:()=>g.DPTImageProcessor,DPTModel:()=>r.DPTModel,DPTPreTrainedModel:()=>r.DPTPreTrainedModel,DacDecoderModel:()=>r.DacDecoderModel,DacDecoderOutput:()=>r.DacDecoderOutput,DacEncoderModel:()=>r.DacEncoderModel,DacEncoderOutput:()=>r.DacEncoderOutput,DacFeatureExtractor:()=>d.DacFeatureExtractor,DacModel:()=>r.DacModel,DacPreTrainedModel:()=>r.DacPreTrainedModel,DataTypeMap:()=>l.DataTypeMap,DebertaForMaskedLM:()=>r.DebertaForMaskedLM,DebertaForQuestionAnswering:()=>r.DebertaForQuestionAnswering,DebertaForSequenceClassification:()=>r.DebertaForSequenceClassification,DebertaForTokenClassification:()=>r.DebertaForTokenClassification,DebertaModel:()=>r.DebertaModel,DebertaPreTrainedModel:()=>r.DebertaPreTrainedModel,DebertaTokenizer:()=>n.DebertaTokenizer,DebertaV2ForMaskedLM:()=>r.DebertaV2ForMaskedLM,DebertaV2ForQuestionAnswering:()=>r.DebertaV2ForQuestionAnswering,DebertaV2ForSequenceClassification:()=>r.DebertaV2ForSequenceClassification,DebertaV2ForTokenClassification:()=>r.DebertaV2ForTokenClassification,DebertaV2Model:()=>r.DebertaV2Model,DebertaV2PreTrainedModel:()=>r.DebertaV2PreTrainedModel,DebertaV2Tokenizer:()=>n.DebertaV2Tokenizer,DecisionTransformerModel:()=>r.DecisionTransformerModel,DecisionTransformerPreTrainedModel:()=>r.DecisionTransformerPreTrainedModel,DeiTFeatureExtractor:()=>g.DeiTFeatureExtractor,DeiTForImageClassification:()=>r.DeiTForImageClassification,DeiTImageProcessor:()=>g.DeiTImageProcessor,DeiTModel:()=>r.DeiTModel,DeiTPreTrainedModel:()=>r.DeiTPreTrainedModel,DepthAnythingForDepthEstimation:()=>r.DepthAnythingForDepthEstimation,DepthAnythingPreTrainedModel:()=>r.DepthAnythingPreTrainedModel,DepthEstimationPipeline:()=>t.DepthEstimationPipeline,DepthProForDepthEstimation:()=>r.DepthProForDepthEstimation,DepthProPreTrainedModel:()=>r.DepthProPreTrainedModel,DetrFeatureExtractor:()=>g.DetrFeatureExtractor,DetrForObjectDetection:()=>r.DetrForObjectDetection,DetrForSegmentation:()=>r.DetrForSegmentation,DetrImageProcessor:()=>g.DetrImageProcessor,DetrModel:()=>r.DetrModel,DetrObjectDetectionOutput:()=>r.DetrObjectDetectionOutput,DetrPreTrainedModel:()=>r.DetrPreTrainedModel,DetrSegmentationOutput:()=>r.DetrSegmentationOutput,Dinov2ForImageClassification:()=>r.Dinov2ForImageClassification,Dinov2Model:()=>r.Dinov2Model,Dinov2PreTrainedModel:()=>r.Dinov2PreTrainedModel,Dinov2WithRegistersForImageClassification:()=>r.Dinov2WithRegistersForImageClassification,Dinov2WithRegistersModel:()=>r.Dinov2WithRegistersModel,Dinov2WithRegistersPreTrainedModel:()=>r.Dinov2WithRegistersPreTrainedModel,DistilBertForMaskedLM:()=>r.DistilBertForMaskedLM,DistilBertForQuestionAnswering:()=>r.DistilBertForQuestionAnswering,DistilBertForSequenceClassification:()=>r.DistilBertForSequenceClassification,DistilBertForTokenClassification:()=>r.DistilBertForTokenClassification,DistilBertModel:()=>r.DistilBertModel,DistilBertPreTrainedModel:()=>r.DistilBertPreTrainedModel,DistilBertTokenizer:()=>n.DistilBertTokenizer,DocumentQuestionAnsweringPipeline:()=>t.DocumentQuestionAnsweringPipeline,DonutFeatureExtractor:()=>g.DonutFeatureExtractor,DonutImageProcessor:()=>g.DonutImageProcessor,DonutSwinModel:()=>r.DonutSwinModel,DonutSwinPreTrainedModel:()=>r.DonutSwinPreTrainedModel,EfficientNetForImageClassification:()=>r.EfficientNetForImageClassification,EfficientNetImageProcessor:()=>g.EfficientNetImageProcessor,EfficientNetModel:()=>r.EfficientNetModel,EfficientNetPreTrainedModel:()=>r.EfficientNetPreTrainedModel,ElectraForMaskedLM:()=>r.ElectraForMaskedLM,ElectraForQuestionAnswering:()=>r.ElectraForQuestionAnswering,ElectraForSequenceClassification:()=>r.ElectraForSequenceClassification,ElectraForTokenClassification:()=>r.ElectraForTokenClassification,ElectraModel:()=>r.ElectraModel,ElectraPreTrainedModel:()=>r.ElectraPreTrainedModel,ElectraTokenizer:()=>n.ElectraTokenizer,EncodecFeatureExtractor:()=>d.EncodecFeatureExtractor,EosTokenCriteria:()=>M.EosTokenCriteria,EsmForMaskedLM:()=>r.EsmForMaskedLM,EsmForSequenceClassification:()=>r.EsmForSequenceClassification,EsmForTokenClassification:()=>r.EsmForTokenClassification,EsmModel:()=>r.EsmModel,EsmPreTrainedModel:()=>r.EsmPreTrainedModel,EsmTokenizer:()=>n.EsmTokenizer,ExaoneForCausalLM:()=>r.ExaoneForCausalLM,ExaoneModel:()=>r.ExaoneModel,ExaonePreTrainedModel:()=>r.ExaonePreTrainedModel,FFT:()=>u.FFT,FalconForCausalLM:()=>r.FalconForCausalLM,FalconModel:()=>r.FalconModel,FalconPreTrainedModel:()=>r.FalconPreTrainedModel,FalconTokenizer:()=>n.FalconTokenizer,FastViTForImageClassification:()=>r.FastViTForImageClassification,FastViTModel:()=>r.FastViTModel,FastViTPreTrainedModel:()=>r.FastViTPreTrainedModel,FeatureExtractionPipeline:()=>t.FeatureExtractionPipeline,FeatureExtractor:()=>c.FeatureExtractor,FillMaskPipeline:()=>t.FillMaskPipeline,Florence2ForConditionalGeneration:()=>r.Florence2ForConditionalGeneration,Florence2PreTrainedModel:()=>r.Florence2PreTrainedModel,Florence2Processor:()=>x.Florence2Processor,ForcedBOSTokenLogitsProcessor:()=>T.ForcedBOSTokenLogitsProcessor,ForcedEOSTokenLogitsProcessor:()=>T.ForcedEOSTokenLogitsProcessor,GLPNFeatureExtractor:()=>g.GLPNFeatureExtractor,GLPNForDepthEstimation:()=>r.GLPNForDepthEstimation,GLPNModel:()=>r.GLPNModel,GLPNPreTrainedModel:()=>r.GLPNPreTrainedModel,GPT2LMHeadModel:()=>r.GPT2LMHeadModel,GPT2Model:()=>r.GPT2Model,GPT2PreTrainedModel:()=>r.GPT2PreTrainedModel,GPT2Tokenizer:()=>n.GPT2Tokenizer,GPTBigCodeForCausalLM:()=>r.GPTBigCodeForCausalLM,GPTBigCodeModel:()=>r.GPTBigCodeModel,GPTBigCodePreTrainedModel:()=>r.GPTBigCodePreTrainedModel,GPTJForCausalLM:()=>r.GPTJForCausalLM,GPTJModel:()=>r.GPTJModel,GPTJPreTrainedModel:()=>r.GPTJPreTrainedModel,GPTNeoForCausalLM:()=>r.GPTNeoForCausalLM,GPTNeoModel:()=>r.GPTNeoModel,GPTNeoPreTrainedModel:()=>r.GPTNeoPreTrainedModel,GPTNeoXForCausalLM:()=>r.GPTNeoXForCausalLM,GPTNeoXModel:()=>r.GPTNeoXModel,GPTNeoXPreTrainedModel:()=>r.GPTNeoXPreTrainedModel,GPTNeoXTokenizer:()=>n.GPTNeoXTokenizer,Gemma2ForCausalLM:()=>r.Gemma2ForCausalLM,Gemma2Model:()=>r.Gemma2Model,Gemma2PreTrainedModel:()=>r.Gemma2PreTrainedModel,Gemma3ForCausalLM:()=>r.Gemma3ForCausalLM,Gemma3Model:()=>r.Gemma3Model,Gemma3PreTrainedModel:()=>r.Gemma3PreTrainedModel,Gemma3nAudioFeatureExtractor:()=>d.Gemma3nAudioFeatureExtractor,Gemma3nForConditionalGeneration:()=>r.Gemma3nForConditionalGeneration,Gemma3nPreTrainedModel:()=>r.Gemma3nPreTrainedModel,Gemma3nProcessor:()=>x.Gemma3nProcessor,GemmaForCausalLM:()=>r.GemmaForCausalLM,GemmaModel:()=>r.GemmaModel,GemmaPreTrainedModel:()=>r.GemmaPreTrainedModel,GemmaTokenizer:()=>n.GemmaTokenizer,GlmForCausalLM:()=>r.GlmForCausalLM,GlmModel:()=>r.GlmModel,GlmPreTrainedModel:()=>r.GlmPreTrainedModel,GraniteForCausalLM:()=>r.GraniteForCausalLM,GraniteModel:()=>r.GraniteModel,GranitePreTrainedModel:()=>r.GranitePreTrainedModel,Grok1Tokenizer:()=>n.Grok1Tokenizer,GroundingDinoForObjectDetection:()=>r.GroundingDinoForObjectDetection,GroundingDinoImageProcessor:()=>g.GroundingDinoImageProcessor,GroundingDinoPreTrainedModel:()=>r.GroundingDinoPreTrainedModel,GroundingDinoProcessor:()=>x.GroundingDinoProcessor,GroupViTModel:()=>r.GroupViTModel,GroupViTPreTrainedModel:()=>r.GroupViTPreTrainedModel,HeliumForCausalLM:()=>r.HeliumForCausalLM,HeliumModel:()=>r.HeliumModel,HeliumPreTrainedModel:()=>r.HeliumPreTrainedModel,HerbertTokenizer:()=>n.HerbertTokenizer,HieraForImageClassification:()=>r.HieraForImageClassification,HieraModel:()=>r.HieraModel,HieraPreTrainedModel:()=>r.HieraPreTrainedModel,HubertForCTC:()=>r.HubertForCTC,HubertForSequenceClassification:()=>r.HubertForSequenceClassification,HubertModel:()=>r.HubertModel,HubertPreTrainedModel:()=>r.HubertPreTrainedModel,IJepaForImageClassification:()=>r.IJepaForImageClassification,IJepaModel:()=>r.IJepaModel,IJepaPreTrainedModel:()=>r.IJepaPreTrainedModel,Idefics3ForConditionalGeneration:()=>r.Idefics3ForConditionalGeneration,Idefics3ImageProcessor:()=>g.Idefics3ImageProcessor,Idefics3PreTrainedModel:()=>r.Idefics3PreTrainedModel,Idefics3Processor:()=>x.Idefics3Processor,ImageClassificationPipeline:()=>t.ImageClassificationPipeline,ImageFeatureExtractionPipeline:()=>t.ImageFeatureExtractionPipeline,ImageFeatureExtractor:()=>d.ImageFeatureExtractor,ImageMattingOutput:()=>r.ImageMattingOutput,ImageProcessor:()=>m.ImageProcessor,ImageSegmentationPipeline:()=>t.ImageSegmentationPipeline,ImageToImagePipeline:()=>t.ImageToImagePipeline,ImageToTextPipeline:()=>t.ImageToTextPipeline,InterruptableStoppingCriteria:()=>M.InterruptableStoppingCriteria,JAISLMHeadModel:()=>r.JAISLMHeadModel,JAISModel:()=>r.JAISModel,JAISPreTrainedModel:()=>r.JAISPreTrainedModel,JinaCLIPImageProcessor:()=>g.JinaCLIPImageProcessor,JinaCLIPModel:()=>r.JinaCLIPModel,JinaCLIPPreTrainedModel:()=>r.JinaCLIPPreTrainedModel,JinaCLIPProcessor:()=>x.JinaCLIPProcessor,JinaCLIPTextModel:()=>r.JinaCLIPTextModel,JinaCLIPVisionModel:()=>r.JinaCLIPVisionModel,LiteWhisperForConditionalGeneration:()=>r.LiteWhisperForConditionalGeneration,LlamaForCausalLM:()=>r.LlamaForCausalLM,LlamaModel:()=>r.LlamaModel,LlamaPreTrainedModel:()=>r.LlamaPreTrainedModel,LlamaTokenizer:()=>n.LlamaTokenizer,LlavaForConditionalGeneration:()=>r.LlavaForConditionalGeneration,LlavaOnevisionForConditionalGeneration:()=>r.LlavaOnevisionForConditionalGeneration,LlavaOnevisionImageProcessor:()=>g.LlavaOnevisionImageProcessor,LlavaPreTrainedModel:()=>r.LlavaPreTrainedModel,LlavaProcessor:()=>x.LlavaProcessor,LlavaQwen2ForCausalLM:()=>r.LlavaQwen2ForCausalLM,LogitsProcessor:()=>T.LogitsProcessor,LogitsProcessorList:()=>T.LogitsProcessorList,LogitsWarper:()=>T.LogitsWarper,LongT5ForConditionalGeneration:()=>r.LongT5ForConditionalGeneration,LongT5Model:()=>r.LongT5Model,LongT5PreTrainedModel:()=>r.LongT5PreTrainedModel,M2M100ForConditionalGeneration:()=>r.M2M100ForConditionalGeneration,M2M100Model:()=>r.M2M100Model,M2M100PreTrainedModel:()=>r.M2M100PreTrainedModel,M2M100Tokenizer:()=>n.M2M100Tokenizer,MBart50Tokenizer:()=>n.MBart50Tokenizer,MBartForCausalLM:()=>r.MBartForCausalLM,MBartForConditionalGeneration:()=>r.MBartForConditionalGeneration,MBartForSequenceClassification:()=>r.MBartForSequenceClassification,MBartModel:()=>r.MBartModel,MBartPreTrainedModel:()=>r.MBartPreTrainedModel,MBartTokenizer:()=>n.MBartTokenizer,MPNetForMaskedLM:()=>r.MPNetForMaskedLM,MPNetForQuestionAnswering:()=>r.MPNetForQuestionAnswering,MPNetForSequenceClassification:()=>r.MPNetForSequenceClassification,MPNetForTokenClassification:()=>r.MPNetForTokenClassification,MPNetModel:()=>r.MPNetModel,MPNetPreTrainedModel:()=>r.MPNetPreTrainedModel,MPNetTokenizer:()=>n.MPNetTokenizer,MT5ForConditionalGeneration:()=>r.MT5ForConditionalGeneration,MT5Model:()=>r.MT5Model,MT5PreTrainedModel:()=>r.MT5PreTrainedModel,MarianMTModel:()=>r.MarianMTModel,MarianModel:()=>r.MarianModel,MarianPreTrainedModel:()=>r.MarianPreTrainedModel,MarianTokenizer:()=>n.MarianTokenizer,Mask2FormerImageProcessor:()=>g.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>g.MaskFormerFeatureExtractor,MaskFormerForInstanceSegmentation:()=>r.MaskFormerForInstanceSegmentation,MaskFormerImageProcessor:()=>g.MaskFormerImageProcessor,MaskFormerModel:()=>r.MaskFormerModel,MaskFormerPreTrainedModel:()=>r.MaskFormerPreTrainedModel,MaskedLMOutput:()=>r.MaskedLMOutput,MaxLengthCriteria:()=>M.MaxLengthCriteria,Metric3DForDepthEstimation:()=>r.Metric3DForDepthEstimation,Metric3DPreTrainedModel:()=>r.Metric3DPreTrainedModel,Metric3Dv2ForDepthEstimation:()=>r.Metric3Dv2ForDepthEstimation,Metric3Dv2PreTrainedModel:()=>r.Metric3Dv2PreTrainedModel,MgpstrForSceneTextRecognition:()=>r.MgpstrForSceneTextRecognition,MgpstrModelOutput:()=>r.MgpstrModelOutput,MgpstrPreTrainedModel:()=>r.MgpstrPreTrainedModel,MgpstrProcessor:()=>x.MgpstrProcessor,MgpstrTokenizer:()=>n.MgpstrTokenizer,MimiDecoderModel:()=>r.MimiDecoderModel,MimiDecoderOutput:()=>r.MimiDecoderOutput,MimiEncoderModel:()=>r.MimiEncoderModel,MimiEncoderOutput:()=>r.MimiEncoderOutput,MimiModel:()=>r.MimiModel,MimiPreTrainedModel:()=>r.MimiPreTrainedModel,MinLengthLogitsProcessor:()=>T.MinLengthLogitsProcessor,MinNewTokensLengthLogitsProcessor:()=>T.MinNewTokensLengthLogitsProcessor,MistralForCausalLM:()=>r.MistralForCausalLM,MistralModel:()=>r.MistralModel,MistralPreTrainedModel:()=>r.MistralPreTrainedModel,MobileBertForMaskedLM:()=>r.MobileBertForMaskedLM,MobileBertForQuestionAnswering:()=>r.MobileBertForQuestionAnswering,MobileBertForSequenceClassification:()=>r.MobileBertForSequenceClassification,MobileBertModel:()=>r.MobileBertModel,MobileBertPreTrainedModel:()=>r.MobileBertPreTrainedModel,MobileBertTokenizer:()=>n.MobileBertTokenizer,MobileLLMForCausalLM:()=>r.MobileLLMForCausalLM,MobileLLMModel:()=>r.MobileLLMModel,MobileLLMPreTrainedModel:()=>r.MobileLLMPreTrainedModel,MobileNetV1FeatureExtractor:()=>g.MobileNetV1FeatureExtractor,MobileNetV1ForImageClassification:()=>r.MobileNetV1ForImageClassification,MobileNetV1ForSemanticSegmentation:()=>r.MobileNetV1ForSemanticSegmentation,MobileNetV1ImageProcessor:()=>g.MobileNetV1ImageProcessor,MobileNetV1Model:()=>r.MobileNetV1Model,MobileNetV1PreTrainedModel:()=>r.MobileNetV1PreTrainedModel,MobileNetV2FeatureExtractor:()=>g.MobileNetV2FeatureExtractor,MobileNetV2ForImageClassification:()=>r.MobileNetV2ForImageClassification,MobileNetV2ForSemanticSegmentation:()=>r.MobileNetV2ForSemanticSegmentation,MobileNetV2ImageProcessor:()=>g.MobileNetV2ImageProcessor,MobileNetV2Model:()=>r.MobileNetV2Model,MobileNetV2PreTrainedModel:()=>r.MobileNetV2PreTrainedModel,MobileNetV3FeatureExtractor:()=>g.MobileNetV3FeatureExtractor,MobileNetV3ForImageClassification:()=>r.MobileNetV3ForImageClassification,MobileNetV3ForSemanticSegmentation:()=>r.MobileNetV3ForSemanticSegmentation,MobileNetV3ImageProcessor:()=>g.MobileNetV3ImageProcessor,MobileNetV3Model:()=>r.MobileNetV3Model,MobileNetV3PreTrainedModel:()=>r.MobileNetV3PreTrainedModel,MobileNetV4FeatureExtractor:()=>g.MobileNetV4FeatureExtractor,MobileNetV4ForImageClassification:()=>r.MobileNetV4ForImageClassification,MobileNetV4ForSemanticSegmentation:()=>r.MobileNetV4ForSemanticSegmentation,MobileNetV4ImageProcessor:()=>g.MobileNetV4ImageProcessor,MobileNetV4Model:()=>r.MobileNetV4Model,MobileNetV4PreTrainedModel:()=>r.MobileNetV4PreTrainedModel,MobileViTFeatureExtractor:()=>g.MobileViTFeatureExtractor,MobileViTForImageClassification:()=>r.MobileViTForImageClassification,MobileViTImageProcessor:()=>g.MobileViTImageProcessor,MobileViTModel:()=>r.MobileViTModel,MobileViTPreTrainedModel:()=>r.MobileViTPreTrainedModel,MobileViTV2ForImageClassification:()=>r.MobileViTV2ForImageClassification,MobileViTV2Model:()=>r.MobileViTV2Model,MobileViTV2PreTrainedModel:()=>r.MobileViTV2PreTrainedModel,ModelOutput:()=>r.ModelOutput,ModernBertForMaskedLM:()=>r.ModernBertForMaskedLM,ModernBertForSequenceClassification:()=>r.ModernBertForSequenceClassification,ModernBertForTokenClassification:()=>r.ModernBertForTokenClassification,ModernBertModel:()=>r.ModernBertModel,ModernBertPreTrainedModel:()=>r.ModernBertPreTrainedModel,Moondream1ForConditionalGeneration:()=>r.Moondream1ForConditionalGeneration,MoonshineFeatureExtractor:()=>d.MoonshineFeatureExtractor,MoonshineForConditionalGeneration:()=>r.MoonshineForConditionalGeneration,MoonshineModel:()=>r.MoonshineModel,MoonshinePreTrainedModel:()=>r.MoonshinePreTrainedModel,MoonshineProcessor:()=>x.MoonshineProcessor,MptForCausalLM:()=>r.MptForCausalLM,MptModel:()=>r.MptModel,MptPreTrainedModel:()=>r.MptPreTrainedModel,MultiModalityCausalLM:()=>r.MultiModalityCausalLM,MultiModalityPreTrainedModel:()=>r.MultiModalityPreTrainedModel,MusicgenForCausalLM:()=>r.MusicgenForCausalLM,MusicgenForConditionalGeneration:()=>r.MusicgenForConditionalGeneration,MusicgenModel:()=>r.MusicgenModel,MusicgenPreTrainedModel:()=>r.MusicgenPreTrainedModel,NllbTokenizer:()=>n.NllbTokenizer,NoBadWordsLogitsProcessor:()=>T.NoBadWordsLogitsProcessor,NoRepeatNGramLogitsProcessor:()=>T.NoRepeatNGramLogitsProcessor,NomicBertModel:()=>r.NomicBertModel,NomicBertPreTrainedModel:()=>r.NomicBertPreTrainedModel,NougatImageProcessor:()=>g.NougatImageProcessor,NougatTokenizer:()=>n.NougatTokenizer,OPTForCausalLM:()=>r.OPTForCausalLM,OPTModel:()=>r.OPTModel,OPTPreTrainedModel:()=>r.OPTPreTrainedModel,ObjectDetectionPipeline:()=>t.ObjectDetectionPipeline,Olmo2ForCausalLM:()=>r.Olmo2ForCausalLM,Olmo2Model:()=>r.Olmo2Model,Olmo2PreTrainedModel:()=>r.Olmo2PreTrainedModel,OlmoForCausalLM:()=>r.OlmoForCausalLM,OlmoModel:()=>r.OlmoModel,OlmoPreTrainedModel:()=>r.OlmoPreTrainedModel,OpenELMForCausalLM:()=>r.OpenELMForCausalLM,OpenELMModel:()=>r.OpenELMModel,OpenELMPreTrainedModel:()=>r.OpenELMPreTrainedModel,OwlViTFeatureExtractor:()=>g.OwlViTFeatureExtractor,OwlViTForObjectDetection:()=>r.OwlViTForObjectDetection,OwlViTImageProcessor:()=>g.OwlViTImageProcessor,OwlViTModel:()=>r.OwlViTModel,OwlViTPreTrainedModel:()=>r.OwlViTPreTrainedModel,OwlViTProcessor:()=>x.OwlViTProcessor,Owlv2ForObjectDetection:()=>r.Owlv2ForObjectDetection,Owlv2ImageProcessor:()=>g.Owlv2ImageProcessor,Owlv2Model:()=>r.Owlv2Model,Owlv2PreTrainedModel:()=>r.Owlv2PreTrainedModel,PaliGemmaForConditionalGeneration:()=>r.PaliGemmaForConditionalGeneration,PaliGemmaPreTrainedModel:()=>r.PaliGemmaPreTrainedModel,PaliGemmaProcessor:()=>x.PaliGemmaProcessor,PatchTSMixerForPrediction:()=>r.PatchTSMixerForPrediction,PatchTSMixerModel:()=>r.PatchTSMixerModel,PatchTSMixerPreTrainedModel:()=>r.PatchTSMixerPreTrainedModel,PatchTSTForPrediction:()=>r.PatchTSTForPrediction,PatchTSTModel:()=>r.PatchTSTModel,PatchTSTPreTrainedModel:()=>r.PatchTSTPreTrainedModel,Phi3ForCausalLM:()=>r.Phi3ForCausalLM,Phi3Model:()=>r.Phi3Model,Phi3PreTrainedModel:()=>r.Phi3PreTrainedModel,Phi3VForCausalLM:()=>r.Phi3VForCausalLM,Phi3VImageProcessor:()=>g.Phi3VImageProcessor,Phi3VPreTrainedModel:()=>r.Phi3VPreTrainedModel,Phi3VProcessor:()=>x.Phi3VProcessor,PhiForCausalLM:()=>r.PhiForCausalLM,PhiModel:()=>r.PhiModel,PhiPreTrainedModel:()=>r.PhiPreTrainedModel,Pipeline:()=>t.Pipeline,PreTrainedModel:()=>r.PreTrainedModel,PreTrainedTokenizer:()=>n.PreTrainedTokenizer,PretrainedConfig:()=>i.PretrainedConfig,PretrainedMixin:()=>r.PretrainedMixin,Processor:()=>y.Processor,PvtForImageClassification:()=>r.PvtForImageClassification,PvtImageProcessor:()=>g.PvtImageProcessor,PvtModel:()=>r.PvtModel,PvtPreTrainedModel:()=>r.PvtPreTrainedModel,PyAnnoteFeatureExtractor:()=>d.PyAnnoteFeatureExtractor,PyAnnoteForAudioFrameClassification:()=>r.PyAnnoteForAudioFrameClassification,PyAnnoteModel:()=>r.PyAnnoteModel,PyAnnotePreTrainedModel:()=>r.PyAnnotePreTrainedModel,PyAnnoteProcessor:()=>x.PyAnnoteProcessor,QuestionAnsweringModelOutput:()=>r.QuestionAnsweringModelOutput,QuestionAnsweringPipeline:()=>t.QuestionAnsweringPipeline,Qwen2ForCausalLM:()=>r.Qwen2ForCausalLM,Qwen2Model:()=>r.Qwen2Model,Qwen2PreTrainedModel:()=>r.Qwen2PreTrainedModel,Qwen2Tokenizer:()=>n.Qwen2Tokenizer,Qwen2VLForConditionalGeneration:()=>r.Qwen2VLForConditionalGeneration,Qwen2VLImageProcessor:()=>g.Qwen2VLImageProcessor,Qwen2VLPreTrainedModel:()=>r.Qwen2VLPreTrainedModel,Qwen2VLProcessor:()=>x.Qwen2VLProcessor,Qwen3ForCausalLM:()=>r.Qwen3ForCausalLM,Qwen3Model:()=>r.Qwen3Model,Qwen3PreTrainedModel:()=>r.Qwen3PreTrainedModel,RFDetrForObjectDetection:()=>r.RFDetrForObjectDetection,RFDetrModel:()=>r.RFDetrModel,RFDetrObjectDetectionOutput:()=>r.RFDetrObjectDetectionOutput,RFDetrPreTrainedModel:()=>r.RFDetrPreTrainedModel,RTDetrForObjectDetection:()=>r.RTDetrForObjectDetection,RTDetrImageProcessor:()=>g.RTDetrImageProcessor,RTDetrModel:()=>r.RTDetrModel,RTDetrObjectDetectionOutput:()=>r.RTDetrObjectDetectionOutput,RTDetrPreTrainedModel:()=>r.RTDetrPreTrainedModel,RTDetrV2ForObjectDetection:()=>r.RTDetrV2ForObjectDetection,RTDetrV2Model:()=>r.RTDetrV2Model,RTDetrV2ObjectDetectionOutput:()=>r.RTDetrV2ObjectDetectionOutput,RTDetrV2PreTrainedModel:()=>r.RTDetrV2PreTrainedModel,RawAudio:()=>s.RawAudio,RawImage:()=>o.RawImage,RawVideo:()=>a.RawVideo,RawVideoFrame:()=>a.RawVideoFrame,RepetitionPenaltyLogitsProcessor:()=>T.RepetitionPenaltyLogitsProcessor,ResNetForImageClassification:()=>r.ResNetForImageClassification,ResNetModel:()=>r.ResNetModel,ResNetPreTrainedModel:()=>r.ResNetPreTrainedModel,RoFormerForMaskedLM:()=>r.RoFormerForMaskedLM,RoFormerForQuestionAnswering:()=>r.RoFormerForQuestionAnswering,RoFormerForSequenceClassification:()=>r.RoFormerForSequenceClassification,RoFormerForTokenClassification:()=>r.RoFormerForTokenClassification,RoFormerModel:()=>r.RoFormerModel,RoFormerPreTrainedModel:()=>r.RoFormerPreTrainedModel,RoFormerTokenizer:()=>n.RoFormerTokenizer,RobertaForMaskedLM:()=>r.RobertaForMaskedLM,RobertaForQuestionAnswering:()=>r.RobertaForQuestionAnswering,RobertaForSequenceClassification:()=>r.RobertaForSequenceClassification,RobertaForTokenClassification:()=>r.RobertaForTokenClassification,RobertaModel:()=>r.RobertaModel,RobertaPreTrainedModel:()=>r.RobertaPreTrainedModel,RobertaTokenizer:()=>n.RobertaTokenizer,SamImageProcessor:()=>g.SamImageProcessor,SamImageSegmentationOutput:()=>r.SamImageSegmentationOutput,SamModel:()=>r.SamModel,SamPreTrainedModel:()=>r.SamPreTrainedModel,SamProcessor:()=>x.SamProcessor,SapiensForDepthEstimation:()=>r.SapiensForDepthEstimation,SapiensForNormalEstimation:()=>r.SapiensForNormalEstimation,SapiensForSemanticSegmentation:()=>r.SapiensForSemanticSegmentation,SapiensPreTrainedModel:()=>r.SapiensPreTrainedModel,SeamlessM4TFeatureExtractor:()=>d.SeamlessM4TFeatureExtractor,SegformerFeatureExtractor:()=>g.SegformerFeatureExtractor,SegformerForImageClassification:()=>r.SegformerForImageClassification,SegformerForSemanticSegmentation:()=>r.SegformerForSemanticSegmentation,SegformerImageProcessor:()=>g.SegformerImageProcessor,SegformerModel:()=>r.SegformerModel,SegformerPreTrainedModel:()=>r.SegformerPreTrainedModel,Seq2SeqLMOutput:()=>r.Seq2SeqLMOutput,SequenceClassifierOutput:()=>r.SequenceClassifierOutput,SiglipImageProcessor:()=>g.SiglipImageProcessor,SiglipModel:()=>r.SiglipModel,SiglipPreTrainedModel:()=>r.SiglipPreTrainedModel,SiglipTextModel:()=>r.SiglipTextModel,SiglipTokenizer:()=>n.SiglipTokenizer,SiglipVisionModel:()=>r.SiglipVisionModel,SmolVLMForConditionalGeneration:()=>r.SmolVLMForConditionalGeneration,SmolVLMImageProcessor:()=>g.SmolVLMImageProcessor,SmolVLMProcessor:()=>x.SmolVLMProcessor,SnacDecoderModel:()=>r.SnacDecoderModel,SnacEncoderModel:()=>r.SnacEncoderModel,SnacFeatureExtractor:()=>d.SnacFeatureExtractor,SnacModel:()=>r.SnacModel,SnacPreTrainedModel:()=>r.SnacPreTrainedModel,SpeechT5FeatureExtractor:()=>d.SpeechT5FeatureExtractor,SpeechT5ForSpeechToText:()=>r.SpeechT5ForSpeechToText,SpeechT5ForTextToSpeech:()=>r.SpeechT5ForTextToSpeech,SpeechT5HifiGan:()=>r.SpeechT5HifiGan,SpeechT5Model:()=>r.SpeechT5Model,SpeechT5PreTrainedModel:()=>r.SpeechT5PreTrainedModel,SpeechT5Processor:()=>x.SpeechT5Processor,SpeechT5Tokenizer:()=>n.SpeechT5Tokenizer,SqueezeBertForMaskedLM:()=>r.SqueezeBertForMaskedLM,SqueezeBertForQuestionAnswering:()=>r.SqueezeBertForQuestionAnswering,SqueezeBertForSequenceClassification:()=>r.SqueezeBertForSequenceClassification,SqueezeBertModel:()=>r.SqueezeBertModel,SqueezeBertPreTrainedModel:()=>r.SqueezeBertPreTrainedModel,SqueezeBertTokenizer:()=>n.SqueezeBertTokenizer,StableLmForCausalLM:()=>r.StableLmForCausalLM,StableLmModel:()=>r.StableLmModel,StableLmPreTrainedModel:()=>r.StableLmPreTrainedModel,Starcoder2ForCausalLM:()=>r.Starcoder2ForCausalLM,Starcoder2Model:()=>r.Starcoder2Model,Starcoder2PreTrainedModel:()=>r.Starcoder2PreTrainedModel,StoppingCriteria:()=>M.StoppingCriteria,StoppingCriteriaList:()=>M.StoppingCriteriaList,StyleTextToSpeech2Model:()=>r.StyleTextToSpeech2Model,StyleTextToSpeech2PreTrainedModel:()=>r.StyleTextToSpeech2PreTrainedModel,SummarizationPipeline:()=>t.SummarizationPipeline,SuppressTokensAtBeginLogitsProcessor:()=>T.SuppressTokensAtBeginLogitsProcessor,Swin2SRForImageSuperResolution:()=>r.Swin2SRForImageSuperResolution,Swin2SRImageProcessor:()=>g.Swin2SRImageProcessor,Swin2SRModel:()=>r.Swin2SRModel,Swin2SRPreTrainedModel:()=>r.Swin2SRPreTrainedModel,SwinForImageClassification:()=>r.SwinForImageClassification,SwinForSemanticSegmentation:()=>r.SwinForSemanticSegmentation,SwinModel:()=>r.SwinModel,SwinPreTrainedModel:()=>r.SwinPreTrainedModel,T5ForConditionalGeneration:()=>r.T5ForConditionalGeneration,T5Model:()=>r.T5Model,T5PreTrainedModel:()=>r.T5PreTrainedModel,T5Tokenizer:()=>n.T5Tokenizer,TableTransformerForObjectDetection:()=>r.TableTransformerForObjectDetection,TableTransformerModel:()=>r.TableTransformerModel,TableTransformerObjectDetectionOutput:()=>r.TableTransformerObjectDetectionOutput,TableTransformerPreTrainedModel:()=>r.TableTransformerPreTrainedModel,TemperatureLogitsWarper:()=>T.TemperatureLogitsWarper,Tensor:()=>l.Tensor,Text2TextGenerationPipeline:()=>t.Text2TextGenerationPipeline,TextClassificationPipeline:()=>t.TextClassificationPipeline,TextGenerationPipeline:()=>t.TextGenerationPipeline,TextStreamer:()=>S.TextStreamer,TextToAudioPipeline:()=>t.TextToAudioPipeline,TokenClassificationPipeline:()=>t.TokenClassificationPipeline,TokenClassifierOutput:()=>r.TokenClassifierOutput,TokenizerModel:()=>n.TokenizerModel,TopKLogitsWarper:()=>T.TopKLogitsWarper,TopPLogitsWarper:()=>T.TopPLogitsWarper,TrOCRForCausalLM:()=>r.TrOCRForCausalLM,TrOCRPreTrainedModel:()=>r.TrOCRPreTrainedModel,TranslationPipeline:()=>t.TranslationPipeline,UltravoxModel:()=>r.UltravoxModel,UltravoxPreTrainedModel:()=>r.UltravoxPreTrainedModel,UltravoxProcessor:()=>x.UltravoxProcessor,UniSpeechForCTC:()=>r.UniSpeechForCTC,UniSpeechForSequenceClassification:()=>r.UniSpeechForSequenceClassification,UniSpeechModel:()=>r.UniSpeechModel,UniSpeechPreTrainedModel:()=>r.UniSpeechPreTrainedModel,UniSpeechSatForAudioFrameClassification:()=>r.UniSpeechSatForAudioFrameClassification,UniSpeechSatForCTC:()=>r.UniSpeechSatForCTC,UniSpeechSatForSequenceClassification:()=>r.UniSpeechSatForSequenceClassification,UniSpeechSatModel:()=>r.UniSpeechSatModel,UniSpeechSatPreTrainedModel:()=>r.UniSpeechSatPreTrainedModel,VLChatProcessor:()=>x.VLChatProcessor,VLMImageProcessor:()=>g.VLMImageProcessor,ViTFeatureExtractor:()=>g.ViTFeatureExtractor,ViTForImageClassification:()=>r.ViTForImageClassification,ViTImageProcessor:()=>g.ViTImageProcessor,ViTMAEModel:()=>r.ViTMAEModel,ViTMAEPreTrainedModel:()=>r.ViTMAEPreTrainedModel,ViTMSNForImageClassification:()=>r.ViTMSNForImageClassification,ViTMSNModel:()=>r.ViTMSNModel,ViTMSNPreTrainedModel:()=>r.ViTMSNPreTrainedModel,ViTModel:()=>r.ViTModel,ViTPreTrainedModel:()=>r.ViTPreTrainedModel,VisionEncoderDecoderModel:()=>r.VisionEncoderDecoderModel,VitMatteForImageMatting:()=>r.VitMatteForImageMatting,VitMatteImageProcessor:()=>g.VitMatteImageProcessor,VitMattePreTrainedModel:()=>r.VitMattePreTrainedModel,VitPoseForPoseEstimation:()=>r.VitPoseForPoseEstimation,VitPoseImageProcessor:()=>g.VitPoseImageProcessor,VitPosePreTrainedModel:()=>r.VitPosePreTrainedModel,VitsModel:()=>r.VitsModel,VitsModelOutput:()=>r.VitsModelOutput,VitsPreTrainedModel:()=>r.VitsPreTrainedModel,VitsTokenizer:()=>n.VitsTokenizer,Wav2Vec2BertForCTC:()=>r.Wav2Vec2BertForCTC,Wav2Vec2BertForSequenceClassification:()=>r.Wav2Vec2BertForSequenceClassification,Wav2Vec2BertModel:()=>r.Wav2Vec2BertModel,Wav2Vec2BertPreTrainedModel:()=>r.Wav2Vec2BertPreTrainedModel,Wav2Vec2CTCTokenizer:()=>n.Wav2Vec2CTCTokenizer,Wav2Vec2FeatureExtractor:()=>d.Wav2Vec2FeatureExtractor,Wav2Vec2ForAudioFrameClassification:()=>r.Wav2Vec2ForAudioFrameClassification,Wav2Vec2ForCTC:()=>r.Wav2Vec2ForCTC,Wav2Vec2ForSequenceClassification:()=>r.Wav2Vec2ForSequenceClassification,Wav2Vec2Model:()=>r.Wav2Vec2Model,Wav2Vec2PreTrainedModel:()=>r.Wav2Vec2PreTrainedModel,Wav2Vec2Processor:()=>x.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>x.Wav2Vec2ProcessorWithLM,WavLMForAudioFrameClassification:()=>r.WavLMForAudioFrameClassification,WavLMForCTC:()=>r.WavLMForCTC,WavLMForSequenceClassification:()=>r.WavLMForSequenceClassification,WavLMForXVector:()=>r.WavLMForXVector,WavLMModel:()=>r.WavLMModel,WavLMPreTrainedModel:()=>r.WavLMPreTrainedModel,WeSpeakerFeatureExtractor:()=>d.WeSpeakerFeatureExtractor,WeSpeakerResNetModel:()=>r.WeSpeakerResNetModel,WeSpeakerResNetPreTrainedModel:()=>r.WeSpeakerResNetPreTrainedModel,WhisperFeatureExtractor:()=>d.WhisperFeatureExtractor,WhisperForConditionalGeneration:()=>r.WhisperForConditionalGeneration,WhisperModel:()=>r.WhisperModel,WhisperPreTrainedModel:()=>r.WhisperPreTrainedModel,WhisperProcessor:()=>x.WhisperProcessor,WhisperTextStreamer:()=>S.WhisperTextStreamer,WhisperTimeStampLogitsProcessor:()=>T.WhisperTimeStampLogitsProcessor,WhisperTokenizer:()=>n.WhisperTokenizer,XLMForQuestionAnswering:()=>r.XLMForQuestionAnswering,XLMForSequenceClassification:()=>r.XLMForSequenceClassification,XLMForTokenClassification:()=>r.XLMForTokenClassification,XLMModel:()=>r.XLMModel,XLMPreTrainedModel:()=>r.XLMPreTrainedModel,XLMRobertaForMaskedLM:()=>r.XLMRobertaForMaskedLM,XLMRobertaForQuestionAnswering:()=>r.XLMRobertaForQuestionAnswering,XLMRobertaForSequenceClassification:()=>r.XLMRobertaForSequenceClassification,XLMRobertaForTokenClassification:()=>r.XLMRobertaForTokenClassification,XLMRobertaModel:()=>r.XLMRobertaModel,XLMRobertaPreTrainedModel:()=>r.XLMRobertaPreTrainedModel,XLMRobertaTokenizer:()=>n.XLMRobertaTokenizer,XLMTokenizer:()=>n.XLMTokenizer,XLMWithLMHeadModel:()=>r.XLMWithLMHeadModel,XVectorOutput:()=>r.XVectorOutput,YolosFeatureExtractor:()=>g.YolosFeatureExtractor,YolosForObjectDetection:()=>r.YolosForObjectDetection,YolosImageProcessor:()=>g.YolosImageProcessor,YolosModel:()=>r.YolosModel,YolosObjectDetectionOutput:()=>r.YolosObjectDetectionOutput,YolosPreTrainedModel:()=>r.YolosPreTrainedModel,ZeroShotAudioClassificationPipeline:()=>t.ZeroShotAudioClassificationPipeline,ZeroShotClassificationPipeline:()=>t.ZeroShotClassificationPipeline,ZeroShotImageClassificationPipeline:()=>t.ZeroShotImageClassificationPipeline,ZeroShotObjectDetectionPipeline:()=>t.ZeroShotObjectDetectionPipeline,bankers_round:()=>u.bankers_round,cat:()=>l.cat,cos_sim:()=>u.cos_sim,dot:()=>u.dot,dynamic_time_warping:()=>u.dynamic_time_warping,env:()=>e.env,full:()=>l.full,full_like:()=>l.full_like,getKeyValueShapes:()=>i.getKeyValueShapes,hamming:()=>s.hamming,hanning:()=>s.hanning,interpolate:()=>l.interpolate,interpolate_4d:()=>l.interpolate_4d,interpolate_data:()=>u.interpolate_data,is_chinese_char:()=>n.is_chinese_char,layer_norm:()=>l.layer_norm,load_image:()=>o.load_image,load_video:()=>a.load_video,log_softmax:()=>u.log_softmax,magnitude:()=>u.magnitude,matmul:()=>l.matmul,max:()=>u.max,mean:()=>l.mean,mean_pooling:()=>l.mean_pooling,medianFilter:()=>u.medianFilter,mel_filter_bank:()=>s.mel_filter_bank,min:()=>u.min,ones:()=>l.ones,ones_like:()=>l.ones_like,permute:()=>l.permute,permute_data:()=>u.permute_data,pipeline:()=>t.pipeline,quantize_embeddings:()=>l.quantize_embeddings,rand:()=>l.rand,read_audio:()=>s.read_audio,rfft:()=>l.rfft,round:()=>u.round,slice:()=>l.slice,softmax:()=>u.softmax,spectrogram:()=>s.spectrogram,stack:()=>l.stack,std_mean:()=>l.std_mean,topk:()=>l.topk,window_function:()=>s.window_function,zeros:()=>l.zeros,zeros_like:()=>l.zeros_like});var e=xr("./src/env.js"),t=xr("./src/pipelines.js"),r=xr("./src/models.js"),n=xr("./src/tokenizers.js"),i=xr("./src/configs.js"),s=xr("./src/utils/audio.js"),o=xr("./src/utils/image.js"),a=xr("./src/utils/video.js"),l=xr("./src/utils/tensor.js"),u=xr("./src/utils/maths.js"),c=xr("./src/base/feature_extraction_utils.js"),d=xr("./src/models/feature_extractors.js"),h=xr("./src/models/auto/feature_extraction_auto.js"),m=xr("./src/base/image_processors_utils.js"),g=xr("./src/models/image_processors.js"),v=xr("./src/models/auto/image_processing_auto.js"),y=xr("./src/base/processing_utils.js"),x=xr("./src/models/processors.js"),w=xr("./src/models/auto/processing_auto.js"),S=xr("./src/generation/streamers.js"),M=xr("./src/generation/stopping_criteria.js"),T=xr("./src/generation/logits_process.js")})();j.ASTFeatureExtractor;j.ASTForAudioClassification;j.ASTModel;j.ASTPreTrainedModel;j.AlbertForMaskedLM;j.AlbertForQuestionAnswering;j.AlbertForSequenceClassification;j.AlbertModel;j.AlbertPreTrainedModel;j.AlbertTokenizer;j.AudioClassificationPipeline;j.AutoConfig;j.AutoFeatureExtractor;j.AutoImageProcessor;j.AutoModel;j.AutoModelForAudioClassification;j.AutoModelForAudioFrameClassification;j.AutoModelForAudioTextToText;j.AutoModelForCTC;j.AutoModelForCausalLM;j.AutoModelForDepthEstimation;j.AutoModelForDocumentQuestionAnswering;j.AutoModelForImageClassification;j.AutoModelForImageFeatureExtraction;j.AutoModelForImageMatting;j.AutoModelForImageSegmentation;j.AutoModelForImageTextToText;j.AutoModelForImageToImage;j.AutoModelForMaskGeneration;j.AutoModelForMaskedLM;j.AutoModelForNormalEstimation;j.AutoModelForObjectDetection;j.AutoModelForPoseEstimation;j.AutoModelForQuestionAnswering;j.AutoModelForSemanticSegmentation;j.AutoModelForSeq2SeqLM;j.AutoModelForSequenceClassification;j.AutoModelForSpeechSeq2Seq;j.AutoModelForTextToSpectrogram;j.AutoModelForTextToWaveform;j.AutoModelForTokenClassification;j.AutoModelForUniversalSegmentation;j.AutoModelForVision2Seq;j.AutoModelForXVector;j.AutoModelForZeroShotObjectDetection;j.AutoProcessor;j.AutoTokenizer;j.AutomaticSpeechRecognitionPipeline;j.BackgroundRemovalPipeline;j.BartForConditionalGeneration;j.BartForSequenceClassification;j.BartModel;j.BartPretrainedModel;j.BartTokenizer;j.BaseModelOutput;j.BaseStreamer;j.BeitFeatureExtractor;j.BeitForImageClassification;j.BeitModel;j.BeitPreTrainedModel;j.BertForMaskedLM;j.BertForQuestionAnswering;j.BertForSequenceClassification;j.BertForTokenClassification;j.BertModel;j.BertPreTrainedModel;j.BertTokenizer;j.BitImageProcessor;j.BlenderbotForConditionalGeneration;j.BlenderbotModel;j.BlenderbotPreTrainedModel;j.BlenderbotSmallForConditionalGeneration;j.BlenderbotSmallModel;j.BlenderbotSmallPreTrainedModel;j.BlenderbotSmallTokenizer;j.BlenderbotTokenizer;j.BloomForCausalLM;j.BloomModel;j.BloomPreTrainedModel;j.BloomTokenizer;j.CLIPFeatureExtractor;j.CLIPImageProcessor;j.CLIPModel;j.CLIPPreTrainedModel;j.CLIPSegForImageSegmentation;j.CLIPSegModel;j.CLIPSegPreTrainedModel;j.CLIPTextModel;j.CLIPTextModelWithProjection;j.CLIPTokenizer;j.CLIPVisionModel;j.CLIPVisionModelWithProjection;j.CamembertForMaskedLM;j.CamembertForQuestionAnswering;j.CamembertForSequenceClassification;j.CamembertForTokenClassification;j.CamembertModel;j.CamembertPreTrainedModel;j.CamembertTokenizer;j.CausalLMOutput;j.CausalLMOutputWithPast;j.ChineseCLIPFeatureExtractor;j.ChineseCLIPModel;j.ChineseCLIPPreTrainedModel;j.ClapAudioModelWithProjection;j.ClapFeatureExtractor;j.ClapModel;j.ClapPreTrainedModel;j.ClapTextModelWithProjection;j.ClassifierFreeGuidanceLogitsProcessor;j.CodeGenForCausalLM;j.CodeGenModel;j.CodeGenPreTrainedModel;j.CodeGenTokenizer;j.CodeLlamaTokenizer;j.CohereForCausalLM;j.CohereModel;j.CoherePreTrainedModel;j.CohereTokenizer;j.ConvBertForMaskedLM;j.ConvBertForQuestionAnswering;j.ConvBertForSequenceClassification;j.ConvBertForTokenClassification;j.ConvBertModel;j.ConvBertPreTrainedModel;j.ConvBertTokenizer;j.ConvNextFeatureExtractor;j.ConvNextForImageClassification;j.ConvNextImageProcessor;j.ConvNextModel;j.ConvNextPreTrainedModel;j.ConvNextV2ForImageClassification;j.ConvNextV2Model;j.ConvNextV2PreTrainedModel;j.DFineForObjectDetection;j.DFineModel;j.DFinePreTrainedModel;j.DPTFeatureExtractor;j.DPTForDepthEstimation;j.DPTImageProcessor;j.DPTModel;j.DPTPreTrainedModel;j.DacDecoderModel;j.DacDecoderOutput;j.DacEncoderModel;j.DacEncoderOutput;j.DacFeatureExtractor;j.DacModel;j.DacPreTrainedModel;j.DataTypeMap;j.DebertaForMaskedLM;j.DebertaForQuestionAnswering;j.DebertaForSequenceClassification;j.DebertaForTokenClassification;j.DebertaModel;j.DebertaPreTrainedModel;j.DebertaTokenizer;j.DebertaV2ForMaskedLM;j.DebertaV2ForQuestionAnswering;j.DebertaV2ForSequenceClassification;j.DebertaV2ForTokenClassification;j.DebertaV2Model;j.DebertaV2PreTrainedModel;j.DebertaV2Tokenizer;j.DecisionTransformerModel;j.DecisionTransformerPreTrainedModel;j.DeiTFeatureExtractor;j.DeiTForImageClassification;j.DeiTImageProcessor;j.DeiTModel;j.DeiTPreTrainedModel;j.DepthAnythingForDepthEstimation;j.DepthAnythingPreTrainedModel;j.DepthEstimationPipeline;j.DepthProForDepthEstimation;j.DepthProPreTrainedModel;j.DetrFeatureExtractor;j.DetrForObjectDetection;j.DetrForSegmentation;j.DetrImageProcessor;j.DetrModel;j.DetrObjectDetectionOutput;j.DetrPreTrainedModel;j.DetrSegmentationOutput;j.Dinov2ForImageClassification;j.Dinov2Model;j.Dinov2PreTrainedModel;j.Dinov2WithRegistersForImageClassification;j.Dinov2WithRegistersModel;j.Dinov2WithRegistersPreTrainedModel;j.DistilBertForMaskedLM;j.DistilBertForQuestionAnswering;j.DistilBertForSequenceClassification;j.DistilBertForTokenClassification;j.DistilBertModel;j.DistilBertPreTrainedModel;j.DistilBertTokenizer;j.DocumentQuestionAnsweringPipeline;j.DonutFeatureExtractor;j.DonutImageProcessor;j.DonutSwinModel;j.DonutSwinPreTrainedModel;j.EfficientNetForImageClassification;j.EfficientNetImageProcessor;j.EfficientNetModel;j.EfficientNetPreTrainedModel;j.ElectraForMaskedLM;j.ElectraForQuestionAnswering;j.ElectraForSequenceClassification;j.ElectraForTokenClassification;j.ElectraModel;j.ElectraPreTrainedModel;j.ElectraTokenizer;j.EncodecFeatureExtractor;j.EosTokenCriteria;j.EsmForMaskedLM;j.EsmForSequenceClassification;j.EsmForTokenClassification;j.EsmModel;j.EsmPreTrainedModel;j.EsmTokenizer;j.ExaoneForCausalLM;j.ExaoneModel;j.ExaonePreTrainedModel;j.FFT;j.FalconForCausalLM;j.FalconModel;j.FalconPreTrainedModel;j.FalconTokenizer;j.FastViTForImageClassification;j.FastViTModel;j.FastViTPreTrainedModel;j.FeatureExtractionPipeline;j.FeatureExtractor;j.FillMaskPipeline;j.Florence2ForConditionalGeneration;j.Florence2PreTrainedModel;j.Florence2Processor;j.ForcedBOSTokenLogitsProcessor;j.ForcedEOSTokenLogitsProcessor;j.GLPNFeatureExtractor;j.GLPNForDepthEstimation;j.GLPNModel;j.GLPNPreTrainedModel;j.GPT2LMHeadModel;j.GPT2Model;j.GPT2PreTrainedModel;j.GPT2Tokenizer;j.GPTBigCodeForCausalLM;j.GPTBigCodeModel;j.GPTBigCodePreTrainedModel;j.GPTJForCausalLM;j.GPTJModel;j.GPTJPreTrainedModel;j.GPTNeoForCausalLM;j.GPTNeoModel;j.GPTNeoPreTrainedModel;j.GPTNeoXForCausalLM;j.GPTNeoXModel;j.GPTNeoXPreTrainedModel;j.GPTNeoXTokenizer;j.Gemma2ForCausalLM;j.Gemma2Model;j.Gemma2PreTrainedModel;j.Gemma3ForCausalLM;j.Gemma3Model;j.Gemma3PreTrainedModel;j.Gemma3nAudioFeatureExtractor;j.Gemma3nForConditionalGeneration;j.Gemma3nPreTrainedModel;j.Gemma3nProcessor;j.GemmaForCausalLM;j.GemmaModel;j.GemmaPreTrainedModel;j.GemmaTokenizer;j.GlmForCausalLM;j.GlmModel;j.GlmPreTrainedModel;j.GraniteForCausalLM;j.GraniteModel;j.GranitePreTrainedModel;j.Grok1Tokenizer;j.GroundingDinoForObjectDetection;j.GroundingDinoImageProcessor;j.GroundingDinoPreTrainedModel;j.GroundingDinoProcessor;j.GroupViTModel;j.GroupViTPreTrainedModel;j.HeliumForCausalLM;j.HeliumModel;j.HeliumPreTrainedModel;j.HerbertTokenizer;j.HieraForImageClassification;j.HieraModel;j.HieraPreTrainedModel;j.HubertForCTC;j.HubertForSequenceClassification;j.HubertModel;j.HubertPreTrainedModel;j.IJepaForImageClassification;j.IJepaModel;j.IJepaPreTrainedModel;j.Idefics3ForConditionalGeneration;j.Idefics3ImageProcessor;j.Idefics3PreTrainedModel;j.Idefics3Processor;j.ImageClassificationPipeline;j.ImageFeatureExtractionPipeline;j.ImageFeatureExtractor;j.ImageMattingOutput;j.ImageProcessor;j.ImageSegmentationPipeline;j.ImageToImagePipeline;j.ImageToTextPipeline;j.InterruptableStoppingCriteria;j.JAISLMHeadModel;j.JAISModel;j.JAISPreTrainedModel;j.JinaCLIPImageProcessor;j.JinaCLIPModel;j.JinaCLIPPreTrainedModel;j.JinaCLIPProcessor;j.JinaCLIPTextModel;j.JinaCLIPVisionModel;j.LiteWhisperForConditionalGeneration;j.LlamaForCausalLM;j.LlamaModel;j.LlamaPreTrainedModel;j.LlamaTokenizer;j.LlavaForConditionalGeneration;j.LlavaOnevisionForConditionalGeneration;j.LlavaOnevisionImageProcessor;j.LlavaPreTrainedModel;j.LlavaProcessor;j.LlavaQwen2ForCausalLM;j.LogitsProcessor;j.LogitsProcessorList;j.LogitsWarper;j.LongT5ForConditionalGeneration;j.LongT5Model;j.LongT5PreTrainedModel;j.M2M100ForConditionalGeneration;j.M2M100Model;j.M2M100PreTrainedModel;j.M2M100Tokenizer;j.MBart50Tokenizer;j.MBartForCausalLM;j.MBartForConditionalGeneration;j.MBartForSequenceClassification;j.MBartModel;j.MBartPreTrainedModel;j.MBartTokenizer;j.MPNetForMaskedLM;j.MPNetForQuestionAnswering;j.MPNetForSequenceClassification;j.MPNetForTokenClassification;j.MPNetModel;j.MPNetPreTrainedModel;j.MPNetTokenizer;j.MT5ForConditionalGeneration;j.MT5Model;j.MT5PreTrainedModel;j.MarianMTModel;j.MarianModel;j.MarianPreTrainedModel;j.MarianTokenizer;j.Mask2FormerImageProcessor;j.MaskFormerFeatureExtractor;j.MaskFormerForInstanceSegmentation;j.MaskFormerImageProcessor;j.MaskFormerModel;j.MaskFormerPreTrainedModel;j.MaskedLMOutput;j.MaxLengthCriteria;j.Metric3DForDepthEstimation;j.Metric3DPreTrainedModel;j.Metric3Dv2ForDepthEstimation;j.Metric3Dv2PreTrainedModel;j.MgpstrForSceneTextRecognition;j.MgpstrModelOutput;j.MgpstrPreTrainedModel;j.MgpstrProcessor;j.MgpstrTokenizer;j.MimiDecoderModel;j.MimiDecoderOutput;j.MimiEncoderModel;j.MimiEncoderOutput;j.MimiModel;j.MimiPreTrainedModel;j.MinLengthLogitsProcessor;j.MinNewTokensLengthLogitsProcessor;j.MistralForCausalLM;j.MistralModel;j.MistralPreTrainedModel;j.MobileBertForMaskedLM;j.MobileBertForQuestionAnswering;j.MobileBertForSequenceClassification;j.MobileBertModel;j.MobileBertPreTrainedModel;j.MobileBertTokenizer;j.MobileLLMForCausalLM;j.MobileLLMModel;j.MobileLLMPreTrainedModel;j.MobileNetV1FeatureExtractor;j.MobileNetV1ForImageClassification;j.MobileNetV1ForSemanticSegmentation;j.MobileNetV1ImageProcessor;j.MobileNetV1Model;j.MobileNetV1PreTrainedModel;j.MobileNetV2FeatureExtractor;j.MobileNetV2ForImageClassification;j.MobileNetV2ForSemanticSegmentation;j.MobileNetV2ImageProcessor;j.MobileNetV2Model;j.MobileNetV2PreTrainedModel;j.MobileNetV3FeatureExtractor;j.MobileNetV3ForImageClassification;j.MobileNetV3ForSemanticSegmentation;j.MobileNetV3ImageProcessor;j.MobileNetV3Model;j.MobileNetV3PreTrainedModel;j.MobileNetV4FeatureExtractor;j.MobileNetV4ForImageClassification;j.MobileNetV4ForSemanticSegmentation;j.MobileNetV4ImageProcessor;j.MobileNetV4Model;j.MobileNetV4PreTrainedModel;j.MobileViTFeatureExtractor;j.MobileViTForImageClassification;j.MobileViTImageProcessor;j.MobileViTModel;j.MobileViTPreTrainedModel;j.MobileViTV2ForImageClassification;j.MobileViTV2Model;j.MobileViTV2PreTrainedModel;j.ModelOutput;j.ModernBertForMaskedLM;j.ModernBertForSequenceClassification;j.ModernBertForTokenClassification;j.ModernBertModel;j.ModernBertPreTrainedModel;j.Moondream1ForConditionalGeneration;j.MoonshineFeatureExtractor;j.MoonshineForConditionalGeneration;j.MoonshineModel;j.MoonshinePreTrainedModel;j.MoonshineProcessor;j.MptForCausalLM;j.MptModel;j.MptPreTrainedModel;j.MultiModalityCausalLM;j.MultiModalityPreTrainedModel;j.MusicgenForCausalLM;j.MusicgenForConditionalGeneration;j.MusicgenModel;j.MusicgenPreTrainedModel;j.NllbTokenizer;j.NoBadWordsLogitsProcessor;j.NoRepeatNGramLogitsProcessor;j.NomicBertModel;j.NomicBertPreTrainedModel;j.NougatImageProcessor;j.NougatTokenizer;j.OPTForCausalLM;j.OPTModel;j.OPTPreTrainedModel;j.ObjectDetectionPipeline;j.Olmo2ForCausalLM;j.Olmo2Model;j.Olmo2PreTrainedModel;j.OlmoForCausalLM;j.OlmoModel;j.OlmoPreTrainedModel;j.OpenELMForCausalLM;j.OpenELMModel;j.OpenELMPreTrainedModel;j.OwlViTFeatureExtractor;j.OwlViTForObjectDetection;j.OwlViTImageProcessor;j.OwlViTModel;j.OwlViTPreTrainedModel;j.OwlViTProcessor;j.Owlv2ForObjectDetection;j.Owlv2ImageProcessor;j.Owlv2Model;j.Owlv2PreTrainedModel;j.PaliGemmaForConditionalGeneration;j.PaliGemmaPreTrainedModel;j.PaliGemmaProcessor;j.PatchTSMixerForPrediction;j.PatchTSMixerModel;j.PatchTSMixerPreTrainedModel;j.PatchTSTForPrediction;j.PatchTSTModel;j.PatchTSTPreTrainedModel;j.Phi3ForCausalLM;j.Phi3Model;j.Phi3PreTrainedModel;j.Phi3VForCausalLM;j.Phi3VImageProcessor;j.Phi3VPreTrainedModel;j.Phi3VProcessor;j.PhiForCausalLM;j.PhiModel;j.PhiPreTrainedModel;j.Pipeline;j.PreTrainedModel;j.PreTrainedTokenizer;j.PretrainedConfig;j.PretrainedMixin;j.Processor;j.PvtForImageClassification;j.PvtImageProcessor;j.PvtModel;j.PvtPreTrainedModel;j.PyAnnoteFeatureExtractor;j.PyAnnoteForAudioFrameClassification;j.PyAnnoteModel;j.PyAnnotePreTrainedModel;j.PyAnnoteProcessor;j.QuestionAnsweringModelOutput;j.QuestionAnsweringPipeline;j.Qwen2ForCausalLM;j.Qwen2Model;j.Qwen2PreTrainedModel;j.Qwen2Tokenizer;j.Qwen2VLForConditionalGeneration;j.Qwen2VLImageProcessor;j.Qwen2VLPreTrainedModel;j.Qwen2VLProcessor;j.Qwen3ForCausalLM;j.Qwen3Model;j.Qwen3PreTrainedModel;j.RFDetrForObjectDetection;j.RFDetrModel;j.RFDetrObjectDetectionOutput;j.RFDetrPreTrainedModel;j.RTDetrForObjectDetection;j.RTDetrImageProcessor;j.RTDetrModel;j.RTDetrObjectDetectionOutput;j.RTDetrPreTrainedModel;j.RTDetrV2ForObjectDetection;j.RTDetrV2Model;j.RTDetrV2ObjectDetectionOutput;j.RTDetrV2PreTrainedModel;j.RawAudio;j.RawImage;j.RawVideo;j.RawVideoFrame;j.RepetitionPenaltyLogitsProcessor;j.ResNetForImageClassification;j.ResNetModel;j.ResNetPreTrainedModel;j.RoFormerForMaskedLM;j.RoFormerForQuestionAnswering;j.RoFormerForSequenceClassification;j.RoFormerForTokenClassification;j.RoFormerModel;j.RoFormerPreTrainedModel;j.RoFormerTokenizer;j.RobertaForMaskedLM;j.RobertaForQuestionAnswering;j.RobertaForSequenceClassification;j.RobertaForTokenClassification;j.RobertaModel;j.RobertaPreTrainedModel;j.RobertaTokenizer;j.SamImageProcessor;j.SamImageSegmentationOutput;j.SamModel;j.SamPreTrainedModel;j.SamProcessor;j.SapiensForDepthEstimation;j.SapiensForNormalEstimation;j.SapiensForSemanticSegmentation;j.SapiensPreTrainedModel;j.SeamlessM4TFeatureExtractor;j.SegformerFeatureExtractor;j.SegformerForImageClassification;j.SegformerForSemanticSegmentation;j.SegformerImageProcessor;j.SegformerModel;j.SegformerPreTrainedModel;j.Seq2SeqLMOutput;j.SequenceClassifierOutput;j.SiglipImageProcessor;j.SiglipModel;j.SiglipPreTrainedModel;j.SiglipTextModel;j.SiglipTokenizer;j.SiglipVisionModel;j.SmolVLMForConditionalGeneration;j.SmolVLMImageProcessor;j.SmolVLMProcessor;j.SnacDecoderModel;j.SnacEncoderModel;j.SnacFeatureExtractor;j.SnacModel;j.SnacPreTrainedModel;j.SpeechT5FeatureExtractor;j.SpeechT5ForSpeechToText;j.SpeechT5ForTextToSpeech;j.SpeechT5HifiGan;j.SpeechT5Model;j.SpeechT5PreTrainedModel;j.SpeechT5Processor;j.SpeechT5Tokenizer;j.SqueezeBertForMaskedLM;j.SqueezeBertForQuestionAnswering;j.SqueezeBertForSequenceClassification;j.SqueezeBertModel;j.SqueezeBertPreTrainedModel;j.SqueezeBertTokenizer;j.StableLmForCausalLM;j.StableLmModel;j.StableLmPreTrainedModel;j.Starcoder2ForCausalLM;j.Starcoder2Model;j.Starcoder2PreTrainedModel;j.StoppingCriteria;j.StoppingCriteriaList;j.StyleTextToSpeech2Model;j.StyleTextToSpeech2PreTrainedModel;j.SummarizationPipeline;j.SuppressTokensAtBeginLogitsProcessor;j.Swin2SRForImageSuperResolution;j.Swin2SRImageProcessor;j.Swin2SRModel;j.Swin2SRPreTrainedModel;j.SwinForImageClassification;j.SwinForSemanticSegmentation;j.SwinModel;j.SwinPreTrainedModel;j.T5ForConditionalGeneration;j.T5Model;j.T5PreTrainedModel;j.T5Tokenizer;j.TableTransformerForObjectDetection;j.TableTransformerModel;j.TableTransformerObjectDetectionOutput;j.TableTransformerPreTrainedModel;j.TemperatureLogitsWarper;j.Tensor;j.Text2TextGenerationPipeline;j.TextClassificationPipeline;j.TextGenerationPipeline;j.TextStreamer;j.TextToAudioPipeline;j.TokenClassificationPipeline;j.TokenClassifierOutput;j.TokenizerModel;j.TopKLogitsWarper;j.TopPLogitsWarper;j.TrOCRForCausalLM;j.TrOCRPreTrainedModel;j.TranslationPipeline;j.UltravoxModel;j.UltravoxPreTrainedModel;j.UltravoxProcessor;j.UniSpeechForCTC;j.UniSpeechForSequenceClassification;j.UniSpeechModel;j.UniSpeechPreTrainedModel;j.UniSpeechSatForAudioFrameClassification;j.UniSpeechSatForCTC;j.UniSpeechSatForSequenceClassification;j.UniSpeechSatModel;j.UniSpeechSatPreTrainedModel;j.VLChatProcessor;j.VLMImageProcessor;j.ViTFeatureExtractor;j.ViTForImageClassification;j.ViTImageProcessor;j.ViTMAEModel;j.ViTMAEPreTrainedModel;j.ViTMSNForImageClassification;j.ViTMSNModel;j.ViTMSNPreTrainedModel;j.ViTModel;j.ViTPreTrainedModel;j.VisionEncoderDecoderModel;j.VitMatteForImageMatting;j.VitMatteImageProcessor;j.VitMattePreTrainedModel;j.VitPoseForPoseEstimation;j.VitPoseImageProcessor;j.VitPosePreTrainedModel;j.VitsModel;j.VitsModelOutput;j.VitsPreTrainedModel;j.VitsTokenizer;j.Wav2Vec2BertForCTC;j.Wav2Vec2BertForSequenceClassification;j.Wav2Vec2BertModel;j.Wav2Vec2BertPreTrainedModel;j.Wav2Vec2CTCTokenizer;j.Wav2Vec2FeatureExtractor;j.Wav2Vec2ForAudioFrameClassification;j.Wav2Vec2ForCTC;j.Wav2Vec2ForSequenceClassification;j.Wav2Vec2Model;j.Wav2Vec2PreTrainedModel;j.Wav2Vec2Processor;j.Wav2Vec2ProcessorWithLM;j.WavLMForAudioFrameClassification;j.WavLMForCTC;j.WavLMForSequenceClassification;j.WavLMForXVector;j.WavLMModel;j.WavLMPreTrainedModel;j.WeSpeakerFeatureExtractor;j.WeSpeakerResNetModel;j.WeSpeakerResNetPreTrainedModel;j.WhisperFeatureExtractor;j.WhisperForConditionalGeneration;j.WhisperModel;j.WhisperPreTrainedModel;j.WhisperProcessor;j.WhisperTextStreamer;j.WhisperTimeStampLogitsProcessor;j.WhisperTokenizer;j.XLMForQuestionAnswering;j.XLMForSequenceClassification;j.XLMForTokenClassification;j.XLMModel;j.XLMPreTrainedModel;j.XLMRobertaForMaskedLM;j.XLMRobertaForQuestionAnswering;j.XLMRobertaForSequenceClassification;j.XLMRobertaForTokenClassification;j.XLMRobertaModel;j.XLMRobertaPreTrainedModel;j.XLMRobertaTokenizer;j.XLMTokenizer;j.XLMWithLMHeadModel;j.XVectorOutput;j.YolosFeatureExtractor;j.YolosForObjectDetection;j.YolosImageProcessor;j.YolosModel;j.YolosObjectDetectionOutput;j.YolosPreTrainedModel;j.ZeroShotAudioClassificationPipeline;j.ZeroShotClassificationPipeline;j.ZeroShotImageClassificationPipeline;j.ZeroShotObjectDetectionPipeline;j.bankers_round;j.cat;j.cos_sim;j.dot;j.dynamic_time_warping;var eQ=j.env;j.full;j.full_like;j.getKeyValueShapes;j.hamming;j.hanning;j.interpolate;j.interpolate_4d;j.interpolate_data;j.is_chinese_char;j.layer_norm;j.load_image;j.load_video;j.log_softmax;j.magnitude;j.matmul;j.max;j.mean;j.mean_pooling;j.medianFilter;j.mel_filter_bank;j.min;j.ones;j.ones_like;j.permute;j.permute_data;var lj=j.pipeline;j.quantize_embeddings;j.rand;j.read_audio;j.rfft;j.round;j.slice;j.softmax;j.spectrogram;j.stack;j.std_mean;j.topk;j.window_function;j.zeros;j.zeros_like;eQ.allowLocalModels=!1;eQ.useBrowserCache=!1;const Kp=1024,Fve=()=>{const[e,t]=$.useState(!1),[r,n]=$.useState(0),i=(l,u,c)=>{let d=c.naturalWidth,h=c.naturalHeight;return(d>Kp||h>Kp)&&(d>h?(h=Math.round(h*Kp/d),d=Kp):(d=Math.round(d*Kp/h),h=Kp)),l.width=d,l.height=h,u.drawImage(c,0,0,d,h),{width:d,height:h}},s=async l=>{n(20),console.log("Starting background removal...");const u=await lj("image-segmentation","Xenova/segformer-b0-finetuned-ade-512-512",{device:"webgpu"});n(40);const c=document.createElement("canvas"),d=c.getContext("2d");if(!d)throw new Error("Could not get canvas context");const h=new Image;await new Promise((S,M)=>{h.onload=S,h.onerror=M,h.src=URL.createObjectURL(l)}),i(c,d,h),n(60);const m=c.toDataURL("image/jpeg",.8),g=await u(m);if(n(80),!g||!Array.isArray(g)||g.length===0||!g[0].mask)throw new Error("Invalid segmentation result");const v=document.createElement("canvas");v.width=c.width,v.height=c.height;const y=v.getContext("2d");if(!y)throw new Error("Could not get output canvas context");y.drawImage(c,0,0);const x=y.getImageData(0,0,v.width,v.height),w=x.data;for(let S=0;S<g[0].mask.data.length;S++){const M=Math.round((1-g[0].mask.data[S])*255);w[S*4+3]=M}return y.putImageData(x,0,0),n(90),v.toDataURL("image/png")},o=l=>new Promise(u=>{const c=document.createElement("canvas"),d=c.getContext("2d"),h=new Image;h.onload=()=>{if(!d)return u([]);c.width=h.width,c.height=h.height,d.drawImage(h,0,0);const g=d.getImageData(0,0,c.width,c.height).data,v={};let y=0;for(let w=0;w<g.length;w+=32){const S=g[w],M=g[w+1],T=g[w+2];if(g[w+3]<128)continue;const E=Math.round(S/16)*16,A=Math.round(M/16)*16,L=Math.round(T/16)*16,B=`${E},${A},${L}`;v[B]=(v[B]||0)+1,y++}const x=Object.entries(v).sort(([,w],[,S])=>S-w).slice(0,5).map(([w,S])=>{const[M,T,P]=w.split(",").map(Number),E=`#${M.toString(16).padStart(2,"0")}${T.toString(16).padStart(2,"0")}${P.toString(16).padStart(2,"0")}`,A=Math.round(S/y*100);return{hex:E,name:Bve(M,T,P),rgb:{r:M,g:T,b:P},percentage:A}});u(x)},h.src=l});return{processImage:async l=>{t(!0),n(0);try{const u=URL.createObjectURL(l);n(10);const c=await s(l),d=await o(c);return n(100),{originalImage:u,processedImage:c,dominantColors:d,primaryColor:d[0]||{hex:"#000000",name:"Black",rgb:{r:0,g:0,b:0},percentage:0}}}finally{t(!1),n(0)}},isProcessing:e,progress:r}},Bve=(e,t,r)=>{const n=[{name:"Crimson Red",r:220,g:20,b:60},{name:"Cherry Red",r:222,g:49,b:99},{name:"Burgundy",r:128,g:0,b:32},{name:"Rose Red",r:255,g:102,b:102},{name:"Scarlet",r:255,g:36,b:0},{name:"Royal Blue",r:65,g:105,b:225},{name:"Navy Blue",r:0,g:0,b:128},{name:"Sky Blue",r:135,g:206,b:235},{name:"Deep Blue",r:0,g:0,b:139},{name:"Teal Blue",r:0,g:128,b:128},{name:"Powder Blue",r:176,g:224,b:230},{name:"Forest Green",r:34,g:139,b:34},{name:"Emerald Green",r:80,g:200,b:120},{name:"Olive Green",r:128,g:128,b:0},{name:"Mint Green",r:152,g:251,b:152},{name:"Sage Green",r:154,g:205,b:50},{name:"Lavender",r:230,g:230,b:250},{name:"Coral",r:255,g:127,b:80},{name:"Peach",r:255,g:218,b:185},{name:"Cream",r:255,g:253,b:208},{name:"Beige",r:245,g:245,b:220},{name:"Charcoal",r:54,g:69,b:79},{name:"Ivory",r:255,g:255,b:240},{name:"Red",r:255,g:0,b:0},{name:"Blue",r:0,g:0,b:255},{name:"Green",r:0,g:255,b:0},{name:"Yellow",r:255,g:255,b:0},{name:"Purple",r:128,g:0,b:128},{name:"Orange",r:255,g:165,b:0},{name:"Pink",r:255,g:192,b:203},{name:"Black",r:0,g:0,b:0},{name:"White",r:255,g:255,b:255},{name:"Gray",r:128,g:128,b:128},{name:"Brown",r:165,g:42,b:42}];let i="Unknown",s=1/0;return n.forEach(o=>{const a=Math.sqrt(Math.pow(e-o.r,2)+Math.pow(t-o.g,2)+Math.pow(r-o.b,2));a<s&&(s=a,i=o.name)}),i},zve=()=>{const[e,t]=$.useState(!1),[r,n]=$.useState(0);return{detectPattern:async s=>{t(!0),n(20);try{const o=await lj("image-classification","Xenova/vit-base-patch16-224",{progress_callback:c=>{c.status==="progress"&&n(20+(c.progress||0)*.6)}});n(80);const a=URL.createObjectURL(s),l=await o(a);n(90),URL.revokeObjectURL(a);const u=Uve(l);return n(100),u}catch(o){return console.error("Error detecting pattern:",o),{pattern:"solid",confidence:.5,styleTags:["casual"]}}finally{t(!1),setTimeout(()=>n(0),500)}},isProcessing:e,progress:r}};function Uve(e){const t={striped:["stripe","striped","lines","horizontal","vertical"],floral:["floral","flower","botanical","rose","daisy"],geometric:["geometric","triangle","circle","square","pattern"],plaid:["plaid","checkered","tartan","gingham"],polkadot:["dot","polka","spotted"],animal:["leopard","zebra","snake","animal print"],abstract:["abstract","artistic","modern"],solid:["solid","plain","uniform"]},r={casual:["t-shirt","jeans","casual","everyday"],formal:["suit","dress","formal","elegant","blazer"],sporty:["athletic","sport","gym","active"],bohemian:["boho","hippie","ethnic","tribal"],vintage:["vintage","retro","classic"],modern:["modern","contemporary","minimalist"]};let n="solid",i=0;const s=[];for(const o of e.slice(0,5)){const a=o.label.toLowerCase(),l=o.score;for(const[u,c]of Object.entries(t))c.some(d=>a.includes(d))&&l>i&&(n=u,i=l);for(const[u,c]of Object.entries(r))c.some(d=>a.includes(d))&&(s.includes(u)||s.push(u))}return s.length===0&&s.push("casual"),{pattern:n,confidence:i||.5,styleTags:s}}const Vve=()=>{const[e,t]=$.useState(!1),r=async(a,l,u)=>{t(!0);try{const c=await lj("image-classification","Xenova/vit-base-patch16-224"),d=URL.createObjectURL(a),h=await c(d);URL.revokeObjectURL(d);const m={};return(l==="Tops"||l==="Dresses"||l==="Outerwear")&&(m.sleeveType=n(h,u)),l==="Bottoms"&&(m.pantStyle=i(h,u)),(l==="Tops"||l==="Dresses")&&(m.neckline=s(h)),["Tops","Bottoms","Dresses","Outerwear"].includes(l)&&(m.fit=o(h)),m}catch(c){return console.error("Attribute detection error:",c),{}}finally{t(!1)}},n=(a,l)=>{const u=a.map(c=>c.label.toLowerCase());return u.some(c=>c.includes("tank")||c.includes("sleeveless"))?"Sleeveless":u.some(c=>c.includes("short sleeve")||l?.toLowerCase().includes("t-shirt"))?"Short Sleeve":u.some(c=>c.includes("long sleeve")||c.includes("sweater"))?"Long Sleeve":u.some(c=>c.includes("three quarter")||c.includes("3/4"))?"3/4 Sleeve":"Regular"},i=(a,l)=>{const u=a.map(d=>d.label.toLowerCase()),c=l?.toLowerCase()||"";return c.includes("jean")||u.some(d=>d.includes("jean"))?"Denim":u.some(d=>d.includes("wide")||d.includes("palazzo"))?"Wide Leg":u.some(d=>d.includes("bell")||d.includes("flare"))?"Bell Bottom":u.some(d=>d.includes("straight"))?"Straight Fit":u.some(d=>d.includes("skinny")||d.includes("tight"))?"Skinny":u.some(d=>d.includes("boot"))?"Bootcut":c.includes("legging")?"Leggings":"Regular"},s=a=>{const l=a.map(u=>u.label.toLowerCase());return l.some(u=>u.includes("v-neck")||u.includes("vneck"))?"V-Neck":l.some(u=>u.includes("crew")||u.includes("round"))?"Crew Neck":l.some(u=>u.includes("turtle"))?"Turtleneck":l.some(u=>u.includes("scoop"))?"Scoop Neck":l.some(u=>u.includes("collar")||u.includes("button"))?"Collared":l.some(u=>u.includes("off shoulder"))?"Off-Shoulder":"Regular"},o=a=>{const l=a.map(u=>u.label.toLowerCase());return l.some(u=>u.includes("oversized")||u.includes("loose"))?"Oversized":l.some(u=>u.includes("slim")||u.includes("fitted"))?"Slim Fit":l.some(u=>u.includes("relaxed"))?"Relaxed":l.some(u=>u.includes("tight")||u.includes("body"))?"Fitted":"Regular"};return{detectAttributes:r,isProcessing:e}},Wve=()=>{const[e,t]=$.useState(!1),r=async i=>{t(!0);try{const{data:s,error:o}=await Mr.functions.invoke("generate-item-name",{body:{details:i}});if(o)throw o;return s.name||n(i)}catch(s){return console.error("Error generating name:",s),n(i)}finally{t(!1)}},n=i=>{const s=[];return i.color&&s.push(i.color),i.pattern&&i.pattern!=="solid"&&s.push(i.pattern),i.material&&s.push(i.material),i.sleeveType&&s.push(i.sleeveType),i.pantStyle&&s.push(i.pantStyle),i.neckline&&s.push(i.neckline),i.fit&&s.push(i.fit),s.push(i.subcategory||i.category),s.join(" ")};return{generateName:r,isGenerating:e}},Gve=({result:e,onColorSelect:t,selectedColor:r})=>(ro(),_.jsxs("div",{className:"space-y-4",children:[_.jsxs(TH,{defaultValue:"processed",className:"w-full",children:[_.jsxs(vI,{className:"grid w-full grid-cols-2",children:[_.jsx(vm,{value:"original",children:"Original"}),_.jsx(vm,{value:"processed",children:"Processed"})]}),_.jsx(ym,{value:"original",className:"mt-4",children:_.jsx(Er,{children:_.jsx(Nr,{className:"p-4",children:_.jsx("img",{src:e.originalImage,alt:"Original",className:"w-full h-48 object-cover rounded-lg"})})})}),_.jsx(ym,{value:"processed",className:"mt-4",children:_.jsx(Er,{children:_.jsx(Nr,{className:"p-4",children:_.jsx("img",{src:e.processedImage,alt:"Background removed",className:"w-full h-48 object-cover rounded-lg bg-gray-100"})})})})]}),_.jsxs(Er,{children:[_.jsx(Qf,{children:_.jsxs(Jf,{className:"flex items-center gap-2",children:[_.jsx(Sw,{className:"h-5 w-5"}),"Choose the Best Matching Color"]})}),_.jsx(Nr,{children:_.jsx("div",{className:"flex flex-wrap gap-2",children:e.dominantColors.map((n,i)=>{const s=r?.hex===n.hex;return _.jsxs("div",{className:`relative cursor-pointer transition-all ${s?"scale-110 ring-2 ring-primary ring-offset-2":"hover:scale-105"}`,onClick:()=>t(n),children:[_.jsx("div",{className:"w-12 h-12 rounded-lg border-2 border-border",style:{backgroundColor:n.hex}}),s&&_.jsx("div",{className:"absolute -top-1 -right-1 bg-primary rounded-full w-5 h-5 flex items-center justify-center",children:_.jsx(qx,{className:"h-3 w-3 text-white"})}),i===0&&_.jsx("div",{className:"absolute -bottom-1 -right-1 bg-secondary rounded-full w-4 h-4 flex items-center justify-center",children:_.jsx("div",{className:"w-2 h-2 bg-secondary-foreground rounded-full"})})]},i)})})})]})]})),qve={general:["Getting you slayed... ","Cooking up some looks... ","Serving fashion realness... ","Making magic happen... ","Your outfit is about to be iconic... ","Preparing your slay... ","Fashion loading... please wait gorgeous! ","Curating your moment... "],weather:["Checking the weather vibes... ","Finding your weather-perfect lewk... ","Matching you to the forecast... ","Weather-checking your style... ","Climate coordinating your outfit... "],outfit:["Styling your perfect combo... ","Curating your fit... ","Assembling your lewk... ","Creating outfit magic... ","Your style moment loading... "],upload:["Analyzing your gorgeous piece... ","Reading the fashion tea... ","Processing your style... ","Getting the deets on your item... ","Fashion scanning in progress... "],colors:["Detecting those stunning colors... ","Reading your color palette... ","Finding your perfect hues... ","Color-coding your vibe... "],save:["Saving to your style vault... ","Adding to your fashion arsenal... ","Storing your iconic piece... ","Your wardrobe is expanding... "]},Wf=e=>{const t=qve[e];return t[Math.floor(Math.random()*t.length)]},tQ=({editItem:e,onSave:t})=>{const[r,n]=$.useState(e?.name||""),[i,s]=$.useState(e?.category||""),[o,a]=$.useState(e?.subcategory||""),[l,u]=$.useState(e?.seasons||[]),[c,d]=$.useState(e?.occasions||[]),[h,m]=$.useState(e?.size||""),[g,v]=$.useState(e?.material||""),[y,x]=$.useState(e?.notes||""),[w,S]=$.useState(null),[M,T]=$.useState({name:e?.color||"",hex:e?.hex_color||""}),[P,E]=$.useState(null),[A,L]=$.useState(!1),[B,V]=$.useState(!1),[G,z]=$.useState(""),K=js(),{user:J}=Oa(),{addItem:X,updateItem:Q}=td(),{processImage:W,isProcessing:oe,progress:ce}=Fve(),{detectPattern:D,isProcessing:U}=zve(),{detectAttributes:te,isProcessing:ee}=Vve(),{generateName:pe,isGenerating:Oe}=Wve(),{toast:xe}=ro(),[Ie,Pe]=$.useState(e?.pattern||""),[he,re]=$.useState(e?.style_tags||[]),[ue,ae]=$.useState(e?.sleeve_type||""),[Ce,$e]=$.useState(e?.pant_style||""),[Ne,Le]=$.useState(e?.neckline||""),[Ve,He]=$.useState(e?.fit||""),Qe=["Tops","Bottoms","Dresses","Outerwear","Shoes","Accessories","Sleepwear","Corsets & Vests","Traditional/Cultural"],et={Tops:["T-shirt","Shirt","Blouse","Sweater","Tank Top","Hoodie","Crop Top","Tunic"],Bottoms:["Jeans","Pants","Shorts","Skirt","Leggings","Palazzo","Dhoti"],Dresses:["Casual","Formal","Maxi","Mini","Midi","Gown","Sundress"],Outerwear:["Jacket","Coat","Blazer","Cardigan","Shawl","Cape"],Shoes:["Sneakers","Boots","Heels","Flats","Sandals","Loafers","Mojari"],Accessories:["Bag","Hat","Scarf","Belt","Jewelry","Watch","Sunglasses","Dupatta"],Sleepwear:["Pajamas","Nightgown","Robe","Loungewear"],"Corsets & Vests":["Corset","Vest","Waistcoat"],"Traditional/Cultural":["Kurti","Salwar Suit","Saree","Lehenga","Anarkali","Churidar","Sherwani","Kurta","Pathani Suit","Kimono","Hanbok","Kaftan","Abaya","Thobe"]},ot=["Spring","Summer","Fall","Winter"],Xe=["Casual","Work","Formal","Party","Date","Workout"],lt=async We=>{if(We){V(!0);try{const Ze=`${M.name||"colored"} ${i.toLowerCase()} ${o?`(${o.toLowerCase()})`:""} ${g?`made of ${g.toLowerCase()}`:""}`.trim();x(Ze),xe({title:"Description generated!",description:"Auto-generated description has been added to notes."})}catch(Ze){console.error("Error generating description:",Ze),xe({title:"Description generation failed",description:"You can add a description manually.",variant:"destructive"})}finally{V(!1)}}},_t=async We=>{const Ze=We.target.files?.[0];if(Ze){if(!Ze.type.startsWith("image/")){xe({title:"Invalid file type",description:"Please select an image file.",variant:"destructive"});return}S(Ze);try{const Pt=await W(Ze);E(Pt),Pt.primaryColor&&T({name:Pt.primaryColor.name,hex:Pt.primaryColor.hex});const Zt=await D(Ze);if(Pe(Zt.pattern),re(Zt.styleTags),i){xe({title:"Analyzing details...",description:"Detecting sleeves, fit, and style details"});const Rt=await te(Ze,i,o);Rt.sleeveType&&ae(Rt.sleeveType),Rt.pantStyle&&$e(Rt.pantStyle),Rt.neckline&&Le(Rt.neckline),Rt.fit&&He(Rt.fit);const Kr=await pe({category:i,subcategory:o,color:Pt.primaryColor?.name||M.name,pattern:Zt.pattern,material:g,sleeveType:Rt.sleeveType,pantStyle:Rt.pantStyle,neckline:Rt.neckline,fit:Rt.fit});r||n(Kr),xe({title:"Analysis complete!",description:"Auto-generated name and detected all attributes"})}}catch(Pt){console.error("Detection error:",Pt),xe({title:"Analysis warning",description:"Some features may be limited. You can still add the item.",variant:"destructive"})}}},dt=We=>{T({name:We.name,hex:We.hex}),xe({title:"Color selected!",description:`Selected ${We.name} as the primary color.`})},xt=async We=>{if(!J)throw new Error("No user found");const Ze=We.name.split(".").pop(),Pt=`${J.id}/${Date.now()}.${Ze}`,{error:Zt}=await Mr.storage.from("clothing-images").upload(Pt,We);if(Zt)throw Zt;const{data:Rt}=Mr.storage.from("clothing-images").getPublicUrl(Pt);return Rt.publicUrl},gt=async We=>{if(We.preventDefault(),!r.trim()||!i){xe({title:"Required fields missing",description:"Please fill in the name and category.",variant:"destructive"});return}L(!0),z(Wf("save"));try{let Ze=e?.image_url||"";w&&(Ze=await xt(w));const Pt={name:r.trim(),category:i,subcategory:o||void 0,color:M.name||"Unknown",hex_color:M.hex||"#808080",pattern:Ie||"solid",style_tags:he.length>0?he:void 0,sleeve_type:ue||void 0,pant_style:Ce||void 0,neckline:Ne||void 0,fit:Ve||void 0,size:h.trim()||void 0,material:g.trim()||void 0,seasons:l.length>0?l:void 0,occasions:c.length>0?c:void 0,image_url:Ze||void 0,notes:y.trim()||void 0,is_favorite:e?.is_favorite||!1};e?(await Q(e.id,Pt),xe({title:"Item updated!",description:"Your clothing item has been updated."}),t&&t(Pt)):(await X(Pt),xe({title:"Item added!",description:"Your clothing item has been added to your wardrobe."})),K("/wardrobe")}catch(Ze){console.error("Error saving item:",Ze),xe({title:`Error ${e?"updating":"adding"} item`,description:"Please try again.",variant:"destructive"})}finally{L(!1)}};return _.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-outfit-primary/5 to-outfit-secondary/5 p-4 space-y-6 pb-20",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx(Yt,{variant:"ghost",size:"icon",onClick:()=>K(-1),children:_.jsx(Eu,{className:"h-5 w-5"})}),_.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-outfit-primary to-outfit-secondary bg-clip-text text-transparent",children:e?"Edit Item":"Add Item"}),_.jsx("div",{className:"w-10"})]}),_.jsxs("form",{onSubmit:gt,className:"space-y-6",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Photo"}),_.jsxs("div",{className:"space-y-4",children:[_.jsx(Er,{className:"border-2 border-dashed cursor-pointer hover:bg-accent/50 transition-all interactive-card",onClick:()=>document.getElementById("file-input")?.click(),children:_.jsx(Nr,{className:"p-6 text-center",children:w||e?.image_url?_.jsxs("div",{className:"space-y-2",children:[_.jsx("img",{src:w?URL.createObjectURL(w):e?.image_url,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg mx-auto"}),_.jsx("p",{className:"text-sm text-muted-foreground",children:w?w.name:"Current image"}),M.hex&&_.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[_.jsx("div",{className:"w-5 h-5 rounded-full border border-gray-300",style:{backgroundColor:M.hex}}),_.jsx("span",{className:"text-sm font-medium",children:M.name})]})]}):_.jsxs("div",{className:"space-y-2",children:[_.jsx(Yte,{className:"h-12 w-12 mx-auto text-muted-foreground"}),_.jsx("p",{className:"text-sm text-muted-foreground",children:"Tap to upload a photo"})]})})}),_.jsx("input",{id:"file-input",type:"file",accept:"image/*",onChange:_t,className:"hidden"}),_.jsxs(Yt,{type:"button",variant:"outline",className:"w-full mt-2",onClick:()=>{const We=document.createElement("input");We.type="file",We.accept="image/*",We.capture="environment",We.onchange=Ze=>{const Pt=Ze.target.files?.[0];Pt&&(S(Pt),_t({target:{files:[Pt]}}))},We.click()},children:[_.jsx($te,{className:"h-4 w-4 mr-2"}),"Take Photo"]})]}),(oe||U||ee||Oe)&&_.jsxs("div",{className:"space-y-3 p-4 bg-gradient-to-r from-outfit-primary/10 to-outfit-secondary/10 rounded-lg",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Sw,{className:"h-4 w-4 text-outfit-primary animate-pulse"}),_.jsx("span",{className:"text-sm font-medium text-outfit-primary",children:oe?Wf("colors"):U?"Detecting patterns...":ee?"Analyzing sleeves, fit & style...":"Generating name..."})]}),_.jsx(h9,{value:ce,className:"w-full"}),_.jsx("p",{className:"text-xs text-muted-foreground",children:oe?Wf("upload"):"AI is analyzing your item to make adding clothes super easy"})]}),(Ie||ue||Ce||Ne||Ve)&&_.jsxs("div",{className:"p-3 bg-accent/50 rounded-lg border border-primary/20 space-y-1",children:[_.jsx("p",{className:"text-sm font-medium mb-2",children:" AI Detected Attributes:"}),Ie&&_.jsxs("p",{className:"text-sm",children:[_.jsx("span",{className:"font-medium",children:"Pattern:"})," ",Ie]}),ue&&_.jsxs("p",{className:"text-sm",children:[_.jsx("span",{className:"font-medium",children:"Sleeves:"})," ",ue]}),Ce&&_.jsxs("p",{className:"text-sm",children:[_.jsx("span",{className:"font-medium",children:"Pant Style:"})," ",Ce]}),Ne&&_.jsxs("p",{className:"text-sm",children:[_.jsx("span",{className:"font-medium",children:"Neckline:"})," ",Ne]}),Ve&&_.jsxs("p",{className:"text-sm",children:[_.jsx("span",{className:"font-medium",children:"Fit:"})," ",Ve]}),he.length>0&&_.jsxs("p",{className:"text-sm",children:[_.jsx("span",{className:"font-medium",children:"Style Tags:"})," ",he.join(", ")]})]}),P&&_.jsx(Gve,{result:P,onColorSelect:dt,selectedColor:M})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium",children:"Item Name *"}),_.jsx(hs,{value:r,onChange:We=>n(We.target.value),placeholder:"e.g., Blue Cotton T-shirt",className:"mt-1"})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium",children:"Category *"}),_.jsxs(Io,{value:i,onValueChange:s,children:[_.jsx(Qs,{className:"mt-1",children:_.jsx(jo,{placeholder:"Select category"})}),_.jsx(Js,{children:Qe.map(We=>_.jsx(Vt,{value:We,children:We},We))})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium",children:"Subcategory"}),_.jsxs(Io,{value:o,onValueChange:a,children:[_.jsx(Qs,{className:"mt-1",children:_.jsx(jo,{placeholder:"Select subcategory"})}),_.jsx(Js,{children:i&&et[i]?.map(We=>_.jsx(Vt,{value:We,children:We},We))})]})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium",children:"Seasons"}),_.jsx(Yy,{options:ot,selected:l,onChange:u,placeholder:"Select seasons"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium",children:"Occasions"}),_.jsx(Yy,{options:Xe,selected:c,onChange:d,placeholder:"Select occasions"})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium",children:"Size"}),_.jsx(hs,{value:h,onChange:We=>m(We.target.value),placeholder:"e.g., M, L, XL",className:"mt-1"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium",children:"Material"}),_.jsx(hs,{value:g,onChange:We=>v(We.target.value),placeholder:"e.g., Cotton",className:"mt-1"})]})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsx("label",{className:"text-sm font-medium",children:"Notes"}),w&&i&&_.jsxs(Yt,{type:"button",variant:"outline",size:"sm",onClick:()=>lt(w),disabled:B,className:"flex items-center gap-1",children:[_.jsx(Do,{className:"h-3 w-3"}),B?"Generating...":"Auto-describe"]})]}),_.jsx(p0,{value:y,onChange:We=>x(We.target.value),placeholder:"Any additional notes...",className:"mt-1",rows:3})]})]}),_.jsx(Yt,{type:"submit",className:"w-full interactive-card",disabled:A||!r.trim()||!i,children:A?_.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[_.jsxs("span",{children:[e?"Updating":"Adding"," Item..."]}),_.jsx("span",{className:"text-xs opacity-75",children:G})]}):`${e?"Update":"Add to"} Wardrobe`})]})]})};var Hve="Separator",X3="horizontal",Kve=["horizontal","vertical"],rQ=$.forwardRef((e,t)=>{const{decorative:r,orientation:n=X3,...i}=e,s=Xve(n)?n:X3,a=r?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return _.jsx(Qt.div,{"data-orientation":s,...a,...i,ref:t})});rQ.displayName=Hve;function Xve(e){return Kve.includes(e)}var nQ=rQ;const LO=$.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},i)=>_.jsx(nQ,{ref:i,decorative:r,orientation:t,className:Kt("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));LO.displayName=nQ.displayName;const Yve=o0("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Fi({className:e,variant:t,...r}){return _.jsx("div",{className:Kt(Yve({variant:t}),e),...r})}const Qve=()=>{const{id:e}=A6(),t=js(),{items:r,updateItem:n,deleteItem:i}=td(),{toast:s}=ro(),[o,a]=$.useState(!1),l=r.find(m=>m.id===e),u=()=>{a(!1)},c=async()=>{if(l&&window.confirm("Are you sure you want to delete this item?"))try{await i(l.id),s({title:"Item deleted",description:"The item has been removed from your wardrobe."}),t("/wardrobe")}catch{s({title:"Error deleting item",description:"Please try again.",variant:"destructive"})}},d=async()=>{if(l)try{await n(l.id,{is_favorite:!l.is_favorite}),s({title:l.is_favorite?"Removed from favorites":"Added to favorites",description:l.is_favorite?"Item removed from favorites.":"Item added to favorites."})}catch{s({title:"Error updating item",description:"Please try again.",variant:"destructive"})}},h=async()=>{if(l)try{await n(l.id,{times_worn:l.times_worn+1,last_worn:new Date().toISOString().split("T")[0]}),s({title:"Item marked as worn",description:"Your wear count has been updated."})}catch{s({title:"Error updating item",description:"Please try again.",variant:"destructive"})}};return l?o?_.jsx(tQ,{editItem:l,onSave:u}):_.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[_.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_.jsx(Yt,{variant:"ghost",size:"icon",onClick:()=>t(-1),children:_.jsx(Eu,{className:"h-5 w-5"})}),_.jsx("h1",{className:"text-xl font-bold",children:"Item Details"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx(Yt,{variant:"ghost",size:"icon",onClick:d,children:_.jsx(i_,{className:`h-5 w-5 ${l.is_favorite?"fill-red-500 text-red-500":""}`})}),_.jsx(Yt,{variant:"ghost",size:"icon",onClick:()=>a(!0),children:_.jsx(P8,{className:"h-5 w-5"})})]})]}),_.jsx("div",{className:"aspect-square w-full overflow-hidden bg-muted rounded-md",children:l.image_url?_.jsx("img",{src:l.image_url,alt:l.name,className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full flex items-center justify-center",children:_.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-gray-300",style:{backgroundColor:l.hex_color||l.color}})})}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold",children:l.name}),_.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[_.jsx(Fi,{children:l.category}),l.subcategory&&_.jsx(Fi,{variant:"outline",children:l.subcategory}),_.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:l.hex_color||l.color}})]})]}),_.jsx(LO,{}),_.jsxs("div",{className:"space-y-4",children:[l.size&&_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Size"}),_.jsx("p",{children:l.size})]}),l.material&&_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Material"}),_.jsx("p",{children:l.material})]}),l.seasons&&l.seasons.length>0&&_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Seasons"}),_.jsx("div",{className:"flex gap-1 flex-wrap",children:l.seasons.map(m=>_.jsx(Fi,{variant:"outline",className:"text-xs",children:m},m))})]}),l.occasions&&l.occasions.length>0&&_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Occasions"}),_.jsx("div",{className:"flex gap-1 flex-wrap",children:l.occasions.map(m=>_.jsx(Fi,{variant:"outline",className:"text-xs",children:m},m))})]}),l.notes&&_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),_.jsx("p",{children:l.notes})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Date Added"}),_.jsx("p",{children:new Date(l.created_at).toLocaleDateString()})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Times Worn"}),_.jsx("p",{children:l.times_worn})]})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Last Worn"}),_.jsx("p",{children:l.last_worn?new Date(l.last_worn).toLocaleDateString():"Never"})]})]}),_.jsx(LO,{}),_.jsxs("div",{className:"space-y-3",children:[_.jsx(Yt,{onClick:h,className:"w-full",children:"Mark as Worn Today"}),_.jsxs(Yt,{variant:"destructive",onClick:c,className:"w-full flex items-center gap-2",children:[_.jsx(E8,{className:"h-4 w-4"}),"Remove from Wardrobe"]})]})]}):_.jsxs("div",{className:"p-4 text-center",children:[_.jsx("p",{className:"text-muted-foreground",children:"Item not found"}),_.jsx(Yt,{onClick:()=>t("/wardrobe"),className:"mt-4",children:"Back to Wardrobe"})]})},Jve=()=>{const[e,t]=$.useState(""),[r,n]=$.useState(""),[i,s]=$.useState(""),[o,a]=$.useState(""),[l,u]=$.useState(""),[c,d]=$.useState([]),[h,m]=$.useState(!1),[g,v]=$.useState(""),[y,x]=$.useState(!1),[w,S]=$.useState(""),M=js(),{items:T}=td(),{createOutfit:P}=uh(),{toast:E}=ro(),A=V=>{d(G=>G.includes(V)?G.filter(z=>z!==V):[...G,V])},L=async V=>{try{const G=await fetch("https://kicpepyarfiorraejwqh.functions.supabase.co/functions/v1/outfit-description",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:V,occasion:o,weather:l,season:i})});if(G.ok)return await G.json()}catch(G){console.error("Error generating AI descriptions:",G)}return null},B=async V=>{if(V.preventDefault(),!e.trim()){E({title:"Name required",description:"Please enter a name for your outfit.",variant:"destructive"});return}if(c.length===0){E({title:"Select items",description:"Please select at least one item for your outfit.",variant:"destructive"});return}m(!0),v(Wf("outfit"));try{const G=T.filter(J=>c.includes(J.id)),z=await L(G),K=r.trim()||z?.mainDescription||void 0;if(await P({name:e.trim(),description:K,season:i||void 0,occasion:o||void 0,weather:l||void 0,itemIds:c}),z?.alternatives&&z.alternatives.length>0)for(const J of z.alternatives){const X=J.items.map(Q=>G.find(oe=>oe.name.toLowerCase().includes(Q.toLowerCase())||Q.toLowerCase().includes(oe.name.toLowerCase()))?.id).filter(Boolean);X.length>0&&await P({name:`${e.trim()} - ${J.name}`,description:J.description,season:i||void 0,occasion:o||void 0,weather:l||void 0,itemIds:X})}S(z?.alternatives?.length>0?`Stunning! I created ${1+z.alternatives.length} outfit variations for you! `:"Gorgeous outfit created, bestie! You're gonna look amazing! "),x(!0),E({title:"Outfit created!",description:z?.alternatives?.length>0?`Created ${1+z.alternatives.length} outfit variations!`:"Your new outfit has been saved to your collection."}),setTimeout(()=>{M("/outfits")},2e3)}catch(G){console.error("Error creating outfit:",G),E({title:"Error creating outfit",description:"Please try again.",variant:"destructive"})}finally{m(!1)}};return _.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-outfit-primary/5 to-outfit-secondary/5 p-4 space-y-6 pb-20",children:[_.jsx(d1,{message:w,isVisible:y,onClose:()=>x(!1),autoHide:!0,duration:3e3}),_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx(Yt,{variant:"ghost",size:"icon",onClick:()=>M(-1),children:_.jsx(Eu,{className:"h-5 w-5"})}),_.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-outfit-primary to-outfit-secondary bg-clip-text text-transparent",children:"Create Outfit"}),_.jsx("div",{className:"w-10"})]}),_.jsxs("form",{onSubmit:B,className:"space-y-6",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium",children:"Outfit Name *"}),_.jsx(hs,{value:e,onChange:V=>t(V.target.value),placeholder:"e.g., Summer Casual",className:"mt-1"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium",children:"Description"}),_.jsx(p0,{value:r,onChange:V=>n(V.target.value),placeholder:"Optional description...",className:"mt-1",rows:3})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium",children:"Season"}),_.jsxs(Io,{value:i,onValueChange:s,children:[_.jsx(Qs,{className:"mt-1",children:_.jsx(jo,{placeholder:"Select season"})}),_.jsxs(Js,{children:[_.jsx(Vt,{value:"spring",children:"Spring"}),_.jsx(Vt,{value:"summer",children:"Summer"}),_.jsx(Vt,{value:"fall",children:"Fall"}),_.jsx(Vt,{value:"winter",children:"Winter"})]})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium",children:"Occasion"}),_.jsxs(Io,{value:o,onValueChange:a,children:[_.jsx(Qs,{className:"mt-1",children:_.jsx(jo,{placeholder:"Select occasion"})}),_.jsxs(Js,{children:[_.jsx(Vt,{value:"casual",children:"Casual"}),_.jsx(Vt,{value:"work",children:"Work"}),_.jsx(Vt,{value:"formal",children:"Formal"}),_.jsx(Vt,{value:"party",children:"Party"}),_.jsx(Vt,{value:"date",children:"Date"}),_.jsx(Vt,{value:"workout",children:"Workout"})]})]})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium",children:"Weather"}),_.jsxs(Io,{value:l,onValueChange:u,children:[_.jsx(Qs,{className:"mt-1",children:_.jsx(jo,{placeholder:"Select weather"})}),_.jsxs(Js,{children:[_.jsx(Vt,{value:"sunny",children:"Sunny"}),_.jsx(Vt,{value:"cloudy",children:"Cloudy"}),_.jsx(Vt,{value:"rainy",children:"Rainy"}),_.jsx(Vt,{value:"cold",children:"Cold"}),_.jsx(Vt,{value:"hot",children:"Hot"})]})]})]})]}),_.jsxs("div",{children:[_.jsxs("h3",{className:"text-sm font-medium mb-3",children:["Select Items (",c.length,")"]}),T.length===0?_.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No items in your wardrobe yet. Add some items first!"}):_.jsx("div",{className:"grid grid-cols-2 gap-3",children:T.map(V=>_.jsx(Er,{className:`cursor-pointer transition-all interactive-card ${c.includes(V.id)?"ring-2 ring-outfit-primary bg-gradient-to-br from-outfit-primary/10 to-outfit-secondary/10 shadow-glow":"hover:bg-accent hover:shadow-elegant"}`,onClick:()=>A(V.id),children:_.jsxs(Nr,{className:"p-3",children:[_.jsxs("div",{className:"aspect-square bg-muted rounded-md overflow-hidden mb-2 relative",children:[V.image_url?_.jsx("img",{src:V.image_url,alt:V.name,className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full flex items-center justify-center",children:_.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-gray-300",style:{backgroundColor:V.hex_color||V.color}})}),c.includes(V.id)&&_.jsx("div",{className:"absolute top-2 right-2 bg-outfit-primary text-white rounded-full p-1",children:_.jsx(qx,{className:"h-3 w-3"})})]}),_.jsx("h4",{className:"text-sm font-medium truncate",children:V.name}),_.jsx("p",{className:"text-xs text-muted-foreground",children:V.category})]})},V.id))})]}),_.jsx(Yt,{type:"submit",className:"w-full interactive-card",disabled:h||!e.trim(),children:h?_.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[_.jsx("span",{children:"Creating..."}),_.jsx("span",{className:"text-xs opacity-75",children:g})]}):"Create Outfit"})]})]})},Zve=()=>{const{id:e}=A6(),t=js(),{outfits:r,loading:n,deleteOutfit:i,toggleFavorite:s,updateOutfit:o}=uh(),{toast:a}=ro(),l=r.find(h=>h.id===e),u=async()=>{if(l&&window.confirm("Are you sure you want to delete this outfit?"))try{await i(l.id),a({title:"Outfit deleted",description:"The outfit has been removed from your collection."}),t("/outfits")}catch{a({title:"Error deleting outfit",description:"Please try again.",variant:"destructive"})}},c=async()=>{if(l)try{await s(l.id),a({title:l.is_favorite?"Removed from favorites":"Added to favorites",description:l.is_favorite?"Outfit removed from favorites.":"Outfit added to favorites."})}catch{a({title:"Error updating outfit",description:"Please try again.",variant:"destructive"})}},d=async()=>{if(l)try{await o(l.id,{times_worn:l.times_worn+1,last_worn:new Date().toISOString().split("T")[0]}),a({title:"Outfit marked as worn",description:"Your wear count has been updated."})}catch{a({title:"Error updating outfit",description:"Please try again.",variant:"destructive"})}};return n?_.jsxs("div",{className:"p-4 space-y-6",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx(Yt,{variant:"ghost",size:"icon",onClick:()=>t(-1),children:_.jsx(Eu,{className:"h-5 w-5"})}),_.jsx(ol,{className:"h-6 w-32"}),_.jsx("div",{className:"w-10"})]}),_.jsx(ol,{className:"h-48 w-full rounded-lg"}),_.jsxs("div",{className:"space-y-4",children:[_.jsx(ol,{className:"h-4 w-3/4"}),_.jsx(ol,{className:"h-4 w-1/2"})]})]}):l?_.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx(Yt,{variant:"ghost",size:"icon",onClick:()=>t(-1),children:_.jsx(Eu,{className:"h-5 w-5"})}),_.jsx("h1",{className:"text-xl font-bold",children:"Outfit Details"}),_.jsx(Yt,{variant:"ghost",size:"icon",onClick:c,children:_.jsx(i_,{className:`h-5 w-5 ${l.is_favorite?"fill-red-500 text-red-500":""}`})})]}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold mb-2",children:l.name}),l.description&&_.jsx("p",{className:"text-muted-foreground mb-4",children:l.description}),_.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[l.season&&_.jsx(Fi,{variant:"secondary",children:l.season}),l.occasion&&_.jsx(Fi,{variant:"secondary",children:l.occasion}),l.weather&&_.jsx(Fi,{variant:"secondary",children:l.weather})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[_.jsxs("div",{children:[_.jsx("span",{className:"text-muted-foreground",children:"Times worn:"}),_.jsx("span",{className:"ml-2 font-medium",children:l.times_worn})]}),_.jsxs("div",{children:[_.jsx("span",{className:"text-muted-foreground",children:"Last worn:"}),_.jsx("span",{className:"ml-2 font-medium",children:l.last_worn?new Date(l.last_worn).toLocaleDateString():"Never"})]})]})]}),_.jsxs("div",{children:[_.jsxs("h3",{className:"font-medium mb-3",children:["Items in this outfit (",l.items?.length||0,")"]}),l.items&&l.items.length>0?_.jsx("div",{className:"grid grid-cols-2 gap-3",children:l.items.map(h=>_.jsx(Er,{className:"cursor-pointer hover:bg-accent",onClick:()=>t(`/wardrobe/item/${h.clothing_item_id}`),children:_.jsxs(Nr,{className:"p-3",children:[_.jsx("div",{className:"aspect-square bg-muted rounded-md overflow-hidden mb-2",children:h.clothing_item?.image_url?_.jsx("img",{src:h.clothing_item.image_url,alt:h.clothing_item.name,className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full flex items-center justify-center",children:_.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-gray-300",style:{backgroundColor:h.clothing_item?.color}})})}),_.jsx("h4",{className:"text-sm font-medium truncate",children:h.clothing_item?.name}),_.jsx("p",{className:"text-xs text-muted-foreground",children:h.clothing_item?.category})]})},h.id))}):_.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No items in this outfit"})]}),_.jsxs("div",{className:"space-y-3",children:[_.jsx(Yt,{onClick:d,className:"w-full",children:"Mark as Worn Today"}),_.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_.jsxs(Yt,{variant:"outline",className:"flex items-center gap-2",children:[_.jsx(Gte,{className:"h-4 w-4"}),"Share"]}),_.jsxs(Yt,{variant:"outline",className:"flex items-center gap-2",children:[_.jsx(P8,{className:"h-4 w-4"}),"Edit"]})]}),_.jsxs(Yt,{variant:"destructive",onClick:u,className:"w-full flex items-center gap-2",children:[_.jsx(E8,{className:"h-4 w-4"}),"Delete Outfit"]})]})]}):_.jsxs("div",{className:"p-4 text-center",children:[_.jsx("p",{className:"text-muted-foreground",children:"Outfit not found"}),_.jsx(Yt,{onClick:()=>t("/outfits"),className:"mt-4",children:"Back to Outfits"})]})},iQ=()=>{const[e,t]=$.useState([]),[r,n]=$.useState(!1),{user:i}=Oa();return{suggestions:e,loading:r,generateSuggestions:async l=>{if(i){n(!0);try{const{data:u,error:c}=await Mr.functions.invoke("fashion-stylist",{body:{filters:l,user_id:i.id}});if(c)throw c;const d=await Promise.all((u.outfits||[]).map(async h=>{const{data:m}=await Mr.from("clothing_items").select("id, name, image_url").eq("user_id",i.id),g=h.items.map(v=>{const y=m?.find(x=>x.name.toLowerCase()===v.toLowerCase());return y?{name:y.name,image_url:y.image_url,id:y.id}:{name:v,image_url:"",id:""}});return{...h,items:g}}));t(d)}catch(u){console.error("Error generating suggestions:",u),t([])}finally{n(!1)}}},saveOutfit:async l=>{if(i)try{const{data:u,error:c}=await Mr.from("clothing_items").select("*").eq("user_id",i.id);if(c)throw c;const d=l.items.map(y=>u?.find(x=>x.name.toLowerCase()===y.name.toLowerCase())).filter(Boolean);if(d.length===0)throw new Error("No matching items found");const{data:h,error:m}=await Mr.from("outfits").insert({user_id:i.id,name:l.title,description:l.reasoning,occasion:l.occasion}).select().single();if(m)throw m;const g=d.map(y=>({outfit_id:h.id,clothing_item_id:y.id})),{error:v}=await Mr.from("outfit_items").insert(g);if(v)throw v;return h}catch(u){throw console.error("Error saving outfit:",u),u}},dislikeSuggestion:async l=>{if(i)try{const{error:u}=await Mr.from("outfit_feedback").insert([{user_id:i.id,suggestion_data:l,feedback_type:"dislike",dislike_reason:{items:l.items.map(c=>c.name),occasion:l.occasion,colors:l.items.map(c=>c.name)}}]);if(u)throw u;t(c=>c.filter(d=>d.title!==l.title))}catch(u){throw console.error("Error recording dislike:",u),u}}}},eye=()=>{const[e,t]=$.useState(""),[r,n]=$.useState(""),[i,s]=$.useState(""),[o,a]=$.useState(""),[l,u]=$.useState(""),[c,d]=$.useState(!1),[h,m]=$.useState(""),g=js(),{suggestions:v,loading:y,generateSuggestions:x,saveOutfit:w,dislikeSuggestion:S}=iQ(),{toast:M}=ro(),T=async()=>{u(Wf("outfit")),await x({occasion:e||void 0,weather:r||void 0,season:i||void 0,style:o||void 0})},P=async A=>{try{await w(A),m("Perfect choice, gorgeous! That outfit is absolutely divine! "),d(!0),M({title:"Outfit saved!",description:"Added to your collection "})}catch{M({title:"Error",description:"Failed to save outfit",variant:"destructive"})}},E=async A=>{try{await S(A),M({title:"Got it!",description:"We'll avoid similar combinations in the future "})}catch{M({title:"Error",description:"Failed to save preference",variant:"destructive"})}};return _.jsxs("div",{className:"relative min-h-screen bg-white",children:[_.jsx("div",{className:"absolute top-0 left-0 w-full h-[220px] bg-gradient-to-br from-pink-500 via-purple-500 to-violet-600 rounded-b-[30px] shadow-lg"}),_.jsxs("div",{className:"relative z-10 flex items-center justify-between px-5 pt-10",children:[_.jsx(Yt,{variant:"ghost",size:"icon",onClick:()=>g(-1),className:"text-white",children:_.jsx(Eu,{className:"h-6 w-6"})}),_.jsx("h1",{className:"text-2xl font-extrabold tracking-tight text-white drop-shadow-md",children:"AI Style Atelier"}),_.jsx("div",{className:"w-8"})]}),_.jsx("p",{className:"relative z-10 text-center text-white/90 text-sm mt-2",children:"Set your vibe and let AI craft your masterpiece "}),_.jsx(d1,{message:h,isVisible:c,onClose:()=>d(!1),autoHide:!0,duration:3e3}),_.jsxs("div",{className:"relative z-20 mt-10 px-5 pb-20",children:[_.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 border border-gray-100",children:[_.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[_.jsx(Do,{className:"h-5 w-5 text-purple-500"}),"Customize Your Look"]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"space-y-1",children:[_.jsx("label",{className:"text-xs font-semibold text-gray-600",children:"Occasion"}),_.jsxs(Io,{value:e,onValueChange:t,children:[_.jsx(Qs,{className:"rounded-xl h-11",children:_.jsx(jo,{placeholder:"Choose"})}),_.jsxs(Js,{children:[_.jsx(Vt,{value:"casual",children:"Casual"}),_.jsx(Vt,{value:"work",children:"Work"}),_.jsx(Vt,{value:"formal",children:"Formal"}),_.jsx(Vt,{value:"party",children:"Party"}),_.jsx(Vt,{value:"date",children:"Date"}),_.jsx(Vt,{value:"workout",children:"Workout"})]})]})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("label",{className:"text-xs font-semibold text-gray-600",children:"Weather"}),_.jsxs(Io,{value:r,onValueChange:n,children:[_.jsx(Qs,{className:"rounded-xl h-11",children:_.jsx(jo,{placeholder:"Choose"})}),_.jsxs(Js,{children:[_.jsx(Vt,{value:"sunny",children:"Sunny"}),_.jsx(Vt,{value:"cloudy",children:"Cloudy"}),_.jsx(Vt,{value:"rainy",children:"Rainy"}),_.jsx(Vt,{value:"cold",children:"Cold"}),_.jsx(Vt,{value:"hot",children:"Hot"})]})]})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("label",{className:"text-xs font-semibold text-gray-600",children:"Season"}),_.jsxs(Io,{value:i,onValueChange:s,children:[_.jsx(Qs,{className:"rounded-xl h-11",children:_.jsx(jo,{placeholder:"Choose"})}),_.jsxs(Js,{children:[_.jsx(Vt,{value:"spring",children:"Spring"}),_.jsx(Vt,{value:"summer",children:"Summer"}),_.jsx(Vt,{value:"fall",children:"Fall"}),_.jsx(Vt,{value:"winter",children:"Winter"})]})]})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("label",{className:"text-xs font-semibold text-gray-600",children:"Style"}),_.jsxs(Io,{value:o,onValueChange:a,children:[_.jsx(Qs,{className:"rounded-xl h-11",children:_.jsx(jo,{placeholder:"Choose"})}),_.jsxs(Js,{children:[_.jsx(Vt,{value:"minimalist",children:"Minimalist"}),_.jsx(Vt,{value:"trendy",children:"Trendy"}),_.jsx(Vt,{value:"classic",children:"Classic"}),_.jsx(Vt,{value:"bohemian",children:"Bohemian"}),_.jsx(Vt,{value:"edgy",children:"Edgy"})]})]})]})]}),_.jsx(Yt,{onClick:T,disabled:y,className:"w-full mt-6 h-12 rounded-xl bg-gradient-to-r from-pink-500 to-purple-600 text-white font-semibold shadow-md active:scale-95 duration-150",children:y?_.jsxs("div",{className:"flex flex-col items-center",children:[_.jsx(cw,{className:"h-4 w-4 animate-spin"}),_.jsx("span",{className:"text-xs mt-1",children:l})]}):_.jsxs(_.Fragment,{children:[_.jsx(Do,{className:"h-4 w-4 mr-2"}),"Curate My Masterpiece"]})})]}),v.length>0&&_.jsxs("div",{className:"mt-8 space-y-5",children:[_.jsx("h2",{className:"text-lg font-semibold text-gray-800 tracking-tight",children:"Styled Just For You"}),v.map((A,L)=>_.jsx(Er,{className:"border shadow-md rounded-2xl bg-white/90 backdrop-blur-sm",children:_.jsxs(Nr,{className:"p-5",children:[_.jsxs("div",{className:"flex justify-between mb-3",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"font-semibold text-base",children:A.title}),_.jsx("p",{className:"text-xs text-gray-500",children:A.reasoning})]}),_.jsxs(Fi,{children:[A.match_score," match"]})]}),_.jsx("div",{className:"grid grid-cols-3 gap-3 my-4",children:A.items.map((B,V)=>_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"aspect-square bg-gray-100 rounded-xl overflow-hidden shadow-sm",children:B.image_url?_.jsx("img",{src:B.image_url,className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:"No Image"})}),_.jsx("p",{className:"text-[10px] mt-1",children:B.name})]},V))}),A.footwear&&_.jsxs("div",{className:"mb-2",children:[_.jsx("h4",{className:"text-xs font-semibold text-gray-500",children:"Footwear"}),_.jsx(Fi,{variant:"secondary",className:"text-xs mt-1",children:A.footwear})]}),A.accessories&&_.jsxs("div",{className:"mb-3",children:[_.jsx("h4",{className:"text-xs font-semibold text-gray-500",children:"Accessories"}),_.jsx("p",{className:"text-xs text-gray-500",children:A.accessories})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsxs(Yt,{onClick:()=>P(A),variant:"outline",className:"flex-1 rounded-xl",children:[_.jsx(l2,{className:"h-4 w-4 mr-2"})," Save"]}),_.jsx(Yt,{onClick:()=>E(A),variant:"ghost",className:"flex-1 rounded-xl",children:"Not My Style"})]})]})},L))]}),!y&&v.length===0&&_.jsx("div",{className:"mt-10",children:_.jsx(Er,{className:"rounded-2xl shadow-md",children:_.jsxs(Nr,{className:"p-10 text-center",children:[_.jsx(Do,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),_.jsx("h3",{className:"text-lg font-semibold",children:"Ready to explore?"}),_.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Choose your vibe above and let AI create something magical."})]})})})]})]})},tye=()=>{const[e,t]=$.useState(null),[r,n]=$.useState(!1),[i,s]=$.useState(!1),[o,a]=$.useState(""),[l,u]=$.useState(!1),[c,d]=$.useState(""),h=js(),{suggestions:m,loading:g,generateSuggestions:v,saveOutfit:y}=iQ(),{toast:x}=ro(),w=async()=>{s(!0);try{const P=await new Promise((B,V)=>{navigator.geolocation.getCurrentPosition(B,V)}),{latitude:E,longitude:A}=P.coords,L=await fetch("https://kicpepyarfiorraejwqh.functions.supabase.co/functions/v1/weather-api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:E,longitude:A})});if(L.ok){const B=await L.json();t(B)}else throw new Error("Weather API failed")}catch{t({temperature:22,description:"partly cloudy",condition:"cloudy",location:"Current Location"}),x({title:"Using demo weather",description:"Unable to fetch real weather data. Using sample data for demonstration."})}finally{s(!1)}};$.useEffect(()=>{w()},[]);const S=async()=>{if(!e)return;n(!0),a(Wf("weather"));const P=M();await v({weather:e.condition,season:P,occasion:"casual"}),n(!1)},M=()=>{const P=new Date().getMonth();return P>=2&&P<=4?"spring":P>=5&&P<=7?"summer":P>=8&&P<=10?"fall":"winter"},T=async P=>{try{await y(P),d("Yass! That outfit is now in your collection, bestie! "),u(!0),x({title:"Outfit saved!",description:"Added to your collection "})}catch{x({title:"Error",description:"Failed to save outfit",variant:"destructive"})}};return _.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-outfit-primary/5 to-outfit-secondary/5 p-4 space-y-6 pb-20",children:[_.jsx(d1,{message:c,isVisible:l,onClose:()=>u(!1),autoHide:!0,duration:3e3}),_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx(Yt,{variant:"ghost",size:"icon",onClick:()=>h(-1),children:_.jsx(Eu,{className:"h-5 w-5"})}),_.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-outfit-primary to-outfit-secondary bg-clip-text text-transparent",children:"Weather Outfits"}),_.jsx("div",{className:"w-10"})]}),_.jsxs(Er,{className:"border-0 shadow-elegant backdrop-blur-sm bg-white/80 interactive-card",children:[_.jsx(Qf,{children:_.jsxs(Jf,{className:"flex items-center gap-2",children:[_.jsx(xM,{className:"h-5 w-5 text-outfit-primary"}),"Current Weather"]})}),_.jsx(Nr,{children:i?_.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-3",children:[_.jsx(cw,{className:"h-6 w-6 animate-spin text-outfit-primary"}),_.jsx("p",{className:"text-sm text-outfit-primary animate-pulse",children:Wf("general")})]}):e?_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Vte,{className:"h-4 w-4 text-muted-foreground"}),_.jsx("span",{className:"text-sm text-muted-foreground",children:e.location})]}),_.jsx(Fi,{variant:"secondary",className:"capitalize",children:e.condition})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Xte,{className:"h-5 w-5 text-outfit-accent"}),_.jsxs("span",{className:"text-2xl font-bold text-outfit-primary",children:[e.temperature,"C"]})]}),_.jsx("span",{className:"text-muted-foreground capitalize",children:e.description})]}),_.jsx(Yt,{onClick:S,className:"w-full interactive-card",disabled:r||g,children:r||g?_.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[_.jsx(cw,{className:"h-4 w-4 animate-spin"}),_.jsx("span",{className:"text-xs",children:o})]}):_.jsxs(_.Fragment,{children:[_.jsx(xM,{className:"h-4 w-4 mr-2"}),"Get Weather-Based Outfits"]})})]}):_.jsx("div",{className:"text-center py-4",children:_.jsxs(Yt,{onClick:w,variant:"outline",children:[_.jsx(cw,{className:"h-4 w-4 mr-2"}),"Retry Weather Fetch"]})})})]}),m.length>0&&_.jsxs("div",{className:"space-y-4",children:[_.jsx("h2",{className:"text-lg font-semibold bg-gradient-to-r from-outfit-primary to-outfit-secondary bg-clip-text text-transparent",children:"Weather-Perfect Outfits"}),m.map((P,E)=>_.jsx(Er,{className:"border-0 shadow-elegant backdrop-blur-sm bg-white/80 interactive-card animate-fade-in",children:_.jsxs(Nr,{className:"p-4",children:[_.jsxs("div",{className:"flex justify-between items-start mb-3",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"font-semibold text-outfit-dark",children:P.title}),_.jsx("p",{className:"text-sm text-muted-foreground",children:P.reasoning})]}),_.jsxs(Fi,{variant:"secondary",className:"bg-gradient-to-r from-outfit-primary to-outfit-secondary text-white border-0",children:[P.match_score," match"]})]}),_.jsxs("div",{className:"space-y-3 mb-3",children:[_.jsx("h4",{className:"text-sm font-medium",children:"Perfect for this weather:"}),_.jsx("div",{className:"grid grid-cols-3 gap-2",children:P.items.map((A,L)=>_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"aspect-square bg-gradient-to-br from-outfit-primary/5 to-outfit-secondary/5 rounded-xl overflow-hidden mb-1 border border-outfit-primary/10",children:A.image_url?_.jsx("img",{src:A.image_url,alt:A.name,className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground",children:"No Image"})}),_.jsx(Fi,{variant:"outline",className:"text-xs border-outfit-primary/20",children:A.name})]},L))}),P.footwear&&_.jsxs("div",{className:"mt-3",children:[_.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Recommended Footwear:"}),_.jsx(Fi,{variant:"secondary",className:"text-xs",children:P.footwear})]}),P.accessories&&_.jsxs("div",{className:"mt-2",children:[_.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Weather Accessories:"}),_.jsx("p",{className:"text-xs text-muted-foreground",children:P.accessories})]})]}),_.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-3",children:[_.jsxs("span",{children:[P.items.length," items"]}),_.jsxs(Fi,{variant:"outline",className:"border-outfit-primary/20",children:[e?.condition," ready"]})]}),_.jsxs(Yt,{onClick:()=>T(P),variant:"outline",className:"w-full border-outfit-primary/20 hover:bg-gradient-to-r hover:from-outfit-primary hover:to-outfit-secondary hover:text-white",children:[_.jsx(l2,{className:"h-4 w-4 mr-2"}),"Save Weather Outfit"]})]})},E))]}),!r&&!g&&m.length===0&&e&&_.jsx(Er,{className:"border-0 shadow-elegant backdrop-blur-sm bg-white/80",children:_.jsxs(Nr,{className:"p-8 text-center",children:[_.jsx(xM,{className:"h-12 w-12 mx-auto mb-4 text-outfit-primary"}),_.jsx("h3",{className:"font-medium mb-2 text-outfit-dark",children:"Ready for weather-perfect outfits?"}),_.jsx("p",{className:"text-sm text-muted-foreground",children:'Click "Get Weather-Based Outfits" to receive personalized suggestions based on current weather conditions.'})]})})]})};function Sr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function to(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function ds(e,t){const r=Sr(e);return isNaN(t)?to(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Ca(e,t){const r=Sr(e);if(isNaN(t))return to(e,NaN);if(!t)return r;const n=r.getDate(),i=to(e,r.getTime());i.setMonth(r.getMonth()+t+1,0);const s=i.getDate();return n>=s?i:(r.setFullYear(i.getFullYear(),i.getMonth(),n),r)}const uj=6048e5,rye=864e5;let nye={};function g0(){return nye}function gl(e,t){const r=g0(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=Sr(e),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function ih(e){return gl(e,{weekStartsOn:1})}function sQ(e){const t=Sr(e),r=t.getFullYear(),n=to(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=ih(n),s=to(e,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=ih(s);return t.getTime()>=i.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Im(e){const t=Sr(e);return t.setHours(0,0,0,0),t}function Zw(e){const t=Sr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function al(e,t){const r=Im(e),n=Im(t),i=+r-Zw(r),s=+n-Zw(n);return Math.round((i-s)/rye)}function iye(e){const t=sQ(e),r=to(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),ih(r)}function FO(e,t){const r=t*7;return ds(e,r)}function sye(e,t){return Ca(e,t*12)}function oye(e){let t;return e.forEach(function(r){const n=Sr(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function aye(e){let t;return e.forEach(r=>{const n=Sr(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function As(e,t){const r=Im(e),n=Im(t);return+r==+n}function cj(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function lye(e){if(!cj(e)&&typeof e!="number")return!1;const t=Sr(e);return!isNaN(Number(t))}function T_(e,t){const r=Sr(e),n=Sr(t),i=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return i*12+s}function uye(e,t,r){const n=gl(e,r),i=gl(t,r),s=+n-Zw(n),o=+i-Zw(i);return Math.round((s-o)/uj)}function dj(e){const t=Sr(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Is(e){const t=Sr(e);return t.setDate(1),t.setHours(0,0,0,0),t}function oQ(e){const t=Sr(e),r=to(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function fj(e,t){const r=g0(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=Sr(e),s=i.getDay(),o=(s<n?-7:0)+6-(s-n);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function aQ(e){return fj(e,{weekStartsOn:1})}const cye={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dye=(e,t,r)=>{let n;const i=cye[e];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function aS(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const fye={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pye={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mye={date:aS({formats:fye,defaultWidth:"full"}),time:aS({formats:hye,defaultWidth:"full"}),dateTime:aS({formats:pye,defaultWidth:"full"})},gye={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vye=(e,t,r,n)=>gye[e];function by(e){return(t,r)=>{const n=r?.context?String(r.context):"standalone";let i;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,a=r?.width?String(r.width):o;i=e.formattingValues[a]||e.formattingValues[o]}else{const o=e.defaultWidth,a=r?.width?String(r.width):e.defaultWidth;i=e.values[a]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const yye={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_ye={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bye={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},wye={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Mye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Tye=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Sye={ordinalNumber:Tye,era:by({values:yye,defaultWidth:"wide"}),quarter:by({values:_ye,defaultWidth:"wide",argumentCallback:e=>e-1}),month:by({values:bye,defaultWidth:"wide"}),day:by({values:wye,defaultWidth:"wide"}),dayPeriod:by({values:xye,defaultWidth:"wide",formattingValues:Mye,defaultFormattingWidth:"wide"})};function wy(e){return(t,r={})=>{const n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const o=s[0],a=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?Eye(a,d=>d.test(o)):Pye(a,d=>d.test(o));let u;u=e.valueCallback?e.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const c=t.slice(o.length);return{value:u,rest:c}}}function Pye(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Eye(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Cye(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const i=n[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const a=t.slice(i.length);return{value:o,rest:a}}}const Aye=/^(\d+)(th|st|nd|rd)?/i,Oye=/\d+/i,kye={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Iye={any:[/^b/i,/^(a|c)/i]},jye={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$ye={any:[/1/i,/2/i,/3/i,/4/i]},Nye={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Dye={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Rye={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Lye={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Fye={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Bye={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zye={ordinalNumber:Cye({matchPattern:Aye,parsePattern:Oye,valueCallback:e=>parseInt(e,10)}),era:wy({matchPatterns:kye,defaultMatchWidth:"wide",parsePatterns:Iye,defaultParseWidth:"any"}),quarter:wy({matchPatterns:jye,defaultMatchWidth:"wide",parsePatterns:$ye,defaultParseWidth:"any",valueCallback:e=>e+1}),month:wy({matchPatterns:Nye,defaultMatchWidth:"wide",parsePatterns:Dye,defaultParseWidth:"any"}),day:wy({matchPatterns:Rye,defaultMatchWidth:"wide",parsePatterns:Lye,defaultParseWidth:"any"}),dayPeriod:wy({matchPatterns:Fye,defaultMatchWidth:"any",parsePatterns:Bye,defaultParseWidth:"any"})},lQ={code:"en-US",formatDistance:dye,formatLong:mye,formatRelative:vye,localize:Sye,match:zye,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Uye(e){const t=Sr(e);return al(t,oQ(t))+1}function uQ(e){const t=Sr(e),r=+ih(t)-+iye(t);return Math.round(r/uj)+1}function cQ(e,t){const r=Sr(e),n=r.getFullYear(),i=g0(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=to(e,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const a=gl(o,t),l=to(e,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const u=gl(l,t);return r.getTime()>=a.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function Vye(e,t){const r=g0(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=cQ(e,t),s=to(e,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),gl(s,t)}function dQ(e,t){const r=Sr(e),n=+gl(r,t)-+Vye(r,t);return Math.round(n/uj)+1}function zr(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Ic={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return zr(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):zr(r+1,2)},d(e,t){return zr(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return zr(e.getHours()%12||12,t.length)},H(e,t){return zr(e.getHours(),t.length)},m(e,t){return zr(e.getMinutes(),t.length)},s(e,t){return zr(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return zr(i,t.length)}},Xp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Y3={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Ic.y(e,t)},Y:function(e,t,r,n){const i=cQ(e,n),s=i>0?i:1-i;if(t==="YY"){const o=s%100;return zr(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):zr(s,t.length)},R:function(e,t){const r=sQ(e);return zr(r,t.length)},u:function(e,t){const r=e.getFullYear();return zr(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return zr(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return zr(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Ic.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return zr(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const i=dQ(e,n);return t==="wo"?r.ordinalNumber(i,{unit:"week"}):zr(i,t.length)},I:function(e,t,r){const n=uQ(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):zr(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Ic.d(e,t)},D:function(e,t,r){const n=Uye(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):zr(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const i=e.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return zr(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const i=e.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return zr(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return zr(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let i;switch(n===12?i=Xp.noon:n===0?i=Xp.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let i;switch(n>=17?i=Xp.evening:n>=12?i=Xp.afternoon:n>=4?i=Xp.morning:i=Xp.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ic.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Ic.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):zr(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):zr(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ic.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Ic.s(e,t)},S:function(e,t){return Ic.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return J3(n);case"XXXX":case"XX":return Ef(n);case"XXXXX":case"XXX":default:return Ef(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return J3(n);case"xxxx":case"xx":return Ef(n);case"xxxxx":case"xxx":default:return Ef(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Q3(n,":");case"OOOO":default:return"GMT"+Ef(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Q3(n,":");case"zzzz":default:return"GMT"+Ef(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return zr(n,t.length)},T:function(e,t,r){const n=e.getTime();return zr(n,t.length)}};function Q3(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+t+zr(s,2)}function J3(e,t){return e%60===0?(e>0?"-":"+")+zr(Math.abs(e)/60,2):Ef(e,t)}function Ef(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=zr(Math.trunc(n/60),2),s=zr(n%60,2);return r+i+t+s}const Z3=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},fQ=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Wye=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return Z3(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",Z3(n,t)).replace("{{time}}",fQ(i,t))},Gye={p:fQ,P:Wye},qye=/^D+$/,Hye=/^Y+$/,Kye=["D","DD","YY","YYYY"];function Xye(e){return qye.test(e)}function Yye(e){return Hye.test(e)}function Qye(e,t,r){const n=Jye(e,t,r);if(console.warn(n),Kye.includes(e))throw new RangeError(n)}function Jye(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Zye=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,e_e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,t_e=/^'([^]*?)'?$/,r_e=/''/g,n_e=/[a-zA-Z]/;function fh(e,t,r){const n=g0(),i=r?.locale??n.locale??lQ,s=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Sr(e);if(!lye(a))throw new RangeError("Invalid time value");let l=t.match(e_e).map(c=>{const d=c[0];if(d==="p"||d==="P"){const h=Gye[d];return h(c,i.formatLong)}return c}).join("").match(Zye).map(c=>{if(c==="''")return{isToken:!1,value:"'"};const d=c[0];if(d==="'")return{isToken:!1,value:i_e(c)};if(Y3[d])return{isToken:!0,value:c};if(d.match(n_e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:c}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(c=>{if(!c.isToken)return c.value;const d=c.value;(!r?.useAdditionalWeekYearTokens&&Yye(d)||!r?.useAdditionalDayOfYearTokens&&Xye(d))&&Qye(d,t,String(e));const h=Y3[d[0]];return h(a,d,i.localize,u)}).join("")}function i_e(e){const t=e.match(t_e);return t?t[1].replace(r_e,"'"):e}function s_e(e){const t=Sr(e),r=t.getFullYear(),n=t.getMonth(),i=to(e,0);return i.setFullYear(r,n+1,0),i.setHours(0,0,0,0),i.getDate()}function o_e(e){return Math.trunc(+Sr(e)/1e3)}function a_e(e){const t=Sr(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function l_e(e,t){return uye(a_e(e),Is(e),t)+1}function BO(e,t){const r=Sr(e),n=Sr(t);return r.getTime()>n.getTime()}function hQ(e,t){const r=Sr(e),n=Sr(t);return+r<+n}function hj(e,t){const r=Sr(e),n=Sr(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function u_e(e,t){const r=Sr(e),n=Sr(t);return r.getFullYear()===n.getFullYear()}function lS(e,t){return ds(e,-t)}function uS(e,t){const r=Sr(e),n=r.getFullYear(),i=r.getDate(),s=to(e,0);s.setFullYear(n,t,15),s.setHours(0,0,0,0);const o=s_e(s);return r.setMonth(t,Math.min(i,o)),r}function eB(e,t){const r=Sr(e);return isNaN(+r)?to(e,NaN):(r.setFullYear(t),r)}var Ht=function(){return Ht=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ht.apply(this,arguments)};function c_e(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function pQ(e,t,r){for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function v0(e){return e.mode==="multiple"}function y0(e){return e.mode==="range"}function g1(e){return e.mode==="single"}var d_e={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function f_e(e,t){return fh(e,"LLLL y",t)}function h_e(e,t){return fh(e,"d",t)}function p_e(e,t){return fh(e,"LLLL",t)}function m_e(e){return"".concat(e)}function g_e(e,t){return fh(e,"cccccc",t)}function v_e(e,t){return fh(e,"yyyy",t)}var y_e=Object.freeze({__proto__:null,formatCaption:f_e,formatDay:h_e,formatMonthCaption:p_e,formatWeekNumber:m_e,formatWeekdayName:g_e,formatYearCaption:v_e}),__e=function(e,t,r){return fh(e,"do MMMM (EEEE)",r)},b_e=function(){return"Month: "},w_e=function(){return"Go to next month"},x_e=function(){return"Go to previous month"},M_e=function(e,t){return fh(e,"cccc",t)},T_e=function(e){return"Week n. ".concat(e)},S_e=function(){return"Year: "},P_e=Object.freeze({__proto__:null,labelDay:__e,labelMonthDropdown:b_e,labelNext:w_e,labelPrevious:x_e,labelWeekNumber:T_e,labelWeekday:M_e,labelYearDropdown:S_e});function E_e(){var e="buttons",t=d_e,r=lQ,n={},i={},s=1,o={},a=new Date;return{captionLayout:e,classNames:t,formatters:y_e,labels:P_e,locale:r,modifiersClassNames:n,modifiers:i,numberOfMonths:s,styles:o,today:a,mode:"default"}}function C_e(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,i=e.toMonth,s=e.fromDate,o=e.toDate;return n?s=Is(n):t&&(s=new Date(t,0,1)),i?o=dj(i):r&&(o=new Date(r,11,31)),{fromDate:s?Im(s):void 0,toDate:o?Im(o):void 0}}var mQ=$.createContext(void 0);function A_e(e){var t,r=e.initialProps,n=E_e(),i=C_e(r),s=i.fromDate,o=i.toDate,a=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;a!=="buttons"&&(!s||!o)&&(a="buttons");var l;(g1(r)||v0(r)||y0(r))&&(l=r.onSelect);var u=Ht(Ht(Ht({},n),r),{captionLayout:a,classNames:Ht(Ht({},n.classNames),r.classNames),components:Ht({},r.components),formatters:Ht(Ht({},n.formatters),r.formatters),fromDate:s,labels:Ht(Ht({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Ht(Ht({},n.modifiers),r.modifiers),modifiersClassNames:Ht(Ht({},n.modifiersClassNames),r.modifiersClassNames),onSelect:l,styles:Ht(Ht({},n.styles),r.styles),toDate:o});return _.jsx(mQ.Provider,{value:u,children:e.children})}function cn(){var e=$.useContext(mQ);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function gQ(e){var t=cn(),r=t.locale,n=t.classNames,i=t.styles,s=t.formatters.formatCaption;return _.jsx("div",{className:n.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:r})})}function O_e(e){return _.jsx("svg",Ht({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:_.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function vQ(e){var t,r,n=e.onChange,i=e.value,s=e.children,o=e.caption,a=e.className,l=e.style,u=cn(),c=(r=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:O_e;return _.jsxs("div",{className:a,style:l,children:[_.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),_.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:n,children:s}),_.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,_.jsx(c,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function k_e(e){var t,r=cn(),n=r.fromDate,i=r.toDate,s=r.styles,o=r.locale,a=r.formatters.formatMonthCaption,l=r.classNames,u=r.components,c=r.labels.labelMonthDropdown;if(!n)return _.jsx(_.Fragment,{});if(!i)return _.jsx(_.Fragment,{});var d=[];if(u_e(n,i))for(var h=Is(n),m=n.getMonth();m<=i.getMonth();m++)d.push(uS(h,m));else for(var h=Is(new Date),m=0;m<=11;m++)d.push(uS(h,m));var g=function(y){var x=Number(y.target.value),w=uS(Is(e.displayMonth),x);e.onChange(w)},v=(t=u?.Dropdown)!==null&&t!==void 0?t:vQ;return _.jsx(v,{name:"months","aria-label":c(),className:l.dropdown_month,style:s.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:a(e.displayMonth,{locale:o}),children:d.map(function(y){return _.jsx("option",{value:y.getMonth(),children:a(y,{locale:o})},y.getMonth())})})}function I_e(e){var t,r=e.displayMonth,n=cn(),i=n.fromDate,s=n.toDate,o=n.locale,a=n.styles,l=n.classNames,u=n.components,c=n.formatters.formatYearCaption,d=n.labels.labelYearDropdown,h=[];if(!i)return _.jsx(_.Fragment,{});if(!s)return _.jsx(_.Fragment,{});for(var m=i.getFullYear(),g=s.getFullYear(),v=m;v<=g;v++)h.push(eB(oQ(new Date),v));var y=function(w){var S=eB(Is(r),Number(w.target.value));e.onChange(S)},x=(t=u?.Dropdown)!==null&&t!==void 0?t:vQ;return _.jsx(x,{name:"years","aria-label":d(),className:l.dropdown_year,style:a.dropdown_year,onChange:y,value:r.getFullYear(),caption:c(r,{locale:o}),children:h.map(function(w){return _.jsx("option",{value:w.getFullYear(),children:c(w,{locale:o})},w.getFullYear())})})}function j_e(e,t){var r=$.useState(e),n=r[0],i=r[1],s=t===void 0?n:t;return[s,i]}function $_e(e){var t=e.month,r=e.defaultMonth,n=e.today,i=t||r||n||new Date,s=e.toDate,o=e.fromDate,a=e.numberOfMonths,l=a===void 0?1:a;if(s&&T_(s,i)<0){var u=-1*(l-1);i=Ca(s,u)}return o&&T_(i,o)<0&&(i=o),Is(i)}function N_e(){var e=cn(),t=$_e(e),r=j_e(t,e.month),n=r[0],i=r[1],s=function(o){var a;if(!e.disableNavigation){var l=Is(o);i(l),(a=e.onMonthChange)===null||a===void 0||a.call(e,l)}};return[n,s]}function D_e(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,i=Is(e),s=Is(Ca(i,n)),o=T_(s,i),a=[],l=0;l<o;l++){var u=Ca(i,l);a.push(u)}return r&&(a=a.reverse()),a}function R_e(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,i=t.numberOfMonths,s=i===void 0?1:i,o=n?s:1,a=Is(e);if(!r)return Ca(a,o);var l=T_(r,e);if(!(l<s))return Ca(a,o)}}function L_e(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,i=t.numberOfMonths,s=i===void 0?1:i,o=n?s:1,a=Is(e);if(!r)return Ca(a,-o);var l=T_(a,r);if(!(l<=0))return Ca(a,-o)}}var yQ=$.createContext(void 0);function F_e(e){var t=cn(),r=N_e(),n=r[0],i=r[1],s=D_e(n,t),o=R_e(n,t),a=L_e(n,t),l=function(d){return s.some(function(h){return hj(d,h)})},u=function(d,h){l(d)||(h&&hQ(d,h)?i(Ca(d,1+t.numberOfMonths*-1)):i(d))},c={currentMonth:n,displayMonths:s,goToMonth:i,goToDate:u,previousMonth:a,nextMonth:o,isDateDisplayed:l};return _.jsx(yQ.Provider,{value:c,children:e.children})}function _0(){var e=$.useContext(yQ);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function tB(e){var t,r=cn(),n=r.classNames,i=r.styles,s=r.components,o=_0().goToMonth,a=function(c){o(Ca(c,e.displayIndex?-e.displayIndex:0))},l=(t=s?.CaptionLabel)!==null&&t!==void 0?t:gQ,u=_.jsx(l,{id:e.id,displayMonth:e.displayMonth});return _.jsxs("div",{className:n.caption_dropdowns,style:i.caption_dropdowns,children:[_.jsx("div",{className:n.vhidden,children:u}),_.jsx(k_e,{onChange:a,displayMonth:e.displayMonth}),_.jsx(I_e,{onChange:a,displayMonth:e.displayMonth})]})}function B_e(e){return _.jsx("svg",Ht({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:_.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function z_e(e){return _.jsx("svg",Ht({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:_.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var ex=$.forwardRef(function(e,t){var r=cn(),n=r.classNames,i=r.styles,s=[n.button_reset,n.button];e.className&&s.push(e.className);var o=s.join(" "),a=Ht(Ht({},i.button_reset),i.button);return e.style&&Object.assign(a,e.style),_.jsx("button",Ht({},e,{ref:t,type:"button",className:o,style:a}))});function U_e(e){var t,r,n=cn(),i=n.dir,s=n.locale,o=n.classNames,a=n.styles,l=n.labels,u=l.labelPrevious,c=l.labelNext,d=n.components;if(!e.nextMonth&&!e.previousMonth)return _.jsx(_.Fragment,{});var h=u(e.previousMonth,{locale:s}),m=[o.nav_button,o.nav_button_previous].join(" "),g=c(e.nextMonth,{locale:s}),v=[o.nav_button,o.nav_button_next].join(" "),y=(t=d?.IconRight)!==null&&t!==void 0?t:z_e,x=(r=d?.IconLeft)!==null&&r!==void 0?r:B_e;return _.jsxs("div",{className:o.nav,style:a.nav,children:[!e.hidePrevious&&_.jsx(ex,{name:"previous-month","aria-label":h,className:m,style:a.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:i==="rtl"?_.jsx(y,{className:o.nav_icon,style:a.nav_icon}):_.jsx(x,{className:o.nav_icon,style:a.nav_icon})}),!e.hideNext&&_.jsx(ex,{name:"next-month","aria-label":g,className:v,style:a.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:i==="rtl"?_.jsx(x,{className:o.nav_icon,style:a.nav_icon}):_.jsx(y,{className:o.nav_icon,style:a.nav_icon})})]})}function rB(e){var t=cn().numberOfMonths,r=_0(),n=r.previousMonth,i=r.nextMonth,s=r.goToMonth,o=r.displayMonths,a=o.findIndex(function(g){return hj(e.displayMonth,g)}),l=a===0,u=a===o.length-1,c=t>1&&(l||!u),d=t>1&&(u||!l),h=function(){n&&s(n)},m=function(){i&&s(i)};return _.jsx(U_e,{displayMonth:e.displayMonth,hideNext:c,hidePrevious:d,nextMonth:i,previousMonth:n,onPreviousClick:h,onNextClick:m})}function V_e(e){var t,r=cn(),n=r.classNames,i=r.disableNavigation,s=r.styles,o=r.captionLayout,a=r.components,l=(t=a?.CaptionLabel)!==null&&t!==void 0?t:gQ,u;return i?u=_.jsx(l,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=_.jsx(tB,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=_.jsxs(_.Fragment,{children:[_.jsx(tB,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),_.jsx(rB,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=_.jsxs(_.Fragment,{children:[_.jsx(l,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),_.jsx(rB,{displayMonth:e.displayMonth,id:e.id})]}),_.jsx("div",{className:n.caption,style:s.caption,children:u})}function W_e(e){var t=cn(),r=t.footer,n=t.styles,i=t.classNames.tfoot;return r?_.jsx("tfoot",{className:i,style:n.tfoot,children:_.jsx("tr",{children:_.jsx("td",{colSpan:8,children:r})})}):_.jsx(_.Fragment,{})}function G_e(e,t,r){for(var n=r?ih(new Date):gl(new Date,{locale:e,weekStartsOn:t}),i=[],s=0;s<7;s++){var o=ds(n,s);i.push(o)}return i}function q_e(){var e=cn(),t=e.classNames,r=e.styles,n=e.showWeekNumber,i=e.locale,s=e.weekStartsOn,o=e.ISOWeek,a=e.formatters.formatWeekdayName,l=e.labels.labelWeekday,u=G_e(i,s,o);return _.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&_.jsx("td",{style:r.head_cell,className:t.head_cell}),u.map(function(c,d){return _.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":l(c,{locale:i}),children:a(c,{locale:i})},d)})]})}function H_e(){var e,t=cn(),r=t.classNames,n=t.styles,i=t.components,s=(e=i?.HeadRow)!==null&&e!==void 0?e:q_e;return _.jsx("thead",{style:n.head,className:r.head,children:_.jsx(s,{})})}function K_e(e){var t=cn(),r=t.locale,n=t.formatters.formatDay;return _.jsx(_.Fragment,{children:n(e.date,{locale:r})})}var pj=$.createContext(void 0);function X_e(e){if(!v0(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return _.jsx(pj.Provider,{value:t,children:e.children})}return _.jsx(Y_e,{initialProps:e.initialProps,children:e.children})}function Y_e(e){var t=e.initialProps,r=e.children,n=t.selected,i=t.min,s=t.max,o=function(u,c,d){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,c,d);var g=!!(c.selected&&i&&n?.length===i);if(!g){var v=!!(!c.selected&&s&&n?.length===s);if(!v){var y=n?pQ([],n):[];if(c.selected){var x=y.findIndex(function(w){return As(u,w)});y.splice(x,1)}else y.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,y,u,c,d)}}},a={disabled:[]};n&&a.disabled.push(function(u){var c=s&&n.length>s-1,d=n.some(function(h){return As(h,u)});return!!(c&&!d)});var l={selected:n,onDayClick:o,modifiers:a};return _.jsx(pj.Provider,{value:l,children:r})}function mj(){var e=$.useContext(pj);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Q_e(e,t){var r=t||{},n=r.from,i=r.to;return n&&i?As(i,e)&&As(n,e)?void 0:As(i,e)?{from:i,to:void 0}:As(n,e)?void 0:BO(n,e)?{from:e,to:i}:{from:n,to:e}:i?BO(e,i)?{from:i,to:e}:{from:e,to:i}:n?hQ(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var gj=$.createContext(void 0);function J_e(e){if(!y0(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return _.jsx(gj.Provider,{value:t,children:e.children})}return _.jsx(Z_e,{initialProps:e.initialProps,children:e.children})}function Z_e(e){var t=e.initialProps,r=e.children,n=t.selected,i=n||{},s=i.from,o=i.to,a=t.min,l=t.max,u=function(m,g,v){var y,x;(y=t.onDayClick)===null||y===void 0||y.call(t,m,g,v);var w=Q_e(m,n);(x=t.onSelect)===null||x===void 0||x.call(t,w,m,g,v)},c={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(c.range_start=[s],o?(c.range_end=[o],As(s,o)||(c.range_middle=[{after:s,before:o}])):c.range_end=[s]):o&&(c.range_start=[o],c.range_end=[o]),a&&(s&&!o&&c.disabled.push({after:lS(s,a-1),before:ds(s,a-1)}),s&&o&&c.disabled.push({after:s,before:ds(s,a-1)}),!s&&o&&c.disabled.push({after:lS(o,a-1),before:ds(o,a-1)})),l){if(s&&!o&&(c.disabled.push({before:ds(s,-l+1)}),c.disabled.push({after:ds(s,l-1)})),s&&o){var d=al(o,s)+1,h=l-d;c.disabled.push({before:lS(s,h)}),c.disabled.push({after:ds(o,h)})}!s&&o&&(c.disabled.push({before:ds(o,-l+1)}),c.disabled.push({after:ds(o,l-1)}))}return _.jsx(gj.Provider,{value:{selected:n,onDayClick:u,modifiers:c},children:r})}function vj(){var e=$.useContext(gj);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Mw(e){return Array.isArray(e)?pQ([],e):e!==void 0?[e]:[]}function e0e(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],i=r[1];t[n]=Mw(i)}),t}var Aa;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Aa||(Aa={}));var t0e=Aa.Selected,gu=Aa.Disabled,r0e=Aa.Hidden,n0e=Aa.Today,cS=Aa.RangeEnd,dS=Aa.RangeMiddle,fS=Aa.RangeStart,i0e=Aa.Outside;function s0e(e,t,r){var n,i=(n={},n[t0e]=Mw(e.selected),n[gu]=Mw(e.disabled),n[r0e]=Mw(e.hidden),n[n0e]=[e.today],n[cS]=[],n[dS]=[],n[fS]=[],n[i0e]=[],n);return e.fromDate&&i[gu].push({before:e.fromDate}),e.toDate&&i[gu].push({after:e.toDate}),v0(e)?i[gu]=i[gu].concat(t.modifiers[gu]):y0(e)&&(i[gu]=i[gu].concat(r.modifiers[gu]),i[fS]=r.modifiers[fS],i[dS]=r.modifiers[dS],i[cS]=r.modifiers[cS]),i}var _Q=$.createContext(void 0);function o0e(e){var t=cn(),r=mj(),n=vj(),i=s0e(t,r,n),s=e0e(t.modifiers),o=Ht(Ht({},i),s);return _.jsx(_Q.Provider,{value:o,children:e.children})}function bQ(){var e=$.useContext(_Q);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function a0e(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function l0e(e){return!!(e&&typeof e=="object"&&"from"in e)}function u0e(e){return!!(e&&typeof e=="object"&&"after"in e)}function c0e(e){return!!(e&&typeof e=="object"&&"before"in e)}function d0e(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function f0e(e,t){var r,n=t.from,i=t.to;if(n&&i){var s=al(i,n)<0;s&&(r=[i,n],n=r[0],i=r[1]);var o=al(e,n)>=0&&al(i,e)>=0;return o}return i?As(i,e):n?As(n,e):!1}function h0e(e){return cj(e)}function p0e(e){return Array.isArray(e)&&e.every(cj)}function m0e(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(h0e(r))return As(e,r);if(p0e(r))return r.includes(e);if(l0e(r))return f0e(e,r);if(d0e(r))return r.dayOfWeek.includes(e.getDay());if(a0e(r)){var n=al(r.before,e),i=al(r.after,e),s=n>0,o=i<0,a=BO(r.before,r.after);return a?o&&s:s||o}return u0e(r)?al(e,r.after)>0:c0e(r)?al(r.before,e)>0:typeof r=="function"?r(e):!1})}function yj(e,t,r){var n=Object.keys(t).reduce(function(s,o){var a=t[o];return m0e(e,a)&&s.push(o),s},[]),i={};return n.forEach(function(s){return i[s]=!0}),r&&!hj(e,r)&&(i.outside=!0),i}function g0e(e,t){for(var r=Is(e[0]),n=dj(e[e.length-1]),i,s,o=r;o<=n;){var a=yj(o,t),l=!a.disabled&&!a.hidden;if(!l){o=ds(o,1);continue}if(a.selected)return o;a.today&&!s&&(s=o),i||(i=o),o=ds(o,1)}return s||i}var v0e=365;function wQ(e,t){var r=t.moveBy,n=t.direction,i=t.context,s=t.modifiers,o=t.retry,a=o===void 0?{count:0,lastFocused:e}:o,l=i.weekStartsOn,u=i.fromDate,c=i.toDate,d=i.locale,h={day:ds,week:FO,month:Ca,year:sye,startOfWeek:function(y){return i.ISOWeek?ih(y):gl(y,{locale:d,weekStartsOn:l})},endOfWeek:function(y){return i.ISOWeek?aQ(y):fj(y,{locale:d,weekStartsOn:l})}},m=h[r](e,n==="after"?1:-1);n==="before"&&u?m=oye([u,m]):n==="after"&&c&&(m=aye([c,m]));var g=!0;if(s){var v=yj(m,s);g=!v.disabled&&!v.hidden}return g?m:a.count>v0e?a.lastFocused:wQ(m,{moveBy:r,direction:n,context:i,modifiers:s,retry:Ht(Ht({},a),{count:a.count+1})})}var xQ=$.createContext(void 0);function y0e(e){var t=_0(),r=bQ(),n=$.useState(),i=n[0],s=n[1],o=$.useState(),a=o[0],l=o[1],u=g0e(t.displayMonths,r),c=i??(a&&t.isDateDisplayed(a))?a:u,d=function(){l(i),s(void 0)},h=function(y){s(y)},m=cn(),g=function(y,x){if(i){var w=wQ(i,{moveBy:y,direction:x,context:m,modifiers:r});As(i,w)||(t.goToDate(w,i),h(w))}},v={focusedDay:i,focusTarget:c,blur:d,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return _.jsx(xQ.Provider,{value:v,children:e.children})}function _j(){var e=$.useContext(xQ);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function _0e(e,t){var r=bQ(),n=yj(e,r,t);return n}var bj=$.createContext(void 0);function b0e(e){if(!g1(e.initialProps)){var t={selected:void 0};return _.jsx(bj.Provider,{value:t,children:e.children})}return _.jsx(w0e,{initialProps:e.initialProps,children:e.children})}function w0e(e){var t=e.initialProps,r=e.children,n=function(s,o,a){var l,u,c;if((l=t.onDayClick)===null||l===void 0||l.call(t,s,o,a),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,s,o,a);return}(c=t.onSelect)===null||c===void 0||c.call(t,s,s,o,a)},i={selected:t.selected,onDayClick:n};return _.jsx(bj.Provider,{value:i,children:r})}function MQ(){var e=$.useContext(bj);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function x0e(e,t){var r=cn(),n=MQ(),i=mj(),s=vj(),o=_j(),a=o.focusDayAfter,l=o.focusDayBefore,u=o.focusWeekAfter,c=o.focusWeekBefore,d=o.blur,h=o.focus,m=o.focusMonthBefore,g=o.focusMonthAfter,v=o.focusYearBefore,y=o.focusYearAfter,x=o.focusStartOfWeek,w=o.focusEndOfWeek,S=function(Q){var W,oe,ce,D;g1(r)?(W=n.onDayClick)===null||W===void 0||W.call(n,e,t,Q):v0(r)?(oe=i.onDayClick)===null||oe===void 0||oe.call(i,e,t,Q):y0(r)?(ce=s.onDayClick)===null||ce===void 0||ce.call(s,e,t,Q):(D=r.onDayClick)===null||D===void 0||D.call(r,e,t,Q)},M=function(Q){var W;h(e),(W=r.onDayFocus)===null||W===void 0||W.call(r,e,t,Q)},T=function(Q){var W;d(),(W=r.onDayBlur)===null||W===void 0||W.call(r,e,t,Q)},P=function(Q){var W;(W=r.onDayMouseEnter)===null||W===void 0||W.call(r,e,t,Q)},E=function(Q){var W;(W=r.onDayMouseLeave)===null||W===void 0||W.call(r,e,t,Q)},A=function(Q){var W;(W=r.onDayPointerEnter)===null||W===void 0||W.call(r,e,t,Q)},L=function(Q){var W;(W=r.onDayPointerLeave)===null||W===void 0||W.call(r,e,t,Q)},B=function(Q){var W;(W=r.onDayTouchCancel)===null||W===void 0||W.call(r,e,t,Q)},V=function(Q){var W;(W=r.onDayTouchEnd)===null||W===void 0||W.call(r,e,t,Q)},G=function(Q){var W;(W=r.onDayTouchMove)===null||W===void 0||W.call(r,e,t,Q)},z=function(Q){var W;(W=r.onDayTouchStart)===null||W===void 0||W.call(r,e,t,Q)},K=function(Q){var W;(W=r.onDayKeyUp)===null||W===void 0||W.call(r,e,t,Q)},J=function(Q){var W;switch(Q.key){case"ArrowLeft":Q.preventDefault(),Q.stopPropagation(),r.dir==="rtl"?a():l();break;case"ArrowRight":Q.preventDefault(),Q.stopPropagation(),r.dir==="rtl"?l():a();break;case"ArrowDown":Q.preventDefault(),Q.stopPropagation(),u();break;case"ArrowUp":Q.preventDefault(),Q.stopPropagation(),c();break;case"PageUp":Q.preventDefault(),Q.stopPropagation(),Q.shiftKey?v():m();break;case"PageDown":Q.preventDefault(),Q.stopPropagation(),Q.shiftKey?y():g();break;case"Home":Q.preventDefault(),Q.stopPropagation(),x();break;case"End":Q.preventDefault(),Q.stopPropagation(),w();break}(W=r.onDayKeyDown)===null||W===void 0||W.call(r,e,t,Q)},X={onClick:S,onFocus:M,onBlur:T,onKeyDown:J,onKeyUp:K,onMouseEnter:P,onMouseLeave:E,onPointerEnter:A,onPointerLeave:L,onTouchCancel:B,onTouchEnd:V,onTouchMove:G,onTouchStart:z};return X}function M0e(){var e=cn(),t=MQ(),r=mj(),n=vj(),i=g1(e)?t.selected:v0(e)?r.selected:y0(e)?n.selected:void 0;return i}function T0e(e){return Object.values(Aa).includes(e)}function S0e(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var i=e.modifiersClassNames[n];if(i)r.push(i);else if(T0e(n)){var s=e.classNames["day_".concat(n)];s&&r.push(s)}}),r}function P0e(e,t){var r=Ht({},e.styles.day);return Object.keys(t).forEach(function(n){var i;r=Ht(Ht({},r),(i=e.modifiersStyles)===null||i===void 0?void 0:i[n])}),r}function E0e(e,t,r){var n,i,s,o=cn(),a=_j(),l=_0e(e,t),u=x0e(e,l),c=M0e(),d=!!(o.onDayClick||o.mode!=="default");$.useEffect(function(){var P;l.outside||a.focusedDay&&d&&As(a.focusedDay,e)&&((P=r.current)===null||P===void 0||P.focus())},[a.focusedDay,e,r,d,l.outside]);var h=S0e(o,l).join(" "),m=P0e(o,l),g=!!(l.outside&&!o.showOutsideDays||l.hidden),v=(s=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&s!==void 0?s:K_e,y=_.jsx(v,{date:e,displayMonth:t,activeModifiers:l}),x={style:m,className:h,children:y,role:"gridcell"},w=a.focusTarget&&As(a.focusTarget,e)&&!l.outside,S=a.focusedDay&&As(a.focusedDay,e),M=Ht(Ht(Ht({},x),(n={disabled:l.disabled,role:"gridcell"},n["aria-selected"]=l.selected,n.tabIndex=S||w?0:-1,n)),u),T={isButton:d,isHidden:g,activeModifiers:l,selectedDays:c,buttonProps:M,divProps:x};return T}function C0e(e){var t=$.useRef(null),r=E0e(e.date,e.displayMonth,t);return r.isHidden?_.jsx("div",{role:"gridcell"}):r.isButton?_.jsx(ex,Ht({name:"day",ref:t},r.buttonProps)):_.jsx("div",Ht({},r.divProps))}function A0e(e){var t=e.number,r=e.dates,n=cn(),i=n.onWeekNumberClick,s=n.styles,o=n.classNames,a=n.locale,l=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,c=u(Number(t),{locale:a});if(!i)return _.jsx("span",{className:o.weeknumber,style:s.weeknumber,children:c});var d=l(Number(t),{locale:a}),h=function(m){i(t,r,m)};return _.jsx(ex,{name:"week-number","aria-label":d,className:o.weeknumber,style:s.weeknumber,onClick:h,children:c})}function O0e(e){var t,r,n=cn(),i=n.styles,s=n.classNames,o=n.showWeekNumber,a=n.components,l=(t=a?.Day)!==null&&t!==void 0?t:C0e,u=(r=a?.WeekNumber)!==null&&r!==void 0?r:A0e,c;return o&&(c=_.jsx("td",{className:s.cell,style:i.cell,children:_.jsx(u,{number:e.weekNumber,dates:e.dates})})),_.jsxs("tr",{className:s.row,style:i.row,children:[c,e.dates.map(function(d){return _.jsx("td",{className:s.cell,style:i.cell,role:"presentation",children:_.jsx(l,{displayMonth:e.displayMonth,date:d})},o_e(d))})]})}function nB(e,t,r){for(var n=r?.ISOWeek?aQ(t):fj(t,r),i=r?.ISOWeek?ih(e):gl(e,r),s=al(n,i),o=[],a=0;a<=s;a++)o.push(ds(i,a));var l=o.reduce(function(u,c){var d=r?.ISOWeek?uQ(c):dQ(c,r),h=u.find(function(m){return m.weekNumber===d});return h?(h.dates.push(c),u):(u.push({weekNumber:d,dates:[c]}),u)},[]);return l}function k0e(e,t){var r=nB(Is(e),dj(e),t);if(t?.useFixedWeeks){var n=l_e(e,t);if(n<6){var i=r[r.length-1],s=i.dates[i.dates.length-1],o=FO(s,6-n),a=nB(FO(s,1),o,t);r.push.apply(r,a)}}return r}function I0e(e){var t,r,n,i=cn(),s=i.locale,o=i.classNames,a=i.styles,l=i.hideHead,u=i.fixedWeeks,c=i.components,d=i.weekStartsOn,h=i.firstWeekContainsDate,m=i.ISOWeek,g=k0e(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:s,weekStartsOn:d,firstWeekContainsDate:h}),v=(t=c?.Head)!==null&&t!==void 0?t:H_e,y=(r=c?.Row)!==null&&r!==void 0?r:O0e,x=(n=c?.Footer)!==null&&n!==void 0?n:W_e;return _.jsxs("table",{id:e.id,className:o.table,style:a.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!l&&_.jsx(v,{}),_.jsx("tbody",{className:o.tbody,style:a.tbody,children:g.map(function(w){return _.jsx(y,{displayMonth:e.displayMonth,dates:w.dates,weekNumber:w.weekNumber},w.weekNumber)})}),_.jsx(x,{displayMonth:e.displayMonth})]})}function j0e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var $0e=j0e()?$.useLayoutEffect:$.useEffect,hS=!1,N0e=0;function iB(){return"react-day-picker-".concat(++N0e)}function D0e(e){var t,r=e??(hS?iB():null),n=$.useState(r),i=n[0],s=n[1];return $0e(function(){i===null&&s(iB())},[]),$.useEffect(function(){hS===!1&&(hS=!0)},[]),(t=e??i)!==null&&t!==void 0?t:void 0}function R0e(e){var t,r,n=cn(),i=n.dir,s=n.classNames,o=n.styles,a=n.components,l=_0().displayMonths,u=D0e(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),c=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,d=[s.month],h=o.month,m=e.displayIndex===0,g=e.displayIndex===l.length-1,v=!m&&!g;i==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(d.push(s.caption_start),h=Ht(Ht({},h),o.caption_start)),g&&(d.push(s.caption_end),h=Ht(Ht({},h),o.caption_end)),v&&(d.push(s.caption_between),h=Ht(Ht({},h),o.caption_between));var y=(r=a?.Caption)!==null&&r!==void 0?r:V_e;return _.jsxs("div",{className:d.join(" "),style:h,children:[_.jsx(y,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),_.jsx(I0e,{id:c,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function L0e(e){var t=cn(),r=t.classNames,n=t.styles;return _.jsx("div",{className:r.months,style:n.months,children:e.children})}function F0e(e){var t,r,n=e.initialProps,i=cn(),s=_j(),o=_0(),a=$.useState(!1),l=a[0],u=a[1];$.useEffect(function(){i.initialFocus&&s.focusTarget&&(l||(s.focus(s.focusTarget),u(!0)))},[i.initialFocus,l,s.focus,s.focusTarget,s]);var c=[i.classNames.root,i.className];i.numberOfMonths>1&&c.push(i.classNames.multiple_months),i.showWeekNumber&&c.push(i.classNames.with_weeknumber);var d=Ht(Ht({},i.styles.root),i.style),h=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,v){var y;return Ht(Ht({},g),(y={},y[v]=n[v],y))},{}),m=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:L0e;return _.jsx("div",Ht({className:c.join(" "),style:d,dir:i.dir,id:i.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:_.jsx(m,{children:o.displayMonths.map(function(g,v){return _.jsx(R0e,{displayIndex:v,displayMonth:g},v)})})}))}function B0e(e){var t=e.children,r=c_e(e,["children"]);return _.jsx(A_e,{initialProps:r,children:_.jsx(F_e,{children:_.jsx(b0e,{initialProps:r,children:_.jsx(X_e,{initialProps:r,children:_.jsx(J_e,{initialProps:r,children:_.jsx(o0e,{children:_.jsx(y0e,{children:t})})})})})})})}function z0e(e){return _.jsx(B0e,Ht({},e,{children:_.jsx(F0e,{initialProps:e})}))}function TQ({className:e,classNames:t,showOutsideDays:r=!0,...n}){return _.jsx(z0e,{showOutsideDays:r,className:Kt("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Kt(fO({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Kt(fO({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...i})=>_.jsx(Nte,{className:"h-4 w-4"}),IconRight:({...i})=>_.jsx(M8,{className:"h-4 w-4"})},...n})}TQ.displayName="Calendar";const U0e=()=>{const[e,t]=$.useState([]),[r,n]=$.useState(!0),{user:i}=Oa(),s=async()=>{if(!i)return;n(!0);const{data:u,error:c}=await Mr.from("outfit_calendar").select(`
        *,
        outfits (
          id,
          name,
          description,
          outfit_items (
            id,
            clothing_item_id,
            clothing_items (
              id,
              name,
              image_url,
              color,
              hex_color,
              category
            )
          )
        )
      `).order("date",{ascending:!1});if(c)console.error("Error fetching outfit calendar:",c);else{const d=u?.map(h=>({...h,outfit:h.outfits?{...h.outfits,items:h.outfits.outfit_items?.map(m=>({id:m.id,clothing_item_id:m.clothing_item_id,clothing_item:m.clothing_items}))}:void 0}))||[];t(d)}n(!1)},o=async(u,c,d)=>{if(!i)return;const{data:h,error:m}=await Mr.from("outfit_calendar").upsert([{user_id:i.id,date:u,outfit_id:c,notes:d}]).select().single();if(m)throw console.error("Error adding calendar entry:",m),m;return await s(),h},a=async(u,c)=>{const{data:d,error:h}=await Mr.from("outfit_calendar").update(c).eq("id",u).select().single();if(h)throw console.error("Error updating calendar entry:",h),h;return await s(),d},l=async u=>{const{error:c}=await Mr.from("outfit_calendar").delete().eq("id",u);if(c)throw console.error("Error deleting calendar entry:",c),c;t(d=>d.filter(h=>h.id!==u))};return $.useEffect(()=>{s()},[i]),{entries:e,loading:r,addEntry:o,updateEntry:a,deleteEntry:l,refetch:s}},V0e=()=>{const[e,t]=$.useState(new Date),[r,n]=$.useState(""),[i,s]=$.useState(""),[o,a]=$.useState(!1),l=js(),{entries:u,addEntry:c}=U0e(),{outfits:d}=uh(),{toast:h}=ro(),m=y=>y.toISOString().split("T")[0],g=e?u.find(y=>y.date===m(e)):null,v=async()=>{if(e)try{await c(m(e),r||void 0,i.trim()||void 0),h({title:"Outfit saved!",description:"Your outfit has been added to the calendar."}),a(!1),n(""),s("")}catch{h({title:"Error saving outfit",description:"Please try again.",variant:"destructive"})}};return _.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx(Yt,{variant:"ghost",size:"icon",onClick:()=>l(-1),children:_.jsx(Eu,{className:"h-5 w-5"})}),_.jsx("h1",{className:"text-xl font-bold",children:"Outfit Calendar"}),_.jsx("div",{className:"w-10"})]}),_.jsxs(Er,{children:[_.jsx(Qf,{children:_.jsxs(Jf,{className:"flex items-center gap-2",children:[_.jsx(a2,{className:"h-5 w-5"}),"Select Date"]})}),_.jsx(Nr,{children:_.jsx(TQ,{mode:"single",selected:e,onSelect:t,className:"rounded-md border"})})]}),e&&_.jsxs(Er,{children:[_.jsx(Qf,{children:_.jsxs(Jf,{className:"flex items-center justify-between",children:[_.jsx("span",{children:e.toLocaleDateString()}),_.jsxs(mK,{open:o,onOpenChange:a,children:[_.jsx(gK,{asChild:!0,children:_.jsxs(Yt,{size:"sm",children:[_.jsx(Wte,{className:"h-4 w-4 mr-1"}),"Add Outfit"]})}),_.jsxs(SI,{children:[_.jsx(PI,{children:_.jsxs(EI,{children:["Add Outfit for ",e.toLocaleDateString()]})}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium",children:"Choose Outfit"}),_.jsxs(Io,{value:r,onValueChange:n,children:[_.jsx(Qs,{className:"mt-1",children:_.jsx(jo,{placeholder:"Select an outfit"})}),_.jsx(Js,{children:d.map(y=>_.jsx(Vt,{value:y.id,children:y.name},y.id))})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium",children:"Notes"}),_.jsx(p0,{value:i,onChange:y=>s(y.target.value),placeholder:"Any notes about this outfit...",className:"mt-1",rows:3})]}),_.jsx(Yt,{onClick:v,className:"w-full",children:"Save Outfit"})]})]})]})]})}),_.jsx(Nr,{children:g?_.jsxs("div",{className:"space-y-4",children:[g.outfit&&_.jsxs("div",{children:[_.jsxs("h4",{className:"font-medium mb-2",children:["Outfit: ",g.outfit.name]}),g.outfit.items&&g.outfit.items.length>0&&_.jsx("div",{className:"grid grid-cols-3 gap-2",children:g.outfit.items.map(y=>_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"aspect-square bg-muted rounded-md overflow-hidden mb-1",children:y.clothing_item?.image_url?_.jsx("img",{src:y.clothing_item.image_url,alt:y.clothing_item.name,className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full flex items-center justify-center",children:_.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-300",style:{backgroundColor:y.clothing_item?.hex_color}})})}),_.jsx("p",{className:"text-xs truncate",children:y.clothing_item?.name}),_.jsx(Fi,{variant:"outline",className:"text-xs",children:y.clothing_item?.category})]},y.id))})]}),g.notes&&_.jsxs("div",{children:[_.jsx("h4",{className:"font-medium",children:"Notes:"}),_.jsx("p",{className:"text-sm text-muted-foreground",children:g.notes})]})]}):_.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No outfit planned for this day"})})]})]})};var pS,sB;function $s(){if(sB)return pS;sB=1;var e=Array.isArray;return pS=e,pS}var mS,oB;function SQ(){if(oB)return mS;oB=1;var e=typeof cb=="object"&&cb&&cb.Object===Object&&cb;return mS=e,mS}var gS,aB;function bl(){if(aB)return gS;aB=1;var e=SQ(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return gS=r,gS}var vS,lB;function b0(){if(lB)return vS;lB=1;var e=bl(),t=e.Symbol;return vS=t,vS}var yS,uB;function W0e(){if(uB)return yS;uB=1;var e=b0(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function s(o){var a=r.call(o,i),l=o[i];try{o[i]=void 0;var u=!0}catch{}var c=n.call(o);return u&&(a?o[i]=l:delete o[i]),c}return yS=s,yS}var _S,cB;function G0e(){if(cB)return _S;cB=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return _S=r,_S}var bS,dB;function Ru(){if(dB)return bS;dB=1;var e=b0(),t=W0e(),r=G0e(),n="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(a){return a==null?a===void 0?i:n:s&&s in Object(a)?t(a):r(a)}return bS=o,bS}var wS,fB;function Lu(){if(fB)return wS;fB=1;function e(t){return t!=null&&typeof t=="object"}return wS=e,wS}var xS,hB;function pg(){if(hB)return xS;hB=1;var e=Ru(),t=Lu(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return xS=n,xS}var MS,pB;function wj(){if(pB)return MS;pB=1;var e=$s(),t=pg(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,o){if(e(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||t(s)?!0:n.test(s)||!r.test(s)||o!=null&&s in Object(o)}return MS=i,MS}var TS,mB;function sd(){if(mB)return TS;mB=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return TS=e,TS}var SS,gB;function xj(){if(gB)return SS;gB=1;var e=Ru(),t=sd(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!t(a))return!1;var l=e(a);return l==n||l==i||l==r||l==s}return SS=o,SS}var PS,vB;function q0e(){if(vB)return PS;vB=1;var e=bl(),t=e["__core-js_shared__"];return PS=t,PS}var ES,yB;function H0e(){if(yB)return ES;yB=1;var e=q0e(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return ES=r,ES}var CS,_B;function PQ(){if(_B)return CS;_B=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return CS=r,CS}var AS,bB;function K0e(){if(bB)return AS;bB=1;var e=xj(),t=H0e(),r=sd(),n=PQ(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,l=o.toString,u=a.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(h){if(!r(h)||t(h))return!1;var m=e(h)?c:s;return m.test(n(h))}return AS=d,AS}var OS,wB;function X0e(){if(wB)return OS;wB=1;function e(t,r){return t?.[r]}return OS=e,OS}var kS,xB;function hh(){if(xB)return kS;xB=1;var e=K0e(),t=X0e();function r(n,i){var s=t(n,i);return e(s)?s:void 0}return kS=r,kS}var IS,MB;function v1(){if(MB)return IS;MB=1;var e=hh(),t=e(Object,"create");return IS=t,IS}var jS,TB;function Y0e(){if(TB)return jS;TB=1;var e=v1();function t(){this.__data__=e?e(null):{},this.size=0}return jS=t,jS}var $S,SB;function Q0e(){if(SB)return $S;SB=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return $S=e,$S}var NS,PB;function J0e(){if(PB)return NS;PB=1;var e=v1(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(s){var o=this.__data__;if(e){var a=o[s];return a===t?void 0:a}return n.call(o,s)?o[s]:void 0}return NS=i,NS}var DS,EB;function Z0e(){if(EB)return DS;EB=1;var e=v1(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var s=this.__data__;return e?s[i]!==void 0:r.call(s,i)}return DS=n,DS}var RS,CB;function ebe(){if(CB)return RS;CB=1;var e=v1(),t="__lodash_hash_undefined__";function r(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=e&&i===void 0?t:i,this}return RS=r,RS}var LS,AB;function tbe(){if(AB)return LS;AB=1;var e=Y0e(),t=Q0e(),r=J0e(),n=Z0e(),i=ebe();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,LS=s,LS}var FS,OB;function rbe(){if(OB)return FS;OB=1;function e(){this.__data__=[],this.size=0}return FS=e,FS}var BS,kB;function Mj(){if(kB)return BS;kB=1;function e(t,r){return t===r||t!==t&&r!==r}return BS=e,BS}var zS,IB;function y1(){if(IB)return zS;IB=1;var e=Mj();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return zS=t,zS}var US,jB;function nbe(){if(jB)return US;jB=1;var e=y1(),t=Array.prototype,r=t.splice;function n(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():r.call(s,o,1),--this.size,!0}return US=n,US}var VS,$B;function ibe(){if($B)return VS;$B=1;var e=y1();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return VS=t,VS}var WS,NB;function sbe(){if(NB)return WS;NB=1;var e=y1();function t(r){return e(this.__data__,r)>-1}return WS=t,WS}var GS,DB;function obe(){if(DB)return GS;DB=1;var e=y1();function t(r,n){var i=this.__data__,s=e(i,r);return s<0?(++this.size,i.push([r,n])):i[s][1]=n,this}return GS=t,GS}var qS,RB;function _1(){if(RB)return qS;RB=1;var e=rbe(),t=nbe(),r=ibe(),n=sbe(),i=obe();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,qS=s,qS}var HS,LB;function Tj(){if(LB)return HS;LB=1;var e=hh(),t=bl(),r=e(t,"Map");return HS=r,HS}var KS,FB;function abe(){if(FB)return KS;FB=1;var e=tbe(),t=_1(),r=Tj();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return KS=n,KS}var XS,BB;function lbe(){if(BB)return XS;BB=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return XS=e,XS}var YS,zB;function b1(){if(zB)return YS;zB=1;var e=lbe();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return YS=t,YS}var QS,UB;function ube(){if(UB)return QS;UB=1;var e=b1();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return QS=t,QS}var JS,VB;function cbe(){if(VB)return JS;VB=1;var e=b1();function t(r){return e(this,r).get(r)}return JS=t,JS}var ZS,WB;function dbe(){if(WB)return ZS;WB=1;var e=b1();function t(r){return e(this,r).has(r)}return ZS=t,ZS}var eP,GB;function fbe(){if(GB)return eP;GB=1;var e=b1();function t(r,n){var i=e(this,r),s=i.size;return i.set(r,n),this.size+=i.size==s?0:1,this}return eP=t,eP}var tP,qB;function Sj(){if(qB)return tP;qB=1;var e=abe(),t=ube(),r=cbe(),n=dbe(),i=fbe();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,tP=s,tP}var rP,HB;function EQ(){if(HB)return rP;HB=1;var e=Sj(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,a=i?i.apply(this,o):o[0],l=s.cache;if(l.has(a))return l.get(a);var u=n.apply(this,o);return s.cache=l.set(a,u)||l,u};return s.cache=new(r.Cache||e),s}return r.Cache=e,rP=r,rP}var nP,KB;function hbe(){if(KB)return nP;KB=1;var e=EQ(),t=500;function r(n){var i=e(n,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return nP=r,nP}var iP,XB;function pbe(){if(XB)return iP;XB=1;var e=hbe(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,a,l,u){s.push(l?u.replace(r,"$1"):a||o)}),s});return iP=n,iP}var sP,YB;function Pj(){if(YB)return sP;YB=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=Array(i);++n<i;)s[n]=r(t[n],n,t);return s}return sP=e,sP}var oP,QB;function mbe(){if(QB)return oP;QB=1;var e=b0(),t=Pj(),r=$s(),n=pg(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(a){if(typeof a=="string")return a;if(r(a))return t(a,o)+"";if(n(a))return s?s.call(a):"";var l=a+"";return l=="0"&&1/a==-1/0?"-0":l}return oP=o,oP}var aP,JB;function CQ(){if(JB)return aP;JB=1;var e=mbe();function t(r){return r==null?"":e(r)}return aP=t,aP}var lP,ZB;function AQ(){if(ZB)return lP;ZB=1;var e=$s(),t=wj(),r=pbe(),n=CQ();function i(s,o){return e(s)?s:t(s,o)?[s]:r(n(s))}return lP=i,lP}var uP,ez;function w1(){if(ez)return uP;ez=1;var e=pg();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return uP=t,uP}var cP,tz;function Ej(){if(tz)return cP;tz=1;var e=AQ(),t=w1();function r(n,i){i=e(i,n);for(var s=0,o=i.length;n!=null&&s<o;)n=n[t(i[s++])];return s&&s==o?n:void 0}return cP=r,cP}var dP,rz;function OQ(){if(rz)return dP;rz=1;var e=Ej();function t(r,n,i){var s=r==null?void 0:e(r,n);return s===void 0?i:s}return dP=t,dP}var gbe=OQ();const Ta=Dr(gbe);var fP,nz;function vbe(){if(nz)return fP;nz=1;function e(t){return t==null}return fP=e,fP}var ybe=vbe();const yr=Dr(ybe);var hP,iz;function _be(){if(iz)return hP;iz=1;var e=Ru(),t=$s(),r=Lu(),n="[object String]";function i(s){return typeof s=="string"||!t(s)&&r(s)&&e(s)==n}return hP=i,hP}var bbe=_be();const w0=Dr(bbe);var wbe=xj();const hr=Dr(wbe);var xbe=sd();const mg=Dr(xbe);var pP={exports:{}},$r={};var sz;function Mbe(){if(sz)return $r;sz=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),g;g=Symbol.for("react.module.reference");function v(y){if(typeof y=="object"&&y!==null){var x=y.$$typeof;switch(x){case e:switch(y=y.type,y){case r:case i:case n:case u:case c:return y;default:switch(y=y&&y.$$typeof,y){case a:case o:case l:case h:case d:case s:return y;default:return x}}case t:return x}}}return $r.ContextConsumer=o,$r.ContextProvider=s,$r.Element=e,$r.ForwardRef=l,$r.Fragment=r,$r.Lazy=h,$r.Memo=d,$r.Portal=t,$r.Profiler=i,$r.StrictMode=n,$r.Suspense=u,$r.SuspenseList=c,$r.isAsyncMode=function(){return!1},$r.isConcurrentMode=function(){return!1},$r.isContextConsumer=function(y){return v(y)===o},$r.isContextProvider=function(y){return v(y)===s},$r.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},$r.isForwardRef=function(y){return v(y)===l},$r.isFragment=function(y){return v(y)===r},$r.isLazy=function(y){return v(y)===h},$r.isMemo=function(y){return v(y)===d},$r.isPortal=function(y){return v(y)===t},$r.isProfiler=function(y){return v(y)===i},$r.isStrictMode=function(y){return v(y)===n},$r.isSuspense=function(y){return v(y)===u},$r.isSuspenseList=function(y){return v(y)===c},$r.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===r||y===i||y===n||y===u||y===c||y===m||typeof y=="object"&&y!==null&&(y.$$typeof===h||y.$$typeof===d||y.$$typeof===s||y.$$typeof===o||y.$$typeof===l||y.$$typeof===g||y.getModuleId!==void 0)},$r.typeOf=v,$r}var oz;function Tbe(){return oz||(oz=1,pP.exports=Mbe()),pP.exports}var kQ=Tbe(),mP,az;function IQ(){if(az)return mP;az=1;var e=Ru(),t=Lu(),r="[object Number]";function n(i){return typeof i=="number"||t(i)&&e(i)==r}return mP=n,mP}var gP,lz;function Sbe(){if(lz)return gP;lz=1;var e=IQ();function t(r){return e(r)&&r!=+r}return gP=t,gP}var Pbe=Sbe();const x0=Dr(Pbe);var Ebe=IQ();const Cbe=Dr(Ebe);var $o=function(t){return t===0?0:t>0?1:-1},Ff=function(t){return w0(t)&&t.indexOf("%")===t.length-1},St=function(t){return Cbe(t)&&!x0(t)},ci=function(t){return St(t)||w0(t)},Abe=0,x1=function(t){var r=++Abe;return"".concat(t||"").concat(r)},Os=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!St(t)&&!w0(t))return n;var s;if(Ff(t)){var o=t.indexOf("%");s=r*parseFloat(t.slice(0,o))/100}else s=+t;return x0(s)&&(s=n),i&&s>r&&(s=r),s},rm=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Obe=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},i=0;i<r;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1},uz=function(t,r){return St(t)&&St(r)?function(n){return t+n*(r-t)}:function(){return r}};function zO(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Ta(n,t))===r})}function UO(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function VO(e){"@babel/helpers - typeof";return VO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},VO(e)}var kbe=["viewBox","children"],Ibe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],cz=["points","pathLength"],vP={svg:kbe,polygon:cz,polyline:cz},Cj=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],tx=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if($.isValidElement(t)&&(n=t.props),!mg(n))return null;var i={};return Object.keys(n).forEach(function(s){Cj.includes(s)&&(i[s]=r||function(o){return n[s](n,o)})}),i},jbe=function(t,r,n){return function(i){return t(r,n,i),null}},M1=function(t,r,n){if(!mg(t)||VO(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(s){var o=t[s];Cj.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=jbe(o,r,n))}),i},$be=["children"],Nbe=["children"];function dz(e,t){if(e==null)return{};var r=Dbe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Dbe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var fz={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Tu=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},hz=null,yP=null,Aj=function e(t){if(t===hz&&Array.isArray(yP))return yP;var r=[];return $.Children.forEach(t,function(n){yr(n)||(kQ.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),yP=r,hz=t,r};function fl(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(i){return Tu(i)}):n=[Tu(t)],Aj(e).forEach(function(i){var s=Ta(i,"type.displayName")||Ta(i,"type.name");n.indexOf(s)!==-1&&r.push(i)}),r}function Co(e,t){var r=fl(e,t);return r&&r[0]}var pz=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,i=r.height;return!(!St(n)||n<=0||!St(i)||i<=0)},Rbe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Lbe=function(t){return t&&t.type&&w0(t.type)&&Rbe.indexOf(t.type)>=0},Fbe=function(t,r,n,i){var s,o=(s=vP?.[i])!==null&&s!==void 0?s:[];return!hr(t)&&(i&&o.includes(r)||Ibe.includes(r))||n&&Cj.includes(r)},lr=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if($.isValidElement(t)&&(i=t.props),!mg(i))return null;var s={};return Object.keys(i).forEach(function(o){var a;Fbe((a=i)===null||a===void 0?void 0:a[o],o,r,n)&&(s[o]=i[o])}),s},WO=function e(t,r){if(t===r)return!0;var n=$.Children.count(t);if(n!==$.Children.count(r))return!1;if(n===0)return!0;if(n===1)return mz(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var s=t[i],o=r[i];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!mz(s,o))return!1}return!0},mz=function(t,r){if(yr(t)&&yr(r))return!0;if(!yr(t)&&!yr(r)){var n=t.props||{},i=n.children,s=dz(n,$be),o=r.props||{},a=o.children,l=dz(o,Nbe);return i&&a?UO(s,l)&&WO(i,a):!i&&!a?UO(s,l):!1}return!1},gz=function(t,r){var n=[],i={};return Aj(t).forEach(function(s,o){if(Lbe(s))n.push(s);else if(s){var a=Tu(s.type),l=r[a]||{},u=l.handler,c=l.once;if(u&&(!c||!i[a])){var d=u(s,a,o);n.push(d),i[a]=!0}}}),n},Bbe=function(t){var r=t&&t.type;return r&&fz[r]?fz[r]:null},zbe=function(t,r){return Aj(r).indexOf(t)},Ube=["children","width","height","viewBox","className","style","title","desc"];function GO(){return GO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GO.apply(this,arguments)}function Vbe(e,t){if(e==null)return{};var r=Wbe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Wbe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qO(e){var t=e.children,r=e.width,n=e.height,i=e.viewBox,s=e.className,o=e.style,a=e.title,l=e.desc,u=Vbe(e,Ube),c=i||{width:r,height:n,x:0,y:0},d=br("recharts-surface",s);return ye.createElement("svg",GO({},lr(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),ye.createElement("title",null,a),ye.createElement("desc",null,l),t)}var Gbe=["children","className"];function HO(){return HO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HO.apply(this,arguments)}function qbe(e,t){if(e==null)return{};var r=Hbe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Hbe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Vn=ye.forwardRef(function(e,t){var r=e.children,n=e.className,i=qbe(e,Gbe),s=br("recharts-layer",n);return ye.createElement("g",HO({className:s},lr(i,!0),{ref:t}),r)}),Su=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s]},_P,vz;function Kbe(){if(vz)return _P;vz=1;function e(t,r,n){var i=-1,s=t.length;r<0&&(r=-r>s?0:s+r),n=n>s?s:n,n<0&&(n+=s),s=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(s);++i<s;)o[i]=t[i+r];return o}return _P=e,_P}var bP,yz;function Xbe(){if(yz)return bP;yz=1;var e=Kbe();function t(r,n,i){var s=r.length;return i=i===void 0?s:i,!n&&i>=s?r:e(r,n,i)}return bP=t,bP}var wP,_z;function jQ(){if(_z)return wP;_z=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,s="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+e+i+s+"]");function l(u){return a.test(u)}return wP=l,wP}var xP,bz;function Ybe(){if(bz)return xP;bz=1;function e(t){return t.split("")}return xP=e,xP}var MP,wz;function Qbe(){if(wz)return MP;wz=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,s="\\ufe0e\\ufe0f",o="["+e+"]",a="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+a+"|"+l+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",g=u+"?",v="["+s+"]?",y="(?:"+m+"(?:"+[c,d,h].join("|")+")"+v+g+")*",x=v+g+y,w="(?:"+[c+a+"?",a,d,h,o].join("|")+")",S=RegExp(l+"(?="+l+")|"+w+x,"g");function M(T){return T.match(S)||[]}return MP=M,MP}var TP,xz;function Jbe(){if(xz)return TP;xz=1;var e=Ybe(),t=jQ(),r=Qbe();function n(i){return t(i)?r(i):e(i)}return TP=n,TP}var SP,Mz;function Zbe(){if(Mz)return SP;Mz=1;var e=Xbe(),t=jQ(),r=Jbe(),n=CQ();function i(s){return function(o){o=n(o);var a=t(o)?r(o):void 0,l=a?a[0]:o.charAt(0),u=a?e(a,1).join(""):o.slice(1);return l[s]()+u}}return SP=i,SP}var PP,Tz;function ewe(){if(Tz)return PP;Tz=1;var e=Zbe(),t=e("toUpperCase");return PP=t,PP}var twe=ewe();const T1=Dr(twe);function ln(e){return function(){return e}}const $Q=Math.cos,rx=Math.sin,ja=Math.sqrt,nx=Math.PI,S1=2*nx,KO=Math.PI,XO=2*KO,Cf=1e-6,rwe=XO-Cf;function NQ(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function nwe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return NQ;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class iwe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?NQ:nwe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,o){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=n-t,u=i-r,c=o-t,d=a-r,h=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Cf)if(!(Math.abs(d*l-u*c)>Cf)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,g=i-a,v=l*l+u*u,y=m*m+g*g,x=Math.sqrt(v),w=Math.sqrt(h),S=s*Math.tan((KO-Math.acos((v+h-y)/(2*x*w)))/2),M=S/w,T=S/x;Math.abs(M-1)>Cf&&this._append`L${t+M*c},${r+M*d}`,this._append`A${s},${s},0,0,${+(d*m>c*g)},${this._x1=t+T*l},${this._y1=r+T*u}`}}arc(t,r,n,i,s,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),l=n*Math.sin(i),u=t+a,c=r+l,d=1^o,h=o?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Cf||Math.abs(this._y1-c)>Cf)&&this._append`L${u},${c}`,n&&(h<0&&(h=h%XO+XO),h>rwe?this._append`A${n},${n},0,1,${d},${t-a},${r-l}A${n},${n},0,1,${d},${this._x1=u},${this._y1=c}`:h>Cf&&this._append`A${n},${n},0,${+(h>=KO)},${d},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Oj(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new iwe(t)}function kj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function DQ(e){this._context=e}DQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function P1(e){return new DQ(e)}function RQ(e){return e[0]}function LQ(e){return e[1]}function FQ(e,t){var r=ln(!0),n=null,i=P1,s=null,o=Oj(a);e=typeof e=="function"?e:e===void 0?RQ:ln(e),t=typeof t=="function"?t:t===void 0?LQ:ln(t);function a(l){var u,c=(l=kj(l)).length,d,h=!1,m;for(n==null&&(s=i(m=o())),u=0;u<=c;++u)!(u<c&&r(d=l[u],u,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(d,u,l),+t(d,u,l));if(m)return s=null,m+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:ln(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:ln(+l),a):t},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:ln(!!l),a):r},a.curve=function(l){return arguments.length?(i=l,n!=null&&(s=i(n)),a):i},a.context=function(l){return arguments.length?(l==null?n=s=null:s=i(n=l),a):n},a}function Kb(e,t,r){var n=null,i=ln(!0),s=null,o=P1,a=null,l=Oj(u);e=typeof e=="function"?e:e===void 0?RQ:ln(+e),t=typeof t=="function"?t:ln(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?LQ:ln(+r);function u(d){var h,m,g,v=(d=kj(d)).length,y,x=!1,w,S=new Array(v),M=new Array(v);for(s==null&&(a=o(w=l())),h=0;h<=v;++h){if(!(h<v&&i(y=d[h],h,d))===x)if(x=!x)m=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=h-1;g>=m;--g)a.point(S[g],M[g]);a.lineEnd(),a.areaEnd()}x&&(S[h]=+e(y,h,d),M[h]=+t(y,h,d),a.point(n?+n(y,h,d):S[h],r?+r(y,h,d):M[h]))}if(w)return a=null,w+""||null}function c(){return FQ().defined(i).curve(o).context(s)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:ln(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:ln(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:ln(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:ln(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:ln(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:ln(+d),u):r},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(r)},u.lineX1=function(){return c().x(n).y(t)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:ln(!!d),u):i},u.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),u):s},u}class BQ{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function swe(e){return new BQ(e,!0)}function owe(e){return new BQ(e,!1)}const Ij={draw(e,t){const r=ja(t/nx);e.moveTo(r,0),e.arc(0,0,r,0,S1)}},awe={draw(e,t){const r=ja(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},zQ=ja(1/3),lwe=zQ*2,uwe={draw(e,t){const r=ja(t/lwe),n=r*zQ;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},cwe={draw(e,t){const r=ja(t),n=-r/2;e.rect(n,n,r,r)}},dwe=.8908130915292852,UQ=rx(nx/10)/rx(7*nx/10),fwe=rx(S1/10)*UQ,hwe=-$Q(S1/10)*UQ,pwe={draw(e,t){const r=ja(t*dwe),n=fwe*r,i=hwe*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const o=S1*s/5,a=$Q(o),l=rx(o);e.lineTo(l*r,-a*r),e.lineTo(a*n-l*i,l*n+a*i)}e.closePath()}},EP=ja(3),mwe={draw(e,t){const r=-ja(t/(EP*3));e.moveTo(0,r*2),e.lineTo(-EP*r,-r),e.lineTo(EP*r,-r),e.closePath()}},Mo=-.5,To=ja(3)/2,YO=1/ja(12),gwe=(YO/2+1)*3,vwe={draw(e,t){const r=ja(t/gwe),n=r/2,i=r*YO,s=n,o=r*YO+r,a=-s,l=o;e.moveTo(n,i),e.lineTo(s,o),e.lineTo(a,l),e.lineTo(Mo*n-To*i,To*n+Mo*i),e.lineTo(Mo*s-To*o,To*s+Mo*o),e.lineTo(Mo*a-To*l,To*a+Mo*l),e.lineTo(Mo*n+To*i,Mo*i-To*n),e.lineTo(Mo*s+To*o,Mo*o-To*s),e.lineTo(Mo*a+To*l,Mo*l-To*a),e.closePath()}};function ywe(e,t){let r=null,n=Oj(i);e=typeof e=="function"?e:ln(e||Ij),t=typeof t=="function"?t:ln(t===void 0?64:+t);function i(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:ln(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:ln(+s),i):t},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function ix(){}function sx(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function VQ(e){this._context=e}VQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _we(e){return new VQ(e)}function WQ(e){this._context=e}WQ.prototype={areaStart:ix,areaEnd:ix,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:sx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bwe(e){return new WQ(e)}function GQ(e){this._context=e}GQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:sx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wwe(e){return new GQ(e)}function qQ(e){this._context=e}qQ.prototype={areaStart:ix,areaEnd:ix,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function xwe(e){return new qQ(e)}function Sz(e){return e<0?-1:1}function Pz(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),o=(r-e._y1)/(i||n<0&&-0),a=(s*i+o*n)/(n+i);return(Sz(s)+Sz(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Ez(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function CP(e,t,r){var n=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-n)/3;e._context.bezierCurveTo(n+a,i+a*t,s-a,o-a*r,s,o)}function ox(e){this._context=e}ox.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:CP(this,this._t0,Ez(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,CP(this,Ez(this,r=Pz(this,e,t)),r);break;default:CP(this,this._t0,r=Pz(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function HQ(e){this._context=new KQ(e)}(HQ.prototype=Object.create(ox.prototype)).point=function(e,t){ox.prototype.point.call(this,t,e)};function KQ(e){this._context=e}KQ.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}};function Mwe(e){return new ox(e)}function Twe(e){return new HQ(e)}function XQ(e){this._context=e}XQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Cz(e),i=Cz(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Cz(e){var t,r=e.length-1,n,i=new Array(r),s=new Array(r),o=new Array(r);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Swe(e){return new XQ(e)}function E1(e,t){this._context=e,this._t=t}E1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Pwe(e){return new E1(e,.5)}function Ewe(e){return new E1(e,0)}function Cwe(e){return new E1(e,1)}function jm(e,t){if((o=e.length)>1)for(var r=1,n,i,s=e[t[0]],o,a=s.length;r<o;++r)for(i=s,s=e[t[r]],n=0;n<a;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function QO(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Awe(e,t){return e[t]}function Owe(e){const t=[];return t.key=e,t}function kwe(){var e=ln([]),t=QO,r=jm,n=Awe;function i(s){var o=Array.from(e.apply(this,arguments),Owe),a,l=o.length,u=-1,c;for(const d of s)for(a=0,++u;a<l;++a)(o[a][u]=[0,+n(d,o[a].key,u,s)]).data=d;for(a=0,c=kj(t(o));a<l;++a)o[c[a]].index=a;return r(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:ln(Array.from(s)),i):e},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:ln(+s),i):n},i.order=function(s){return arguments.length?(t=s==null?QO:typeof s=="function"?s:ln(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(r=s??jm,i):r},i}function Iwe(e,t){if((n=e.length)>0){for(var r,n,i=0,s=e[0].length,o;i<s;++i){for(o=r=0;r<n;++r)o+=e[r][i][1]||0;if(o)for(r=0;r<n;++r)e[r][i][1]/=o}jm(e,t)}}function jwe(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,s=n.length;r<s;++r){for(var o=0,a=0;o<i;++o)a+=e[o][r][1]||0;n[r][1]+=n[r][0]=-a/2}jm(e,t)}}function $we(e,t){if(!(!((o=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,s,o;n<s;++n){for(var a=0,l=0,u=0;a<o;++a){for(var c=e[t[a]],d=c[n][1]||0,h=c[n-1][1]||0,m=(d-h)/2,g=0;g<a;++g){var v=e[t[g]],y=v[n][1]||0,x=v[n-1][1]||0;m+=y-x}l+=d,u+=m*d}i[n-1][1]+=i[n-1][0]=r,l&&(r-=u/l)}i[n-1][1]+=i[n-1][0]=r,jm(e,t)}}function S_(e){"@babel/helpers - typeof";return S_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S_(e)}var Nwe=["type","size","sizeType"];function JO(){return JO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JO.apply(this,arguments)}function Az(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Oz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Az(Object(r),!0).forEach(function(n){Dwe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Az(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dwe(e,t,r){return t=Rwe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rwe(e){var t=Lwe(e,"string");return S_(t)=="symbol"?t:t+""}function Lwe(e,t){if(S_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(S_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fwe(e,t){if(e==null)return{};var r=Bwe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var YQ={symbolCircle:Ij,symbolCross:awe,symbolDiamond:uwe,symbolSquare:cwe,symbolStar:pwe,symbolTriangle:mwe,symbolWye:vwe},zwe=Math.PI/180,Uwe=function(t){var r="symbol".concat(T1(t));return YQ[r]||Ij},Vwe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*zwe;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Wwe=function(t,r){YQ["symbol".concat(T1(t))]=r},jj=function(t){var r=t.type,n=r===void 0?"circle":r,i=t.size,s=i===void 0?64:i,o=t.sizeType,a=o===void 0?"area":o,l=Fwe(t,Nwe),u=Oz(Oz({},l),{},{type:n,size:s,sizeType:a}),c=function(){var y=Uwe(n),x=ywe().type(y).size(Vwe(s,a,n));return x()},d=u.className,h=u.cx,m=u.cy,g=lr(u,!0);return h===+h&&m===+m&&s===+s?ye.createElement("path",JO({},g,{className:br("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(m,")"),d:c()})):null};jj.registerSymbol=Wwe;function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}function ZO(){return ZO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZO.apply(this,arguments)}function kz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gwe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kz(Object(r),!0).forEach(function(n){P_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hwe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JQ(n.key),n)}}function Kwe(e,t,r){return t&&Hwe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xwe(e,t,r){return t=ax(t),Ywe(e,QQ()?Reflect.construct(t,r||[],ax(e).constructor):t.apply(e,r))}function Ywe(e,t){if(t&&($m(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qwe(e)}function Qwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QQ=function(){return!!e})()}function ax(e){return ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ax(e)}function Jwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ek(e,t)}function ek(e,t){return ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ek(e,t)}function P_(e,t,r){return t=JQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JQ(e){var t=Zwe(e,"string");return $m(t)=="symbol"?t:t+""}function Zwe(e,t){if($m(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($m(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var So=32,$j=(function(e){function t(){return qwe(this,t),Xwe(this,t,arguments)}return Jwe(t,e),Kwe(t,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,s=So/2,o=So/6,a=So/3,l=n.inactive?i:n.color;if(n.type==="plainline")return ye.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:So,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return ye.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*a,",").concat(s,`
            H`).concat(So,"M").concat(2*a,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(a,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return ye.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(So/8,"h").concat(So,"v").concat(So*3/4,"h").concat(-So,"z"),className:"recharts-legend-icon"});if(ye.isValidElement(n.legendIcon)){var u=Gwe({},n);return delete u.legendIcon,ye.cloneElement(n.legendIcon,u)}return ye.createElement(jj,{fill:l,cx:s,cy:s,size:So,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,s=i.payload,o=i.iconSize,a=i.layout,l=i.formatter,u=i.inactiveColor,c={x:0,y:0,width:So,height:So},d={display:a==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,g){var v=m.formatter||l,y=br(P_(P_({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var x=hr(m.value)?null:m.value;Su(!hr(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=m.inactive?u:m.color;return ye.createElement("li",ZO({className:y,style:d,key:"legend-item-".concat(g)},M1(n.props,m,g)),ye.createElement(qO,{width:o,height:o,viewBox:c,style:h},n.renderIcon(m)),ye.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},v?v(x,m,g):x))})}},{key:"render",value:function(){var n=this.props,i=n.payload,s=n.layout,o=n.align;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return ye.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])})($.PureComponent);P_($j,"displayName","Legend");P_($j,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var AP,Iz;function exe(){if(Iz)return AP;Iz=1;var e=_1();function t(){this.__data__=new e,this.size=0}return AP=t,AP}var OP,jz;function txe(){if(jz)return OP;jz=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return OP=e,OP}var kP,$z;function rxe(){if($z)return kP;$z=1;function e(t){return this.__data__.get(t)}return kP=e,kP}var IP,Nz;function nxe(){if(Nz)return IP;Nz=1;function e(t){return this.__data__.has(t)}return IP=e,IP}var jP,Dz;function ixe(){if(Dz)return jP;Dz=1;var e=_1(),t=Tj(),r=Sj(),n=200;function i(s,o){var a=this.__data__;if(a instanceof e){var l=a.__data__;if(!t||l.length<n-1)return l.push([s,o]),this.size=++a.size,this;a=this.__data__=new r(l)}return a.set(s,o),this.size=a.size,this}return jP=i,jP}var $P,Rz;function ZQ(){if(Rz)return $P;Rz=1;var e=_1(),t=exe(),r=txe(),n=rxe(),i=nxe(),s=ixe();function o(a){var l=this.__data__=new e(a);this.size=l.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=i,o.prototype.set=s,$P=o,$P}var NP,Lz;function sxe(){if(Lz)return NP;Lz=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return NP=t,NP}var DP,Fz;function oxe(){if(Fz)return DP;Fz=1;function e(t){return this.__data__.has(t)}return DP=e,DP}var RP,Bz;function eJ(){if(Bz)return RP;Bz=1;var e=Sj(),t=sxe(),r=oxe();function n(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,RP=n,RP}var LP,zz;function tJ(){if(zz)return LP;zz=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return LP=e,LP}var FP,Uz;function rJ(){if(Uz)return FP;Uz=1;function e(t,r){return t.has(r)}return FP=e,FP}var BP,Vz;function nJ(){if(Vz)return BP;Vz=1;var e=eJ(),t=tJ(),r=rJ(),n=1,i=2;function s(o,a,l,u,c,d){var h=l&n,m=o.length,g=a.length;if(m!=g&&!(h&&g>m))return!1;var v=d.get(o),y=d.get(a);if(v&&y)return v==a&&y==o;var x=-1,w=!0,S=l&i?new e:void 0;for(d.set(o,a),d.set(a,o);++x<m;){var M=o[x],T=a[x];if(u)var P=h?u(T,M,x,a,o,d):u(M,T,x,o,a,d);if(P!==void 0){if(P)continue;w=!1;break}if(S){if(!t(a,function(E,A){if(!r(S,A)&&(M===E||c(M,E,l,u,d)))return S.push(A)})){w=!1;break}}else if(!(M===T||c(M,T,l,u,d))){w=!1;break}}return d.delete(o),d.delete(a),w}return BP=s,BP}var zP,Wz;function axe(){if(Wz)return zP;Wz=1;var e=bl(),t=e.Uint8Array;return zP=t,zP}var UP,Gz;function lxe(){if(Gz)return UP;Gz=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,s){n[++r]=[s,i]}),n}return UP=e,UP}var VP,qz;function Nj(){if(qz)return VP;qz=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return VP=e,VP}var WP,Hz;function uxe(){if(Hz)return WP;Hz=1;var e=b0(),t=axe(),r=Mj(),n=nJ(),i=lxe(),s=Nj(),o=1,a=2,l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Map]",h="[object Number]",m="[object RegExp]",g="[object Set]",v="[object String]",y="[object Symbol]",x="[object ArrayBuffer]",w="[object DataView]",S=e?e.prototype:void 0,M=S?S.valueOf:void 0;function T(P,E,A,L,B,V,G){switch(A){case w:if(P.byteLength!=E.byteLength||P.byteOffset!=E.byteOffset)return!1;P=P.buffer,E=E.buffer;case x:return!(P.byteLength!=E.byteLength||!V(new t(P),new t(E)));case l:case u:case h:return r(+P,+E);case c:return P.name==E.name&&P.message==E.message;case m:case v:return P==E+"";case d:var z=i;case g:var K=L&o;if(z||(z=s),P.size!=E.size&&!K)return!1;var J=G.get(P);if(J)return J==E;L|=a,G.set(P,E);var X=n(z(P),z(E),L,B,V,G);return G.delete(P),X;case y:if(M)return M.call(P)==M.call(E)}return!1}return WP=T,WP}var GP,Kz;function iJ(){if(Kz)return GP;Kz=1;function e(t,r){for(var n=-1,i=r.length,s=t.length;++n<i;)t[s+n]=r[n];return t}return GP=e,GP}var qP,Xz;function cxe(){if(Xz)return qP;Xz=1;var e=iJ(),t=$s();function r(n,i,s){var o=i(n);return t(n)?o:e(o,s(n))}return qP=r,qP}var HP,Yz;function dxe(){if(Yz)return HP;Yz=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=0,o=[];++n<i;){var a=t[n];r(a,n,t)&&(o[s++]=a)}return o}return HP=e,HP}var KP,Qz;function fxe(){if(Qz)return KP;Qz=1;function e(){return[]}return KP=e,KP}var XP,Jz;function hxe(){if(Jz)return XP;Jz=1;var e=dxe(),t=fxe(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(a){return n.call(o,a)}))}:t;return XP=s,XP}var YP,Zz;function pxe(){if(Zz)return YP;Zz=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return YP=e,YP}var QP,e4;function mxe(){if(e4)return QP;e4=1;var e=Ru(),t=Lu(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return QP=n,QP}var JP,t4;function Dj(){if(t4)return JP;t4=1;var e=mxe(),t=Lu(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(o){return t(o)&&n.call(o,"callee")&&!i.call(o,"callee")};return JP=s,JP}var Ry={exports:{}},ZP,r4;function gxe(){if(r4)return ZP;r4=1;function e(){return!1}return ZP=e,ZP}Ry.exports;var n4;function sJ(){return n4||(n4=1,(function(e,t){var r=bl(),n=gxe(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,a=o?r.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||n;e.exports=u})(Ry,Ry.exports)),Ry.exports}var eE,i4;function Rj(){if(i4)return eE;i4=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var s=typeof n;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return eE=r,eE}var tE,s4;function Lj(){if(s4)return tE;s4=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return tE=t,tE}var rE,o4;function vxe(){if(o4)return rE;o4=1;var e=Ru(),t=Lj(),r=Lu(),n="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",d="[object Object]",h="[object RegExp]",m="[object Set]",g="[object String]",v="[object WeakMap]",y="[object ArrayBuffer]",x="[object DataView]",w="[object Float32Array]",S="[object Float64Array]",M="[object Int8Array]",T="[object Int16Array]",P="[object Int32Array]",E="[object Uint8Array]",A="[object Uint8ClampedArray]",L="[object Uint16Array]",B="[object Uint32Array]",V={};V[w]=V[S]=V[M]=V[T]=V[P]=V[E]=V[A]=V[L]=V[B]=!0,V[n]=V[i]=V[y]=V[s]=V[x]=V[o]=V[a]=V[l]=V[u]=V[c]=V[d]=V[h]=V[m]=V[g]=V[v]=!1;function G(z){return r(z)&&t(z.length)&&!!V[e(z)]}return rE=G,rE}var nE,a4;function oJ(){if(a4)return nE;a4=1;function e(t){return function(r){return t(r)}}return nE=e,nE}var Ly={exports:{}};Ly.exports;var l4;function yxe(){return l4||(l4=1,(function(e,t){var r=SQ(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s&&r.process,a=(function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}})();e.exports=a})(Ly,Ly.exports)),Ly.exports}var iE,u4;function aJ(){if(u4)return iE;u4=1;var e=vxe(),t=oJ(),r=yxe(),n=r&&r.isTypedArray,i=n?t(n):e;return iE=i,iE}var sE,c4;function _xe(){if(c4)return sE;c4=1;var e=pxe(),t=Dj(),r=$s(),n=sJ(),i=Rj(),s=aJ(),o=Object.prototype,a=o.hasOwnProperty;function l(u,c){var d=r(u),h=!d&&t(u),m=!d&&!h&&n(u),g=!d&&!h&&!m&&s(u),v=d||h||m||g,y=v?e(u.length,String):[],x=y.length;for(var w in u)(c||a.call(u,w))&&!(v&&(w=="length"||m&&(w=="offset"||w=="parent")||g&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||i(w,x)))&&y.push(w);return y}return sE=l,sE}var oE,d4;function bxe(){if(d4)return oE;d4=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return oE=t,oE}var aE,f4;function lJ(){if(f4)return aE;f4=1;function e(t,r){return function(n){return t(r(n))}}return aE=e,aE}var lE,h4;function wxe(){if(h4)return lE;h4=1;var e=lJ(),t=e(Object.keys,Object);return lE=t,lE}var uE,p4;function xxe(){if(p4)return uE;p4=1;var e=bxe(),t=wxe(),r=Object.prototype,n=r.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var a in Object(s))n.call(s,a)&&a!="constructor"&&o.push(a);return o}return uE=i,uE}var cE,m4;function M0(){if(m4)return cE;m4=1;var e=xj(),t=Lj();function r(n){return n!=null&&t(n.length)&&!e(n)}return cE=r,cE}var dE,g4;function C1(){if(g4)return dE;g4=1;var e=_xe(),t=xxe(),r=M0();function n(i){return r(i)?e(i):t(i)}return dE=n,dE}var fE,v4;function Mxe(){if(v4)return fE;v4=1;var e=cxe(),t=hxe(),r=C1();function n(i){return e(i,r,t)}return fE=n,fE}var hE,y4;function Txe(){if(y4)return hE;y4=1;var e=Mxe(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(s,o,a,l,u,c){var d=a&t,h=e(s),m=h.length,g=e(o),v=g.length;if(m!=v&&!d)return!1;for(var y=m;y--;){var x=h[y];if(!(d?x in o:n.call(o,x)))return!1}var w=c.get(s),S=c.get(o);if(w&&S)return w==o&&S==s;var M=!0;c.set(s,o),c.set(o,s);for(var T=d;++y<m;){x=h[y];var P=s[x],E=o[x];if(l)var A=d?l(E,P,x,o,s,c):l(P,E,x,s,o,c);if(!(A===void 0?P===E||u(P,E,a,l,c):A)){M=!1;break}T||(T=x=="constructor")}if(M&&!T){var L=s.constructor,B=o.constructor;L!=B&&"constructor"in s&&"constructor"in o&&!(typeof L=="function"&&L instanceof L&&typeof B=="function"&&B instanceof B)&&(M=!1)}return c.delete(s),c.delete(o),M}return hE=i,hE}var pE,_4;function Sxe(){if(_4)return pE;_4=1;var e=hh(),t=bl(),r=e(t,"DataView");return pE=r,pE}var mE,b4;function Pxe(){if(b4)return mE;b4=1;var e=hh(),t=bl(),r=e(t,"Promise");return mE=r,mE}var gE,w4;function uJ(){if(w4)return gE;w4=1;var e=hh(),t=bl(),r=e(t,"Set");return gE=r,gE}var vE,x4;function Exe(){if(x4)return vE;x4=1;var e=hh(),t=bl(),r=e(t,"WeakMap");return vE=r,vE}var yE,M4;function Cxe(){if(M4)return yE;M4=1;var e=Sxe(),t=Tj(),r=Pxe(),n=uJ(),i=Exe(),s=Ru(),o=PQ(),a="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",d="[object WeakMap]",h="[object DataView]",m=o(e),g=o(t),v=o(r),y=o(n),x=o(i),w=s;return(e&&w(new e(new ArrayBuffer(1)))!=h||t&&w(new t)!=a||r&&w(r.resolve())!=u||n&&w(new n)!=c||i&&w(new i)!=d)&&(w=function(S){var M=s(S),T=M==l?S.constructor:void 0,P=T?o(T):"";if(P)switch(P){case m:return h;case g:return a;case v:return u;case y:return c;case x:return d}return M}),yE=w,yE}var _E,T4;function Axe(){if(T4)return _E;T4=1;var e=ZQ(),t=nJ(),r=uxe(),n=Txe(),i=Cxe(),s=$s(),o=sJ(),a=aJ(),l=1,u="[object Arguments]",c="[object Array]",d="[object Object]",h=Object.prototype,m=h.hasOwnProperty;function g(v,y,x,w,S,M){var T=s(v),P=s(y),E=T?c:i(v),A=P?c:i(y);E=E==u?d:E,A=A==u?d:A;var L=E==d,B=A==d,V=E==A;if(V&&o(v)){if(!o(y))return!1;T=!0,L=!1}if(V&&!L)return M||(M=new e),T||a(v)?t(v,y,x,w,S,M):r(v,y,E,x,w,S,M);if(!(x&l)){var G=L&&m.call(v,"__wrapped__"),z=B&&m.call(y,"__wrapped__");if(G||z){var K=G?v.value():v,J=z?y.value():y;return M||(M=new e),S(K,J,x,w,M)}}return V?(M||(M=new e),n(v,y,x,w,S,M)):!1}return _E=g,_E}var bE,S4;function Fj(){if(S4)return bE;S4=1;var e=Axe(),t=Lu();function r(n,i,s,o,a){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,s,o,r,a)}return bE=r,bE}var wE,P4;function Oxe(){if(P4)return wE;P4=1;var e=ZQ(),t=Fj(),r=1,n=2;function i(s,o,a,l){var u=a.length,c=u,d=!l;if(s==null)return!c;for(s=Object(s);u--;){var h=a[u];if(d&&h[2]?h[1]!==s[h[0]]:!(h[0]in s))return!1}for(;++u<c;){h=a[u];var m=h[0],g=s[m],v=h[1];if(d&&h[2]){if(g===void 0&&!(m in s))return!1}else{var y=new e;if(l)var x=l(g,v,m,s,o,y);if(!(x===void 0?t(v,g,r|n,l,y):x))return!1}}return!0}return wE=i,wE}var xE,E4;function cJ(){if(E4)return xE;E4=1;var e=sd();function t(r){return r===r&&!e(r)}return xE=t,xE}var ME,C4;function kxe(){if(C4)return ME;C4=1;var e=cJ(),t=C1();function r(n){for(var i=t(n),s=i.length;s--;){var o=i[s],a=n[o];i[s]=[o,a,e(a)]}return i}return ME=r,ME}var TE,A4;function dJ(){if(A4)return TE;A4=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return TE=e,TE}var SE,O4;function Ixe(){if(O4)return SE;O4=1;var e=Oxe(),t=kxe(),r=dJ();function n(i){var s=t(i);return s.length==1&&s[0][2]?r(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return SE=n,SE}var PE,k4;function jxe(){if(k4)return PE;k4=1;function e(t,r){return t!=null&&r in Object(t)}return PE=e,PE}var EE,I4;function $xe(){if(I4)return EE;I4=1;var e=AQ(),t=Dj(),r=$s(),n=Rj(),i=Lj(),s=w1();function o(a,l,u){l=e(l,a);for(var c=-1,d=l.length,h=!1;++c<d;){var m=s(l[c]);if(!(h=a!=null&&u(a,m)))break;a=a[m]}return h||++c!=d?h:(d=a==null?0:a.length,!!d&&i(d)&&n(m,d)&&(r(a)||t(a)))}return EE=o,EE}var CE,j4;function Nxe(){if(j4)return CE;j4=1;var e=jxe(),t=$xe();function r(n,i){return n!=null&&t(n,i,e)}return CE=r,CE}var AE,$4;function Dxe(){if($4)return AE;$4=1;var e=Fj(),t=OQ(),r=Nxe(),n=wj(),i=cJ(),s=dJ(),o=w1(),a=1,l=2;function u(c,d){return n(c)&&i(d)?s(o(c),d):function(h){var m=t(h,c);return m===void 0&&m===d?r(h,c):e(d,m,a|l)}}return AE=u,AE}var OE,N4;function gg(){if(N4)return OE;N4=1;function e(t){return t}return OE=e,OE}var kE,D4;function Rxe(){if(D4)return kE;D4=1;function e(t){return function(r){return r?.[t]}}return kE=e,kE}var IE,R4;function Lxe(){if(R4)return IE;R4=1;var e=Ej();function t(r){return function(n){return e(n,r)}}return IE=t,IE}var jE,L4;function Fxe(){if(L4)return jE;L4=1;var e=Rxe(),t=Lxe(),r=wj(),n=w1();function i(s){return r(s)?e(n(s)):t(s)}return jE=i,jE}var $E,F4;function wl(){if(F4)return $E;F4=1;var e=Ixe(),t=Dxe(),r=gg(),n=$s(),i=Fxe();function s(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):i(o)}return $E=s,$E}var NE,B4;function fJ(){if(B4)return NE;B4=1;function e(t,r,n,i){for(var s=t.length,o=n+(i?1:-1);i?o--:++o<s;)if(r(t[o],o,t))return o;return-1}return NE=e,NE}var DE,z4;function Bxe(){if(z4)return DE;z4=1;function e(t){return t!==t}return DE=e,DE}var RE,U4;function zxe(){if(U4)return RE;U4=1;function e(t,r,n){for(var i=n-1,s=t.length;++i<s;)if(t[i]===r)return i;return-1}return RE=e,RE}var LE,V4;function Uxe(){if(V4)return LE;V4=1;var e=fJ(),t=Bxe(),r=zxe();function n(i,s,o){return s===s?r(i,s,o):e(i,t,o)}return LE=n,LE}var FE,W4;function Vxe(){if(W4)return FE;W4=1;var e=Uxe();function t(r,n){var i=r==null?0:r.length;return!!i&&e(r,n,0)>-1}return FE=t,FE}var BE,G4;function Wxe(){if(G4)return BE;G4=1;function e(t,r,n){for(var i=-1,s=t==null?0:t.length;++i<s;)if(n(r,t[i]))return!0;return!1}return BE=e,BE}var zE,q4;function Gxe(){if(q4)return zE;q4=1;function e(){}return zE=e,zE}var UE,H4;function qxe(){if(H4)return UE;H4=1;var e=uJ(),t=Gxe(),r=Nj(),n=1/0,i=e&&1/r(new e([,-0]))[1]==n?function(s){return new e(s)}:t;return UE=i,UE}var VE,K4;function Hxe(){if(K4)return VE;K4=1;var e=eJ(),t=Vxe(),r=Wxe(),n=rJ(),i=qxe(),s=Nj(),o=200;function a(l,u,c){var d=-1,h=t,m=l.length,g=!0,v=[],y=v;if(c)g=!1,h=r;else if(m>=o){var x=u?null:i(l);if(x)return s(x);g=!1,h=n,y=new e}else y=u?[]:v;e:for(;++d<m;){var w=l[d],S=u?u(w):w;if(w=c||w!==0?w:0,g&&S===S){for(var M=y.length;M--;)if(y[M]===S)continue e;u&&y.push(S),v.push(w)}else h(y,S,c)||(y!==v&&y.push(S),v.push(w))}return v}return VE=a,VE}var WE,X4;function Kxe(){if(X4)return WE;X4=1;var e=wl(),t=Hxe();function r(n,i){return n&&n.length?t(n,e(i,2)):[]}return WE=r,WE}var Xxe=Kxe();const Y4=Dr(Xxe);function hJ(e,t,r){return t===!0?Y4(e,r):hr(t)?Y4(e,t):e}function Nm(e){"@babel/helpers - typeof";return Nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nm(e)}var Yxe=["ref"];function Q4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q4(Object(r),!0).forEach(function(n){A1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mJ(n.key),n)}}function Jxe(e,t,r){return t&&J4(e.prototype,t),r&&J4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zxe(e,t,r){return t=lx(t),e1e(e,pJ()?Reflect.construct(t,r||[],lx(e).constructor):t.apply(e,r))}function e1e(e,t){if(t&&(Nm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t1e(e)}function t1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pJ=function(){return!!e})()}function lx(e){return lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lx(e)}function r1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tk(e,t)}function tk(e,t){return tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},tk(e,t)}function A1(e,t,r){return t=mJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mJ(e){var t=n1e(e,"string");return Nm(t)=="symbol"?t:t+""}function n1e(e,t){if(Nm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function i1e(e,t){if(e==null)return{};var r=s1e(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function s1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function o1e(e){return e.value}function a1e(e,t){if(ye.isValidElement(e))return ye.cloneElement(e,t);if(typeof e=="function")return ye.createElement(e,t);t.ref;var r=i1e(t,Yxe);return ye.createElement($j,r)}var Z4=1,bm=(function(e){function t(){var r;Qxe(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=Zxe(this,t,[].concat(i)),A1(r,"lastBoundingBox",{width:-1,height:-1}),r}return r1e(t,e),Jxe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Z4||Math.abs(i.height-this.lastBoundingBox.height)>Z4)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?vu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,s=i.layout,o=i.align,a=i.verticalAlign,l=i.margin,u=i.chartWidth,c=i.chartHeight,d,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();d={left:((u||0)-m.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(a==="middle"){var g=this.getBBoxSnapshot();h={top:((c||0)-g.height)/2}}else h=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return vu(vu({},d),h)}},{key:"render",value:function(){var n=this,i=this.props,s=i.content,o=i.width,a=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,c=i.payload,d=vu(vu({position:"absolute",width:o||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return ye.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(m){n.wrapperNode=m}},a1e(s,vu(vu({},this.props),{},{payload:hJ(c,u,o1e)})))}}],[{key:"getWithHeight",value:function(n,i){var s=vu(vu({},this.defaultProps),n.props),o=s.layout;return o==="vertical"&&St(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||i}:null}}])})($.PureComponent);A1(bm,"displayName","Legend");A1(bm,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var GE,eU;function l1e(){if(eU)return GE;eU=1;var e=b0(),t=Dj(),r=$s(),n=e?e.isConcatSpreadable:void 0;function i(s){return r(s)||t(s)||!!(n&&s&&s[n])}return GE=i,GE}var qE,tU;function gJ(){if(tU)return qE;tU=1;var e=iJ(),t=l1e();function r(n,i,s,o,a){var l=-1,u=n.length;for(s||(s=t),a||(a=[]);++l<u;){var c=n[l];i>0&&s(c)?i>1?r(c,i-1,s,o,a):e(a,c):o||(a[a.length]=c)}return a}return qE=r,qE}var HE,rU;function u1e(){if(rU)return HE;rU=1;function e(t){return function(r,n,i){for(var s=-1,o=Object(r),a=i(r),l=a.length;l--;){var u=a[t?l:++s];if(n(o[u],u,o)===!1)break}return r}}return HE=e,HE}var KE,nU;function c1e(){if(nU)return KE;nU=1;var e=u1e(),t=e();return KE=t,KE}var XE,iU;function vJ(){if(iU)return XE;iU=1;var e=c1e(),t=C1();function r(n,i){return n&&e(n,i,t)}return XE=r,XE}var YE,sU;function d1e(){if(sU)return YE;sU=1;var e=M0();function t(r,n){return function(i,s){if(i==null)return i;if(!e(i))return r(i,s);for(var o=i.length,a=n?o:-1,l=Object(i);(n?a--:++a<o)&&s(l[a],a,l)!==!1;);return i}}return YE=t,YE}var QE,oU;function Bj(){if(oU)return QE;oU=1;var e=vJ(),t=d1e(),r=t(e);return QE=r,QE}var JE,aU;function yJ(){if(aU)return JE;aU=1;var e=Bj(),t=M0();function r(n,i){var s=-1,o=t(n)?Array(n.length):[];return e(n,function(a,l,u){o[++s]=i(a,l,u)}),o}return JE=r,JE}var ZE,lU;function f1e(){if(lU)return ZE;lU=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return ZE=e,ZE}var eC,uU;function h1e(){if(uU)return eC;uU=1;var e=pg();function t(r,n){if(r!==n){var i=r!==void 0,s=r===null,o=r===r,a=e(r),l=n!==void 0,u=n===null,c=n===n,d=e(n);if(!u&&!d&&!a&&r>n||a&&l&&c&&!u&&!d||s&&l&&c||!i&&c||!o)return 1;if(!s&&!a&&!d&&r<n||d&&i&&o&&!s&&!a||u&&i&&o||!l&&o||!c)return-1}return 0}return eC=t,eC}var tC,cU;function p1e(){if(cU)return tC;cU=1;var e=h1e();function t(r,n,i){for(var s=-1,o=r.criteria,a=n.criteria,l=o.length,u=i.length;++s<l;){var c=e(o[s],a[s]);if(c){if(s>=u)return c;var d=i[s];return c*(d=="desc"?-1:1)}}return r.index-n.index}return tC=t,tC}var rC,dU;function m1e(){if(dU)return rC;dU=1;var e=Pj(),t=Ej(),r=wl(),n=yJ(),i=f1e(),s=oJ(),o=p1e(),a=gg(),l=$s();function u(c,d,h){d.length?d=e(d,function(v){return l(v)?function(y){return t(y,v.length===1?v[0]:v)}:v}):d=[a];var m=-1;d=e(d,s(r));var g=n(c,function(v,y,x){var w=e(d,function(S){return S(v)});return{criteria:w,index:++m,value:v}});return i(g,function(v,y){return o(v,y,h)})}return rC=u,rC}var nC,fU;function g1e(){if(fU)return nC;fU=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return nC=e,nC}var iC,hU;function v1e(){if(hU)return iC;hU=1;var e=g1e(),t=Math.max;function r(n,i,s){return i=t(i===void 0?n.length-1:i,0),function(){for(var o=arguments,a=-1,l=t(o.length-i,0),u=Array(l);++a<l;)u[a]=o[i+a];a=-1;for(var c=Array(i+1);++a<i;)c[a]=o[a];return c[i]=s(u),e(n,this,c)}}return iC=r,iC}var sC,pU;function y1e(){if(pU)return sC;pU=1;function e(t){return function(){return t}}return sC=e,sC}var oC,mU;function _J(){if(mU)return oC;mU=1;var e=hh(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return oC=t,oC}var aC,gU;function _1e(){if(gU)return aC;gU=1;var e=y1e(),t=_J(),r=gg(),n=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:r;return aC=n,aC}var lC,vU;function b1e(){if(vU)return lC;vU=1;var e=800,t=16,r=Date.now;function n(i){var s=0,o=0;return function(){var a=r(),l=t-(a-o);if(o=a,l>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return lC=n,lC}var uC,yU;function w1e(){if(yU)return uC;yU=1;var e=_1e(),t=b1e(),r=t(e);return uC=r,uC}var cC,_U;function x1e(){if(_U)return cC;_U=1;var e=gg(),t=v1e(),r=w1e();function n(i,s){return r(t(i,s,e),i+"")}return cC=n,cC}var dC,bU;function O1(){if(bU)return dC;bU=1;var e=Mj(),t=M0(),r=Rj(),n=sd();function i(s,o,a){if(!n(a))return!1;var l=typeof o;return(l=="number"?t(a)&&r(o,a.length):l=="string"&&o in a)?e(a[o],s):!1}return dC=i,dC}var fC,wU;function M1e(){if(wU)return fC;wU=1;var e=gJ(),t=m1e(),r=x1e(),n=O1(),i=r(function(s,o){if(s==null)return[];var a=o.length;return a>1&&n(s,o[0],o[1])?o=[]:a>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return fC=i,fC}var T1e=M1e();const zj=Dr(T1e);function E_(e){"@babel/helpers - typeof";return E_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E_(e)}function rk(){return rk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rk.apply(this,arguments)}function S1e(e,t){return A1e(e)||C1e(e,t)||E1e(e,t)||P1e()}function P1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E1e(e,t){if(e){if(typeof e=="string")return xU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xU(e,t)}}function xU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function A1e(e){if(Array.isArray(e))return e}function MU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MU(Object(r),!0).forEach(function(n){O1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O1e(e,t,r){return t=k1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k1e(e){var t=I1e(e,"string");return E_(t)=="symbol"?t:t+""}function I1e(e,t){if(E_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(E_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j1e(e){return Array.isArray(e)&&ci(e[0])&&ci(e[1])?e.join(" ~ "):e}var $1e=function(t){var r=t.separator,n=r===void 0?" : ":r,i=t.contentStyle,s=i===void 0?{}:i,o=t.itemStyle,a=o===void 0?{}:o,l=t.labelStyle,u=l===void 0?{}:l,c=t.payload,d=t.formatter,h=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,v=t.label,y=t.labelFormatter,x=t.accessibilityLayer,w=x===void 0?!1:x,S=function(){if(c&&c.length){var G={padding:0,margin:0},z=(h?zj(c,h):c).map(function(K,J){if(K.type==="none")return null;var X=hC({display:"block",paddingTop:4,paddingBottom:4,color:K.color||"#000"},a),Q=K.formatter||d||j1e,W=K.value,oe=K.name,ce=W,D=oe;if(Q&&ce!=null&&D!=null){var U=Q(W,oe,K,J,c);if(Array.isArray(U)){var te=S1e(U,2);ce=te[0],D=te[1]}else ce=U}return ye.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(J),style:X},ci(D)?ye.createElement("span",{className:"recharts-tooltip-item-name"},D):null,ci(D)?ye.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ye.createElement("span",{className:"recharts-tooltip-item-value"},ce),ye.createElement("span",{className:"recharts-tooltip-item-unit"},K.unit||""))});return ye.createElement("ul",{className:"recharts-tooltip-item-list",style:G},z)}return null},M=hC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),T=hC({margin:0},u),P=!yr(v),E=P?v:"",A=br("recharts-default-tooltip",m),L=br("recharts-tooltip-label",g);P&&y&&c!==void 0&&c!==null&&(E=y(v,c));var B=w?{role:"status","aria-live":"assertive"}:{};return ye.createElement("div",rk({className:A,style:M},B),ye.createElement("p",{className:L,style:T},ye.isValidElement(E)?E:"".concat(E)),S())};function C_(e){"@babel/helpers - typeof";return C_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C_(e)}function Xb(e,t,r){return t=N1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N1e(e){var t=D1e(e,"string");return C_(t)=="symbol"?t:t+""}function D1e(e,t){if(C_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(C_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xy="recharts-tooltip-wrapper",R1e={visibility:"hidden"};function L1e(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return br(xy,Xb(Xb(Xb(Xb({},"".concat(xy,"-right"),St(r)&&t&&St(t.x)&&r>=t.x),"".concat(xy,"-left"),St(r)&&t&&St(t.x)&&r<t.x),"".concat(xy,"-bottom"),St(n)&&t&&St(t.y)&&n>=t.y),"".concat(xy,"-top"),St(n)&&t&&St(t.y)&&n<t.y))}function TU(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,i=e.offsetTopLeft,s=e.position,o=e.reverseDirection,a=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(s&&St(s[n]))return s[n];var c=r[n]-a-i,d=r[n]+i;if(t[n])return o[n]?c:d;if(o[n]){var h=c,m=l[n];return h<m?Math.max(d,l[n]):Math.max(c,l[n])}var g=d+a,v=l[n]+u;return g>v?Math.max(c,l[n]):Math.max(d,l[n])}function F1e(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function B1e(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,i=e.position,s=e.reverseDirection,o=e.tooltipBox,a=e.useTranslate3d,l=e.viewBox,u,c,d;return o.height>0&&o.width>0&&r?(c=TU({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=TU({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=F1e({translateX:c,translateY:d,useTranslate3d:a})):u=R1e,{cssProperties:u,cssClasses:L1e({translateX:c,translateY:d,coordinate:r})}}function Dm(e){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dm(e)}function SU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function PU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SU(Object(r),!0).forEach(function(n){ik(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U1e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wJ(n.key),n)}}function V1e(e,t,r){return t&&U1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function W1e(e,t,r){return t=ux(t),G1e(e,bJ()?Reflect.construct(t,r||[],ux(e).constructor):t.apply(e,r))}function G1e(e,t){if(t&&(Dm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q1e(e)}function q1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bJ=function(){return!!e})()}function ux(e){return ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ux(e)}function H1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nk(e,t)}function nk(e,t){return nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},nk(e,t)}function ik(e,t,r){return t=wJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wJ(e){var t=K1e(e,"string");return Dm(t)=="symbol"?t:t+""}function K1e(e,t){if(Dm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var EU=1,X1e=(function(e){function t(){var r;z1e(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=W1e(this,t,[].concat(i)),ik(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),ik(r,"handleKeyDown",function(o){if(o.key==="Escape"){var a,l,u,c;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(u=(c=r.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),r}return H1e(t,e),V1e(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>EU||Math.abs(n.height-this.state.lastBoundingBox.height)>EU)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,u=i.children,c=i.coordinate,d=i.hasPayload,h=i.isAnimationActive,m=i.offset,g=i.position,v=i.reverseDirection,y=i.useTranslate3d,x=i.viewBox,w=i.wrapperStyle,S=B1e({allowEscapeViewBox:o,coordinate:c,offsetTopLeft:m,position:g,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:x}),M=S.cssClasses,T=S.cssProperties,P=PU(PU({transition:h&&s?"transform ".concat(a,"ms ").concat(l):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},w);return ye.createElement("div",{tabIndex:-1,className:M,style:P,ref:function(A){n.wrapperNode=A}},u)}}])})($.PureComponent),Y1e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},k1={isSsr:Y1e()};function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}function CU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function AU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CU(Object(r),!0).forEach(function(n){Uj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Q1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J1e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MJ(n.key),n)}}function Z1e(e,t,r){return t&&J1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function eMe(e,t,r){return t=cx(t),tMe(e,xJ()?Reflect.construct(t,r||[],cx(e).constructor):t.apply(e,r))}function tMe(e,t){if(t&&(Rm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rMe(e)}function rMe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xJ=function(){return!!e})()}function cx(e){return cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cx(e)}function nMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sk(e,t)}function sk(e,t){return sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},sk(e,t)}function Uj(e,t,r){return t=MJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MJ(e){var t=iMe(e,"string");return Rm(t)=="symbol"?t:t+""}function iMe(e,t){if(Rm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function sMe(e){return e.dataKey}function oMe(e,t){return ye.isValidElement(e)?ye.cloneElement(e,t):typeof e=="function"?ye.createElement(e,t):ye.createElement($1e,t)}var _u=(function(e){function t(){return Q1e(this,t),eMe(this,t,arguments)}return nMe(t,e),Z1e(t,[{key:"render",value:function(){var n=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,u=i.content,c=i.coordinate,d=i.filterNull,h=i.isAnimationActive,m=i.offset,g=i.payload,v=i.payloadUniqBy,y=i.position,x=i.reverseDirection,w=i.useTranslate3d,S=i.viewBox,M=i.wrapperStyle,T=g??[];d&&T.length&&(T=hJ(g.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),v,sMe));var P=T.length>0;return ye.createElement(X1e,{allowEscapeViewBox:o,animationDuration:a,animationEasing:l,isAnimationActive:h,active:s,coordinate:c,hasPayload:P,offset:m,position:y,reverseDirection:x,useTranslate3d:w,viewBox:S,wrapperStyle:M},oMe(u,AU(AU({},this.props),{},{payload:T})))}}])})($.PureComponent);Uj(_u,"displayName","Tooltip");Uj(_u,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!k1.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var pC,OU;function aMe(){if(OU)return pC;OU=1;var e=bl(),t=function(){return e.Date.now()};return pC=t,pC}var mC,kU;function lMe(){if(kU)return mC;kU=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return mC=t,mC}var gC,IU;function uMe(){if(IU)return gC;IU=1;var e=lMe(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return gC=r,gC}var vC,jU;function TJ(){if(jU)return vC;jU=1;var e=uMe(),t=sd(),r=pg(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function l(u){if(typeof u=="number")return u;if(r(u))return n;if(t(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=t(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=e(u);var d=s.test(u);return d||o.test(u)?a(u.slice(2),d?2:8):i.test(u)?n:+u}return vC=l,vC}var yC,$U;function cMe(){if($U)return yC;$U=1;var e=sd(),t=aMe(),r=TJ(),n="Expected a function",i=Math.max,s=Math.min;function o(a,l,u){var c,d,h,m,g,v,y=0,x=!1,w=!1,S=!0;if(typeof a!="function")throw new TypeError(n);l=r(l)||0,e(u)&&(x=!!u.leading,w="maxWait"in u,h=w?i(r(u.maxWait)||0,l):h,S="trailing"in u?!!u.trailing:S);function M(z){var K=c,J=d;return c=d=void 0,y=z,m=a.apply(J,K),m}function T(z){return y=z,g=setTimeout(A,l),x?M(z):m}function P(z){var K=z-v,J=z-y,X=l-K;return w?s(X,h-J):X}function E(z){var K=z-v,J=z-y;return v===void 0||K>=l||K<0||w&&J>=h}function A(){var z=t();if(E(z))return L(z);g=setTimeout(A,P(z))}function L(z){return g=void 0,S&&c?M(z):(c=d=void 0,m)}function B(){g!==void 0&&clearTimeout(g),y=0,c=v=d=g=void 0}function V(){return g===void 0?m:L(t())}function G(){var z=t(),K=E(z);if(c=arguments,d=this,v=z,K){if(g===void 0)return T(v);if(w)return clearTimeout(g),g=setTimeout(A,l),M(v)}return g===void 0&&(g=setTimeout(A,l)),m}return G.cancel=B,G.flush=V,G}return yC=o,yC}var _C,NU;function dMe(){if(NU)return _C;NU=1;var e=cMe(),t=sd(),r="Expected a function";function n(i,s,o){var a=!0,l=!0;if(typeof i!="function")throw new TypeError(r);return t(o)&&(a="leading"in o?!!o.leading:a,l="trailing"in o?!!o.trailing:l),e(i,s,{leading:a,maxWait:s,trailing:l})}return _C=n,_C}var fMe=dMe();const SJ=Dr(fMe);function A_(e){"@babel/helpers - typeof";return A_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A_(e)}function DU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Yb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DU(Object(r),!0).forEach(function(n){hMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hMe(e,t,r){return t=pMe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pMe(e){var t=mMe(e,"string");return A_(t)=="symbol"?t:t+""}function mMe(e,t){if(A_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(A_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gMe(e,t){return bMe(e)||_Me(e,t)||yMe(e,t)||vMe()}function vMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yMe(e,t){if(e){if(typeof e=="string")return RU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RU(e,t)}}function RU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _Me(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function bMe(e){if(Array.isArray(e))return e}var wMe=$.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,i=n===void 0?{width:-1,height:-1}:n,s=e.width,o=s===void 0?"100%":s,a=e.height,l=a===void 0?"100%":a,u=e.minWidth,c=u===void 0?0:u,d=e.minHeight,h=e.maxHeight,m=e.children,g=e.debounce,v=g===void 0?0:g,y=e.id,x=e.className,w=e.onResize,S=e.style,M=S===void 0?{}:S,T=$.useRef(null),P=$.useRef();P.current=w,$.useImperativeHandle(t,function(){return Object.defineProperty(T.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),T.current},configurable:!0})});var E=$.useState({containerWidth:i.width,containerHeight:i.height}),A=gMe(E,2),L=A[0],B=A[1],V=$.useCallback(function(z,K){B(function(J){var X=Math.round(z),Q=Math.round(K);return J.containerWidth===X&&J.containerHeight===Q?J:{containerWidth:X,containerHeight:Q}})},[]);$.useEffect(function(){var z=function(oe){var ce,D=oe[0].contentRect,U=D.width,te=D.height;V(U,te),(ce=P.current)===null||ce===void 0||ce.call(P,U,te)};v>0&&(z=SJ(z,v,{trailing:!0,leading:!1}));var K=new ResizeObserver(z),J=T.current.getBoundingClientRect(),X=J.width,Q=J.height;return V(X,Q),K.observe(T.current),function(){K.disconnect()}},[V,v]);var G=$.useMemo(function(){var z=L.containerWidth,K=L.containerHeight;if(z<0||K<0)return null;Su(Ff(o)||Ff(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),Su(!r||r>0,"The aspect(%s) must be greater than zero.",r);var J=Ff(o)?z:o,X=Ff(l)?K:l;r&&r>0&&(J?X=J/r:X&&(J=X*r),h&&X>h&&(X=h)),Su(J>0||X>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,J,X,o,l,c,d,r);var Q=!Array.isArray(m)&&Tu(m.type).endsWith("Chart");return ye.Children.map(m,function(W){return kQ.isElement(W)?$.cloneElement(W,Yb({width:J,height:X},Q?{style:Yb({height:"100%",width:"100%",maxHeight:X,maxWidth:J},W.props.style)}:{})):W})},[r,m,l,h,d,c,L,o]);return ye.createElement("div",{id:y?"".concat(y):void 0,className:br("recharts-responsive-container",x),style:Yb(Yb({},M),{},{width:o,height:l,minWidth:c,minHeight:d,maxHeight:h}),ref:T},G)}),Vj=function(t){return null};Vj.displayName="Cell";function O_(e){"@babel/helpers - typeof";return O_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O_(e)}function LU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ok(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LU(Object(r),!0).forEach(function(n){xMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xMe(e,t,r){return t=MMe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MMe(e){var t=TMe(e,"string");return O_(t)=="symbol"?t:t+""}function TMe(e,t){if(O_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(O_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yp={widthCache:{},cacheCount:0},SMe=2e3,PMe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},FU="recharts_measurement_span";function EMe(e){var t=ok({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var BU=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||k1.isSsr)return{width:0,height:0};var n=EMe(r),i=JSON.stringify({text:t,copyStyle:n});if(Yp.widthCache[i])return Yp.widthCache[i];try{var s=document.getElementById(FU);s||(s=document.createElement("span"),s.setAttribute("id",FU),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=ok(ok({},PMe),n);Object.assign(s.style,o),s.textContent="".concat(t);var a=s.getBoundingClientRect(),l={width:a.width,height:a.height};return Yp.widthCache[i]=l,++Yp.cacheCount>SMe&&(Yp.cacheCount=0,Yp.widthCache={}),l}catch{return{width:0,height:0}}},CMe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function k_(e){"@babel/helpers - typeof";return k_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k_(e)}function dx(e,t){return IMe(e)||kMe(e,t)||OMe(e,t)||AMe()}function AMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OMe(e,t){if(e){if(typeof e=="string")return zU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zU(e,t)}}function zU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kMe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function IMe(e){if(Array.isArray(e))return e}function jMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NMe(n.key),n)}}function $Me(e,t,r){return t&&UU(e.prototype,t),r&&UU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NMe(e){var t=DMe(e,"string");return k_(t)=="symbol"?t:t+""}function DMe(e,t){if(k_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(k_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,WU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,RMe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,LMe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,PJ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FMe=Object.keys(PJ),cm="NaN";function BMe(e,t){return e*PJ[t]}var Qb=(function(){function e(t,r){jMe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!RMe.test(r)&&(this.num=NaN,this.unit=""),FMe.includes(r)&&(this.num=BMe(t,r),this.unit="px")}return $Me(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=LMe.exec(r))!==null&&n!==void 0?n:[],s=dx(i,3),o=s[1],a=s[2];return new e(parseFloat(o),a??"")}}])})();function EJ(e){if(e.includes(cm))return cm;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=VU.exec(t))!==null&&r!==void 0?r:[],i=dx(n,4),s=i[1],o=i[2],a=i[3],l=Qb.parse(s??""),u=Qb.parse(a??""),c=o==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return cm;t=t.replace(VU,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,h=(d=WU.exec(t))!==null&&d!==void 0?d:[],m=dx(h,4),g=m[1],v=m[2],y=m[3],x=Qb.parse(g??""),w=Qb.parse(y??""),S=v==="+"?x.add(w):x.subtract(w);if(S.isNaN())return cm;t=t.replace(WU,S.toString())}return t}var GU=/\(([^()]*)\)/;function zMe(e){for(var t=e;t.includes("(");){var r=GU.exec(t),n=dx(r,2),i=n[1];t=t.replace(GU,EJ(i))}return t}function UMe(e){var t=e.replace(/\s+/g,"");return t=zMe(t),t=EJ(t),t}function VMe(e){try{return UMe(e)}catch{return cm}}function bC(e){var t=VMe(e.slice(5,-1));return t===cm?"":t}var WMe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],GMe=["dx","dy","angle","className","breakAll"];function ak(){return ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ak.apply(this,arguments)}function qU(e,t){if(e==null)return{};var r=qMe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qMe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function HU(e,t){return YMe(e)||XMe(e,t)||KMe(e,t)||HMe()}function HMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KMe(e,t){if(e){if(typeof e=="string")return KU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KU(e,t)}}function KU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function XMe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function YMe(e){if(Array.isArray(e))return e}var CJ=/[ \f\n\r\t\v\u2028\u2029]+/,AJ=function(t){var r=t.children,n=t.breakAll,i=t.style;try{var s=[];yr(r)||(n?s=r.toString().split(""):s=r.toString().split(CJ));var o=s.map(function(l){return{word:l,width:BU(l,i).width}}),a=n?0:BU("",i).width;return{wordsWithComputedWidth:o,spaceWidth:a}}catch{return null}},QMe=function(t,r,n,i,s){var o=t.maxLines,a=t.children,l=t.style,u=t.breakAll,c=St(o),d=a,h=function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return J.reduce(function(X,Q){var W=Q.word,oe=Q.width,ce=X[X.length-1];if(ce&&(i==null||s||ce.width+oe+n<Number(i)))ce.words.push(W),ce.width+=oe+n;else{var D={words:[W],width:oe};X.push(D)}return X},[])},m=h(r),g=function(J){return J.reduce(function(X,Q){return X.width>Q.width?X:Q})};if(!c)return m;for(var v="",y=function(J){var X=d.slice(0,J),Q=AJ({breakAll:u,style:l,children:X+v}).wordsWithComputedWidth,W=h(Q),oe=W.length>o||g(W).width>Number(i);return[oe,W]},x=0,w=d.length-1,S=0,M;x<=w&&S<=d.length-1;){var T=Math.floor((x+w)/2),P=T-1,E=y(P),A=HU(E,2),L=A[0],B=A[1],V=y(T),G=HU(V,1),z=G[0];if(!L&&!z&&(x=T+1),L&&z&&(w=T-1),!L&&z){M=B;break}S++}return M||m},XU=function(t){var r=yr(t)?[]:t.toString().split(CJ);return[{words:r}]},JMe=function(t){var r=t.width,n=t.scaleToFit,i=t.children,s=t.style,o=t.breakAll,a=t.maxLines;if((r||n)&&!k1.isSsr){var l,u,c=AJ({breakAll:o,children:i,style:s});if(c){var d=c.wordsWithComputedWidth,h=c.spaceWidth;l=d,u=h}else return XU(i);return QMe({breakAll:o,children:i,maxLines:a,style:s},l,u,r,n)}return XU(i)},YU="#808080",Lm=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,s=i===void 0?0:i,o=t.lineHeight,a=o===void 0?"1em":o,l=t.capHeight,u=l===void 0?"0.71em":l,c=t.scaleToFit,d=c===void 0?!1:c,h=t.textAnchor,m=h===void 0?"start":h,g=t.verticalAnchor,v=g===void 0?"end":g,y=t.fill,x=y===void 0?YU:y,w=qU(t,WMe),S=$.useMemo(function(){return JMe({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:d,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,d,w.style,w.width]),M=w.dx,T=w.dy,P=w.angle,E=w.className,A=w.breakAll,L=qU(w,GMe);if(!ci(n)||!ci(s))return null;var B=n+(St(M)?M:0),V=s+(St(T)?T:0),G;switch(v){case"start":G=bC("calc(".concat(u,")"));break;case"middle":G=bC("calc(".concat((S.length-1)/2," * -").concat(a," + (").concat(u," / 2))"));break;default:G=bC("calc(".concat(S.length-1," * -").concat(a,")"));break}var z=[];if(d){var K=S[0].width,J=w.width;z.push("scale(".concat((St(J)?J/K:1)/K,")"))}return P&&z.push("rotate(".concat(P,", ").concat(B,", ").concat(V,")")),z.length&&(L.transform=z.join(" ")),ye.createElement("text",ak({},lr(L,!0),{x:B,y:V,className:br("recharts-text",E),textAnchor:m,fill:x.includes("url")?YU:x}),S.map(function(X,Q){var W=X.words.join(A?"":" ");return ye.createElement("tspan",{x:B,dy:Q===0?G:a,key:"".concat(W,"-").concat(Q)},W)}))};function Uc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ZMe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wj(e){let t,r,n;e.length!==2?(t=Uc,r=(a,l)=>Uc(e(a),l),n=(a,l)=>e(a)-l):(t=e===Uc||e===ZMe?e:eTe,r=e,n=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;r(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;r(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function o(a,l,u=0,c=a.length){const d=i(a,l,u,c-1);return d>u&&n(a[d-1],l)>-n(a[d],l)?d-1:d}return{left:i,center:o,right:s}}function eTe(){return 0}function OJ(e){return e===null?NaN:+e}function*tTe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const rTe=Wj(Uc),T0=rTe.right;Wj(OJ).center;class QU extends Map{constructor(t,r=sTe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(JU(this,t))}has(t){return super.has(JU(this,t))}set(t,r){return super.set(nTe(this,t),r)}delete(t){return super.delete(iTe(this,t))}}function JU({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function nTe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function iTe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function sTe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function oTe(e=Uc){if(e===Uc)return kJ;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function kJ(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const aTe=Math.sqrt(50),lTe=Math.sqrt(10),uTe=Math.sqrt(2);function fx(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),o=s>=aTe?10:s>=lTe?5:s>=uTe?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*o,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=r&&r<2?fx(e,t,r*2):[a,l,u]}function lk(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,s,o]=n?fx(t,e,r):fx(e,t,r);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(n)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(i+u)/-o;else for(let u=0;u<a;++u)l[u]=(i+u)*o;return l}function uk(e,t,r){return t=+t,e=+e,r=+r,fx(e,t,r)[2]}function ck(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?uk(t,e,r):uk(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function ZU(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function eV(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function IJ(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?kJ:oTe(i);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,c=Math.log(l),d=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),m=Math.max(r,Math.floor(t-u*d/l+h)),g=Math.min(n,Math.floor(t+(l-u)*d/l+h));IJ(e,t,m,g,i)}const s=e[t];let o=r,a=n;for(My(e,r,t),i(e[n],s)>0&&My(e,r,n);o<a;){for(My(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[r],s)===0?My(e,r,a):(++a,My(e,a,n)),a<=t&&(r=a+1),t<=a&&(n=a-1)}return e}function My(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function cTe(e,t,r){if(e=Float64Array.from(tTe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return eV(e);if(t>=1)return ZU(e);var n,i=(n-1)*t,s=Math.floor(i),o=ZU(IJ(e,s).subarray(0,s+1)),a=eV(e.subarray(s+1));return o+(a-o)*(i-s)}}function dTe(e,t,r=OJ){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),o=+r(e[s],s,e),a=+r(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function fTe(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++n<i;)s[n]=e+n*r;return s}function Bo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Fu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const dk=Symbol("implicit");function Gj(){var e=new QU,t=[],r=[],n=dk;function i(s){let o=e.get(s);if(o===void 0){if(n!==dk)return n;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new QU;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Gj(t,r).unknown(n)},Bo.apply(i,arguments),i}function I_(){var e=Gj().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,s,o,a=!1,l=0,u=0,c=.5;delete e.unknown;function d(){var h=t().length,m=i<n,g=m?i:n,v=m?n:i;s=(v-g)/Math.max(1,h-l+u*2),a&&(s=Math.floor(s)),g+=(v-g-s*(h-l))*c,o=s*(1-l),a&&(g=Math.round(g),o=Math.round(o));var y=fTe(h).map(function(x){return g+s*x});return r(m?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,d()):[n,i]},e.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,a=!0,d()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(a=!!h,d()):a},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),d()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),d()):c},e.copy=function(){return I_(t(),[n,i]).round(a).paddingInner(l).paddingOuter(u).align(c)},Bo.apply(d(),arguments)}function jJ(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return jJ(t())},e}function Jy(){return jJ(I_.apply(null,arguments).paddingInner(1))}function qj(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function $J(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function S0(){}var j_=.7,hx=1/j_,wm="\\s*([+-]?\\d+)\\s*",$_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hTe=/^#([0-9a-f]{3,8})$/,pTe=new RegExp(`^rgb\\(${wm},${wm},${wm}\\)$`),mTe=new RegExp(`^rgb\\(${hl},${hl},${hl}\\)$`),gTe=new RegExp(`^rgba\\(${wm},${wm},${wm},${$_}\\)$`),vTe=new RegExp(`^rgba\\(${hl},${hl},${hl},${$_}\\)$`),yTe=new RegExp(`^hsl\\(${$_},${hl},${hl}\\)$`),_Te=new RegExp(`^hsla\\(${$_},${hl},${hl},${$_}\\)$`),tV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qj(S0,N_,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:rV,formatHex:rV,formatHex8:bTe,formatHsl:wTe,formatRgb:nV,toString:nV});function rV(){return this.rgb().formatHex()}function bTe(){return this.rgb().formatHex8()}function wTe(){return NJ(this).formatHsl()}function nV(){return this.rgb().formatRgb()}function N_(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=hTe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?iV(t):r===3?new ks(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Jb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Jb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pTe.exec(e))?new ks(t[1],t[2],t[3],1):(t=mTe.exec(e))?new ks(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gTe.exec(e))?Jb(t[1],t[2],t[3],t[4]):(t=vTe.exec(e))?Jb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yTe.exec(e))?aV(t[1],t[2]/100,t[3]/100,1):(t=_Te.exec(e))?aV(t[1],t[2]/100,t[3]/100,t[4]):tV.hasOwnProperty(e)?iV(tV[e]):e==="transparent"?new ks(NaN,NaN,NaN,0):null}function iV(e){return new ks(e>>16&255,e>>8&255,e&255,1)}function Jb(e,t,r,n){return n<=0&&(e=t=r=NaN),new ks(e,t,r,n)}function xTe(e){return e instanceof S0||(e=N_(e)),e?(e=e.rgb(),new ks(e.r,e.g,e.b,e.opacity)):new ks}function fk(e,t,r,n){return arguments.length===1?xTe(e):new ks(e,t,r,n??1)}function ks(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}qj(ks,fk,$J(S0,{brighter(e){return e=e==null?hx:Math.pow(hx,e),new ks(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?j_:Math.pow(j_,e),new ks(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ks(Gf(this.r),Gf(this.g),Gf(this.b),px(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sV,formatHex:sV,formatHex8:MTe,formatRgb:oV,toString:oV}));function sV(){return`#${Bf(this.r)}${Bf(this.g)}${Bf(this.b)}`}function MTe(){return`#${Bf(this.r)}${Bf(this.g)}${Bf(this.b)}${Bf((isNaN(this.opacity)?1:this.opacity)*255)}`}function oV(){const e=px(this.opacity);return`${e===1?"rgb(":"rgba("}${Gf(this.r)}, ${Gf(this.g)}, ${Gf(this.b)}${e===1?")":`, ${e})`}`}function px(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Bf(e){return e=Gf(e),(e<16?"0":"")+e.toString(16)}function aV(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new xa(e,t,r,n)}function NJ(e){if(e instanceof xa)return new xa(e.h,e.s,e.l,e.opacity);if(e instanceof S0||(e=N_(e)),!e)return new xa;if(e instanceof xa)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(r-n)/a+(r<n)*6:r===s?o=(n-t)/a+2:o=(t-r)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new xa(o,a,l,e.opacity)}function TTe(e,t,r,n){return arguments.length===1?NJ(e):new xa(e,t,r,n??1)}function xa(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}qj(xa,TTe,$J(S0,{brighter(e){return e=e==null?hx:Math.pow(hx,e),new xa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?j_:Math.pow(j_,e),new xa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new ks(wC(e>=240?e-240:e+120,i,n),wC(e,i,n),wC(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new xa(lV(this.h),Zb(this.s),Zb(this.l),px(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=px(this.opacity);return`${e===1?"hsl(":"hsla("}${lV(this.h)}, ${Zb(this.s)*100}%, ${Zb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function lV(e){return e=(e||0)%360,e<0?e+360:e}function Zb(e){return Math.max(0,Math.min(1,e||0))}function wC(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Hj=e=>()=>e;function STe(e,t){return function(r){return e+r*t}}function PTe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function ETe(e){return(e=+e)==1?DJ:function(t,r){return r-t?PTe(t,r,e):Hj(isNaN(t)?r:t)}}function DJ(e,t){var r=t-e;return r?STe(e,r):Hj(isNaN(e)?t:e)}const uV=(function e(t){var r=ETe(t);function n(i,s){var o=r((i=fk(i)).r,(s=fk(s)).r),a=r(i.g,s.g),l=r(i.b,s.b),u=DJ(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return n.gamma=e,n})(1);function CTe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=e[i]*(1-s)+t[i]*s;return n}}function ATe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function OTe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)i[o]=vg(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(a){for(o=0;o<n;++o)s[o]=i[o](a);return s}}function kTe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function mx(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function ITe(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=vg(e[i],t[i]):n[i]=t[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var hk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xC=new RegExp(hk.source,"g");function jTe(e){return function(){return e}}function $Te(e){return function(t){return e(t)+""}}function NTe(e,t){var r=hk.lastIndex=xC.lastIndex=0,n,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(n=hk.exec(e))&&(i=xC.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:mx(n,i)})),r=xC.lastIndex;return r<t.length&&(s=t.slice(r),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?$Te(l[0].x):jTe(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function vg(e,t){var r=typeof t,n;return t==null||r==="boolean"?Hj(t):(r==="number"?mx:r==="string"?(n=N_(t))?(t=n,uV):NTe:t instanceof N_?uV:t instanceof Date?kTe:ATe(t)?CTe:Array.isArray(t)?OTe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ITe:mx)(e,t)}function Kj(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function DTe(e,t){t===void 0&&(t=e,e=vg);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(o){var a=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[a](o-a)}}function RTe(e){return function(){return e}}function gx(e){return+e}var cV=[0,1];function ms(e){return e}function pk(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:RTe(isNaN(t)?NaN:.5)}function LTe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function FTe(e,t,r){var n=e[0],i=e[1],s=t[0],o=t[1];return i<n?(n=pk(i,n),s=r(o,s)):(n=pk(n,i),s=r(s,o)),function(a){return s(n(a))}}function BTe(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)i[o]=pk(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(a){var l=T0(e,a,1,n)-1;return s[l](i[l](a))}}function P0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function I1(){var e=cV,t=cV,r=vg,n,i,s,o=ms,a,l,u;function c(){var h=Math.min(e.length,t.length);return o!==ms&&(o=LTe(e[0],e[h-1])),a=h>2?BTe:FTe,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?s:(l||(l=a(e.map(n),t,r)))(n(o(h)))}return d.invert=function(h){return o(i((u||(u=a(t,e.map(n),mx)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,gx),c()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),r=Kj,c()},d.clamp=function(h){return arguments.length?(o=h?!0:ms,c()):o!==ms},d.interpolate=function(h){return arguments.length?(r=h,c()):r},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,m){return n=h,i=m,c()}}function Xj(){return I1()(ms,ms)}function zTe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function vx(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Fm(e){return e=vx(Math.abs(e)),e?e[1]:NaN}function UTe(e,t){return function(r,n){for(var i=r.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),s.push(r.substring(i-=a,i+a)),!((l+=a+1)>n));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function VTe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var WTe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function D_(e){if(!(t=WTe.exec(e)))throw new Error("invalid format: "+e);var t;return new Yj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}D_.prototype=Yj.prototype;function Yj(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Yj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function GTe(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var RJ;function qTe(e,t){var r=vx(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(RJ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+vx(e,Math.max(0,t+s-1))[0]}function dV(e,t){var r=vx(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const fV={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:zTe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>dV(e*100,t),r:dV,s:qTe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function hV(e){return e}var pV=Array.prototype.map,mV=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function HTe(e){var t=e.grouping===void 0||e.thousands===void 0?hV:UTe(pV.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?hV:VTe(pV.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d){d=D_(d);var h=d.fill,m=d.align,g=d.sign,v=d.symbol,y=d.zero,x=d.width,w=d.comma,S=d.precision,M=d.trim,T=d.type;T==="n"?(w=!0,T="g"):fV[T]||(S===void 0&&(S=12),M=!0,T="g"),(y||h==="0"&&m==="=")&&(y=!0,h="0",m="=");var P=v==="$"?r:v==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",E=v==="$"?n:/[%p]/.test(T)?o:"",A=fV[T],L=/[defgprs%]/.test(T);S=S===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function B(V){var G=P,z=E,K,J,X;if(T==="c")z=A(V)+z,V="";else{V=+V;var Q=V<0||1/V<0;if(V=isNaN(V)?l:A(Math.abs(V),S),M&&(V=GTe(V)),Q&&+V==0&&g!=="+"&&(Q=!1),G=(Q?g==="("?g:a:g==="-"||g==="("?"":g)+G,z=(T==="s"?mV[8+RJ/3]:"")+z+(Q&&g==="("?")":""),L){for(K=-1,J=V.length;++K<J;)if(X=V.charCodeAt(K),48>X||X>57){z=(X===46?i+V.slice(K+1):V.slice(K))+z,V=V.slice(0,K);break}}}w&&!y&&(V=t(V,1/0));var W=G.length+V.length+z.length,oe=W<x?new Array(x-W+1).join(h):"";switch(w&&y&&(V=t(oe+V,oe.length?x-z.length:1/0),oe=""),m){case"<":V=G+V+z+oe;break;case"=":V=G+oe+V+z;break;case"^":V=oe.slice(0,W=oe.length>>1)+G+V+z+oe.slice(W);break;default:V=oe+G+V+z;break}return s(V)}return B.toString=function(){return d+""},B}function c(d,h){var m=u((d=D_(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(Fm(h)/3)))*3,v=Math.pow(10,-g),y=mV[8+g/3];return function(x){return m(v*x)+y}}return{format:u,formatPrefix:c}}var ew,Qj,LJ;KTe({thousands:",",grouping:[3],currency:["$",""]});function KTe(e){return ew=HTe(e),Qj=ew.format,LJ=ew.formatPrefix,ew}function XTe(e){return Math.max(0,-Fm(Math.abs(e)))}function YTe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fm(t)/3)))*3-Fm(Math.abs(e)))}function QTe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Fm(t)-Fm(e))+1}function FJ(e,t,r,n){var i=ck(e,t,r),s;switch(n=D_(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=YTe(i,o))&&(n.precision=s),LJ(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=QTe(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=XTe(i))&&(n.precision=s-(n.type==="%")*2);break}}return Qj(n)}function od(e){var t=e.domain;return e.ticks=function(r){var n=t();return lk(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return FJ(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,s=n.length-1,o=n[i],a=n[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=uk(o,a,r),u===l)return n[i]=o,n[s]=a,t(n);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function yx(){var e=Xj();return e.copy=function(){return P0(e,yx())},Bo.apply(e,arguments),od(e)}function BJ(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,gx),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return BJ(e).unknown(t)},e=arguments.length?Array.from(e,gx):[0,1],od(r)}function zJ(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],s=e[n],o;return s<i&&(o=r,r=n,n=o,o=i,i=s,s=o),e[r]=t.floor(i),e[n]=t.ceil(s),e}function gV(e){return Math.log(e)}function vV(e){return Math.exp(e)}function JTe(e){return-Math.log(-e)}function ZTe(e){return-Math.exp(-e)}function eSe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function tSe(e){return e===10?eSe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function rSe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function yV(e){return(t,r)=>-e(-t,r)}function Jj(e){const t=e(gV,vV),r=t.domain;let n=10,i,s;function o(){return i=rSe(n),s=tSe(n),r()[0]<0?(i=yV(i),s=yV(s),e(JTe,ZTe)):e(gV,vV),t}return t.base=function(a){return arguments.length?(n=+a,o()):n},t.domain=function(a){return arguments.length?(r(a),o()):r()},t.ticks=a=>{const l=r();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let h=i(u),m=i(c),g,v;const y=a==null?10:+a;let x=[];if(!(n%1)&&m-h<y){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(v=h<0?g/s(-h):g*s(h),!(v<u)){if(v>c)break;x.push(v)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(v=h>0?g/s(-h):g*s(h),!(v<u)){if(v>c)break;x.push(v)}x.length*2<y&&(x=lk(u,c,y))}else x=lk(h,m,Math.min(m-h,y)).map(s);return d?x.reverse():x},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=D_(l)).precision==null&&(l.trim=!0),l=Qj(l)),a===1/0)return l;const u=Math.max(1,n*a/t.ticks().length);return c=>{let d=c/s(Math.round(i(c)));return d*n<n-.5&&(d*=n),d<=u?l(c):""}},t.nice=()=>r(zJ(r(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function UJ(){const e=Jj(I1()).domain([1,10]);return e.copy=()=>P0(e,UJ()).base(e.base()),Bo.apply(e,arguments),e}function _V(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function bV(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Zj(e){var t=1,r=e(_V(t),bV(t));return r.constant=function(n){return arguments.length?e(_V(t=+n),bV(t)):t},od(r)}function VJ(){var e=Zj(I1());return e.copy=function(){return P0(e,VJ()).constant(e.constant())},Bo.apply(e,arguments)}function wV(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function nSe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function iSe(e){return e<0?-e*e:e*e}function e$(e){var t=e(ms,ms),r=1;function n(){return r===1?e(ms,ms):r===.5?e(nSe,iSe):e(wV(r),wV(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},od(t)}function t$(){var e=e$(I1());return e.copy=function(){return P0(e,t$()).exponent(e.exponent())},Bo.apply(e,arguments),e}function sSe(){return t$.apply(null,arguments).exponent(.5)}function xV(e){return Math.sign(e)*e*e}function oSe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function WJ(){var e=Xj(),t=[0,1],r=!1,n;function i(s){var o=oSe(e(s));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(s){return e.invert(xV(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,gx)).map(xV)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return WJ(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Bo.apply(i,arguments),od(i)}function GJ(){var e=[],t=[],r=[],n;function i(){var o=0,a=Math.max(1,t.length);for(r=new Array(a-1);++o<a;)r[o-1]=dTe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?n:t[T0(r,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?r[a-1]:e[0],a<r.length?r[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Uc),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return GJ().domain(e).range(t).unknown(n)},Bo.apply(s,arguments)}function qJ(){var e=0,t=1,r=1,n=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[T0(n,l,0,r)]:s}function a(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},o.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return qJ().domain([e,t]).range(i).unknown(s)},Bo.apply(od(o),arguments)}function HJ(){var e=[.5],t=[0,1],r,n=1;function i(s){return s!=null&&s<=s?t[T0(e,s,0,n)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return HJ().domain(e).range(t).unknown(r)},Bo.apply(i,arguments)}const MC=new Date,TC=new Date;function fi(e,t,r,n){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),t(s,a),e(s);while(u<s&&s<o);return l},i.filter=s=>fi(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),r&&(i.count=(s,o)=>(MC.setTime(+s),TC.setTime(+o),e(MC),e(TC),Math.floor(r(MC,TC))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?o=>n(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const _x=fi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);_x.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):_x);_x.range;const xu=1e3,No=xu*60,Mu=No*60,Iu=Mu*24,r$=Iu*7,MV=Iu*30,SC=Iu*365,zf=fi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*xu)},(e,t)=>(t-e)/xu,e=>e.getUTCSeconds());zf.range;const n$=fi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xu)},(e,t)=>{e.setTime(+e+t*No)},(e,t)=>(t-e)/No,e=>e.getMinutes());n$.range;const i$=fi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*No)},(e,t)=>(t-e)/No,e=>e.getUTCMinutes());i$.range;const s$=fi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xu-e.getMinutes()*No)},(e,t)=>{e.setTime(+e+t*Mu)},(e,t)=>(t-e)/Mu,e=>e.getHours());s$.range;const o$=fi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Mu)},(e,t)=>(t-e)/Mu,e=>e.getUTCHours());o$.range;const E0=fi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*No)/Iu,e=>e.getDate()-1);E0.range;const j1=fi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Iu,e=>e.getUTCDate()-1);j1.range;const KJ=fi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Iu,e=>Math.floor(e/Iu));KJ.range;function ph(e){return fi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*No)/r$)}const $1=ph(0),bx=ph(1),aSe=ph(2),lSe=ph(3),Bm=ph(4),uSe=ph(5),cSe=ph(6);$1.range;bx.range;aSe.range;lSe.range;Bm.range;uSe.range;cSe.range;function mh(e){return fi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/r$)}const N1=mh(0),wx=mh(1),dSe=mh(2),fSe=mh(3),zm=mh(4),hSe=mh(5),pSe=mh(6);N1.range;wx.range;dSe.range;fSe.range;zm.range;hSe.range;pSe.range;const a$=fi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());a$.range;const l$=fi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());l$.range;const ju=fi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ju.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ju.range;const $u=fi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());$u.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});$u.range;function XJ(e,t,r,n,i,s){const o=[[zf,1,xu],[zf,5,5*xu],[zf,15,15*xu],[zf,30,30*xu],[s,1,No],[s,5,5*No],[s,15,15*No],[s,30,30*No],[i,1,Mu],[i,3,3*Mu],[i,6,6*Mu],[i,12,12*Mu],[n,1,Iu],[n,2,2*Iu],[r,1,r$],[t,1,MV],[t,3,3*MV],[e,1,SC]];function a(u,c,d){const h=c<u;h&&([u,c]=[c,u]);const m=d&&typeof d.range=="function"?d:l(u,c,d),g=m?m.range(u,+c+1):[];return h?g.reverse():g}function l(u,c,d){const h=Math.abs(c-u)/d,m=Wj(([,,y])=>y).right(o,h);if(m===o.length)return e.every(ck(u/SC,c/SC,d));if(m===0)return _x.every(Math.max(ck(u,c,d),1));const[g,v]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(v)}return[a,l]}const[mSe,gSe]=XJ($u,l$,N1,KJ,o$,i$),[vSe,ySe]=XJ(ju,a$,$1,E0,s$,n$);function PC(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function EC(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ty(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function _Se(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,u=Sy(i),c=Py(i),d=Sy(s),h=Py(s),m=Sy(o),g=Py(o),v=Sy(a),y=Py(a),x=Sy(l),w=Py(l),S={a:Q,A:W,b:oe,B:ce,c:null,d:AV,e:AV,f:USe,g:JSe,G:ePe,H:FSe,I:BSe,j:zSe,L:YJ,m:VSe,M:WSe,p:D,q:U,Q:IV,s:jV,S:GSe,u:qSe,U:HSe,V:KSe,w:XSe,W:YSe,x:null,X:null,y:QSe,Y:ZSe,Z:tPe,"%":kV},M={a:te,A:ee,b:pe,B:Oe,c:null,d:OV,e:OV,f:sPe,g:mPe,G:vPe,H:rPe,I:nPe,j:iPe,L:JJ,m:oPe,M:aPe,p:xe,q:Ie,Q:IV,s:jV,S:lPe,u:uPe,U:cPe,V:dPe,w:fPe,W:hPe,x:null,X:null,y:pPe,Y:gPe,Z:yPe,"%":kV},T={a:B,A:V,b:G,B:z,c:K,d:EV,e:EV,f:NSe,g:PV,G:SV,H:CV,I:CV,j:kSe,L:$Se,m:OSe,M:ISe,p:L,q:ASe,Q:RSe,s:LSe,S:jSe,u:TSe,U:SSe,V:PSe,w:MSe,W:ESe,x:J,X,y:PV,Y:SV,Z:CSe,"%":DSe};S.x=P(r,S),S.X=P(n,S),S.c=P(t,S),M.x=P(r,M),M.X=P(n,M),M.c=P(t,M);function P(Pe,he){return function(re){var ue=[],ae=-1,Ce=0,$e=Pe.length,Ne,Le,Ve;for(re instanceof Date||(re=new Date(+re));++ae<$e;)Pe.charCodeAt(ae)===37&&(ue.push(Pe.slice(Ce,ae)),(Le=TV[Ne=Pe.charAt(++ae)])!=null?Ne=Pe.charAt(++ae):Le=Ne==="e"?" ":"0",(Ve=he[Ne])&&(Ne=Ve(re,Le)),ue.push(Ne),Ce=ae+1);return ue.push(Pe.slice(Ce,ae)),ue.join("")}}function E(Pe,he){return function(re){var ue=Ty(1900,void 0,1),ae=A(ue,Pe,re+="",0),Ce,$e;if(ae!=re.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(he&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(Ce=EC(Ty(ue.y,0,1)),$e=Ce.getUTCDay(),Ce=$e>4||$e===0?wx.ceil(Ce):wx(Ce),Ce=j1.offset(Ce,(ue.V-1)*7),ue.y=Ce.getUTCFullYear(),ue.m=Ce.getUTCMonth(),ue.d=Ce.getUTCDate()+(ue.w+6)%7):(Ce=PC(Ty(ue.y,0,1)),$e=Ce.getDay(),Ce=$e>4||$e===0?bx.ceil(Ce):bx(Ce),Ce=E0.offset(Ce,(ue.V-1)*7),ue.y=Ce.getFullYear(),ue.m=Ce.getMonth(),ue.d=Ce.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),$e="Z"in ue?EC(Ty(ue.y,0,1)).getUTCDay():PC(Ty(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-($e+5)%7:ue.w+ue.U*7-($e+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,EC(ue)):PC(ue)}}function A(Pe,he,re,ue){for(var ae=0,Ce=he.length,$e=re.length,Ne,Le;ae<Ce;){if(ue>=$e)return-1;if(Ne=he.charCodeAt(ae++),Ne===37){if(Ne=he.charAt(ae++),Le=T[Ne in TV?he.charAt(ae++):Ne],!Le||(ue=Le(Pe,re,ue))<0)return-1}else if(Ne!=re.charCodeAt(ue++))return-1}return ue}function L(Pe,he,re){var ue=u.exec(he.slice(re));return ue?(Pe.p=c.get(ue[0].toLowerCase()),re+ue[0].length):-1}function B(Pe,he,re){var ue=m.exec(he.slice(re));return ue?(Pe.w=g.get(ue[0].toLowerCase()),re+ue[0].length):-1}function V(Pe,he,re){var ue=d.exec(he.slice(re));return ue?(Pe.w=h.get(ue[0].toLowerCase()),re+ue[0].length):-1}function G(Pe,he,re){var ue=x.exec(he.slice(re));return ue?(Pe.m=w.get(ue[0].toLowerCase()),re+ue[0].length):-1}function z(Pe,he,re){var ue=v.exec(he.slice(re));return ue?(Pe.m=y.get(ue[0].toLowerCase()),re+ue[0].length):-1}function K(Pe,he,re){return A(Pe,t,he,re)}function J(Pe,he,re){return A(Pe,r,he,re)}function X(Pe,he,re){return A(Pe,n,he,re)}function Q(Pe){return o[Pe.getDay()]}function W(Pe){return s[Pe.getDay()]}function oe(Pe){return l[Pe.getMonth()]}function ce(Pe){return a[Pe.getMonth()]}function D(Pe){return i[+(Pe.getHours()>=12)]}function U(Pe){return 1+~~(Pe.getMonth()/3)}function te(Pe){return o[Pe.getUTCDay()]}function ee(Pe){return s[Pe.getUTCDay()]}function pe(Pe){return l[Pe.getUTCMonth()]}function Oe(Pe){return a[Pe.getUTCMonth()]}function xe(Pe){return i[+(Pe.getUTCHours()>=12)]}function Ie(Pe){return 1+~~(Pe.getUTCMonth()/3)}return{format:function(Pe){var he=P(Pe+="",S);return he.toString=function(){return Pe},he},parse:function(Pe){var he=E(Pe+="",!1);return he.toString=function(){return Pe},he},utcFormat:function(Pe){var he=P(Pe+="",M);return he.toString=function(){return Pe},he},utcParse:function(Pe){var he=E(Pe+="",!0);return he.toString=function(){return Pe},he}}}var TV={"-":"",_:" ",0:"0"},Si=/^\s*\d+/,bSe=/^%/,wSe=/[\\^$*+?|[\]().{}]/g;function Cr(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function xSe(e){return e.replace(wSe,"\\$&")}function Sy(e){return new RegExp("^(?:"+e.map(xSe).join("|")+")","i")}function Py(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function MSe(e,t,r){var n=Si.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function TSe(e,t,r){var n=Si.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function SSe(e,t,r){var n=Si.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function PSe(e,t,r){var n=Si.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function ESe(e,t,r){var n=Si.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function SV(e,t,r){var n=Si.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function PV(e,t,r){var n=Si.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function CSe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function ASe(e,t,r){var n=Si.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function OSe(e,t,r){var n=Si.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function EV(e,t,r){var n=Si.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function kSe(e,t,r){var n=Si.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function CV(e,t,r){var n=Si.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function ISe(e,t,r){var n=Si.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function jSe(e,t,r){var n=Si.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function $Se(e,t,r){var n=Si.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function NSe(e,t,r){var n=Si.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function DSe(e,t,r){var n=bSe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function RSe(e,t,r){var n=Si.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function LSe(e,t,r){var n=Si.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function AV(e,t){return Cr(e.getDate(),t,2)}function FSe(e,t){return Cr(e.getHours(),t,2)}function BSe(e,t){return Cr(e.getHours()%12||12,t,2)}function zSe(e,t){return Cr(1+E0.count(ju(e),e),t,3)}function YJ(e,t){return Cr(e.getMilliseconds(),t,3)}function USe(e,t){return YJ(e,t)+"000"}function VSe(e,t){return Cr(e.getMonth()+1,t,2)}function WSe(e,t){return Cr(e.getMinutes(),t,2)}function GSe(e,t){return Cr(e.getSeconds(),t,2)}function qSe(e){var t=e.getDay();return t===0?7:t}function HSe(e,t){return Cr($1.count(ju(e)-1,e),t,2)}function QJ(e){var t=e.getDay();return t>=4||t===0?Bm(e):Bm.ceil(e)}function KSe(e,t){return e=QJ(e),Cr(Bm.count(ju(e),e)+(ju(e).getDay()===4),t,2)}function XSe(e){return e.getDay()}function YSe(e,t){return Cr(bx.count(ju(e)-1,e),t,2)}function QSe(e,t){return Cr(e.getFullYear()%100,t,2)}function JSe(e,t){return e=QJ(e),Cr(e.getFullYear()%100,t,2)}function ZSe(e,t){return Cr(e.getFullYear()%1e4,t,4)}function ePe(e,t){var r=e.getDay();return e=r>=4||r===0?Bm(e):Bm.ceil(e),Cr(e.getFullYear()%1e4,t,4)}function tPe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Cr(t/60|0,"0",2)+Cr(t%60,"0",2)}function OV(e,t){return Cr(e.getUTCDate(),t,2)}function rPe(e,t){return Cr(e.getUTCHours(),t,2)}function nPe(e,t){return Cr(e.getUTCHours()%12||12,t,2)}function iPe(e,t){return Cr(1+j1.count($u(e),e),t,3)}function JJ(e,t){return Cr(e.getUTCMilliseconds(),t,3)}function sPe(e,t){return JJ(e,t)+"000"}function oPe(e,t){return Cr(e.getUTCMonth()+1,t,2)}function aPe(e,t){return Cr(e.getUTCMinutes(),t,2)}function lPe(e,t){return Cr(e.getUTCSeconds(),t,2)}function uPe(e){var t=e.getUTCDay();return t===0?7:t}function cPe(e,t){return Cr(N1.count($u(e)-1,e),t,2)}function ZJ(e){var t=e.getUTCDay();return t>=4||t===0?zm(e):zm.ceil(e)}function dPe(e,t){return e=ZJ(e),Cr(zm.count($u(e),e)+($u(e).getUTCDay()===4),t,2)}function fPe(e){return e.getUTCDay()}function hPe(e,t){return Cr(wx.count($u(e)-1,e),t,2)}function pPe(e,t){return Cr(e.getUTCFullYear()%100,t,2)}function mPe(e,t){return e=ZJ(e),Cr(e.getUTCFullYear()%100,t,2)}function gPe(e,t){return Cr(e.getUTCFullYear()%1e4,t,4)}function vPe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?zm(e):zm.ceil(e),Cr(e.getUTCFullYear()%1e4,t,4)}function yPe(){return"+0000"}function kV(){return"%"}function IV(e){return+e}function jV(e){return Math.floor(+e/1e3)}var Qp,eZ,tZ;_Pe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _Pe(e){return Qp=_Se(e),eZ=Qp.format,Qp.parse,tZ=Qp.utcFormat,Qp.utcParse,Qp}function bPe(e){return new Date(e)}function wPe(e){return e instanceof Date?+e:+new Date(+e)}function u$(e,t,r,n,i,s,o,a,l,u){var c=Xj(),d=c.invert,h=c.domain,m=u(".%L"),g=u(":%S"),v=u("%I:%M"),y=u("%I %p"),x=u("%a %d"),w=u("%b %d"),S=u("%B"),M=u("%Y");function T(P){return(l(P)<P?m:a(P)<P?g:o(P)<P?v:s(P)<P?y:n(P)<P?i(P)<P?x:w:r(P)<P?S:M)(P)}return c.invert=function(P){return new Date(d(P))},c.domain=function(P){return arguments.length?h(Array.from(P,wPe)):h().map(bPe)},c.ticks=function(P){var E=h();return e(E[0],E[E.length-1],P??10)},c.tickFormat=function(P,E){return E==null?T:u(E)},c.nice=function(P){var E=h();return(!P||typeof P.range!="function")&&(P=t(E[0],E[E.length-1],P??10)),P?h(zJ(E,P)):c},c.copy=function(){return P0(c,u$(e,t,r,n,i,s,o,a,l,u))},c}function xPe(){return Bo.apply(u$(vSe,ySe,ju,a$,$1,E0,s$,n$,zf,eZ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function MPe(){return Bo.apply(u$(mSe,gSe,$u,l$,N1,j1,o$,i$,zf,tZ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function D1(){var e=0,t=1,r,n,i,s,o=ms,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(s(d)-r)*i,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=s(e=+e),n=s(t=+t),i=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(o=d,u):o};function c(d){return function(h){var m,g;return arguments.length?([m,g]=h,o=d(m,g),u):[o(0),o(1)]}}return u.range=c(vg),u.rangeRound=c(Kj),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return s=d,r=d(e),n=d(t),i=r===n?0:1/(n-r),u}}function ad(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function rZ(){var e=od(D1()(ms));return e.copy=function(){return ad(e,rZ())},Fu.apply(e,arguments)}function nZ(){var e=Jj(D1()).domain([1,10]);return e.copy=function(){return ad(e,nZ()).base(e.base())},Fu.apply(e,arguments)}function iZ(){var e=Zj(D1());return e.copy=function(){return ad(e,iZ()).constant(e.constant())},Fu.apply(e,arguments)}function c$(){var e=e$(D1());return e.copy=function(){return ad(e,c$()).exponent(e.exponent())},Fu.apply(e,arguments)}function TPe(){return c$.apply(null,arguments).exponent(.5)}function sZ(){var e=[],t=ms;function r(n){if(n!=null&&!isNaN(n=+n))return t((T0(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Uc),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>cTe(e,s/n))},r.copy=function(){return sZ(t).domain(e)},Fu.apply(r,arguments)}function R1(){var e=0,t=.5,r=1,n=1,i,s,o,a,l,u=ms,c,d=!1,h;function m(v){return isNaN(v=+v)?h:(v=.5+((v=+c(v))-s)*(n*v<n*s?a:l),u(d?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,r]=v,i=c(e=+e),s=c(t=+t),o=c(r=+r),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),n=s<i?-1:1,m):[e,t,r]},m.clamp=function(v){return arguments.length?(d=!!v,m):d},m.interpolator=function(v){return arguments.length?(u=v,m):u};function g(v){return function(y){var x,w,S;return arguments.length?([x,w,S]=y,u=DTe(v,[x,w,S]),m):[u(0),u(.5),u(1)]}}return m.range=g(vg),m.rangeRound=g(Kj),m.unknown=function(v){return arguments.length?(h=v,m):h},function(v){return c=v,i=v(e),s=v(t),o=v(r),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),n=s<i?-1:1,m}}function oZ(){var e=od(R1()(ms));return e.copy=function(){return ad(e,oZ())},Fu.apply(e,arguments)}function aZ(){var e=Jj(R1()).domain([.1,1,10]);return e.copy=function(){return ad(e,aZ()).base(e.base())},Fu.apply(e,arguments)}function lZ(){var e=Zj(R1());return e.copy=function(){return ad(e,lZ()).constant(e.constant())},Fu.apply(e,arguments)}function d$(){var e=e$(R1());return e.copy=function(){return ad(e,d$()).exponent(e.exponent())},Fu.apply(e,arguments)}function SPe(){return d$.apply(null,arguments).exponent(.5)}const $V=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:I_,scaleDiverging:oZ,scaleDivergingLog:aZ,scaleDivergingPow:d$,scaleDivergingSqrt:SPe,scaleDivergingSymlog:lZ,scaleIdentity:BJ,scaleImplicit:dk,scaleLinear:yx,scaleLog:UJ,scaleOrdinal:Gj,scalePoint:Jy,scalePow:t$,scaleQuantile:GJ,scaleQuantize:qJ,scaleRadial:WJ,scaleSequential:rZ,scaleSequentialLog:nZ,scaleSequentialPow:c$,scaleSequentialQuantile:sZ,scaleSequentialSqrt:TPe,scaleSequentialSymlog:iZ,scaleSqrt:sSe,scaleSymlog:VJ,scaleThreshold:HJ,scaleTime:xPe,scaleUtc:MPe,tickFormat:FJ},Symbol.toStringTag,{value:"Module"}));var CC,NV;function L1(){if(NV)return CC;NV=1;var e=pg();function t(r,n,i){for(var s=-1,o=r.length;++s<o;){var a=r[s],l=n(a);if(l!=null&&(u===void 0?l===l&&!e(l):i(l,u)))var u=l,c=a}return c}return CC=t,CC}var AC,DV;function uZ(){if(DV)return AC;DV=1;function e(t,r){return t>r}return AC=e,AC}var OC,RV;function PPe(){if(RV)return OC;RV=1;var e=L1(),t=uZ(),r=gg();function n(i){return i&&i.length?e(i,r,t):void 0}return OC=n,OC}var EPe=PPe();const F1=Dr(EPe);var kC,LV;function cZ(){if(LV)return kC;LV=1;function e(t,r){return t<r}return kC=e,kC}var IC,FV;function CPe(){if(FV)return IC;FV=1;var e=L1(),t=cZ(),r=gg();function n(i){return i&&i.length?e(i,r,t):void 0}return IC=n,IC}var APe=CPe();const B1=Dr(APe);var jC,BV;function OPe(){if(BV)return jC;BV=1;var e=Pj(),t=wl(),r=yJ(),n=$s();function i(s,o){var a=n(s)?e:r;return a(s,t(o,3))}return jC=i,jC}var $C,zV;function kPe(){if(zV)return $C;zV=1;var e=gJ(),t=OPe();function r(n,i){return e(t(n,i),1)}return $C=r,$C}var IPe=kPe();const jPe=Dr(IPe);var NC,UV;function $Pe(){if(UV)return NC;UV=1;var e=Fj();function t(r,n){return e(r,n)}return NC=t,NC}var NPe=$Pe();const f$=Dr(NPe);var yg=1e9,DPe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},p$,Mn=!0,Fo="[DecimalError] ",qf=Fo+"Invalid argument: ",h$=Fo+"Exponent out of range: ",_g=Math.floor,Af=Math.pow,RPe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xs,Mi=1e7,mn=7,dZ=9007199254740991,xx=_g(dZ/mn),Ct={};Ct.absoluteValue=Ct.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ct.comparedTo=Ct.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};Ct.decimalPlaces=Ct.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*mn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ct.dividedBy=Ct.div=function(e){return Pu(this,new this.constructor(e))};Ct.dividedToIntegerBy=Ct.idiv=function(e){var t=this,r=t.constructor;return en(Pu(t,new r(e),0,1),r.precision)};Ct.equals=Ct.eq=function(e){return!this.cmp(e)};Ct.exponent=function(){return ti(this)};Ct.greaterThan=Ct.gt=function(e){return this.cmp(e)>0};Ct.greaterThanOrEqualTo=Ct.gte=function(e){return this.cmp(e)>=0};Ct.isInteger=Ct.isint=function(){return this.e>this.d.length-2};Ct.isNegative=Ct.isneg=function(){return this.s<0};Ct.isPositive=Ct.ispos=function(){return this.s>0};Ct.isZero=function(){return this.s===0};Ct.lessThan=Ct.lt=function(e){return this.cmp(e)<0};Ct.lessThanOrEqualTo=Ct.lte=function(e){return this.cmp(e)<1};Ct.logarithm=Ct.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Xs))throw Error(Fo+"NaN");if(r.s<1)throw Error(Fo+(r.s?"NaN":"-Infinity"));return r.eq(Xs)?new n(0):(Mn=!1,t=Pu(R_(r,s),R_(e,s),s),Mn=!0,en(t,i))};Ct.minus=Ct.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?pZ(t,e):fZ(t,(e.s=-e.s,e))};Ct.modulo=Ct.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Fo+"NaN");return r.s?(Mn=!1,t=Pu(r,e,0,1).times(e),Mn=!0,r.minus(t)):en(new n(r),i)};Ct.naturalExponential=Ct.exp=function(){return hZ(this)};Ct.naturalLogarithm=Ct.ln=function(){return R_(this)};Ct.negated=Ct.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ct.plus=Ct.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?fZ(t,e):pZ(t,(e.s=-e.s,e))};Ct.precision=Ct.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(qf+e);if(t=ti(i)+1,n=i.d.length-1,r=n*mn+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ct.squareRoot=Ct.sqrt=function(){var e,t,r,n,i,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Fo+"NaN")}for(e=ti(a),Mn=!1,i=Math.sqrt(+a),i==0||i==1/0?(t=ll(a.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=_g((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(i.toString()),r=l.precision,i=o=r+3;;)if(s=n,n=s.plus(Pu(a,s,o+2)).times(.5),ll(s.d).slice(0,o)===(t=ll(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(en(s,r+1,0),s.times(s).eq(a)){n=s;break}}else if(t!="9999")break;o+=4}return Mn=!0,en(n,r)};Ct.times=Ct.mul=function(e){var t,r,n,i,s,o,a,l,u,c=this,d=c.constructor,h=c.d,m=(e=new d(e)).d;if(!c.s||!e.s)return new d(0);for(e.s*=c.s,r=c.e+e.e,l=h.length,u=m.length,l<u&&(s=h,h=m,m=s,o=l,l=u,u=o),s=[],o=l+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,i=l+n;i>n;)a=s[i]+m[n]*h[i-n-1]+t,s[i--]=a%Mi|0,t=a/Mi|0;s[i]=(s[i]+t)%Mi|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Mn?en(e,d.precision):e};Ct.toDecimalPlaces=Ct.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(vl(e,0,yg),t===void 0?t=n.rounding:vl(t,0,8),en(r,e+ti(r)+1,t))};Ct.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=sh(n,!0):(vl(e,0,yg),t===void 0?t=i.rounding:vl(t,0,8),n=en(new i(n),e+1,t),r=sh(n,!0,e+1)),r};Ct.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?sh(i):(vl(e,0,yg),t===void 0?t=s.rounding:vl(t,0,8),n=en(new s(i),e+ti(i)+1,t),r=sh(n.abs(),!1,e+ti(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ct.toInteger=Ct.toint=function(){var e=this,t=e.constructor;return en(new t(e),ti(e)+1,t.rounding)};Ct.toNumber=function(){return+this};Ct.toPower=Ct.pow=function(e){var t,r,n,i,s,o,a=this,l=a.constructor,u=12,c=+(e=new l(e));if(!e.s)return new l(Xs);if(a=new l(a),!a.s){if(e.s<1)throw Error(Fo+"Infinity");return a}if(a.eq(Xs))return a;if(n=l.precision,e.eq(Xs))return en(a,n);if(t=e.e,r=e.d.length-1,o=t>=r,s=a.s,o){if((r=c<0?-c:c)<=dZ){for(i=new l(Xs),t=Math.ceil(n/mn+4),Mn=!1;r%2&&(i=i.times(a),WV(i.d,t)),r=_g(r/2),r!==0;)a=a.times(a),WV(a.d,t);return Mn=!0,e.s<0?new l(Xs).div(i):en(i,n)}}else if(s<0)throw Error(Fo+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,a.s=1,Mn=!1,i=e.times(R_(a,n+u)),Mn=!0,i=hZ(i),i.s=s,i};Ct.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?(r=ti(i),n=sh(i,r<=s.toExpNeg||r>=s.toExpPos)):(vl(e,1,yg),t===void 0?t=s.rounding:vl(t,0,8),i=en(new s(i),e,t),r=ti(i),n=sh(i,e<=r||r<=s.toExpNeg,e)),n};Ct.toSignificantDigits=Ct.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(vl(e,1,yg),t===void 0?t=n.rounding:vl(t,0,8)),en(new n(r),e,t)};Ct.toString=Ct.valueOf=Ct.val=Ct.toJSON=Ct[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ti(e),r=e.constructor;return sh(e,t<=r.toExpNeg||t>=r.toExpPos)};function fZ(e,t){var r,n,i,s,o,a,l,u,c=e.constructor,d=c.precision;if(!e.s||!t.s)return t.s||(t=new c(e)),Mn?en(t,d):t;if(l=e.d,u=t.d,o=e.e,i=t.e,l=l.slice(),s=o-i,s){for(s<0?(n=l,s=-s,a=u.length):(n=u,i=o,a=l.length),o=Math.ceil(d/mn),a=o>a?o+1:a+1,s>a&&(s=a,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(a=l.length,s=u.length,a-s<0&&(s=a,n=u,u=l,l=n),r=0;s;)r=(l[--s]=l[s]+u[s]+r)/Mi|0,l[s]%=Mi;for(r&&(l.unshift(r),++i),a=l.length;l[--a]==0;)l.pop();return t.d=l,t.e=i,Mn?en(t,d):t}function vl(e,t,r){if(e!==~~e||e<t||e>r)throw Error(qf+e)}function ll(e){var t,r,n,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)n=e[t]+"",r=mn-n.length,r&&(s+=Dc(r)),s+=n;o=e[t],n=o+"",r=mn-n.length,r&&(s+=Dc(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Pu=(function(){function e(n,i){var s,o=0,a=n.length;for(n=n.slice();a--;)s=n[a]*i+o,n[a]=s%Mi|0,o=s/Mi|0;return o&&n.unshift(o),n}function t(n,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(n[a]!=i[a]){l=n[a]>i[a]?1:-1;break}return l}function r(n,i,s){for(var o=0;s--;)n[s]-=o,o=n[s]<i[s]?1:0,n[s]=o*Mi+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,o){var a,l,u,c,d,h,m,g,v,y,x,w,S,M,T,P,E,A,L=n.constructor,B=n.s==i.s?1:-1,V=n.d,G=i.d;if(!n.s)return new L(n);if(!i.s)throw Error(Fo+"Division by zero");for(l=n.e-i.e,E=G.length,T=V.length,m=new L(B),g=m.d=[],u=0;G[u]==(V[u]||0);)++u;if(G[u]>(V[u]||0)&&--l,s==null?w=s=L.precision:o?w=s+(ti(n)-ti(i))+1:w=s,w<0)return new L(0);if(w=w/mn+2|0,u=0,E==1)for(c=0,G=G[0],w++;(u<T||c)&&w--;u++)S=c*Mi+(V[u]||0),g[u]=S/G|0,c=S%G|0;else{for(c=Mi/(G[0]+1)|0,c>1&&(G=e(G,c),V=e(V,c),E=G.length,T=V.length),M=E,v=V.slice(0,E),y=v.length;y<E;)v[y++]=0;A=G.slice(),A.unshift(0),P=G[0],G[1]>=Mi/2&&++P;do c=0,a=t(G,v,E,y),a<0?(x=v[0],E!=y&&(x=x*Mi+(v[1]||0)),c=x/P|0,c>1?(c>=Mi&&(c=Mi-1),d=e(G,c),h=d.length,y=v.length,a=t(d,v,h,y),a==1&&(c--,r(d,E<h?A:G,h))):(c==0&&(a=c=1),d=G.slice()),h=d.length,h<y&&d.unshift(0),r(v,d,y),a==-1&&(y=v.length,a=t(G,v,E,y),a<1&&(c++,r(v,E<y?A:G,y))),y=v.length):a===0&&(c++,v=[0]),g[u++]=c,a&&v[0]?v[y++]=V[M]||0:(v=[V[M]],y=1);while((M++<T||v[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=l,en(m,o?s+ti(m)+1:s)}})();function hZ(e,t){var r,n,i,s,o,a,l=0,u=0,c=e.constructor,d=c.precision;if(ti(e)>16)throw Error(h$+ti(e));if(!e.s)return new c(Xs);for(Mn=!1,a=d,o=new c(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Af(2,u))/Math.LN10*2+5|0,a+=n,r=i=s=new c(Xs),c.precision=a;;){if(i=en(i.times(e),a),r=r.times(++l),o=s.plus(Pu(i,r,a)),ll(o.d).slice(0,a)===ll(s.d).slice(0,a)){for(;u--;)s=en(s.times(s),a);return c.precision=d,t==null?(Mn=!0,en(s,d)):s}s=o}}function ti(e){for(var t=e.e*mn,r=e.d[0];r>=10;r/=10)t++;return t}function DC(e,t,r){if(t>e.LN10.sd())throw Mn=!0,r&&(e.precision=r),Error(Fo+"LN10 precision limit exceeded");return en(new e(e.LN10),t)}function Dc(e){for(var t="";e--;)t+="0";return t}function R_(e,t){var r,n,i,s,o,a,l,u,c,d=1,h=10,m=e,g=m.d,v=m.constructor,y=v.precision;if(m.s<1)throw Error(Fo+(m.s?"NaN":"-Infinity"));if(m.eq(Xs))return new v(0);if(t==null?(Mn=!1,u=y):u=t,m.eq(10))return t==null&&(Mn=!0),DC(v,u);if(u+=h,v.precision=u,r=ll(g),n=r.charAt(0),s=ti(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=ll(m.d),n=r.charAt(0),d++;s=ti(m),n>1?(m=new v("0."+r),s++):m=new v(n+"."+r.slice(1))}else return l=DC(v,u+2,y).times(s+""),m=R_(new v(n+"."+r.slice(1)),u-h).plus(l),v.precision=y,t==null?(Mn=!0,en(m,y)):m;for(a=o=m=Pu(m.minus(Xs),m.plus(Xs),u),c=en(m.times(m),u),i=3;;){if(o=en(o.times(c),u),l=a.plus(Pu(o,new v(i),u)),ll(l.d).slice(0,u)===ll(a.d).slice(0,u))return a=a.times(2),s!==0&&(a=a.plus(DC(v,u+2,y).times(s+""))),a=Pu(a,new v(d),u),v.precision=y,t==null?(Mn=!0,en(a,y)):a;a=l,i+=2}}function VV(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=_g(r/mn),e.d=[],n=(r+1)%mn,r<0&&(n+=mn),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=mn;n<i;)e.d.push(+t.slice(n,n+=mn));t=t.slice(n),n=mn-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Mn&&(e.e>xx||e.e<-xx))throw Error(h$+r)}else e.s=0,e.e=0,e.d=[0];return e}function en(e,t,r){var n,i,s,o,a,l,u,c,d=e.d;for(o=1,s=d[0];s>=10;s/=10)o++;if(n=t-o,n<0)n+=mn,i=t,u=d[c=0];else{if(c=Math.ceil((n+1)/mn),s=d.length,c>=s)return e;for(u=s=d[c],o=1;s>=10;s/=10)o++;n%=mn,i=n-mn+o}if(r!==void 0&&(s=Af(10,o-i-1),a=u/s%10|0,l=t<0||d[c+1]!==void 0||u%s,l=r<4?(a||l)&&(r==0||r==(e.s<0?3:2)):a>5||a==5&&(r==4||l||r==6&&(n>0?i>0?u/Af(10,o-i):0:d[c-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return l?(s=ti(e),d.length=1,t=t-s-1,d[0]=Af(10,(mn-t%mn)%mn),e.e=_g(-t/mn)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=c,s=1,c--):(d.length=c+1,s=Af(10,mn-n),d[c]=i>0?(u/Af(10,o-i)%Af(10,i)|0)*s:0),l)for(;;)if(c==0){(d[0]+=s)==Mi&&(d[0]=1,++e.e);break}else{if(d[c]+=s,d[c]!=Mi)break;d[c--]=0,s=1}for(n=d.length;d[--n]===0;)d.pop();if(Mn&&(e.e>xx||e.e<-xx))throw Error(h$+ti(e));return e}function pZ(e,t){var r,n,i,s,o,a,l,u,c,d,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Mn?en(t,m):t;if(l=e.d,d=t.d,n=t.e,u=e.e,l=l.slice(),o=u-n,o){for(c=o<0,c?(r=l,o=-o,a=d.length):(r=d,n=u,a=l.length),i=Math.max(Math.ceil(m/mn),a)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=l.length,a=d.length,c=i<a,c&&(a=i),i=0;i<a;i++)if(l[i]!=d[i]){c=l[i]<d[i];break}o=0}for(c&&(r=l,l=d,d=r,t.s=-t.s),a=l.length,i=d.length-a;i>0;--i)l[a++]=0;for(i=d.length;i>o;){if(l[--i]<d[i]){for(s=i;s&&l[--s]===0;)l[s]=Mi-1;--l[s],l[i]+=Mi}l[i]-=d[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Mn?en(t,m):t):new h(0)}function sh(e,t,r){var n,i=ti(e),s=ll(e.d),o=s.length;return t?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+Dc(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Dc(-i-1)+s,r&&(n=r-o)>0&&(s+=Dc(n))):i>=o?(s+=Dc(i+1-o),r&&(n=r-i-1)>0&&(s=s+"."+Dc(n))):((n=i+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(s+="."),s+=Dc(n))),e.s<0?"-"+s:s}function WV(e,t){if(e.length>t)return e.length=t,!0}function mZ(e){var t,r,n;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(qf+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return VV(o,s.toString())}else if(typeof s!="string")throw Error(qf+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,RPe.test(s))VV(o,s);else throw Error(qf+s)}if(i.prototype=Ct,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=mZ,i.config=i.set=LPe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function LPe(e){if(!e||typeof e!="object")throw Error(Fo+"Object expected");var t,r,n,i=["precision",1,yg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(_g(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(qf+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(qf+r+": "+n);return this}var p$=mZ(DPe);Xs=new p$(1);const Hr=p$;function FPe(e){return VPe(e)||UPe(e)||zPe(e)||BPe()}function BPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zPe(e,t){if(e){if(typeof e=="string")return mk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mk(e,t)}}function UPe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function VPe(e){if(Array.isArray(e))return mk(e)}function mk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var WPe=function(t){return t},gZ={},vZ=function(t){return t===gZ},GV=function(t){return function r(){return arguments.length===0||arguments.length===1&&vZ(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},GPe=function e(t,r){return t===1?r:GV(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var o=i.filter(function(a){return a!==gZ}).length;return o>=t?r.apply(void 0,i):e(t-o,GV(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var c=i.map(function(d){return vZ(d)?l.shift():d});return r.apply(void 0,FPe(c).concat(l))}))})},z1=function(t){return GPe(t.length,t)},gk=function(t,r){for(var n=[],i=t;i<r;++i)n[i-t]=i;return n},qPe=z1(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),HPe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return WPe;var i=r.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(a,l){return l(a)},s.apply(void 0,arguments))}},vk=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},yZ=function(t){var r=null,n=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r&&s.every(function(a,l){return a===r[l]})||(r=s,n=t.apply(void 0,s)),n}};function KPe(e){var t;return e===0?t=1:t=Math.floor(new Hr(e).abs().log(10).toNumber())+1,t}function XPe(e,t,r){for(var n=new Hr(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var YPe=z1(function(e,t,r){var n=+e,i=+t;return n+r*(i-n)}),QPe=z1(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),JPe=z1(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const U1={rangeStep:XPe,getDigitCount:KPe,interpolateNumber:YPe,uninterpolateNumber:QPe,uninterpolateTruncation:JPe};function yk(e){return tEe(e)||eEe(e)||_Z(e)||ZPe()}function ZPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eEe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function tEe(e){if(Array.isArray(e))return _k(e)}function L_(e,t){return iEe(e)||nEe(e,t)||_Z(e,t)||rEe()}function rEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Z(e,t){if(e){if(typeof e=="string")return _k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _k(e,t)}}function _k(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nEe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,s=void 0;try{for(var o=e[Symbol.iterator](),a;!(n=(a=o.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,s=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(i)throw s}}return r}}function iEe(e){if(Array.isArray(e))return e}function bZ(e){var t=L_(e,2),r=t[0],n=t[1],i=r,s=n;return r>n&&(i=n,s=r),[i,s]}function wZ(e,t,r){if(e.lte(0))return new Hr(0);var n=U1.getDigitCount(e.toNumber()),i=new Hr(10).pow(n),s=e.div(i),o=n!==1?.05:.1,a=new Hr(Math.ceil(s.div(o).toNumber())).add(r).mul(o),l=a.mul(i);return t?l:new Hr(Math.ceil(l))}function sEe(e,t,r){var n=1,i=new Hr(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new Hr(10).pow(U1.getDigitCount(e)-1),i=new Hr(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new Hr(Math.floor(e)))}else e===0?i=new Hr(Math.floor((t-1)/2)):r||(i=new Hr(Math.floor(e)));var o=Math.floor((t-1)/2),a=HPe(qPe(function(l){return i.add(new Hr(l-o).mul(n)).toNumber()}),gk);return a(0,t)}function xZ(e,t,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Hr(0),tickMin:new Hr(0),tickMax:new Hr(0)};var s=wZ(new Hr(t).sub(e).div(r-1),n,i),o;e<=0&&t>=0?o=new Hr(0):(o=new Hr(e).add(t).div(2),o=o.sub(new Hr(o).mod(s)));var a=Math.ceil(o.sub(e).div(s).toNumber()),l=Math.ceil(new Hr(t).sub(o).div(s).toNumber()),u=a+l+1;return u>r?xZ(e,t,r,n,i+1):(u<r&&(l=t>0?l+(r-u):l,a=t>0?a:a+(r-u)),{step:s,tickMin:o.sub(new Hr(a).mul(s)),tickMax:o.add(new Hr(l).mul(s))})}function oEe(e){var t=L_(e,2),r=t[0],n=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),a=bZ([r,n]),l=L_(a,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var d=c===1/0?[u].concat(yk(gk(0,i-1).map(function(){return 1/0}))):[].concat(yk(gk(0,i-1).map(function(){return-1/0})),[c]);return r>n?vk(d):d}if(u===c)return sEe(u,i,s);var h=xZ(u,c,o,s),m=h.step,g=h.tickMin,v=h.tickMax,y=U1.rangeStep(g,v.add(new Hr(.1).mul(m)),m);return r>n?vk(y):y}function aEe(e,t){var r=L_(e,2),n=r[0],i=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=bZ([n,i]),a=L_(o,2),l=a[0],u=a[1];if(l===-1/0||u===1/0)return[n,i];if(l===u)return[l];var c=Math.max(t,2),d=wZ(new Hr(u).sub(l).div(c-1),s,0),h=[].concat(yk(U1.rangeStep(new Hr(l),new Hr(u).sub(new Hr(.99).mul(d)),d)),[u]);return n>i?vk(h):h}var lEe=yZ(oEe),uEe=yZ(aEe),cEe="Invariant failed";function Um(e,t){throw new Error(cEe)}var dEe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function Mx(){return Mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mx.apply(this,arguments)}function fEe(e,t){return gEe(e)||mEe(e,t)||pEe(e,t)||hEe()}function hEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pEe(e,t){if(e){if(typeof e=="string")return qV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qV(e,t)}}function qV(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mEe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function gEe(e){if(Array.isArray(e))return e}function vEe(e,t){if(e==null)return{};var r=yEe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bEe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SZ(n.key),n)}}function wEe(e,t,r){return t&&bEe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xEe(e,t,r){return t=Tx(t),MEe(e,MZ()?Reflect.construct(t,r||[],Tx(e).constructor):t.apply(e,r))}function MEe(e,t){if(t&&(Vm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TEe(e)}function TEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MZ=function(){return!!e})()}function Tx(e){return Tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tx(e)}function SEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bk(e,t)}function bk(e,t){return bk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},bk(e,t)}function TZ(e,t,r){return t=SZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SZ(e){var t=PEe(e,"string");return Vm(t)=="symbol"?t:t+""}function PEe(e,t){if(Vm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var m$=(function(e){function t(){return _Ee(this,t),xEe(this,t,arguments)}return SEe(t,e),wEe(t,[{key:"render",value:function(){var n=this.props,i=n.offset,s=n.layout,o=n.width,a=n.dataKey,l=n.data,u=n.dataPointFormatter,c=n.xAxis,d=n.yAxis,h=vEe(n,dEe),m=lr(h,!1);this.props.direction==="x"&&c.type!=="number"&&Um();var g=l.map(function(v){var y=u(v,a),x=y.x,w=y.y,S=y.value,M=y.errorVal;if(!M)return null;var T=[],P,E;if(Array.isArray(M)){var A=fEe(M,2);P=A[0],E=A[1]}else P=E=M;if(s==="vertical"){var L=c.scale,B=w+i,V=B+o,G=B-o,z=L(S-P),K=L(S+E);T.push({x1:K,y1:V,x2:K,y2:G}),T.push({x1:z,y1:B,x2:K,y2:B}),T.push({x1:z,y1:V,x2:z,y2:G})}else if(s==="horizontal"){var J=d.scale,X=x+i,Q=X-o,W=X+o,oe=J(S-P),ce=J(S+E);T.push({x1:Q,y1:ce,x2:W,y2:ce}),T.push({x1:X,y1:oe,x2:X,y2:ce}),T.push({x1:Q,y1:oe,x2:W,y2:oe})}return ye.createElement(Vn,Mx({className:"recharts-errorBar",key:"bar-".concat(T.map(function(D){return"".concat(D.x1,"-").concat(D.x2,"-").concat(D.y1,"-").concat(D.y2)}))},m),T.map(function(D){return ye.createElement("line",Mx({},D,{key:"line-".concat(D.x1,"-").concat(D.x2,"-").concat(D.y1,"-").concat(D.y2)}))}))});return ye.createElement(Vn,{className:"recharts-errorBars"},g)}}])})(ye.Component);TZ(m$,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});TZ(m$,"displayName","ErrorBar");function F_(e){"@babel/helpers - typeof";return F_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F_(e)}function HV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HV(Object(r),!0).forEach(function(n){EEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EEe(e,t,r){return t=CEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CEe(e){var t=AEe(e,"string");return F_(t)=="symbol"?t:t+""}function AEe(e,t){if(F_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(F_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PZ=function(t){var r=t.children,n=t.formattedGraphicalItems,i=t.legendWidth,s=t.legendContent,o=Co(r,bm);if(!o)return null;var a=bm.defaultProps,l=a!==void 0?wf(wf({},a),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(n||[]).reduce(function(c,d){var h=d.item,m=d.props,g=m.sectors||m.data||[];return c.concat(g.map(function(v){return{type:o.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(n||[]).map(function(c){var d=c.item,h=d.type.defaultProps,m=h!==void 0?wf(wf({},h),d.props):{},g=m.dataKey,v=m.name,y=m.legendType,x=m.hide;return{inactive:x,dataKey:g,type:l.iconType||y||"square",color:g$(d),value:v||g,payload:m}}),wf(wf(wf({},l),bm.getWithHeight(o,i)),{},{payload:u,item:o})};function B_(e){"@babel/helpers - typeof";return B_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B_(e)}function KV(e){return jEe(e)||IEe(e)||kEe(e)||OEe()}function OEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kEe(e,t){if(e){if(typeof e=="string")return wk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wk(e,t)}}function IEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jEe(e){if(Array.isArray(e))return wk(e)}function wk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function XV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Un(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XV(Object(r),!0).forEach(function(n){xm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xm(e,t,r){return t=$Ee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Ee(e){var t=NEe(e,"string");return B_(t)=="symbol"?t:t+""}function NEe(e,t){if(B_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(B_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ys(e,t,r){return yr(e)||yr(t)?r:ci(t)?Ta(e,t,r):hr(t)?t(e):r}function Zy(e,t,r,n){var i=jPe(e,function(a){return Ys(a,t)});if(r==="number"){var s=i.filter(function(a){return St(a)||parseFloat(a)});return s.length?[B1(s),F1(s)]:[1/0,-1/0]}var o=n?i.filter(function(a){return!yr(a)}):i;return o.map(function(a){return ci(a)||a instanceof Date?a:""})}var DEe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,a=(r=n?.length)!==null&&r!==void 0?r:0;if(a<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,u=0;u<a;u++){var c=u>0?i[u-1].coordinate:i[a-1].coordinate,d=i[u].coordinate,h=u>=a-1?i[0].coordinate:i[u+1].coordinate,m=void 0;if($o(d-c)!==$o(h-d)){var g=[];if($o(h-d)===$o(l[1]-l[0])){m=h;var v=d+l[1]-l[0];g[0]=Math.min(v,(v+c)/2),g[1]=Math.max(v,(v+c)/2)}else{m=c;var y=h+l[1]-l[0];g[0]=Math.min(d,(y+d)/2),g[1]=Math.max(d,(y+d)/2)}var x=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(t>x[0]&&t<=x[1]||t>=g[0]&&t<=g[1]){o=i[u].index;break}}else{var w=Math.min(c,h),S=Math.max(c,h);if(t>(w+d)/2&&t<=(S+d)/2){o=i[u].index;break}}}else for(var M=0;M<a;M++)if(M===0&&t<=(n[M].coordinate+n[M+1].coordinate)/2||M>0&&M<a-1&&t>(n[M].coordinate+n[M-1].coordinate)/2&&t<=(n[M].coordinate+n[M+1].coordinate)/2||M===a-1&&t>(n[M].coordinate+n[M-1].coordinate)/2){o=n[M].index;break}return o},g$=function(t){var r,n=t,i=n.type.displayName,s=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Un(Un({},t.type.defaultProps),t.props):t.props,o=s.stroke,a=s.fill,l;switch(i){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:a;break;default:l=a;break}return l},REe=function(t){var r=t.barSize,n=t.totalSize,i=t.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},a=Object.keys(s),l=0,u=a.length;l<u;l++)for(var c=s[a[l]].stackGroups,d=Object.keys(c),h=0,m=d.length;h<m;h++){var g=c[d[h]],v=g.items,y=g.cateAxisId,x=v.filter(function(E){return Tu(E.type).indexOf("Bar")>=0});if(x&&x.length){var w=x[0].type.defaultProps,S=w!==void 0?Un(Un({},w),x[0].props):x[0].props,M=S.barSize,T=S[y];o[T]||(o[T]=[]);var P=yr(M)?r:M;o[T].push({item:x[0],stackList:x.slice(1),barSize:yr(P)?void 0:Os(P,n,0)})}}return o},LEe=function(t){var r=t.barGap,n=t.barCategoryGap,i=t.bandSize,s=t.sizeList,o=s===void 0?[]:s,a=t.maxBarSize,l=o.length;if(l<1)return null;var u=Os(r,i,0,!0),c,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=i/l,g=o.reduce(function(M,T){return M+T.barSize||0},0);g+=(l-1)*u,g>=i&&(g-=(l-1)*u,u=0),g>=i&&m>0&&(h=!0,m*=.9,g=l*m);var v=(i-g)/2>>0,y={offset:v-u,size:0};c=o.reduce(function(M,T){var P={item:T.item,position:{offset:y.offset+y.size+u,size:h?m:T.barSize}},E=[].concat(KV(M),[P]);return y=E[E.length-1].position,T.stackList&&T.stackList.length&&T.stackList.forEach(function(A){E.push({item:A,position:y})}),E},d)}else{var x=Os(n,i,0,!0);i-2*x-(l-1)*u<=0&&(u=0);var w=(i-2*x-(l-1)*u)/l;w>1&&(w>>=0);var S=a===+a?Math.min(w,a):w;c=o.reduce(function(M,T,P){var E=[].concat(KV(M),[{item:T.item,position:{offset:x+(w+u)*P+(w-S)/2,size:S}}]);return T.stackList&&T.stackList.length&&T.stackList.forEach(function(A){E.push({item:A,position:E[E.length-1].position})}),E},d)}return c},FEe=function(t,r,n,i){var s=n.children,o=n.width,a=n.margin,l=o-(a.left||0)-(a.right||0),u=PZ({children:s,legendWidth:l});if(u){var c=i||{},d=c.width,h=c.height,m=u.align,g=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&g==="middle")&&m!=="center"&&St(t[m]))return Un(Un({},t),{},xm({},m,t[m]+(d||0)));if((v==="horizontal"||v==="vertical"&&m==="center")&&g!=="middle"&&St(t[g]))return Un(Un({},t),{},xm({},g,t[g]+(h||0)))}return t},BEe=function(t,r,n){return yr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},EZ=function(t,r,n,i,s){var o=r.props.children,a=fl(o,m$).filter(function(u){return BEe(i,s,u.props.direction)});if(a&&a.length){var l=a.map(function(u){return u.props.dataKey});return t.reduce(function(u,c){var d=Ys(c,n);if(yr(d))return u;var h=Array.isArray(d)?[B1(d),F1(d)]:[d,d],m=l.reduce(function(g,v){var y=Ys(c,v,0),x=h[0]-Math.abs(Array.isArray(y)?y[0]:y),w=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(x,g[0]),Math.max(w,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},zEe=function(t,r,n,i,s){var o=r.map(function(a){return EZ(t,a,n,s,i)}).filter(function(a){return!yr(a)});return o&&o.length?o.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},CZ=function(t,r,n,i,s){var o=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&EZ(t,l,u,i)||Zy(t,u,n,s)});if(n==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var a={};return o.reduce(function(l,u){for(var c=0,d=u.length;c<d;c++)a[u[c]]||(a[u[c]]=!0,l.push(u[c]));return l},[])},AZ=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},Fy=function(t,r,n){if(!t)return null;var i=t.scale,s=t.duplicateDomain,o=t.type,a=t.range,l=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=t.axisType==="angleAxis"&&a?.length>=2?$o(a[0]-a[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var c=(t.ticks||t.niceTicks).map(function(d){var h=s?s.indexOf(d):d;return{coordinate:i(h)+u,value:d,offset:u}});return c.filter(function(d){return!x0(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,h){return{coordinate:i(d)+u,value:d,index:h,offset:u}}):i.ticks&&!n?i.ticks(t.tickCount).map(function(d){return{coordinate:i(d)+u,value:d,offset:u}}):i.domain().map(function(d,h){return{coordinate:i(d)+u,value:s?s[d]:d,index:h,offset:u}})},RC=new WeakMap,tw=function(t,r){if(typeof r!="function")return t;RC.has(t)||RC.set(t,new WeakMap);var n=RC.get(t);if(n.has(r))return n.get(r);var i=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},UEe=function(t,r,n){var i=t.scale,s=t.type,o=t.layout,a=t.axisType;if(i==="auto")return o==="radial"&&a==="radiusAxis"?{scale:I_(),realScaleType:"band"}:o==="radial"&&a==="angleAxis"?{scale:yx(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0)?{scale:Jy(),realScaleType:"point"}:s==="category"?{scale:I_(),realScaleType:"band"}:{scale:yx(),realScaleType:"linear"};if(w0(i)){var l="scale".concat(T1(i));return{scale:($V[l]||Jy)(),realScaleType:$V[l]?l:"point"}}return hr(i)?{scale:i}:{scale:Jy(),realScaleType:"point"}},YV=1e-4,VEe=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,i=t.range(),s=Math.min(i[0],i[1])-YV,o=Math.max(i[0],i[1])+YV,a=t(r[0]),l=t(r[n-1]);(a<s||a>o||l<s||l>o)&&t.domain([r[0],r[n-1]])}},WEe=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var s=0,o=0,a=0;a<r;++a){var l=x0(t[a][n][1])?t[a][n][0]:t[a][n][1];l>=0?(t[a][n][0]=s,t[a][n][1]=s+l,s=t[a][n][1]):(t[a][n][0]=o,t[a][n][1]=o+l,o=t[a][n][1])}},GEe=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var s=0,o=0;o<r;++o){var a=x0(t[o][n][1])?t[o][n][0]:t[o][n][1];a>=0?(t[o][n][0]=s,t[o][n][1]=s+a,s=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},qEe={sign:WEe,expand:Iwe,none:jm,silhouette:jwe,wiggle:$we,positive:GEe},HEe=function(t,r,n){var i=r.map(function(a){return a.props.dataKey}),s=qEe[n],o=kwe().keys(i).value(function(a,l){return+Ys(a,l,0)}).order(QO).offset(s);return o(t)},KEe=function(t,r,n,i,s,o){if(!t)return null;var a=o?r.reverse():r,l={},u=a.reduce(function(d,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Un(Un({},h.type.defaultProps),h.props):h.props,v=g.stackId,y=g.hide;if(y)return d;var x=g[n],w=d[x]||{hasStack:!1,stackGroups:{}};if(ci(v)){var S=w.stackGroups[v]||{numericAxisId:n,cateAxisId:i,items:[]};S.items.push(h),w.hasStack=!0,w.stackGroups[v]=S}else w.stackGroups[x1("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[h]};return Un(Un({},d),{},xm({},x,w))},l),c={};return Object.keys(u).reduce(function(d,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(v,y){var x=m.stackGroups[y];return Un(Un({},v),{},xm({},y,{numericAxisId:n,cateAxisId:i,items:x.items,stackedData:HEe(t,x.items,s)}))},g)}return Un(Un({},d),{},xm({},h,m))},c)},XEe=function(t,r){var n=r.realScaleType,i=r.type,s=r.tickCount,o=r.originalDomain,a=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var c=lEe(u,s,a);return t.domain([B1(c),F1(c)]),{niceTicks:c}}if(s&&i==="number"){var d=t.domain(),h=uEe(d,s,a);return{niceTicks:h}}return null},YEe=function(t,r){var n,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Un(Un({},t.type.defaultProps),t.props):t.props,s=i.stackId;if(ci(s)){var o=r[s];if(o){var a=o.items.indexOf(t);return a>=0?o.stackedData[a]:null}}return null},QEe=function(t){return t.reduce(function(r,n){return[B1(n.concat([r[0]]).filter(St)),F1(n.concat([r[1]]).filter(St))]},[1/0,-1/0])},OZ=function(t,r,n){return Object.keys(t).reduce(function(i,s){var o=t[s],a=o.stackedData,l=a.reduce(function(u,c){var d=QEe(c.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},QV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,JV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xk=function(t,r,n){if(hr(t))return t(r,n);if(!Array.isArray(t))return r;var i=[];if(St(t[0]))i[0]=n?t[0]:Math.min(t[0],r[0]);else if(QV.test(t[0])){var s=+QV.exec(t[0])[1];i[0]=r[0]-s}else hr(t[0])?i[0]=t[0](r[0]):i[0]=r[0];if(St(t[1]))i[1]=n?t[1]:Math.max(t[1],r[1]);else if(JV.test(t[1])){var o=+JV.exec(t[1])[1];i[1]=r[1]+o}else hr(t[1])?i[1]=t[1](r[1]):i[1]=r[1];return i},Mk=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&r&&r.length>=2){for(var s=zj(r,function(d){return d.coordinate}),o=1/0,a=1,l=s.length;a<l;a++){var u=s[a],c=s[a-1];o=Math.min((u.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},ZV=function(t,r,n){return!t||!t.length||f$(t,Ta(n,"type.defaultProps.domain"))?r:t},JEe=function(t,r){var n=t.type.defaultProps?Un(Un({},t.type.defaultProps),t.props):t.props,i=n.dataKey,s=n.name,o=n.unit,a=n.formatter,l=n.tooltipType,u=n.chartType,c=n.hide;return Un(Un({},lr(t,!1)),{},{dataKey:i,unit:o,formatter:a,name:s||i,color:g$(t),value:Ys(r,i),type:l,payload:r,chartType:u,hide:c})};function z_(e){"@babel/helpers - typeof";return z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z_(e)}function eW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function bu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eW(Object(r),!0).forEach(function(n){kZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kZ(e,t,r){return t=ZEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZEe(e){var t=eCe(e,"string");return z_(t)=="symbol"?t:t+""}function eCe(e,t){if(z_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(z_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tCe(e,t){return sCe(e)||iCe(e,t)||nCe(e,t)||rCe()}function rCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nCe(e,t){if(e){if(typeof e=="string")return tW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tW(e,t)}}function tW(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iCe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function sCe(e){if(Array.isArray(e))return e}var Sx=Math.PI/180,oCe=function(t){return t*180/Math.PI},un=function(t,r,n,i){return{x:t+Math.cos(-Sx*i)*n,y:r+Math.sin(-Sx*i)*n}},IZ=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},aCe=function(t,r,n,i,s){var o=t.width,a=t.height,l=t.startAngle,u=t.endAngle,c=Os(t.cx,o,o/2),d=Os(t.cy,a,a/2),h=IZ(o,a,n),m=Os(t.innerRadius,h,0),g=Os(t.outerRadius,h,h*.8),v=Object.keys(r);return v.reduce(function(y,x){var w=r[x],S=w.domain,M=w.reversed,T;if(yr(w.range))i==="angleAxis"?T=[l,u]:i==="radiusAxis"&&(T=[m,g]),M&&(T=[T[1],T[0]]);else{T=w.range;var P=T,E=tCe(P,2);l=E[0],u=E[1]}var A=UEe(w,s),L=A.realScaleType,B=A.scale;B.domain(S).range(T),VEe(B);var V=XEe(B,bu(bu({},w),{},{realScaleType:L})),G=bu(bu(bu({},w),V),{},{range:T,radius:g,realScaleType:L,scale:B,cx:c,cy:d,innerRadius:m,outerRadius:g,startAngle:l,endAngle:u});return bu(bu({},y),{},kZ({},x,G))},{})},lCe=function(t,r){var n=t.x,i=t.y,s=r.x,o=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(i-o,2))},uCe=function(t,r){var n=t.x,i=t.y,s=r.cx,o=r.cy,a=lCe({x:n,y:i},{x:s,y:o});if(a<=0)return{radius:a};var l=(n-s)/a,u=Math.acos(l);return i>o&&(u=2*Math.PI-u),{radius:a,angle:oCe(u),angleInRadian:u}},cCe=function(t){var r=t.startAngle,n=t.endAngle,i=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(i,s);return{startAngle:r-o*360,endAngle:n-o*360}},dCe=function(t,r){var n=r.startAngle,i=r.endAngle,s=Math.floor(n/360),o=Math.floor(i/360),a=Math.min(s,o);return t+a*360},rW=function(t,r){var n=t.x,i=t.y,s=uCe({x:n,y:i},r),o=s.radius,a=s.angle,l=r.innerRadius,u=r.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var c=cCe(r),d=c.startAngle,h=c.endAngle,m=a,g;if(d<=h){for(;m>h;)m-=360;for(;m<d;)m+=360;g=m>=d&&m<=h}else{for(;m>d;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=d}return g?bu(bu({},r),{},{radius:o,angle:dCe(m,r)}):null},jZ=function(t){return!$.isValidElement(t)&&!hr(t)&&typeof t!="boolean"?t.className:""};function U_(e){"@babel/helpers - typeof";return U_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U_(e)}var fCe=["offset"];function hCe(e){return vCe(e)||gCe(e)||mCe(e)||pCe()}function pCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mCe(e,t){if(e){if(typeof e=="string")return Tk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tk(e,t)}}function gCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vCe(e){if(Array.isArray(e))return Tk(e)}function Tk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yCe(e,t){if(e==null)return{};var r=_Ce(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _Ce(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function nW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ai(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nW(Object(r),!0).forEach(function(n){bCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bCe(e,t,r){return t=wCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wCe(e){var t=xCe(e,"string");return U_(t)=="symbol"?t:t+""}function xCe(e,t){if(U_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(U_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V_(){return V_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V_.apply(this,arguments)}var MCe=function(t){var r=t.value,n=t.formatter,i=yr(t.children)?r:t.children;return hr(n)?n(i):i},TCe=function(t,r){var n=$o(r-t),i=Math.min(Math.abs(r-t),360);return n*i},SCe=function(t,r,n){var i=t.position,s=t.viewBox,o=t.offset,a=t.className,l=s,u=l.cx,c=l.cy,d=l.innerRadius,h=l.outerRadius,m=l.startAngle,g=l.endAngle,v=l.clockWise,y=(d+h)/2,x=TCe(m,g),w=x>=0?1:-1,S,M;i==="insideStart"?(S=m+w*o,M=v):i==="insideEnd"?(S=g-w*o,M=!v):i==="end"&&(S=g+w*o,M=v),M=x<=0?M:!M;var T=un(u,c,y,S),P=un(u,c,y,S+(M?1:-1)*359),E="M".concat(T.x,",").concat(T.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(M?0:1,`,
    `).concat(P.x,",").concat(P.y),A=yr(t.id)?x1("recharts-radial-line-"):t.id;return ye.createElement("text",V_({},n,{dominantBaseline:"central",className:br("recharts-radial-bar-label",a)}),ye.createElement("defs",null,ye.createElement("path",{id:A,d:E})),ye.createElement("textPath",{xlinkHref:"#".concat(A)},r))},PCe=function(t){var r=t.viewBox,n=t.offset,i=t.position,s=r,o=s.cx,a=s.cy,l=s.innerRadius,u=s.outerRadius,c=s.startAngle,d=s.endAngle,h=(c+d)/2;if(i==="outside"){var m=un(o,a,u+n,h),g=m.x,v=m.y;return{x:g,y:v,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var y=(l+u)/2,x=un(o,a,y,h),w=x.x,S=x.y;return{x:w,y:S,textAnchor:"middle",verticalAnchor:"middle"}},ECe=function(t){var r=t.viewBox,n=t.parentViewBox,i=t.offset,s=t.position,o=r,a=o.x,l=o.y,u=o.width,c=o.height,d=c>=0?1:-1,h=d*i,m=d>0?"end":"start",g=d>0?"start":"end",v=u>=0?1:-1,y=v*i,x=v>0?"end":"start",w=v>0?"start":"end";if(s==="top"){var S={x:a+u/2,y:l-d*i,textAnchor:"middle",verticalAnchor:m};return ai(ai({},S),n?{height:Math.max(l-n.y,0),width:u}:{})}if(s==="bottom"){var M={x:a+u/2,y:l+c+h,textAnchor:"middle",verticalAnchor:g};return ai(ai({},M),n?{height:Math.max(n.y+n.height-(l+c),0),width:u}:{})}if(s==="left"){var T={x:a-y,y:l+c/2,textAnchor:x,verticalAnchor:"middle"};return ai(ai({},T),n?{width:Math.max(T.x-n.x,0),height:c}:{})}if(s==="right"){var P={x:a+u+y,y:l+c/2,textAnchor:w,verticalAnchor:"middle"};return ai(ai({},P),n?{width:Math.max(n.x+n.width-P.x,0),height:c}:{})}var E=n?{width:u,height:c}:{};return s==="insideLeft"?ai({x:a+y,y:l+c/2,textAnchor:w,verticalAnchor:"middle"},E):s==="insideRight"?ai({x:a+u-y,y:l+c/2,textAnchor:x,verticalAnchor:"middle"},E):s==="insideTop"?ai({x:a+u/2,y:l+h,textAnchor:"middle",verticalAnchor:g},E):s==="insideBottom"?ai({x:a+u/2,y:l+c-h,textAnchor:"middle",verticalAnchor:m},E):s==="insideTopLeft"?ai({x:a+y,y:l+h,textAnchor:w,verticalAnchor:g},E):s==="insideTopRight"?ai({x:a+u-y,y:l+h,textAnchor:x,verticalAnchor:g},E):s==="insideBottomLeft"?ai({x:a+y,y:l+c-h,textAnchor:w,verticalAnchor:m},E):s==="insideBottomRight"?ai({x:a+u-y,y:l+c-h,textAnchor:x,verticalAnchor:m},E):mg(s)&&(St(s.x)||Ff(s.x))&&(St(s.y)||Ff(s.y))?ai({x:a+Os(s.x,u),y:l+Os(s.y,c),textAnchor:"end",verticalAnchor:"end"},E):ai({x:a+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},E)},CCe=function(t){return"cx"in t&&St(t.cx)};function Li(e){var t=e.offset,r=t===void 0?5:t,n=yCe(e,fCe),i=ai({offset:r},n),s=i.viewBox,o=i.position,a=i.value,l=i.children,u=i.content,c=i.className,d=c===void 0?"":c,h=i.textBreakAll;if(!s||yr(a)&&yr(l)&&!$.isValidElement(u)&&!hr(u))return null;if($.isValidElement(u))return $.cloneElement(u,i);var m;if(hr(u)){if(m=$.createElement(u,i),$.isValidElement(m))return m}else m=MCe(i);var g=CCe(s),v=lr(i,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return SCe(i,m,v);var y=g?PCe(i):ECe(i);return ye.createElement(Lm,V_({className:br("recharts-label",d)},v,y,{breakAll:h}),m)}Li.displayName="Label";var $Z=function(t){var r=t.cx,n=t.cy,i=t.angle,s=t.startAngle,o=t.endAngle,a=t.r,l=t.radius,u=t.innerRadius,c=t.outerRadius,d=t.x,h=t.y,m=t.top,g=t.left,v=t.width,y=t.height,x=t.clockWise,w=t.labelViewBox;if(w)return w;if(St(v)&&St(y)){if(St(d)&&St(h))return{x:d,y:h,width:v,height:y};if(St(m)&&St(g))return{x:m,y:g,width:v,height:y}}return St(d)&&St(h)?{x:d,y:h,width:0,height:0}:St(r)&&St(n)?{cx:r,cy:n,startAngle:s||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:c||l||a||0,clockWise:x}:t.viewBox?t.viewBox:{}},ACe=function(t,r){return t?t===!0?ye.createElement(Li,{key:"label-implicit",viewBox:r}):ci(t)?ye.createElement(Li,{key:"label-implicit",viewBox:r,value:t}):$.isValidElement(t)?t.type===Li?$.cloneElement(t,{key:"label-implicit",viewBox:r}):ye.createElement(Li,{key:"label-implicit",content:t,viewBox:r}):hr(t)?ye.createElement(Li,{key:"label-implicit",content:t,viewBox:r}):mg(t)?ye.createElement(Li,V_({viewBox:r},t,{key:"label-implicit"})):null:null},OCe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var i=t.children,s=$Z(t),o=fl(i,Li).map(function(l,u){return $.cloneElement(l,{viewBox:r||s,key:"label-".concat(u)})});if(!n)return o;var a=ACe(t.label,r||s);return[a].concat(hCe(o))};Li.parseViewBox=$Z;Li.renderCallByParent=OCe;var LC,iW;function kCe(){if(iW)return LC;iW=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return LC=e,LC}var ICe=kCe();const jCe=Dr(ICe);function W_(e){"@babel/helpers - typeof";return W_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W_(e)}var $Ce=["valueAccessor"],NCe=["data","dataKey","clockWise","id","textBreakAll"];function DCe(e){return BCe(e)||FCe(e)||LCe(e)||RCe()}function RCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LCe(e,t){if(e){if(typeof e=="string")return Sk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sk(e,t)}}function FCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BCe(e){if(Array.isArray(e))return Sk(e)}function Sk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Px(){return Px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Px.apply(this,arguments)}function sW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function oW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sW(Object(r),!0).forEach(function(n){zCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zCe(e,t,r){return t=UCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UCe(e){var t=VCe(e,"string");return W_(t)=="symbol"?t:t+""}function VCe(e,t){if(W_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(W_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aW(e,t){if(e==null)return{};var r=WCe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WCe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var GCe=function(t){return Array.isArray(t.value)?jCe(t.value):t.value};function Hf(e){var t=e.valueAccessor,r=t===void 0?GCe:t,n=aW(e,$Ce),i=n.data,s=n.dataKey,o=n.clockWise,a=n.id,l=n.textBreakAll,u=aW(n,NCe);return!i||!i.length?null:ye.createElement(Vn,{className:"recharts-label-list"},i.map(function(c,d){var h=yr(s)?r(c,d):Ys(c&&c.payload,s),m=yr(a)?{}:{id:"".concat(a,"-").concat(d)};return ye.createElement(Li,Px({},lr(c,!0),u,m,{parentViewBox:c.parentViewBox,value:h,textBreakAll:l,viewBox:Li.parseViewBox(yr(o)?c:oW(oW({},c),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}Hf.displayName="LabelList";function qCe(e,t){return e?e===!0?ye.createElement(Hf,{key:"labelList-implicit",data:t}):ye.isValidElement(e)||hr(e)?ye.createElement(Hf,{key:"labelList-implicit",data:t,content:e}):mg(e)?ye.createElement(Hf,Px({data:t},e,{key:"labelList-implicit"})):null:null}function HCe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,i=fl(n,Hf).map(function(o,a){return $.cloneElement(o,{data:t,key:"labelList-".concat(a)})});if(!r)return i;var s=qCe(e.label,t);return[s].concat(DCe(i))}Hf.renderCallByParent=HCe;function G_(e){"@babel/helpers - typeof";return G_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G_(e)}function Pk(){return Pk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pk.apply(this,arguments)}function lW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function uW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lW(Object(r),!0).forEach(function(n){KCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KCe(e,t,r){return t=XCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XCe(e){var t=YCe(e,"string");return G_(t)=="symbol"?t:t+""}function YCe(e,t){if(G_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(G_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QCe=function(t,r){var n=$o(r-t),i=Math.min(Math.abs(r-t),359.999);return n*i},rw=function(t){var r=t.cx,n=t.cy,i=t.radius,s=t.angle,o=t.sign,a=t.isExternal,l=t.cornerRadius,u=t.cornerIsExternal,c=l*(a?1:-1)+i,d=Math.asin(l/c)/Sx,h=u?s:s+o*d,m=un(r,n,c,h),g=un(r,n,i,h),v=u?s-o*d:s,y=un(r,n,c*Math.cos(d*Sx),v);return{center:m,circleTangency:g,lineTangency:y,theta:d}},NZ=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,s=t.outerRadius,o=t.startAngle,a=t.endAngle,l=QCe(o,a),u=o+l,c=un(r,n,s,o),d=un(r,n,s,u),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var m=un(r,n,i,o),g=un(r,n,i,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},JCe=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,a=t.forceCornerRadius,l=t.cornerIsExternal,u=t.startAngle,c=t.endAngle,d=$o(c-u),h=rw({cx:r,cy:n,radius:s,angle:u,sign:d,cornerRadius:o,cornerIsExternal:l}),m=h.circleTangency,g=h.lineTangency,v=h.theta,y=rw({cx:r,cy:n,radius:s,angle:c,sign:-d,cornerRadius:o,cornerIsExternal:l}),x=y.circleTangency,w=y.lineTangency,S=y.theta,M=l?Math.abs(u-c):Math.abs(u-c)-v-S;if(M<0)return a?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):NZ({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:u,endAngle:c});var T="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(M>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var P=rw({cx:r,cy:n,radius:i,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),E=P.circleTangency,A=P.lineTangency,L=P.theta,B=rw({cx:r,cy:n,radius:i,angle:c,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),V=B.circleTangency,G=B.lineTangency,z=B.theta,K=l?Math.abs(u-c):Math.abs(u-c)-L-z;if(K<0&&o===0)return"".concat(T,"L").concat(r,",").concat(n,"Z");T+="L".concat(G.x,",").concat(G.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(V.x,",").concat(V.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(K>180),",").concat(+(d>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,"Z")}else T+="L".concat(r,",").concat(n,"Z");return T},ZCe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},DZ=function(t){var r=uW(uW({},ZCe),t),n=r.cx,i=r.cy,s=r.innerRadius,o=r.outerRadius,a=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,c=r.startAngle,d=r.endAngle,h=r.className;if(o<s||c===d)return null;var m=br("recharts-sector",h),g=o-s,v=Os(a,g,0,!0),y;return v>0&&Math.abs(c-d)<360?y=JCe({cx:n,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(v,g/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:d}):y=NZ({cx:n,cy:i,innerRadius:s,outerRadius:o,startAngle:c,endAngle:d}),ye.createElement("path",Pk({},lr(r,!0),{className:m,d:y,role:"img"}))};function q_(e){"@babel/helpers - typeof";return q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q_(e)}function Ek(){return Ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ek.apply(this,arguments)}function cW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cW(Object(r),!0).forEach(function(n){eAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eAe(e,t,r){return t=tAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tAe(e){var t=rAe(e,"string");return q_(t)=="symbol"?t:t+""}function rAe(e,t){if(q_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(q_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fW={curveBasisClosed:bwe,curveBasisOpen:wwe,curveBasis:_we,curveBumpX:swe,curveBumpY:owe,curveLinearClosed:xwe,curveLinear:P1,curveMonotoneX:Mwe,curveMonotoneY:Twe,curveNatural:Swe,curveStep:Pwe,curveStepAfter:Cwe,curveStepBefore:Ewe},nw=function(t){return t.x===+t.x&&t.y===+t.y},Ey=function(t){return t.x},Cy=function(t){return t.y},nAe=function(t,r){if(hr(t))return t;var n="curve".concat(T1(t));return(n==="curveMonotone"||n==="curveBump")&&r?fW["".concat(n).concat(r==="vertical"?"Y":"X")]:fW[n]||P1},iAe=function(t){var r=t.type,n=r===void 0?"linear":r,i=t.points,s=i===void 0?[]:i,o=t.baseLine,a=t.layout,l=t.connectNulls,u=l===void 0?!1:l,c=nAe(n,a),d=u?s.filter(function(v){return nw(v)}):s,h;if(Array.isArray(o)){var m=u?o.filter(function(v){return nw(v)}):o,g=d.map(function(v,y){return dW(dW({},v),{},{base:m[y]})});return a==="vertical"?h=Kb().y(Cy).x1(Ey).x0(function(v){return v.base.x}):h=Kb().x(Ey).y1(Cy).y0(function(v){return v.base.y}),h.defined(nw).curve(c),h(g)}return a==="vertical"&&St(o)?h=Kb().y(Cy).x1(Ey).x0(o):St(o)?h=Kb().x(Ey).y1(Cy).y0(o):h=FQ().x(Ey).y(Cy),h.defined(nw).curve(c),h(d)},Ck=function(t){var r=t.className,n=t.points,i=t.path,s=t.pathRef;if((!n||!n.length)&&!i)return null;var o=n&&n.length?iAe(t):i;return ye.createElement("path",Ek({},lr(t,!1),tx(t),{className:br("recharts-curve",r),d:o,ref:s}))},FC={exports:{}},BC,hW;function sAe(){if(hW)return BC;hW=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return BC=e,BC}var zC,pW;function oAe(){if(pW)return zC;pW=1;var e=sAe();function t(){}function r(){}return r.resetWarningCache=t,zC=function(){function n(o,a,l,u,c,d){if(d!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}n.isRequired=n;function i(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:t};return s.PropTypes=s,s},zC}var mW;function aAe(){return mW||(mW=1,FC.exports=oAe()()),FC.exports}var lAe=aAe();const ar=Dr(lAe);var uAe=Object.getOwnPropertyNames,cAe=Object.getOwnPropertySymbols,dAe=Object.prototype.hasOwnProperty;function gW(e,t){return function(n,i,s){return e(n,i,s)&&t(n,i,s)}}function iw(e){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,i);var s=i.cache,o=s.get(r),a=s.get(n);if(o&&a)return o===n&&a===r;s.set(r,n),s.set(n,r);var l=e(r,n,i);return s.delete(r),s.delete(n),l}}function vW(e){return uAe(e).concat(cAe(e))}var RZ=Object.hasOwn||(function(e,t){return dAe.call(e,t)});function bg(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var LZ="_owner",yW=Object.getOwnPropertyDescriptor,_W=Object.keys;function fAe(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function hAe(e,t){return bg(e.getTime(),t.getTime())}function bW(e,t,r){if(e.size!==t.size)return!1;for(var n={},i=e.entries(),s=0,o,a;(o=i.next())&&!o.done;){for(var l=t.entries(),u=!1,c=0;(a=l.next())&&!a.done;){var d=o.value,h=d[0],m=d[1],g=a.value,v=g[0],y=g[1];!u&&!n[c]&&(u=r.equals(h,v,s,c,e,t,r)&&r.equals(m,y,h,v,e,t,r))&&(n[c]=!0),c++}if(!u)return!1;s++}return!0}function pAe(e,t,r){var n=_W(e),i=n.length;if(_W(t).length!==i)return!1;for(var s;i-- >0;)if(s=n[i],s===LZ&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!RZ(t,s)||!r.equals(e[s],t[s],s,s,e,t,r))return!1;return!0}function Ay(e,t,r){var n=vW(e),i=n.length;if(vW(t).length!==i)return!1;for(var s,o,a;i-- >0;)if(s=n[i],s===LZ&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!RZ(t,s)||!r.equals(e[s],t[s],s,s,e,t,r)||(o=yW(e,s),a=yW(t,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function mAe(e,t){return bg(e.valueOf(),t.valueOf())}function gAe(e,t){return e.source===t.source&&e.flags===t.flags}function wW(e,t,r){if(e.size!==t.size)return!1;for(var n={},i=e.values(),s,o;(s=i.next())&&!s.done;){for(var a=t.values(),l=!1,u=0;(o=a.next())&&!o.done;)!l&&!n[u]&&(l=r.equals(s.value,o.value,s.value,o.value,e,t,r))&&(n[u]=!0),u++;if(!l)return!1}return!0}function vAe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var yAe="[object Arguments]",_Ae="[object Boolean]",bAe="[object Date]",wAe="[object Map]",xAe="[object Number]",MAe="[object Object]",TAe="[object RegExp]",SAe="[object Set]",PAe="[object String]",EAe=Array.isArray,xW=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,MW=Object.assign,CAe=Object.prototype.toString.call.bind(Object.prototype.toString);function AAe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,i=e.areObjectsEqual,s=e.arePrimitiveWrappersEqual,o=e.areRegExpsEqual,a=e.areSetsEqual,l=e.areTypedArraysEqual;return function(c,d,h){if(c===d)return!0;if(c==null||d==null||typeof c!="object"||typeof d!="object")return c!==c&&d!==d;var m=c.constructor;if(m!==d.constructor)return!1;if(m===Object)return i(c,d,h);if(EAe(c))return t(c,d,h);if(xW!=null&&xW(c))return l(c,d,h);if(m===Date)return r(c,d,h);if(m===RegExp)return o(c,d,h);if(m===Map)return n(c,d,h);if(m===Set)return a(c,d,h);var g=CAe(c);return g===bAe?r(c,d,h):g===TAe?o(c,d,h):g===wAe?n(c,d,h):g===SAe?a(c,d,h):g===MAe?typeof c.then!="function"&&typeof d.then!="function"&&i(c,d,h):g===yAe?i(c,d,h):g===_Ae||g===xAe||g===PAe?s(c,d,h):!1}}function OAe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?Ay:fAe,areDatesEqual:hAe,areMapsEqual:n?gW(bW,Ay):bW,areObjectsEqual:n?Ay:pAe,arePrimitiveWrappersEqual:mAe,areRegExpsEqual:gAe,areSetsEqual:n?gW(wW,Ay):wW,areTypedArraysEqual:n?Ay:vAe};if(r&&(i=MW({},i,r(i))),t){var s=iw(i.areArraysEqual),o=iw(i.areMapsEqual),a=iw(i.areObjectsEqual),l=iw(i.areSetsEqual);i=MW({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return i}function kAe(e){return function(t,r,n,i,s,o,a){return e(t,r,a)}}function IAe(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,s=e.strict;if(n)return function(l,u){var c=n(),d=c.cache,h=d===void 0?t?new WeakMap:void 0:d,m=c.meta;return r(l,u,{cache:h,equals:i,meta:m,strict:s})};if(t)return function(l,u){return r(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(l,u){return r(l,u,o)}}var jAe=ld();ld({strict:!0});ld({circular:!0});ld({circular:!0,strict:!0});ld({createInternalComparator:function(){return bg}});ld({strict:!0,createInternalComparator:function(){return bg}});ld({circular:!0,createInternalComparator:function(){return bg}});ld({circular:!0,createInternalComparator:function(){return bg},strict:!0});function ld(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,s=e.strict,o=s===void 0?!1:s,a=OAe(e),l=AAe(a),u=n?n(l):kAe(l);return IAe({circular:r,comparator:l,createState:i,equals:u,strict:o})}function $Ae(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function TW(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(s){r<0&&(r=s),s-r>t?(e(s),r=-1):$Ae(i)};requestAnimationFrame(n)}function Ak(e){"@babel/helpers - typeof";return Ak=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ak(e)}function NAe(e){return FAe(e)||LAe(e)||RAe(e)||DAe()}function DAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RAe(e,t){if(e){if(typeof e=="string")return SW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SW(e,t)}}function SW(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function LAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FAe(e){if(Array.isArray(e))return e}function BAe(){var e={},t=function(){return null},r=!1,n=function i(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,a=NAe(o),l=a[0],u=a.slice(1);if(typeof l=="number"){TW(i.bind(null,u),l);return}i(l),TW(i.bind(null,u));return}Ak(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,n(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function H_(e){"@babel/helpers - typeof";return H_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H_(e)}function PW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function EW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PW(Object(r),!0).forEach(function(n){FZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FZ(e,t,r){return t=zAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zAe(e){var t=UAe(e,"string");return H_(t)==="symbol"?t:String(t)}function UAe(e,t){if(H_(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(H_(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VAe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,i){return n.filter(function(s){return i.includes(s)})})},WAe=function(t){return t},GAe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},e_=function(t,r){return Object.keys(r).reduce(function(n,i){return EW(EW({},n),{},FZ({},i,t(i,r[i])))},{})},CW=function(t,r,n){return t.map(function(i){return"".concat(GAe(i)," ").concat(r,"ms ").concat(n)}).join(",")};function qAe(e,t){return XAe(e)||KAe(e,t)||BZ(e,t)||HAe()}function HAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KAe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function XAe(e){if(Array.isArray(e))return e}function YAe(e){return ZAe(e)||JAe(e)||BZ(e)||QAe()}function QAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BZ(e,t){if(e){if(typeof e=="string")return Ok(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ok(e,t)}}function JAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZAe(e){if(Array.isArray(e))return Ok(e)}function Ok(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ex=1e-4,zZ=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},UZ=function(t,r){return t.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},AW=function(t,r){return function(n){var i=zZ(t,r);return UZ(i,n)}},eOe=function(t,r){return function(n){var i=zZ(t,r),s=[].concat(YAe(i.map(function(o,a){return o*a}).slice(1)),[0]);return UZ(s,n)}},OW=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0],s=r[1],o=r[2],a=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,s=0,o=1,a=1;break;case"ease":i=.25,s=.1,o=.25,a=1;break;case"ease-in":i=.42,s=0,o=1,a=1;break;case"ease-out":i=.42,s=0,o=.58,a=1;break;case"ease-in-out":i=0,s=0,o=.58,a=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),c=qAe(u,4);i=c[0],s=c[1],o=c[2],a=c[3]}}}var d=AW(i,o),h=AW(s,a),m=eOe(i,o),g=function(x){return x>1?1:x<0?0:x},v=function(x){for(var w=x>1?1:x,S=w,M=0;M<8;++M){var T=d(S)-w,P=m(S);if(Math.abs(T-w)<Ex||P<Ex)return h(S);S=g(S-T/P)}return h(S)};return v.isStepper=!1,v},tOe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,i=t.damping,s=i===void 0?8:i,o=t.dt,a=o===void 0?17:o,l=function(c,d,h){var m=-(c-d)*n,g=h*s,v=h+(m-g)*a/1e3,y=h*a/1e3+c;return Math.abs(y-d)<Ex&&Math.abs(v)<Ex?[d,0]:[y,v]};return l.isStepper=!0,l.dt=a,l},rOe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return OW(i);case"spring":return tOe();default:if(i.split("(")[0]==="cubic-bezier")return OW(i)}return typeof i=="function"?i:null};function K_(e){"@babel/helpers - typeof";return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K_(e)}function kW(e){return sOe(e)||iOe(e)||VZ(e)||nOe()}function nOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sOe(e){if(Array.isArray(e))return Ik(e)}function IW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IW(Object(r),!0).forEach(function(n){kk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kk(e,t,r){return t=oOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oOe(e){var t=aOe(e,"string");return K_(t)==="symbol"?t:String(t)}function aOe(e,t){if(K_(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(K_(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lOe(e,t){return dOe(e)||cOe(e,t)||VZ(e,t)||uOe()}function uOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VZ(e,t){if(e){if(typeof e=="string")return Ik(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ik(e,t)}}function Ik(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cOe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function dOe(e){if(Array.isArray(e))return e}var Cx=function(t,r,n){return t+(r-t)*n},jk=function(t){var r=t.from,n=t.to;return r!==n},fOe=function e(t,r,n){var i=e_(function(s,o){if(jk(o)){var a=t(o.from,o.to,o.velocity),l=lOe(a,2),u=l[0],c=l[1];return Di(Di({},o),{},{from:u,velocity:c})}return o},r);return n<1?e_(function(s,o){return jk(o)?Di(Di({},o),{},{velocity:Cx(o.velocity,i[s].velocity,n),from:Cx(o.from,i[s].from,n)}):o},r):e(t,i,n-1)};const hOe=(function(e,t,r,n,i){var s=VAe(e,t),o=s.reduce(function(y,x){return Di(Di({},y),{},kk({},x,[e[x],t[x]]))},{}),a=s.reduce(function(y,x){return Di(Di({},y),{},kk({},x,{from:e[x],velocity:0,to:t[x]}))},{}),l=-1,u,c,d=function(){return null},h=function(){return e_(function(x,w){return w.from},a)},m=function(){return!Object.values(a).filter(jk).length},g=function(x){u||(u=x);var w=x-u,S=w/r.dt;a=fOe(r,a,S),i(Di(Di(Di({},e),t),h())),u=x,m()||(l=requestAnimationFrame(d))},v=function(x){c||(c=x);var w=(x-c)/n,S=e_(function(T,P){return Cx.apply(void 0,kW(P).concat([r(w)]))},o);if(i(Di(Di(Di({},e),t),S)),w<1)l=requestAnimationFrame(d);else{var M=e_(function(T,P){return Cx.apply(void 0,kW(P).concat([r(1)]))},o);i(Di(Di(Di({},e),t),M))}};return d=r.isStepper?g:v,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}});function Wm(e){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wm(e)}var pOe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function mOe(e,t){if(e==null)return{};var r=gOe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gOe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function UC(e){return bOe(e)||_Oe(e)||yOe(e)||vOe()}function vOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yOe(e,t){if(e){if(typeof e=="string")return $k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $k(e,t)}}function _Oe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bOe(e){if(Array.isArray(e))return $k(e)}function $k(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jW(Object(r),!0).forEach(function(n){By(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function By(e,t,r){return t=WZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xOe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WZ(n.key),n)}}function MOe(e,t,r){return t&&xOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function WZ(e){var t=TOe(e,"string");return Wm(t)==="symbol"?t:String(t)}function TOe(e,t){if(Wm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nk(e,t)}function Nk(e,t){return Nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Nk(e,t)}function POe(e){var t=EOe();return function(){var n=Ax(e),i;if(t){var s=Ax(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Dk(this,i)}}function Dk(e,t){if(t&&(Wm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rk(e)}function Rk(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EOe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ax(e){return Ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ax(e)}var Yc=(function(e){SOe(r,e);var t=POe(r);function r(n,i){var s;wOe(this,r),s=t.call(this,n,i);var o=s.props,a=o.isActive,l=o.attributeName,u=o.from,c=o.to,d=o.steps,h=o.children,m=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(Rk(s)),s.changeStyle=s.changeStyle.bind(Rk(s)),!a||m<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:c}),Dk(s);if(d&&d.length)s.state={style:d[0].style};else if(u){if(typeof h=="function")return s.state={style:u},Dk(s);s.state={style:l?By({},l,u):u}}else s.state={style:{}};return s}return MOe(r,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,a=s.canBegin,l=s.attributeName,u=s.shouldReAnimate,c=s.to,d=s.from,h=this.state.style;if(a){if(!o){var m={style:l?By({},l,c):c};this.state&&h&&(l&&h[l]!==c||!l&&h!==c)&&this.setState(m);return}if(!(jAe(i.to,c)&&i.canBegin&&i.isActive)){var g=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=g||u?d:i.to;if(this.state&&h){var y={style:l?By({},l,v):v};(l&&h[l]!==v||!l&&h!==v)&&this.setState(y)}this.runAnimation(fa(fa({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,a=i.to,l=i.duration,u=i.easing,c=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,m=hOe(o,a,rOe(u),l,this.changeStyle),g=function(){s.stopJSAnimation=m()};this.manager.start([h,c,g,l,d])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,a=i.begin,l=i.onAnimationStart,u=o[0],c=u.style,d=u.duration,h=d===void 0?0:d,m=function(v,y,x){if(x===0)return v;var w=y.duration,S=y.easing,M=S===void 0?"ease":S,T=y.style,P=y.properties,E=y.onAnimationEnd,A=x>0?o[x-1]:y,L=P||Object.keys(T);if(typeof M=="function"||M==="spring")return[].concat(UC(v),[s.runJSAnimation.bind(s,{from:A.style,to:T,duration:w,easing:M}),w]);var B=CW(L,w,M),V=fa(fa(fa({},A.style),T),{},{transition:B});return[].concat(UC(v),[V,w,E]).filter(WAe)};return this.manager.start([l].concat(UC(o.reduce(m,[c,Math.max(h,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=BAe());var s=i.begin,o=i.duration,a=i.attributeName,l=i.to,u=i.easing,c=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,m=i.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var v=a?By({},a,l):l,y=CW(Object.keys(v),o,u);g.start([c,s,fa(fa({},v),{},{transition:y}),o,d])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=mOe(i,pOe),u=$.Children.count(s),c=this.state.style;if(typeof s=="function")return s(c);if(!a||u===0||o<=0)return s;var d=function(m){var g=m.props,v=g.style,y=v===void 0?{}:v,x=g.className,w=$.cloneElement(m,fa(fa({},l),{},{style:fa(fa({},y),c),className:x}));return w};return u===1?d($.Children.only(s)):ye.createElement("div",null,$.Children.map(s,function(h){return d(h)}))}}]),r})($.PureComponent);Yc.displayName="Animate";Yc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Yc.propTypes={from:ar.oneOfType([ar.object,ar.string]),to:ar.oneOfType([ar.object,ar.string]),attributeName:ar.string,duration:ar.number,begin:ar.number,easing:ar.oneOfType([ar.string,ar.func]),steps:ar.arrayOf(ar.shape({duration:ar.number.isRequired,style:ar.object.isRequired,easing:ar.oneOfType([ar.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ar.func]),properties:ar.arrayOf("string"),onAnimationEnd:ar.func})),children:ar.oneOfType([ar.node,ar.func]),isActive:ar.bool,canBegin:ar.bool,onAnimationEnd:ar.func,shouldReAnimate:ar.bool,onAnimationStart:ar.func,onAnimationReStart:ar.func};ar.object,ar.object,ar.object,ar.element;ar.object,ar.object,ar.object,ar.oneOfType([ar.array,ar.element]),ar.any;function X_(e){"@babel/helpers - typeof";return X_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X_(e)}function Ox(){return Ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ox.apply(this,arguments)}function COe(e,t){return IOe(e)||kOe(e,t)||OOe(e,t)||AOe()}function AOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OOe(e,t){if(e){if(typeof e=="string")return $W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $W(e,t)}}function $W(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kOe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function IOe(e){if(Array.isArray(e))return e}function NW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function DW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NW(Object(r),!0).forEach(function(n){jOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jOe(e,t,r){return t=$Oe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Oe(e){var t=NOe(e,"string");return X_(t)=="symbol"?t:t+""}function NOe(e,t){if(X_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(X_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RW=function(t,r,n,i,s){var o=Math.min(Math.abs(n)/2,Math.abs(i)/2),a=i>=0?1:-1,l=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,c;if(o>0&&s instanceof Array){for(var d=[0,0,0,0],h=0,m=4;h<m;h++)d[h]=s[h]>o?o:s[h];c="M".concat(t,",").concat(r+a*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+l*d[0],",").concat(r)),c+="L ".concat(t+n-l*d[1],",").concat(r),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+a*d[1])),c+="L ".concat(t+n,",").concat(r+i-a*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-l*d[2],",").concat(r+i)),c+="L ".concat(t+l*d[3],",").concat(r+i),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+i-a*d[3])),c+="Z"}else if(o>0&&s===+s&&s>0){var g=Math.min(o,s);c="M ".concat(t,",").concat(r+a*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+l*g,",").concat(r,`
            L `).concat(t+n-l*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n,",").concat(r+a*g,`
            L `).concat(t+n,",").concat(r+i-a*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n-l*g,",").concat(r+i,`
            L `).concat(t+l*g,",").concat(r+i,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(r+i-a*g," Z")}else c="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return c},DOe=function(t,r){if(!t||!r)return!1;var n=t.x,i=t.y,s=r.x,o=r.y,a=r.width,l=r.height;if(Math.abs(a)>0&&Math.abs(l)>0){var u=Math.min(s,s+a),c=Math.max(s,s+a),d=Math.min(o,o+l),h=Math.max(o,o+l);return n>=u&&n<=c&&i>=d&&i<=h}return!1},ROe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},v$=function(t){var r=DW(DW({},ROe),t),n=$.useRef(),i=$.useState(-1),s=COe(i,2),o=s[0],a=s[1];$.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var M=n.current.getTotalLength();M&&a(M)}catch{}},[]);var l=r.x,u=r.y,c=r.width,d=r.height,h=r.radius,m=r.className,g=r.animationEasing,v=r.animationDuration,y=r.animationBegin,x=r.isAnimationActive,w=r.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||c===0||d===0)return null;var S=br("recharts-rectangle",m);return w?ye.createElement(Yc,{canBegin:o>0,from:{width:c,height:d,x:l,y:u},to:{width:c,height:d,x:l,y:u},duration:v,animationEasing:g,isActive:w},function(M){var T=M.width,P=M.height,E=M.x,A=M.y;return ye.createElement(Yc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,isActive:x,easing:g},ye.createElement("path",Ox({},lr(r,!0),{className:S,d:RW(E,A,T,P,h),ref:n})))}):ye.createElement("path",Ox({},lr(r,!0),{className:S,d:RW(l,u,c,d,h)}))},LOe=["points","className","baseLinePoints","connectNulls"];function dm(){return dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dm.apply(this,arguments)}function FOe(e,t){if(e==null)return{};var r=BOe(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BOe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function LW(e){return WOe(e)||VOe(e)||UOe(e)||zOe()}function zOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UOe(e,t){if(e){if(typeof e=="string")return Lk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lk(e,t)}}function VOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WOe(e){if(Array.isArray(e))return Lk(e)}function Lk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var FW=function(t){return t&&t.x===+t.x&&t.y===+t.y},GOe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){FW(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),FW(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},t_=function(t,r){var n=GOe(t);r&&(n=[n.reduce(function(s,o){return[].concat(LW(s),LW(o))},[])]);var i=n.map(function(s){return s.reduce(function(o,a,l){return"".concat(o).concat(l===0?"M":"L").concat(a.x,",").concat(a.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},qOe=function(t,r,n){var i=t_(t,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(t_(r.reverse(),n).slice(1))},HOe=function(t){var r=t.points,n=t.className,i=t.baseLinePoints,s=t.connectNulls,o=FOe(t,LOe);if(!r||!r.length)return null;var a=br("recharts-polygon",n);if(i&&i.length){var l=o.stroke&&o.stroke!=="none",u=qOe(r,i,s);return ye.createElement("g",{className:a},ye.createElement("path",dm({},lr(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),l?ye.createElement("path",dm({},lr(o,!0),{fill:"none",d:t_(r,s)})):null,l?ye.createElement("path",dm({},lr(o,!0),{fill:"none",d:t_(i,s)})):null)}var c=t_(r,s);return ye.createElement("path",dm({},lr(o,!0),{fill:c.slice(-1)==="Z"?o.fill:"none",className:a,d:c}))};function Fk(){return Fk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fk.apply(this,arguments)}var y$=function(t){var r=t.cx,n=t.cy,i=t.r,s=t.className,o=br("recharts-dot",s);return r===+r&&n===+n&&i===+i?ye.createElement("circle",Fk({},lr(t,!1),tx(t),{className:o,cx:r,cy:n,r:i})):null};function Y_(e){"@babel/helpers - typeof";return Y_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y_(e)}var KOe=["x","y","top","left","width","height","className"];function Bk(){return Bk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bk.apply(this,arguments)}function BW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function XOe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BW(Object(r),!0).forEach(function(n){YOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YOe(e,t,r){return t=QOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QOe(e){var t=JOe(e,"string");return Y_(t)=="symbol"?t:t+""}function JOe(e,t){if(Y_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Y_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZOe(e,t){if(e==null)return{};var r=eke(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function eke(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var tke=function(t,r,n,i,s,o){return"M".concat(t,",").concat(s,"v").concat(i,"M").concat(o,",").concat(r,"h").concat(n)},rke=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,s=i===void 0?0:i,o=t.top,a=o===void 0?0:o,l=t.left,u=l===void 0?0:l,c=t.width,d=c===void 0?0:c,h=t.height,m=h===void 0?0:h,g=t.className,v=ZOe(t,KOe),y=XOe({x:n,y:s,top:a,left:u,width:d,height:m},v);return!St(n)||!St(s)||!St(d)||!St(m)||!St(a)||!St(u)?null:ye.createElement("path",Bk({},lr(y,!0),{className:br("recharts-cross",g),d:tke(n,s,d,m,a,u)}))},VC,zW;function nke(){if(zW)return VC;zW=1;var e=L1(),t=uZ(),r=wl();function n(i,s){return i&&i.length?e(i,r(s,2),t):void 0}return VC=n,VC}var ike=nke();const ske=Dr(ike);var WC,UW;function oke(){if(UW)return WC;UW=1;var e=L1(),t=wl(),r=cZ();function n(i,s){return i&&i.length?e(i,t(s,2),r):void 0}return WC=n,WC}var ake=oke();const lke=Dr(ake);var uke=["cx","cy","angle","ticks","axisLine"],cke=["ticks","tick","angle","tickFormatter","stroke"];function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function r_(){return r_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r_.apply(this,arguments)}function VW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VW(Object(r),!0).forEach(function(n){V1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WW(e,t){if(e==null)return{};var r=dke(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dke(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qZ(n.key),n)}}function hke(e,t,r){return t&&GW(e.prototype,t),r&&GW(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pke(e,t,r){return t=kx(t),mke(e,GZ()?Reflect.construct(t,r||[],kx(e).constructor):t.apply(e,r))}function mke(e,t){if(t&&(Gm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gke(e)}function gke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GZ=function(){return!!e})()}function kx(e){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kx(e)}function vke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zk(e,t)}function zk(e,t){return zk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},zk(e,t)}function V1(e,t,r){return t=qZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qZ(e){var t=yke(e,"string");return Gm(t)=="symbol"?t:t+""}function yke(e,t){if(Gm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var W1=(function(e){function t(){return fke(this,t),pke(this,t,arguments)}return vke(t,e),hke(t,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,s=this.props,o=s.angle,a=s.cx,l=s.cy;return un(a,l,i,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.angle,a=n.ticks,l=ske(a,function(c){return c.coordinate||0}),u=lke(a,function(c){return c.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.angle,a=n.ticks,l=n.axisLine,u=WW(n,uke),c=a.reduce(function(g,v){return[Math.min(g[0],v.coordinate),Math.max(g[1],v.coordinate)]},[1/0,-1/0]),d=un(i,s,c[0],o),h=un(i,s,c[1],o),m=xf(xf(xf({},lr(u,!1)),{},{fill:"none"},lr(l,!1)),{},{x1:d.x,y1:d.y,x2:h.x,y2:h.y});return ye.createElement("line",r_({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,o=i.tick,a=i.angle,l=i.tickFormatter,u=i.stroke,c=WW(i,cke),d=this.getTickTextAnchor(),h=lr(c,!1),m=lr(o,!1),g=s.map(function(v,y){var x=n.getTickValueCoord(v),w=xf(xf(xf(xf({textAnchor:d,transform:"rotate(".concat(90-a,", ").concat(x.x,", ").concat(x.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:y},x),{},{payload:v});return ye.createElement(Vn,r_({className:br("recharts-polar-radius-axis-tick",jZ(o)),key:"tick-".concat(v.coordinate)},M1(n.props,v,y)),t.renderTickItem(o,w,l?l(v.value,y):v.value))});return ye.createElement(Vn,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.axisLine,o=n.tick;return!i||!i.length?null:ye.createElement(Vn,{className:br("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Li.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,s){var o;return ye.isValidElement(n)?o=ye.cloneElement(n,i):hr(n)?o=n(i):o=ye.createElement(Lm,r_({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])})($.PureComponent);V1(W1,"displayName","PolarRadiusAxis");V1(W1,"axisType","radiusAxis");V1(W1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function qm(e){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qm(e)}function $f(){return $f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$f.apply(this,arguments)}function qW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Mf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qW(Object(r),!0).forEach(function(n){G1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KZ(n.key),n)}}function bke(e,t,r){return t&&HW(e.prototype,t),r&&HW(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wke(e,t,r){return t=Ix(t),xke(e,HZ()?Reflect.construct(t,r||[],Ix(e).constructor):t.apply(e,r))}function xke(e,t){if(t&&(qm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mke(e)}function Mke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HZ=function(){return!!e})()}function Ix(e){return Ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ix(e)}function Tke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uk(e,t)}function Uk(e,t){return Uk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Uk(e,t)}function G1(e,t,r){return t=KZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KZ(e){var t=Ske(e,"string");return qm(t)=="symbol"?t:t+""}function Ske(e,t){if(qm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pke=Math.PI/180,KW=1e-5,q1=(function(e){function t(){return _ke(this,t),wke(this,t,arguments)}return Tke(t,e),bke(t,[{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.cx,o=i.cy,a=i.radius,l=i.orientation,u=i.tickSize,c=u||8,d=un(s,o,a,n.coordinate),h=un(s,o,a+(l==="inner"?-1:1)*c,n.coordinate);return{x1:d.x,y1:d.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,s=Math.cos(-n.coordinate*Pke),o;return s>KW?o=i==="outer"?"start":"end":s<-KW?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.radius,a=n.axisLine,l=n.axisLineType,u=Mf(Mf({},lr(this.props,!1)),{},{fill:"none"},lr(a,!1));if(l==="circle")return ye.createElement(y$,$f({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:o}));var c=this.props.ticks,d=c.map(function(h){return un(i,s,o,h.coordinate)});return ye.createElement(HOe,$f({className:"recharts-polar-angle-axis-line"},u,{points:d}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,o=i.tick,a=i.tickLine,l=i.tickFormatter,u=i.stroke,c=lr(this.props,!1),d=lr(o,!1),h=Mf(Mf({},c),{},{fill:"none"},lr(a,!1)),m=s.map(function(g,v){var y=n.getTickLineCoord(g),x=n.getTickTextAnchor(g),w=Mf(Mf(Mf({textAnchor:x},c),{},{stroke:"none",fill:u},d),{},{index:v,payload:g,x:y.x2,y:y.y2});return ye.createElement(Vn,$f({className:br("recharts-polar-angle-axis-tick",jZ(o)),key:"tick-".concat(g.coordinate)},M1(n.props,g,v)),a&&ye.createElement("line",$f({className:"recharts-polar-angle-axis-tick-line"},h,y)),o&&t.renderTickItem(o,w,l?l(g.value,v):g.value))});return ye.createElement(Vn,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.radius,o=n.axisLine;return s<=0||!i||!i.length?null:ye.createElement(Vn,{className:br("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,s){var o;return ye.isValidElement(n)?o=ye.cloneElement(n,i):hr(n)?o=n(i):o=ye.createElement(Lm,$f({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])})($.PureComponent);G1(q1,"displayName","PolarAngleAxis");G1(q1,"axisType","angleAxis");G1(q1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var GC,XW;function Eke(){if(XW)return GC;XW=1;var e=lJ(),t=e(Object.getPrototypeOf,Object);return GC=t,GC}var qC,YW;function Cke(){if(YW)return qC;YW=1;var e=Ru(),t=Eke(),r=Lu(),n="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,a=s.hasOwnProperty,l=o.call(Object);function u(c){if(!r(c)||e(c)!=n)return!1;var d=t(c);if(d===null)return!0;var h=a.call(d,"constructor")&&d.constructor;return typeof h=="function"&&h instanceof h&&o.call(h)==l}return qC=u,qC}var Ake=Cke();const Oke=Dr(Ake);var HC,QW;function kke(){if(QW)return HC;QW=1;var e=Ru(),t=Lu(),r="[object Boolean]";function n(i){return i===!0||i===!1||t(i)&&e(i)==r}return HC=n,HC}var Ike=kke();const jke=Dr(Ike);function Q_(e){"@babel/helpers - typeof";return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q_(e)}function jx(){return jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jx.apply(this,arguments)}function $ke(e,t){return Lke(e)||Rke(e,t)||Dke(e,t)||Nke()}function Nke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dke(e,t){if(e){if(typeof e=="string")return JW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JW(e,t)}}function JW(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Lke(e){if(Array.isArray(e))return e}function ZW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function e5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZW(Object(r),!0).forEach(function(n){Fke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fke(e,t,r){return t=Bke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bke(e){var t=zke(e,"string");return Q_(t)=="symbol"?t:t+""}function zke(e,t){if(Q_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Q_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t5=function(t,r,n,i,s){var o=n-i,a;return a="M ".concat(t,",").concat(r),a+="L ".concat(t+n,",").concat(r),a+="L ".concat(t+n-o/2,",").concat(r+s),a+="L ".concat(t+n-o/2-i,",").concat(r+s),a+="L ".concat(t,",").concat(r," Z"),a},Uke={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Vke=function(t){var r=e5(e5({},Uke),t),n=$.useRef(),i=$.useState(-1),s=$ke(i,2),o=s[0],a=s[1];$.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&a(S)}catch{}},[]);var l=r.x,u=r.y,c=r.upperWidth,d=r.lowerWidth,h=r.height,m=r.className,g=r.animationEasing,v=r.animationDuration,y=r.animationBegin,x=r.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||h!==+h||c===0&&d===0||h===0)return null;var w=br("recharts-trapezoid",m);return x?ye.createElement(Yc,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:c,lowerWidth:d,height:h,x:l,y:u},duration:v,animationEasing:g,isActive:x},function(S){var M=S.upperWidth,T=S.lowerWidth,P=S.height,E=S.x,A=S.y;return ye.createElement(Yc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,easing:g},ye.createElement("path",jx({},lr(r,!0),{className:w,d:t5(E,A,M,T,P),ref:n})))}):ye.createElement("g",null,ye.createElement("path",jx({},lr(r,!0),{className:w,d:t5(l,u,c,d,h)})))},Wke=["option","shapeType","propTransformer","activeClassName","isActive"];function J_(e){"@babel/helpers - typeof";return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J_(e)}function Gke(e,t){if(e==null)return{};var r=qke(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qke(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function r5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $x(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r5(Object(r),!0).forEach(function(n){Hke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hke(e,t,r){return t=Kke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kke(e){var t=Xke(e,"string");return J_(t)=="symbol"?t:t+""}function Xke(e,t){if(J_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(J_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yke(e,t){return $x($x({},t),e)}function Qke(e,t){return e==="symbols"}function n5(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ye.createElement(v$,r);case"trapezoid":return ye.createElement(Vke,r);case"sector":return ye.createElement(DZ,r);case"symbols":if(Qke(t))return ye.createElement(jj,r);break;default:return null}}function Jke(e){return $.isValidElement(e)?e.props:e}function Zke(e){var t=e.option,r=e.shapeType,n=e.propTransformer,i=n===void 0?Yke:n,s=e.activeClassName,o=s===void 0?"recharts-active-shape":s,a=e.isActive,l=Gke(e,Wke),u;if($.isValidElement(t))u=$.cloneElement(t,$x($x({},l),Jke(t)));else if(hr(t))u=t(l);else if(Oke(t)&&!jke(t)){var c=i(t,l);u=ye.createElement(n5,{shapeType:r,elementProps:c})}else{var d=l;u=ye.createElement(n5,{shapeType:r,elementProps:d})}return a?ye.createElement(Vn,{className:o},u):u}function H1(e,t){return t!=null&&"trapezoids"in e.props}function K1(e,t){return t!=null&&"sectors"in e.props}function Z_(e,t){return t!=null&&"points"in e.props}function e2e(e,t){var r,n,i=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,s=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return i&&s}function t2e(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function r2e(e,t){var r=e.x===t.x,n=e.y===t.y,i=e.z===t.z;return r&&n&&i}function n2e(e,t){var r;return H1(e,t)?r=e2e:K1(e,t)?r=t2e:Z_(e,t)&&(r=r2e),r}function i2e(e,t){var r;return H1(e,t)?r="trapezoids":K1(e,t)?r="sectors":Z_(e,t)&&(r="points"),r}function s2e(e,t){if(H1(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(K1(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Z_(e,t)?t.payload:{}}function o2e(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,i=i2e(r,t),s=s2e(r,t),o=n.filter(function(l,u){var c=f$(s,l),d=r.props[i].filter(function(g){var v=n2e(r,t);return v(g,t)}),h=r.props[i].indexOf(d[d.length-1]),m=u===h;return c&&m}),a=n.indexOf(o[o.length-1]);return a}var Tw;function Hm(e){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hm(e)}function fm(){return fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fm.apply(this,arguments)}function i5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function an(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i5(Object(r),!0).forEach(function(n){ko(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YZ(n.key),n)}}function l2e(e,t,r){return t&&s5(e.prototype,t),r&&s5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u2e(e,t,r){return t=Nx(t),c2e(e,XZ()?Reflect.construct(t,r||[],Nx(e).constructor):t.apply(e,r))}function c2e(e,t){if(t&&(Hm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d2e(e)}function d2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XZ=function(){return!!e})()}function Nx(e){return Nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nx(e)}function f2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vk(e,t)}function Vk(e,t){return Vk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Vk(e,t)}function ko(e,t,r){return t=YZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YZ(e){var t=h2e(e,"string");return Hm(t)=="symbol"?t:t+""}function h2e(e,t){if(Hm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bu=(function(e){function t(r){var n;return a2e(this,t),n=u2e(this,t,[r]),ko(n,"pieRef",null),ko(n,"sectorRefs",[]),ko(n,"id",x1("recharts-pie-")),ko(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),hr(i)&&i()}),ko(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),hr(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return f2e(t,e),l2e(t,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,a=s.labelLine,l=s.dataKey,u=s.valueKey,c=lr(this.props,!1),d=lr(o,!1),h=lr(a,!1),m=o&&o.offsetRadius||20,g=n.map(function(v,y){var x=(v.startAngle+v.endAngle)/2,w=un(v.cx,v.cy,v.outerRadius+m,x),S=an(an(an(an({},c),v),{},{stroke:"none"},d),{},{index:y,textAnchor:t.getTextAnchor(w.x,v.cx)},w),M=an(an(an(an({},c),v),{},{fill:"none",stroke:v.fill},h),{},{index:y,points:[un(v.cx,v.cy,v.outerRadius,x),w]}),T=l;return yr(l)&&yr(u)?T="value":yr(l)&&(T=u),ye.createElement(Vn,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(y)},a&&t.renderLabelLineItem(a,M,"line"),t.renderLabelItem(o,S,Ys(v,T)))});return ye.createElement(Vn,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(n){var i=this,s=this.props,o=s.activeShape,a=s.blendStroke,l=s.inactiveShape;return n.map(function(u,c){if(u?.startAngle===0&&u?.endAngle===0&&n.length!==1)return null;var d=i.isActiveIndex(c),h=l&&i.hasActiveIndex()?l:null,m=d?o:h,g=an(an({},u),{},{stroke:a?u.fill:u.stroke,tabIndex:-1});return ye.createElement(Vn,fm({ref:function(y){y&&!i.sectorRefs.includes(y)&&i.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},M1(i.props,u,c),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(c)}),ye.createElement(Zke,fm({option:m,isActive:d,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,s=i.sectors,o=i.isAnimationActive,a=i.animationBegin,l=i.animationDuration,u=i.animationEasing,c=i.animationId,d=this.state,h=d.prevSectors,m=d.prevIsAnimationActive;return ye.createElement(Yc,{begin:a,duration:l,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(c,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var v=g.t,y=[],x=s&&s[0],w=x.startAngle;return s.forEach(function(S,M){var T=h&&h[M],P=M>0?Ta(S,"paddingAngle",0):0;if(T){var E=uz(T.endAngle-T.startAngle,S.endAngle-S.startAngle),A=an(an({},S),{},{startAngle:w+P,endAngle:w+E(v)+P});y.push(A),w=A.endAngle}else{var L=S.endAngle,B=S.startAngle,V=uz(0,L-B),G=V(v),z=an(an({},S),{},{startAngle:w+P,endAngle:w+G+P});y.push(z),w=z.endAngle}}),ye.createElement(Vn,null,n.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var a=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,s=n.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!f$(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,s=i.hide,o=i.sectors,a=i.className,l=i.label,u=i.cx,c=i.cy,d=i.innerRadius,h=i.outerRadius,m=i.isAnimationActive,g=this.state.isAnimationFinished;if(s||!o||!o.length||!St(u)||!St(c)||!St(d)||!St(h))return null;var v=br("recharts-pie",a);return ye.createElement(Vn,{tabIndex:this.props.rootTabIndex,className:v,ref:function(x){n.pieRef=x}},this.renderSectors(),l&&this.renderLabels(o),Li.renderCallByParent(this.props,null,!1),(!m||g)&&Hf.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,s){if(ye.isValidElement(n))return ye.cloneElement(n,i);if(hr(n))return n(i);var o=br("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return ye.createElement(Ck,fm({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,i,s){if(ye.isValidElement(n))return ye.cloneElement(n,i);var o=s;if(hr(n)&&(o=n(i),ye.isValidElement(o)))return o;var a=br("recharts-pie-label-text",typeof n!="boolean"&&!hr(n)?n.className:"");return ye.createElement(Lm,fm({},i,{alignmentBaseline:"middle",className:a}),o)}}])})($.PureComponent);Tw=Bu;ko(Bu,"displayName","Pie");ko(Bu,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!k1.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ko(Bu,"parseDeltaAngle",function(e,t){var r=$o(t-e),n=Math.min(Math.abs(t-e),360);return r*n});ko(Bu,"getRealPieData",function(e){var t=e.data,r=e.children,n=lr(e,!1),i=fl(r,Vj);return t&&t.length?t.map(function(s,o){return an(an(an({payload:s},n),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return an(an({},n),s.props)}):[]});ko(Bu,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,i=t.width,s=t.height,o=IZ(i,s),a=n+Os(e.cx,i,i/2),l=r+Os(e.cy,s,s/2),u=Os(e.innerRadius,o,0),c=Os(e.outerRadius,o,o*.8),d=e.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:a,cy:l,innerRadius:u,outerRadius:c,maxRadius:d}});ko(Bu,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?an(an({},t.type.defaultProps),t.props):t.props,i=Tw.getRealPieData(n);if(!i||!i.length)return null;var s=n.cornerRadius,o=n.startAngle,a=n.endAngle,l=n.paddingAngle,u=n.dataKey,c=n.nameKey,d=n.valueKey,h=n.tooltipType,m=Math.abs(n.minAngle),g=Tw.parseCoordinateOfPie(n,r),v=Tw.parseDeltaAngle(o,a),y=Math.abs(v),x=u;yr(u)&&yr(d)?(Su(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):yr(u)&&(Su(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=d);var w=i.filter(function(A){return Ys(A,x,0)!==0}).length,S=(y>=360?w:w-1)*l,M=y-w*m-S,T=i.reduce(function(A,L){var B=Ys(L,x,0);return A+(St(B)?B:0)},0),P;if(T>0){var E;P=i.map(function(A,L){var B=Ys(A,x,0),V=Ys(A,c,L),G=(St(B)?B:0)/T,z;L?z=E.endAngle+$o(v)*l*(B!==0?1:0):z=o;var K=z+$o(v)*((B!==0?m:0)+G*M),J=(z+K)/2,X=(g.innerRadius+g.outerRadius)/2,Q=[{name:V,value:B,payload:A,dataKey:x,type:h}],W=un(g.cx,g.cy,X,J);return E=an(an(an({percent:G,cornerRadius:s,name:V,tooltipPayload:Q,midAngle:J,middleRadius:X,tooltipPosition:W},A),g),{},{value:Ys(A,x),startAngle:z,endAngle:K,payload:A,paddingAngle:$o(v)*l}),E})}return an(an({},g),{},{sectors:P,data:i})});var KC,o5;function p2e(){if(o5)return KC;o5=1;var e=Math.ceil,t=Math.max;function r(n,i,s,o){for(var a=-1,l=t(e((i-n)/(s||1)),0),u=Array(l);l--;)u[o?l:++a]=n,n+=s;return u}return KC=r,KC}var XC,a5;function QZ(){if(a5)return XC;a5=1;var e=TJ(),t=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*r}return i===i?i:0}return XC=n,XC}var YC,l5;function m2e(){if(l5)return YC;l5=1;var e=p2e(),t=O1(),r=QZ();function n(i){return function(s,o,a){return a&&typeof a!="number"&&t(s,o,a)&&(o=a=void 0),s=r(s),o===void 0?(o=s,s=0):o=r(o),a=a===void 0?s<o?1:-1:r(a),e(s,o,a,i)}}return YC=n,YC}var QC,u5;function g2e(){if(u5)return QC;u5=1;var e=m2e(),t=e();return QC=t,QC}var v2e=g2e();const Dx=Dr(v2e);function e0(e){"@babel/helpers - typeof";return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e0(e)}function c5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function d5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c5(Object(r),!0).forEach(function(n){JZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JZ(e,t,r){return t=y2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y2e(e){var t=_2e(e,"string");return e0(t)=="symbol"?t:t+""}function _2e(e,t){if(e0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(e0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var b2e=["Webkit","Moz","O","ms"],w2e=function(t,r){var n=t.replace(/(\w)/,function(s){return s.toUpperCase()}),i=b2e.reduce(function(s,o){return d5(d5({},s),{},JZ({},o+n,r))},{});return i[t]=r,i};function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}function Rx(){return Rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rx.apply(this,arguments)}function f5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function JC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f5(Object(r),!0).forEach(function(n){Vs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eee(n.key),n)}}function M2e(e,t,r){return t&&h5(e.prototype,t),r&&h5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function T2e(e,t,r){return t=Lx(t),S2e(e,ZZ()?Reflect.construct(t,r||[],Lx(e).constructor):t.apply(e,r))}function S2e(e,t){if(t&&(Km(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P2e(e)}function P2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZZ=function(){return!!e})()}function Lx(e){return Lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lx(e)}function E2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wk(e,t)}function Wk(e,t){return Wk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Wk(e,t)}function Vs(e,t,r){return t=eee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eee(e){var t=C2e(e,"string");return Km(t)=="symbol"?t:t+""}function C2e(e,t){if(Km(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Km(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var A2e=function(t){var r=t.data,n=t.startIndex,i=t.endIndex,s=t.x,o=t.width,a=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=Jy().domain(Dx(0,l)).range([s,s+o-a]),c=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:c}},p5=function(t){return t.changedTouches&&!!t.changedTouches.length},Xm=(function(e){function t(r){var n;return x2e(this,t),n=T2e(this,t,[r]),Vs(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),Vs(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),Vs(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,s=i.endIndex,o=i.onDragEnd,a=i.startIndex;o?.({endIndex:s,startIndex:a})}),n.detachDragEndListener()}),Vs(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Vs(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Vs(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Vs(n,"handleSlideDragStart",function(i){var s=p5(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return E2e(t,e),M2e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,s=n.endX,o=this.state.scaleValues,a=this.props,l=a.gap,u=a.data,c=u.length-1,d=Math.min(i,s),h=Math.max(i,s),m=t.getIndexInRange(o,d),g=t.getIndexInRange(o,h);return{startIndex:m-m%l,endIndex:g===c?c:g-g%l}}},{key:"getTextOfTick",value:function(n){var i=this.props,s=i.data,o=i.tickFormatter,a=i.dataKey,l=Ys(s[n],a,n);return hr(o)?o(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,s=i.slideMoveStartX,o=i.startX,a=i.endX,l=this.props,u=l.x,c=l.width,d=l.travellerWidth,h=l.startIndex,m=l.endIndex,g=l.onChange,v=n.pageX-s;v>0?v=Math.min(v,u+c-d-a,u+c-d-o):v<0&&(v=Math.max(v,u-o,u-a));var y=this.getIndex({startX:o+v,endX:a+v});(y.startIndex!==h||y.endIndex!==m)&&g&&g(y),this.setState({startX:o+v,endX:a+v,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var s=p5(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,a=i.endX,l=i.startX,u=this.state[o],c=this.props,d=c.x,h=c.width,m=c.travellerWidth,g=c.onChange,v=c.gap,y=c.data,x={startX:this.state.startX,endX:this.state.endX},w=n.pageX-s;w>0?w=Math.min(w,d+h-m-u):w<0&&(w=Math.max(w,d-u)),x[o]=u+w;var S=this.getIndex(x),M=S.startIndex,T=S.endIndex,P=function(){var A=y.length-1;return o==="startX"&&(a>l?M%v===0:T%v===0)||a<l&&T===A||o==="endX"&&(a>l?T%v===0:M%v===0)||a>l&&T===A};this.setState(Vs(Vs({},o,u+w),"brushMoveStartX",n.pageX),function(){g&&P()&&g(S)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var s=this,o=this.state,a=o.scaleValues,l=o.startX,u=o.endX,c=this.state[i],d=a.indexOf(c);if(d!==-1){var h=d+n;if(!(h===-1||h>=a.length)){var m=a[h];i==="startX"&&m>=u||i==="endX"&&m<=l||this.setState(Vs({},i,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,s=n.y,o=n.width,a=n.height,l=n.fill,u=n.stroke;return ye.createElement("rect",{stroke:u,fill:l,x:i,y:s,width:o,height:a})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,s=n.y,o=n.width,a=n.height,l=n.data,u=n.children,c=n.padding,d=$.Children.only(u);return d?ye.cloneElement(d,{x:i,y:s,width:o,height:a,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,i){var s,o,a=this,l=this.props,u=l.y,c=l.travellerWidth,d=l.height,h=l.traveller,m=l.ariaLabel,g=l.data,v=l.startIndex,y=l.endIndex,x=Math.max(n,this.props.x),w=JC(JC({},lr(this.props,!1)),{},{x,y:u,width:c,height:d}),S=m||"Min value: ".concat((s=g[v])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=g[y])===null||o===void 0?void 0:o.name);return ye.createElement(Vn,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(T){["ArrowLeft","ArrowRight"].includes(T.key)&&(T.preventDefault(),T.stopPropagation(),a.handleTravellerMoveKeyboard(T.key==="ArrowRight"?1:-1,i))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,w))}},{key:"renderSlide",value:function(n,i){var s=this.props,o=s.y,a=s.height,l=s.stroke,u=s.travellerWidth,c=Math.min(n,i)+u,d=Math.max(Math.abs(i-n)-u,0);return ye.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:o,width:d,height:a})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,s=n.endIndex,o=n.y,a=n.height,l=n.travellerWidth,u=n.stroke,c=this.state,d=c.startX,h=c.endX,m=5,g={pointerEvents:"none",fill:u};return ye.createElement(Vn,{className:"recharts-brush-texts"},ye.createElement(Lm,Rx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-m,y:o+a/2},g),this.getTextOfTick(i)),ye.createElement(Lm,Rx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+m,y:o+a/2},g),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,i=n.data,s=n.className,o=n.children,a=n.x,l=n.y,u=n.width,c=n.height,d=n.alwaysShowText,h=this.state,m=h.startX,g=h.endX,v=h.isTextActive,y=h.isSlideMoving,x=h.isTravellerMoving,w=h.isTravellerFocused;if(!i||!i.length||!St(a)||!St(l)||!St(u)||!St(c)||u<=0||c<=0)return null;var S=br("recharts-brush",s),M=ye.Children.count(o)===1,T=w2e("userSelect","none");return ye.createElement(Vn,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:T},this.renderBackground(),M&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(v||y||x||w||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,s=n.y,o=n.width,a=n.height,l=n.stroke,u=Math.floor(s+a/2)-1;return ye.createElement(ye.Fragment,null,ye.createElement("rect",{x:i,y:s,width:o,height:a,fill:l,stroke:"none"}),ye.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),ye.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var s;return ye.isValidElement(n)?s=ye.cloneElement(n,i):hr(n)?s=n(i):s=t.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(n,i){var s=n.data,o=n.width,a=n.x,l=n.travellerWidth,u=n.updateId,c=n.startIndex,d=n.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return JC({prevData:s,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:o},s&&s.length?A2e({data:s,width:o,x:a,travellerWidth:l,startIndex:c,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||a!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([a,a+o-l]);var h=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:o,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,i){for(var s=n.length,o=0,a=s-1;a-o>1;){var l=Math.floor((o+a)/2);n[l]>i?a=l:o=l}return i>=n[a]?a:o}}])})($.PureComponent);Vs(Xm,"displayName","Brush");Vs(Xm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ZC,m5;function O2e(){if(m5)return ZC;m5=1;var e=Bj();function t(r,n){var i;return e(r,function(s,o,a){return i=n(s,o,a),!i}),!!i}return ZC=t,ZC}var eA,g5;function k2e(){if(g5)return eA;g5=1;var e=tJ(),t=wl(),r=O2e(),n=$s(),i=O1();function s(o,a,l){var u=n(o)?e:r;return l&&i(o,a,l)&&(a=void 0),u(o,t(a,3))}return eA=s,eA}var I2e=k2e();const j2e=Dr(I2e);var pl=function(t,r){var n=t.alwaysShow,i=t.ifOverflow;return n&&(i="extendDomain"),i===r},tA,v5;function $2e(){if(v5)return tA;v5=1;var e=_J();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return tA=t,tA}var rA,y5;function N2e(){if(y5)return rA;y5=1;var e=$2e(),t=vJ(),r=wl();function n(i,s){var o={};return s=r(s,3),t(i,function(a,l,u){e(o,l,s(a,l,u))}),o}return rA=n,rA}var D2e=N2e();const R2e=Dr(D2e);var nA,_5;function L2e(){if(_5)return nA;_5=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(!r(t[n],n,t))return!1;return!0}return nA=e,nA}var iA,b5;function F2e(){if(b5)return iA;b5=1;var e=Bj();function t(r,n){var i=!0;return e(r,function(s,o,a){return i=!!n(s,o,a),i}),i}return iA=t,iA}var sA,w5;function B2e(){if(w5)return sA;w5=1;var e=L2e(),t=F2e(),r=wl(),n=$s(),i=O1();function s(o,a,l){var u=n(o)?e:t;return l&&i(o,a,l)&&(a=void 0),u(o,r(a,3))}return sA=s,sA}var z2e=B2e();const U2e=Dr(z2e);function t0(e){"@babel/helpers - typeof";return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t0(e)}function V2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tee(n.key),n)}}function W2e(e,t,r){return t&&x5(e.prototype,t),r&&x5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function M5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M5(Object(r),!0).forEach(function(n){_$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _$(e,t,r){return t=tee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tee(e){var t=G2e(e,"string");return t0(t)=="symbol"?t:t+""}function G2e(e,t){if(t0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(t0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ree=function(t,r){var n=t.x,i=t.y,s=r.x,o=r.y;return{x:Math.min(n,s),y:Math.min(i,o),width:Math.abs(s-n),height:Math.abs(o-i)}},q2e=function(t){var r=t.x1,n=t.y1,i=t.x2,s=t.y2;return ree({x:r,y:n},{x:i,y:s})},nee=(function(){function e(t){V2e(this,e),this.scale=t}return W2e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(r)+a}default:return this.scale(r)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],s=n[n.length-1];return i<=s?r>=i&&r<=s:r>=s&&r<=i}}],[{key:"create",value:function(r){return new e(r)}}])})();_$(nee,"EPS",1e-4);var b$=function(t){var r=Object.keys(t).reduce(function(n,i){return sw(sw({},n),{},_$({},i,nee.create(t[i])))},{});return sw(sw({},r),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,a=s.position;return R2e(i,function(l,u){return r[u].apply(l,{bandAware:o,position:a})})},isInRange:function(i){return U2e(i,function(s,o){return r[o].isInRange(s)})}})},oA,T5;function H2e(){if(T5)return oA;T5=1;var e=wl(),t=M0(),r=C1();function n(i){return function(s,o,a){var l=Object(s);if(!t(s)){var u=e(o,3);s=r(s),o=function(d){return u(l[d],d,l)}}var c=i(s,o,a);return c>-1?l[u?s[c]:c]:void 0}}return oA=n,oA}var aA,S5;function K2e(){if(S5)return aA;S5=1;var e=QZ();function t(r){var n=e(r),i=n%1;return n===n?i?n-i:n:0}return aA=t,aA}var lA,P5;function X2e(){if(P5)return lA;P5=1;var e=fJ(),t=wl(),r=K2e(),n=Math.max;function i(s,o,a){var l=s==null?0:s.length;if(!l)return-1;var u=a==null?0:r(a);return u<0&&(u=n(l+u,0)),e(s,t(o,3),u)}return lA=i,lA}var uA,E5;function Y2e(){if(E5)return uA;E5=1;var e=H2e(),t=X2e(),r=e(t);return uA=r,uA}Y2e();var Q2e=EQ();const J2e=Dr(Q2e);var Z2e=J2e(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),iee=$.createContext(void 0),see=$.createContext(void 0),oee=$.createContext(void 0),eIe=$.createContext({}),aee=$.createContext(void 0),tIe=$.createContext(0),rIe=$.createContext(0),C5=function(t){var r=t.state,n=r.xAxisMap,i=r.yAxisMap,s=r.offset,o=t.clipPathId,a=t.children,l=t.width,u=t.height,c=Z2e(s);return ye.createElement(iee.Provider,{value:n},ye.createElement(see.Provider,{value:i},ye.createElement(eIe.Provider,{value:s},ye.createElement(oee.Provider,{value:c},ye.createElement(aee.Provider,{value:o},ye.createElement(tIe.Provider,{value:u},ye.createElement(rIe.Provider,{value:l},a)))))))},nIe=function(){return $.useContext(aee)},iIe=function(t){var r=$.useContext(iee);r==null&&Um();var n=r[t];return n==null&&Um(),n},sIe=function(t){var r=$.useContext(see);r==null&&Um();var n=r[t];return n==null&&Um(),n},oIe=function(){var t=$.useContext(oee);return t};function Ym(e){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ym(e)}function aIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uee(n.key),n)}}function uIe(e,t,r){return t&&lIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cIe(e,t,r){return t=Fx(t),dIe(e,lee()?Reflect.construct(t,r||[],Fx(e).constructor):t.apply(e,r))}function dIe(e,t){if(t&&(Ym(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fIe(e)}function fIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lee=function(){return!!e})()}function Fx(e){return Fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fx(e)}function hIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gk(e,t)}function Gk(e,t){return Gk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Gk(e,t)}function A5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function O5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A5(Object(r),!0).forEach(function(n){w$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w$(e,t,r){return t=uee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uee(e){var t=pIe(e,"string");return Ym(t)=="symbol"?t:t+""}function pIe(e,t){if(Ym(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ym(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function mIe(e,t){return _Ie(e)||yIe(e,t)||vIe(e,t)||gIe()}function gIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vIe(e,t){if(e){if(typeof e=="string")return k5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k5(e,t)}}function k5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yIe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function _Ie(e){if(Array.isArray(e))return e}function qk(){return qk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qk.apply(this,arguments)}var bIe=function(t,r){var n;return ye.isValidElement(t)?n=ye.cloneElement(t,r):hr(t)?n=t(r):n=ye.createElement("line",qk({},r,{className:"recharts-reference-line-line"})),n},wIe=function(t,r,n,i,s,o,a,l,u){var c=s.x,d=s.y,h=s.width,m=s.height;if(n){var g=u.y,v=t.y.apply(g,{position:o});if(pl(u,"discard")&&!t.y.isInRange(v))return null;var y=[{x:c+h,y:v},{x:c,y:v}];return l==="left"?y.reverse():y}if(r){var x=u.x,w=t.x.apply(x,{position:o});if(pl(u,"discard")&&!t.x.isInRange(w))return null;var S=[{x:w,y:d+m},{x:w,y:d}];return a==="top"?S.reverse():S}if(i){var M=u.segment,T=M.map(function(P){return t.apply(P,{position:o})});return pl(u,"discard")&&j2e(T,function(P){return!t.isInRange(P)})?null:T}return null};function xIe(e){var t=e.x,r=e.y,n=e.segment,i=e.xAxisId,s=e.yAxisId,o=e.shape,a=e.className,l=e.alwaysShow,u=nIe(),c=iIe(i),d=sIe(s),h=oIe();if(!u||!h)return null;Su(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=b$({x:c.scale,y:d.scale}),g=ci(t),v=ci(r),y=n&&n.length===2,x=wIe(m,g,v,y,h,e.position,c.orientation,d.orientation,e);if(!x)return null;var w=mIe(x,2),S=w[0],M=S.x,T=S.y,P=w[1],E=P.x,A=P.y,L=pl(e,"hidden")?"url(#".concat(u,")"):void 0,B=O5(O5({clipPath:L},lr(e,!0)),{},{x1:M,y1:T,x2:E,y2:A});return ye.createElement(Vn,{className:br("recharts-reference-line",a)},bIe(o,B),Li.renderCallByParent(e,q2e({x1:M,y1:T,x2:E,y2:A})))}var x$=(function(e){function t(){return aIe(this,t),cIe(this,t,arguments)}return hIe(t,e),uIe(t,[{key:"render",value:function(){return ye.createElement(xIe,this.props)}}])})(ye.Component);w$(x$,"displayName","ReferenceLine");w$(x$,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Hk(){return Hk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hk.apply(this,arguments)}function Qm(e){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qm(e)}function I5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function j5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I5(Object(r),!0).forEach(function(n){X1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dee(n.key),n)}}function SIe(e,t,r){return t&&TIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function PIe(e,t,r){return t=Bx(t),EIe(e,cee()?Reflect.construct(t,r||[],Bx(e).constructor):t.apply(e,r))}function EIe(e,t){if(t&&(Qm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CIe(e)}function CIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cee=function(){return!!e})()}function Bx(e){return Bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bx(e)}function AIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kk(e,t)}function Kk(e,t){return Kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Kk(e,t)}function X1(e,t,r){return t=dee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dee(e){var t=OIe(e,"string");return Qm(t)=="symbol"?t:t+""}function OIe(e,t){if(Qm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kIe=function(t){var r=t.x,n=t.y,i=t.xAxis,s=t.yAxis,o=b$({x:i.scale,y:s.scale}),a=o.apply({x:r,y:n},{bandAware:!0});return pl(t,"discard")&&!o.isInRange(a)?null:a},Y1=(function(e){function t(){return MIe(this,t),PIe(this,t,arguments)}return AIe(t,e),SIe(t,[{key:"render",value:function(){var n=this.props,i=n.x,s=n.y,o=n.r,a=n.alwaysShow,l=n.clipPathId,u=ci(i),c=ci(s);if(Su(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!c)return null;var d=kIe(this.props);if(!d)return null;var h=d.x,m=d.y,g=this.props,v=g.shape,y=g.className,x=pl(this.props,"hidden")?"url(#".concat(l,")"):void 0,w=j5(j5({clipPath:x},lr(this.props,!0)),{},{cx:h,cy:m});return ye.createElement(Vn,{className:br("recharts-reference-dot",y)},t.renderDot(v,w),Li.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])})(ye.Component);X1(Y1,"displayName","ReferenceDot");X1(Y1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});X1(Y1,"renderDot",function(e,t){var r;return ye.isValidElement(e)?r=ye.cloneElement(e,t):hr(e)?r=e(t):r=ye.createElement(y$,Hk({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Xk(){return Xk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xk.apply(this,arguments)}function Jm(e){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(e)}function $5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function N5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$5(Object(r),!0).forEach(function(n){Q1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hee(n.key),n)}}function $Ie(e,t,r){return t&&jIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NIe(e,t,r){return t=zx(t),DIe(e,fee()?Reflect.construct(t,r||[],zx(e).constructor):t.apply(e,r))}function DIe(e,t){if(t&&(Jm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RIe(e)}function RIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fee=function(){return!!e})()}function zx(e){return zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zx(e)}function LIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yk(e,t)}function Yk(e,t){return Yk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Yk(e,t)}function Q1(e,t,r){return t=hee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hee(e){var t=FIe(e,"string");return Jm(t)=="symbol"?t:t+""}function FIe(e,t){if(Jm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var BIe=function(t,r,n,i,s){var o=s.x1,a=s.x2,l=s.y1,u=s.y2,c=s.xAxis,d=s.yAxis;if(!c||!d)return null;var h=b$({x:c.scale,y:d.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},g={x:r?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return pl(s,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:ree(m,g)},J1=(function(e){function t(){return IIe(this,t),NIe(this,t,arguments)}return LIe(t,e),$Ie(t,[{key:"render",value:function(){var n=this.props,i=n.x1,s=n.x2,o=n.y1,a=n.y2,l=n.className,u=n.alwaysShow,c=n.clipPathId;Su(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=ci(i),h=ci(s),m=ci(o),g=ci(a),v=this.props.shape;if(!d&&!h&&!m&&!g&&!v)return null;var y=BIe(d,h,m,g,this.props);if(!y&&!v)return null;var x=pl(this.props,"hidden")?"url(#".concat(c,")"):void 0;return ye.createElement(Vn,{className:br("recharts-reference-area",l)},t.renderRect(v,N5(N5({clipPath:x},lr(this.props,!0)),y)),Li.renderCallByParent(this.props,y))}}])})(ye.Component);Q1(J1,"displayName","ReferenceArea");Q1(J1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Q1(J1,"renderRect",function(e,t){var r;return ye.isValidElement(e)?r=ye.cloneElement(e,t):hr(e)?r=e(t):r=ye.createElement(v$,Xk({},t,{className:"recharts-reference-area-rect"})),r});function D5(e){return WIe(e)||VIe(e)||UIe(e)||zIe()}function zIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UIe(e,t){if(e){if(typeof e=="string")return Qk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qk(e,t)}}function VIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WIe(e){if(Array.isArray(e))return Qk(e)}function Qk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Jk=function(t,r,n,i,s){var o=fl(t,x$),a=fl(t,Y1),l=[].concat(D5(o),D5(a)),u=fl(t,J1),c="".concat(i,"Id"),d=i[0],h=r;if(l.length&&(h=l.reduce(function(v,y){if(y.props[c]===n&&pl(y.props,"extendDomain")&&St(y.props[d])){var x=y.props[d];return[Math.min(v[0],x),Math.max(v[1],x)]}return v},h)),u.length){var m="".concat(d,"1"),g="".concat(d,"2");h=u.reduce(function(v,y){if(y.props[c]===n&&pl(y.props,"extendDomain")&&St(y.props[m])&&St(y.props[g])){var x=y.props[m],w=y.props[g];return[Math.min(v[0],x,w),Math.max(v[1],x,w)]}return v},h)}return s&&s.length&&(h=s.reduce(function(v,y){return St(y)?[Math.min(v[0],y),Math.max(v[1],y)]:v},h)),h},cA={exports:{}},R5;function GIe(){return R5||(R5=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var m=new i(c,d||l,h),g=r?r+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],m]:l._events[g].push(m):(l._events[g]=m,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)t.call(c,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=r?r+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,m=d.length,g=new Array(m);h<m;h++)g[h]=d[h].fn;return g},a.prototype.listenerCount=function(u){var c=r?r+u:u,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,c,d,h,m,g){var v=r?r+u:u;if(!this._events[v])return!1;var y=this._events[v],x=arguments.length,w,S;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),x){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,c),!0;case 3:return y.fn.call(y.context,c,d),!0;case 4:return y.fn.call(y.context,c,d,h),!0;case 5:return y.fn.call(y.context,c,d,h,m),!0;case 6:return y.fn.call(y.context,c,d,h,m,g),!0}for(S=1,w=new Array(x-1);S<x;S++)w[S-1]=arguments[S];y.fn.apply(y.context,w)}else{var M=y.length,T;for(S=0;S<M;S++)switch(y[S].once&&this.removeListener(u,y[S].fn,void 0,!0),x){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,c);break;case 3:y[S].fn.call(y[S].context,c,d);break;case 4:y[S].fn.call(y[S].context,c,d,h);break;default:if(!w)for(T=1,w=new Array(x-1);T<x;T++)w[T-1]=arguments[T];y[S].fn.apply(y[S].context,w)}}return!0},a.prototype.on=function(u,c,d){return s(this,u,c,d,!1)},a.prototype.once=function(u,c,d){return s(this,u,c,d,!0)},a.prototype.removeListener=function(u,c,d,h){var m=r?r+u:u;if(!this._events[m])return this;if(!c)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===c&&(!h||g.once)&&(!d||g.context===d)&&o(this,m);else{for(var v=0,y=[],x=g.length;v<x;v++)(g[v].fn!==c||h&&!g[v].once||d&&g[v].context!==d)&&y.push(g[v]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=r?r+u:u,this._events[c]&&o(this,c)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(cA)),cA.exports}var qIe=GIe();const HIe=Dr(qIe);var dA=new HIe,fA="recharts.syncMouseEvents";function r0(e){"@babel/helpers - typeof";return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r0(e)}function KIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pee(n.key),n)}}function YIe(e,t,r){return t&&XIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hA(e,t,r){return t=pee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pee(e){var t=QIe(e,"string");return r0(t)=="symbol"?t:t+""}function QIe(e,t){if(r0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(r0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var JIe=(function(){function e(){KIe(this,e),hA(this,"activeIndex",0),hA(this,"coordinateList",[]),hA(this,"layout","horizontal")}return YIe(e,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,s=i===void 0?null:i,o=r.container,a=o===void 0?null:o,l=r.layout,u=l===void 0?null:l,c=r.offset,d=c===void 0?null:c,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=a??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,a=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,c=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=s+l+u,h=o+this.offset.top+a/2+c;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])})();function ZIe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],i=e?.[1];if(n&&i&&St(n)&&St(i))return!0}return!1}function eje(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function mee(e){var t=e.cx,r=e.cy,n=e.radius,i=e.startAngle,s=e.endAngle,o=un(t,r,n,i),a=un(t,r,n,s);return{points:[o,a],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}function tje(e,t,r){var n,i,s,o;if(e==="horizontal")n=t.x,s=n,i=r.top,o=r.top+r.height;else if(e==="vertical")i=t.y,o=i,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var a=t.cx,l=t.cy,u=t.innerRadius,c=t.outerRadius,d=t.angle,h=un(a,l,u,d),m=un(a,l,c,d);n=h.x,i=h.y,s=m.x,o=m.y}else return mee(t);return[{x:n,y:i},{x:s,y:o}]}function n0(e){"@babel/helpers - typeof";return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n0(e)}function L5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ow(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L5(Object(r),!0).forEach(function(n){rje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rje(e,t,r){return t=nje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nje(e){var t=ije(e,"string");return n0(t)=="symbol"?t:t+""}function ije(e,t){if(n0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(n0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sje(e){var t,r,n=e.element,i=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,a=e.activePayload,l=e.offset,u=e.activeTooltipIndex,c=e.tooltipAxisBandSize,d=e.layout,h=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!s||!o||h!=="ScatterChart"&&i!=="axis")return null;var g,v=Ck;if(h==="ScatterChart")g=o,v=rke;else if(h==="BarChart")g=eje(d,o,l,c),v=v$;else if(d==="radial"){var y=mee(o),x=y.cx,w=y.cy,S=y.radius,M=y.startAngle,T=y.endAngle;g={cx:x,cy:w,startAngle:M,endAngle:T,innerRadius:S,outerRadius:S},v=DZ}else g={points:tje(d,o,l)},v=Ck;var P=ow(ow(ow(ow({stroke:"#ccc",pointerEvents:"none"},l),g),lr(m,!1)),{},{payload:a,payloadIndex:u,className:br("recharts-tooltip-cursor",m.className)});return $.isValidElement(m)?$.cloneElement(m,P):$.createElement(v,P)}var oje=["item"],aje=["children","className","width","height","style","compact","title","desc"];function Zm(e){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zm(e)}function n_(){return n_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n_.apply(this,arguments)}function F5(e,t){return cje(e)||uje(e,t)||vee(e,t)||lje()}function lje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function cje(e){if(Array.isArray(e))return e}function B5(e,t){if(e==null)return{};var r=dje(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dje(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hje(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yee(n.key),n)}}function pje(e,t,r){return t&&hje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mje(e,t,r){return t=Ux(t),gje(e,gee()?Reflect.construct(t,r||[],Ux(e).constructor):t.apply(e,r))}function gje(e,t){if(t&&(Zm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vje(e)}function vje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gee=function(){return!!e})()}function Ux(e){return Ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ux(e)}function yje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zk(e,t)}function Zk(e,t){return Zk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Zk(e,t)}function eg(e){return wje(e)||bje(e)||vee(e)||_je()}function _je(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vee(e,t){if(e){if(typeof e=="string")return e2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e2(e,t)}}function bje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wje(e){if(Array.isArray(e))return e2(e)}function e2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z5(Object(r),!0).forEach(function(n){Gt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gt(e,t,r){return t=yee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yee(e){var t=xje(e,"string");return Zm(t)=="symbol"?t:t+""}function xje(e,t){if(Zm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mje={xAxis:["bottom","top"],yAxis:["left","right"]},Tje={width:"100%",height:"100%"},_ee={x:0,y:0};function aw(e){return e}var Sje=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Pje=function(t,r,n,i){var s=r.find(function(c){return c&&c.index===n});if(s){if(t==="horizontal")return{x:s.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:s.coordinate};if(t==="centric"){var o=s.coordinate,a=i.radius;return Ye(Ye(Ye({},i),un(i.cx,i.cy,a,o)),{},{angle:o,radius:a})}var l=s.coordinate,u=i.angle;return Ye(Ye(Ye({},i),un(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return _ee},Z1=function(t,r){var n=r.graphicalItems,i=r.dataStartIndex,s=r.dataEndIndex,o=(n??[]).reduce(function(a,l){var u=l.props.data;return u&&u.length?[].concat(eg(a),eg(u)):a},[]);return o.length>0?o:t&&t.length&&St(i)&&St(s)?t.slice(i,s+1):[]};function bee(e){return e==="number"?[0,"auto"]:void 0}var t2=function(t,r,n,i){var s=t.graphicalItems,o=t.tooltipAxis,a=Z1(r,t);return n<0||!s||!s.length||n>=a.length?null:s.reduce(function(l,u){var c,d=(c=u.props.data)!==null&&c!==void 0?c:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=d===void 0?a:d;h=zO(m,o.dataKey,i)}else h=d&&d[n]||a[n];return h?[].concat(eg(l),[JEe(u,h)]):l},[])},U5=function(t,r,n,i){var s=i||{x:t.chartX,y:t.chartY},o=Sje(s,n),a=t.orderedTooltipTicks,l=t.tooltipAxis,u=t.tooltipTicks,c=DEe(o,a,u,l);if(c>=0&&u){var d=u[c]&&u[c].value,h=t2(t,r,c,d),m=Pje(n,a,c,s);return{activeTooltipIndex:c,activeLabel:d,activePayload:h,activeCoordinate:m}}return null},Eje=function(t,r){var n=r.axes,i=r.graphicalItems,s=r.axisType,o=r.axisIdKey,a=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,c=t.layout,d=t.children,h=t.stackOffset,m=AZ(c,s);return n.reduce(function(g,v){var y,x=v.type.defaultProps!==void 0?Ye(Ye({},v.type.defaultProps),v.props):v.props,w=x.type,S=x.dataKey,M=x.allowDataOverflow,T=x.allowDuplicatedCategory,P=x.scale,E=x.ticks,A=x.includeHidden,L=x[o];if(g[L])return g;var B=Z1(t.data,{graphicalItems:i.filter(function(U){var te,ee=o in U.props?U.props[o]:(te=U.type.defaultProps)===null||te===void 0?void 0:te[o];return ee===L}),dataStartIndex:l,dataEndIndex:u}),V=B.length,G,z,K;ZIe(x.domain,M,w)&&(G=xk(x.domain,null,M),m&&(w==="number"||P!=="auto")&&(K=Zy(B,S,"category")));var J=bee(w);if(!G||G.length===0){var X,Q=(X=x.domain)!==null&&X!==void 0?X:J;if(S){if(G=Zy(B,S,w),w==="category"&&m){var W=Obe(G);T&&W?(z=G,G=Dx(0,V)):T||(G=ZV(Q,G,v).reduce(function(U,te){return U.indexOf(te)>=0?U:[].concat(eg(U),[te])},[]))}else if(w==="category")T?G=G.filter(function(U){return U!==""&&!yr(U)}):G=ZV(Q,G,v).reduce(function(U,te){return U.indexOf(te)>=0||te===""||yr(te)?U:[].concat(eg(U),[te])},[]);else if(w==="number"){var oe=zEe(B,i.filter(function(U){var te,ee,pe=o in U.props?U.props[o]:(te=U.type.defaultProps)===null||te===void 0?void 0:te[o],Oe="hide"in U.props?U.props.hide:(ee=U.type.defaultProps)===null||ee===void 0?void 0:ee.hide;return pe===L&&(A||!Oe)}),S,s,c);oe&&(G=oe)}m&&(w==="number"||P!=="auto")&&(K=Zy(B,S,"category"))}else m?G=Dx(0,V):a&&a[L]&&a[L].hasStack&&w==="number"?G=h==="expand"?[0,1]:OZ(a[L].stackGroups,l,u):G=CZ(B,i.filter(function(U){var te=o in U.props?U.props[o]:U.type.defaultProps[o],ee="hide"in U.props?U.props.hide:U.type.defaultProps.hide;return te===L&&(A||!ee)}),w,c,!0);if(w==="number")G=Jk(d,G,L,s,E),Q&&(G=xk(Q,G,M));else if(w==="category"&&Q){var ce=Q,D=G.every(function(U){return ce.indexOf(U)>=0});D&&(G=ce)}}return Ye(Ye({},g),{},Gt({},L,Ye(Ye({},x),{},{axisType:s,domain:G,categoricalDomain:K,duplicateDomain:z,originalDomain:(y=x.domain)!==null&&y!==void 0?y:J,isCategorical:m,layout:c})))},{})},Cje=function(t,r){var n=r.graphicalItems,i=r.Axis,s=r.axisType,o=r.axisIdKey,a=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,c=t.layout,d=t.children,h=Z1(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),m=h.length,g=AZ(c,s),v=-1;return n.reduce(function(y,x){var w=x.type.defaultProps!==void 0?Ye(Ye({},x.type.defaultProps),x.props):x.props,S=w[o],M=bee("number");if(!y[S]){v++;var T;return g?T=Dx(0,m):a&&a[S]&&a[S].hasStack?(T=OZ(a[S].stackGroups,l,u),T=Jk(d,T,S,s)):(T=xk(M,CZ(h,n.filter(function(P){var E,A,L=o in P.props?P.props[o]:(E=P.type.defaultProps)===null||E===void 0?void 0:E[o],B="hide"in P.props?P.props.hide:(A=P.type.defaultProps)===null||A===void 0?void 0:A.hide;return L===S&&!B}),"number",c),i.defaultProps.allowDataOverflow),T=Jk(d,T,S,s)),Ye(Ye({},y),{},Gt({},S,Ye(Ye({axisType:s},i.defaultProps),{},{hide:!0,orientation:Ta(Mje,"".concat(s,".").concat(v%2),null),domain:T,originalDomain:M,isCategorical:g,layout:c})))}return y},{})},Aje=function(t,r){var n=r.axisType,i=n===void 0?"xAxis":n,s=r.AxisComp,o=r.graphicalItems,a=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,c=t.children,d="".concat(i,"Id"),h=fl(c,s),m={};return h&&h.length?m=Eje(t,{axes:h,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(m=Cje(t,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:u})),m},Oje=function(t){var r=rm(t),n=Fy(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:zj(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Mk(r,n)}},V5=function(t){var r=t.children,n=t.defaultShowTooltip,i=Co(r,Xm),s=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},kje=function(t){return!t||!t.length?!1:t.some(function(r){var n=Tu(r&&r.type);return n&&n.indexOf("Bar")>=0})},W5=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Ije=function(t,r){var n=t.props,i=t.graphicalItems,s=t.xAxisMap,o=s===void 0?{}:s,a=t.yAxisMap,l=a===void 0?{}:a,u=n.width,c=n.height,d=n.children,h=n.margin||{},m=Co(d,Xm),g=Co(d,bm),v=Object.keys(l).reduce(function(T,P){var E=l[P],A=E.orientation;return!E.mirror&&!E.hide?Ye(Ye({},T),{},Gt({},A,T[A]+E.width)):T},{left:h.left||0,right:h.right||0}),y=Object.keys(o).reduce(function(T,P){var E=o[P],A=E.orientation;return!E.mirror&&!E.hide?Ye(Ye({},T),{},Gt({},A,Ta(T,"".concat(A))+E.height)):T},{top:h.top||0,bottom:h.bottom||0}),x=Ye(Ye({},y),v),w=x.bottom;m&&(x.bottom+=m.props.height||Xm.defaultProps.height),g&&r&&(x=FEe(x,i,n,r));var S=u-x.left-x.right,M=c-x.top-x.bottom;return Ye(Ye({brushBottom:w},x),{},{width:Math.max(S,0),height:Math.max(M,0)})},jje=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},$je=function(t){var r=t.chartName,n=t.GraphicalChild,i=t.defaultTooltipEventType,s=i===void 0?"axis":i,o=t.validateTooltipEventTypes,a=o===void 0?["axis"]:o,l=t.axisComponents,u=t.legendContent,c=t.formatAxisMap,d=t.defaultProps,h=function(y,x){var w=x.graphicalItems,S=x.stackGroups,M=x.offset,T=x.updateId,P=x.dataStartIndex,E=x.dataEndIndex,A=y.barSize,L=y.layout,B=y.barGap,V=y.barCategoryGap,G=y.maxBarSize,z=W5(L),K=z.numericAxisName,J=z.cateAxisName,X=kje(w),Q=[];return w.forEach(function(W,oe){var ce=Z1(y.data,{graphicalItems:[W],dataStartIndex:P,dataEndIndex:E}),D=W.type.defaultProps!==void 0?Ye(Ye({},W.type.defaultProps),W.props):W.props,U=D.dataKey,te=D.maxBarSize,ee=D["".concat(K,"Id")],pe=D["".concat(J,"Id")],Oe={},xe=l.reduce(function(Qe,et){var ot=x["".concat(et.axisType,"Map")],Xe=D["".concat(et.axisType,"Id")];ot&&ot[Xe]||et.axisType==="zAxis"||Um();var lt=ot[Xe];return Ye(Ye({},Qe),{},Gt(Gt({},et.axisType,lt),"".concat(et.axisType,"Ticks"),Fy(lt)))},Oe),Ie=xe[J],Pe=xe["".concat(J,"Ticks")],he=S&&S[ee]&&S[ee].hasStack&&YEe(W,S[ee].stackGroups),re=Tu(W.type).indexOf("Bar")>=0,ue=Mk(Ie,Pe),ae=[],Ce=X&&REe({barSize:A,stackGroups:S,totalSize:jje(xe,J)});if(re){var $e,Ne,Le=yr(te)?G:te,Ve=($e=(Ne=Mk(Ie,Pe,!0))!==null&&Ne!==void 0?Ne:Le)!==null&&$e!==void 0?$e:0;ae=LEe({barGap:B,barCategoryGap:V,bandSize:Ve!==ue?Ve:ue,sizeList:Ce[pe],maxBarSize:Le}),Ve!==ue&&(ae=ae.map(function(Qe){return Ye(Ye({},Qe),{},{position:Ye(Ye({},Qe.position),{},{offset:Qe.position.offset-Ve/2})})}))}var He=W&&W.type&&W.type.getComposedData;He&&Q.push({props:Ye(Ye({},He(Ye(Ye({},xe),{},{displayedData:ce,props:y,dataKey:U,item:W,bandSize:ue,barPosition:ae,offset:M,stackedData:he,layout:L,dataStartIndex:P,dataEndIndex:E}))),{},Gt(Gt(Gt({key:W.key||"item-".concat(oe)},K,xe[K]),J,xe[J]),"animationId",T)),childIndex:zbe(W,y.children),item:W})}),Q},m=function(y,x){var w=y.props,S=y.dataStartIndex,M=y.dataEndIndex,T=y.updateId;if(!pz({props:w}))return null;var P=w.children,E=w.layout,A=w.stackOffset,L=w.data,B=w.reverseStackOrder,V=W5(E),G=V.numericAxisName,z=V.cateAxisName,K=fl(P,n),J=KEe(L,K,"".concat(G,"Id"),"".concat(z,"Id"),A,B),X=l.reduce(function(D,U){var te="".concat(U.axisType,"Map");return Ye(Ye({},D),{},Gt({},te,Aje(w,Ye(Ye({},U),{},{graphicalItems:K,stackGroups:U.axisType===G&&J,dataStartIndex:S,dataEndIndex:M}))))},{}),Q=Ije(Ye(Ye({},X),{},{props:w,graphicalItems:K}),x?.legendBBox);Object.keys(X).forEach(function(D){X[D]=c(w,X[D],Q,D.replace("Map",""),r)});var W=X["".concat(z,"Map")],oe=Oje(W),ce=h(w,Ye(Ye({},X),{},{dataStartIndex:S,dataEndIndex:M,updateId:T,graphicalItems:K,stackGroups:J,offset:Q}));return Ye(Ye({formattedGraphicalItems:ce,graphicalItems:K,offset:Q,stackGroups:J},oe),X)},g=(function(v){function y(x){var w,S,M;return fje(this,y),M=mje(this,y,[x]),Gt(M,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Gt(M,"accessibilityManager",new JIe),Gt(M,"handleLegendBBoxUpdate",function(T){if(T){var P=M.state,E=P.dataStartIndex,A=P.dataEndIndex,L=P.updateId;M.setState(Ye({legendBBox:T},m({props:M.props,dataStartIndex:E,dataEndIndex:A,updateId:L},Ye(Ye({},M.state),{},{legendBBox:T}))))}}),Gt(M,"handleReceiveSyncEvent",function(T,P,E){if(M.props.syncId===T){if(E===M.eventEmitterSymbol&&typeof M.props.syncMethod!="function")return;M.applySyncEvent(P)}}),Gt(M,"handleBrushChange",function(T){var P=T.startIndex,E=T.endIndex;if(P!==M.state.dataStartIndex||E!==M.state.dataEndIndex){var A=M.state.updateId;M.setState(function(){return Ye({dataStartIndex:P,dataEndIndex:E},m({props:M.props,dataStartIndex:P,dataEndIndex:E,updateId:A},M.state))}),M.triggerSyncEvent({dataStartIndex:P,dataEndIndex:E})}}),Gt(M,"handleMouseEnter",function(T){var P=M.getMouseInfo(T);if(P){var E=Ye(Ye({},P),{},{isTooltipActive:!0});M.setState(E),M.triggerSyncEvent(E);var A=M.props.onMouseEnter;hr(A)&&A(E,T)}}),Gt(M,"triggeredAfterMouseMove",function(T){var P=M.getMouseInfo(T),E=P?Ye(Ye({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};M.setState(E),M.triggerSyncEvent(E);var A=M.props.onMouseMove;hr(A)&&A(E,T)}),Gt(M,"handleItemMouseEnter",function(T){M.setState(function(){return{isTooltipActive:!0,activeItem:T,activePayload:T.tooltipPayload,activeCoordinate:T.tooltipPosition||{x:T.cx,y:T.cy}}})}),Gt(M,"handleItemMouseLeave",function(){M.setState(function(){return{isTooltipActive:!1}})}),Gt(M,"handleMouseMove",function(T){T.persist(),M.throttleTriggeredAfterMouseMove(T)}),Gt(M,"handleMouseLeave",function(T){M.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};M.setState(P),M.triggerSyncEvent(P);var E=M.props.onMouseLeave;hr(E)&&E(P,T)}),Gt(M,"handleOuterEvent",function(T){var P=Bbe(T),E=Ta(M.props,"".concat(P));if(P&&hr(E)){var A,L;/.*touch.*/i.test(P)?L=M.getMouseInfo(T.changedTouches[0]):L=M.getMouseInfo(T),E((A=L)!==null&&A!==void 0?A:{},T)}}),Gt(M,"handleClick",function(T){var P=M.getMouseInfo(T);if(P){var E=Ye(Ye({},P),{},{isTooltipActive:!0});M.setState(E),M.triggerSyncEvent(E);var A=M.props.onClick;hr(A)&&A(E,T)}}),Gt(M,"handleMouseDown",function(T){var P=M.props.onMouseDown;if(hr(P)){var E=M.getMouseInfo(T);P(E,T)}}),Gt(M,"handleMouseUp",function(T){var P=M.props.onMouseUp;if(hr(P)){var E=M.getMouseInfo(T);P(E,T)}}),Gt(M,"handleTouchMove",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&M.throttleTriggeredAfterMouseMove(T.changedTouches[0])}),Gt(M,"handleTouchStart",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&M.handleMouseDown(T.changedTouches[0])}),Gt(M,"handleTouchEnd",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&M.handleMouseUp(T.changedTouches[0])}),Gt(M,"triggerSyncEvent",function(T){M.props.syncId!==void 0&&dA.emit(fA,M.props.syncId,T,M.eventEmitterSymbol)}),Gt(M,"applySyncEvent",function(T){var P=M.props,E=P.layout,A=P.syncMethod,L=M.state.updateId,B=T.dataStartIndex,V=T.dataEndIndex;if(T.dataStartIndex!==void 0||T.dataEndIndex!==void 0)M.setState(Ye({dataStartIndex:B,dataEndIndex:V},m({props:M.props,dataStartIndex:B,dataEndIndex:V,updateId:L},M.state)));else if(T.activeTooltipIndex!==void 0){var G=T.chartX,z=T.chartY,K=T.activeTooltipIndex,J=M.state,X=J.offset,Q=J.tooltipTicks;if(!X)return;if(typeof A=="function")K=A(Q,T);else if(A==="value"){K=-1;for(var W=0;W<Q.length;W++)if(Q[W].value===T.activeLabel){K=W;break}}var oe=Ye(Ye({},X),{},{x:X.left,y:X.top}),ce=Math.min(G,oe.x+oe.width),D=Math.min(z,oe.y+oe.height),U=Q[K]&&Q[K].value,te=t2(M.state,M.props.data,K),ee=Q[K]?{x:E==="horizontal"?Q[K].coordinate:ce,y:E==="horizontal"?D:Q[K].coordinate}:_ee;M.setState(Ye(Ye({},T),{},{activeLabel:U,activeCoordinate:ee,activePayload:te,activeTooltipIndex:K}))}else M.setState(T)}),Gt(M,"renderCursor",function(T){var P,E=M.state,A=E.isTooltipActive,L=E.activeCoordinate,B=E.activePayload,V=E.offset,G=E.activeTooltipIndex,z=E.tooltipAxisBandSize,K=M.getTooltipEventType(),J=(P=T.props.active)!==null&&P!==void 0?P:A,X=M.props.layout,Q=T.key||"_recharts-cursor";return ye.createElement(sje,{key:Q,activeCoordinate:L,activePayload:B,activeTooltipIndex:G,chartName:r,element:T,isActive:J,layout:X,offset:V,tooltipAxisBandSize:z,tooltipEventType:K})}),Gt(M,"renderPolarAxis",function(T,P,E){var A=Ta(T,"type.axisType"),L=Ta(M.state,"".concat(A,"Map")),B=T.type.defaultProps,V=B!==void 0?Ye(Ye({},B),T.props):T.props,G=L&&L[V["".concat(A,"Id")]];return $.cloneElement(T,Ye(Ye({},G),{},{className:br(A,G.className),key:T.key||"".concat(P,"-").concat(E),ticks:Fy(G,!0)}))}),Gt(M,"renderPolarGrid",function(T){var P=T.props,E=P.radialLines,A=P.polarAngles,L=P.polarRadius,B=M.state,V=B.radiusAxisMap,G=B.angleAxisMap,z=rm(V),K=rm(G),J=K.cx,X=K.cy,Q=K.innerRadius,W=K.outerRadius;return $.cloneElement(T,{polarAngles:Array.isArray(A)?A:Fy(K,!0).map(function(oe){return oe.coordinate}),polarRadius:Array.isArray(L)?L:Fy(z,!0).map(function(oe){return oe.coordinate}),cx:J,cy:X,innerRadius:Q,outerRadius:W,key:T.key||"polar-grid",radialLines:E})}),Gt(M,"renderLegend",function(){var T=M.state.formattedGraphicalItems,P=M.props,E=P.children,A=P.width,L=P.height,B=M.props.margin||{},V=A-(B.left||0)-(B.right||0),G=PZ({children:E,formattedGraphicalItems:T,legendWidth:V,legendContent:u});if(!G)return null;var z=G.item,K=B5(G,oje);return $.cloneElement(z,Ye(Ye({},K),{},{chartWidth:A,chartHeight:L,margin:B,onBBoxUpdate:M.handleLegendBBoxUpdate}))}),Gt(M,"renderTooltip",function(){var T,P=M.props,E=P.children,A=P.accessibilityLayer,L=Co(E,_u);if(!L)return null;var B=M.state,V=B.isTooltipActive,G=B.activeCoordinate,z=B.activePayload,K=B.activeLabel,J=B.offset,X=(T=L.props.active)!==null&&T!==void 0?T:V;return $.cloneElement(L,{viewBox:Ye(Ye({},J),{},{x:J.left,y:J.top}),active:X,label:K,payload:X?z:[],coordinate:G,accessibilityLayer:A})}),Gt(M,"renderBrush",function(T){var P=M.props,E=P.margin,A=P.data,L=M.state,B=L.offset,V=L.dataStartIndex,G=L.dataEndIndex,z=L.updateId;return $.cloneElement(T,{key:T.key||"_recharts-brush",onChange:tw(M.handleBrushChange,T.props.onChange),data:A,x:St(T.props.x)?T.props.x:B.left,y:St(T.props.y)?T.props.y:B.top+B.height+B.brushBottom-(E.bottom||0),width:St(T.props.width)?T.props.width:B.width,startIndex:V,endIndex:G,updateId:"brush-".concat(z)})}),Gt(M,"renderReferenceElement",function(T,P,E){if(!T)return null;var A=M,L=A.clipPathId,B=M.state,V=B.xAxisMap,G=B.yAxisMap,z=B.offset,K=T.type.defaultProps||{},J=T.props,X=J.xAxisId,Q=X===void 0?K.xAxisId:X,W=J.yAxisId,oe=W===void 0?K.yAxisId:W;return $.cloneElement(T,{key:T.key||"".concat(P,"-").concat(E),xAxis:V[Q],yAxis:G[oe],viewBox:{x:z.left,y:z.top,width:z.width,height:z.height},clipPathId:L})}),Gt(M,"renderActivePoints",function(T){var P=T.item,E=T.activePoint,A=T.basePoint,L=T.childIndex,B=T.isRange,V=[],G=P.props.key,z=P.item.type.defaultProps!==void 0?Ye(Ye({},P.item.type.defaultProps),P.item.props):P.item.props,K=z.activeDot,J=z.dataKey,X=Ye(Ye({index:L,dataKey:J,cx:E.x,cy:E.y,r:4,fill:g$(P.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},lr(K,!1)),tx(K));return V.push(y.renderActiveDot(K,X,"".concat(G,"-activePoint-").concat(L))),A?V.push(y.renderActiveDot(K,Ye(Ye({},X),{},{cx:A.x,cy:A.y}),"".concat(G,"-basePoint-").concat(L))):B&&V.push(null),V}),Gt(M,"renderGraphicChild",function(T,P,E){var A=M.filterFormatItem(T,P,E);if(!A)return null;var L=M.getTooltipEventType(),B=M.state,V=B.isTooltipActive,G=B.tooltipAxis,z=B.activeTooltipIndex,K=B.activeLabel,J=M.props.children,X=Co(J,_u),Q=A.props,W=Q.points,oe=Q.isRange,ce=Q.baseLine,D=A.item.type.defaultProps!==void 0?Ye(Ye({},A.item.type.defaultProps),A.item.props):A.item.props,U=D.activeDot,te=D.hide,ee=D.activeBar,pe=D.activeShape,Oe=!!(!te&&V&&X&&(U||ee||pe)),xe={};L!=="axis"&&X&&X.props.trigger==="click"?xe={onClick:tw(M.handleItemMouseEnter,T.props.onClick)}:L!=="axis"&&(xe={onMouseLeave:tw(M.handleItemMouseLeave,T.props.onMouseLeave),onMouseEnter:tw(M.handleItemMouseEnter,T.props.onMouseEnter)});var Ie=$.cloneElement(T,Ye(Ye({},A.props),xe));function Pe(et){return typeof G.dataKey=="function"?G.dataKey(et.payload):null}if(Oe)if(z>=0){var he,re;if(G.dataKey&&!G.allowDuplicatedCategory){var ue=typeof G.dataKey=="function"?Pe:"payload.".concat(G.dataKey.toString());he=zO(W,ue,K),re=oe&&ce&&zO(ce,ue,K)}else he=W?.[z],re=oe&&ce&&ce[z];if(pe||ee){var ae=T.props.activeIndex!==void 0?T.props.activeIndex:z;return[$.cloneElement(T,Ye(Ye(Ye({},A.props),xe),{},{activeIndex:ae})),null,null]}if(!yr(he))return[Ie].concat(eg(M.renderActivePoints({item:A,activePoint:he,basePoint:re,childIndex:z,isRange:oe})))}else{var Ce,$e=(Ce=M.getItemByXY(M.state.activeCoordinate))!==null&&Ce!==void 0?Ce:{graphicalItem:Ie},Ne=$e.graphicalItem,Le=Ne.item,Ve=Le===void 0?T:Le,He=Ne.childIndex,Qe=Ye(Ye(Ye({},A.props),xe),{},{activeIndex:He});return[$.cloneElement(Ve,Qe),null,null]}return oe?[Ie,null,null]:[Ie,null]}),Gt(M,"renderCustomized",function(T,P,E){return $.cloneElement(T,Ye(Ye({key:"recharts-customized-".concat(E)},M.props),M.state))}),Gt(M,"renderMap",{CartesianGrid:{handler:aw,once:!0},ReferenceArea:{handler:M.renderReferenceElement},ReferenceLine:{handler:aw},ReferenceDot:{handler:M.renderReferenceElement},XAxis:{handler:aw},YAxis:{handler:aw},Brush:{handler:M.renderBrush,once:!0},Bar:{handler:M.renderGraphicChild},Line:{handler:M.renderGraphicChild},Area:{handler:M.renderGraphicChild},Radar:{handler:M.renderGraphicChild},RadialBar:{handler:M.renderGraphicChild},Scatter:{handler:M.renderGraphicChild},Pie:{handler:M.renderGraphicChild},Funnel:{handler:M.renderGraphicChild},Tooltip:{handler:M.renderCursor,once:!0},PolarGrid:{handler:M.renderPolarGrid,once:!0},PolarAngleAxis:{handler:M.renderPolarAxis},PolarRadiusAxis:{handler:M.renderPolarAxis},Customized:{handler:M.renderCustomized}}),M.clipPathId="".concat((w=x.id)!==null&&w!==void 0?w:x1("recharts"),"-clip"),M.throttleTriggeredAfterMouseMove=SJ(M.triggeredAfterMouseMove,(S=x.throttleDelay)!==null&&S!==void 0?S:1e3/60),M.state={},M}return yje(y,v),pje(y,[{key:"componentDidMount",value:function(){var w,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,S=w.children,M=w.data,T=w.height,P=w.layout,E=Co(S,_u);if(E){var A=E.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var L=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,B=t2(this.state,M,A,L),V=this.state.tooltipTicks[A].coordinate,G=(this.state.offset.top+T)/2,z=P==="horizontal",K=z?{x:V,y:G}:{y:V,x:G},J=this.state.formattedGraphicalItems.find(function(Q){var W=Q.item;return W.type.name==="Scatter"});J&&(K=Ye(Ye({},K),J.props.points[A].tooltipPosition),B=J.props.points[A].tooltipPayload);var X={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:L,activePayload:B,activeCoordinate:K};this.setState(X),this.renderCursor(E),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var M,T;this.accessibilityManager.setDetails({offset:{left:(M=this.props.margin.left)!==null&&M!==void 0?M:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0}})}return null}},{key:"componentDidUpdate",value:function(w){WO([Co(w.children,_u)],[Co(this.props.children,_u)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Co(this.props.children,_u);if(w&&typeof w.props.shared=="boolean"){var S=w.props.shared?"axis":"item";return a.indexOf(S)>=0?S:s}return s}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var S=this.container,M=S.getBoundingClientRect(),T=CMe(M),P={chartX:Math.round(w.pageX-T.left),chartY:Math.round(w.pageY-T.top)},E=M.width/S.offsetWidth||1,A=this.inRange(P.chartX,P.chartY,E);if(!A)return null;var L=this.state,B=L.xAxisMap,V=L.yAxisMap,G=this.getTooltipEventType();if(G!=="axis"&&B&&V){var z=rm(B).scale,K=rm(V).scale,J=z&&z.invert?z.invert(P.chartX):null,X=K&&K.invert?K.invert(P.chartY):null;return Ye(Ye({},P),{},{xValue:J,yValue:X})}var Q=U5(this.state,this.props.data,this.props.layout,A);return Q?Ye(Ye({},P),Q):null}},{key:"inRange",value:function(w,S){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,T=this.props.layout,P=w/M,E=S/M;if(T==="horizontal"||T==="vertical"){var A=this.state.offset,L=P>=A.left&&P<=A.left+A.width&&E>=A.top&&E<=A.top+A.height;return L?{x:P,y:E}:null}var B=this.state,V=B.angleAxisMap,G=B.radiusAxisMap;if(V&&G){var z=rm(V);return rW({x:P,y:E},z)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,S=this.getTooltipEventType(),M=Co(w,_u),T={};M&&S==="axis"&&(M.props.trigger==="click"?T={onClick:this.handleClick}:T={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var P=tx(this.props,this.handleOuterEvent);return Ye(Ye({},P),T)}},{key:"addListener",value:function(){dA.on(fA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){dA.removeListener(fA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,S,M){for(var T=this.state.formattedGraphicalItems,P=0,E=T.length;P<E;P++){var A=T[P];if(A.item===w||A.props.key===w.key||S===Tu(A.item.type)&&M===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,S=this.state.offset,M=S.left,T=S.top,P=S.height,E=S.width;return ye.createElement("defs",null,ye.createElement("clipPath",{id:w},ye.createElement("rect",{x:M,y:T,height:P,width:E})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(S,M){var T=F5(M,2),P=T[0],E=T[1];return Ye(Ye({},S),{},Gt({},P,E.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(S,M){var T=F5(M,2),P=T[0],E=T[1];return Ye(Ye({},S),{},Gt({},P,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[w])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(w){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[w])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(w){var S=this.state,M=S.formattedGraphicalItems,T=S.activeItem;if(M&&M.length)for(var P=0,E=M.length;P<E;P++){var A=M[P],L=A.props,B=A.item,V=B.type.defaultProps!==void 0?Ye(Ye({},B.type.defaultProps),B.props):B.props,G=Tu(B.type);if(G==="Bar"){var z=(L.data||[]).find(function(Q){return DOe(w,Q)});if(z)return{graphicalItem:A,payload:z}}else if(G==="RadialBar"){var K=(L.data||[]).find(function(Q){return rW(w,Q)});if(K)return{graphicalItem:A,payload:K}}else if(H1(A,T)||K1(A,T)||Z_(A,T)){var J=o2e({graphicalItem:A,activeTooltipItem:T,itemData:V.data}),X=V.activeIndex===void 0?J:V.activeIndex;return{graphicalItem:Ye(Ye({},A),{},{childIndex:X}),payload:Z_(A,T)?V.data[J]:A.props.data[J]}}}return null}},{key:"render",value:function(){var w=this;if(!pz(this))return null;var S=this.props,M=S.children,T=S.className,P=S.width,E=S.height,A=S.style,L=S.compact,B=S.title,V=S.desc,G=B5(S,aje),z=lr(G,!1);if(L)return ye.createElement(C5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ye.createElement(qO,n_({},z,{width:P,height:E,title:B,desc:V}),this.renderClipPath(),gz(M,this.renderMap)));if(this.props.accessibilityLayer){var K,J;z.tabIndex=(K=this.props.tabIndex)!==null&&K!==void 0?K:0,z.role=(J=this.props.role)!==null&&J!==void 0?J:"application",z.onKeyDown=function(Q){w.accessibilityManager.keyboardEvent(Q)},z.onFocus=function(){w.accessibilityManager.focus()}}var X=this.parseEventsOfWrapper();return ye.createElement(C5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ye.createElement("div",n_({className:br("recharts-wrapper",T),style:Ye({position:"relative",cursor:"default",width:P,height:E},A)},X,{ref:function(W){w.container=W}}),ye.createElement(qO,n_({},z,{width:P,height:E,title:B,desc:V,style:Tje}),this.renderClipPath(),gz(M,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})($.Component);return Gt(g,"displayName",r),Gt(g,"defaultProps",Ye({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Gt(g,"getDerivedStateFromProps",function(v,y){var x=v.dataKey,w=v.data,S=v.children,M=v.width,T=v.height,P=v.layout,E=v.stackOffset,A=v.margin,L=y.dataStartIndex,B=y.dataEndIndex;if(y.updateId===void 0){var V=V5(v);return Ye(Ye(Ye({},V),{},{updateId:0},m(Ye(Ye({props:v},V),{},{updateId:0}),y)),{},{prevDataKey:x,prevData:w,prevWidth:M,prevHeight:T,prevLayout:P,prevStackOffset:E,prevMargin:A,prevChildren:S})}if(x!==y.prevDataKey||w!==y.prevData||M!==y.prevWidth||T!==y.prevHeight||P!==y.prevLayout||E!==y.prevStackOffset||!UO(A,y.prevMargin)){var G=V5(v),z={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},K=Ye(Ye({},U5(y,w,P)),{},{updateId:y.updateId+1}),J=Ye(Ye(Ye({},G),z),K);return Ye(Ye(Ye({},J),m(Ye({props:v},J),y)),{},{prevDataKey:x,prevData:w,prevWidth:M,prevHeight:T,prevLayout:P,prevStackOffset:E,prevMargin:A,prevChildren:S})}if(!WO(S,y.prevChildren)){var X,Q,W,oe,ce=Co(S,Xm),D=ce&&(X=(Q=ce.props)===null||Q===void 0?void 0:Q.startIndex)!==null&&X!==void 0?X:L,U=ce&&(W=(oe=ce.props)===null||oe===void 0?void 0:oe.endIndex)!==null&&W!==void 0?W:B,te=D!==L||U!==B,ee=!yr(w),pe=ee&&!te?y.updateId:y.updateId+1;return Ye(Ye({updateId:pe},m(Ye(Ye({props:v},y),{},{updateId:pe,dataStartIndex:D,dataEndIndex:U}),y)),{},{prevChildren:S,dataStartIndex:D,dataEndIndex:U})}return null}),Gt(g,"renderActiveDot",function(v,y,x){var w;return $.isValidElement(v)?w=$.cloneElement(v,y):hr(v)?w=v(y):w=ye.createElement(y$,y),ye.createElement(Vn,{className:"recharts-active-dot",key:x},w)}),function(y){return ye.createElement(g,y)}},Nje=$je({chartName:"PieChart",GraphicalChild:Bu,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:q1},{axisType:"radiusAxis",AxisComp:W1}],formatAxisMap:aCe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Dje=()=>{const e=js(),{items:t,loading:r}=td(),{outfits:n,loading:i}=uh(),s=r||i,o=t.reduce((g,v)=>{const y=g.find(x=>x.name===v.category);return y?y.value+=1:g.push({name:v.category,value:1}),g},[]),a=t.reduce((g,v)=>{const y=g.find(x=>x.name===v.color);return y?y.value+=1:g.push({name:v.color,value:1,hex:v.hex_color}),g},[]).sort((g,v)=>v.value-g.value),l=t.length>0?[...t].sort((g,v)=>v.times_worn-g.times_worn)[0]:null,u=["hsl(315 70% 65%)","hsl(280 60% 70%)","hsl(340 70% 70%)","hsl(290 60% 75%)","hsl(320 65% 68%)"],c=t.length,d=n.length,h=n.filter(g=>g.is_favorite).length,m=t.reduce((g,v)=>g+v.times_worn,0);return s?_.jsx("div",{className:"min-h-screen bg-background pb-20",children:_.jsxs("div",{className:"space-y-6 px-4 pt-6",children:[_.jsx(ol,{className:"h-32 w-full rounded-3xl"}),_.jsx(ol,{className:"h-48 w-full rounded-3xl"}),_.jsx(ol,{className:"h-64 w-full rounded-3xl"})]})}):_.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[_.jsxs("div",{className:"bg-gradient-to-br from-pink-400 via-purple-400 to-purple-500 text-white px-6 py-8 rounded-b-[2rem]",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[_.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:_.jsx(Eu,{className:"w-5 h-5"})}),_.jsx("h1",{className:"text-2xl font-bold",children:"Analytics"})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_.jsx(Er,{className:"bg-white/95 border-0 shadow-sm",children:_.jsx(Nr,{className:"p-4",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(qte,{className:"w-8 h-8 text-pink-500"}),_.jsxs("div",{children:[_.jsx("p",{className:"text-2xl font-bold text-gray-800",children:c}),_.jsx("p",{className:"text-xs text-gray-600",children:"Fashion Items"})]})]})})}),_.jsx(Er,{className:"bg-white/95 border-0 shadow-sm",children:_.jsx(Nr,{className:"p-4",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(Pw,{className:"w-8 h-8 text-purple-500"}),_.jsxs("div",{children:[_.jsx("p",{className:"text-2xl font-bold text-gray-800",children:h}),_.jsx("p",{className:"text-xs text-gray-600",children:"Favorite Looks"})]})]})})}),_.jsx(Er,{className:"bg-white/95 border-0 shadow-sm",children:_.jsx(Nr,{className:"p-4",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(s_,{className:"w-8 h-8 text-pink-500"}),_.jsxs("div",{children:[_.jsx("p",{className:"text-2xl font-bold text-gray-800",children:d}),_.jsx("p",{className:"text-xs text-gray-600",children:"Outfits Created"})]})]})})}),_.jsx(Er,{className:"bg-white/95 border-0 shadow-sm",children:_.jsx(Nr,{className:"p-4",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(a2,{className:"w-8 h-8 text-purple-500"}),_.jsxs("div",{children:[_.jsx("p",{className:"text-2xl font-bold text-gray-800",children:m}),_.jsx("p",{className:"text-xs text-gray-600",children:"Total Wears"})]})]})})})]})]}),_.jsxs("div",{className:"px-6 py-6 space-y-6",children:[_.jsx(Er,{className:"border-0 shadow-sm rounded-3xl overflow-hidden",children:_.jsxs(Nr,{className:"p-6",children:[_.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Wardrobe Composition"}),_.jsx("div",{className:"flex items-center justify-center",children:_.jsx(wMe,{width:"100%",height:200,children:_.jsx(Nje,{children:_.jsx(Bu,{data:o,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"hsl(var(--primary))",dataKey:"value",strokeWidth:0,children:o.map((g,v)=>_.jsx(Vj,{fill:u[v%u.length]},`cell-${v}`))})})})}),_.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4",children:o.slice(0,4).map((g,v)=>_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:u[v%u.length]}}),_.jsx("span",{className:"text-sm text-gray-600",children:g.name})]},g.name))})]})}),_.jsx(Er,{className:"border-0 shadow-sm rounded-3xl overflow-hidden",children:_.jsxs(Nr,{className:"p-6",children:[_.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Your Signature Hues"}),_.jsx("div",{className:"flex h-16 rounded-2xl overflow-hidden mb-6",children:a.slice(0,5).map((g,v)=>_.jsx("div",{style:{backgroundColor:g.hex,width:`${g.value/t.length*100}%`},className:"transition-all"},v))}),l&&_.jsx("div",{className:"bg-gray-50 rounded-2xl p-4",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Most Worn"}),_.jsx("p",{className:"font-semibold text-gray-800",children:l.name}),_.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.times_worn," wears"]})]}),l.image_url&&_.jsx("img",{src:l.image_url,alt:l.name,className:"w-16 h-16 object-cover rounded-xl"})]})})]})})]})]})},Rje=o0("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),wee=$.forwardRef(({className:e,variant:t,...r},n)=>_.jsx("div",{ref:n,role:"alert",className:Kt(Rje({variant:t}),e),...r}));wee.displayName="Alert";const Lje=$.forwardRef(({className:e,...t},r)=>_.jsx("h5",{ref:r,className:Kt("mb-1 font-medium leading-none tracking-tight",e),...t}));Lje.displayName="AlertTitle";const xee=$.forwardRef(({className:e,...t},r)=>_.jsx("div",{ref:r,className:Kt("text-sm [&_p]:leading-relaxed",e),...t}));xee.displayName="AlertDescription";const Fje=()=>{const{items:e,loading:t}=td(),{user:r}=Oa();h0();const{toast:n}=ro(),[i,s]=$.useState([]),[o,a]=$.useState(!1),[l,u]=$.useState(""),[c,d]=$.useState("all"),[h,m]=$.useState("all");$.useEffect(()=>{!t&&e.length>0&&g()},[t,e]);const g=async()=>{if(r){a(!0);try{const y=e.map(E=>E.category),x=e.map(E=>E.color),w={};y.forEach(E=>{w[E]=(w[E]||0)+1});const M=["Tops","Bottoms","Dresses","Shoes","Accessories","Outerwear"].filter(E=>!y.includes(E)||w[E]<3).map(E=>({category:E,color:x[Math.floor(Math.random()*x.length)]})),{data:T,error:P}=await Mr.functions.invoke("product-search",{body:{gaps:M.slice(0,6),userId:r.id}});if(P)throw P;T?.products&&s(T.products)}catch(y){console.error("Error generating recommendations:",y),n({title:"Error",description:"Failed to generate recommendations",variant:"destructive"})}finally{a(!1)}}},v=i.filter(y=>{const x=l===""||y.name.toLowerCase().includes(l.toLowerCase())||y.category.toLowerCase().includes(l.toLowerCase()),w=c==="all"||y.category===c,S=h==="all"||(()=>{const M=parseFloat(y.price.replace("$",""));return h==="under50"?M<50:h==="50to100"?M>=50&&M<100:h==="100to200"?M>=100&&M<200:h==="over200"?M>=200:!0})();return x&&w&&S});return t||o?_.jsx("div",{className:"safe-top safe-bottom pb-20 px-4",children:_.jsxs("div",{className:"space-y-6",children:[_.jsx(ol,{className:"h-32 w-full"}),_.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2,3,4].map(y=>_.jsx(ol,{className:"h-64 w-full"},y))})]})}):_.jsxs("div",{className:"safe-top safe-bottom pb-20 bg-gradient-to-b from-background via-background/95 to-background",children:[_.jsxs("div",{className:"hero-header",children:[_.jsxs("div",{className:"hero-content",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[_.jsx(Hte,{className:"w-8 h-8 text-primary"}),_.jsx("h1",{className:"hero-title",children:"Style Shop"})]}),_.jsx("p",{className:"hero-subtitle",children:"Curated picks for your wardrobe"})]}),_.jsx("div",{className:"hero-decoration"})]}),_.jsxs("div",{className:"px-4 space-y-6",children:[_.jsxs(wee,{className:"border-primary/30 bg-primary/5",children:[_.jsx(Bte,{className:"h-4 w-4"}),_.jsxs(xee,{className:"text-sm",children:[_.jsx("strong",{children:"Affiliate Disclosure:"})," OutfitFlex may earn a commission from purchases made through these links at no extra cost to you."]})]}),_.jsx(Er,{className:"bg-gradient-to-r from-primary/20 via-secondary/20 to-accent/20 border-primary/30",children:_.jsx(Nr,{className:"p-4",children:_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx(Do,{className:"w-6 h-6 text-primary flex-shrink-0 mt-1"}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"AI-Powered Recommendations"}),_.jsxs("p",{className:"text-sm text-muted-foreground",children:["Based on your ",e.length," items, we've curated these picks to complement your style and fill gaps in your wardrobe."]})]})]})})}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"relative",children:[_.jsx(S8,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),_.jsx(hs,{placeholder:"Search products...",className:"pl-9",value:l,onChange:y=>u(y.target.value)})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsxs(Io,{value:c,onValueChange:d,children:[_.jsx(Qs,{className:"flex-1",children:_.jsx(jo,{placeholder:"Category"})}),_.jsxs(Js,{children:[_.jsx(Vt,{value:"all",children:"All Categories"}),_.jsx(Vt,{value:"Tops",children:"Tops"}),_.jsx(Vt,{value:"Bottoms",children:"Bottoms"}),_.jsx(Vt,{value:"Dresses",children:"Dresses"}),_.jsx(Vt,{value:"Shoes",children:"Shoes"}),_.jsx(Vt,{value:"Accessories",children:"Accessories"}),_.jsx(Vt,{value:"Outerwear",children:"Outerwear"})]})]}),_.jsxs(Io,{value:h,onValueChange:m,children:[_.jsx(Qs,{className:"flex-1",children:_.jsx(jo,{placeholder:"Price"})}),_.jsxs(Js,{children:[_.jsx(Vt,{value:"all",children:"All Prices"}),_.jsx(Vt,{value:"under50",children:"Under $50"}),_.jsx(Vt,{value:"50to100",children:"$50 - $100"}),_.jsx(Vt,{value:"100to200",children:"$100 - $200"}),_.jsx(Vt,{value:"over200",children:"Over $200"})]})]})]})]}),_.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",v.length," of ",i.length," products"]}),_.jsx("div",{className:"grid grid-cols-2 gap-4",children:v.map(y=>_.jsxs(Er,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[_.jsxs("div",{className:"relative",children:[_.jsx("img",{src:y.image,alt:y.name,className:"w-full h-40 object-cover"}),_.jsxs(Fi,{className:"absolute top-2 right-2 bg-primary text-primary-foreground",children:[y.matchScore,"% Match"]})]}),_.jsxs(Qf,{className:"p-3",children:[_.jsx(Jf,{className:"text-sm line-clamp-2",children:y.name}),_.jsx("div",{className:"flex gap-2 mt-1",children:_.jsx(Fi,{variant:"outline",className:"text-xs",children:y.category})})]}),_.jsxs(Nr,{className:"p-3 pt-0",children:[_.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-2",children:y.reason}),_.jsx("p",{className:"text-lg font-bold text-foreground",children:y.price})]}),_.jsx(iH,{className:"p-3 pt-0",children:_.jsxs(Yt,{className:"w-full",size:"sm",onClick:()=>{window.open(y.shopUrl,"_blank"),n({title:"Opening Shop",description:"Redirecting to retailer..."})},children:[_.jsx(Rte,{className:"w-4 h-4 mr-2"}),"Shop Now"]})})]},y.id))}),_.jsx(Er,{className:"bg-muted/50",children:_.jsx(Nr,{className:"p-4",children:_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx(s_,{className:"w-5 h-5 text-primary flex-shrink-0 mt-1"}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-semibold text-sm text-foreground mb-1",children:"Smart Shopping Assistant"}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"Our AI analyzes your wardrobe to recommend items that will maximize your outfit combinations and fill style gaps. Integration with major retailers coming soon!"})]})]})})})]})]})},Bje=()=>{const[e,t]=$.useState(!0),[r,n]=$.useState(""),[i,s]=$.useState(""),[o,a]=$.useState(""),[l,u]=$.useState(""),[c,d]=$.useState(""),[h,m]=$.useState(""),[g,v]=$.useState(""),[y,x]=$.useState(!1),{signIn:w,signUp:S}=Oa(),M=js(),{toast:T}=ro(),P=async E=>{if(E.preventDefault(),!e&&i!==o){T({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(!e&&l.trim().length<2){T({title:"Error",description:"Please enter your full name",variant:"destructive"});return}x(!0);try{const{error:A}=e?await w(r,i):await S(r,i,l,c,h,g);A?T({title:"Error",description:A.message,variant:"destructive"}):e?(M("/"),T({title:"Welcome back!",description:"You've been signed in successfully."})):T({title:"Account created!",description:"Please check your email to verify your account."})}catch{T({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{x(!1)}};return _.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-[hsl(330,70%,65%)] via-[hsl(315,75%,70%)] to-[hsl(280,70%,75%)]",children:_.jsxs("div",{className:"w-full max-w-md",children:[_.jsx("div",{className:"text-center mb-8",children:_.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"OutfitFlex"})}),_.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl p-8 shadow-2xl",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:e?"Welcome Back":"Create Your Profile"}),_.jsx("p",{className:"text-gray-600",children:e?"Sign in to continue your style journey":"Unlock your ultimate style companion"})]}),_.jsxs("form",{onSubmit:P,className:"space-y-4",children:[!e&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"relative",children:[_.jsx(u2,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),_.jsx(hs,{type:"text",placeholder:"Name",value:l,onChange:E=>u(E.target.value),required:!0,className:"h-14 pl-12 pr-4 bg-white border-0 shadow-md rounded-2xl text-base placeholder:text-gray-400 focus-visible:ring-2 focus-visible:ring-[hsl(315,70%,65%)]"})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_.jsxs("select",{value:c,onChange:E=>d(E.target.value),className:"h-14 pl-4 pr-8 bg-white border-0 shadow-md rounded-2xl text-base text-gray-700 appearance-none cursor-pointer focus:ring-2 focus:ring-[hsl(315,70%,65%)] focus:outline-none",children:[_.jsx("option",{value:"",children:"Age Group"}),_.jsx("option",{value:"child",children:"Child (5-12)"}),_.jsx("option",{value:"teen",children:"Teen (13-19)"}),_.jsx("option",{value:"young_adult",children:"Young Adult (20-35)"}),_.jsx("option",{value:"adult",children:"Adult (36-55)"}),_.jsx("option",{value:"senior",children:"Senior (55+)"})]}),_.jsxs("select",{value:h,onChange:E=>m(E.target.value),className:"h-14 pl-4 pr-8 bg-white border-0 shadow-md rounded-2xl text-base text-gray-700 appearance-none cursor-pointer focus:ring-2 focus:ring-[hsl(315,70%,65%)] focus:outline-none",children:[_.jsx("option",{value:"",children:"Gender"}),_.jsx("option",{value:"male",children:"Male"}),_.jsx("option",{value:"female",children:"Female"}),_.jsx("option",{value:"non_binary",children:"Non-Binary"}),_.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),_.jsx(hs,{type:"text",placeholder:"Region (e.g., India, USA, UK)",value:g,onChange:E=>v(E.target.value),className:"h-14 px-4 bg-white border-0 shadow-md rounded-2xl text-base placeholder:text-gray-400 focus-visible:ring-2 focus-visible:ring-[hsl(315,70%,65%)]"})]}),_.jsxs("div",{className:"relative",children:[_.jsx(Ute,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),_.jsx(hs,{type:"email",placeholder:"Email Address",value:r,onChange:E=>n(E.target.value),required:!0,className:"h-14 pl-12 pr-4 bg-white border-0 shadow-md rounded-2xl text-base placeholder:text-gray-400 focus-visible:ring-2 focus-visible:ring-[hsl(315,70%,65%)]"})]}),_.jsxs("div",{className:"relative",children:[_.jsx(F$,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),_.jsx(hs,{type:"password",placeholder:"Password",value:i,onChange:E=>s(E.target.value),required:!0,minLength:6,className:"h-14 pl-12 pr-4 bg-white border-0 shadow-md rounded-2xl text-base placeholder:text-gray-400 focus-visible:ring-2 focus-visible:ring-[hsl(315,70%,65%)]"})]}),!e&&_.jsxs("div",{className:"relative",children:[_.jsx(F$,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),_.jsx(hs,{type:"password",placeholder:"Confirm Password",value:o,onChange:E=>a(E.target.value),required:!0,minLength:6,className:"h-14 pl-12 pr-4 bg-white border-0 shadow-md rounded-2xl text-base placeholder:text-gray-400 focus-visible:ring-2 focus-visible:ring-[hsl(315,70%,65%)]"})]}),_.jsx(Yt,{type:"submit",className:"w-full h-14 text-lg font-semibold bg-gradient-to-r from-[hsl(330,70%,60%)] to-[hsl(260,70%,65%)] hover:from-[hsl(330,70%,55%)] hover:to-[hsl(260,70%,60%)] text-white rounded-2xl shadow-lg transition-all duration-300 mt-6",disabled:y,children:y?_.jsx(T8,{className:"h-5 w-5 animate-spin"}):e?"Log In":"Get Started"})]}),_.jsx("div",{className:"text-center mt-6",children:_.jsxs("p",{className:"text-gray-700",children:[e?"Already have on account? ":"Already have an account? ",_.jsx("button",{type:"button",onClick:()=>t(!e),className:"text-[hsl(260,70%,55%)] font-semibold hover:underline",children:e?"Sign Up":"Log In"})]})})]})]})})},zje=new nse,Uje=()=>{const{user:e}=Oa(),[t,r]=$.useState(!1),[n,i]=$.useState(!1);$.useEffect(()=>{if(e){const a=localStorage.getItem("hasSeenOnboarding"),l=localStorage.getItem("hasSeenWelcome");a?l||i(!0):r(!0)}},[e]);const s=()=>{localStorage.setItem("hasSeenOnboarding","true"),r(!1),i(!0)},o=()=>{localStorage.setItem("hasSeenWelcome","true"),i(!1)};return _.jsxs(_.Fragment,{children:[t&&_.jsx(Ehe,{onComplete:s}),n&&_.jsx(Mhe,{onComplete:o}),_.jsxs(Qse,{children:[_.jsx(Ni,{path:"/auth",element:_.jsx(Bje,{})}),_.jsxs(Ni,{path:"/",element:_.jsx(zle,{children:_.jsx(Vle,{})}),children:[_.jsx(Ni,{index:!0,element:_.jsx(Che,{})}),_.jsx(Ni,{path:"wardrobe",element:_.jsx(Ahe,{})}),_.jsx(Ni,{path:"wardrobe/add",element:_.jsx(tQ,{})}),_.jsx(Ni,{path:"wardrobe/item/:id",element:_.jsx(Qve,{})}),_.jsx(Ni,{path:"outfits",element:_.jsx(Yhe,{})}),_.jsx(Ni,{path:"outfits/create",element:_.jsx(Jve,{})}),_.jsx(Ni,{path:"outfits/detail/:id",element:_.jsx(Zve,{})}),_.jsx(Ni,{path:"outfits/suggestions",element:_.jsx(eye,{})}),_.jsx(Ni,{path:"weather-outfits",element:_.jsx(tye,{})}),_.jsx(Ni,{path:"calendar",element:_.jsx(V0e,{})}),_.jsx(Ni,{path:"analytics",element:_.jsx(Dje,{})}),_.jsx(Ni,{path:"shop",element:_.jsx(Fje,{})}),_.jsx(Ni,{path:"profile",element:_.jsx(pme,{})})]}),_.jsx(Ni,{path:"*",element:_.jsx(mme,{})})]})]})},Vje=()=>_.jsx(sse,{client:zje,children:_.jsx(soe,{children:_.jsx(Ble,{children:_.jsxs($ie,{children:[_.jsx(Ire,{}),_.jsx(ane,{}),_.jsx(Uje,{})]})})})});Dee.createRoot(document.getElementById("root")).render(_.jsx(Vje,{}));
